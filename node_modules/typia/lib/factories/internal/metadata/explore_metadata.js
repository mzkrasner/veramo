"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.explore_metadata = void 0;
var Metadata_1 = require("../../../metadata/Metadata");
var emend_metadata_atomics_1 = require("./emend_metadata_atomics");
var iterate_metadata_1 = require("./iterate_metadata");
var explore_metadata = function (checker) {
    return function (options) {
        return function (collection) {
            return function (type, parentResolved, aliased) {
                if (aliased === void 0) { aliased = false; }
                var meta = Metadata_1.Metadata.initialize(parentResolved);
                collection.entire_.add(meta);
                if (type === null)
                    return meta;
                (0, iterate_metadata_1.iterate_metadata)(checker)(options)(collection)(meta, type, parentResolved, aliased);
                (0, emend_metadata_atomics_1.emend_metadata_atomics)(meta);
                if (meta.resolved) {
                    (0, emend_metadata_atomics_1.emend_metadata_atomics)(meta.resolved.original);
                    (0, emend_metadata_atomics_1.emend_metadata_atomics)(meta.resolved.returns);
                }
                return meta;
            };
        };
    };
};
exports.explore_metadata = explore_metadata;
//# sourceMappingURL=explore_metadata.js.map