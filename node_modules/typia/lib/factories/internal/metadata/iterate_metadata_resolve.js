"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.iterate_metadata_resolve = void 0;
var Metadata_1 = require("../../../metadata/Metadata");
var MetadataResolved_1 = require("../../../metadata/MetadataResolved");
var Writable_1 = require("../../../typings/Writable");
var TypeFactory_1 = require("../../TypeFactory");
var iterate_metadata_1 = require("./iterate_metadata");
var iterate_metadata_resolve = function (checker) {
    return function (options) {
        return function (collection) {
            return function (meta, type, resolved, aliased) {
                if (options.resolve === false || resolved === true)
                    return false;
                var escaped = TypeFactory_1.TypeFactory.resolve(checker)(type);
                if (escaped === null)
                    return false;
                if (meta.resolved === null) {
                    (0, Writable_1.Writable)(meta).resolved = MetadataResolved_1.MetadataResolved.create({
                        original: Metadata_1.Metadata.initialize(),
                        returns: Metadata_1.Metadata.initialize(),
                    });
                }
                (0, iterate_metadata_1.iterate_metadata)(checker)(options)(collection)(meta.resolved.original, type, true, aliased);
                (0, iterate_metadata_1.iterate_metadata)(checker)(options)(collection)(meta.resolved.returns, escaped, true, aliased);
                return true;
            };
        };
    };
};
exports.iterate_metadata_resolve = iterate_metadata_resolve;
//# sourceMappingURL=iterate_metadata_resolve.js.map