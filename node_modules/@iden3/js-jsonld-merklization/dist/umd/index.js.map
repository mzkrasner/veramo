{
  "version": 3,
  "sources": ["../../node_modules/@esbuild-plugins/node-globals-polyfill/_virtual-process-polyfill_.js", "../../node_modules/@esbuild-plugins/node-globals-polyfill/Buffer.js", "../../node_modules/@esbuild-plugins/node-globals-polyfill/_buffer.js", "node-modules-polyfills:events", "node-modules-polyfills-commonjs:events", "../../node_modules/readable-stream/lib/internal/streams/stream-browser.js", "node-modules-polyfills:buffer", "node-modules-polyfills-commonjs:buffer", "node-modules-polyfills:process", "../../node_modules/rollup-plugin-node-polyfills/polyfills/inherits.js", "node-modules-polyfills:util", "node-modules-polyfills-commonjs:util", "../../node_modules/readable-stream/lib/internal/streams/buffer_list.js", "../../node_modules/readable-stream/lib/internal/streams/destroy.js", "../../node_modules/readable-stream/errors-browser.js", "../../node_modules/readable-stream/lib/internal/streams/state.js", "../../node_modules/inherits/inherits_browser.js", "../../node_modules/util-deprecate/browser.js", "../../node_modules/readable-stream/lib/_stream_writable.js", "../../node_modules/readable-stream/lib/_stream_duplex.js", "../../node_modules/safe-buffer/index.js", "../../node_modules/string_decoder/lib/string_decoder.js", "../../node_modules/readable-stream/lib/internal/streams/end-of-stream.js", "../../node_modules/readable-stream/lib/internal/streams/async_iterator.js", "../../node_modules/readable-stream/lib/internal/streams/from-browser.js", "../../node_modules/readable-stream/lib/_stream_readable.js", "../../node_modules/readable-stream/lib/_stream_transform.js", "../../node_modules/readable-stream/lib/_stream_passthrough.js", "../../node_modules/readable-stream/lib/internal/streams/pipeline.js", "../../node_modules/readable-stream/readable-browser.js", "../../node_modules/blake-hash/lib/api/blake.js", "../../node_modules/blake-hash/lib/api/index.js", "../../node_modules/blake-hash/lib/blake.js", "../../node_modules/blake-hash/lib/blake256.js", "../../node_modules/blake-hash/lib/blake224.js", "../../node_modules/blake-hash/lib/blake512.js", "../../node_modules/blake-hash/lib/blake384.js", "../../node_modules/blake-hash/lib/index.js", "../../node_modules/blake-hash/js.js", "../../node_modules/wasmcurves/src/utils.js", "../../node_modules/wasmcurves/src/build_int.js", "../../node_modules/wasmcurves/src/build_timesscalar.js", "../../node_modules/wasmcurves/src/build_batchinverse.js", "../../node_modules/wasmcurves/src/build_batchconvertion.js", "../../node_modules/wasmcurves/src/build_batchop.js", "../../node_modules/wasmcurves/src/bigint.js", "../../node_modules/wasmcurves/src/build_f1m.js", "../../node_modules/wasmcurves/src/build_f1.js", "../../node_modules/wasmcurves/src/build_f2m.js", "../../node_modules/wasmcurves/src/build_f3m.js", "../../node_modules/wasmcurves/src/build_timesscalarnaf.js", "../../node_modules/wasmcurves/src/build_multiexp.js", "../../node_modules/wasmcurves/src/build_curve_jacobian_a0.js", "../../node_modules/wasmcurves/src/build_fft.js", "../../node_modules/wasmcurves/src/build_pol.js", "../../node_modules/wasmcurves/src/build_qap.js", "../../node_modules/wasmcurves/src/build_applykey.js", "../../node_modules/wasmcurves/src/bn128/build_bn128.js", "../../node_modules/wasmcurves/src/bls12381/build_bls12381.js", "../../node_modules/wasmcurves/index.js", "../../node_modules/web-worker/cjs/browser.js", "../../node_modules/jsbi/tsc-out/jsbi.mjs", "../../node_modules/rdf-canonize/lib/IdentifierIssuer.js", "../../node_modules/setimmediate/setImmediate.js", "../../node_modules/rdf-canonize/lib/MessageDigest-browser.js", "../../node_modules/rdf-canonize/lib/Permuter.js", "../../node_modules/rdf-canonize/lib/NQuads.js", "../../node_modules/rdf-canonize/lib/URDNA2015.js", "../../node_modules/rdf-canonize/lib/URGNA2012.js", "../../node_modules/rdf-canonize/lib/URDNA2015Sync.js", "../../node_modules/rdf-canonize/lib/URGNA2012Sync.js", "(disabled):rdf-canonize-native", "../../node_modules/rdf-canonize/lib/index.js", "../../node_modules/rdf-canonize/index.js", "../../node_modules/jsonld/lib/types.js", "../../node_modules/jsonld/lib/graphTypes.js", "../../node_modules/jsonld/lib/JsonLdError.js", "../../node_modules/jsonld/lib/util.js", "../../node_modules/jsonld/lib/constants.js", "../../node_modules/jsonld/lib/RequestQueue.js", "../../node_modules/jsonld/lib/url.js", "../../node_modules/jsonld/lib/documentLoaders/xhr.js", "../../node_modules/jsonld/lib/platform-browser.js", "../../node_modules/jsonld/node_modules/yallist/iterator.js", "../../node_modules/jsonld/node_modules/yallist/yallist.js", "../../node_modules/jsonld/node_modules/lru-cache/index.js", "../../node_modules/jsonld/lib/ResolvedContext.js", "../../node_modules/jsonld/lib/ContextResolver.js", "../../node_modules/jsonld/lib/NQuads.js", "../../node_modules/jsonld/lib/events.js", "../../node_modules/jsonld/lib/context.js", "../../node_modules/jsonld/lib/expand.js", "../../node_modules/jsonld/lib/nodeMap.js", "../../node_modules/jsonld/lib/flatten.js", "../../node_modules/jsonld/lib/fromRdf.js", "../../node_modules/canonicalize/lib/canonicalize.js", "../../node_modules/jsonld/lib/toRdf.js", "../../node_modules/jsonld/lib/frame.js", "../../node_modules/jsonld/lib/compact.js", "../../node_modules/jsonld/lib/JsonLdProcessor.js", "../../node_modules/jsonld/lib/jsonld.js", "../../node_modules/queue-microtask/index.js", "node-modules-polyfills:string_decoder", "../../src/index.ts", "../../src/lib/types/types.ts", "../../src/lib/mt-value.ts", "../../src/lib/constants.ts", "../../src/lib/poseidon.ts", "../../node_modules/@iden3/js-crypto/src/index.ts", "../../node_modules/@iden3/js-crypto/src/babyjub/index.ts", "../../node_modules/@iden3/js-crypto/src/babyjub/eddsa.ts", "../../node_modules/@iden3/js-crypto/src/hex.ts", "../../node_modules/@iden3/js-crypto/src/babyjub/babyjub.ts", "../../node_modules/@iden3/js-crypto/src/ff.ts", "../../node_modules/ffjavascript/main.js", "../../node_modules/ffjavascript/src/scalar.js", "../../node_modules/ffjavascript/src/polfield.js", "../../node_modules/ffjavascript/src/f1field.js", "../../node_modules/ffjavascript/src/futils.js", "../../node_modules/ffjavascript/src/fsqrt.js", "../../node_modules/ffjavascript/src/random.js", "../../node_modules/ffjavascript/src/chacha.js", "node-modules-polyfills:crypto", "../../node_modules/ffjavascript/src/fft.js", "../../node_modules/ffjavascript/src/f2field.js", "../../node_modules/ffjavascript/src/f3field.js", "../../node_modules/ffjavascript/src/ec.js", "../../node_modules/ffjavascript/src/bn128.js", "../../node_modules/ffjavascript/src/engine.js", "../../node_modules/ffjavascript/src/wasm_field1.js", "../../node_modules/ffjavascript/src/utils.js", "../../node_modules/ffjavascript/src/engine_batchconvert.js", "../../node_modules/ffjavascript/src/bigbuffer.js", "../../node_modules/ffjavascript/src/wasm_field2.js", "../../node_modules/ffjavascript/src/wasm_field3.js", "../../node_modules/ffjavascript/src/wasm_curve.js", "../../node_modules/ffjavascript/src/threadman.js", "../../node_modules/ffjavascript/src/threadman_thread.js", "node-modules-polyfills:os", "../../node_modules/ffjavascript/src/engine_applykey.js", "../../node_modules/ffjavascript/src/engine_pairing.js", "../../node_modules/ffjavascript/src/engine_multiexp.js", "../../node_modules/ffjavascript/src/engine_fft.js", "../../node_modules/wasmbuilder/main.js", "../../node_modules/wasmbuilder/src/modulebuilder.js", "../../node_modules/wasmbuilder/src/functionbuilder.js", "../../node_modules/wasmbuilder/src/codebuilder.js", "../../node_modules/wasmbuilder/src/utils.js", "../../node_modules/wasmbuilder/src/modulebuilder_wat.js", "../../node_modules/wasmbuilder/src/functionbuilder_wat.js", "../../node_modules/wasmbuilder/src/codebuilder_wat.js", "../../node_modules/wasmbuilder/src/protoboard.js", "../../node_modules/ffjavascript/src/bls12381.js", "../../node_modules/ffjavascript/src/curves.js", "../../node_modules/@iden3/js-crypto/src/poseidon/index.ts", "../../node_modules/@iden3/js-crypto/src/poseidon/poseidon-opt.ts", "../../node_modules/@iden3/js-crypto/src/babyjub/eddsa-keys.ts", "../../node_modules/@js-temporal/polyfill/lib/intrinsicclass.ts", "../../node_modules/@js-temporal/polyfill/lib/slots.ts", "../../node_modules/@js-temporal/polyfill/lib/regex.ts", "../../node_modules/@js-temporal/polyfill/lib/ecmascript.ts", "../../node_modules/@js-temporal/polyfill/lib/intl.ts", "../../node_modules/@js-temporal/polyfill/lib/instant.ts", "../../node_modules/@js-temporal/polyfill/lib/calendar.ts", "../../node_modules/@js-temporal/polyfill/lib/plaindate.ts", "../../node_modules/@js-temporal/polyfill/lib/plaindatetime.ts", "../../node_modules/@js-temporal/polyfill/lib/duration.ts", "../../node_modules/@js-temporal/polyfill/lib/plainmonthday.ts", "../../node_modules/@js-temporal/polyfill/lib/now.ts", "../../node_modules/@js-temporal/polyfill/lib/plaintime.ts", "../../node_modules/@js-temporal/polyfill/lib/timezone.ts", "../../node_modules/@js-temporal/polyfill/lib/plainyearmonth.ts", "../../node_modules/@js-temporal/polyfill/lib/zoneddatetime.ts", "../../node_modules/@js-temporal/polyfill/lib/legacydate.ts", "../../node_modules/@js-temporal/polyfill/lib/index.ts", "../../src/lib/merklizer.ts", "../../node_modules/@iden3/js-merkletree/src/index.ts", "../../node_modules/@iden3/js-merkletree/src/constants/index.ts", "../../node_modules/@iden3/js-merkletree/src/constants/hash.ts", "../../node_modules/@iden3/js-merkletree/src/constants/node.ts", "../../node_modules/@iden3/js-merkletree/src/constants/data.ts", "../../node_modules/@iden3/js-merkletree/src/constants/proof.ts", "../../node_modules/@iden3/js-merkletree/src/constants/field.ts", "../../node_modules/@iden3/js-merkletree/src/lib/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/db/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/db/inMemory.ts", "../../node_modules/@iden3/js-merkletree/src/lib/hash/hash.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/bytes.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/crypto.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/hash.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/bigint.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/poseidon.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/entry.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/circom.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/merkletree.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/proof.ts", "../../node_modules/@iden3/js-merkletree/src/lib/utils/node.ts", "../../node_modules/@iden3/js-merkletree/src/lib/node/node.ts", "../../node_modules/@iden3/js-merkletree/src/lib/errors/proof.ts", "../../node_modules/@iden3/js-merkletree/src/lib/db/localStorage.ts", "../../node_modules/idb-keyval/dist/index.js", "../../node_modules/@iden3/js-merkletree/src/lib/db/indexedDB.ts", "../../node_modules/@iden3/js-merkletree/src/lib/entry/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/errors/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/errors/merkletree.ts", "../../node_modules/@iden3/js-merkletree/src/lib/errors/db.ts", "../../node_modules/@iden3/js-merkletree/src/lib/merkletree/index.ts", "../../node_modules/@iden3/js-merkletree/src/lib/merkletree/circom.ts", "../../node_modules/@iden3/js-merkletree/src/lib/merkletree/proof.ts", "../../node_modules/@iden3/js-merkletree/src/lib/merkletree/merkletree.ts", "../../node_modules/@iden3/js-merkletree/src/types/index.ts", "../../node_modules/@iden3/js-merkletree/dist/esm/types/hash.js", "../../node_modules/@iden3/js-merkletree/dist/esm/types/node.js", "../../node_modules/@iden3/js-merkletree/dist/esm/types/bytes.js", "../../node_modules/@iden3/js-merkletree/dist/esm/types/storage.js", "../../node_modules/@iden3/js-merkletree/dist/esm/types/merkletree.js", "../../src/lib/rdf-dataset.ts", "../../node_modules/n3/src/index.js", "../../node_modules/n3/src/N3Lexer.js", "../../node_modules/n3/src/IRIs.js", "../../node_modules/n3/src/N3Parser.js", "../../node_modules/n3/src/N3DataFactory.js", "../../src/lib/dataset-idx.ts", "../../src/lib/utils.ts", "../../src/lib/ref-tp.ts", "../../src/lib/options.ts", "../../src/loaders/jsonld-loader.ts", "node-modules-polyfills:http", "../../node_modules/rollup-plugin-node-polyfills/polyfills/http-lib/request.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/http-lib/capability.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/http-lib/response.js", "node-modules-polyfills:stream", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/duplex.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/readable.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/buffer-list.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/writable.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/transform.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/readable-stream/passthrough.js", "../../node_modules/rollup-plugin-node-polyfills/polyfills/http-lib/to-arraybuffer.js", "node-modules-polyfills:url", "node-modules-polyfills:punycode", "node-modules-polyfills:querystring", "../../src/lib/merkle-tree.ts", "../../src/lib/rdf-entry.ts", "../../src/lib/relationship.ts", "../../src/lib/path.ts", "../../src/lib/quad-arr-key.ts"],
  "sourcesContent": ["// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined')\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined')\n}\nvar cachedSetTimeout = defaultSetTimout\nvar cachedClearTimeout = defaultClearTimeout\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0)\n    }\n    // if setTimeout wasn't available but was latter defined\n    if (\n        (cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &&\n        setTimeout\n    ) {\n        cachedSetTimeout = setTimeout\n        return setTimeout(fun, 0)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0)\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker)\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if (\n        (cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &&\n        clearTimeout\n    ) {\n        cachedClearTimeout = clearTimeout\n        return clearTimeout(marker)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker)\n        }\n    }\n}\nvar queue = []\nvar draining = false\nvar currentQueue\nvar queueIndex = -1\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return\n    }\n    draining = false\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue)\n    } else {\n        queueIndex = -1\n    }\n    if (queue.length) {\n        drainQueue()\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return\n    }\n    var timeout = runTimeout(cleanUpNextTick)\n    draining = true\n\n    var len = queue.length\n    while (len) {\n        currentQueue = queue\n        queue = []\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run()\n            }\n        }\n        queueIndex = -1\n        len = queue.length\n    }\n    currentQueue = null\n    draining = false\n    runClearTimeout(timeout)\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1)\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i]\n        }\n    }\n    queue.push(new Item(fun, args))\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue)\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun\n    this.array = array\n}\nItem.prototype.run = function() {\n    this.fun.apply(null, this.array)\n}\nvar title = 'browser'\nvar platform = 'browser'\nvar browser = true\nvar env = {}\nvar argv = []\nvar version = '' // empty string to avoid regexp issues\nvar versions = {}\nvar release = {}\nvar config = {}\n\nfunction noop() {}\n\nvar on = noop\nvar addListener = noop\nvar once = noop\nvar off = noop\nvar removeListener = noop\nvar removeAllListeners = noop\nvar emit = noop\n\nfunction binding(name) {\n    throw new Error('process.binding is not supported')\n}\n\nfunction cwd() {\n    return '/'\n}\nfunction chdir(dir) {\n    throw new Error('process.chdir is not supported')\n}\nfunction umask() {\n    return 0\n}\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n    performance.now ||\n    performance.mozNow ||\n    performance.msNow ||\n    performance.oNow ||\n    performance.webkitNow ||\n    function() {\n        return new Date().getTime()\n    }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nfunction hrtime(previousTimestamp) {\n    var clocktime = performanceNow.call(performance) * 1e-3\n    var seconds = Math.floor(clocktime)\n    var nanoseconds = Math.floor((clocktime % 1) * 1e9)\n    if (previousTimestamp) {\n        seconds = seconds - previousTimestamp[0]\n        nanoseconds = nanoseconds - previousTimestamp[1]\n        if (nanoseconds < 0) {\n            seconds--\n            nanoseconds += 1e9\n        }\n    }\n    return [seconds, nanoseconds]\n}\n\nvar startTime = new Date()\nfunction uptime() {\n    var currentTime = new Date()\n    var dif = currentTime - startTime\n    return dif / 1000\n}\n\nexport var process = {\n    nextTick: nextTick,\n    title: title,\n    browser: browser,\n    env: env,\n    argv: argv,\n    version: version,\n    versions: versions,\n    on: on,\n    addListener: addListener,\n    once: once,\n    off: off,\n    removeListener: removeListener,\n    removeAllListeners: removeAllListeners,\n    emit: emit,\n    binding: binding,\n    cwd: cwd,\n    chdir: chdir,\n    umask: umask,\n    hrtime: hrtime,\n    platform: platform,\n    release: release,\n    config: config,\n    uptime: uptime,\n}\n\n// replace process.env.VAR with define\n\nconst defines = {\n\n}\nObject.keys(defines).forEach((key) => {\n    const segs = key.split('.')\n    let target = process\n    for (let i = 0; i < segs.length; i++) {\n        const seg = segs[i]\n        if (i === segs.length - 1) {\n            target[seg] = defines[key]\n        } else {\n            target = target[seg] || (target[seg] = {})\n        }\n    }\n})\n", "// taken from https://github.com/calvinmetcalf/buffer-es6\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false\nfunction init() {\n    inited = true\n    var code =\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n    for (var i = 0, len = code.length; i < len; ++i) {\n        lookup[i] = code[i]\n        revLookup[code.charCodeAt(i)] = i\n    }\n\n    revLookup['-'.charCodeAt(0)] = 62\n    revLookup['_'.charCodeAt(0)] = 63\n}\n\nfunction base64toByteArray(b64) {\n    if (!inited) {\n        init()\n    }\n    var i, j, l, tmp, placeHolders, arr\n    var len = b64.length\n\n    if (len % 4 > 0) {\n        throw new Error('Invalid string. Length must be a multiple of 4')\n    }\n\n    // the number of equal signs (place holders)\n    // if there are two placeholders, than the two characters before it\n    // represent one byte\n    // if there is only one, then the three characters before it represent 2 bytes\n    // this is just a cheap hack to not do indexOf twice\n    placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n    // base64 is 4/3 + up to two characters of the original data\n    arr = new Arr((len * 3) / 4 - placeHolders)\n\n    // if there are placeholders, only get up to the last complete 4 chars\n    l = placeHolders > 0 ? len - 4 : len\n\n    var L = 0\n\n    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 18) |\n            (revLookup[b64.charCodeAt(i + 1)] << 12) |\n            (revLookup[b64.charCodeAt(i + 2)] << 6) |\n            revLookup[b64.charCodeAt(i + 3)]\n        arr[L++] = (tmp >> 16) & 0xff\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    if (placeHolders === 2) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 2) |\n            (revLookup[b64.charCodeAt(i + 1)] >> 4)\n        arr[L++] = tmp & 0xff\n    } else if (placeHolders === 1) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 10) |\n            (revLookup[b64.charCodeAt(i + 1)] << 4) |\n            (revLookup[b64.charCodeAt(i + 2)] >> 2)\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    return arr\n}\n\nfunction tripletToBase64(num) {\n    return (\n        lookup[(num >> 18) & 0x3f] +\n        lookup[(num >> 12) & 0x3f] +\n        lookup[(num >> 6) & 0x3f] +\n        lookup[num & 0x3f]\n    )\n}\n\nfunction encodeChunk(uint8, start, end) {\n    var tmp\n    var output = []\n    for (var i = start; i < end; i += 3) {\n        tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2]\n        output.push(tripletToBase64(tmp))\n    }\n    return output.join('')\n}\n\nfunction base64fromByteArray(uint8) {\n    if (!inited) {\n        init()\n    }\n    var tmp\n    var len = uint8.length\n    var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n    var output = ''\n    var parts = []\n    var maxChunkLength = 16383 // must be multiple of 3\n\n    // go through the array every three bytes, we'll deal with trailing stuff later\n    for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n        parts.push(\n            encodeChunk(\n                uint8,\n                i,\n                i + maxChunkLength > len2 ? len2 : i + maxChunkLength,\n            ),\n        )\n    }\n\n    // pad the end with zeros, but make sure to not forget the extra bytes\n    if (extraBytes === 1) {\n        tmp = uint8[len - 1]\n        output += lookup[tmp >> 2]\n        output += lookup[(tmp << 4) & 0x3f]\n        output += '=='\n    } else if (extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n        output += lookup[tmp >> 10]\n        output += lookup[(tmp >> 4) & 0x3f]\n        output += lookup[(tmp << 2) & 0x3f]\n        output += '='\n    }\n\n    parts.push(output)\n\n    return parts.join('')\n}\n\nvar INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT =\n    global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : true\n\nfunction kMaxLength() {\n    return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff\n}\n\nfunction createBuffer(that, length) {\n    if (kMaxLength() < length) {\n        throw new RangeError('Invalid typed array length')\n    }\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = new Uint8Array(length)\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        if (that === null) {\n            that = new Buffer(length)\n        }\n        that.length = length\n    }\n\n    return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer(arg, encodingOrOffset, length) {\n    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n        return new Buffer(arg, encodingOrOffset, length)\n    }\n\n    // Common case.\n    if (typeof arg === 'number') {\n        if (typeof encodingOrOffset === 'string') {\n            throw new Error(\n                'If encoding is specified then the first argument must be a string',\n            )\n        }\n        return allocUnsafe(this, arg)\n    }\n    return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function(arr) {\n    arr.__proto__ = Buffer.prototype\n    return arr\n}\n\nfunction from(that, value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n        throw new TypeError('\"value\" argument must not be a number')\n    }\n\n    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n        return fromArrayBuffer(that, value, encodingOrOffset, length)\n    }\n\n    if (typeof value === 'string') {\n        return fromString(that, value, encodingOrOffset)\n    }\n\n    return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function(value, encodingOrOffset, length) {\n    return from(null, value, encodingOrOffset, length)\n}\n\nBuffer.kMaxLength = kMaxLength()\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n    Buffer.prototype.__proto__ = Uint8Array.prototype\n    Buffer.__proto__ = Uint8Array\n    if (\n        typeof Symbol !== 'undefined' &&\n        Symbol.species &&\n        Buffer[Symbol.species] === Buffer\n    ) {\n        // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n        // Object.defineProperty(Buffer, Symbol.species, {\n        //   value: null,\n        //   configurable: true\n        // })\n    }\n}\n\nfunction assertSize(size) {\n    if (typeof size !== 'number') {\n        throw new TypeError('\"size\" argument must be a number')\n    } else if (size < 0) {\n        throw new RangeError('\"size\" argument must not be negative')\n    }\n}\n\nfunction alloc(that, size, fill, encoding) {\n    assertSize(size)\n    if (size <= 0) {\n        return createBuffer(that, size)\n    }\n    if (fill !== undefined) {\n        // Only pay attention to encoding if it's a string. This\n        // prevents accidentally sending in a number that would\n        // be interpretted as a start offset.\n        return typeof encoding === 'string'\n            ? createBuffer(that, size).fill(fill, encoding)\n            : createBuffer(that, size).fill(fill)\n    }\n    return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function(size, fill, encoding) {\n    return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe(that, size) {\n    assertSize(size)\n    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) {\n        for (var i = 0; i < size; ++i) {\n            that[i] = 0\n        }\n    }\n    return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function(size) {\n    return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function(size) {\n    return allocUnsafe(null, size)\n}\n\nfunction fromString(that, string, encoding) {\n    if (typeof encoding !== 'string' || encoding === '') {\n        encoding = 'utf8'\n    }\n\n    if (!Buffer.isEncoding(encoding)) {\n        throw new TypeError('\"encoding\" must be a valid string encoding')\n    }\n\n    var length = byteLength(string, encoding) | 0\n    that = createBuffer(that, length)\n\n    var actual = that.write(string, encoding)\n\n    if (actual !== length) {\n        // Writing a hex string, for example, that contains invalid characters will\n        // cause everything after the first invalid character to be ignored. (e.g.\n        // 'abxxcd' will be treated as 'ab')\n        that = that.slice(0, actual)\n    }\n\n    return that\n}\n\nfunction fromArrayLike(that, array) {\n    var length = array.length < 0 ? 0 : checked(array.length) | 0\n    that = createBuffer(that, length)\n    for (var i = 0; i < length; i += 1) {\n        that[i] = array[i] & 255\n    }\n    return that\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n    array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n    if (byteOffset < 0 || array.byteLength < byteOffset) {\n        throw new RangeError(\"'offset' is out of bounds\")\n    }\n\n    if (array.byteLength < byteOffset + (length || 0)) {\n        throw new RangeError(\"'length' is out of bounds\")\n    }\n\n    if (byteOffset === undefined && length === undefined) {\n        array = new Uint8Array(array)\n    } else if (length === undefined) {\n        array = new Uint8Array(array, byteOffset)\n    } else {\n        array = new Uint8Array(array, byteOffset, length)\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = array\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        that = fromArrayLike(that, array)\n    }\n    return that\n}\n\nfunction fromObject(that, obj) {\n    if (internalIsBuffer(obj)) {\n        var len = checked(obj.length) | 0\n        that = createBuffer(that, len)\n\n        if (that.length === 0) {\n            return that\n        }\n\n        obj.copy(that, 0, 0, len)\n        return that\n    }\n\n    if (obj) {\n        if (\n            (typeof ArrayBuffer !== 'undefined' &&\n                obj.buffer instanceof ArrayBuffer) ||\n            'length' in obj\n        ) {\n            if (typeof obj.length !== 'number' || isnan(obj.length)) {\n                return createBuffer(that, 0)\n            }\n            return fromArrayLike(that, obj)\n        }\n\n        if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n            return fromArrayLike(that, obj.data)\n        }\n    }\n\n    throw new TypeError(\n        'First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.',\n    )\n}\n\nfunction checked(length) {\n    // Note: cannot use `length < kMaxLength()` here because that fails when\n    // length is NaN (which is otherwise coerced to zero.)\n    if (length >= kMaxLength()) {\n        throw new RangeError(\n            'Attempt to allocate Buffer larger than maximum ' +\n                'size: 0x' +\n                kMaxLength().toString(16) +\n                ' bytes',\n        )\n    }\n    return length | 0\n}\n\nexport function SlowBuffer(length) {\n    if (+length != length) {\n        // eslint-disable-line eqeqeq\n        length = 0\n    }\n    return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer\nfunction internalIsBuffer(b) {\n    return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare(a, b) {\n    if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n        throw new TypeError('Arguments must be Buffers')\n    }\n\n    if (a === b) return 0\n\n    var x = a.length\n    var y = b.length\n\n    for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n        if (a[i] !== b[i]) {\n            x = a[i]\n            y = b[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\nBuffer.isEncoding = function isEncoding(encoding) {\n    switch (String(encoding).toLowerCase()) {\n        case 'hex':\n        case 'utf8':\n        case 'utf-8':\n        case 'ascii':\n        case 'latin1':\n        case 'binary':\n        case 'base64':\n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n            return true\n        default:\n            return false\n    }\n}\n\nBuffer.concat = function concat(list, length) {\n    if (!Array.isArray(list)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n\n    if (list.length === 0) {\n        return Buffer.alloc(0)\n    }\n\n    var i\n    if (length === undefined) {\n        length = 0\n        for (i = 0; i < list.length; ++i) {\n            length += list[i].length\n        }\n    }\n\n    var buffer = Buffer.allocUnsafe(length)\n    var pos = 0\n    for (i = 0; i < list.length; ++i) {\n        var buf = list[i]\n        if (!internalIsBuffer(buf)) {\n            throw new TypeError('\"list\" argument must be an Array of Buffers')\n        }\n        buf.copy(buffer, pos)\n        pos += buf.length\n    }\n    return buffer\n}\n\nfunction byteLength(string, encoding) {\n    if (internalIsBuffer(string)) {\n        return string.length\n    }\n    if (\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof ArrayBuffer.isView === 'function' &&\n        (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)\n    ) {\n        return string.byteLength\n    }\n    if (typeof string !== 'string') {\n        string = '' + string\n    }\n\n    var len = string.length\n    if (len === 0) return 0\n\n    // Use a for loop to avoid recursion\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'ascii':\n            case 'latin1':\n            case 'binary':\n                return len\n            case 'utf8':\n            case 'utf-8':\n            case undefined:\n                return utf8ToBytes(string).length\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return len * 2\n            case 'hex':\n                return len >>> 1\n            case 'base64':\n                return base64ToBytes(string).length\n            default:\n                if (loweredCase) return utf8ToBytes(string).length // assume utf8\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString(encoding, start, end) {\n    var loweredCase = false\n\n    // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n    // property of a typed array.\n\n    // This behaves neither like String nor Uint8Array in that we set start/end\n    // to their upper/lower bounds if the value passed is out of range.\n    // undefined is handled specially as per ECMA-262 6th Edition,\n    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n    if (start === undefined || start < 0) {\n        start = 0\n    }\n    // Return early if start > this.length. Done here to prevent potential uint32\n    // coercion fail below.\n    if (start > this.length) {\n        return ''\n    }\n\n    if (end === undefined || end > this.length) {\n        end = this.length\n    }\n\n    if (end <= 0) {\n        return ''\n    }\n\n    // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n    end >>>= 0\n    start >>>= 0\n\n    if (end <= start) {\n        return ''\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    while (true) {\n        switch (encoding) {\n            case 'hex':\n                return hexSlice(this, start, end)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Slice(this, start, end)\n\n            case 'ascii':\n                return asciiSlice(this, start, end)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Slice(this, start, end)\n\n            case 'base64':\n                return base64Slice(this, start, end)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return utf16leSlice(this, start, end)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = (encoding + '').toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap(b, n, m) {\n    var i = b[n]\n    b[n] = b[m]\n    b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16() {\n    var len = this.length\n    if (len % 2 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 16-bits')\n    }\n    for (var i = 0; i < len; i += 2) {\n        swap(this, i, i + 1)\n    }\n    return this\n}\n\nBuffer.prototype.swap32 = function swap32() {\n    var len = this.length\n    if (len % 4 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 32-bits')\n    }\n    for (var i = 0; i < len; i += 4) {\n        swap(this, i, i + 3)\n        swap(this, i + 1, i + 2)\n    }\n    return this\n}\n\nBuffer.prototype.swap64 = function swap64() {\n    var len = this.length\n    if (len % 8 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 64-bits')\n    }\n    for (var i = 0; i < len; i += 8) {\n        swap(this, i, i + 7)\n        swap(this, i + 1, i + 6)\n        swap(this, i + 2, i + 5)\n        swap(this, i + 3, i + 4)\n    }\n    return this\n}\n\nBuffer.prototype.toString = function toString() {\n    var length = this.length | 0\n    if (length === 0) return ''\n    if (arguments.length === 0) return utf8Slice(this, 0, length)\n    return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals(b) {\n    if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n    if (this === b) return true\n    return Buffer.compare(this, b) === 0\n}\n\n\nBuffer.prototype.compare = function compare(\n    target,\n    start,\n    end,\n    thisStart,\n    thisEnd,\n) {\n    if (!internalIsBuffer(target)) {\n        throw new TypeError('Argument must be a Buffer')\n    }\n\n    if (start === undefined) {\n        start = 0\n    }\n    if (end === undefined) {\n        end = target ? target.length : 0\n    }\n    if (thisStart === undefined) {\n        thisStart = 0\n    }\n    if (thisEnd === undefined) {\n        thisEnd = this.length\n    }\n\n    if (\n        start < 0 ||\n        end > target.length ||\n        thisStart < 0 ||\n        thisEnd > this.length\n    ) {\n        throw new RangeError('out of range index')\n    }\n\n    if (thisStart >= thisEnd && start >= end) {\n        return 0\n    }\n    if (thisStart >= thisEnd) {\n        return -1\n    }\n    if (start >= end) {\n        return 1\n    }\n\n    start >>>= 0\n    end >>>= 0\n    thisStart >>>= 0\n    thisEnd >>>= 0\n\n    if (this === target) return 0\n\n    var x = thisEnd - thisStart\n    var y = end - start\n    var len = Math.min(x, y)\n\n    var thisCopy = this.slice(thisStart, thisEnd)\n    var targetCopy = target.slice(start, end)\n\n    for (var i = 0; i < len; ++i) {\n        if (thisCopy[i] !== targetCopy[i]) {\n            x = thisCopy[i]\n            y = targetCopy[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n    // Empty buffer means no match\n    if (buffer.length === 0) return -1\n\n    // Normalize byteOffset\n    if (typeof byteOffset === 'string') {\n        encoding = byteOffset\n        byteOffset = 0\n    } else if (byteOffset > 0x7fffffff) {\n        byteOffset = 0x7fffffff\n    } else if (byteOffset < -0x80000000) {\n        byteOffset = -0x80000000\n    }\n    byteOffset = +byteOffset // Coerce to Number.\n    if (isNaN(byteOffset)) {\n        // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n        byteOffset = dir ? 0 : buffer.length - 1\n    }\n\n    // Normalize byteOffset: negative offsets start from the end of the buffer\n    if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n    if (byteOffset >= buffer.length) {\n        if (dir) return -1\n        else byteOffset = buffer.length - 1\n    } else if (byteOffset < 0) {\n        if (dir) byteOffset = 0\n        else return -1\n    }\n\n    // Normalize val\n    if (typeof val === 'string') {\n        val = Buffer.from(val, encoding)\n    }\n\n    // Finally, search either indexOf (if dir is true) or lastIndexOf\n    if (internalIsBuffer(val)) {\n        // Special case: looking for empty string/buffer always fails\n        if (val.length === 0) {\n            return -1\n        }\n        return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n    } else if (typeof val === 'number') {\n        val = val & 0xff // Search for a byte value [0-255]\n        if (\n            Buffer.TYPED_ARRAY_SUPPORT &&\n            typeof Uint8Array.prototype.indexOf === 'function'\n        ) {\n            if (dir) {\n                return Uint8Array.prototype.indexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            } else {\n                return Uint8Array.prototype.lastIndexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            }\n        }\n        return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n    }\n\n    throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n    var indexSize = 1\n    var arrLength = arr.length\n    var valLength = val.length\n\n    if (encoding !== undefined) {\n        encoding = String(encoding).toLowerCase()\n        if (\n            encoding === 'ucs2' ||\n            encoding === 'ucs-2' ||\n            encoding === 'utf16le' ||\n            encoding === 'utf-16le'\n        ) {\n            if (arr.length < 2 || val.length < 2) {\n                return -1\n            }\n            indexSize = 2\n            arrLength /= 2\n            valLength /= 2\n            byteOffset /= 2\n        }\n    }\n\n    function read(buf, i) {\n        if (indexSize === 1) {\n            return buf[i]\n        } else {\n            return buf.readUInt16BE(i * indexSize)\n        }\n    }\n\n    var i\n    if (dir) {\n        var foundIndex = -1\n        for (i = byteOffset; i < arrLength; i++) {\n            if (\n                read(arr, i) ===\n                read(val, foundIndex === -1 ? 0 : i - foundIndex)\n            ) {\n                if (foundIndex === -1) foundIndex = i\n                if (i - foundIndex + 1 === valLength)\n                    return foundIndex * indexSize\n            } else {\n                if (foundIndex !== -1) i -= i - foundIndex\n                foundIndex = -1\n            }\n        }\n    } else {\n        if (byteOffset + valLength > arrLength)\n            byteOffset = arrLength - valLength\n        for (i = byteOffset; i >= 0; i--) {\n            var found = true\n            for (var j = 0; j < valLength; j++) {\n                if (read(arr, i + j) !== read(val, j)) {\n                    found = false\n                    break\n                }\n            }\n            if (found) return i\n        }\n    }\n\n    return -1\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n    return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite(buf, string, offset, length) {\n    offset = Number(offset) || 0\n    var remaining = buf.length - offset\n    if (!length) {\n        length = remaining\n    } else {\n        length = Number(length)\n        if (length > remaining) {\n            length = remaining\n        }\n    }\n\n    // must be an even number of digits\n    var strLen = string.length\n    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n    if (length > strLen / 2) {\n        length = strLen / 2\n    }\n    for (var i = 0; i < length; ++i) {\n        var parsed = parseInt(string.substr(i * 2, 2), 16)\n        if (isNaN(parsed)) return i\n        buf[offset + i] = parsed\n    }\n    return i\n}\n\nfunction utf8Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf8ToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n    return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write(buf, string, offset, length) {\n    return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write(buf, string, offset, length) {\n    return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf16leToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n    // Buffer#write(string)\n    if (offset === undefined) {\n        encoding = 'utf8'\n        length = this.length\n        offset = 0\n        // Buffer#write(string, encoding)\n    } else if (length === undefined && typeof offset === 'string') {\n        encoding = offset\n        length = this.length\n        offset = 0\n        // Buffer#write(string, offset[, length][, encoding])\n    } else if (isFinite(offset)) {\n        offset = offset | 0\n        if (isFinite(length)) {\n            length = length | 0\n            if (encoding === undefined) encoding = 'utf8'\n        } else {\n            encoding = length\n            length = undefined\n        }\n        // legacy write(string, encoding, offset, length) - remove in v0.13\n    } else {\n        throw new Error(\n            'Buffer.write(string, encoding, offset[, length]) is no longer supported',\n        )\n    }\n\n    var remaining = this.length - offset\n    if (length === undefined || length > remaining) length = remaining\n\n    if (\n        (string.length > 0 && (length < 0 || offset < 0)) ||\n        offset > this.length\n    ) {\n        throw new RangeError('Attempt to write outside buffer bounds')\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'hex':\n                return hexWrite(this, string, offset, length)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Write(this, string, offset, length)\n\n            case 'ascii':\n                return asciiWrite(this, string, offset, length)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Write(this, string, offset, length)\n\n            case 'base64':\n                // Warning: maxLength not taken into account in base64Write\n                return base64Write(this, string, offset, length)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return ucs2Write(this, string, offset, length)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\nBuffer.prototype.toJSON = function toJSON() {\n    return {\n        type: 'Buffer',\n        data: Array.prototype.slice.call(this._arr || this, 0),\n    }\n}\n\nfunction base64Slice(buf, start, end) {\n    if (start === 0 && end === buf.length) {\n        return base64fromByteArray(buf)\n    } else {\n        return base64fromByteArray(buf.slice(start, end))\n    }\n}\n\nfunction utf8Slice(buf, start, end) {\n    end = Math.min(buf.length, end)\n    var res = []\n\n    var i = start\n    while (i < end) {\n        var firstByte = buf[i]\n        var codePoint = null\n        var bytesPerSequence =\n            firstByte > 0xef\n                ? 4\n                : firstByte > 0xdf\n                ? 3\n                : firstByte > 0xbf\n                ? 2\n                : 1\n\n        if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint\n\n            switch (bytesPerSequence) {\n                case 1:\n                    if (firstByte < 0x80) {\n                        codePoint = firstByte\n                    }\n                    break\n                case 2:\n                    secondByte = buf[i + 1]\n                    if ((secondByte & 0xc0) === 0x80) {\n                        tempCodePoint =\n                            ((firstByte & 0x1f) << 0x6) | (secondByte & 0x3f)\n                        if (tempCodePoint > 0x7f) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 3:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0xc) |\n                            ((secondByte & 0x3f) << 0x6) |\n                            (thirdByte & 0x3f)\n                        if (\n                            tempCodePoint > 0x7ff &&\n                            (tempCodePoint < 0xd800 || tempCodePoint > 0xdfff)\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 4:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    fourthByte = buf[i + 3]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80 &&\n                        (fourthByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0x12) |\n                            ((secondByte & 0x3f) << 0xc) |\n                            ((thirdByte & 0x3f) << 0x6) |\n                            (fourthByte & 0x3f)\n                        if (\n                            tempCodePoint > 0xffff &&\n                            tempCodePoint < 0x110000\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n            }\n        }\n\n        if (codePoint === null) {\n            // we did not generate a valid codePoint so insert a\n            // replacement char (U+FFFD) and advance only 1 byte\n            codePoint = 0xfffd\n            bytesPerSequence = 1\n        } else if (codePoint > 0xffff) {\n            // encode to utf16 (surrogate pair dance)\n            codePoint -= 0x10000\n            res.push(((codePoint >>> 10) & 0x3ff) | 0xd800)\n            codePoint = 0xdc00 | (codePoint & 0x3ff)\n        }\n\n        res.push(codePoint)\n        i += bytesPerSequence\n    }\n\n    return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray(codePoints) {\n    var len = codePoints.length\n    if (len <= MAX_ARGUMENTS_LENGTH) {\n        return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n    }\n\n    // Decode in chunks to avoid \"call stack size exceeded\".\n    var res = ''\n    var i = 0\n    while (i < len) {\n        res += String.fromCharCode.apply(\n            String,\n            codePoints.slice(i, (i += MAX_ARGUMENTS_LENGTH)),\n        )\n    }\n    return res\n}\n\nfunction asciiSlice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i] & 0x7f)\n    }\n    return ret\n}\n\nfunction latin1Slice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i])\n    }\n    return ret\n}\n\nfunction hexSlice(buf, start, end) {\n    var len = buf.length\n\n    if (!start || start < 0) start = 0\n    if (!end || end < 0 || end > len) end = len\n\n    var out = ''\n    for (var i = start; i < end; ++i) {\n        out += toHex(buf[i])\n    }\n    return out\n}\n\nfunction utf16leSlice(buf, start, end) {\n    var bytes = buf.slice(start, end)\n    var res = ''\n    for (var i = 0; i < bytes.length; i += 2) {\n        res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n    }\n    return res\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n    var len = this.length\n    start = ~~start\n    end = end === undefined ? len : ~~end\n\n    if (start < 0) {\n        start += len\n        if (start < 0) start = 0\n    } else if (start > len) {\n        start = len\n    }\n\n    if (end < 0) {\n        end += len\n        if (end < 0) end = 0\n    } else if (end > len) {\n        end = len\n    }\n\n    if (end < start) end = start\n\n    var newBuf\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        newBuf = this.subarray(start, end)\n        newBuf.__proto__ = Buffer.prototype\n    } else {\n        var sliceLen = end - start\n        newBuf = new Buffer(sliceLen, undefined)\n        for (var i = 0; i < sliceLen; ++i) {\n            newBuf[i] = this[i + start]\n        }\n    }\n\n    return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n    if (offset % 1 !== 0 || offset < 0)\n        throw new RangeError('offset is not uint')\n    if (offset + ext > length)\n        throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        checkOffset(offset, byteLength, this.length)\n    }\n\n    var val = this[offset + --byteLength]\n    var mul = 1\n    while (byteLength > 0 && (mul *= 0x100)) {\n        val += this[offset + --byteLength] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] | (this[offset + 1] << 8) | (this[offset + 2] << 16)) +\n        this[offset + 3] * 0x1000000\n    )\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] * 0x1000000 +\n        ((this[offset + 1] << 16) | (this[offset + 2] << 8) | this[offset + 3])\n    )\n}\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var i = byteLength\n    var mul = 1\n    var val = this[offset + --i]\n    while (i > 0 && (mul *= 0x100)) {\n        val += this[offset + --i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    if (!(this[offset] & 0x80)) return this[offset]\n    return (0xff - this[offset] + 1) * -1\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset] | (this[offset + 1] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset + 1] | (this[offset] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] |\n        (this[offset + 1] << 8) |\n        (this[offset + 2] << 16) |\n        (this[offset + 3] << 24)\n    )\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] << 24) |\n        (this[offset + 1] << 16) |\n        (this[offset + 2] << 8) |\n        this[offset + 3]\n    )\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, false, 52, 8)\n}\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n    if (!internalIsBuffer(buf))\n        throw new TypeError('\"buffer\" argument must be a Buffer instance')\n    if (value > max || value < min)\n        throw new RangeError('\"value\" argument is out of bounds')\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var mul = 1\n    var i = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n        buf[offset + i] =\n            (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n            ((littleEndian ? i : 1 - i) * 8)\n    }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffffffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n        buf[offset + i] = (value >>> ((littleEndian ? i : 3 - i) * 8)) & 0xff\n    }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset + 3] = value >>> 24\n        this[offset + 2] = value >>> 16\n        this[offset + 1] = value >>> 8\n        this[offset] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = 0\n    var mul = 1\n    var sub = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    var sub = 0\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    if (value < 0) value = 0xff + value + 1\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n        this[offset + 2] = value >>> 16\n        this[offset + 3] = value >>> 24\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (value < 0) value = 0xffffffff + value + 1\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n    if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            4,\n            3.4028234663852886e38,\n            -3.4028234663852886e38,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 23, 4)\n    return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            8,\n            1.7976931348623157e308,\n            -1.7976931348623157e308,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 52, 8)\n    return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n    if (!start) start = 0\n    if (!end && end !== 0) end = this.length\n    if (targetStart >= target.length) targetStart = target.length\n    if (!targetStart) targetStart = 0\n    if (end > 0 && end < start) end = start\n\n    // Copy 0 bytes; we're done\n    if (end === start) return 0\n    if (target.length === 0 || this.length === 0) return 0\n\n    // Fatal error conditions\n    if (targetStart < 0) {\n        throw new RangeError('targetStart out of bounds')\n    }\n    if (start < 0 || start >= this.length)\n        throw new RangeError('sourceStart out of bounds')\n    if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n    // Are we oob?\n    if (end > this.length) end = this.length\n    if (target.length - targetStart < end - start) {\n        end = target.length - targetStart + start\n    }\n\n    var len = end - start\n    var i\n\n    if (this === target && start < targetStart && targetStart < end) {\n        // descending copy from end\n        for (i = len - 1; i >= 0; --i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n        // ascending copy from start\n        for (i = 0; i < len; ++i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else {\n        Uint8Array.prototype.set.call(\n            target,\n            this.subarray(start, start + len),\n            targetStart,\n        )\n    }\n\n    return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n    // Handle string cases:\n    if (typeof val === 'string') {\n        if (typeof start === 'string') {\n            encoding = start\n            start = 0\n            end = this.length\n        } else if (typeof end === 'string') {\n            encoding = end\n            end = this.length\n        }\n        if (val.length === 1) {\n            var code = val.charCodeAt(0)\n            if (code < 256) {\n                val = code\n            }\n        }\n        if (encoding !== undefined && typeof encoding !== 'string') {\n            throw new TypeError('encoding must be a string')\n        }\n        if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n            throw new TypeError('Unknown encoding: ' + encoding)\n        }\n    } else if (typeof val === 'number') {\n        val = val & 255\n    }\n\n    // Invalid ranges are not set to a default, so can range check early.\n    if (start < 0 || this.length < start || this.length < end) {\n        throw new RangeError('Out of range index')\n    }\n\n    if (end <= start) {\n        return this\n    }\n\n    start = start >>> 0\n    end = end === undefined ? this.length : end >>> 0\n\n    if (!val) val = 0\n\n    var i\n    if (typeof val === 'number') {\n        for (i = start; i < end; ++i) {\n            this[i] = val\n        }\n    } else {\n        var bytes = internalIsBuffer(val)\n            ? val\n            : utf8ToBytes(new Buffer(val, encoding).toString())\n        var len = bytes.length\n        for (i = 0; i < end - start; ++i) {\n            this[i + start] = bytes[i % len]\n        }\n    }\n\n    return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean(str) {\n    // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n    str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n    // Node converts strings with length < 2 to ''\n    if (str.length < 2) return ''\n    // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n    while (str.length % 4 !== 0) {\n        str = str + '='\n    }\n    return str\n}\n\nfunction stringtrim(str) {\n    if (str.trim) return str.trim()\n    return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex(n) {\n    if (n < 16) return '0' + n.toString(16)\n    return n.toString(16)\n}\n\nfunction utf8ToBytes(string, units) {\n    units = units || Infinity\n    var codePoint\n    var length = string.length\n    var leadSurrogate = null\n    var bytes = []\n\n    for (var i = 0; i < length; ++i) {\n        codePoint = string.charCodeAt(i)\n\n        // is surrogate component\n        if (codePoint > 0xd7ff && codePoint < 0xe000) {\n            // last char was a lead\n            if (!leadSurrogate) {\n                // no lead yet\n                if (codePoint > 0xdbff) {\n                    // unexpected trail\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                } else if (i + 1 === length) {\n                    // unpaired lead\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                }\n\n                // valid lead\n                leadSurrogate = codePoint\n\n                continue\n            }\n\n            // 2 leads in a row\n            if (codePoint < 0xdc00) {\n                if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                leadSurrogate = codePoint\n                continue\n            }\n\n            // valid surrogate pair\n            codePoint =\n                (((leadSurrogate - 0xd800) << 10) | (codePoint - 0xdc00)) +\n                0x10000\n        } else if (leadSurrogate) {\n            // valid bmp char, but last char was a lead\n            if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n        }\n\n        leadSurrogate = null\n\n        // encode utf8\n        if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break\n            bytes.push(codePoint)\n        } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break\n            bytes.push((codePoint >> 0x6) | 0xc0, (codePoint & 0x3f) | 0x80)\n        } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break\n            bytes.push(\n                (codePoint >> 0xc) | 0xe0,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break\n            bytes.push(\n                (codePoint >> 0x12) | 0xf0,\n                ((codePoint >> 0xc) & 0x3f) | 0x80,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else {\n            throw new Error('Invalid code point')\n        }\n    }\n\n    return bytes\n}\n\nfunction asciiToBytes(str) {\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        // Node's code seems to be doing this and not & 0x7F..\n        byteArray.push(str.charCodeAt(i) & 0xff)\n    }\n    return byteArray\n}\n\nfunction utf16leToBytes(str, units) {\n    var c, hi, lo\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        if ((units -= 2) < 0) break\n\n        c = str.charCodeAt(i)\n        hi = c >> 8\n        lo = c % 256\n        byteArray.push(lo)\n        byteArray.push(hi)\n    }\n\n    return byteArray\n}\n\nfunction base64ToBytes(str) {\n    return base64toByteArray(base64clean(str))\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n    for (var i = 0; i < length; ++i) {\n        if (i + offset >= dst.length || i >= src.length) break\n        dst[i + offset] = src[i]\n    }\n    return i\n}\n\nfunction isnan(val) {\n    return val !== val // eslint-disable-line no-self-compare\n}\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n    return (\n        obj != null &&\n        (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n    )\n}\n\nfunction isFastBuffer(obj) {\n    return (\n        !!obj.constructor &&\n        typeof obj.constructor.isBuffer === 'function' &&\n        obj.constructor.isBuffer(obj)\n    )\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer(obj) {\n    return (\n        typeof obj.readFloatLE === 'function' &&\n        typeof obj.slice === 'function' &&\n        isFastBuffer(obj.slice(0, 0))\n    )\n}\n\nfunction ieee754read(buffer, offset, isLE, mLen, nBytes) {\n    var e, m\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var nBits = -7\n    var i = isLE ? nBytes - 1 : 0\n    var d = isLE ? -1 : 1\n    var s = buffer[offset + i]\n\n    i += d\n\n    e = s & ((1 << -nBits) - 1)\n    s >>= -nBits\n    nBits += eLen\n    for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    m = e & ((1 << -nBits) - 1)\n    e >>= -nBits\n    nBits += mLen\n    for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    if (e === 0) {\n        e = 1 - eBias\n    } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity\n    } else {\n        m = m + Math.pow(2, mLen)\n        e = e - eBias\n    }\n    return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction ieee754write(buffer, value, offset, isLE, mLen, nBytes) {\n    var e, m, c\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0\n    var i = isLE ? 0 : nBytes - 1\n    var d = isLE ? 1 : -1\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n    value = Math.abs(value)\n\n    if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0\n        e = eMax\n    } else {\n        e = Math.floor(Math.log(value) / Math.LN2)\n        if (value * (c = Math.pow(2, -e)) < 1) {\n            e--\n            c *= 2\n        }\n        if (e + eBias >= 1) {\n            value += rt / c\n        } else {\n            value += rt * Math.pow(2, 1 - eBias)\n        }\n        if (value * c >= 2) {\n            e++\n            c /= 2\n        }\n\n        if (e + eBias >= eMax) {\n            m = 0\n            e = eMax\n        } else if (e + eBias >= 1) {\n            m = (value * c - 1) * Math.pow(2, mLen)\n            e = e + eBias\n        } else {\n            m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n            e = 0\n        }\n    }\n\n    for (\n        ;\n        mLen >= 8;\n        buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8\n    ) {}\n\n    e = (e << mLen) | m\n    eLen += mLen\n    for (\n        ;\n        eLen > 0;\n        buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8\n    ) {}\n\n    buffer[offset + i - d] |= s * 128\n}\n", "export { Buffer } from '_node-buffer-polyfill_.js'\n", "'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n", "\nconst polyfill = require('events')\n\nif (polyfill && polyfill.default) {\n    module.exports = polyfill.default\n    for (let k in polyfill) {\n        module.exports[k] = polyfill[k]\n    }\n} else if (polyfill)  {\n    module.exports = polyfill\n}\n\n\n", "module.exports = require('events').EventEmitter;\n", "var lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62;\n  revLookup['_'.charCodeAt(0)] = 63;\n}\n\nfunction toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr;\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0;\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders);\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len;\n\n  var L = 0;\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)];\n    arr[L++] = (tmp >> 16) & 0xFF;\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4);\n    arr[L++] = tmp & 0xFF;\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2);\n    arr[L++] = (tmp >> 8) & 0xFF;\n    arr[L++] = tmp & 0xFF;\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2]);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n  var output = '';\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)));\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    output += lookup[tmp >> 2];\n    output += lookup[(tmp << 4) & 0x3F];\n    output += '==';\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1]);\n    output += lookup[tmp >> 10];\n    output += lookup[(tmp >> 4) & 0x3F];\n    output += lookup[(tmp << 2) & 0x3F];\n    output += '=';\n  }\n\n  parts.push(output);\n\n  return parts.join('')\n}\n\nfunction read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? (nBytes - 1) : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0);\n  var i = isLE ? 0 : (nBytes - 1);\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n}\n\nvar toString = {}.toString;\n\nvar isArray = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar INSPECT_MAX_BYTES = 50;\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true;\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength();\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n    that.length = length;\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr\n};\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size);\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n};\n\nfunction allocUnsafe (that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n};\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0;\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n};\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i;\n  if (length === undefined) {\n    length = 0;\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n  return buffer\n};\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\nBuffer.byteLength = byteLength;\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false;\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0;\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true;\n\nfunction swap (b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length;\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n  return this\n};\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length;\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n  return this\n};\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length;\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n  return this\n};\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0;\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n};\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n};\n\nBuffer.prototype.inspect = function inspect () {\n  var str = '';\n  var max = INSPECT_MAX_BYTES;\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n  return '<Buffer ' + str + '>'\n};\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n};\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n  byteOffset = +byteOffset;  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1);\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i;\n  if (dir) {\n    var foundIndex = -1;\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n};\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n};\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n    if (length > remaining) {\n      length = remaining;\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed;\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0;\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  var loweredCase = false;\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n};\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return fromByteArray(buf)\n  } else {\n    return fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n\n  var i = start;\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1];\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F);\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F);\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F);\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length;\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = '';\n  var i = 0;\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    );\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length;\n\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n\n  var out = '';\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n\n  var newBuf;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf\n};\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val\n};\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset]\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | (this[offset + 1] << 8)\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return (this[offset] << 8) | this[offset + 1]\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n};\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n  mul *= 0x80;\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n\n  return val\n};\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | (this[offset + 1] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | (this[offset] << 8);\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, true, 23, 4)\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return read(this, offset, false, 23, 4)\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, true, 52, 8)\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return read(this, offset, false, 52, 8)\n};\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 1] = (value >>> 8);\n    this[offset] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength\n};\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = (value & 0xff);\n  return offset + 1\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8);\n    this[offset + 1] = (value & 0xff);\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n  return offset + 2\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff);\n    this[offset + 1] = (value >>> 8);\n    this[offset + 2] = (value >>> 16);\n    this[offset + 3] = (value >>> 24);\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n  return offset + 4\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24);\n    this[offset + 1] = (value >>> 16);\n    this[offset + 2] = (value >>> 8);\n    this[offset + 3] = (value & 0xff);\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n  return offset + 4\n};\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4);\n  }\n  write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n};\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8);\n  }\n  write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n};\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start;\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length;\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    );\n  }\n\n  return len\n};\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n      if (code < 256) {\n        val = code;\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n\n  if (!val) val = 0;\n\n  var i;\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this\n};\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '');\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i);\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint;\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null;\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      );\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i];\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n\nexport { Buffer, INSPECT_MAX_BYTES, SlowBuffer, isBuffer, _kMaxLength as kMaxLength };\n", "\nconst polyfill = require('buffer')\n\nif (polyfill && polyfill.default) {\n    module.exports = polyfill.default\n    for (let k in polyfill) {\n        module.exports[k] = polyfill[k]\n    }\n} else if (polyfill)  {\n    module.exports = polyfill\n}\n\n\n", "// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nvar title = 'browser';\nvar platform = 'browser';\nvar browser = true;\nvar env = {};\nvar argv = [];\nvar version = ''; // empty string to avoid regexp issues\nvar versions = {};\nvar release = {};\nvar config = {};\n\nfunction noop() {}\n\nvar on = noop;\nvar addListener = noop;\nvar once = noop;\nvar off = noop;\nvar removeListener = noop;\nvar removeAllListeners = noop;\nvar emit = noop;\n\nfunction binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nfunction cwd () { return '/' }\nfunction chdir (dir) {\n    throw new Error('process.chdir is not supported');\n}function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {};\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() };\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nfunction hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3;\n  var seconds = Math.floor(clocktime);\n  var nanoseconds = Math.floor((clocktime%1)*1e9);\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0];\n    nanoseconds = nanoseconds - previousTimestamp[1];\n    if (nanoseconds<0) {\n      seconds--;\n      nanoseconds += 1e9;\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nfunction uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nvar browser$1 = {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n\nexport default browser$1;\nexport { addListener, argv, binding, browser, chdir, config, cwd, emit, env, hrtime, nextTick, off, on, once, platform, release, removeAllListeners, removeListener, title, umask, uptime, version, versions };\n", "\nvar inherits;\nif (typeof Object.create === 'function'){\n  inherits = function inherits(ctor, superCtor) {\n    // implementation from standard node.js 'util' module\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  inherits = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\nexport default inherits;\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nimport process from 'process';\nvar formatRegExp = /%[sdj%]/g;\nexport function format(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexport function deprecate(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexport function debuglog(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = 0;\n      debugs[set] = function() {\n        var msg = format.apply(null, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nexport function inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    _extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexport function isArray(ar) {\n  return Array.isArray(ar);\n}\n\nexport function isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\n\nexport function isNull(arg) {\n  return arg === null;\n}\n\nexport function isNullOrUndefined(arg) {\n  return arg == null;\n}\n\nexport function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nexport function isString(arg) {\n  return typeof arg === 'string';\n}\n\nexport function isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\n\nexport function isUndefined(arg) {\n  return arg === void 0;\n}\n\nexport function isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nexport function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nexport function isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\n\nexport function isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nexport function isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nexport function isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\n\nexport function isBuffer(maybeBuf) {\n  return Buffer.isBuffer(maybeBuf);\n}\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexport function log() {\n  console.log('%s - %s', timestamp(), format.apply(null, arguments));\n}\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nimport inherits from './inherits';\nexport {inherits}\n\nexport function _extend(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport default {\n  inherits: inherits,\n  _extend: _extend,\n  log: log,\n  isBuffer: isBuffer,\n  isPrimitive: isPrimitive,\n  isFunction: isFunction,\n  isError: isError,\n  isDate: isDate,\n  isObject: isObject,\n  isRegExp: isRegExp,\n  isUndefined: isUndefined,\n  isSymbol: isSymbol,\n  isString: isString,\n  isNumber: isNumber,\n  isNullOrUndefined: isNullOrUndefined,\n  isNull: isNull,\n  isBoolean: isBoolean,\n  isArray: isArray,\n  inspect: inspect,\n  deprecate: deprecate,\n  format: format,\n  debuglog: debuglog\n}\n", "\nconst polyfill = require('util')\n\nif (polyfill && polyfill.default) {\n    module.exports = polyfill.default\n    for (let k in polyfill) {\n        module.exports[k] = polyfill[k]\n    }\n} else if (polyfill)  {\n    module.exports = polyfill\n}\n\n\n", "'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();", "'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};", "'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n", "'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};", "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n", "\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});", "/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}", "// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;", "'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;", "module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};", "// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;", "exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n", "const Transform = require('readable-stream').Transform\n\nmodule.exports = class Blake extends Transform {\n  constructor (engine, options) {\n    super(options)\n\n    this._engine = engine\n    this._finalized = false\n  }\n\n  _transform (chunk, encoding, callback) {\n    let error = null\n    try {\n      this.update(chunk, encoding)\n    } catch (err) {\n      error = err\n    }\n\n    callback(error)\n  }\n\n  _flush (callback) {\n    let error = null\n    try {\n      this.push(this.digest())\n    } catch (err) {\n      error = err\n    }\n\n    callback(error)\n  }\n\n  update (data, encoding) {\n    if (!Buffer.isBuffer(data) && typeof data !== 'string') throw new TypeError('Data must be a string or a buffer')\n    if (this._finalized) throw new Error('Digest already called')\n    if (!Buffer.isBuffer(data)) data = Buffer.from(data, encoding)\n\n    this._engine.update(data)\n\n    return this\n  }\n\n  digest (encoding) {\n    if (this._finalized) throw new Error('Digest already called')\n    this._finalized = true\n\n    let digest = this._engine.digest()\n    if (encoding !== undefined) digest = digest.toString(encoding)\n\n    return digest\n  }\n}\n", "const Blake = require('./blake')\n\nmodule.exports = (engines) => {\n  const getEngine = (algorithm) => {\n    const hash = typeof algorithm === 'string' ? algorithm.toLowerCase() : algorithm\n    switch (hash) {\n      case 'blake224': return engines.Blake224\n      case 'blake256': return engines.Blake256\n      case 'blake384': return engines.Blake384\n      case 'blake512': return engines.Blake512\n\n      default: throw new Error('Invald algorithm: ' + algorithm)\n    }\n  }\n\n  return (algorithm, options) => {\n    const Engine = getEngine(algorithm)\n    return new Blake(new Engine(), options)\n  }\n}\n", "class Blake {\n  _lengthCarry (arr) {\n    for (let j = 0; j < arr.length; ++j) {\n      if (arr[j] < 0x0100000000) break\n      arr[j] -= 0x0100000000\n      arr[j + 1] += 1\n    }\n  }\n\n  update (data) {\n    const block = this._block\n    let offset = 0\n\n    while (this._blockOffset + data.length - offset >= block.length) {\n      for (let i = this._blockOffset; i < block.length;) block[i++] = data[offset++]\n\n      this._length[0] += block.length * 8\n      this._lengthCarry(this._length)\n\n      this._compress()\n      this._blockOffset = 0\n    }\n\n    while (offset < data.length) block[this._blockOffset++] = data[offset++]\n  }\n}\n\nBlake.sigma = [\n  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n  [14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3],\n  [11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4],\n  [7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8],\n  [9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13],\n  [2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9],\n  [12, 5, 1, 15, 14, 13, 4, 10, 0, 7, 6, 3, 9, 2, 8, 11],\n  [13, 11, 7, 14, 12, 1, 3, 9, 5, 0, 15, 4, 8, 6, 2, 10],\n  [6, 15, 14, 9, 11, 3, 0, 8, 12, 2, 13, 7, 1, 4, 10, 5],\n  [10, 2, 8, 4, 7, 6, 1, 5, 15, 11, 9, 14, 3, 12, 13, 0],\n  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n  [14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3],\n  [11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4],\n  [7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8],\n  [9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13],\n  [2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9]\n]\n\nBlake.u256 = [\n  0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344,\n  0xa4093822, 0x299f31d0, 0x082efa98, 0xec4e6c89,\n  0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\n  0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917\n]\n\nBlake.u512 = [\n  0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344,\n  0xa4093822, 0x299f31d0, 0x082efa98, 0xec4e6c89,\n  0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\n  0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917,\n  0x9216d5d9, 0x8979fb1b, 0xd1310ba6, 0x98dfb5ac,\n  0x2ffd72db, 0xd01adfb7, 0xb8e1afed, 0x6a267e96,\n  0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7,\n  0x0801f2e2, 0x858efc16, 0x636920d8, 0x71574e69\n]\n\nBlake.padding = Buffer.from([\n  0x80, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n])\n\nmodule.exports = Blake\n", "const Blake = require('./blake')\n\nconst zo = Buffer.from([0x01])\nconst oo = Buffer.from([0x81])\n\nconst rot = (x, n) => ((x << (32 - n)) | (x >>> n)) >>> 0\n\nfunction g (v, m, i, a, b, c, d, e) {\n  const sigma = Blake.sigma\n  const u256 = Blake.u256\n\n  v[a] = (v[a] + ((m[sigma[i][e]] ^ u256[sigma[i][e + 1]]) >>> 0) + v[b]) >>> 0\n  v[d] = rot(v[d] ^ v[a], 16)\n  v[c] = (v[c] + v[d]) >>> 0\n  v[b] = rot(v[b] ^ v[c], 12)\n  v[a] = (v[a] + ((m[sigma[i][e + 1]] ^ u256[sigma[i][e]]) >>> 0) + v[b]) >>> 0\n  v[d] = rot(v[d] ^ v[a], 8)\n  v[c] = (v[c] + v[d]) >>> 0\n  v[b] = rot(v[b] ^ v[c], 7)\n}\n\nmodule.exports = class Blake256 extends Blake {\n  constructor () {\n    super()\n\n    this._h = [\n      0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n      0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n    ]\n\n    this._s = [0, 0, 0, 0]\n\n    this._block = Buffer.alloc(64)\n    this._blockOffset = 0\n    this._length = [0, 0]\n\n    this._nullt = false\n\n    this._zo = zo\n    this._oo = oo\n  }\n\n  _compress () {\n    const u256 = Blake.u256\n    const v = new Array(16)\n    const m = new Array(16)\n    let i\n\n    for (i = 0; i < 16; ++i) m[i] = this._block.readUInt32BE(i * 4)\n    for (i = 0; i < 8; ++i) v[i] = this._h[i] >>> 0\n    for (i = 8; i < 12; ++i) v[i] = (this._s[i - 8] ^ u256[i - 8]) >>> 0\n    for (i = 12; i < 16; ++i) v[i] = u256[i - 8]\n\n    if (!this._nullt) {\n      v[12] = (v[12] ^ this._length[0]) >>> 0\n      v[13] = (v[13] ^ this._length[0]) >>> 0\n      v[14] = (v[14] ^ this._length[1]) >>> 0\n      v[15] = (v[15] ^ this._length[1]) >>> 0\n    }\n\n    for (i = 0; i < 14; ++i) {\n      /* column step */\n      g(v, m, i, 0, 4, 8, 12, 0)\n      g(v, m, i, 1, 5, 9, 13, 2)\n      g(v, m, i, 2, 6, 10, 14, 4)\n      g(v, m, i, 3, 7, 11, 15, 6)\n      /* diagonal step */\n      g(v, m, i, 0, 5, 10, 15, 8)\n      g(v, m, i, 1, 6, 11, 12, 10)\n      g(v, m, i, 2, 7, 8, 13, 12)\n      g(v, m, i, 3, 4, 9, 14, 14)\n    }\n\n    for (i = 0; i < 16; ++i) this._h[i % 8] = (this._h[i % 8] ^ v[i]) >>> 0\n    for (i = 0; i < 8; ++i) this._h[i] = (this._h[i] ^ this._s[i % 4]) >>> 0\n  }\n\n  _padding () {\n    let lo = this._length[0] + this._blockOffset * 8\n    let hi = this._length[1]\n    if (lo >= 0x0100000000) {\n      lo -= 0x0100000000\n      hi += 1\n    }\n\n    const msglen = Buffer.alloc(8)\n    msglen.writeUInt32BE(hi, 0)\n    msglen.writeUInt32BE(lo, 4)\n\n    if (this._blockOffset === 55) {\n      this._length[0] -= 8\n      this.update(this._oo)\n    } else {\n      if (this._blockOffset < 55) {\n        if (this._blockOffset === 0) this._nullt = true\n        this._length[0] -= (55 - this._blockOffset) * 8\n        this.update(Blake.padding.slice(0, 55 - this._blockOffset))\n      } else {\n        this._length[0] -= (64 - this._blockOffset) * 8\n        this.update(Blake.padding.slice(0, 64 - this._blockOffset))\n        this._length[0] -= 55 * 8\n        this.update(Blake.padding.slice(1, 1 + 55))\n        this._nullt = true\n      }\n\n      this.update(this._zo)\n      this._length[0] -= 8\n    }\n\n    this._length[0] -= 64\n    this.update(msglen)\n  }\n\n  digest () {\n    this._padding()\n\n    const buffer = Buffer.alloc(32)\n    for (let i = 0; i < 8; ++i) buffer.writeUInt32BE(this._h[i], i * 4)\n    return buffer\n  }\n}\n", "const Blake256 = require('./blake256')\n\nconst zo = Buffer.from([0x00])\nconst oo = Buffer.from([0x80])\n\nmodule.exports = class Blake224 extends Blake256 {\n  constructor () {\n    super()\n\n    this._h = [\n      0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n      0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4\n    ]\n\n    this._zo = zo\n    this._oo = oo\n  }\n\n  digest () {\n    this._padding()\n\n    const buffer = Buffer.alloc(28)\n    for (let i = 0; i < 7; ++i) buffer.writeUInt32BE(this._h[i], i * 4)\n    return buffer\n  }\n}\n", "const Blake = require('./blake')\n\nconst zo = Buffer.from([0x01])\nconst oo = Buffer.from([0x81])\n\nfunction rot (v, i, j, n) {\n  let hi = v[i * 2] ^ v[j * 2]\n  let lo = v[i * 2 + 1] ^ v[j * 2 + 1]\n\n  if (n >= 32) {\n    lo = lo ^ hi\n    hi = lo ^ hi\n    lo = lo ^ hi\n    n -= 32\n  }\n\n  if (n === 0) {\n    v[i * 2] = hi >>> 0\n    v[i * 2 + 1] = lo >>> 0\n  } else {\n    v[i * 2] = ((hi >>> n) | (lo << (32 - n))) >>> 0\n    v[i * 2 + 1] = ((lo >>> n) | (hi << (32 - n))) >>> 0\n  }\n}\n\nfunction g (v, m, i, a, b, c, d, e) {\n  const sigma = Blake.sigma\n  const u512 = Blake.u512\n  let lo\n\n  // v[a] += (m[sigma[i][e]] ^ u512[sigma[i][e+1]]) + v[b];\n  lo = v[a * 2 + 1] + ((m[sigma[i][e] * 2 + 1] ^ u512[sigma[i][e + 1] * 2 + 1]) >>> 0) + v[b * 2 + 1]\n  v[a * 2] = (v[a * 2] + ((m[sigma[i][e] * 2] ^ u512[sigma[i][e + 1] * 2]) >>> 0) + v[b * 2] + ~~(lo / 0x0100000000)) >>> 0\n  v[a * 2 + 1] = lo >>> 0\n\n  // v[d] = ROT( v[d] ^ v[a],32);\n  rot(v, d, a, 32)\n\n  // v[c] += v[d];\n  lo = v[c * 2 + 1] + v[d * 2 + 1]\n  v[c * 2] = (v[c * 2] + v[d * 2] + ~~(lo / 0x0100000000)) >>> 0\n  v[c * 2 + 1] = lo >>> 0\n\n  // v[b] = ROT( v[b] ^ v[c],25);\n  rot(v, b, c, 25)\n\n  // v[a] += (m[sigma[i][e+1]] ^ u512[sigma[i][e]])+v[b];\n  lo = v[a * 2 + 1] + ((m[sigma[i][e + 1] * 2 + 1] ^ u512[sigma[i][e] * 2 + 1]) >>> 0) + v[b * 2 + 1]\n  v[a * 2] = (v[a * 2] + ((m[sigma[i][e + 1] * 2] ^ u512[sigma[i][e] * 2]) >>> 0) + v[b * 2] + ~~(lo / 0x0100000000)) >>> 0\n  v[a * 2 + 1] = lo >>> 0\n\n  // v[d] = ROT( v[d] ^ v[a],16);\n  rot(v, d, a, 16)\n\n  // v[c] += v[d];\n  lo = v[c * 2 + 1] + v[d * 2 + 1]\n  v[c * 2] = (v[c * 2] + v[d * 2] + ~~(lo / 0x0100000000)) >>> 0\n  v[c * 2 + 1] = lo >>> 0\n\n  // v[b] = ROT( v[b] ^ v[c],11)\n  rot(v, b, c, 11)\n}\n\nmodule.exports = class Blake512 extends Blake {\n  constructor () {\n    super()\n\n    this._h = [\n      0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b,\n      0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n      0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f,\n      0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179\n    ]\n\n    this._s = [0, 0, 0, 0, 0, 0, 0, 0]\n\n    this._block = Buffer.alloc(128)\n    this._blockOffset = 0\n    this._length = [0, 0, 0, 0]\n\n    this._nullt = false\n\n    this._zo = zo\n    this._oo = oo\n  }\n\n  _compress () {\n    const u512 = Blake.u512\n    const v = new Array(32)\n    const m = new Array(32)\n    let i\n\n    for (i = 0; i < 32; ++i) m[i] = this._block.readUInt32BE(i * 4)\n    for (i = 0; i < 16; ++i) v[i] = this._h[i] >>> 0\n    for (i = 16; i < 24; ++i) v[i] = (this._s[i - 16] ^ u512[i - 16]) >>> 0\n    for (i = 24; i < 32; ++i) v[i] = u512[i - 16]\n\n    if (!this._nullt) {\n      v[24] = (v[24] ^ this._length[1]) >>> 0\n      v[25] = (v[25] ^ this._length[0]) >>> 0\n      v[26] = (v[26] ^ this._length[1]) >>> 0\n      v[27] = (v[27] ^ this._length[0]) >>> 0\n      v[28] = (v[28] ^ this._length[3]) >>> 0\n      v[29] = (v[29] ^ this._length[2]) >>> 0\n      v[30] = (v[30] ^ this._length[3]) >>> 0\n      v[31] = (v[31] ^ this._length[2]) >>> 0\n    }\n\n    for (i = 0; i < 16; ++i) {\n      /* column step */\n      g(v, m, i, 0, 4, 8, 12, 0)\n      g(v, m, i, 1, 5, 9, 13, 2)\n      g(v, m, i, 2, 6, 10, 14, 4)\n      g(v, m, i, 3, 7, 11, 15, 6)\n      /* diagonal step */\n      g(v, m, i, 0, 5, 10, 15, 8)\n      g(v, m, i, 1, 6, 11, 12, 10)\n      g(v, m, i, 2, 7, 8, 13, 12)\n      g(v, m, i, 3, 4, 9, 14, 14)\n    }\n\n    for (i = 0; i < 16; ++i) {\n      this._h[(i % 8) * 2] = (this._h[(i % 8) * 2] ^ v[i * 2]) >>> 0\n      this._h[(i % 8) * 2 + 1] = (this._h[(i % 8) * 2 + 1] ^ v[i * 2 + 1]) >>> 0\n    }\n\n    for (i = 0; i < 8; ++i) {\n      this._h[i * 2] = (this._h[i * 2] ^ this._s[(i % 4) * 2]) >>> 0\n      this._h[i * 2 + 1] = (this._h[i * 2 + 1] ^ this._s[(i % 4) * 2 + 1]) >>> 0\n    }\n  }\n\n  _padding () {\n    const len = this._length.slice()\n    len[0] += this._blockOffset * 8\n    this._lengthCarry(len)\n\n    const msglen = Buffer.alloc(16)\n    for (let i = 0; i < 4; ++i) msglen.writeUInt32BE(len[3 - i], i * 4)\n\n    if (this._blockOffset === 111) {\n      this._length[0] -= 8\n      this.update(this._oo)\n    } else {\n      if (this._blockOffset < 111) {\n        if (this._blockOffset === 0) this._nullt = true\n        this._length[0] -= (111 - this._blockOffset) * 8\n        this.update(Blake.padding.slice(0, 111 - this._blockOffset))\n      } else {\n        this._length[0] -= (128 - this._blockOffset) * 8\n        this.update(Blake.padding.slice(0, 128 - this._blockOffset))\n        this._length[0] -= 111 * 8\n        this.update(Blake.padding.slice(1, 1 + 111))\n        this._nullt = true\n      }\n\n      this.update(this._zo)\n      this._length[0] -= 8\n    }\n\n    this._length[0] -= 128\n    this.update(msglen)\n  }\n\n  digest () {\n    this._padding()\n\n    const buffer = Buffer.alloc(64)\n    for (let i = 0; i < 16; ++i) buffer.writeUInt32BE(this._h[i], i * 4)\n    return buffer\n  }\n}\n", "const Blake512 = require('./blake512')\n\nconst zo = Buffer.from([0x00])\nconst oo = Buffer.from([0x80])\n\nmodule.exports = class Blake384 extends Blake512 {\n  constructor () {\n    super()\n\n    this._h = [\n      0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507,\n      0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n      0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511,\n      0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4\n    ]\n\n    this._zo = zo\n    this._oo = oo\n  }\n\n  digest () {\n    this._padding()\n\n    const buffer = Buffer.alloc(48)\n    for (let i = 0; i < 12; ++i) buffer.writeUInt32BE(this._h[i], i * 4)\n    return buffer\n  }\n}\n", "module.exports = {\n  Blake224: require('./blake224'),\n  Blake256: require('./blake256'),\n  Blake384: require('./blake384'),\n  Blake512: require('./blake512')\n}\n", "module.exports = require('./lib/api')(require('./lib'))\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexports.bigInt2BytesLE = function bigInt2BytesLE(_a, len) {\n    const b = Array(len);\n    let v = BigInt(_a);\n    for (let i=0; i<len; i++) {\n        b[i] = Number(v & 0xFFn);\n        v = v >> 8n;\n    }\n    return b;\n};\n\nexports.bigInt2U32LE = function bigInt2BytesLE(_a, len) {\n    const b = Array(len);\n    let v = BigInt(_a);\n    for (let i=0; i<len; i++) {\n        b[i] = Number(v & 0xFFFFFFFFn);\n        v = v >> 32n;\n    }\n    return b;\n};\n\nexports.isOcamNum = function(a) {\n    if (!Array.isArray(a)) return false;\n    if (a.length != 3) return false;\n    if (typeof a[0] !== \"number\") return false;\n    if (typeof a[1] !== \"number\") return false;\n    if (!Array.isArray(a[2])) return false;\n    return true;\n};\n\n\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildInt(module, n64, _prefix) {\n\n    const prefix = _prefix || \"int\";\n    if (module.modules[prefix]) return prefix;  // already builded\n    module.modules[prefix] = {};\n\n    const n32 = n64*2;\n    const n8 = n64*8;\n\n    function buildCopy() {\n        const f = module.addFunction(prefix+\"_copy\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<n64; i++) {\n            f.addCode(\n                c.i64_store(\n                    c.getLocal(\"pr\"),\n                    i*8,\n                    c.i64_load(\n                        c.getLocal(\"px\"),\n                        i*8\n                    )\n                )\n            );\n        }\n    }\n\n    function buildZero() {\n        const f = module.addFunction(prefix+\"_zero\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<n64; i++) {\n            f.addCode(\n                c.i64_store(\n                    c.getLocal(\"pr\"),\n                    i*8,\n                    c.i64_const(0)\n                )\n            );\n        }\n    }\n\n    function buildOne() {\n        const f = module.addFunction(prefix+\"_one\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.i64_store(\n                c.getLocal(\"pr\"),\n                0,\n                c.i64_const(1)\n            )\n        );\n        for (let i=1; i<n64; i++) {\n            f.addCode(\n                c.i64_store(\n                    c.getLocal(\"pr\"),\n                    i*8,\n                    c.i64_const(0)\n                )\n            );\n        }\n    }\n\n    function buildIsZero() {\n        const f = module.addFunction(prefix+\"_isZero\");\n        f.addParam(\"px\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        function getCompCode(n) {\n            if (n==0) {\n                return  c.ret(c.i64_eqz(\n                    c.i64_load(c.getLocal(\"px\"))\n                ));\n            }\n            return c.if(\n                c.i64_eqz(\n                    c.i64_load(c.getLocal(\"px\"), n*8 )\n                ),\n                getCompCode(n-1),\n                c.ret(c.i32_const(0))\n            );\n        }\n\n        f.addCode(getCompCode(n64-1));\n        f.addCode(c.ret(c.i32_const(0)));\n    }\n\n    function buildEq() {\n        const f = module.addFunction(prefix+\"_eq\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"py\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        function getCompCode(n) {\n            if (n==0) {\n                return  c.ret(c.i64_eq(\n                    c.i64_load(c.getLocal(\"px\")),\n                    c.i64_load(c.getLocal(\"py\"))\n                ));\n            }\n            return c.if(\n                c.i64_eq(\n                    c.i64_load(c.getLocal(\"px\"), n*8 ),\n                    c.i64_load(c.getLocal(\"py\"), n*8 )\n                ),\n                getCompCode(n-1),\n                c.ret(c.i32_const(0))\n            );\n        }\n\n        f.addCode(getCompCode(n64-1));\n        f.addCode(c.ret(c.i32_const(0)));\n    }\n\n\n\n    function buildGte() {\n        const f = module.addFunction(prefix+\"_gte\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"py\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        function getCompCode(n) {\n            if (n==0) {\n                return  c.ret(c.i64_ge_u(\n                    c.i64_load(c.getLocal(\"px\")),\n                    c.i64_load(c.getLocal(\"py\"))\n                ));\n            }\n            return c.if(\n                c.i64_lt_u(\n                    c.i64_load(c.getLocal(\"px\"), n*8 ),\n                    c.i64_load(c.getLocal(\"py\"), n*8 )\n                ),\n                c.ret(c.i32_const(0)),\n                c.if(\n                    c.i64_gt_u(\n                        c.i64_load(c.getLocal(\"px\"), n*8 ),\n                        c.i64_load(c.getLocal(\"py\"), n*8 )\n                    ),\n                    c.ret(c.i32_const(1)),\n                    getCompCode(n-1)\n                )\n            );\n        }\n\n        f.addCode(getCompCode(n64-1));\n        f.addCode(c.ret(c.i32_const(0)));\n    }\n\n\n\n    function buildAdd() {\n\n        const f = module.addFunction(prefix+\"_add\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"c\", \"i64\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.setLocal(\n            \"c\",\n            c.i64_add(\n                c.i64_load32_u(c.getLocal(\"x\")),\n                c.i64_load32_u(c.getLocal(\"y\"))\n            )\n        ));\n\n        f.addCode(c.i64_store32(\n            c.getLocal(\"r\"),\n            c.getLocal(\"c\"),\n        ));\n\n        for (let i=1; i<n32; i++) {\n            f.addCode(c.setLocal( \"c\",\n                c.i64_add(\n                    c.i64_add(\n                        c.i64_load32_u(c.getLocal(\"x\"), 4*i),\n                        c.i64_load32_u(c.getLocal(\"y\"), 4*i)\n                    ),\n                    c.i64_shr_u (c.getLocal(\"c\"), c.i64_const(32))\n                )\n            ));\n\n            f.addCode(c.i64_store32(\n                c.getLocal(\"r\"),\n                i*4,\n                c.getLocal(\"c\")\n            ));\n        }\n\n        f.addCode(c.i32_wrap_i64(c.i64_shr_u (c.getLocal(\"c\"), c.i64_const(32))));\n    }\n\n\n    function buildSub() {\n\n        const f = module.addFunction(prefix+\"_sub\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"c\", \"i64\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.setLocal(\n            \"c\",\n            c.i64_sub(\n                c.i64_load32_u(c.getLocal(\"x\")),\n                c.i64_load32_u(c.getLocal(\"y\"))\n            )\n        ));\n\n        f.addCode(c.i64_store32(\n            c.getLocal(\"r\"),\n            c.i64_and(\n                c.getLocal(\"c\"),\n                c.i64_const(\"0xFFFFFFFF\")\n            )\n        ));\n\n        for (let i=1; i<n32; i++) {\n            f.addCode(c.setLocal( \"c\",\n                c.i64_add(\n                    c.i64_sub(\n                        c.i64_load32_u(c.getLocal(\"x\"), 4*i),\n                        c.i64_load32_u(c.getLocal(\"y\"), 4*i)\n                    ),\n                    c.i64_shr_s (c.getLocal(\"c\"), c.i64_const(32))\n                )\n            ));\n\n            f.addCode(c.i64_store32(\n                c.getLocal(\"r\"),\n                i*4,\n                c.i64_and( c.getLocal(\"c\"), c.i64_const(\"0xFFFFFFFF\"))\n            ));\n        }\n\n        f.addCode(c.i32_wrap_i64 ( c.i64_shr_s (c.getLocal(\"c\"), c.i64_const(32))));\n    }\n\n\n    function buildMul() {\n\n        const f = module.addFunction(prefix+\"_mul\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"c0\", \"i64\");\n        f.addLocal(\"c1\", \"i64\");\n\n\n        for (let i=0;i<n32; i++) {\n            f.addLocal(\"x\"+i, \"i64\");\n            f.addLocal(\"y\"+i, \"i64\");\n        }\n\n        const c = f.getCodeBuilder();\n\n        const loadX = [];\n        const loadY = [];\n        function mulij(i, j) {\n            let X,Y;\n            if (!loadX[i]) {\n                X = c.teeLocal(\"x\"+i, c.i64_load32_u( c.getLocal(\"x\"), i*4));\n                loadX[i] = true;\n            } else {\n                X = c.getLocal(\"x\"+i);\n            }\n            if (!loadY[j]) {\n                Y = c.teeLocal(\"y\"+j, c.i64_load32_u( c.getLocal(\"y\"), j*4));\n                loadY[j] = true;\n            } else {\n                Y = c.getLocal(\"y\"+j);\n            }\n\n            return c.i64_mul( X, Y );\n        }\n\n        let c0 = \"c0\";\n        let c1 = \"c1\";\n\n        for (let k=0; k<n32*2-1; k++) {\n            for (let i=Math.max(0, k-n32+1); (i<=k)&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n\n            }\n\n            f.addCode(\n                c.i64_store32(\n                    c.getLocal(\"r\"),\n                    k*4,\n                    c.getLocal(c0)\n                )\n            );\n            [c0, c1] = [c1, c0];\n            f.addCode(\n                c.setLocal(c1,\n                    c.i64_shr_u(\n                        c.getLocal(c0),\n                        c.i64_const(32)\n                    )\n                )\n            );\n        }\n        f.addCode(\n            c.i64_store32(\n                c.getLocal(\"r\"),\n                n32*4*2-4,\n                c.getLocal(c0)\n            )\n        );\n\n    }\n\n\n\n    function buildSquare() {\n\n        const f = module.addFunction(prefix+\"_square\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"c0\", \"i64\");\n        f.addLocal(\"c1\", \"i64\");\n        f.addLocal(\"c0_old\", \"i64\");\n        f.addLocal(\"c1_old\", \"i64\");\n\n\n        for (let i=0;i<n32; i++) {\n            f.addLocal(\"x\"+i, \"i64\");\n        }\n\n        const c = f.getCodeBuilder();\n\n        const loadX = [];\n        function mulij(i, j) {\n            let X,Y;\n            if (!loadX[i]) {\n                X = c.teeLocal(\"x\"+i, c.i64_load32_u( c.getLocal(\"x\"), i*4));\n                loadX[i] = true;\n            } else {\n                X = c.getLocal(\"x\"+i);\n            }\n            if (!loadX[j]) {\n                Y = c.teeLocal(\"x\"+j, c.i64_load32_u( c.getLocal(\"x\"), j*4));\n                loadX[j] = true;\n            } else {\n                Y = c.getLocal(\"x\"+j);\n            }\n\n            return c.i64_mul( X, Y );\n        }\n\n        let c0 = \"c0\";\n        let c1 = \"c1\";\n        let c0_old = \"c0_old\";\n        let c1_old = \"c1_old\";\n\n        for (let k=0; k<n32*2-1; k++) {\n            f.addCode(\n                c.setLocal(c0, c.i64_const(0)),\n                c.setLocal(c1, c.i64_const(0)),\n            );\n\n            for (let i=Math.max(0, k-n32+1); (i<((k+1)>>1) )&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n            // Multiply by 2\n            f.addCode(\n                c.setLocal(c0,\n                    c.i64_shl(\n                        c.i64_and(\n                            c.getLocal(c0),\n                            c.i64_const(0xFFFFFFFF)\n                        ),\n                        c.i64_const(1)\n                    )\n                )\n            );\n\n            f.addCode(\n                c.setLocal(c1,\n                    c.i64_add(\n                        c.i64_shl(\n                            c.getLocal(c1),\n                            c.i64_const(1)\n                        ),\n                        c.i64_shr_u(\n                            c.getLocal(c0),\n                            c.i64_const(32)\n                        )\n                    )\n                )\n            );\n\n            if (k%2 == 0) {\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(k>>1, k>>1)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n            // Add the old carry\n\n            if (k>0) {\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            c.i64_and(\n                                c.getLocal(c0_old),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.i64_add(\n                                c.getLocal(c1),\n                                c.i64_shr_u(\n                                    c.getLocal(c0),\n                                    c.i64_const(32)\n                                )\n                            ),\n                            c.getLocal(c1_old)\n                        )\n                    )\n                );\n            }\n\n            f.addCode(\n                c.i64_store32(\n                    c.getLocal(\"r\"),\n                    k*4,\n                    c.getLocal(c0)\n                )\n            );\n\n            f.addCode(\n                c.setLocal(\n                    c0_old,\n                    c.getLocal(c1)\n                ),\n                c.setLocal(\n                    c1_old,\n                    c.i64_shr_u(\n                        c.getLocal(c0_old),\n                        c.i64_const(32)\n                    )\n                )\n            );\n\n        }\n        f.addCode(\n            c.i64_store32(\n                c.getLocal(\"r\"),\n                n32*4*2-4,\n                c.getLocal(c0_old)\n            )\n        );\n\n    }\n\n\n    function buildSquareOld() {\n        const f = module.addFunction(prefix+\"_squareOld\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(prefix + \"_mul\", c.getLocal(\"x\"), c.getLocal(\"x\"), c.getLocal(\"r\")));\n    }\n\n    function _buildMul1() {\n        const f = module.addFunction(prefix+\"__mul1\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"y\", \"i64\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"c\", \"i64\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.setLocal(\n            \"c\",\n            c.i64_mul(\n                c.i64_load32_u(c.getLocal(\"px\"), 0, 0),\n                c.getLocal(\"y\")\n            )\n        ));\n\n        f.addCode(c.i64_store32(\n            c.getLocal(\"pr\"),\n            0,\n            0,\n            c.getLocal(\"c\"),\n        ));\n\n        for (let i=1; i<n32; i++) {\n            f.addCode(c.setLocal( \"c\",\n                c.i64_add(\n                    c.i64_mul(\n                        c.i64_load32_u(c.getLocal(\"px\"), 4*i, 0),\n                        c.getLocal(\"y\")\n                    ),\n                    c.i64_shr_u (c.getLocal(\"c\"), c.i64_const(32))\n                )\n            ));\n\n            f.addCode(c.i64_store32(\n                c.getLocal(\"pr\"),\n                i*4,\n                0,\n                c.getLocal(\"c\")\n            ));\n        }\n    }\n\n    function _buildAdd1() {\n        const f = module.addFunction(prefix+\"__add1\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i64\");\n        f.addLocal(\"c\", \"i64\");\n        f.addLocal(\"px\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.setLocal(\"px\", c.getLocal(\"x\")));\n\n        f.addCode(c.setLocal(\n            \"c\",\n            c.i64_add(\n                c.i64_load32_u(c.getLocal(\"px\"), 0, 0),\n                c.getLocal(\"y\")\n            )\n        ));\n\n        f.addCode(c.i64_store32(\n            c.getLocal(\"px\"),\n            0,\n            0,\n            c.getLocal(\"c\"),\n        ));\n\n        f.addCode(c.setLocal(\n            \"c\",\n            c.i64_shr_u(\n                c.getLocal(\"c\"),\n                c.i64_const(32)\n            )\n        ));\n\n        f.addCode(c.block(c.loop(\n            c.br_if(\n                1,\n                c.i64_eqz(c.getLocal(\"c\"))\n            ),\n            c.setLocal(\n                \"px\",\n                c.i32_add(\n                    c.getLocal(\"px\"),\n                    c.i32_const(4)\n                )\n            ),\n\n            c.setLocal(\n                \"c\",\n                c.i64_add(\n                    c.i64_load32_u(c.getLocal(\"px\"), 0, 0),\n                    c.getLocal(\"c\")\n                )\n            ),\n\n            c.i64_store32(\n                c.getLocal(\"px\"),\n                0,\n                0,\n                c.getLocal(\"c\"),\n            ),\n\n            c.setLocal(\n                \"c\",\n                c.i64_shr_u(\n                    c.getLocal(\"c\"),\n                    c.i64_const(32)\n                )\n            ),\n\n            c.br(0)\n        )));\n    }\n\n\n    function buildDiv() {\n        _buildMul1();\n        _buildAdd1();\n\n        const f = module.addFunction(prefix+\"_div\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"c\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"rr\", \"i32\");\n        f.addLocal(\"cc\", \"i32\");\n        f.addLocal(\"eX\", \"i32\");\n        f.addLocal(\"eY\", \"i32\");\n        f.addLocal(\"sy\", \"i64\");\n        f.addLocal(\"sx\", \"i64\");\n        f.addLocal(\"ec\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const Y = c.i32_const(module.alloc(n8));\n        const Caux = c.i32_const(module.alloc(n8));\n        const Raux = c.i32_const(module.alloc(n8));\n        const C = c.getLocal(\"cc\");\n        const R = c.getLocal(\"rr\");\n        const pr1 = module.alloc(n8*2);\n        const R1 = c.i32_const(pr1);\n        const R2 = c.i32_const(pr1+n8);\n\n        // Ic c is 0 then store it in an auxiliary buffer\n        f.addCode(c.if(\n            c.getLocal(\"c\"),\n            c.setLocal(\"cc\", c.getLocal(\"c\")),\n            c.setLocal(\"cc\", Caux)\n        ));\n\n        // Ic r is 0 then store it in an auxiliary buffer\n        f.addCode(c.if(\n            c.getLocal(\"r\"),\n            c.setLocal(\"rr\", c.getLocal(\"r\")),\n            c.setLocal(\"rr\", Raux)\n        ));\n\n        // Copy\n        f.addCode(c.call(prefix + \"_copy\", c.getLocal(\"x\"), R));\n        f.addCode(c.call(prefix + \"_copy\", c.getLocal(\"y\"), Y));\n        f.addCode(c.call(prefix + \"_zero\", C));\n        f.addCode(c.call(prefix + \"_zero\", R1));\n\n\n        f.addCode(c.setLocal(\"eX\", c.i32_const(n8-1)));\n        f.addCode(c.setLocal(\"eY\", c.i32_const(n8-1)));\n\n        // while (eY>3)&&(Y[eY]==0) ey--;\n        f.addCode(c.block(c.loop(\n            c.br_if(\n                1,\n                c.i32_or(\n                    c.i32_load8_u(\n                        c.i32_add(Y , c.getLocal(\"eY\")),\n                        0,\n                        0\n                    ),\n                    c.i32_eq(\n                        c.getLocal(\"eY\"),\n                        c.i32_const(3)\n                    )\n                )\n            ),\n            c.setLocal(\"eY\", c.i32_sub(c.getLocal(\"eY\"), c.i32_const(1))),\n            c.br(0)\n        )));\n\n        f.addCode(\n            c.setLocal(\n                \"sy\",\n                c.i64_add(\n                    c.i64_load32_u(\n                        c.i32_sub(\n                            c.i32_add( Y, c.getLocal(\"eY\")),\n                            c.i32_const(3)\n                        ),\n                        0,\n                        0\n                    ),\n                    c.i64_const(1)\n                )\n            )\n        );\n\n        // Force a divide by 0 if quotien is 0\n        f.addCode(\n            c.if(\n                c.i64_eq(\n                    c.getLocal(\"sy\"),\n                    c.i64_const(1)\n                ),\n                c.drop(c.i64_div_u(c.i64_const(0), c.i64_const(0)))\n            )\n        );\n\n        f.addCode(c.block(c.loop(\n\n            // while (eX>7)&&(Y[eX]==0) ex--;\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_or(\n                        c.i32_load8_u(\n                            c.i32_add(R , c.getLocal(\"eX\")),\n                            0,\n                            0\n                        ),\n                        c.i32_eq(\n                            c.getLocal(\"eX\"),\n                            c.i32_const(7)\n                        )\n                    )\n                ),\n                c.setLocal(\"eX\", c.i32_sub(c.getLocal(\"eX\"), c.i32_const(1))),\n                c.br(0)\n            )),\n\n            c.setLocal(\n                \"sx\",\n                c.i64_load(\n                    c.i32_sub(\n                        c.i32_add( R, c.getLocal(\"eX\")),\n                        c.i32_const(7)\n                    ),\n                    0,\n                    0\n                )\n            ),\n\n            c.setLocal(\n                \"sx\",\n                c.i64_div_u(\n                    c.getLocal(\"sx\"),\n                    c.getLocal(\"sy\")\n                )\n            ),\n            c.setLocal(\n                \"ec\",\n                c.i32_sub(\n                    c.i32_sub(\n                        c.getLocal(\"eX\"),\n                        c.getLocal(\"eY\")\n                    ),\n                    c.i32_const(4)\n                )\n            ),\n\n            // While greater than 32 bits or ec is neg, shr and inc exp\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_and(\n                        c.i64_eqz(\n                            c.i64_and(\n                                c.getLocal(\"sx\"),\n                                c.i64_const(\"0xFFFFFFFF00000000\")\n                            )\n                        ),\n                        c.i32_ge_s(\n                            c.getLocal(\"ec\"),\n                            c.i32_const(0)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"sx\",\n                    c.i64_shr_u(\n                        c.getLocal(\"sx\"),\n                        c.i64_const(8)\n                    )\n                ),\n\n                c.setLocal(\n                    \"ec\",\n                    c.i32_add(\n                        c.getLocal(\"ec\"),\n                        c.i32_const(1)\n                    )\n                ),\n                c.br(0)\n            )),\n\n            c.if(\n                c.i64_eqz(c.getLocal(\"sx\")),\n                [\n                    ...c.br_if(\n                        2,\n                        c.i32_eqz(c.call(prefix + \"_gte\", R, Y))\n                    ),\n                    ...c.setLocal(\"sx\", c.i64_const(1)),\n                    ...c.setLocal(\"ec\", c.i32_const(0))\n                ]\n            ),\n\n            c.call(prefix + \"__mul1\", Y, c.getLocal(\"sx\"), R2),\n            c.drop(c.call(\n                prefix + \"_sub\",\n                R,\n                c.i32_sub(R2, c.getLocal(\"ec\")),\n                R\n            )),\n            c.call(\n                prefix + \"__add1\",\n                c.i32_add(C, c.getLocal(\"ec\")),\n                c.getLocal(\"sx\")\n            ),\n            c.br(0)\n        )));\n    }\n\n    function buildInverseMod() {\n\n        const f = module.addFunction(prefix+\"_inverseMod\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"pm\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"t\", \"i32\");\n        f.addLocal(\"newt\", \"i32\");\n        f.addLocal(\"r\", \"i32\");\n        f.addLocal(\"qq\", \"i32\");\n        f.addLocal(\"qr\", \"i32\");\n        f.addLocal(\"newr\", \"i32\");\n        f.addLocal(\"swp\", \"i32\");\n        f.addLocal(\"x\", \"i32\");\n        f.addLocal(\"signt\", \"i32\");\n        f.addLocal(\"signnewt\", \"i32\");\n        f.addLocal(\"signx\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux1 = c.i32_const(module.alloc(n8));\n        const aux2 = c.i32_const(module.alloc(n8));\n        const aux3 = c.i32_const(module.alloc(n8));\n        const aux4 = c.i32_const(module.alloc(n8));\n        const aux5 = c.i32_const(module.alloc(n8));\n        const aux6 = c.i32_const(module.alloc(n8));\n        const mulBuff = c.i32_const(module.alloc(n8*2));\n        const aux7 = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.setLocal(\"t\", aux1),\n            c.call(prefix + \"_zero\", aux1),\n            c.setLocal(\"signt\", c.i32_const(0)),\n        );\n\n        f.addCode(\n            c.setLocal(\"r\", aux2),\n            c.call(prefix + \"_copy\", c.getLocal(\"pm\"), aux2)\n        );\n\n        f.addCode(\n            c.setLocal(\"newt\", aux3),\n            c.call(prefix + \"_one\", aux3),\n            c.setLocal(\"signnewt\", c.i32_const(0)),\n        );\n\n        f.addCode(\n            c.setLocal(\"newr\", aux4),\n            c.call(prefix + \"_copy\", c.getLocal(\"px\"), aux4)\n        );\n\n\n\n\n        f.addCode(c.setLocal(\"qq\", aux5));\n        f.addCode(c.setLocal(\"qr\", aux6));\n        f.addCode(c.setLocal(\"x\", aux7));\n\n        f.addCode(c.block(c.loop(\n            c.br_if(\n                1,\n                c.call(prefix + \"_isZero\", c.getLocal(\"newr\") )\n            ),\n            c.call(prefix + \"_div\", c.getLocal(\"r\"), c.getLocal(\"newr\"), c.getLocal(\"qq\"), c.getLocal(\"qr\")),\n\n            c.call(prefix + \"_mul\", c.getLocal(\"qq\"), c.getLocal(\"newt\"), mulBuff),\n\n            c.if(\n                c.getLocal(\"signt\"),\n                c.if(\n                    c.getLocal(\"signnewt\"),\n                    c.if (\n                        c.call(prefix + \"_gte\", mulBuff, c.getLocal(\"t\")),\n                        [\n                            ...c.drop(c.call(prefix + \"_sub\", mulBuff, c.getLocal(\"t\"), c.getLocal(\"x\"))),\n                            ...c.setLocal(\"signx\", c.i32_const(0))\n                        ],\n                        [\n                            ...c.drop(c.call(prefix + \"_sub\", c.getLocal(\"t\"), mulBuff, c.getLocal(\"x\"))),\n                            ...c.setLocal(\"signx\", c.i32_const(1))\n                        ],\n                    ),\n                    [\n                        ...c.drop(c.call(prefix + \"_add\", mulBuff, c.getLocal(\"t\"), c.getLocal(\"x\"))),\n                        ...c.setLocal(\"signx\", c.i32_const(1))\n                    ]\n                ),\n                c.if(\n                    c.getLocal(\"signnewt\"),\n                    [\n                        ...c.drop(c.call(prefix + \"_add\", mulBuff, c.getLocal(\"t\"), c.getLocal(\"x\"))),\n                        ...c.setLocal(\"signx\", c.i32_const(0))\n                    ],\n                    c.if (\n                        c.call(prefix + \"_gte\", c.getLocal(\"t\"), mulBuff),\n                        [\n                            ...c.drop(c.call(prefix + \"_sub\", c.getLocal(\"t\"), mulBuff, c.getLocal(\"x\"))),\n                            ...c.setLocal(\"signx\", c.i32_const(0))\n                        ],\n                        [\n                            ...c.drop(c.call(prefix + \"_sub\", mulBuff, c.getLocal(\"t\"), c.getLocal(\"x\"))),\n                            ...c.setLocal(\"signx\", c.i32_const(1))\n                        ]\n                    )\n                )\n            ),\n\n            c.setLocal(\"swp\", c.getLocal(\"t\")),\n            c.setLocal(\"t\", c.getLocal(\"newt\")),\n            c.setLocal(\"newt\", c.getLocal(\"x\")),\n            c.setLocal(\"x\", c.getLocal(\"swp\")),\n\n            c.setLocal(\"signt\", c.getLocal(\"signnewt\")),\n            c.setLocal(\"signnewt\", c.getLocal(\"signx\")),\n\n            c.setLocal(\"swp\", c.getLocal(\"r\")),\n            c.setLocal(\"r\", c.getLocal(\"newr\")),\n            c.setLocal(\"newr\", c.getLocal(\"qr\")),\n            c.setLocal(\"qr\", c.getLocal(\"swp\")),\n\n            c.br(0)\n        )));\n\n        f.addCode(c.if(\n            c.getLocal(\"signt\"),\n            c.drop(c.call(prefix + \"_sub\", c.getLocal(\"pm\"), c.getLocal(\"t\"), c.getLocal(\"pr\"))),\n            c.call(prefix + \"_copy\", c.getLocal(\"t\"), c.getLocal(\"pr\"))\n        ));\n    }\n\n\n    buildCopy();\n    buildZero();\n    buildIsZero();\n    buildOne();\n    buildEq();\n    buildGte();\n    buildAdd();\n    buildSub();\n    buildMul();\n    buildSquare();\n    buildSquareOld();\n    buildDiv();\n    buildInverseMod();\n    module.exportFunction(prefix+\"_copy\");\n    module.exportFunction(prefix+\"_zero\");\n    module.exportFunction(prefix+\"_one\");\n    module.exportFunction(prefix+\"_isZero\");\n    module.exportFunction(prefix+\"_eq\");\n    module.exportFunction(prefix+\"_gte\");\n    module.exportFunction(prefix+\"_add\");\n    module.exportFunction(prefix+\"_sub\");\n    module.exportFunction(prefix+\"_mul\");\n    module.exportFunction(prefix+\"_square\");\n    module.exportFunction(prefix+\"_squareOld\");\n    module.exportFunction(prefix+\"_div\");\n    module.exportFunction(prefix+\"_inverseMod\");\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildTimesScalar(module, fnName, elementLen, opAB, opAA, opCopy, opInit) {\n\n    const f = module.addFunction(fnName);\n    f.addParam(\"base\", \"i32\");\n    f.addParam(\"scalar\", \"i32\");\n    f.addParam(\"scalarLength\", \"i32\");\n    f.addParam(\"r\", \"i32\");\n    f.addLocal(\"i\", \"i32\");\n    f.addLocal(\"b\", \"i32\");\n\n    const c = f.getCodeBuilder();\n\n    const aux = c.i32_const(module.alloc(elementLen));\n\n    f.addCode(\n        c.if(\n            c.i32_eqz(c.getLocal(\"scalarLength\")),\n            [\n                ...c.call(opInit, c.getLocal(\"r\")),\n                ...c.ret([])\n            ]\n        )\n    );\n    f.addCode(c.call(opCopy, c.getLocal(\"base\"), aux));\n    f.addCode(c.call(opInit, c.getLocal(\"r\")));\n    f.addCode(c.setLocal(\"i\", c.getLocal(\"scalarLength\")));\n    f.addCode(c.block(c.loop(\n        c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n\n        c.setLocal(\n            \"b\",\n            c.i32_load8_u(\n                c.i32_add(\n                    c.getLocal(\"scalar\"),\n                    c.getLocal(\"i\")\n                )\n            )\n        ),\n        ...innerLoop(),\n        c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n        c.br(0)\n    )));\n\n\n    function innerLoop() {\n        const code = [];\n        for (let i=0; i<8; i++) {\n            code.push(\n                ...c.call(opAA, c.getLocal(\"r\"), c.getLocal(\"r\")),\n                ...c.if(\n                    c.i32_ge_u( c.getLocal(\"b\"), c.i32_const(0x80 >> i)),\n                    [\n                        ...c.setLocal(\n                            \"b\",\n                            c.i32_sub(\n                                c.getLocal(\"b\"),\n                                c.i32_const(0x80 >> i)\n                            )\n                        ),\n                        ...c.call(opAB, c.getLocal(\"r\"),aux, c.getLocal(\"r\"))\n                    ]\n                )\n            );\n        }\n        return code;\n    }\n\n};\n", "\nmodule.exports = buildBatchInverse;\n\nfunction buildBatchInverse(module, prefix) {\n\n\n    const n8 = module.modules[prefix].n64*8;\n\n    const f = module.addFunction(prefix+\"_batchInverse\");\n    f.addParam(\"pIn\", \"i32\");\n    f.addParam(\"inStep\", \"i32\");\n    f.addParam(\"n\", \"i32\");\n    f.addParam(\"pOut\", \"i32\");\n    f.addParam(\"outStep\", \"i32\");\n    f.addLocal(\"itAux\", \"i32\");\n    f.addLocal(\"itIn\", \"i32\");\n    f.addLocal(\"itOut\",\"i32\");\n    f.addLocal(\"i\",\"i32\");\n\n    const c = f.getCodeBuilder();\n\n    const AUX = c.i32_const(module.alloc(n8));\n\n\n    // Alloc Working space for accumulated umltiplications\n    f.addCode(\n        c.setLocal(\"itAux\", c.i32_load( c.i32_const(0) )),\n        c.i32_store(\n            c.i32_const(0),\n            c.i32_add(\n                c.getLocal(\"itAux\"),\n                c.i32_mul(\n                    c.i32_add(\n                        c.getLocal(\"n\"),\n                        c.i32_const(1)\n                    ),\n                    c.i32_const(n8)\n                )\n            )\n        )\n    );\n\n    f.addCode(\n\n        // aux[0] = a;\n        c.call(prefix+\"_one\", c.getLocal(\"itAux\")),\n        // for (i=0;i<n;i++) aux[i] = aux[i-1]*in[i]\n        c.setLocal(\"itIn\", c.getLocal(\"pIn\")),\n        c.setLocal(\"itAux\", c.i32_add(c.getLocal(\"itAux\"), c.i32_const(n8))),\n        c.setLocal(\"i\", c.i32_const(0)),\n\n        c.block(c.loop(\n            c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n            c.if(\n                c.call(prefix+\"_isZero\", c.getLocal(\"itIn\")),\n                c.call(\n                    prefix + \"_copy\",\n                    c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8)),\n                    c.getLocal(\"itAux\")\n                ),\n                c.call(\n                    prefix+\"_mul\",\n                    c.getLocal(\"itIn\"),\n                    c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8)),\n                    c.getLocal(\"itAux\")\n                )\n            ),\n            c.setLocal(\"itIn\", c.i32_add(c.getLocal(\"itIn\"), c.getLocal(\"inStep\"))),\n            c.setLocal(\"itAux\", c.i32_add(c.getLocal(\"itAux\"), c.i32_const(n8))),\n            c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n            c.br(0)\n        )),\n\n        // point to the last\n        c.setLocal(\"itIn\", c.i32_sub(c.getLocal(\"itIn\"), c.getLocal(\"inStep\"))),\n        c.setLocal(\"itAux\", c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8))),\n        // itOut = pOut + (n-1)*stepOut   // Point to the last\n        c.setLocal(\n            \"itOut\",\n            c.i32_add(\n                c.getLocal(\"pOut\"),\n                c.i32_mul(\n                    c.i32_sub(c.getLocal(\"n\"), c.i32_const(1)),\n                    c.getLocal(\"outStep\"),\n                )\n            )\n        ),\n\n        // aux[n-1] = 1/aux[n-1]\n        c.call(prefix+\"_inverse\", c.getLocal(\"itAux\"), c.getLocal(\"itAux\") ),\n\n        c.block(c.loop(\n            c.br_if(1, c.i32_eqz( c.getLocal(\"i\"))),\n            c.if(\n                c.call(prefix+\"_isZero\", c.getLocal(\"itIn\")),\n                [\n                    ...c.call(\n                        prefix + \"_copy\",\n                        c.getLocal(\"itAux\"),\n                        c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8)),\n                    ),\n                    ...c.call(\n                        prefix + \"_zero\",\n                        c.getLocal(\"itOut\")\n                    )\n                ],[\n                    ...c.call(prefix + \"_copy\", c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8)), AUX),\n                    ...c.call(\n                        prefix+\"_mul\",\n                        c.getLocal(\"itAux\"),\n                        c.getLocal(\"itIn\"),\n                        c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8)),\n                    ),\n                    ...c.call(\n                        prefix+\"_mul\",\n                        c.getLocal(\"itAux\"),\n                        AUX,\n                        c.getLocal(\"itOut\")\n                    )\n                ]\n            ),\n            c.setLocal(\"itIn\", c.i32_sub(c.getLocal(\"itIn\"), c.getLocal(\"inStep\"))),\n            c.setLocal(\"itOut\", c.i32_sub(c.getLocal(\"itOut\"), c.getLocal(\"outStep\"))),\n            c.setLocal(\"itAux\", c.i32_sub(c.getLocal(\"itAux\"), c.i32_const(n8))),\n            c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n            c.br(0)\n        ))\n\n    );\n\n\n    // Recover Old memory\n    f.addCode(\n        c.i32_store(\n            c.i32_const(0),\n            c.getLocal(\"itAux\")\n        )\n    );\n\n}\n", "\n\nmodule.exports = buildBatchConvertion;\n\nfunction buildBatchConvertion(module, fnName, internalFnName, sizeIn, sizeOut, reverse) {\n    if (typeof reverse === \"undefined\") {\n        // Set the reverse in a way that allows to use the same buffer as in/out.\n        if (sizeIn < sizeOut) {\n            reverse = true;\n        } else {\n            reverse = false;\n        }\n    }\n\n    const f = module.addFunction(fnName);\n    f.addParam(\"pIn\", \"i32\");\n    f.addParam(\"n\", \"i32\");\n    f.addParam(\"pOut\", \"i32\");\n    f.addLocal(\"i\", \"i32\");\n    f.addLocal(\"itIn\", \"i32\");\n    f.addLocal(\"itOut\", \"i32\");\n\n    const c = f.getCodeBuilder();\n\n    if (reverse) {\n        f.addCode(\n            c.setLocal(\"itIn\",\n                c.i32_add(\n                    c.getLocal(\"pIn\"),\n                    c.i32_mul(\n                        c.i32_sub(\n                            c.getLocal(\"n\"),\n                            c.i32_const(1)\n                        ),\n                        c.i32_const(sizeIn)\n                    )\n                )\n            ),\n            c.setLocal(\"itOut\",\n                c.i32_add(\n                    c.getLocal(\"pOut\"),\n                    c.i32_mul(\n                        c.i32_sub(\n                            c.getLocal(\"n\"),\n                            c.i32_const(1)\n                        ),\n                        c.i32_const(sizeOut)\n                    )\n                )\n            ),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n                c.call(internalFnName, c.getLocal(\"itIn\"), c.getLocal(\"itOut\")),\n\n                c.setLocal(\"itIn\", c.i32_sub(c.getLocal(\"itIn\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itOut\", c.i32_sub(c.getLocal(\"itOut\"), c.i32_const(sizeOut))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n        );\n    } else {\n        f.addCode(\n            c.setLocal(\"itIn\", c.getLocal(\"pIn\")),\n            c.setLocal(\"itOut\", c.getLocal(\"pOut\")),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n                c.call(internalFnName, c.getLocal(\"itIn\"), c.getLocal(\"itOut\")),\n\n                c.setLocal(\"itIn\", c.i32_add(c.getLocal(\"itIn\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itOut\", c.i32_add(c.getLocal(\"itOut\"), c.i32_const(sizeOut))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n        );\n    }\n}\n", "\n\nmodule.exports = buildBatchConvertion;\n\nfunction buildBatchConvertion(module, fnName, internalFnName, sizeIn, sizeOut, reverse) {\n    if (typeof reverse === \"undefined\") {\n        // Set the reverse in a way that allows to use the same buffer as in/out.\n        if (sizeIn < sizeOut) {\n            reverse = true;\n        } else {\n            reverse = false;\n        }\n    }\n\n    const f = module.addFunction(fnName);\n    f.addParam(\"pIn1\", \"i32\");\n    f.addParam(\"pIn2\", \"i32\");\n    f.addParam(\"n\", \"i32\");\n    f.addParam(\"pOut\", \"i32\");\n    f.addLocal(\"i\", \"i32\");\n    f.addLocal(\"itIn1\", \"i32\");\n    f.addLocal(\"itIn2\", \"i32\");\n    f.addLocal(\"itOut\", \"i32\");\n\n    const c = f.getCodeBuilder();\n\n    if (reverse) {\n        f.addCode(\n            c.setLocal(\"itIn1\",\n                c.i32_add(\n                    c.getLocal(\"pIn1\"),\n                    c.i32_mul(\n                        c.i32_sub(\n                            c.getLocal(\"n\"),\n                            c.i32_const(1)\n                        ),\n                        c.i32_const(sizeIn)\n                    )\n                )\n            ),\n            c.setLocal(\"itIn2\",\n                c.i32_add(\n                    c.getLocal(\"pIn2\"),\n                    c.i32_mul(\n                        c.i32_sub(\n                            c.getLocal(\"n\"),\n                            c.i32_const(1)\n                        ),\n                        c.i32_const(sizeIn)\n                    )\n                )\n            ),\n            c.setLocal(\"itOut\",\n                c.i32_add(\n                    c.getLocal(\"pOut\"),\n                    c.i32_mul(\n                        c.i32_sub(\n                            c.getLocal(\"n\"),\n                            c.i32_const(1)\n                        ),\n                        c.i32_const(sizeOut)\n                    )\n                )\n            ),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n                c.call(internalFnName, c.getLocal(\"itIn1\"), c.getLocal(\"itIn2\"), c.getLocal(\"itOut\")),\n\n                c.setLocal(\"itIn1\", c.i32_sub(c.getLocal(\"itIn1\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itIn2\", c.i32_sub(c.getLocal(\"itIn2\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itOut\", c.i32_sub(c.getLocal(\"itOut\"), c.i32_const(sizeOut))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n        );\n    } else {\n        f.addCode(\n            c.setLocal(\"itIn1\", c.getLocal(\"pIn1\")),\n            c.setLocal(\"itIn2\", c.getLocal(\"pIn2\")),\n            c.setLocal(\"itOut\", c.getLocal(\"pOut\")),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n                c.call(internalFnName, c.getLocal(\"itIn1\"), c.getLocal(\"itIn2\"), c.getLocal(\"itOut\")),\n\n                c.setLocal(\"itIn1\", c.i32_add(c.getLocal(\"itIn1\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itIn2\", c.i32_add(c.getLocal(\"itIn2\"), c.i32_const(sizeIn))),\n                c.setLocal(\"itOut\", c.i32_add(c.getLocal(\"itOut\"), c.i32_const(sizeOut))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n        );\n    }\n}\n", "// Many of these utilities are from the `big-integer` library,\n// but adjusted to only work with native BigInt type\n// Ref https://github.com/peterolson/BigInteger.js/blob/e5d2154d3c417069c51e7116bafc3b91d0b9fe41/BigInteger.js\n// Originally licensed The Unlicense\n\nfunction compare(a, b) {\n    return a === b ? 0 : a > b ? 1 : -1;\n}\n\nfunction square(n) {\n    return n * n;\n}\n\nfunction isOdd(n) {\n    return n % 2n !== 0n;\n}\n\nfunction isEven(n) {\n    return n % 2n === 0n;\n}\n\nfunction isNegative(n) {\n    return n < 0n;\n}\n\nfunction isPositive(n) {\n    return n > 0n;\n}\n\nfunction bitLength(n) {\n    if (isNegative(n)) {\n        return n.toString(2).length - 1; // discard the - sign\n    } else {\n        return n.toString(2).length;\n    }\n}\n\nfunction abs(n) {\n    return n < 0n ? -n : n;\n}\n\nfunction isUnit(n) {\n    return abs(n) === 1n;\n}\n\nfunction modInv(a, n) {\n    var t = 0n, newT = 1n, r = n, newR = abs(a), q, lastT, lastR;\n    while (newR !== 0n) {\n        q = r / newR;\n        lastT = t;\n        lastR = r;\n        t = newT;\n        r = newR;\n        newT = lastT - (q * newT);\n        newR = lastR - (q * newR);\n    }\n    if (!isUnit(r)) throw new Error(a.toString() + \" and \" + n.toString() + \" are not co-prime\");\n    if (compare(t, 0n) === -1) {\n        t = t + n;\n    }\n    if (isNegative(a)) {\n        return -t;\n    }\n    return t;\n}\n\nfunction modPow(n, exp, mod) {\n    if (mod === 0n) throw new Error(\"Cannot take modPow with modulus 0\");\n    var r = 1n,\n        base = n % mod;\n    if (isNegative(exp)) {\n        exp = exp * -1n;\n        base = modInv(base, mod);\n    }\n    while (isPositive(exp)) {\n        if (base === 0n) return 0n;\n        if (isOdd(exp)) r = r * base % mod;\n        exp = exp / 2n;\n        base = square(base) % mod;\n    }\n    return r;\n}\n\nfunction compareAbs(a, b) {\n    a = a >= 0n ? a : -a;\n    b = b >= 0n ? b : -b;\n    return a === b ? 0 : a > b ? 1 : -1;\n}\n\nfunction isDivisibleBy(a, n) {\n    if (n === 0n) return false;\n    if (isUnit(n)) return true;\n    if (compareAbs(n, 2n) === 0) return isEven(a);\n    return a % n === 0n;\n}\n\nfunction isBasicPrime(v) {\n    var n = abs(v);\n    if (isUnit(n)) return false;\n    if (n === 2n || n === 3n || n === 5n) return true;\n    if (isEven(n) || isDivisibleBy(n, 3n) || isDivisibleBy(n, 5n)) return false;\n    if (n < 49n) return true;\n    // we don't know if it's prime: let the other functions figure it out\n}\n\nfunction prev(n) {\n    return n - 1n;\n}\n\nfunction millerRabinTest(n, a) {\n    var nPrev = prev(n),\n        b = nPrev,\n        r = 0,\n        d, i, x;\n    while (isEven(b)) b = b / 2n, r++;\n    next: for (i = 0; i < a.length; i++) {\n        if (n < a[i]) continue;\n        x = modPow(BigInt(a[i]), b, n);\n        if (isUnit(x) || x === nPrev) continue;\n        for (d = r - 1; d != 0; d--) {\n            x = square(x) % n;\n            if (isUnit(x)) return false;\n            if (x === nPrev) continue next;\n        }\n        return false;\n    }\n    return true;\n}\n\nfunction isPrime(p) {\n    var isPrime = isBasicPrime(p);\n    if (isPrime !== undefined) return isPrime;\n    var n = abs(p);\n    var bits = bitLength(n);\n    if (bits <= 64)\n        return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\n    var logN = Math.log(2) * Number(bits);\n    var t = Math.ceil(logN);\n    for (var a = [], i = 0; i < t; i++) {\n        a.push(BigInt(i + 2));\n    }\n    return millerRabinTest(n, a);\n}\n\nmodule.exports.bitLength = bitLength;\nmodule.exports.isOdd = isOdd;\nmodule.exports.isNegative = isNegative;\nmodule.exports.abs = abs;\nmodule.exports.isUnit = isUnit;\nmodule.exports.compare = compare;\nmodule.exports.modInv = modInv;\nmodule.exports.modPow = modPow;\nmodule.exports.isPrime = isPrime;\nmodule.exports.square = square;\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nconst buildInt = require(\"./build_int.js\");\nconst utils = require(\"./utils.js\");\nconst buildExp = require(\"./build_timesscalar\");\nconst buildBatchInverse = require(\"./build_batchinverse\");\nconst buildBatchConvertion = require(\"./build_batchconvertion\");\nconst buildBatchOp = require(\"./build_batchop\");\nconst { bitLength, modInv, modPow, isPrime, isOdd, square } = require(\"./bigint.js\");\n\nmodule.exports = function buildF1m(module, _q, _prefix, _intPrefix) {\n    const q = BigInt(_q);\n    const n64 = Math.floor((bitLength(q - 1n) - 1)/64) +1;\n    const n32 = n64*2;\n    const n8 = n64*8;\n\n    const prefix = _prefix || \"f1m\";\n    if (module.modules[prefix]) return prefix;  // already builded\n\n    const intPrefix = buildInt(module, n64, _intPrefix);\n    const pq = module.alloc(n8, utils.bigInt2BytesLE(q, n8));\n\n    const pR2 = module.alloc(utils.bigInt2BytesLE(square(1n << BigInt(n64*64)) % q, n8));\n    const pOne = module.alloc(utils.bigInt2BytesLE((1n << BigInt(n64*64)) % q, n8));\n    const pZero = module.alloc(utils.bigInt2BytesLE(0n, n8));\n    const _minusOne = q - 1n;\n    const _e = _minusOne >> 1n; // e = (p-1)/2\n    const pe = module.alloc(n8, utils.bigInt2BytesLE(_e, n8));\n\n    const _ePlusOne = _e + 1n; // e = (p-1)/2\n    const pePlusOne = module.alloc(n8, utils.bigInt2BytesLE(_ePlusOne, n8));\n\n    module.modules[prefix] = {\n        pq: pq,\n        pR2: pR2,\n        n64: n64,\n        q: q,\n        pOne: pOne,\n        pZero: pZero,\n        pePlusOne: pePlusOne\n    };\n\n    function buildOne() {\n        const f = module.addFunction(prefix+\"_one\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(intPrefix + \"_copy\", c.i32_const(pOne), c.getLocal(\"pr\")));\n    }\n\n    function buildAdd() {\n        const f = module.addFunction(prefix+\"_add\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.if(\n                c.call(intPrefix+\"_add\", c.getLocal(\"x\"),  c.getLocal(\"y\"), c.getLocal(\"r\")),\n                c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                c.if(\n                    c.call(intPrefix+\"_gte\", c.getLocal(\"r\"), c.i32_const(pq)  ),\n                    c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                )\n            )\n        );\n    }\n\n    function buildSub() {\n        const f = module.addFunction(prefix+\"_sub\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.if(\n                c.call(intPrefix+\"_sub\", c.getLocal(\"x\"),  c.getLocal(\"y\"), c.getLocal(\"r\")),\n                c.drop(c.call(intPrefix+\"_add\", c.getLocal(\"r\"),  c.i32_const(pq), c.getLocal(\"r\")))\n            )\n        );\n    }\n\n    function buildNeg() {\n        const f = module.addFunction(prefix+\"_neg\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(prefix + \"_sub\", c.i32_const(pZero), c.getLocal(\"x\"), c.getLocal(\"r\"))\n        );\n    }\n\n\n    function buildIsNegative() {\n        const f = module.addFunction(prefix+\"_isNegative\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.call(prefix + \"_fromMontgomery\", c.getLocal(\"x\"), AUX),\n            c.call(intPrefix + \"_gte\", AUX, c.i32_const(pePlusOne) )\n        );\n    }\n\n    function buildSign() {\n        const f = module.addFunction(prefix+\"_sign\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if (\n                c.call(intPrefix + \"_isZero\", c.getLocal(\"x\")),\n                c.ret(c.i32_const(0))\n            ),\n            c.call(prefix + \"_fromMontgomery\", c.getLocal(\"x\"), AUX),\n            c.if(\n                c.call(intPrefix + \"_gte\", AUX, c.i32_const(pePlusOne)),\n                c.ret(c.i32_const(-1))\n            ),\n            c.ret(c.i32_const(1))\n        );\n    }\n\n\n    function buildMReduct() {\n        const carries = module.alloc(n32*n32*8);\n\n        const f = module.addFunction(prefix+\"_mReduct\");\n        f.addParam(\"t\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"np32\", \"i64\");\n        f.addLocal(\"c\", \"i64\");\n        f.addLocal(\"m\", \"i64\");\n\n        const c = f.getCodeBuilder();\n\n        const np32 = Number(0x100000000n - modInv(q, 0x100000000n));\n\n        f.addCode(c.setLocal(\"np32\", c.i64_const(np32)));\n\n        for (let i=0; i<n32; i++) {\n            f.addCode(c.setLocal(\"c\", c.i64_const(0)));\n\n            f.addCode(\n                c.setLocal(\n                    \"m\",\n                    c.i64_and(\n                        c.i64_mul(\n                            c.i64_load32_u(c.getLocal(\"t\"), i*4),\n                            c.getLocal(\"np32\")\n                        ),\n                        c.i64_const(\"0xFFFFFFFF\")\n                    )\n                )\n            );\n\n            for (let j=0; j<n32; j++) {\n\n                f.addCode(\n                    c.setLocal(\"c\",\n                        c.i64_add(\n                            c.i64_add(\n                                c.i64_load32_u(c.getLocal(\"t\"), (i+j)*4),\n                                c.i64_shr_u(c.getLocal(\"c\"), c.i64_const(32))\n                            ),\n                            c.i64_mul(\n                                c.i64_load32_u(c.i32_const(pq), j*4),\n                                c.getLocal(\"m\")\n                            )\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.i64_store32(\n                        c.getLocal(\"t\"),\n                        (i+j)*4,\n                        c.getLocal(\"c\")\n                    )\n                );\n            }\n\n            f.addCode(\n                c.i64_store32(\n                    c.i32_const(carries),\n                    i*4,\n                    c.i64_shr_u(c.getLocal(\"c\"), c.i64_const(32))\n                )\n            );\n        }\n\n        f.addCode(\n            c.call(\n                prefix+\"_add\",\n                c.i32_const(carries),\n                c.i32_add(\n                    c.getLocal(\"t\"),\n                    c.i32_const(n32*4)\n                ),\n                c.getLocal(\"r\")\n            )\n        );\n    }\n\n\n\n    function buildMul() {\n\n        const f = module.addFunction(prefix+\"_mul\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"c0\", \"i64\");\n        f.addLocal(\"c1\", \"i64\");\n        f.addLocal(\"np32\", \"i64\");\n\n\n        for (let i=0;i<n32; i++) {\n            f.addLocal(\"x\"+i, \"i64\");\n            f.addLocal(\"y\"+i, \"i64\");\n            f.addLocal(\"m\"+i, \"i64\");\n            f.addLocal(\"q\"+i, \"i64\");\n        }\n\n        const c = f.getCodeBuilder();\n\n        const np32 = Number(0x100000000n - modInv(q, 0x100000000n));\n\n        f.addCode(c.setLocal(\"np32\", c.i64_const(np32)));\n\n\n        const loadX = [];\n        const loadY = [];\n        const loadQ = [];\n        function mulij(i, j) {\n            let X,Y;\n            if (!loadX[i]) {\n                X = c.teeLocal(\"x\"+i, c.i64_load32_u( c.getLocal(\"x\"), i*4));\n                loadX[i] = true;\n            } else {\n                X = c.getLocal(\"x\"+i);\n            }\n            if (!loadY[j]) {\n                Y = c.teeLocal(\"y\"+j, c.i64_load32_u( c.getLocal(\"y\"), j*4));\n                loadY[j] = true;\n            } else {\n                Y = c.getLocal(\"y\"+j);\n            }\n\n            return c.i64_mul( X, Y );\n        }\n\n        function mulqm(i, j) {\n            let Q,M;\n            if (!loadQ[i]) {\n                Q = c.teeLocal(\"q\"+i, c.i64_load32_u(c.i32_const(0), pq+i*4 ));\n                loadQ[i] = true;\n            } else {\n                Q = c.getLocal(\"q\"+i);\n            }\n            M = c.getLocal(\"m\"+j);\n\n            return c.i64_mul( Q, M );\n        }\n\n\n        let c0 = \"c0\";\n        let c1 = \"c1\";\n\n        for (let k=0; k<n32*2-1; k++) {\n            for (let i=Math.max(0, k-n32+1); (i<=k)&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n\n            for (let i=Math.max(1, k-n32+1); (i<=k)&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulqm(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n            if (k<n32) {\n                f.addCode(\n                    c.setLocal(\n                        \"m\"+k,\n                        c.i64_and(\n                            c.i64_mul(\n                                c.i64_and(\n                                    c.getLocal(c0),\n                                    c.i64_const(0xFFFFFFFF)\n                                ),\n                                c.getLocal(\"np32\")\n                            ),\n                            c.i64_const(\"0xFFFFFFFF\")\n                        )\n                    )\n                );\n\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulqm(0,k)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n\n            if (k>=n32) {\n                f.addCode(\n                    c.i64_store32(\n                        c.getLocal(\"r\"),\n                        (k-n32)*4,\n                        c.getLocal(c0)\n                    )\n                );\n            }\n            [c0, c1] = [c1, c0];\n            f.addCode(\n                c.setLocal(c1,\n                    c.i64_shr_u(\n                        c.getLocal(c0),\n                        c.i64_const(32)\n                    )\n                )\n            );\n        }\n        f.addCode(\n            c.i64_store32(\n                c.getLocal(\"r\"),\n                n32*4-4,\n                c.getLocal(c0)\n            )\n        );\n\n        f.addCode(\n            c.if(\n                c.i32_wrap_i64(c.getLocal(c1)),\n                c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                c.if(\n                    c.call(intPrefix+\"_gte\", c.getLocal(\"r\"), c.i32_const(pq)  ),\n                    c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                )\n            )\n        );\n    }\n\n\n    function buildSquare() {\n\n        const f = module.addFunction(prefix+\"_square\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"c0\", \"i64\");\n        f.addLocal(\"c1\", \"i64\");\n        f.addLocal(\"c0_old\", \"i64\");\n        f.addLocal(\"c1_old\", \"i64\");\n        f.addLocal(\"np32\", \"i64\");\n\n\n        for (let i=0;i<n32; i++) {\n            f.addLocal(\"x\"+i, \"i64\");\n            f.addLocal(\"m\"+i, \"i64\");\n            f.addLocal(\"q\"+i, \"i64\");\n        }\n\n        const c = f.getCodeBuilder();\n\n        const np32 = Number(0x100000000n - modInv(q, 0x100000000n));\n\n        f.addCode(c.setLocal(\"np32\", c.i64_const(np32)));\n\n\n        const loadX = [];\n        const loadQ = [];\n        function mulij(i, j) {\n            let X,Y;\n            if (!loadX[i]) {\n                X = c.teeLocal(\"x\"+i, c.i64_load32_u( c.getLocal(\"x\"), i*4));\n                loadX[i] = true;\n            } else {\n                X = c.getLocal(\"x\"+i);\n            }\n            if (!loadX[j]) {\n                Y = c.teeLocal(\"x\"+j, c.i64_load32_u( c.getLocal(\"x\"), j*4));\n                loadX[j] = true;\n            } else {\n                Y = c.getLocal(\"x\"+j);\n            }\n\n            return c.i64_mul( X, Y );\n        }\n\n        function mulqm(i, j) {\n            let Q,M;\n            if (!loadQ[i]) {\n                Q = c.teeLocal(\"q\"+i, c.i64_load32_u(c.i32_const(0), pq+i*4 ));\n                loadQ[i] = true;\n            } else {\n                Q = c.getLocal(\"q\"+i);\n            }\n            M = c.getLocal(\"m\"+j);\n\n            return c.i64_mul( Q, M );\n        }\n\n\n        let c0 = \"c0\";\n        let c1 = \"c1\";\n        let c0_old = \"c0_old\";\n        let c1_old = \"c1_old\";\n\n        for (let k=0; k<n32*2-1; k++) {\n            f.addCode(\n                c.setLocal(c0, c.i64_const(0)),\n                c.setLocal(c1, c.i64_const(0)),\n            );\n            for (let i=Math.max(0, k-n32+1); (i<((k+1)>>1) )&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n            // Multiply by 2\n            f.addCode(\n                c.setLocal(c0,\n                    c.i64_shl(\n                        c.i64_and(\n                            c.getLocal(c0),\n                            c.i64_const(0xFFFFFFFF)\n                        ),\n                        c.i64_const(1)\n                    )\n                )\n            );\n\n            f.addCode(\n                c.setLocal(c1,\n                    c.i64_add(\n                        c.i64_shl(\n                            c.getLocal(c1),\n                            c.i64_const(1)\n                        ),\n                        c.i64_shr_u(\n                            c.getLocal(c0),\n                            c.i64_const(32)\n                        )\n                    )\n                )\n            );\n\n            if (k%2 == 0) {\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulij(k>>1, k>>1)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n            // Add the old carry\n\n            if (k>0) {\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            c.i64_and(\n                                c.getLocal(c0_old),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.i64_add(\n                                c.getLocal(c1),\n                                c.i64_shr_u(\n                                    c.getLocal(c0),\n                                    c.i64_const(32)\n                                )\n                            ),\n                            c.getLocal(c1_old)\n                        )\n                    )\n                );\n            }\n\n\n            for (let i=Math.max(1, k-n32+1); (i<=k)&&(i<n32); i++) {\n                const j= k-i;\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulqm(i,j)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n            if (k<n32) {\n                f.addCode(\n                    c.setLocal(\n                        \"m\"+k,\n                        c.i64_and(\n                            c.i64_mul(\n                                c.i64_and(\n                                    c.getLocal(c0),\n                                    c.i64_const(0xFFFFFFFF)\n                                ),\n                                c.getLocal(\"np32\")\n                            ),\n                            c.i64_const(\"0xFFFFFFFF\")\n                        )\n                    )\n                );\n\n\n                f.addCode(\n                    c.setLocal(c0,\n                        c.i64_add(\n                            c.i64_and(\n                                c.getLocal(c0),\n                                c.i64_const(0xFFFFFFFF)\n                            ),\n                            mulqm(0,k)\n                        )\n                    )\n                );\n\n                f.addCode(\n                    c.setLocal(c1,\n                        c.i64_add(\n                            c.getLocal(c1),\n                            c.i64_shr_u(\n                                c.getLocal(c0),\n                                c.i64_const(32)\n                            )\n                        )\n                    )\n                );\n            }\n\n            if (k>=n32) {\n                f.addCode(\n                    c.i64_store32(\n                        c.getLocal(\"r\"),\n                        (k-n32)*4,\n                        c.getLocal(c0)\n                    )\n                );\n            }\n            f.addCode(\n                c.setLocal(\n                    c0_old,\n                    c.getLocal(c1)\n                ),\n                c.setLocal(\n                    c1_old,\n                    c.i64_shr_u(\n                        c.getLocal(c0_old),\n                        c.i64_const(32)\n                    )\n                )\n            );\n        }\n        f.addCode(\n            c.i64_store32(\n                c.getLocal(\"r\"),\n                n32*4-4,\n                c.getLocal(c0_old)\n            )\n        );\n\n        f.addCode(\n            c.if(\n                c.i32_wrap_i64(c.getLocal(c1_old)),\n                c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                c.if(\n                    c.call(intPrefix+\"_gte\", c.getLocal(\"r\"), c.i32_const(pq)  ),\n                    c.drop(c.call(intPrefix+\"_sub\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\"))),\n                )\n            )\n        );\n    }\n\n\n    function buildSquareOld() {\n        const f = module.addFunction(prefix+\"_squareOld\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(prefix + \"_mul\", c.getLocal(\"x\"), c.getLocal(\"x\"), c.getLocal(\"r\")));\n    }\n\n    function buildToMontgomery() {\n        const f = module.addFunction(prefix+\"_toMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(prefix+\"_mul\", c.getLocal(\"x\"), c.i32_const(pR2), c.getLocal(\"r\")));\n    }\n\n    function buildFromMontgomery() {\n\n        const pAux2 = module.alloc(n8*2);\n\n        const f = module.addFunction(prefix+\"_fromMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(intPrefix + \"_copy\", c.getLocal(\"x\"), c.i32_const(pAux2) ));\n        f.addCode(c.call(intPrefix + \"_zero\", c.i32_const(pAux2 + n8) ));\n        f.addCode(c.call(prefix+\"_mReduct\", c.i32_const(pAux2), c.getLocal(\"r\")));\n    }\n\n    function buildInverse() {\n\n        const f = module.addFunction(prefix+ \"_inverse\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(prefix + \"_fromMontgomery\", c.getLocal(\"x\"), c.getLocal(\"r\")));\n        f.addCode(c.call(intPrefix + \"_inverseMod\", c.getLocal(\"r\"), c.i32_const(pq), c.getLocal(\"r\")));\n        f.addCode(c.call(prefix + \"_toMontgomery\", c.getLocal(\"r\"), c.getLocal(\"r\")));\n    }\n\n    // Calculate various valuse needed for sqrt\n\n\n    let _nqr = 2n;\n    if (isPrime(q)) {\n        while (modPow(_nqr, _e, q) !== _minusOne) _nqr = _nqr + 1n;\n    }\n\n    let s2 = 0;\n    let _t = _minusOne;\n\n    while ((!isOdd(_t))&&(_t !== 0n)) {\n        s2++;\n        _t = _t >> 1n;\n    }\n    const pt = module.alloc(n8, utils.bigInt2BytesLE(_t, n8));\n\n    const _nqrToT = modPow(_nqr, _t, q);\n    const pNqrToT = module.alloc(utils.bigInt2BytesLE((_nqrToT << BigInt(n64*64)) % q, n8));\n\n    const _tPlusOneOver2 = (_t + 1n) >> 1n;\n    const ptPlusOneOver2 = module.alloc(n8, utils.bigInt2BytesLE(_tPlusOneOver2, n8));\n\n    function buildSqrt() {\n\n        const f = module.addFunction(prefix+ \"_sqrt\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"m\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const ONE = c.i32_const(pOne);\n        const C = c.i32_const(module.alloc(n8));\n        const T = c.i32_const(module.alloc(n8));\n        const R = c.i32_const(module.alloc(n8));\n        const SQ = c.i32_const(module.alloc(n8));\n        const B = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n\n            // If (n==0) return 0\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"n\")),\n                c.ret(\n                    c.call(prefix + \"_zero\", c.getLocal(\"r\"))\n                )\n            ),\n\n            c.setLocal(\"m\", c.i32_const(s2)),\n            c.call(prefix + \"_copy\", c.i32_const(pNqrToT), C),\n            c.call(prefix + \"_exp\", c.getLocal(\"n\"), c.i32_const(pt), c.i32_const(n8), T),\n            c.call(prefix + \"_exp\", c.getLocal(\"n\"), c.i32_const(ptPlusOneOver2), c.i32_const(n8), R),\n\n            c.block(c.loop(\n                c.br_if(1, c.call(prefix + \"_eq\", T, ONE)),\n\n                c.call(prefix + \"_square\", T, SQ),\n                c.setLocal(\"i\", c.i32_const(1)),\n                c.block(c.loop(\n                    c.br_if(1, c.call(prefix + \"_eq\", SQ, ONE)),\n                    c.call(prefix + \"_square\", SQ, SQ),\n                    c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                    c.br(0)\n                )),\n\n                c.call(prefix + \"_copy\", C, B),\n                c.setLocal(\"j\", c.i32_sub(c.i32_sub( c.getLocal(\"m\"), c.getLocal(\"i\")), c.i32_const(1)) ),\n                c.block(c.loop(\n                    c.br_if(1, c.i32_eqz(c.getLocal(\"j\"))),\n                    c.call(prefix + \"_square\", B, B),\n                    c.setLocal(\"j\", c.i32_sub(c.getLocal(\"j\"), c.i32_const(1))),\n                    c.br(0)\n                )),\n\n                c.setLocal(\"m\", c.getLocal(\"i\")),\n                c.call(prefix + \"_square\", B, C),\n                c.call(prefix + \"_mul\", T, C, T),\n                c.call(prefix + \"_mul\", R, B, R),\n\n                c.br(0)\n            )),\n\n            c.if(\n                c.call(prefix + \"_isNegative\", R),\n                c.call(prefix + \"_neg\", R, c.getLocal(\"r\")),\n                c.call(prefix + \"_copy\", R, c.getLocal(\"r\")),\n            )\n        );\n    }\n\n    function buildIsSquare() {\n        const f = module.addFunction(prefix+\"_isSquare\");\n        f.addParam(\"n\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const ONE = c.i32_const(pOne);\n        const AUX = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"n\")),\n                c.ret(c.i32_const(1))\n            ),\n            c.call(prefix + \"_exp\", c.getLocal(\"n\"), c.i32_const(pe), c.i32_const(n8), AUX),\n            c.call(prefix + \"_eq\", AUX, ONE)\n        );\n    }\n\n\n    function buildLoad() {\n        const f = module.addFunction(prefix+\"_load\");\n        f.addParam(\"scalar\", \"i32\");\n        f.addParam(\"scalarLen\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"p\", \"i32\");\n        f.addLocal(\"l\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        const c = f.getCodeBuilder();\n\n        const R = c.i32_const(module.alloc(n8));\n        const pAux = module.alloc(n8);\n        const AUX = c.i32_const(pAux);\n\n        f.addCode(\n            c.call(intPrefix + \"_zero\", c.getLocal(\"r\")),\n            c.setLocal(\"i\", c.i32_const(n8)),\n            c.setLocal(\"p\", c.getLocal(\"scalar\")),\n            c.block(c.loop(\n                c.br_if(1, c.i32_gt_u(c.getLocal(\"i\"), c.getLocal(\"scalarLen\"))),\n\n                c.if(\n                    c.i32_eq(c.getLocal(\"i\"), c.i32_const(n8)),\n                    c.call(prefix + \"_one\", R),\n                    c.call(prefix + \"_mul\", R, c.i32_const(pR2), R)\n                ),\n                c.call(prefix + \"_mul\", c.getLocal(\"p\"), R, AUX),\n                c.call(prefix + \"_add\", c.getLocal(\"r\"), AUX, c.getLocal(\"r\")),\n\n                c.setLocal(\"p\", c.i32_add(c.getLocal(\"p\"), c.i32_const(n8))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(n8))),\n                c.br(0)\n            )),\n\n            c.setLocal(\"l\", c.i32_rem_u( c.getLocal(\"scalarLen\"), c.i32_const(n8))),\n            c.if(c.i32_eqz(c.getLocal(\"l\")), c.ret([])),\n            c.call(intPrefix + \"_zero\", AUX),\n            c.setLocal(\"j\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq(c.getLocal(\"j\"), c.getLocal(\"l\"))),\n\n                c.i32_store8(\n                    c.getLocal(\"j\"),\n                    pAux,\n                    c.i32_load8_u(c.getLocal(\"p\")),\n                ),\n                c.setLocal(\"p\", c.i32_add(c.getLocal(\"p\"), c.i32_const(1))),\n                c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                c.br(0)\n            )),\n\n            c.if(\n                c.i32_eq(c.getLocal(\"i\"), c.i32_const(n8)),\n                c.call(prefix + \"_one\", R),\n                c.call(prefix + \"_mul\", R, c.i32_const(pR2), R)\n            ),\n            c.call(prefix + \"_mul\", AUX, R, AUX),\n            c.call(prefix + \"_add\", c.getLocal(\"r\"), AUX, c.getLocal(\"r\")),\n        );\n    }\n\n    function buildTimesScalar() {\n        const f = module.addFunction(prefix+\"_timesScalar\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"scalar\", \"i32\");\n        f.addParam(\"scalarLen\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.call(prefix + \"_load\", c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), AUX),\n            c.call(prefix + \"_toMontgomery\", AUX, AUX),\n            c.call(prefix + \"_mul\", c.getLocal(\"x\"), AUX, c.getLocal(\"r\")),\n        );\n    }\n\n    function buildIsOne() {\n        const f = module.addFunction(prefix+\"_isOne\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(\n            c.ret(c.call(intPrefix + \"_eq\", c.getLocal(\"x\"), c.i32_const(pOne)))\n        );\n    }\n\n\n    module.exportFunction(intPrefix + \"_copy\", prefix+\"_copy\");\n    module.exportFunction(intPrefix + \"_zero\", prefix+\"_zero\");\n    module.exportFunction(intPrefix + \"_isZero\", prefix+\"_isZero\");\n    module.exportFunction(intPrefix + \"_eq\", prefix+\"_eq\");\n\n    buildIsOne();\n    buildAdd();\n    buildSub();\n    buildNeg();\n    buildMReduct();\n    buildMul();\n    buildSquare();\n    buildSquareOld();\n    buildToMontgomery();\n    buildFromMontgomery();\n    buildIsNegative();\n    buildSign();\n    buildInverse();\n    buildOne();\n    buildLoad();\n    buildTimesScalar();\n    buildBatchInverse(module, prefix);\n    buildBatchConvertion(module, prefix + \"_batchToMontgomery\", prefix + \"_toMontgomery\", n8, n8);\n    buildBatchConvertion(module, prefix + \"_batchFromMontgomery\", prefix + \"_fromMontgomery\", n8, n8);\n    buildBatchConvertion(module, prefix + \"_batchNeg\", prefix + \"_neg\", n8, n8);\n    buildBatchOp(module, prefix + \"_batchAdd\", prefix + \"_add\", n8, n8);\n    buildBatchOp(module, prefix + \"_batchSub\", prefix + \"_sub\", n8, n8);\n    buildBatchOp(module, prefix + \"_batchMul\", prefix + \"_mul\", n8, n8);\n\n    module.exportFunction(prefix + \"_add\");\n    module.exportFunction(prefix + \"_sub\");\n    module.exportFunction(prefix + \"_neg\");\n    module.exportFunction(prefix + \"_isNegative\");\n    module.exportFunction(prefix + \"_isOne\");\n    module.exportFunction(prefix + \"_sign\");\n    module.exportFunction(prefix + \"_mReduct\");\n    module.exportFunction(prefix + \"_mul\");\n    module.exportFunction(prefix + \"_square\");\n    module.exportFunction(prefix + \"_squareOld\");\n    module.exportFunction(prefix + \"_fromMontgomery\");\n    module.exportFunction(prefix + \"_toMontgomery\");\n    module.exportFunction(prefix + \"_inverse\");\n    module.exportFunction(prefix + \"_one\");\n    module.exportFunction(prefix + \"_load\");\n    module.exportFunction(prefix + \"_timesScalar\");\n    buildExp(\n        module,\n        prefix + \"_exp\",\n        n8,\n        prefix + \"_mul\",\n        prefix + \"_square\",\n        intPrefix + \"_copy\",\n        prefix + \"_one\",\n    );\n    module.exportFunction(prefix + \"_exp\");\n    module.exportFunction(prefix + \"_batchInverse\");\n    if (isPrime(q)) {\n        buildSqrt();\n        buildIsSquare();\n        module.exportFunction(prefix + \"_sqrt\");\n        module.exportFunction(prefix + \"_isSquare\");\n    }\n    module.exportFunction(prefix + \"_batchToMontgomery\");\n    module.exportFunction(prefix + \"_batchFromMontgomery\");\n    // console.log(module.functionIdxByName);\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nconst buildF1m =require(\"./build_f1m.js\");\nconst { bitLength } = require(\"./bigint.js\");\n\nmodule.exports = function buildF1(module, _q, _prefix, _f1mPrefix, _intPrefix) {\n\n    const q = BigInt(_q);\n    const n64 = Math.floor((bitLength(q - 1n) - 1)/64) +1;\n    const n8 = n64*8;\n\n    const prefix = _prefix || \"f1\";\n    if (module.modules[prefix]) return prefix;  // already builded\n    module.modules[prefix] = {\n        n64: n64\n    };\n\n    const intPrefix = _intPrefix || \"int\";\n    const f1mPrefix = buildF1m(module, q, _f1mPrefix, intPrefix);\n\n\n    const pR2 =     module.modules[f1mPrefix].pR2;\n    const pq =     module.modules[f1mPrefix].pq;\n    const pePlusOne = module.modules[f1mPrefix].pePlusOne;\n\n    function buildMul() {\n        const pAux1 = module.alloc(n8);\n\n        const f = module.addFunction(prefix+ \"_mul\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(f1mPrefix + \"_mul\", c.getLocal(\"x\"), c.getLocal(\"y\"), c.i32_const(pAux1)));\n        f.addCode(c.call(f1mPrefix + \"_mul\", c.i32_const(pAux1), c.i32_const(pR2), c.getLocal(\"r\")));\n    }\n\n    function buildSquare() {\n        const f = module.addFunction(prefix+\"_square\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(prefix + \"_mul\", c.getLocal(\"x\"), c.getLocal(\"x\"), c.getLocal(\"r\")));\n    }\n\n\n    function buildInverse() {\n\n        const f = module.addFunction(prefix+ \"_inverse\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(intPrefix + \"_inverseMod\", c.getLocal(\"x\"), c.i32_const(pq), c.getLocal(\"r\")));\n    }\n\n    function buildIsNegative() {\n        const f = module.addFunction(prefix+\"_isNegative\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(intPrefix + \"_gte\", c.getLocal(\"x\"), c.i32_const(pePlusOne) )\n        );\n    }\n\n\n    buildMul();\n    buildSquare();\n    buildInverse();\n    buildIsNegative();\n    module.exportFunction(f1mPrefix + \"_add\", prefix + \"_add\");\n    module.exportFunction(f1mPrefix + \"_sub\", prefix + \"_sub\");\n    module.exportFunction(f1mPrefix + \"_neg\", prefix + \"_neg\");\n    module.exportFunction(prefix + \"_mul\");\n    module.exportFunction(prefix + \"_square\");\n    module.exportFunction(prefix + \"_inverse\");\n    module.exportFunction(prefix + \"_isNegative\");\n    module.exportFunction(f1mPrefix + \"_copy\", prefix+\"_copy\");\n    module.exportFunction(f1mPrefix + \"_zero\", prefix+\"_zero\");\n    module.exportFunction(f1mPrefix + \"_one\", prefix+\"_one\");\n    module.exportFunction(f1mPrefix + \"_isZero\", prefix+\"_isZero\");\n    module.exportFunction(f1mPrefix + \"_eq\", prefix+\"_eq\");\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\nconst buildExp = require(\"./build_timesscalar\");\nconst buildBatchInverse = require(\"./build_batchinverse\");\nconst utils = require(\"./utils.js\");\n\nmodule.exports = function buildF2m(module, mulNonResidueFn, prefix, f1mPrefix) {\n\n    if (module.modules[prefix]) return prefix;  // already builded\n\n    const f1n8 = module.modules[f1mPrefix].n64*8;\n    const q = module.modules[f1mPrefix].q;\n\n    module.modules[prefix] = {\n        n64: module.modules[f1mPrefix].n64*2\n    };\n\n    function buildAdd() {\n        const f = module.addFunction(prefix+\"_add\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_add\", x0, y0, r0),\n            c.call(f1mPrefix+\"_add\", x1, y1, r1),\n        );\n    }\n\n    function buildTimesScalar() {\n        const f = module.addFunction(prefix+\"_timesScalar\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"scalar\", \"i32\");\n        f.addParam(\"scalarLen\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_timesScalar\", x0, c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), r0),\n            c.call(f1mPrefix+\"_timesScalar\", x1, c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), r1),\n        );\n    }\n\n    function buildSub() {\n        const f = module.addFunction(prefix+\"_sub\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_sub\", x0, y0, r0),\n            c.call(f1mPrefix+\"_sub\", x1, y1, r1),\n        );\n    }\n\n    function buildNeg() {\n        const f = module.addFunction(prefix+\"_neg\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_neg\", x0, r0),\n            c.call(f1mPrefix+\"_neg\", x1, r1),\n        );\n    }\n\n    function buildConjugate() {\n        const f = module.addFunction(prefix+\"_conjugate\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_copy\", x0, r0),\n            c.call(f1mPrefix+\"_neg\", x1, r1),\n        );\n    }\n\n\n    function buildIsNegative() {\n        const f = module.addFunction(prefix+\"_isNegative\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.if(\n                c.call(f1mPrefix+\"_isZero\", x1),\n                c.ret(c.call(f1mPrefix+\"_isNegative\", x0))\n            ),\n            c.ret(c.call(f1mPrefix+\"_isNegative\", x1))\n        );\n    }\n\n    function buildMul() {\n        const f = module.addFunction(prefix+\"_mul\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        const A = c.i32_const(module.alloc(f1n8));\n        const B = c.i32_const(module.alloc(f1n8));\n        const C = c.i32_const(module.alloc(f1n8));\n        const D = c.i32_const(module.alloc(f1n8));\n\n\n        f.addCode(\n            c.call(f1mPrefix + \"_mul\", x0, y0, A),             // A = x0*y0\n            c.call(f1mPrefix + \"_mul\", x1, y1, B),             // B = x1*y1\n\n            c.call(f1mPrefix + \"_add\", x0, x1, C),             // C = x0 + x1\n            c.call(f1mPrefix + \"_add\", y0, y1, D),             // D = y0 + y1\n            c.call(f1mPrefix + \"_mul\", C, D, C),               // C = (x0 + x1)*(y0 + y1) = x0*y0+x0*y1+x1*y0+x1*y1\n\n            //  c.call(f1mPrefix + \"_mul\", B, c.i32_const(pNonResidue), r0),  // r0 = nr*(x1*y1)\n            c.call(mulNonResidueFn, B, r0),  // r0 = nr*(x1*y1)\n            c.call(f1mPrefix + \"_add\", A, r0, r0),             // r0 = x0*y0 + nr*(x1*y1)\n            c.call(f1mPrefix + \"_add\", A, B, r1),             // r1 = x0*y0+x1*y1\n            c.call(f1mPrefix + \"_sub\", C, r1, r1)              // r1 = x0*y0+x0*y1+x1*y0+x1*y1 - x0*y0+x1*y1 = x0*y1+x1*y0\n        );\n\n    }\n\n    function buildMul1() {\n        const f = module.addFunction(prefix+\"_mul1\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const y = c.getLocal(\"y\");\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n\n        f.addCode(\n            c.call(f1mPrefix + \"_mul\", x0, y, r0),             // A = x0*y\n            c.call(f1mPrefix + \"_mul\", x1, y, r1),             // B = x1*y\n        );\n    }\n\n    function buildSquare() {\n        const f = module.addFunction(prefix+\"_square\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        const AB = c.i32_const(module.alloc(f1n8));\n        const APB = c.i32_const(module.alloc(f1n8));\n        const APNB = c.i32_const(module.alloc(f1n8));\n        const ABPNAB = c.i32_const(module.alloc(f1n8));\n\n\n        f.addCode(\n            // AB = x0*y1\n            c.call(f1mPrefix + \"_mul\", x0, x1, AB),\n\n            // APB = x0+y1\n            c.call(f1mPrefix + \"_add\", x0, x1, APB),\n\n            // APBN0 = x0 + nr*x1\n            c.call(mulNonResidueFn, x1, APNB),\n            c.call(f1mPrefix + \"_add\", x0, APNB, APNB),\n\n            // ABPNAB = ab + nr*ab\n            c.call(mulNonResidueFn, AB, ABPNAB),\n            c.call(f1mPrefix + \"_add\", ABPNAB, AB, ABPNAB),\n\n            // r0 = APB * APNB - ABPNAB\n            c.call(f1mPrefix + \"_mul\", APB, APNB, r0),\n            c.call(f1mPrefix + \"_sub\", r0, ABPNAB, r0),\n\n            // r1 = AB + AB\n            c.call(f1mPrefix + \"_add\", AB, AB, r1),\n        );\n\n    }\n\n\n    function buildToMontgomery() {\n        const f = module.addFunction(prefix+\"_toMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_toMontgomery\", x0, r0),\n            c.call(f1mPrefix+\"_toMontgomery\", x1, r1)\n        );\n    }\n\n    function buildFromMontgomery() {\n        const f = module.addFunction(prefix+\"_fromMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_fromMontgomery\", x0, r0),\n            c.call(f1mPrefix+\"_fromMontgomery\", x1, r1)\n        );\n    }\n\n    function buildCopy() {\n        const f = module.addFunction(prefix+\"_copy\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_copy\", x0, r0),\n            c.call(f1mPrefix+\"_copy\", x1, r1)\n        );\n    }\n\n    function buildZero() {\n        const f = module.addFunction(prefix+\"_zero\");\n        f.addParam(\"x\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_zero\", x0),\n            c.call(f1mPrefix+\"_zero\", x1)\n        );\n    }\n\n    function buildOne() {\n        const f = module.addFunction(prefix+\"_one\");\n        f.addParam(\"x\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_one\", x0),\n            c.call(f1mPrefix+\"_zero\", x1)\n        );\n    }\n\n    function buildEq() {\n        const f = module.addFunction(prefix+\"_eq\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.i32_and(\n                c.call(f1mPrefix+\"_eq\", x0, y0),\n                c.call(f1mPrefix+\"_eq\", x1, y1)\n            )\n        );\n    }\n\n    function buildIsZero() {\n        const f = module.addFunction(prefix+\"_isZero\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.i32_and(\n                c.call(f1mPrefix+\"_isZero\", x0),\n                c.call(f1mPrefix+\"_isZero\", x1)\n            )\n        );\n    }\n\n    function buildInverse() {\n        const f = module.addFunction(prefix+\"_inverse\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n\n        const t0 = c.i32_const(module.alloc(f1n8));\n        const t1 = c.i32_const(module.alloc(f1n8));\n        const t2 = c.i32_const(module.alloc(f1n8));\n        const t3 = c.i32_const(module.alloc(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_square\", x0, t0),\n            c.call(f1mPrefix+\"_square\", x1, t1),\n            // c.call(f1mPrefix+\"_mul\", t1, c.i32_const(pNonResidue), t2),\n            c.call(mulNonResidueFn, t1, t2),\n\n            c.call(f1mPrefix+\"_sub\", t0, t2, t2),\n            c.call(f1mPrefix+\"_inverse\", t2, t3),\n\n            c.call(f1mPrefix+\"_mul\", x0, t3, r0),\n            c.call(f1mPrefix+\"_mul\", x1, t3, r1),\n            c.call(f1mPrefix+\"_neg\", r1, r1),\n        );\n    }\n\n\n    function buildSign() {\n        const f = module.addFunction(prefix+\"_sign\");\n        f.addParam(\"x\", \"i32\");\n        f.addLocal(\"s\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.setLocal(\"s\" , c.call( f1mPrefix + \"_sign\", x1)),\n            c.if(\n                c.getLocal(\"s\"),\n                c.ret(c.getLocal(\"s\"))\n            ),\n            c.ret(c.call( f1mPrefix + \"_sign\", x0))\n        );\n    }\n\n    function buildIsOne() {\n        const f = module.addFunction(prefix+\"_isOne\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n\n        f.addCode(\n            c.ret(c.i32_and(\n                c.call(f1mPrefix + \"_isOne\", x0),\n                c.call(f1mPrefix + \"_isZero\", x1),\n            ))\n        );\n    }\n\n\n    // Check here: https://eprint.iacr.org/2012/685.pdf\n    // Alg 9adj\n    function buildSqrt() {\n\n        const f = module.addFunction(prefix+\"_sqrt\");\n        f.addParam(\"a\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        // BigInt can't take `undefined` so we use `|| 0`\n        const e34 = c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q || 0) - 3n) / 4n, f1n8 )));\n        // BigInt can't take `undefined` so we use `|| 0`\n        const e12 = c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q || 0) - 1n) / 2n, f1n8 )));\n\n        const a = c.getLocal(\"a\");\n        const a1 = c.i32_const(module.alloc(f1n8*2));\n        const alpha = c.i32_const(module.alloc(f1n8*2));\n        const a0 = c.i32_const(module.alloc(f1n8*2));\n        const pn1 = module.alloc(f1n8*2);\n        const n1 = c.i32_const(pn1);\n        const n1a = c.i32_const(pn1);\n        const n1b = c.i32_const(pn1+f1n8);\n        const x0 = c.i32_const(module.alloc(f1n8*2));\n        const b = c.i32_const(module.alloc(f1n8*2));\n\n        f.addCode(\n\n            c.call(prefix + \"_one\", n1),\n            c.call(prefix + \"_neg\", n1, n1),\n\n            // const a1 = F.pow(a, F.sqrt_e34);\n            c.call(prefix + \"_exp\", a, e34, c.i32_const(f1n8), a1),\n\n            // const a1 = F.pow(a, F.sqrt_e34);\n            c.call(prefix + \"_square\", a1, alpha),\n            c.call(prefix + \"_mul\", a, alpha, alpha),\n\n            // const a0 = F.mul(F.frobenius(1, alfa), alfa);\n            c.call(prefix + \"_conjugate\", alpha, a0),\n            c.call(prefix + \"_mul\", a0, alpha, a0),\n\n            // if (F.eq(a0, F.negone)) return null;\n            c.if(c.call(prefix + \"_eq\",a0,n1), c.unreachable() ),\n\n            // const x0 = F.mul(a1, a);\n            c.call(prefix + \"_mul\", a1, a, x0),\n\n            // if (F.eq(alfa, F.negone)) {\n            c.if(\n                c.call(prefix + \"_eq\", alpha, n1),\n                [\n                    // x = F.mul(x0, [F.F.zero, F.F.one]);\n                    ...c.call(f1mPrefix + \"_zero\", n1a),\n                    ...c.call(f1mPrefix + \"_one\", n1b),\n                    ...c.call(prefix + \"_mul\", n1, x0, c.getLocal(\"pr\")),\n                ],\n                [\n                    // const b = F.pow(F.add(F.one, alfa), F.sqrt_e12);\n                    ...c.call(prefix + \"_one\", b),\n                    ...c.call(prefix + \"_add\", b, alpha, b),\n                    ...c.call(prefix + \"_exp\", b, e12, c.i32_const(f1n8), b),\n\n                    // x = F.mul(b, x0);\n                    ...c.call(prefix + \"_mul\", b, x0, c.getLocal(\"pr\")),\n                ]\n            )\n        );\n\n    }\n\n\n    function buildIsSquare() {\n\n        const f = module.addFunction(prefix+\"_isSquare\");\n        f.addParam(\"a\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        // BigInt can't take `undefined` so we use `|| 0`\n        const e34 = c.i32_const(module.alloc(utils.bigInt2BytesLE((BigInt(q || 0) - 3n) / 4n, f1n8 )));\n\n        const a = c.getLocal(\"a\");\n        const a1 = c.i32_const(module.alloc(f1n8*2));\n        const alpha = c.i32_const(module.alloc(f1n8*2));\n        const a0 = c.i32_const(module.alloc(f1n8*2));\n        const pn1 = module.alloc(f1n8*2);\n        const n1 = c.i32_const(pn1);\n\n        f.addCode(\n\n            c.call(prefix + \"_one\", n1),\n            c.call(prefix + \"_neg\", n1, n1),\n\n            // const a1 = F.pow(a, F.sqrt_e34);\n            c.call(prefix + \"_exp\", a, e34, c.i32_const(f1n8), a1),\n\n            // const a1 = F.pow(a, F.sqrt_e34);\n            c.call(prefix + \"_square\", a1, alpha),\n            c.call(prefix + \"_mul\", a, alpha, alpha),\n\n            // const a0 = F.mul(F.frobenius(1, alfa), alfa);\n            c.call(prefix + \"_conjugate\", alpha, a0),\n            c.call(prefix + \"_mul\", a0, alpha, a0),\n\n            // if (F.eq(a0, F.negone)) return null;\n            c.if(\n                c.call(\n                    prefix + \"_eq\",\n                    a0,\n                    n1\n                ),\n                c.ret(c.i32_const(0))\n            ),\n            c.ret(c.i32_const(1))\n        );\n\n    }\n\n\n    buildIsZero();\n    buildIsOne();\n    buildZero();\n    buildOne();\n    buildCopy();\n    buildMul();\n    buildMul1();\n    buildSquare();\n    buildAdd();\n    buildSub();\n    buildNeg();\n    buildConjugate();\n    buildToMontgomery();\n    buildFromMontgomery();\n    buildEq();\n    buildInverse();\n    buildTimesScalar();\n    buildSign();\n    buildIsNegative();\n\n    module.exportFunction(prefix + \"_isZero\");\n    module.exportFunction(prefix + \"_isOne\");\n    module.exportFunction(prefix + \"_zero\");\n    module.exportFunction(prefix + \"_one\");\n    module.exportFunction(prefix + \"_copy\");\n    module.exportFunction(prefix + \"_mul\");\n    module.exportFunction(prefix + \"_mul1\");\n    module.exportFunction(prefix + \"_square\");\n    module.exportFunction(prefix + \"_add\");\n    module.exportFunction(prefix + \"_sub\");\n    module.exportFunction(prefix + \"_neg\");\n    module.exportFunction(prefix + \"_sign\");\n    module.exportFunction(prefix + \"_conjugate\");\n    module.exportFunction(prefix + \"_fromMontgomery\");\n    module.exportFunction(prefix + \"_toMontgomery\");\n    module.exportFunction(prefix + \"_eq\");\n    module.exportFunction(prefix + \"_inverse\");\n    buildBatchInverse(module, prefix);\n    buildExp(\n        module,\n        prefix + \"_exp\",\n        f1n8*2,\n        prefix + \"_mul\",\n        prefix + \"_square\",\n        prefix + \"_copy\",\n        prefix + \"_one\",\n    );\n    buildSqrt();\n    buildIsSquare();\n\n    module.exportFunction(prefix + \"_exp\");\n    module.exportFunction(prefix + \"_timesScalar\");\n    module.exportFunction(prefix + \"_batchInverse\");\n    module.exportFunction(prefix + \"_sqrt\");\n    module.exportFunction(prefix + \"_isSquare\");\n    module.exportFunction(prefix + \"_isNegative\");\n\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\nconst buildExp = require(\"./build_timesscalar\");\nconst buildBatchInverse = require(\"./build_batchinverse\");\n\nmodule.exports = function buildF3m(module, mulNonResidueFn, prefix, f1mPrefix) {\n\n    if (module.modules[prefix]) return prefix;  // already builded\n\n    const f1n8 = module.modules[f1mPrefix].n64*8;\n    module.modules[prefix] = {\n        n64: module.modules[f1mPrefix].n64*3\n    };\n\n    function buildAdd() {\n        const f = module.addFunction(prefix+\"_add\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const y2 = c.i32_add(c.getLocal(\"y\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_add\", x0, y0, r0),\n            c.call(f1mPrefix+\"_add\", x1, y1, r1),\n            c.call(f1mPrefix+\"_add\", x2, y2, r2),\n        );\n    }\n\n    function buildTimesScalar() {\n        const f = module.addFunction(prefix+\"_timesScalar\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"scalar\", \"i32\");\n        f.addParam(\"scalarLen\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_timesScalar\", x0, c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), r0),\n            c.call(f1mPrefix+\"_timesScalar\", x1, c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), r1),\n            c.call(f1mPrefix+\"_timesScalar\", x2, c.getLocal(\"scalar\"), c.getLocal(\"scalarLen\"), r2),\n        );\n    }\n\n\n    function buildSub() {\n        const f = module.addFunction(prefix+\"_sub\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const y2 = c.i32_add(c.getLocal(\"y\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_sub\", x0, y0, r0),\n            c.call(f1mPrefix+\"_sub\", x1, y1, r1),\n            c.call(f1mPrefix+\"_sub\", x2, y2, r2),\n        );\n    }\n\n    function buildNeg() {\n        const f = module.addFunction(prefix+\"_neg\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_neg\", x0, r0),\n            c.call(f1mPrefix+\"_neg\", x1, r1),\n            c.call(f1mPrefix+\"_neg\", x2, r2),\n        );\n    }\n\n    function buildIsNegative() {\n        const f = module.addFunction(prefix+\"_isNegative\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.if(\n                c.call(f1mPrefix+\"_isZero\", x2),\n                c.if(\n                    c.call(f1mPrefix+\"_isZero\", x1),\n                    c.ret(c.call(f1mPrefix+\"_isNegative\", x0)),\n                    c.ret(c.call(f1mPrefix+\"_isNegative\", x1))\n                )\n            ),\n            c.ret(c.call(f1mPrefix+\"_isNegative\", x2))\n        );\n    }\n\n\n    function buildMul() {\n        const f = module.addFunction(prefix+\"_mul\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const cd = f.getCodeBuilder();\n\n        const a = cd.getLocal(\"x\");\n        const b = cd.i32_add(cd.getLocal(\"x\"), cd.i32_const(f1n8));\n        const c = cd.i32_add(cd.getLocal(\"x\"), cd.i32_const(2*f1n8));\n        const A = cd.getLocal(\"y\");\n        const B = cd.i32_add(cd.getLocal(\"y\"), cd.i32_const(f1n8));\n        const C = cd.i32_add(cd.getLocal(\"y\"), cd.i32_const(2*f1n8));\n        const r0 = cd.getLocal(\"r\");\n        const r1 = cd.i32_add(cd.getLocal(\"r\"), cd.i32_const(f1n8));\n        const r2 = cd.i32_add(cd.getLocal(\"r\"), cd.i32_const(2*f1n8));\n\n        const aA = cd.i32_const(module.alloc(f1n8));\n        const bB = cd.i32_const(module.alloc(f1n8));\n        const cC = cd.i32_const(module.alloc(f1n8));\n        const a_b = cd.i32_const(module.alloc(f1n8));\n        const A_B = cd.i32_const(module.alloc(f1n8));\n        const a_c = cd.i32_const(module.alloc(f1n8));\n        const A_C = cd.i32_const(module.alloc(f1n8));\n        const b_c = cd.i32_const(module.alloc(f1n8));\n        const B_C = cd.i32_const(module.alloc(f1n8));\n        const aA_bB = cd.i32_const(module.alloc(f1n8));\n        const aA_cC = cd.i32_const(module.alloc(f1n8));\n        const bB_cC = cd.i32_const(module.alloc(f1n8));\n        const AUX = cd.i32_const(module.alloc(f1n8));\n\n\n        f.addCode(\n            cd.call(f1mPrefix + \"_mul\", a, A, aA),\n            cd.call(f1mPrefix + \"_mul\", b, B, bB),\n            cd.call(f1mPrefix + \"_mul\", c, C, cC),\n\n            cd.call(f1mPrefix + \"_add\", a, b, a_b),\n            cd.call(f1mPrefix + \"_add\", A, B, A_B),\n            cd.call(f1mPrefix + \"_add\", a, c, a_c),\n            cd.call(f1mPrefix + \"_add\", A, C, A_C),\n            cd.call(f1mPrefix + \"_add\", b, c, b_c),\n            cd.call(f1mPrefix + \"_add\", B, C, B_C),\n\n            cd.call(f1mPrefix + \"_add\", aA, bB, aA_bB),\n            cd.call(f1mPrefix + \"_add\", aA, cC, aA_cC),\n            cd.call(f1mPrefix + \"_add\", bB, cC, bB_cC),\n\n            cd.call(f1mPrefix + \"_mul\", b_c, B_C, r0),\n            cd.call(f1mPrefix + \"_sub\", r0, bB_cC, r0),\n            cd.call(mulNonResidueFn, r0, r0),\n            cd.call(f1mPrefix + \"_add\", aA, r0, r0),\n\n            cd.call(f1mPrefix + \"_mul\", a_b, A_B, r1),\n            cd.call(f1mPrefix + \"_sub\", r1, aA_bB, r1),\n            cd.call(mulNonResidueFn, cC, AUX),\n            cd.call(f1mPrefix + \"_add\", r1, AUX, r1),\n\n            cd.call(f1mPrefix + \"_mul\", a_c, A_C, r2),\n            cd.call(f1mPrefix + \"_sub\", r2, aA_cC, r2),\n            cd.call(f1mPrefix + \"_add\", r2, bB, r2),\n        );\n\n    }\n\n    function buildSquare() {\n        const f = module.addFunction(prefix+\"_square\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const A = c.getLocal(\"x\");\n        const B = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const C = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        const s0 = c.i32_const(module.alloc(f1n8));\n        const ab = c.i32_const(module.alloc(f1n8));\n        const s1 = c.i32_const(module.alloc(f1n8));\n        const s2 = c.i32_const(module.alloc(f1n8));\n        const bc = c.i32_const(module.alloc(f1n8));\n        const s3 = c.i32_const(module.alloc(f1n8));\n        const s4 = c.i32_const(module.alloc(f1n8));\n\n\n        f.addCode(\n\n            c.call(f1mPrefix + \"_square\", A, s0),\n            c.call(f1mPrefix + \"_mul\", A, B, ab),\n            c.call(f1mPrefix + \"_add\", ab, ab, s1),\n\n            c.call(f1mPrefix + \"_sub\", A, B, s2),\n            c.call(f1mPrefix + \"_add\", s2, C, s2),\n            c.call(f1mPrefix + \"_square\", s2, s2),\n\n            c.call(f1mPrefix + \"_mul\", B, C, bc),\n            c.call(f1mPrefix + \"_add\", bc, bc, s3),\n\n            c.call(f1mPrefix + \"_square\", C, s4),\n\n            c.call(mulNonResidueFn, s3, r0),\n            c.call(f1mPrefix + \"_add\", s0, r0, r0),\n\n            c.call(mulNonResidueFn, s4, r1),\n            c.call(f1mPrefix + \"_add\", s1, r1, r1),\n\n            c.call(f1mPrefix + \"_add\", s0, s4, r2),\n            c.call(f1mPrefix + \"_sub\", s3, r2, r2),\n            c.call(f1mPrefix + \"_add\", s2, r2, r2),\n            c.call(f1mPrefix + \"_add\", s1, r2, r2),\n        );\n\n    }\n\n\n    function buildToMontgomery() {\n        const f = module.addFunction(prefix+\"_toMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_toMontgomery\", x0, r0),\n            c.call(f1mPrefix+\"_toMontgomery\", x1, r1),\n            c.call(f1mPrefix+\"_toMontgomery\", x2, r2)\n        );\n    }\n\n    function buildFromMontgomery() {\n        const f = module.addFunction(prefix+\"_fromMontgomery\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_fromMontgomery\", x0, r0),\n            c.call(f1mPrefix+\"_fromMontgomery\", x1, r1),\n            c.call(f1mPrefix+\"_fromMontgomery\", x2, r2)\n        );\n    }\n\n    function buildCopy() {\n        const f = module.addFunction(prefix+\"_copy\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_copy\", x0, r0),\n            c.call(f1mPrefix+\"_copy\", x1, r1),\n            c.call(f1mPrefix+\"_copy\", x2, r2),\n        );\n    }\n\n    function buildZero() {\n        const f = module.addFunction(prefix+\"_zero\");\n        f.addParam(\"x\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_zero\", x0),\n            c.call(f1mPrefix+\"_zero\", x1),\n            c.call(f1mPrefix+\"_zero\", x2),\n        );\n    }\n\n    function buildOne() {\n        const f = module.addFunction(prefix+\"_one\");\n        f.addParam(\"x\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_one\", x0),\n            c.call(f1mPrefix+\"_zero\", x1),\n            c.call(f1mPrefix+\"_zero\", x2),\n        );\n    }\n\n    function buildEq() {\n        const f = module.addFunction(prefix+\"_eq\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"y\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const y0 = c.getLocal(\"y\");\n        const y1 = c.i32_add(c.getLocal(\"y\"), c.i32_const(f1n8));\n        const y2 = c.i32_add(c.getLocal(\"y\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.i32_and(\n                c.i32_and(\n                    c.call(f1mPrefix+\"_eq\", x0, y0),\n                    c.call(f1mPrefix+\"_eq\", x1, y1),\n                ),\n                c.call(f1mPrefix+\"_eq\", x2, y2)\n            )\n        );\n    }\n\n    function buildIsZero() {\n        const f = module.addFunction(prefix+\"_isZero\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.i32_and(\n                c.i32_and(\n                    c.call(f1mPrefix+\"_isZero\", x0),\n                    c.call(f1mPrefix+\"_isZero\", x1)\n                ),\n                c.call(f1mPrefix+\"_isZero\", x2)\n            )\n        );\n    }\n\n    function buildInverse() {\n        const f = module.addFunction(prefix+\"_inverse\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n        const r0 = c.getLocal(\"r\");\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f1n8));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f1n8));\n\n        const t0 = c.i32_const(module.alloc(f1n8));\n        const t1 = c.i32_const(module.alloc(f1n8));\n        const t2 = c.i32_const(module.alloc(f1n8));\n        const t3 = c.i32_const(module.alloc(f1n8));\n        const t4 = c.i32_const(module.alloc(f1n8));\n        const t5 = c.i32_const(module.alloc(f1n8));\n        const c0 = c.i32_const(module.alloc(f1n8));\n        const c1 = c.i32_const(module.alloc(f1n8));\n        const c2 = c.i32_const(module.alloc(f1n8));\n        const t6 = c.i32_const(module.alloc(f1n8));\n        const AUX = c.i32_const(module.alloc(f1n8));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_square\", x0, t0),\n            c.call(f1mPrefix+\"_square\", x1, t1),\n            c.call(f1mPrefix+\"_square\", x2, t2),\n            c.call(f1mPrefix+\"_mul\", x0, x1, t3),\n            c.call(f1mPrefix+\"_mul\", x0, x2, t4),\n            c.call(f1mPrefix+\"_mul\", x1, x2, t5),\n\n            c.call(mulNonResidueFn, t5, c0),\n            c.call(f1mPrefix+\"_sub\", t0, c0, c0),\n\n            c.call(mulNonResidueFn, t2, c1),\n            c.call(f1mPrefix+\"_sub\", c1, t3, c1),\n\n            c.call(f1mPrefix+\"_sub\", t1, t4, c2),\n\n            c.call(f1mPrefix+\"_mul\", x2, c1, t6),\n            c.call(f1mPrefix+\"_mul\", x1, c2, AUX),\n            c.call(f1mPrefix+\"_add\", t6, AUX, t6),\n            c.call(mulNonResidueFn, t6, t6),\n            c.call(f1mPrefix+\"_mul\", x0, c0, AUX),\n            c.call(f1mPrefix+\"_add\", AUX, t6, t6),\n\n            c.call(f1mPrefix+\"_inverse\", t6, t6),\n\n            c.call(f1mPrefix+\"_mul\", t6, c0, r0),\n            c.call(f1mPrefix+\"_mul\", t6, c1, r1),\n            c.call(f1mPrefix+\"_mul\", t6, c2, r2)\n        );\n    }\n\n\n    function buildSign() {\n        const f = module.addFunction(prefix+\"_sign\");\n        f.addParam(\"x\", \"i32\");\n        f.addLocal(\"s\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f1n8));\n\n        f.addCode(\n            c.setLocal(\"s\" , c.call( f1mPrefix + \"_sign\", x2)),\n            c.if(\n                c.getLocal(\"s\"),\n                c.ret(c.getLocal(\"s\"))\n            ),\n            c.setLocal(\"s\" , c.call( f1mPrefix + \"_sign\", x1)),\n            c.if(\n                c.getLocal(\"s\"),\n                c.ret(c.getLocal(\"s\"))\n            ),\n            c.ret(c.call( f1mPrefix + \"_sign\", x0))\n        );\n    }\n\n    function buildIsOne() {\n        const f = module.addFunction(prefix+\"_isOne\");\n        f.addParam(\"x\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1n8*2));\n\n        f.addCode(\n            c.ret(\n                c.i32_and(\n                    c.i32_and(\n                        c.call(f1mPrefix + \"_isOne\", x0),\n                        c.call(f1mPrefix + \"_isZero\", x1)\n                    ),\n                    c.call(f1mPrefix + \"_isZero\", x2)\n                )\n            )\n        );\n    }\n\n    buildIsZero();\n    buildIsOne();\n    buildZero();\n    buildOne();\n    buildCopy();\n    buildMul();\n    buildSquare();\n    buildAdd();\n    buildSub();\n    buildNeg();\n    buildSign();\n    buildToMontgomery();\n    buildFromMontgomery();\n    buildEq();\n    buildInverse();\n    buildTimesScalar();\n    buildIsNegative();\n\n    module.exportFunction(prefix + \"_isZero\");\n    module.exportFunction(prefix + \"_isOne\");\n    module.exportFunction(prefix + \"_zero\");\n    module.exportFunction(prefix + \"_one\");\n    module.exportFunction(prefix + \"_copy\");\n    module.exportFunction(prefix + \"_mul\");\n    module.exportFunction(prefix + \"_square\");\n    module.exportFunction(prefix + \"_add\");\n    module.exportFunction(prefix + \"_sub\");\n    module.exportFunction(prefix + \"_neg\");\n    module.exportFunction(prefix + \"_sign\");\n    module.exportFunction(prefix + \"_fromMontgomery\");\n    module.exportFunction(prefix + \"_toMontgomery\");\n    module.exportFunction(prefix + \"_eq\");\n    module.exportFunction(prefix + \"_inverse\");\n    buildBatchInverse(module, prefix);\n    buildExp(\n        module,\n        prefix + \"_exp\",\n        f1n8*3,\n        prefix + \"_mul\",\n        prefix + \"_square\",\n        prefix + \"_copy\",\n        prefix + \"_one\"\n    );\n    module.exportFunction(prefix + \"_exp\");\n    module.exportFunction(prefix + \"_timesScalar\");\n    module.exportFunction(prefix + \"_batchInverse\");\n    module.exportFunction(prefix + \"_isNegative\");\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildTimesScalarNAF(module, fnName, elementLen, opAB, opAA, opAmB, opCopy, opInit) {\n\n    const f = module.addFunction(fnName);\n    f.addParam(\"base\", \"i32\");\n    f.addParam(\"scalar\", \"i32\");\n    f.addParam(\"scalarLength\", \"i32\");\n    f.addParam(\"r\", \"i32\");\n    f.addLocal(\"old0\", \"i32\");\n    f.addLocal(\"nbits\", \"i32\");\n    f.addLocal(\"i\", \"i32\");\n    f.addLocal(\"last\", \"i32\");\n    f.addLocal(\"cur\", \"i32\");\n    f.addLocal(\"carry\", \"i32\");\n    f.addLocal(\"p\", \"i32\");\n\n    const c = f.getCodeBuilder();\n\n    const aux = c.i32_const(module.alloc(elementLen));\n\n    function getBit(IDX) {\n        return c.i32_and(\n            c.i32_shr_u(\n                c.i32_load(\n                    c.i32_add(\n                        c.getLocal(\"scalar\"),\n                        c.i32_and(\n                            c.i32_shr_u(\n                                IDX,\n                                c.i32_const(3)\n                            ),\n                            c.i32_const(0xFFFFFFFC)\n                        )\n                    )\n                ),\n                c.i32_and(\n                    IDX,\n                    c.i32_const(0x1F)\n                )\n            ),\n            c.i32_const(1)\n        );\n    }\n\n    function pushBit(b) {\n        return [\n            ...c.i32_store8(\n                c.getLocal(\"p\"),\n                c.i32_const(b)\n            ),\n            ...c.setLocal(\n                \"p\",\n                c.i32_add(\n                    c.getLocal(\"p\"),\n                    c.i32_const(1)\n                )\n            )\n        ];\n    }\n\n    f.addCode(\n        c.if(\n            c.i32_eqz(c.getLocal(\"scalarLength\")),\n            [\n                ...c.call(opInit, c.getLocal(\"r\")),\n                ...c.ret([])\n            ]\n        ),\n        c.setLocal(\"nbits\", c.i32_shl(c.getLocal(\"scalarLength\"), c.i32_const(3))),\n        c.setLocal(\"old0\", c.i32_load(c.i32_const(0))),\n        c.setLocal(\"p\", c.getLocal(\"old0\")),\n        c.i32_store(\n            c.i32_const(0),\n            c.i32_and(\n                c.i32_add(\n                    c.i32_add(\n                        c.getLocal(\"old0\"),\n                        c.i32_const(32)\n                    ),\n                    c.getLocal(\"nbits\")\n                ),\n                c.i32_const(0xFFFFFFF8)\n            )\n        ),\n        c.setLocal(\"i\", c.i32_const(1)),\n\n        c.setLocal(\"last\",getBit(c.i32_const(0))),\n        c.setLocal(\"carry\",c.i32_const(0)),\n\n        c.block(c.loop(\n            c.br_if(1, c.i32_eq( c.getLocal(\"i\"), c.getLocal(\"nbits\"))),\n\n            c.setLocal(\"cur\", getBit(c.getLocal(\"i\"))),\n            c.if( c.getLocal(\"last\"),\n                c.if( c.getLocal(\"cur\"),\n                    c.if(c.getLocal(\"carry\"),\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(1)),\n                            ...pushBit(1)\n                        ]\n                        ,\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(1)),\n                            ...pushBit(255)\n                        ],\n                    ),\n                    c.if(c.getLocal(\"carry\"),\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(1)),\n                            ...pushBit(255)\n                        ]\n                        ,\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(0)),\n                            ...pushBit(1)\n                        ],\n                    ),\n                ),\n                c.if( c.getLocal(\"cur\"),\n                    c.if(c.getLocal(\"carry\"),\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(1)),\n                            ...pushBit(0)\n                        ]\n                        ,\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(1)),\n                            ...c.setLocal(\"carry\", c.i32_const(0)),\n                            ...pushBit(0)\n                        ],\n                    ),\n                    c.if(c.getLocal(\"carry\"),\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(1)),\n                            ...c.setLocal(\"carry\", c.i32_const(0)),\n                            ...pushBit(0)\n                        ]\n                        ,\n                        [\n                            ...c.setLocal(\"last\", c.i32_const(0)),\n                            ...c.setLocal(\"carry\", c.i32_const(0)),\n                            ...pushBit(0)\n                        ],\n                    ),\n                )\n            ),\n            c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n            c.br(0)\n        )),\n\n        c.if( c.getLocal(\"last\"),\n            c.if(c.getLocal(\"carry\"),\n                [\n                    ...pushBit(255),\n                    ...pushBit(0),\n                    ...pushBit(1)\n                ]\n                ,\n                [\n                    ...pushBit(1)\n                ],\n            ),\n            c.if(c.getLocal(\"carry\"),\n                [\n                    ...pushBit(0),\n                    ...pushBit(1)\n                ]\n            ),\n        ),\n\n        c.setLocal(\"p\", c.i32_sub(c.getLocal(\"p\"), c.i32_const(1))),\n\n        // p already points to the last bit\n\n        c.call(opCopy, c.getLocal(\"base\"), aux),\n\n        c.call(opInit, c.getLocal(\"r\")),\n\n        c.block(c.loop(\n\n\n            c.call(opAA, c.getLocal(\"r\"), c.getLocal(\"r\")),\n\n\n            c.setLocal(\"cur\",\n                c.i32_load8_u(\n                    c.getLocal(\"p\")\n                )\n            ),\n\n            c.if(\n                c.getLocal(\"cur\"),\n                c.if(\n                    c.i32_eq(c.getLocal(\"cur\"), c.i32_const(1)),\n                    c.call(opAB,  c.getLocal(\"r\"), aux, c.getLocal(\"r\")),\n                    c.call(opAmB, c.getLocal(\"r\"), aux, c.getLocal(\"r\")),\n                )\n            ),\n\n            c.br_if(1, c.i32_eq( c.getLocal(\"old0\"), c.getLocal(\"p\"))),\n            c.setLocal(\"p\", c.i32_sub(c.getLocal(\"p\"), c.i32_const(1))),\n            c.br(0)\n\n        )),\n\n        c.i32_store( c.i32_const(0), c.getLocal(\"old0\"))\n\n    );\n\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildMultiexp(module, prefix, fnName, opAdd, n8b) {\n\n    const n64g = module.modules[prefix].n64;\n    const n8g = n64g*8;\n\n    function buildGetChunk() {\n        const f = module.addFunction(fnName + \"_getChunk\");\n        f.addParam(\"pScalar\", \"i32\");\n        f.addParam(\"scalarSize\", \"i32\");  // Number of bytes of the scalar\n        f.addParam(\"startBit\", \"i32\");  // Bit to start extract\n        f.addParam(\"chunkSize\", \"i32\");  // Chunk size in bits\n        f.addLocal(\"bitsToEnd\", \"i32\");\n        f.addLocal(\"mask\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\"bitsToEnd\",\n                c.i32_sub(\n                    c.i32_mul(\n                        c.getLocal(\"scalarSize\"),\n                        c.i32_const(8)\n                    ),\n                    c.getLocal(\"startBit\")\n                )\n            ),\n            c.if(\n                c.i32_gt_s(\n                    c.getLocal(\"chunkSize\"),\n                    c.getLocal(\"bitsToEnd\")\n                ),\n                c.setLocal(\n                    \"mask\",\n                    c.i32_sub(\n                        c.i32_shl(\n                            c.i32_const(1),\n                            c.getLocal(\"bitsToEnd\")\n                        ),\n                        c.i32_const(1)\n                    )\n                ),\n                c.setLocal(\n                    \"mask\",\n                    c.i32_sub(\n                        c.i32_shl(\n                            c.i32_const(1),\n                            c.getLocal(\"chunkSize\")\n                        ),\n                        c.i32_const(1)\n                    )\n                )\n            ),\n            c.i32_and(\n                c.i32_shr_u(\n                    c.i32_load(\n                        c.i32_add(\n                            c.getLocal(\"pScalar\"),\n                            c.i32_shr_u(\n                                c.getLocal(\"startBit\"),\n                                c.i32_const(3)\n                            )\n                        ),\n                        0,  // offset\n                        0   // align to byte.\n                    ),\n                    c.i32_and(\n                        c.getLocal(\"startBit\"),\n                        c.i32_const(0x7)\n                    )\n                ),\n                c.getLocal(\"mask\")\n            )\n        );\n    }\n\n    function buildMutiexpChunk() {\n        const f = module.addFunction(fnName + \"_chunk\");\n        f.addParam(\"pBases\", \"i32\");\n        f.addParam(\"pScalars\", \"i32\");\n        f.addParam(\"scalarSize\", \"i32\");  // Number of points\n        f.addParam(\"n\", \"i32\");  // Number of points\n        f.addParam(\"startBit\", \"i32\");  // bit where it starts the chunk\n        f.addParam(\"chunkSize\", \"i32\");  // bit where it starts the chunk\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"nChunks\", \"i32\");\n        f.addLocal(\"itScalar\", \"i32\");\n        f.addLocal(\"endScalar\", \"i32\");\n        f.addLocal(\"itBase\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        f.addLocal(\"nTable\", \"i32\");\n        f.addLocal(\"pTable\", \"i32\");\n        f.addLocal(\"idx\", \"i32\");\n        f.addLocal(\"pIdxTable\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.if(\n                c.i32_eqz(c.getLocal(\"n\")),\n                [\n                    ...c.call(prefix + \"_zero\", c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n\n            // Allocate memory\n\n            c.setLocal(\n                \"nTable\",\n                c.i32_shl(\n                    c.i32_const(1),\n                    c.getLocal(\"chunkSize\")\n                )\n            ),\n            c.setLocal(\"pTable\", c.i32_load( c.i32_const(0) )),\n            c.i32_store(\n                c.i32_const(0),\n                c.i32_add(\n                    c.getLocal(\"pTable\"),\n                    c.i32_mul(\n                        c.getLocal(\"nTable\"),\n                        c.i32_const(n8g)\n                    )\n                )\n            ),\n\n            // Reset Table\n            c.setLocal(\"j\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"j\"),\n                        c.getLocal(\"nTable\")\n                    )\n                ),\n\n                c.call(\n                    prefix + \"_zero\",\n                    c.i32_add(\n                        c.getLocal(\"pTable\"),\n                        c.i32_mul(\n                            c.getLocal(\"j\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                c.br(0)\n            )),\n\n            // Distribute elements\n            c.setLocal(\"itBase\", c.getLocal(\"pBases\")),\n            c.setLocal(\"itScalar\", c.getLocal(\"pScalars\")),\n            c.setLocal(\"endScalar\",\n                c.i32_add(\n                    c.getLocal(\"pScalars\"),\n                    c.i32_mul(\n                        c.getLocal(\"n\"),\n                        c.getLocal(\"scalarSize\")\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"itScalar\"),\n                        c.getLocal(\"endScalar\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx\",\n                    c.call(fnName + \"_getChunk\",\n                        c.getLocal(\"itScalar\"),\n                        c.getLocal(\"scalarSize\"),\n                        c.getLocal(\"startBit\"),\n                        c.getLocal(\"chunkSize\")\n                    )\n                ),\n\n                c.if(\n                    c.getLocal(\"idx\"),\n                    [\n                        ...c.setLocal(\n                            \"pIdxTable\",\n                            c.i32_add(\n                                c.getLocal(\"pTable\"),\n                                c.i32_mul(\n                                    c.i32_sub(\n                                        c.getLocal(\"idx\"),\n                                        c.i32_const(1)\n                                    ),\n                                    c.i32_const(n8g)\n                                )\n                            )\n                        ),\n                        ...c.call(\n                            opAdd,\n                            c.getLocal(\"pIdxTable\"),\n                            c.getLocal(\"itBase\"),\n                            c.getLocal(\"pIdxTable\"),\n                        )\n                    ]\n                ),\n\n                c.setLocal(\"itScalar\", c.i32_add(c.getLocal(\"itScalar\"), c.getLocal(\"scalarSize\"))),\n                c.setLocal(\"itBase\", c.i32_add(c.getLocal(\"itBase\"), c.i32_const(n8b))),\n                c.br(0)\n            )),\n\n            c.call(fnName + \"_reduceTable\", c.getLocal(\"pTable\"), c.getLocal(\"chunkSize\")),\n            c.call(\n                prefix + \"_copy\",\n                c.getLocal(\"pTable\"),\n                c.getLocal(\"pr\")\n            ),\n\n\n            c.i32_store(\n                c.i32_const(0),\n                c.getLocal(\"pTable\")\n            )\n\n        );\n    }\n\n    function buildMultiexp() {\n        const f = module.addFunction(fnName);\n        f.addParam(\"pBases\", \"i32\");\n        f.addParam(\"pScalars\", \"i32\");\n        f.addParam(\"scalarSize\", \"i32\");  // Number of points\n        f.addParam(\"n\", \"i32\");  // Number of points\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"chunkSize\", \"i32\");\n        f.addLocal(\"nChunks\", \"i32\");\n        f.addLocal(\"itScalar\", \"i32\");\n        f.addLocal(\"endScalar\", \"i32\");\n        f.addLocal(\"itBase\", \"i32\");\n        f.addLocal(\"itBit\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        f.addLocal(\"nTable\", \"i32\");\n        f.addLocal(\"pTable\", \"i32\");\n        f.addLocal(\"idx\", \"i32\");\n        f.addLocal(\"pIdxTable\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux = c.i32_const(module.alloc(n8g));\n\n        const pTSizes = module.alloc([\n            17, 17, 17, 17,   17, 17, 17, 17,\n            17, 17, 16, 16,   15, 14, 13, 13,\n            12, 11, 10,  9,    8,  7,  7,  6,\n            5 ,  4,  3,  2,    1,  1,  1,  1\n        ]);\n\n        f.addCode(\n            c.call(prefix + \"_zero\", c.getLocal(\"pr\")),\n            c.if(\n                c.i32_eqz(c.getLocal(\"n\")),\n                c.ret([])\n            ),\n            c.setLocal(\"chunkSize\", c.i32_load8_u( c.i32_clz(c.getLocal(\"n\")),  pTSizes )),\n            c.setLocal(\n                \"nChunks\",\n                c.i32_add(\n                    c.i32_div_u(\n                        c.i32_sub(\n                            c.i32_shl(\n                                c.getLocal(\"scalarSize\"),\n                                c.i32_const(3)\n                            ),\n                            c.i32_const(1)\n                        ),\n                        c.getLocal(\"chunkSize\")\n                    ),\n                    c.i32_const(1)\n                )\n            ),\n\n\n            // Allocate memory\n\n            c.setLocal(\n                \"itBit\",\n                c.i32_mul(\n                    c.i32_sub(\n                        c.getLocal(\"nChunks\"),\n                        c.i32_const(1)\n                    ),\n                    c.getLocal(\"chunkSize\")\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_lt_s(\n                        c.getLocal(\"itBit\"),\n                        c.i32_const(0)\n                    )\n                ),\n\n                // Double nChunk times\n                c.if(\n                    c.i32_eqz(c.call(prefix + \"_isZero\", c.getLocal(\"pr\"))),\n                    [\n                        ...c.setLocal(\"j\", c.i32_const(0)),\n                        ...c.block(c.loop(\n                            c.br_if(\n                                1,\n                                c.i32_eq(\n                                    c.getLocal(\"j\"),\n                                    c.getLocal(\"chunkSize\")\n                                )\n                            ),\n\n                            c.call(prefix + \"_double\", c.getLocal(\"pr\"), c.getLocal(\"pr\")),\n\n                            c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                            c.br(0)\n                        ))\n                    ]\n                ),\n\n                c.call(\n                    fnName + \"_chunk\",\n                    c.getLocal(\"pBases\"),\n                    c.getLocal(\"pScalars\"),\n                    c.getLocal(\"scalarSize\"),\n                    c.getLocal(\"n\"),\n                    c.getLocal(\"itBit\"),\n                    c.getLocal(\"chunkSize\"),\n                    aux\n                ),\n\n                c.call(\n                    prefix + \"_add\",\n                    c.getLocal(\"pr\"),\n                    aux,\n                    c.getLocal(\"pr\")\n                ),\n                c.setLocal(\"itBit\", c.i32_sub(c.getLocal(\"itBit\"), c.getLocal(\"chunkSize\"))),\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildReduceTable() {\n        const f = module.addFunction(fnName + \"_reduceTable\");\n        f.addParam(\"pTable\", \"i32\");\n        f.addParam(\"p\", \"i32\");  // Number of bits of the table\n        f.addLocal(\"half\", \"i32\");\n        f.addLocal(\"it1\", \"i32\");\n        f.addLocal(\"it2\", \"i32\");\n        f.addLocal(\"pAcc\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.if(\n                c.i32_eq(c.getLocal(\"p\"), c.i32_const(1)),\n                c.ret([])\n            ),\n            c.setLocal(\n                \"half\",\n                c.i32_shl(\n                    c.i32_const(1),\n                    c.i32_sub(\n                        c.getLocal(\"p\"),\n                        c.i32_const(1)\n                    )\n                )\n            ),\n\n            c.setLocal(\"it1\", c.getLocal(\"pTable\")),\n            c.setLocal(\n                \"it2\",\n                c.i32_add(\n                    c.getLocal(\"pTable\"),\n                    c.i32_mul(\n                        c.getLocal(\"half\"),\n                        c.i32_const(n8g)\n                    )\n                )\n            ),\n            c.setLocal(\"pAcc\",\n                c.i32_sub(\n                    c.getLocal(\"it2\"),\n                    c.i32_const(n8g)\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"it1\"),\n                        c.getLocal(\"pAcc\")\n                    )\n                ),\n                c.call(\n                    prefix + \"_add\",\n                    c.getLocal(\"it1\"),\n                    c.getLocal(\"it2\"),\n                    c.getLocal(\"it1\")\n                ),\n                c.call(\n                    prefix + \"_add\",\n                    c.getLocal(\"pAcc\"),\n                    c.getLocal(\"it2\"),\n                    c.getLocal(\"pAcc\")\n                ),\n                c.setLocal(\"it1\", c.i32_add(c.getLocal(\"it1\"), c.i32_const(n8g))),\n                c.setLocal(\"it2\", c.i32_add(c.getLocal(\"it2\"), c.i32_const(n8g))),\n                c.br(0)\n            )),\n\n            c.call(\n                fnName + \"_reduceTable\",\n                c.getLocal(\"pTable\"),\n                c.i32_sub(\n                    c.getLocal(\"p\"),\n                    c.i32_const(1)\n                )\n            ),\n\n            c.setLocal(\"p\", c.i32_sub(c.getLocal(\"p\"), c.i32_const(1))),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eqz(c.getLocal(\"p\"))),\n                c.call(prefix + \"_double\", c.getLocal(\"pAcc\"), c.getLocal(\"pAcc\")),\n                c.setLocal(\"p\", c.i32_sub(c.getLocal(\"p\"), c.i32_const(1))),\n                c.br(0)\n            )),\n\n            c.call(prefix + \"_add\", c.getLocal(\"pTable\"), c.getLocal(\"pAcc\"), c.getLocal(\"pTable\"))\n        );\n    }\n\n    buildGetChunk();\n    buildReduceTable();\n    buildMutiexpChunk();\n    buildMultiexp();\n\n    module.exportFunction(fnName);\n    module.exportFunction(fnName +\"_chunk\");\n\n\n};\n\n\n\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nconst buildTimesScalarNAF = require(\"./build_timesscalarnaf\");\n//const buildTimesScalar = require(\"./build_timesscalar\");\nconst buildBatchConvertion = require(\"./build_batchconvertion\");\nconst buildMultiexp = require(\"./build_multiexp\");\n\nmodule.exports = function buildCurve(module, prefix, prefixField, pB) {\n\n\n    const n64 = module.modules[prefixField].n64;\n    const n8 = n64*8;\n\n    if (module.modules[prefix]) return prefix;  // already builded\n    module.modules[prefix] = {\n        n64: n64*3\n    };\n\n    function buildIsZero() {\n        const f = module.addFunction(prefix + \"_isZero\");\n        f.addParam(\"p1\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_isZero\",\n            c.i32_add(\n                c.getLocal(\"p1\"),\n                c.i32_const(n8*2)\n            )\n        ));\n    }\n    function buildIsZeroAffine() {\n        const f = module.addFunction(prefix + \"_isZeroAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.i32_and(\n                c.call(\n                    prefixField + \"_isZero\",\n                    c.getLocal(\"p1\")\n                ),\n                c.call(\n                    prefixField + \"_isZero\",\n                    c.i32_add(\n                        c.getLocal(\"p1\"),\n                        c.i32_const(n8)\n                    )\n                )\n            )\n        );\n    }\n\n    function buildCopy() {\n        const f = module.addFunction(prefix + \"_copy\");\n        f.addParam(\"ps\", \"i32\");\n        f.addParam(\"pd\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<n64*3; i++) {\n            f.addCode(\n                c.i64_store(\n                    c.getLocal(\"pd\"),\n                    i*8,\n                    c.i64_load(\n                        c.getLocal(\"ps\"),\n                        i*8\n                    )\n                )\n            );\n        }\n    }\n\n\n    function buildCopyAffine() {\n        const f = module.addFunction(prefix + \"_copyAffine\");\n        f.addParam(\"ps\", \"i32\");\n        f.addParam(\"pd\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<n64*2; i++) {\n            f.addCode(\n                c.i64_store(\n                    c.getLocal(\"pd\"),\n                    i*8,\n                    c.i64_load(\n                        c.getLocal(\"ps\"),\n                        i*8\n                    )\n                )\n            );\n        }\n\n    }\n\n\n    function buildZero() {\n        const f = module.addFunction(prefix + \"_zero\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_zero\",\n            c.getLocal(\"pr\")\n        ));\n\n        f.addCode(c.call(\n            prefixField + \"_one\",\n            c.i32_add(\n                c.getLocal(\"pr\"),\n                c.i32_const(n8)\n            )\n        ));\n\n        f.addCode(c.call(\n            prefixField + \"_zero\",\n            c.i32_add(\n                c.getLocal(\"pr\"),\n                c.i32_const(n8*2)\n            )\n        ));\n    }\n\n\n    function buildZeroAffine() {\n        const f = module.addFunction(prefix + \"_zeroAffine\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_zero\",\n            c.getLocal(\"pr\")\n        ));\n\n        f.addCode(c.call(\n            prefixField + \"_zero\",\n            c.i32_add(\n                c.getLocal(\"pr\"),\n                c.i32_const(n8)\n            )\n        ));\n    }\n\n    function buildEq() {\n        const f = module.addFunction(prefix + \"_eq\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"z1\", \"i32\");\n        f.addLocal(\"z2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x1 = c.getLocal(\"p1\");\n        const y1 = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z1\", c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2))));\n        const z1 = c.getLocal(\"z1\");\n        const x2 = c.getLocal(\"p2\");\n        const y2 = c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z2\", c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8*2))));\n        const z2 = c.getLocal(\"z2\");\n\n        const Z1Z1 = c.i32_const(module.alloc(n8));\n        const Z2Z2 = c.i32_const(module.alloc(n8));\n        const U1 = c.i32_const(module.alloc(n8));\n        const U2 = c.i32_const(module.alloc(n8));\n        const Z1_cubed = c.i32_const(module.alloc(n8));\n        const Z2_cubed = c.i32_const(module.alloc(n8));\n        const S1 = c.i32_const(module.alloc(n8));\n        const S2 = c.i32_const(module.alloc(n8));\n\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                c.ret( c.call(prefix + \"_isZero\", c.getLocal(\"p2\"))),\n            ),\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p2\")),\n                c.ret(c.i32_const(0))\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z1),\n                c.ret(c.call(prefix + \"_eqMixed\", c.getLocal(\"p2\"), c.getLocal(\"p1\")))\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z2),\n                c.ret(c.call(prefix + \"_eqMixed\", c.getLocal(\"p1\"), c.getLocal(\"p2\")))\n            ),\n\n            c.call(prefixField + \"_square\", z1, Z1Z1),\n            c.call(prefixField + \"_square\", z2, Z2Z2),\n            c.call(prefixField + \"_mul\", x1, Z2Z2, U1),\n            c.call(prefixField + \"_mul\", x2, Z1Z1, U2),\n            c.call(prefixField + \"_mul\", z1, Z1Z1, Z1_cubed),\n            c.call(prefixField + \"_mul\", z2, Z2Z2, Z2_cubed),\n            c.call(prefixField + \"_mul\", y1, Z2_cubed, S1),\n            c.call(prefixField + \"_mul\", y2, Z1_cubed, S2),\n\n            c.if(\n                c.call(prefixField + \"_eq\", U1, U2),\n                c.if(\n                    c.call(prefixField + \"_eq\", S1, S2),\n                    c.ret(c.i32_const(1))\n                )\n            ),\n            c.ret(c.i32_const(0))\n        );\n    }\n\n\n    function buildEqMixed() {\n        const f = module.addFunction(prefix + \"_eqMixed\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"z1\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x1 = c.getLocal(\"p1\");\n        const y1 = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z1\", c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2))));\n        const z1 = c.getLocal(\"z1\");\n        const x2 = c.getLocal(\"p2\");\n        const y2 = c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8));\n\n        const Z1Z1 = c.i32_const(module.alloc(n8));\n        const U2 = c.i32_const(module.alloc(n8));\n        const Z1_cubed = c.i32_const(module.alloc(n8));\n        const S2 = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                c.ret( c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p2\"))),\n            ),\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p2\")),\n                c.ret(c.i32_const(0))\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z1),\n                c.ret(c.call(prefix + \"_eqAffine\", c.getLocal(\"p1\"), c.getLocal(\"p2\")))\n            ),\n            c.call(prefixField + \"_square\", z1, Z1Z1),\n            c.call(prefixField + \"_mul\", x2, Z1Z1, U2),\n            c.call(prefixField + \"_mul\", z1, Z1Z1, Z1_cubed),\n            c.call(prefixField + \"_mul\", y2, Z1_cubed, S2),\n\n            c.if(\n                c.call(prefixField + \"_eq\", x1, U2),\n                c.if(\n                    c.call(prefixField + \"_eq\", y1, S2),\n                    c.ret(c.i32_const(1))\n                )\n            ),\n            c.ret(c.i32_const(0))\n        );\n    }\n\n    function buildDouble() {\n        const f = module.addFunction(prefix + \"_double\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const z = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        const A = c.i32_const(module.alloc(n8));\n        const B = c.i32_const(module.alloc(n8));\n        const C = c.i32_const(module.alloc(n8));\n        const D = c.i32_const(module.alloc(n8));\n        const E = c.i32_const(module.alloc(n8));\n        const F = c.i32_const(module.alloc(n8));\n        const G = c.i32_const(module.alloc(n8));\n        const eightC = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefix + \"_copy\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z),\n                [\n                    ...c.ret(c.call(prefix + \"_doubleAffine\", c.getLocal(\"p1\"), c.getLocal(\"pr\"))),\n                    ...c.ret([])\n                ]\n            ),\n\n            c.call(prefixField + \"_square\", x, A),\n            c.call(prefixField + \"_square\", y, B),\n            c.call(prefixField + \"_square\", B, C),\n\n            c.call(prefixField + \"_add\", x, B, D),\n            c.call(prefixField + \"_square\", D, D),\n            c.call(prefixField + \"_sub\", D, A, D),\n            c.call(prefixField + \"_sub\", D, C, D),\n            c.call(prefixField + \"_add\", D, D, D),\n\n            c.call(prefixField + \"_add\", A, A, E),\n            c.call(prefixField + \"_add\", E, A, E),\n            c.call(prefixField + \"_square\", E, F),\n\n            c.call(prefixField + \"_mul\", y, z, G),\n\n            c.call(prefixField + \"_add\", D, D, x3),\n            c.call(prefixField + \"_sub\", F, x3, x3),\n\n            c.call(prefixField + \"_add\", C, C, eightC),\n            c.call(prefixField + \"_add\", eightC, eightC, eightC),\n            c.call(prefixField + \"_add\", eightC, eightC, eightC),\n\n            c.call(prefixField + \"_sub\", D, x3, y3),\n            c.call(prefixField + \"_mul\", y3, E, y3),\n            c.call(prefixField + \"_sub\", y3, eightC, y3),\n\n            c.call(prefixField + \"_add\", G, G, z3),\n        );\n    }\n\n\n    function buildDoubleAffine() {\n        const f = module.addFunction(prefix + \"_doubleAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        const XX = c.i32_const(module.alloc(n8));\n        const YY = c.i32_const(module.alloc(n8));\n        const YYYY = c.i32_const(module.alloc(n8));\n        const S = c.i32_const(module.alloc(n8));\n        const M = c.i32_const(module.alloc(n8));\n        const eightYYYY = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefix + \"_toJacobian\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n\n            // XX = X1^2\n            c.call(prefixField + \"_square\", x, XX),\n\n            // YY = Y1^2\n            c.call(prefixField + \"_square\", y, YY),\n\n            // YYYY = YY^2\n            c.call(prefixField + \"_square\", YY, YYYY),\n\n            // S = 2*((X1+YY)^2-XX-YYYY)\n            c.call(prefixField + \"_add\", x, YY, S),\n            c.call(prefixField + \"_square\", S, S),\n            c.call(prefixField + \"_sub\", S, XX, S),\n            c.call(prefixField + \"_sub\", S, YYYY, S),\n            c.call(prefixField + \"_add\", S, S, S),\n\n            // M = 3*XX+a  (Hera a=0)\n            c.call(prefixField + \"_add\", XX, XX, M),\n            c.call(prefixField + \"_add\", M, XX, M),\n\n            // Z3 = 2*Y1\n            c.call(prefixField + \"_add\", y, y, z3),\n\n            // T = M^2-2*S\n            // X3 = T\n            c.call(prefixField + \"_square\", M, x3),\n            c.call(prefixField + \"_sub\", x3, S, x3),\n            c.call(prefixField + \"_sub\", x3, S, x3),\n\n            // Y3 = M*(S-T)-8*YYYY\n            c.call(prefixField + \"_add\", YYYY, YYYY, eightYYYY),\n            c.call(prefixField + \"_add\", eightYYYY, eightYYYY, eightYYYY),\n            c.call(prefixField + \"_add\", eightYYYY, eightYYYY, eightYYYY),\n            c.call(prefixField + \"_sub\", S, x3, y3),\n            c.call(prefixField + \"_mul\", y3, M, y3),\n            c.call(prefixField + \"_sub\", y3, eightYYYY, y3),\n        );\n    }\n\n\n    function buildEqAffine() {\n        const f = module.addFunction(prefix + \"_eqAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"z1\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.ret(c.i32_and(\n                c.call(\n                    prefixField + \"_eq\",\n                    c.getLocal(\"p1\"),\n                    c.getLocal(\"p2\")\n                ),\n                c.call(\n                    prefixField + \"_eq\",\n                    c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8)),\n                    c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8))\n                )\n            ))\n        );\n    }\n\n    function buildToMontgomery() {\n        const f = module.addFunction(prefix + \"_toMontgomery\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_toMontgomery\",\n            c.getLocal(\"p1\"),\n            c.getLocal(\"pr\")\n        ));\n        for (let i=1; i<3; i++) {\n            f.addCode(c.call(\n                prefixField + \"_toMontgomery\",\n                c.i32_add(c.getLocal(\"p1\"), c.i32_const(i*n8)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(i*n8))\n            ));\n        }\n    }\n\n    function buildToMontgomeryAffine() {\n        const f = module.addFunction(prefix + \"_toMontgomeryAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_toMontgomery\",\n            c.getLocal(\"p1\"),\n            c.getLocal(\"pr\")\n        ));\n        for (let i=1; i<2; i++) {\n            f.addCode(c.call(\n                prefixField + \"_toMontgomery\",\n                c.i32_add(c.getLocal(\"p1\"), c.i32_const(i*n8)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(i*n8))\n            ));\n        }\n    }\n\n    function buildFromMontgomery() {\n        const f = module.addFunction(prefix + \"_fromMontgomery\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_fromMontgomery\",\n            c.getLocal(\"p1\"),\n            c.getLocal(\"pr\")\n        ));\n        for (let i=1; i<3; i++) {\n            f.addCode(c.call(\n                prefixField + \"_fromMontgomery\",\n                c.i32_add(c.getLocal(\"p1\"), c.i32_const(i*n8)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(i*n8))\n            ));\n        }\n    }\n\n\n    function buildFromMontgomeryAffine() {\n        const f = module.addFunction(prefix + \"_fromMontgomeryAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(c.call(\n            prefixField + \"_fromMontgomery\",\n            c.getLocal(\"p1\"),\n            c.getLocal(\"pr\")\n        ));\n        for (let i=1; i<2; i++) {\n            f.addCode(c.call(\n                prefixField + \"_fromMontgomery\",\n                c.i32_add(c.getLocal(\"p1\"), c.i32_const(i*n8)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(i*n8))\n            ));\n        }\n    }\n\n    function buildAdd() {\n\n        const f = module.addFunction(prefix + \"_add\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"z1\", \"i32\");\n        f.addLocal(\"z2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x1 = c.getLocal(\"p1\");\n        const y1 = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z1\", c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2))));\n        const z1 = c.getLocal(\"z1\");\n        const x2 = c.getLocal(\"p2\");\n        const y2 = c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z2\", c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8*2))));\n        const z2 = c.getLocal(\"z2\");\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        const Z1Z1 = c.i32_const(module.alloc(n8));\n        const Z2Z2 = c.i32_const(module.alloc(n8));\n        const U1 = c.i32_const(module.alloc(n8));\n        const U2 = c.i32_const(module.alloc(n8));\n        const Z1_cubed = c.i32_const(module.alloc(n8));\n        const Z2_cubed = c.i32_const(module.alloc(n8));\n        const S1 = c.i32_const(module.alloc(n8));\n        const S2 = c.i32_const(module.alloc(n8));\n        const H = c.i32_const(module.alloc(n8));\n        const S2_minus_S1 = c.i32_const(module.alloc(n8));\n        const I = c.i32_const(module.alloc(n8));\n        const J = c.i32_const(module.alloc(n8));\n        const r = c.i32_const(module.alloc(n8));\n        const r2 = c.i32_const(module.alloc(n8));\n        const V = c.i32_const(module.alloc(n8));\n        const V2 = c.i32_const(module.alloc(n8));\n        const S1_J2 = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefix + \"_copy\", c.getLocal(\"p2\"), c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p2\")),\n                [\n                    ...c.call(prefix + \"_copy\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z1),\n                [\n                    ...c.call(prefix + \"_addMixed\", x2, x1, x3),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z2),\n                [\n                    ...c.call(prefix + \"_addMixed\", x1, x2, x3),\n                    ...c.ret([])\n                ]\n            ),\n            c.call(prefixField + \"_square\", z1, Z1Z1),\n            c.call(prefixField + \"_square\", z2, Z2Z2),\n            c.call(prefixField + \"_mul\", x1, Z2Z2, U1),\n            c.call(prefixField + \"_mul\", x2, Z1Z1, U2),\n            c.call(prefixField + \"_mul\", z1, Z1Z1, Z1_cubed),\n            c.call(prefixField + \"_mul\", z2, Z2Z2, Z2_cubed),\n            c.call(prefixField + \"_mul\", y1, Z2_cubed, S1),\n            c.call(prefixField + \"_mul\", y2, Z1_cubed, S2),\n\n            c.if(\n                c.call(prefixField + \"_eq\", U1, U2),\n                c.if(\n                    c.call(prefixField + \"_eq\", S1, S2),\n                    [\n                        ...c.call(prefix + \"_double\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                        ...c.ret([])\n                    ]\n                )\n            ),\n\n            c.call(prefixField + \"_sub\", U2, U1, H),\n            c.call(prefixField + \"_sub\", S2, S1, S2_minus_S1),\n            c.call(prefixField + \"_add\", H, H, I),\n            c.call(prefixField + \"_square\", I, I),\n            c.call(prefixField + \"_mul\", H, I, J),\n            c.call(prefixField + \"_add\", S2_minus_S1, S2_minus_S1, r),\n            c.call(prefixField + \"_mul\", U1, I, V),\n            c.call(prefixField + \"_square\", r, r2),\n            c.call(prefixField + \"_add\", V, V, V2),\n\n            c.call(prefixField + \"_sub\", r2, J, x3),\n            c.call(prefixField + \"_sub\", x3, V2, x3),\n\n            c.call(prefixField + \"_mul\", S1, J, S1_J2),\n            c.call(prefixField + \"_add\", S1_J2, S1_J2, S1_J2),\n\n            c.call(prefixField + \"_sub\", V, x3, y3),\n            c.call(prefixField + \"_mul\", y3, r, y3),\n            c.call(prefixField + \"_sub\", y3, S1_J2, y3),\n\n            c.call(prefixField + \"_add\", z1, z2, z3),\n            c.call(prefixField + \"_square\", z3, z3),\n            c.call(prefixField + \"_sub\", z3, Z1Z1, z3),\n            c.call(prefixField + \"_sub\", z3, Z2Z2, z3),\n            c.call(prefixField + \"_mul\", z3, H, z3),\n        );\n\n    }\n\n\n    function buildAddMixed() {\n\n        const f = module.addFunction(prefix + \"_addMixed\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"z1\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x1 = c.getLocal(\"p1\");\n        const y1 = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z1\", c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2))));\n        const z1 = c.getLocal(\"z1\");\n        const x2 = c.getLocal(\"p2\");\n        const y2 = c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        const Z1Z1 = c.i32_const(module.alloc(n8));\n        const U2 = c.i32_const(module.alloc(n8));\n        const Z1_cubed = c.i32_const(module.alloc(n8));\n        const S2 = c.i32_const(module.alloc(n8));\n        const H = c.i32_const(module.alloc(n8));\n        const HH = c.i32_const(module.alloc(n8));\n        const S2_minus_y1 = c.i32_const(module.alloc(n8));\n        const I = c.i32_const(module.alloc(n8));\n        const J = c.i32_const(module.alloc(n8));\n        const r = c.i32_const(module.alloc(n8));\n        const r2 = c.i32_const(module.alloc(n8));\n        const V = c.i32_const(module.alloc(n8));\n        const V2 = c.i32_const(module.alloc(n8));\n        const y1_J2 = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefix + \"_copyAffine\", c.getLocal(\"p2\"), c.getLocal(\"pr\")),\n                    ...c.call(prefixField + \"_one\", c.i32_add(c.getLocal(\"pr\") , c.i32_const(n8*2))),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p2\")),\n                [\n                    ...c.call(prefix + \"_copy\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefixField + \"_isOne\", z1),\n                [\n                    ...c.call(prefix + \"_addAffine\", x1, x2, x3),\n                    ...c.ret([])\n                ]\n            ),\n            c.call(prefixField + \"_square\", z1, Z1Z1),\n            c.call(prefixField + \"_mul\", x2, Z1Z1, U2),\n            c.call(prefixField + \"_mul\", z1, Z1Z1, Z1_cubed),\n            c.call(prefixField + \"_mul\", y2, Z1_cubed, S2),\n\n            c.if(\n                c.call(prefixField + \"_eq\", x1, U2),\n                c.if(\n                    c.call(prefixField + \"_eq\", y1, S2),\n                    [\n                        ...c.call(prefix + \"_doubleAffine\", c.getLocal(\"p2\"), c.getLocal(\"pr\")),\n                        ...c.ret([])\n                    ]\n                )\n            ),\n\n            c.call(prefixField + \"_sub\", U2, x1, H),\n            c.call(prefixField + \"_sub\", S2, y1, S2_minus_y1),\n            c.call(prefixField + \"_square\", H, HH),\n            c.call(prefixField + \"_add\", HH , HH, I),\n            c.call(prefixField + \"_add\", I , I, I),\n            c.call(prefixField + \"_mul\", H, I, J),\n            c.call(prefixField + \"_add\", S2_minus_y1, S2_minus_y1, r),\n            c.call(prefixField + \"_mul\", x1, I, V),\n            c.call(prefixField + \"_square\", r, r2),\n            c.call(prefixField + \"_add\", V, V, V2),\n\n            c.call(prefixField + \"_sub\", r2, J, x3),\n            c.call(prefixField + \"_sub\", x3, V2, x3),\n\n            c.call(prefixField + \"_mul\", y1, J, y1_J2),\n            c.call(prefixField + \"_add\", y1_J2, y1_J2, y1_J2),\n\n            c.call(prefixField + \"_sub\", V, x3, y3),\n            c.call(prefixField + \"_mul\", y3, r, y3),\n            c.call(prefixField + \"_sub\", y3, y1_J2, y3),\n\n            c.call(prefixField + \"_add\", z1, H, z3),\n            c.call(prefixField + \"_square\", z3, z3),\n            c.call(prefixField + \"_sub\", z3, Z1Z1, z3),\n            c.call(prefixField + \"_sub\", z3, HH, z3),\n        );\n    }\n\n\n    function buildAddAffine() {\n\n        const f = module.addFunction(prefix + \"_addAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"z1\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x1 = c.getLocal(\"p1\");\n        const y1 = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        f.addCode(c.setLocal(\"z1\", c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2))));\n        const x2 = c.getLocal(\"p2\");\n        const y2 = c.i32_add(c.getLocal(\"p2\"), c.i32_const(n8));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        const H = c.i32_const(module.alloc(n8));\n        const HH = c.i32_const(module.alloc(n8));\n        const y2_minus_y1 = c.i32_const(module.alloc(n8));\n        const I = c.i32_const(module.alloc(n8));\n        const J = c.i32_const(module.alloc(n8));\n        const r = c.i32_const(module.alloc(n8));\n        const r2 = c.i32_const(module.alloc(n8));\n        const V = c.i32_const(module.alloc(n8));\n        const V2 = c.i32_const(module.alloc(n8));\n        const y1_J2 = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefix + \"_copyAffine\", c.getLocal(\"p2\"), c.getLocal(\"pr\")),\n                    ...c.call(prefixField + \"_one\", c.i32_add(c.getLocal(\"pr\") , c.i32_const(n8*2))),\n                    ...c.ret([])\n                ]\n            ),\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p2\")),\n                [\n                    ...c.call(prefix + \"_copyAffine\", c.getLocal(\"p1\"), c.getLocal(\"pr\")),\n                    ...c.call(prefixField + \"_one\", c.i32_add(c.getLocal(\"pr\") , c.i32_const(n8*2))),\n                    ...c.ret([])\n                ]\n            ),\n\n\n            c.if(\n                c.call(prefixField + \"_eq\", x1, x2),\n                c.if(\n                    c.call(prefixField + \"_eq\", y1, y2),\n                    [\n                        ...c.call(prefix + \"_doubleAffine\", c.getLocal(\"p2\"), c.getLocal(\"pr\")),\n                        ...c.ret([])\n                    ]\n                )\n            ),\n\n            c.call(prefixField + \"_sub\", x2, x1, H),\n            c.call(prefixField + \"_sub\", y2, y1, y2_minus_y1),\n            c.call(prefixField + \"_square\", H, HH),\n            c.call(prefixField + \"_add\", HH , HH, I),\n            c.call(prefixField + \"_add\", I , I, I),\n            c.call(prefixField + \"_mul\", H, I, J),\n            c.call(prefixField + \"_add\", y2_minus_y1, y2_minus_y1, r),\n            c.call(prefixField + \"_mul\", x1, I, V),\n            c.call(prefixField + \"_square\", r, r2),\n            c.call(prefixField + \"_add\", V, V, V2),\n\n            c.call(prefixField + \"_sub\", r2, J, x3),\n            c.call(prefixField + \"_sub\", x3, V2, x3),\n\n            c.call(prefixField + \"_mul\", y1, J, y1_J2),\n            c.call(prefixField + \"_add\", y1_J2, y1_J2, y1_J2),\n\n            c.call(prefixField + \"_sub\", V, x3, y3),\n            c.call(prefixField + \"_mul\", y3, r, y3),\n            c.call(prefixField + \"_sub\", y3, y1_J2, y3),\n\n            c.call(prefixField + \"_add\", H, H, z3),\n        );\n    }\n\n    function buildNeg() {\n        const f = module.addFunction(prefix + \"_neg\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const z = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        f.addCode(\n            c.call(prefixField + \"_copy\", x, x3),\n            c.call(prefixField + \"_neg\", y, y3),\n            c.call(prefixField + \"_copy\", z, z3)\n        );\n    }\n\n\n    function buildNegAffine() {\n        const f = module.addFunction(prefix + \"_negAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n\n        f.addCode(\n            c.call(prefixField + \"_copy\", x, x3),\n            c.call(prefixField + \"_neg\", y, y3),\n        );\n    }\n\n\n    function buildSub() {\n        const f = module.addFunction(prefix + \"_sub\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8*3));\n\n        f.addCode(\n            c.call(prefix + \"_neg\", c.getLocal(\"p2\"), AUX),\n            c.call(prefix + \"_add\", c.getLocal(\"p1\"), AUX, c.getLocal(\"pr\")),\n        );\n    }\n\n    function buildSubMixed() {\n        const f = module.addFunction(prefix + \"_subMixed\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8*3));\n\n        f.addCode(\n            c.call(prefix + \"_negAffine\", c.getLocal(\"p2\"), AUX),\n            c.call(prefix + \"_addMixed\", c.getLocal(\"p1\"), AUX, c.getLocal(\"pr\")),\n        );\n    }\n\n\n    function buildSubAffine() {\n        const f = module.addFunction(prefix + \"_subAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"p2\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8*3));\n\n        f.addCode(\n            c.call(prefix + \"_negAffine\", c.getLocal(\"p2\"), AUX),\n            c.call(prefix + \"_addAffine\", c.getLocal(\"p1\"), AUX, c.getLocal(\"pr\")),\n        );\n    }\n\n    // This sets Z to One\n    function buildNormalize() {\n        const f = module.addFunction(prefix + \"_normalize\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const z = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n\n        const Z_inv = c.i32_const(module.alloc(n8));\n        const Z2_inv = c.i32_const(module.alloc(n8));\n        const Z3_inv = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                c.call(prefix + \"_zero\", c.getLocal(\"pr\")),\n                [\n                    ...c.call(prefixField + \"_inverse\", z, Z_inv),\n                    ...c.call(prefixField + \"_square\", Z_inv, Z2_inv),\n                    ...c.call(prefixField + \"_mul\", Z_inv, Z2_inv, Z3_inv),\n                    ...c.call(prefixField + \"_mul\", x, Z2_inv, x3),\n                    ...c.call(prefixField + \"_mul\", y, Z3_inv, y3),\n                    ...c.call(prefixField + \"_one\", z3),\n                ]\n            )\n        );\n    }\n\n\n    // Does not set Z.\n    function buildToAffine() {\n        const f = module.addFunction(prefix + \"_toAffine\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const z = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8*2));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n\n\n        const Z_inv = c.i32_const(module.alloc(n8));\n        const Z2_inv = c.i32_const(module.alloc(n8));\n        const Z3_inv = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"p1\")),\n                [\n                    ...c.call(prefixField + \"_zero\", x3),\n                    ...c.call(prefixField + \"_zero\", y3),\n                ],\n                [\n                    ...c.call(prefixField + \"_inverse\", z, Z_inv),\n                    ...c.call(prefixField + \"_square\", Z_inv, Z2_inv),\n                    ...c.call(prefixField + \"_mul\", Z_inv, Z2_inv, Z3_inv),\n                    ...c.call(prefixField + \"_mul\", x, Z2_inv, x3),\n                    ...c.call(prefixField + \"_mul\", y, Z3_inv, y3),\n                ]\n            )\n        );\n    }\n\n\n    function buildToJacobian() {\n        const f = module.addFunction(prefix + \"_toJacobian\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(n8));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"p1\")),\n                c.call(prefix + \"_zero\", c.getLocal(\"pr\")),\n                [\n                    ...c.call(prefixField + \"_one\", z3),\n                    ...c.call(prefixField + \"_copy\", y, y3),\n                    ...c.call(prefixField + \"_copy\", x, x3)\n                ]\n            )\n        );\n    }\n\n    function buildBatchToAffine() {\n        const f = module.addFunction(prefix + \"_batchToAffine\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n        f.addLocal(\"pAux\", \"i32\");\n        f.addLocal(\"itIn\", \"i32\");\n        f.addLocal(\"itAux\", \"i32\");\n        f.addLocal(\"itOut\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const tmp = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.setLocal(\"pAux\", c.i32_load( c.i32_const(0) )),\n            c.i32_store(\n                c.i32_const(0),\n                c.i32_add(\n                    c.getLocal(\"pAux\"),\n                    c.i32_mul(c.getLocal(\"n\"), c.i32_const(n8))\n                )\n            ),\n\n            c.call(\n                prefixField + \"_batchInverse\",\n                c.i32_add(c.getLocal(\"pIn\"), c.i32_const(n8*2)),\n                c.i32_const(n8*3),\n                c.getLocal(\"n\"),\n                c.getLocal(\"pAux\"),\n                c.i32_const(n8)\n            ),\n\n            c.setLocal(\"itIn\", c.getLocal(\"pIn\")),\n            c.setLocal(\"itAux\", c.getLocal(\"pAux\")),\n            c.setLocal(\"itOut\", c.getLocal(\"pOut\")),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n                c.if(\n                    c.call(prefixField + \"_isZero\", c.getLocal(\"itAux\")),\n                    [\n                        ...c.call(prefixField + \"_zero\", c.getLocal(\"itOut\")),\n                        ...c.call(prefixField + \"_zero\", c.i32_add(c.getLocal(\"itOut\"), c.i32_const(n8)))\n                    ],\n                    [\n                        ...c.call(\n                            prefixField+\"_mul\",\n                            c.getLocal(\"itAux\"),\n                            c.i32_add(c.getLocal(\"itIn\"), c.i32_const(n8)),\n                            tmp,\n                        ),\n                        ...c.call(\n                            prefixField+\"_square\",\n                            c.getLocal(\"itAux\"),\n                            c.getLocal(\"itAux\")\n                        ),\n                        ...c.call(\n                            prefixField+\"_mul\",\n                            c.getLocal(\"itAux\"),\n                            c.getLocal(\"itIn\"),\n                            c.getLocal(\"itOut\"),\n                        ),\n                        ...c.call(\n                            prefixField+\"_mul\",\n                            c.getLocal(\"itAux\"),\n                            tmp,\n                            c.i32_add(c.getLocal(\"itOut\"), c.i32_const(n8)),\n                        ),\n                    ]\n                ),\n\n                c.setLocal(\"itIn\", c.i32_add(c.getLocal(\"itIn\"), c.i32_const(n8*3))),\n                c.setLocal(\"itOut\", c.i32_add(c.getLocal(\"itOut\"), c.i32_const(n8*2))),\n                c.setLocal(\"itAux\", c.i32_add(c.getLocal(\"itAux\"), c.i32_const(n8))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n            c.i32_store(\n                c.i32_const(0),\n                c.getLocal(\"pAux\")\n            )\n        );\n    }\n\n\n    // This function is private and does not allow to OVERLAP buffers.\n    function buildReverseBytes() {\n        const f = module.addFunction(prefix + \"__reverseBytes\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n        f.addLocal(\"itOut\", \"i32\");\n        f.addLocal(\"itIn\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\n                \"itOut\",\n                c.i32_sub(\n                    c.i32_add(\n                        c.getLocal(\"pOut\"),\n                        c.getLocal(\"n\")\n                    ),\n                    c.i32_const(1)\n                )\n            ),\n            c.setLocal(\n                \"itIn\",\n                c.getLocal(\"pIn\")\n            ),\n            c.block(c.loop(\n                c.br_if(1, c.i32_lt_s( c.getLocal(\"itOut\"), c.getLocal(\"pOut\") )),\n                c.i32_store8(\n                    c.getLocal(\"itOut\"),\n                    c.i32_load8_u(c.getLocal(\"itIn\")),\n                ),\n                c.setLocal(\"itOut\", c.i32_sub(c.getLocal(\"itOut\"), c.i32_const(1))),\n                c.setLocal(\"itIn\", c.i32_add(c.getLocal(\"itIn\"), c.i32_const(1))),\n                c.br(0)\n            )),\n        );\n\n    }\n\n    function buildLEMtoC() {\n        const f = module.addFunction(prefix + \"_LEMtoC\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const tmp = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZero\", c.getLocal(\"pIn\")),\n                [\n                    ...c.call(prefixField + \"_zero\", c.getLocal(\"pOut\")),\n                    ...c.i32_store8(\n                        c.getLocal(\"pOut\"),\n                        c.i32_const(0x40)\n                    ),\n                    ...c.ret([])\n                ]\n            ),\n            c.call(prefixField + \"_fromMontgomery\", c.getLocal(\"pIn\"), tmp),\n            c.call(prefix + \"__reverseBytes\", tmp, c.i32_const(n8), c.getLocal(\"pOut\")),\n            c.if(\n                c.i32_eq(\n                    c.call(prefixField + \"_sign\", c.i32_add(c.getLocal(\"pIn\"), c.i32_const(n8))),\n                    c.i32_const(-1)\n                ),\n                c.i32_store8(\n                    c.getLocal(\"pOut\"),\n                    c.i32_or(\n                        c.i32_load8_u(c.getLocal(\"pOut\")),\n                        c.i32_const(0x80)\n                    )\n                )\n            ),\n        );\n    }\n\n    function buildLEMtoU() {\n        const f = module.addFunction(prefix + \"_LEMtoU\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const pTmp = module.alloc(n8*2);\n        const tmp = c.i32_const(pTmp);\n        const tmpX = c.i32_const(pTmp);\n        const tmpY = c.i32_const(pTmp + n8);\n\n        f.addCode(\n            c.if(\n                c.call(prefix + \"_isZeroAffine\", c.getLocal(\"pIn\")),\n                [\n                    ...c.call(prefix + \"_zeroAffine\", c.getLocal(\"pOut\")),\n                    ...c.ret([])\n                ]\n            ),\n\n            c.call(prefix + \"_fromMontgomeryAffine\", c.getLocal(\"pIn\"), tmp),\n\n            c.call(prefix + \"__reverseBytes\", tmpX, c.i32_const(n8), c.getLocal(\"pOut\")),\n            c.call(prefix + \"__reverseBytes\", tmpY, c.i32_const(n8), c.i32_add(c.getLocal(\"pOut\"), c.i32_const(n8))),\n        );\n    }\n\n    function buildUtoLEM() {\n        const f = module.addFunction(prefix + \"_UtoLEM\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const pTmp = module.alloc(n8*2);\n        const tmp = c.i32_const(pTmp);\n        const tmpX = c.i32_const(pTmp);\n        const tmpY = c.i32_const(pTmp + n8);\n\n        f.addCode(\n            c.if(\n                c.i32_and(c.i32_load8_u(c.getLocal(\"pIn\")), c.i32_const(0x40)),\n                [\n                    ...c.call(prefix + \"_zeroAffine\", c.getLocal(\"pOut\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.call(prefix + \"__reverseBytes\", c.getLocal(\"pIn\"), c.i32_const(n8), tmpX),\n            c.call(prefix + \"__reverseBytes\", c.i32_add(c.getLocal(\"pIn\"), c.i32_const(n8)), c.i32_const(n8), tmpY),\n            c.call(prefix + \"_toMontgomeryAffine\", tmp,  c.getLocal(\"pOut\"))\n        );\n    }\n\n    function buildCtoLEM() {\n        const f = module.addFunction(prefix + \"_CtoLEM\");\n        f.addParam(\"pIn\", \"i32\");\n        f.addParam(\"pOut\", \"i32\");\n        f.addLocal(\"firstByte\", \"i32\");\n        f.addLocal(\"greatest\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const pTmp = module.alloc(n8*2);\n        const tmpX = c.i32_const(pTmp);\n        const tmpY = c.i32_const(pTmp + n8);\n\n        f.addCode(\n            c.setLocal(\"firstByte\", c.i32_load8_u(c.getLocal(\"pIn\"))),\n            c.if(\n                c.i32_and(\n                    c.getLocal(\"firstByte\"),\n                    c.i32_const(0x40)\n                ),\n                [\n                    ...c.call(prefix + \"_zeroAffine\", c.getLocal(\"pOut\")),\n                    ...c.ret([])\n                ]\n            ),\n            c.setLocal(\n                \"greatest\",\n                c.i32_and(\n                    c.getLocal(\"firstByte\"),\n                    c.i32_const(0x80)\n                )\n            ),\n\n            c.call(prefixField + \"_copy\", c.getLocal(\"pIn\"), tmpY),\n            c.i32_store8(tmpY, c.i32_and(c.getLocal(\"firstByte\"), c.i32_const(0x3F))),\n            c.call(prefix + \"__reverseBytes\", tmpY, c.i32_const(n8), tmpX),\n            c.call(prefixField + \"_toMontgomery\", tmpX, c.getLocal(\"pOut\")),\n\n            c.call(prefixField + \"_square\", c.getLocal(\"pOut\"), tmpY),\n            c.call(prefixField + \"_mul\", c.getLocal(\"pOut\"), tmpY,  tmpY),\n            c.call(prefixField + \"_add\", tmpY, c.i32_const(pB),  tmpY),\n\n            c.call(prefixField + \"_sqrt\", tmpY, tmpY),\n            c.call(prefixField + \"_neg\", tmpY, tmpX),\n\n            c.if(\n                c.i32_eq(\n                    c.call(prefixField + \"_sign\", tmpY),\n                    c.i32_const(-1)\n                ),\n                c.if(\n                    c.getLocal(\"greatest\"),\n                    c.call(prefixField + \"_copy\", tmpY, c.i32_add(c.getLocal(\"pOut\"), c.i32_const(n8))),\n                    c.call(prefixField + \"_neg\", tmpY, c.i32_add(c.getLocal(\"pOut\"), c.i32_const(n8)))\n                ),\n                c.if(\n                    c.getLocal(\"greatest\"),\n                    c.call(prefixField + \"_neg\", tmpY, c.i32_add(c.getLocal(\"pOut\"), c.i32_const(n8))),\n                    c.call(prefixField + \"_copy\", tmpY, c.i32_add(c.getLocal(\"pOut\"), c.i32_const(n8)))\n                ),\n            )\n\n        );\n    }\n\n    function buildInCurveAffine() {\n        const f = module.addFunction(prefix + \"_inCurveAffine\");\n        f.addParam(\"pIn\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"pIn\");\n        const y = c.i32_add(c.getLocal(\"pIn\"), c.i32_const(n8));\n\n        const y2 = c.i32_const(module.alloc(n8));\n        const x3b = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.call(prefixField + \"_square\", y, y2),\n            c.call(prefixField + \"_square\", x, x3b),\n            c.call(prefixField + \"_mul\", x, x3b, x3b),\n            c.call(prefixField + \"_add\", x3b, c.i32_const(pB), x3b),\n\n            c.ret(\n                c.call(prefixField + \"_eq\", y2, x3b)\n            )\n        );\n    }\n\n    function buildInCurve() {\n        const f = module.addFunction(prefix + \"_inCurve\");\n        f.addParam(\"pIn\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux = c.i32_const(module.alloc(n8*2));\n\n        f.addCode(\n            c.call(prefix + \"_toAffine\", c.getLocal(\"pIn\"), aux),\n\n            c.ret(\n                c.call(prefix + \"_inCurveAffine\", aux),\n            )\n        );\n    }\n\n    buildIsZeroAffine();\n    buildIsZero();\n    buildZeroAffine();\n    buildZero();\n    buildCopyAffine();\n    buildCopy();\n    buildToJacobian();\n    buildEqAffine();\n    buildEqMixed();\n    buildEq();\n    buildDoubleAffine();\n    buildDouble();\n    buildAddAffine();\n    buildAddMixed();\n    buildAdd();\n    buildNegAffine();\n    buildNeg();\n    buildSubAffine();\n    buildSubMixed();\n    buildSub();\n    buildFromMontgomeryAffine();\n    buildFromMontgomery();\n    buildToMontgomeryAffine();\n    buildToMontgomery();\n    buildToAffine();\n    buildInCurveAffine();\n    buildInCurve();\n\n    buildBatchToAffine();\n\n    buildNormalize();\n\n\n    buildReverseBytes();\n\n    buildLEMtoU();\n    buildLEMtoC();\n    buildUtoLEM();\n    buildCtoLEM();\n\n    buildBatchConvertion(module, prefix + \"_batchLEMtoU\", prefix + \"_LEMtoU\", n8*2, n8*2);\n    buildBatchConvertion(module, prefix + \"_batchLEMtoC\", prefix + \"_LEMtoC\", n8*2, n8);\n    buildBatchConvertion(module, prefix + \"_batchUtoLEM\", prefix + \"_UtoLEM\", n8*2, n8*2);\n    buildBatchConvertion(module, prefix + \"_batchCtoLEM\", prefix + \"_CtoLEM\", n8, n8*2, true);\n\n    buildBatchConvertion(module, prefix + \"_batchToJacobian\", prefix + \"_toJacobian\", n8*2, n8*3, true);\n\n    buildMultiexp(module, prefix, prefix + \"_multiexp\", prefix + \"_add\", n8*3);\n    buildMultiexp(module, prefix, prefix + \"_multiexpAffine\", prefix + \"_addMixed\", n8*2);\n\n    /*\n    buildTimesScalar(\n        module,\n        prefix + \"_timesScalarOld\",\n        n8*3,\n        prefix + \"_add\",\n        prefix + \"_double\",\n        prefix + \"_copy\",\n        prefix + \"_zero\",\n    );\n    */\n    buildTimesScalarNAF(\n        module,\n        prefix + \"_timesScalar\",\n        n8*3,\n        prefix + \"_add\",\n        prefix + \"_double\",\n        prefix + \"_sub\",\n        prefix + \"_copy\",\n        prefix + \"_zero\"\n    );\n\n    buildTimesScalarNAF(\n        module,\n        prefix + \"_timesScalarAffine\",\n        n8*2,\n        prefix + \"_addMixed\",\n        prefix + \"_double\",\n        prefix + \"_subMixed\",\n        prefix + \"_copyAffine\",\n        prefix + \"_zero\"\n    );\n\n    module.exportFunction(prefix + \"_isZero\");\n    module.exportFunction(prefix + \"_isZeroAffine\");\n\n    module.exportFunction(prefix + \"_eq\");\n    module.exportFunction(prefix + \"_eqMixed\");\n    module.exportFunction(prefix + \"_eqAffine\");\n\n    module.exportFunction(prefix + \"_copy\");\n    module.exportFunction(prefix + \"_copyAffine\");\n\n    module.exportFunction(prefix + \"_zero\");\n    module.exportFunction(prefix + \"_zeroAffine\");\n\n    module.exportFunction(prefix + \"_double\");\n    module.exportFunction(prefix + \"_doubleAffine\");\n\n    module.exportFunction(prefix + \"_add\");\n    module.exportFunction(prefix + \"_addMixed\");\n    module.exportFunction(prefix + \"_addAffine\");\n\n    module.exportFunction(prefix + \"_neg\");\n    module.exportFunction(prefix + \"_negAffine\");\n\n    module.exportFunction(prefix + \"_sub\");\n    module.exportFunction(prefix + \"_subMixed\");\n    module.exportFunction(prefix + \"_subAffine\");\n\n    module.exportFunction(prefix + \"_fromMontgomery\");\n    module.exportFunction(prefix + \"_fromMontgomeryAffine\");\n\n    module.exportFunction(prefix + \"_toMontgomery\");\n    module.exportFunction(prefix + \"_toMontgomeryAffine\");\n\n    module.exportFunction(prefix + \"_timesScalar\");\n    module.exportFunction(prefix + \"_timesScalarAffine\");\n\n    module.exportFunction(prefix + \"_normalize\");\n\n    // Convertion functions\n    module.exportFunction(prefix + \"_LEMtoU\");\n    module.exportFunction(prefix + \"_LEMtoC\");\n    module.exportFunction(prefix + \"_UtoLEM\");\n    module.exportFunction(prefix + \"_CtoLEM\");\n\n    module.exportFunction(prefix + \"_batchLEMtoU\");\n    module.exportFunction(prefix + \"_batchLEMtoC\");\n    module.exportFunction(prefix + \"_batchUtoLEM\");\n    module.exportFunction(prefix + \"_batchCtoLEM\");\n\n    module.exportFunction(prefix + \"_toAffine\");\n    module.exportFunction(prefix + \"_toJacobian\");\n\n    module.exportFunction(prefix + \"_batchToAffine\");\n    module.exportFunction(prefix + \"_batchToJacobian\");\n\n    module.exportFunction(prefix + \"_inCurve\");\n    module.exportFunction(prefix + \"_inCurveAffine\");\n\n    /*\n    buildG1MulScalar(module, zq);\n    module.exportFunction(\"g1MulScalar\");\n    */\n\n    return prefix;\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nconst { isOdd, modInv, modPow } = require(\"./bigint.js\");\nconst utils = require(\"./utils.js\");\n\nmodule.exports = function buildFFT(module, prefix, gPrefix, fPrefix, opGtimesF) {\n\n    const n64f = module.modules[fPrefix].n64;\n    const n8f = n64f*8;\n\n    const n64g = module.modules[gPrefix].n64;\n    const n8g = n64g*8;\n\n    const q = module.modules[fPrefix].q;\n\n    let rem = q - 1n;\n    let maxBits = 0;\n    while (!isOdd(rem)) {\n        maxBits ++;\n        rem = rem >> 1n;\n    }\n\n    let nr = 2n;\n\n    while ( modPow(nr, q >> 1n, q) === 1n ) nr = nr + 1n;\n\n    // console.log(nr);\n\n    const w = new Array(maxBits+1);\n    w[maxBits] = modPow(nr, rem, q);\n\n    let n=maxBits-1;\n    while (n>=0) {\n        w[n] = modPow(w[n+1], 2n, q);\n        n--;\n    }\n\n    const bytes = [];\n    const R = (1n << BigInt(n8f*8)) % q;\n\n    for (let i=0; i<w.length; i++) {\n        const m = w[i] * R % q;\n        bytes.push(...utils.bigInt2BytesLE(m, n8f));\n    }\n\n    const ROOTs = module.alloc(bytes);\n\n    const i2 = new Array(maxBits+1);\n    i2[0] = 1n;\n\n    for (let i=1; i<=maxBits; i++) {\n        i2[i] = i2[i-1] * 2n;\n    }\n\n    const bytesi2 =[];\n    for (let i=0; i<=maxBits; i++) {\n        const m = modInv(i2[i], q) * R % q;\n        bytesi2.push(...utils.bigInt2BytesLE(m, n8f));\n    }\n\n    const INV2 = module.alloc(bytesi2);\n\n    const shift = modPow(nr, 2n, q);\n    const bytesShiftToSmallM =[];\n    const bytesSConst =[];\n    for (let i=0; i<=maxBits; i++) {\n        const shiftToSmallM = modPow(shift, 2n ** BigInt(i), q);\n        const sConst = modInv(q + 1n - shiftToSmallM, q);\n        bytesShiftToSmallM.push(...utils.bigInt2BytesLE(shiftToSmallM * R % q, n8f));\n        bytesSConst.push(...utils.bigInt2BytesLE(sConst * R % q, n8f));\n    }\n\n    const SHIFT_TO_M = module.alloc( bytesShiftToSmallM  );\n    const SCONST = module.alloc( bytesSConst  );\n\n    function rev(x) {\n        let r=0;\n        for (let i=0; i<8; i++) {\n            if (x & (1 << i)) {\n                r = r | (0x80 >> i);\n            }\n        }\n        return r;\n    }\n\n    const rtable = Array(256);\n    for (let i=0; i<256; i++) {\n        rtable[i] = rev(i);\n    }\n\n    const REVTABLE = module.alloc(rtable);\n\n\n    function buildLog2() {\n        const f = module.addFunction(prefix+\"__log2\");\n        f.addParam(\"n\", \"i32\");\n        f.setReturnType(\"i32\");\n        f.addLocal(\"bits\", \"i32\");\n        f.addLocal(\"aux\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\n                \"aux\",\n                c.i32_shr_u(\n                    c.getLocal(\"n\"),\n                    c.i32_const(1)\n                )\n            )\n        );\n        f.addCode(c.setLocal(\"bits\", c.i32_const(0)));\n\n        f.addCode(c.block(c.loop(\n            c.br_if(\n                1,\n                c.i32_eqz(c.getLocal(\"aux\"))\n            ),\n\n            c.setLocal(\n                \"aux\",\n                c.i32_shr_u(\n                    c.getLocal(\"aux\"),\n                    c.i32_const(1)\n                )\n            ),\n\n            c.setLocal(\n                \"bits\",\n                c.i32_add(\n                    c.getLocal(\"bits\"),\n                    c.i32_const(1)\n                )\n            ),\n\n            c.br(0)\n        )));\n\n        f.addCode(c.if(\n            c.i32_ne(\n                c.getLocal(\"n\"),\n                c.i32_shl(\n                    c.i32_const(1),\n                    c.getLocal(\"bits\")\n                )\n            ),\n            c.unreachable()\n        ));\n\n        f.addCode(c.if(\n            c.i32_gt_u(\n                c.getLocal(\"bits\"),\n                c.i32_const(maxBits)\n            ),\n            c.unreachable()\n        ));\n\n        f.addCode(c.getLocal(\"bits\"));\n    }\n\n    function buildFFT() {\n        const f = module.addFunction(prefix+\"_fft\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n\n        f.addLocal(\"bits\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const One = c.i32_const(module.alloc(n8f));\n\n        f.addCode(\n            c.setLocal(\n                \"bits\",\n                c.call(\n                    prefix + \"__log2\",\n                    c.getLocal(\"n\")\n                )\n            ),\n            c.call(fPrefix + \"_one\", One),\n            c.call(\n                prefix+\"_rawfft\",\n                c.getLocal(\"px\"),\n                c.getLocal(\"bits\"),\n                c.i32_const(0),\n                One\n            )\n        );\n\n    }\n\n    function buildIFFT() {\n        const f = module.addFunction(prefix+\"_ifft\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addLocal(\"bits\", \"i32\");\n        f.addLocal(\"pInv2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\n                \"bits\",\n                c.call(\n                    prefix + \"__log2\",\n                    c.getLocal(\"n\")\n                )\n            ),\n            c.setLocal(\n                \"pInv2\",\n                c.i32_add(\n                    c.i32_const(INV2),\n                    c.i32_mul(\n                        c.getLocal(\"bits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n\n            c.call(\n                prefix+\"_rawfft\",\n                c.getLocal(\"px\"),\n                c.getLocal(\"bits\"),\n                c.i32_const(1),\n                c.getLocal(\"pInv2\")\n            ),\n        );\n    }\n\n    function buildRawFFT() {\n        const f = module.addFunction(prefix+\"_rawfft\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"bits\", \"i32\"); // 2 power\n        f.addParam(\"reverse\", \"i32\");\n        f.addParam(\"mulFactor\", \"i32\");\n\n        f.addLocal(\"s\", \"i32\");\n        f.addLocal(\"k\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        f.addLocal(\"m\", \"i32\");\n        f.addLocal(\"mdiv2\", \"i32\");\n        f.addLocal(\"n\", \"i32\");\n        f.addLocal(\"pwm\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const T = c.i32_const(module.alloc(n8g));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.call(prefix + \"__reversePermutation\", c.getLocal(\"px\"), c.getLocal(\"bits\")),\n            c.setLocal(\"n\", c.i32_shl(c.i32_const(1), c.getLocal(\"bits\"))),\n            c.setLocal(\"s\", c.i32_const(1)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_gt_u(\n                        c.getLocal(\"s\"),\n                        c.getLocal(\"bits\")\n                    )\n                ),\n                c.setLocal(\"m\", c.i32_shl(c.i32_const(1), c.getLocal(\"s\"))),\n                c.setLocal(\"pwm\",\n                    c.i32_add(\n                        c.i32_const(ROOTs),\n                        c.i32_mul(\n                            c.getLocal(\"s\"),\n                            c.i32_const(n8f)\n                        )\n                    )\n                ),\n                c.setLocal(\"k\", c.i32_const(0)),\n                c.block(c.loop(\n                    c.br_if(\n                        1,\n                        c.i32_ge_u(\n                            c.getLocal(\"k\"),\n                            c.getLocal(\"n\")\n                        )\n                    ),\n\n                    c.call(fPrefix + \"_one\", W),\n\n                    c.setLocal(\"mdiv2\", c.i32_shr_u(c.getLocal(\"m\"), c.i32_const(1)) ),\n                    c.setLocal(\"j\", c.i32_const(0)),\n                    c.block(c.loop(\n                        c.br_if(\n                            1,\n                            c.i32_ge_u(\n                                c.getLocal(\"j\"),\n                                c.getLocal(\"mdiv2\")\n                            )\n                        ),\n\n                        c.setLocal(\n                            \"idx1\",\n                            c.i32_add(\n                                c.getLocal(\"px\"),\n                                c.i32_mul(\n                                    c.i32_add(\n                                        c.getLocal(\"k\"),\n                                        c.getLocal(\"j\")\n                                    ),\n                                    c.i32_const(n8g)\n                                )\n                            )\n                        ),\n\n                        c.setLocal(\n                            \"idx2\",\n                            c.i32_add(\n                                c.getLocal(\"idx1\"),\n                                c.i32_mul(\n                                    c.getLocal(\"mdiv2\"),\n                                    c.i32_const(n8g)\n                                )\n                            )\n                        ),\n\n                        c.call(\n                            opGtimesF,\n                            c.getLocal(\"idx2\"),\n                            W,\n                            T\n                        ),\n\n                        c.call(\n                            gPrefix + \"_copy\",\n                            c.getLocal(\"idx1\"),\n                            U\n                        ),\n\n                        c.call(\n                            gPrefix + \"_add\",\n                            U,\n                            T,\n                            c.getLocal(\"idx1\"),\n                        ),\n\n                        c.call(\n                            gPrefix + \"_sub\",\n                            U,\n                            T,\n                            c.getLocal(\"idx2\"),\n                        ),\n\n                        c.call(\n                            fPrefix + \"_mul\",\n                            W,\n                            c.getLocal(\"pwm\"),\n                            W,\n                        ),\n\n                        c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                        c.br(0)\n                    )),\n\n                    c.setLocal(\"k\", c.i32_add(c.getLocal(\"k\"), c.getLocal(\"m\"))),\n                    c.br(0)\n                )),\n\n                c.setLocal(\"s\", c.i32_add(c.getLocal(\"s\"), c.i32_const(1))),\n                c.br(0)\n            )),\n            c.call(\n                prefix + \"__fftFinal\",\n                c.getLocal(\"px\"),\n                c.getLocal(\"bits\"),\n                c.getLocal(\"reverse\"),\n                c.getLocal(\"mulFactor\")\n            )\n        );\n    }\n\n\n    function buildFinalInverse() {\n        const f = module.addFunction(prefix+\"__fftFinal\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"bits\", \"i32\");\n        f.addParam(\"reverse\", \"i32\");\n        f.addParam(\"mulFactor\", \"i32\");\n        f.addLocal(\"n\", \"i32\");\n        f.addLocal(\"ndiv2\", \"i32\");\n        f.addLocal(\"pInv2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"mask\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const T = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.if(\n                c.i32_and(\n                    c.i32_eqz(c.getLocal(\"reverse\")),\n                    c.call(fPrefix + \"_isOne\", c.getLocal(\"mulFactor\"))\n                ),\n                c.ret([])\n            ),\n            c.setLocal(\"n\", c.i32_shl( c.i32_const(1), c.getLocal(\"bits\"))),\n\n            c.setLocal(\"mask\", c.i32_sub( c.getLocal(\"n\") , c.i32_const(1))),\n            c.setLocal(\"i\", c.i32_const(1)),\n            c.setLocal(\n                \"ndiv2\",\n                c.i32_shr_u(\n                    c.getLocal(\"n\"),\n                    c.i32_const(1)\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_ge_u(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"ndiv2\")\n                    )\n                ),\n\n                c.setLocal(\"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"px\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"px\"),\n                        c.i32_mul(\n                            c.i32_sub(\n                                c.getLocal(\"n\"),\n                                c.getLocal(\"i\")\n                            ),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.if(\n                    c.getLocal(\"reverse\"),\n                    c.if(\n                        c.call(fPrefix + \"_isOne\", c.getLocal(\"mulFactor\")),\n                        [\n                            ...c.call(gPrefix + \"_copy\", c.getLocal(\"idx1\"), T),\n                            ...c.call(gPrefix + \"_copy\", c.getLocal(\"idx2\") , c.getLocal(\"idx1\") ),\n                            ...c.call(gPrefix + \"_copy\", T , c.getLocal(\"idx2\")),\n                        ],\n                        [\n                            ...c.call(gPrefix + \"_copy\", c.getLocal(\"idx1\"), T),\n                            ...c.call(opGtimesF , c.getLocal(\"idx2\") , c.getLocal(\"mulFactor\"), c.getLocal(\"idx1\") ),\n                            ...c.call(opGtimesF , T , c.getLocal(\"mulFactor\"), c.getLocal(\"idx2\")),\n                        ]\n                    ),\n                    c.if(\n                        c.call(fPrefix + \"_isOne\", c.getLocal(\"mulFactor\")),\n                        [\n                            // Do nothing (It should not be here)\n                        ],\n                        [\n                            ...c.call(opGtimesF , c.getLocal(\"idx1\") , c.getLocal(\"mulFactor\"), c.getLocal(\"idx1\") ),\n                            ...c.call(opGtimesF , c.getLocal(\"idx2\") , c.getLocal(\"mulFactor\"), c.getLocal(\"idx2\")),\n                        ]\n                    )\n                ),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n\n                c.br(0)\n            )),\n\n            c.if(\n                c.call(fPrefix + \"_isOne\", c.getLocal(\"mulFactor\")),\n                [\n                    // Do nothing (It should not be here)\n                ],\n                [\n                    ...c.call(opGtimesF, c.getLocal(\"px\") , c.getLocal(\"mulFactor\"), c.getLocal(\"px\")),\n                    ...c.setLocal(\"idx2\",\n                        c.i32_add(\n                            c.getLocal(\"px\"),\n                            c.i32_mul(\n                                c.getLocal(\"ndiv2\"),\n                                c.i32_const(n8g)\n                            )\n                        )\n                    ),\n                    ...c.call(opGtimesF, c.getLocal(\"idx2\"),c.getLocal(\"mulFactor\"), c.getLocal(\"idx2\"))\n                ]\n            )\n        );\n    }\n\n    function buildReversePermutation() {\n        const f = module.addFunction(prefix+\"__reversePermutation\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"bits\", \"i32\");\n        f.addLocal(\"n\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"ri\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const T = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.setLocal(\"n\", c.i32_shl( c.i32_const(1), c.getLocal(\"bits\"))),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"n\")\n                    )\n                ),\n\n                c.setLocal(\"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"px\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\"ri\", c.call(prefix + \"__rev\", c.getLocal(\"i\"), c.getLocal(\"bits\"))),\n\n                c.setLocal(\"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"px\"),\n                        c.i32_mul(\n                            c.getLocal(\"ri\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.if(\n                    c.i32_lt_u(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"ri\")\n                    ),\n                    [\n                        ...c.call(gPrefix + \"_copy\", c.getLocal(\"idx1\"), T),\n                        ...c.call(gPrefix + \"_copy\", c.getLocal(\"idx2\") , c.getLocal(\"idx1\")),\n                        ...c.call(gPrefix + \"_copy\", T , c.getLocal(\"idx2\"))\n                    ]\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildRev() {\n        const f = module.addFunction(prefix+\"__rev\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"bits\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.i32_rotl(\n                c.i32_add(\n                    c.i32_add(\n                        c.i32_shl(\n                            c.i32_load8_u(\n                                c.i32_and(\n                                    c.getLocal(\"x\"),\n                                    c.i32_const(0xFF)\n                                ),\n                                REVTABLE,\n                                0\n                            ),\n                            c.i32_const(24)\n                        ),\n                        c.i32_shl(\n                            c.i32_load8_u(\n                                c.i32_and(\n                                    c.i32_shr_u(\n                                        c.getLocal(\"x\"),\n                                        c.i32_const(8)\n                                    ),\n                                    c.i32_const(0xFF)\n                                ),\n                                REVTABLE,\n                                0\n                            ),\n                            c.i32_const(16)\n                        ),\n                    ),\n                    c.i32_add(\n                        c.i32_shl(\n                            c.i32_load8_u(\n                                c.i32_and(\n                                    c.i32_shr_u(\n                                        c.getLocal(\"x\"),\n                                        c.i32_const(16)\n                                    ),\n                                    c.i32_const(0xFF)\n                                ),\n                                REVTABLE,\n                                0\n                            ),\n                            c.i32_const(8)\n                        ),\n                        c.i32_load8_u(\n                            c.i32_and(\n                                c.i32_shr_u(\n                                    c.getLocal(\"x\"),\n                                    c.i32_const(24)\n                                ),\n                                c.i32_const(0xFF)\n                            ),\n                            REVTABLE,\n                            0\n                        ),\n                    )\n                ),\n                c.getLocal(\"bits\")\n            )\n        );\n    }\n\n\n    function buildFFTJoin() {\n        const f = module.addFunction(prefix+\"_fftJoin\");\n        f.addParam(\"pBuff1\", \"i32\");\n        f.addParam(\"pBuff2\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"first\", \"i32\");\n        f.addParam(\"inc\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const T = c.i32_const(module.alloc(n8g));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.call( fPrefix + \"_copy\", c.getLocal(\"first\"), W),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"n\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff1\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff2\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    W,\n                    T\n                ),\n\n                c.call(\n                    gPrefix + \"_copy\",\n                    c.getLocal(\"idx1\"),\n                    U\n                ),\n\n                c.call(\n                    gPrefix + \"_add\",\n                    U,\n                    T,\n                    c.getLocal(\"idx1\"),\n                ),\n\n                c.call(\n                    gPrefix + \"_sub\",\n                    U,\n                    T,\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    fPrefix + \"_mul\",\n                    W,\n                    c.getLocal(\"inc\"),\n                    W,\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n\n    function buildFFTJoinExt() {\n        const f = module.addFunction(prefix+\"_fftJoinExt\");\n        f.addParam(\"pBuff1\", \"i32\");\n        f.addParam(\"pBuff2\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"first\", \"i32\");\n        f.addParam(\"inc\", \"i32\");\n        f.addParam(\"totalBits\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"pShiftToM\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n\n            c.setLocal(\"pShiftToM\",\n                c.i32_add(\n                    c.i32_const(SHIFT_TO_M),\n                    c.i32_mul(\n                        c.getLocal(\"totalBits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n\n\n            c.call( fPrefix + \"_copy\", c.getLocal(\"first\"), W),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"n\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff1\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff2\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.call(\n                    gPrefix + \"_add\",\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"idx2\"),\n                    U\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    c.getLocal(\"pShiftToM\"),\n                    c.getLocal(\"idx2\")\n                ),\n\n                c.call(\n                    gPrefix + \"_add\",\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"idx2\"),\n                    c.getLocal(\"idx2\")\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    W,\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    gPrefix + \"_copy\",\n                    U,\n                    c.getLocal(\"idx1\")\n                ),\n\n                c.call(\n                    fPrefix + \"_mul\",\n                    W,\n                    c.getLocal(\"inc\"),\n                    W\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildFFTJoinExtInv() {\n        const f = module.addFunction(prefix+\"_fftJoinExtInv\");\n        f.addParam(\"pBuff1\", \"i32\");\n        f.addParam(\"pBuff2\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"first\", \"i32\");\n        f.addParam(\"inc\", \"i32\");\n        f.addParam(\"totalBits\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"pShiftToM\", \"i32\");\n        f.addLocal(\"pSConst\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n\n            c.setLocal(\"pShiftToM\",\n                c.i32_add(\n                    c.i32_const(SHIFT_TO_M),\n                    c.i32_mul(\n                        c.getLocal(\"totalBits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n            c.setLocal(\"pSConst\",\n                c.i32_add(\n                    c.i32_const(SCONST),\n                    c.i32_mul(\n                        c.getLocal(\"totalBits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n\n\n            c.call( fPrefix + \"_copy\", c.getLocal(\"first\"), W),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"n\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff1\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff2\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    W,\n                    U\n                ),\n\n                c.call(\n                    gPrefix + \"_sub\",\n                    c.getLocal(\"idx1\"),\n                    U,\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    c.getLocal(\"pSConst\"),\n                    c.getLocal(\"idx2\")\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"pShiftToM\"),\n                    c.getLocal(\"idx1\")\n                ),\n\n                c.call(\n                    gPrefix + \"_sub\",\n                    U,\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"idx1\")\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"pSConst\"),\n                    c.getLocal(\"idx1\")\n                ),\n\n                c.call(\n                    fPrefix + \"_mul\",\n                    W,\n                    c.getLocal(\"inc\"),\n                    W\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n\n\n    function buildPrepareLagrangeEvaluation() {\n        const f = module.addFunction(prefix+\"_prepareLagrangeEvaluation\");\n        f.addParam(\"pBuff1\", \"i32\");\n        f.addParam(\"pBuff2\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"first\", \"i32\");\n        f.addParam(\"inc\", \"i32\");\n        f.addParam(\"totalBits\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"pShiftToM\", \"i32\");\n        f.addLocal(\"pSConst\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n\n            c.setLocal(\"pShiftToM\",\n                c.i32_add(\n                    c.i32_const(SHIFT_TO_M),\n                    c.i32_mul(\n                        c.getLocal(\"totalBits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n            c.setLocal(\"pSConst\",\n                c.i32_add(\n                    c.i32_const(SCONST),\n                    c.i32_mul(\n                        c.getLocal(\"totalBits\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n\n\n            c.call( fPrefix + \"_copy\", c.getLocal(\"first\"), W),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"n\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff1\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff2\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"pShiftToM\"),\n                    U\n                ),\n\n                c.call(\n                    gPrefix + \"_sub\",\n                    c.getLocal(\"idx2\"),\n                    U,\n                    U\n                ),\n\n                c.call(\n                    gPrefix + \"_sub\",\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"idx2\"),\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    opGtimesF,\n                    U,\n                    c.getLocal(\"pSConst\"),\n                    c.getLocal(\"idx1\"),\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    W,\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    fPrefix + \"_mul\",\n                    W,\n                    c.getLocal(\"inc\"),\n                    W\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildFFTMix() {\n        const f = module.addFunction(prefix+\"_fftMix\");\n        f.addParam(\"pBuff\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"exp\", \"i32\");\n        f.addLocal(\"nGroups\", \"i32\");\n        f.addLocal(\"nPerGroup\", \"i32\");\n        f.addLocal(\"nPerGroupDiv2\", \"i32\");\n        f.addLocal(\"pairOffset\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        f.addLocal(\"pwm\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const W = c.i32_const(module.alloc(n8f));\n        const T = c.i32_const(module.alloc(n8g));\n        const U = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.setLocal(\"nPerGroup\", c.i32_shl(c.i32_const(1), c.getLocal(\"exp\"))),\n            c.setLocal(\"nPerGroupDiv2\", c.i32_shr_u(c.getLocal(\"nPerGroup\"), c.i32_const(1))),\n            c.setLocal(\"nGroups\", c.i32_shr_u(c.getLocal(\"n\"), c.getLocal(\"exp\"))),\n            c.setLocal(\"pairOffset\", c.i32_mul(c.getLocal(\"nPerGroupDiv2\"), c.i32_const(n8g))),\n            c.setLocal(\"pwm\",\n                c.i32_add(\n                    c.i32_const(ROOTs),\n                    c.i32_mul(\n                        c.getLocal(\"exp\"),\n                        c.i32_const(n8f)\n                    )\n                )\n            ),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"nGroups\")\n                    )\n                ),\n                c.call( fPrefix + \"_one\", W),\n                c.setLocal(\"j\", c.i32_const(0)),\n                c.block(c.loop(\n                    c.br_if(\n                        1,\n                        c.i32_eq(\n                            c.getLocal(\"j\"),\n                            c.getLocal(\"nPerGroupDiv2\")\n                        )\n                    ),\n\n                    c.setLocal(\n                        \"idx1\",\n                        c.i32_add(\n                            c.getLocal(\"pBuff\"),\n                            c.i32_mul(\n                                c.i32_add(\n                                    c.i32_mul(\n                                        c.getLocal(\"i\"),\n                                        c.getLocal(\"nPerGroup\")\n                                    ),\n                                    c.getLocal(\"j\")\n                                ),\n                                c.i32_const(n8g)\n                            )\n                        )\n                    ),\n\n                    c.setLocal(\n                        \"idx2\",\n                        c.i32_add(\n                            c.getLocal(\"idx1\"),\n                            c.getLocal(\"pairOffset\")\n                        )\n                    ),\n\n                    c.call(\n                        opGtimesF,\n                        c.getLocal(\"idx2\"),\n                        W,\n                        T\n                    ),\n\n                    c.call(\n                        gPrefix + \"_copy\",\n                        c.getLocal(\"idx1\"),\n                        U\n                    ),\n\n                    c.call(\n                        gPrefix + \"_add\",\n                        U,\n                        T,\n                        c.getLocal(\"idx1\"),\n                    ),\n\n                    c.call(\n                        gPrefix + \"_sub\",\n                        U,\n                        T,\n                        c.getLocal(\"idx2\"),\n                    ),\n\n                    c.call(\n                        fPrefix + \"_mul\",\n                        W,\n                        c.getLocal(\"pwm\"),\n                        W,\n                    ),\n                    c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                    c.br(0)\n                )),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n\n    // Reverse all and multiply by factor\n    function buildFFTFinal() {\n        const f = module.addFunction(prefix+\"_fftFinal\");\n        f.addParam(\"pBuff\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"factor\", \"i32\");\n        f.addLocal(\"idx1\", \"i32\");\n        f.addLocal(\"idx2\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"ndiv2\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const T = c.i32_const(module.alloc(n8g));\n\n        f.addCode(\n            c.setLocal(\"ndiv2\", c.i32_shr_u(c.getLocal(\"n\"), c.i32_const(1))),\n            c.if(\n                c.i32_and(\n                    c.getLocal(\"n\"),\n                    c.i32_const(1)\n                ),\n                c.call(\n                    opGtimesF,\n                    c.i32_add(\n                        c.getLocal(\"pBuff\"),\n                        c.i32_mul(\n                            c.getLocal(\"ndiv2\"),\n                            c.i32_const(n8g)\n                        )\n                    ),\n                    c.getLocal(\"factor\"),\n                    c.i32_add(\n                        c.getLocal(\"pBuff\"),\n                        c.i32_mul(\n                            c.getLocal(\"ndiv2\"),\n                            c.i32_const(n8g)\n                        )\n                    ),\n                ),\n            ),\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_ge_u(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"ndiv2\")\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx1\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff\"),\n                        c.i32_mul(\n                            c.getLocal(\"i\"),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.setLocal(\n                    \"idx2\",\n                    c.i32_add(\n                        c.getLocal(\"pBuff\"),\n                        c.i32_mul(\n                            c.i32_sub(\n                                c.i32_sub(\n                                    c.getLocal(\"n\"),\n                                    c.i32_const(1)\n                                ),\n                                c.getLocal(\"i\")\n                            ),\n                            c.i32_const(n8g)\n                        )\n                    )\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx2\"),\n                    c.getLocal(\"factor\"),\n                    T\n                ),\n\n                c.call(\n                    opGtimesF,\n                    c.getLocal(\"idx1\"),\n                    c.getLocal(\"factor\"),\n                    c.getLocal(\"idx2\"),\n                ),\n\n                c.call(\n                    gPrefix + \"_copy\",\n                    T,\n                    c.getLocal(\"idx1\"),\n                ),\n\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n    buildRev();\n    buildReversePermutation();\n    buildFinalInverse();\n    buildRawFFT();\n    buildLog2();\n    buildFFT();\n    buildIFFT();\n    buildFFTJoin();\n    buildFFTJoinExt();\n    buildFFTJoinExtInv();\n    buildFFTMix();\n    buildFFTFinal();\n    buildPrepareLagrangeEvaluation();\n\n    module.exportFunction(prefix+\"_fft\");\n    module.exportFunction(prefix+\"_ifft\");\n    module.exportFunction(prefix+\"_rawfft\");\n    module.exportFunction(prefix+\"_fftJoin\");\n    module.exportFunction(prefix+\"_fftJoinExt\");\n    module.exportFunction(prefix+\"_fftJoinExtInv\");\n    module.exportFunction(prefix+\"_fftMix\");\n    module.exportFunction(prefix+\"_fftFinal\");\n    module.exportFunction(prefix+\"_prepareLagrangeEvaluation\");\n\n};\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildPol(module, prefix, prefixField) {\n\n    const n64 = module.modules[prefixField].n64;\n    const n8 = n64*8;\n\n\n    function buildZero() {\n        const f = module.addFunction(prefix+\"_zero\");\n        f.addParam(\"px\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addLocal(\"lastp\", \"i32\");\n        f.addLocal(\"p\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\"p\", c.getLocal(\"px\")),\n            c.setLocal(\n                \"lastp\",\n                c.i32_add(\n                    c.getLocal(\"px\"),\n                    c.i32_mul(\n                        c.getLocal(\"n\"),\n                        c.i32_const(n8)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"p\"),\n                        c.getLocal(\"lastp\")\n                    )\n                ),\n                c.call(prefixField + \"_zero\", c.getLocal(\"p\")),\n                c.setLocal(\"p\", c.i32_add(c.getLocal(\"p\"), c.i32_const(n8))),\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildConstructLC() {\n        const f = module.addFunction(prefix+\"_constructLC\");\n        f.addParam(\"ppolynomials\", \"i32\");\n        f.addParam(\"psignals\", \"i32\");\n        f.addParam(\"nSignals\", \"i32\");\n        f.addParam(\"pres\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n        f.addLocal(\"j\", \"i32\");\n        f.addLocal(\"pp\", \"i32\");\n        f.addLocal(\"ps\", \"i32\");\n        f.addLocal(\"pd\", \"i32\");\n        f.addLocal(\"ncoefs\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.setLocal(\"i\", c.i32_const(0)),\n            c.setLocal(\"pp\", c.getLocal(\"ppolynomials\")),\n            c.setLocal(\"ps\", c.getLocal(\"psignals\")),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"i\"),\n                        c.getLocal(\"nSignals\")\n                    )\n                ),\n\n                c.setLocal(\"ncoefs\", c.i32_load(c.getLocal(\"pp\"))),\n                c.setLocal(\"pp\", c.i32_add(c.getLocal(\"pp\"), c.i32_const(4))),\n\n                c.setLocal(\"j\", c.i32_const(0)),\n                c.block(c.loop(\n                    c.br_if(\n                        1,\n                        c.i32_eq(\n                            c.getLocal(\"j\"),\n                            c.getLocal(\"ncoefs\")\n                        )\n                    ),\n\n                    c.setLocal(\n                        \"pd\",\n                        c.i32_add(\n                            c.getLocal(\"pres\"),\n                            c.i32_mul(\n                                c.i32_load(c.getLocal(\"pp\")),\n                                c.i32_const(n8)\n                            )\n                        )\n                    ),\n\n                    c.setLocal(\"pp\", c.i32_add(c.getLocal(\"pp\"), c.i32_const(4))),\n\n\n                    c.call(\n                        prefixField + \"_mul\",\n                        c.getLocal(\"ps\"),\n                        c.getLocal(\"pp\"),\n                        aux\n                    ),\n\n                    c.call(\n                        prefixField + \"_add\",\n                        aux,\n                        c.getLocal(\"pd\"),\n                        c.getLocal(\"pd\")\n                    ),\n\n                    c.setLocal(\"pp\", c.i32_add(c.getLocal(\"pp\"), c.i32_const(n8))),\n                    c.setLocal(\"j\", c.i32_add(c.getLocal(\"j\"), c.i32_const(1))),\n                    c.br(0)\n                )),\n\n                c.setLocal(\"ps\", c.i32_add(c.getLocal(\"ps\"), c.i32_const(n8))),\n                c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n\n    }\n\n    buildZero();\n    buildConstructLC();\n\n\n    module.exportFunction(prefix + \"_zero\");\n    module.exportFunction(prefix + \"_constructLC\");\n\n    return prefix;\n\n\n\n\n};\n", "\nmodule.exports = function buildQAP(module, prefix, prefixField) {\n\n    const n64 = module.modules[prefixField].n64;\n    const n8 = n64*8;\n\n\n    function buildBuildABC() {\n        const f = module.addFunction(prefix+\"_buildABC\");\n        f.addParam(\"pCoefs\", \"i32\");\n        f.addParam(\"nCoefs\", \"i32\");\n        f.addParam(\"pWitness\", \"i32\");\n        f.addParam(\"pA\", \"i32\");\n        f.addParam(\"pB\", \"i32\");\n        f.addParam(\"pC\", \"i32\");\n        f.addParam(\"offsetOut\", \"i32\");\n        f.addParam(\"nOut\", \"i32\");\n        f.addParam(\"offsetWitness\", \"i32\");\n        f.addParam(\"nWitness\", \"i32\");\n        f.addLocal(\"it\", \"i32\");\n        f.addLocal(\"ita\", \"i32\");\n        f.addLocal(\"itb\", \"i32\");\n        f.addLocal(\"last\", \"i32\");\n        f.addLocal(\"m\", \"i32\");\n        f.addLocal(\"c\", \"i32\");\n        f.addLocal(\"s\", \"i32\");\n        f.addLocal(\"pOut\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n\n            // Set output a and b to 0\n            c.setLocal(\"ita\", c.getLocal(\"pA\")),\n            c.setLocal(\"itb\", c.getLocal(\"pB\")),\n            c.setLocal(\n                \"last\",\n                c.i32_add(\n                    c.getLocal(\"pA\"),\n                    c.i32_mul(\n                        c.getLocal(\"nOut\"),\n                        c.i32_const(n8)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"ita\"),\n                        c.getLocal(\"last\")\n                    )\n                ),\n                c.call(prefixField + \"_zero\", c.getLocal(\"ita\")),\n                c.call(prefixField + \"_zero\", c.getLocal(\"itb\")),\n                c.setLocal(\"ita\", c.i32_add(c.getLocal(\"ita\"), c.i32_const(n8))),\n                c.setLocal(\"itb\", c.i32_add(c.getLocal(\"itb\"), c.i32_const(n8))),\n                c.br(0)\n            )),\n\n\n            c.setLocal(\"it\", c.getLocal(\"pCoefs\")),\n            c.setLocal(\n                \"last\",\n                c.i32_add(\n                    c.getLocal(\"pCoefs\"),\n                    c.i32_mul(\n                        c.getLocal(\"nCoefs\"),\n                        c.i32_const(n8+12)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"it\"),\n                        c.getLocal(\"last\")\n                    )\n                ),\n                c.setLocal(\n                    \"s\",\n                    c.i32_load(c.getLocal(\"it\"), 8)\n                ),\n                c.if(\n                    c.i32_or(\n                        c.i32_lt_u(\n                            c.getLocal(\"s\"),\n                            c.getLocal(\"offsetWitness\"),\n                        ),\n                        c.i32_ge_u(\n                            c.getLocal(\"s\"),\n                            c.i32_add(\n                                c.getLocal(\"offsetWitness\"),\n                                c.getLocal(\"nWitness\"),\n                            )\n                        )\n                    ),\n                    [\n                        ...c.setLocal(\"it\", c.i32_add(c.getLocal(\"it\"), c.i32_const(n8+12))),\n                        ...c.br(1)\n                    ]\n                ),\n\n                c.setLocal(\n                    \"m\",\n                    c.i32_load(c.getLocal(\"it\"))\n                ),\n                c.if(\n                    c.i32_eq(c.getLocal(\"m\"), c.i32_const(0)),\n                    c.setLocal(\"pOut\", c.getLocal(\"pA\")),\n                    c.if(\n                        c.i32_eq(c.getLocal(\"m\"), c.i32_const(1)),\n                        c.setLocal(\"pOut\", c.getLocal(\"pB\")),\n                        [\n                            ...c.setLocal(\"it\", c.i32_add(c.getLocal(\"it\"), c.i32_const(n8+12))),\n                            ...c.br(1)\n                        ]\n                    )\n                ),\n                c.setLocal(\n                    \"c\",\n                    c.i32_load(c.getLocal(\"it\"), 4)\n                ),\n                c.if(\n                    c.i32_or(\n                        c.i32_lt_u(\n                            c.getLocal(\"c\"),\n                            c.getLocal(\"offsetOut\"),\n                        ),\n                        c.i32_ge_u(\n                            c.getLocal(\"c\"),\n                            c.i32_add(\n                                c.getLocal(\"offsetOut\"),\n                                c.getLocal(\"nOut\"),\n                            )\n                        )\n                    ),\n                    [\n                        ...c.setLocal(\"it\", c.i32_add(c.getLocal(\"it\"), c.i32_const(n8+12))),\n                        ...c.br(1)\n                    ]\n                ),\n                c.setLocal(\n                    \"pOut\",\n                    c.i32_add(\n                        c.getLocal(\"pOut\"),\n                        c.i32_mul(\n                            c.i32_sub(\n                                c.getLocal(\"c\"),\n                                c.getLocal(\"offsetOut\")\n                            ),\n                            c.i32_const(n8)\n                        )\n                    )\n                ),\n                c.call(\n                    prefixField + \"_mul\",\n                    c.i32_add(\n                        c.getLocal(\"pWitness\"),\n                        c.i32_mul(\n                            c.i32_sub(c.getLocal(\"s\"), c.getLocal(\"offsetWitness\")),\n                            c.i32_const(n8)\n                        )\n                    ),\n                    c.i32_add( c.getLocal(\"it\"), c.i32_const(12)),\n                    aux\n                ),\n                c.call(\n                    prefixField + \"_add\",\n                    c.getLocal(\"pOut\"),\n                    aux,\n                    c.getLocal(\"pOut\"),\n                ),\n                c.setLocal(\"it\", c.i32_add(c.getLocal(\"it\"), c.i32_const(n8+12))),\n                c.br(0)\n            )),\n\n            c.setLocal(\"ita\", c.getLocal(\"pA\")),\n            c.setLocal(\"itb\", c.getLocal(\"pB\")),\n            c.setLocal(\"it\", c.getLocal(\"pC\")),\n            c.setLocal(\n                \"last\",\n                c.i32_add(\n                    c.getLocal(\"pA\"),\n                    c.i32_mul(\n                        c.getLocal(\"nOut\"),\n                        c.i32_const(n8)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"ita\"),\n                        c.getLocal(\"last\")\n                    )\n                ),\n                c.call(\n                    prefixField + \"_mul\",\n                    c.getLocal(\"ita\"),\n                    c.getLocal(\"itb\"),\n                    c.getLocal(\"it\")\n                ),\n                c.setLocal(\"ita\", c.i32_add(c.getLocal(\"ita\"), c.i32_const(n8))),\n                c.setLocal(\"itb\", c.i32_add(c.getLocal(\"itb\"), c.i32_const(n8))),\n                c.setLocal(\"it\", c.i32_add(c.getLocal(\"it\"), c.i32_const(n8))),\n                c.br(0)\n            )),\n\n        );\n    }\n\n    function buildJoinABC() {\n        const f = module.addFunction(prefix+\"_joinABC\");\n        f.addParam(\"pA\", \"i32\");\n        f.addParam(\"pB\", \"i32\");\n        f.addParam(\"pC\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"pP\", \"i32\");\n        f.addLocal(\"ita\", \"i32\");\n        f.addLocal(\"itb\", \"i32\");\n        f.addLocal(\"itc\", \"i32\");\n        f.addLocal(\"itp\", \"i32\");\n        f.addLocal(\"last\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const aux = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.setLocal(\"ita\", c.getLocal(\"pA\")),\n            c.setLocal(\"itb\", c.getLocal(\"pB\")),\n            c.setLocal(\"itc\", c.getLocal(\"pC\")),\n            c.setLocal(\"itp\", c.getLocal(\"pP\")),\n            c.setLocal(\n                \"last\",\n                c.i32_add(\n                    c.getLocal(\"pA\"),\n                    c.i32_mul(\n                        c.getLocal(\"n\"),\n                        c.i32_const(n8)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"ita\"),\n                        c.getLocal(\"last\")\n                    )\n                ),\n                c.call(\n                    prefixField + \"_mul\",\n                    c.getLocal(\"ita\"),\n                    c.getLocal(\"itb\"),\n                    aux\n                ),\n                c.call(\n                    prefixField + \"_sub\",\n                    aux,\n                    c.getLocal(\"itc\"),\n                    c.getLocal(\"itp\"),\n                ),\n                c.setLocal(\"ita\", c.i32_add(c.getLocal(\"ita\"), c.i32_const(n8))),\n                c.setLocal(\"itb\", c.i32_add(c.getLocal(\"itb\"), c.i32_const(n8))),\n                c.setLocal(\"itc\", c.i32_add(c.getLocal(\"itc\"), c.i32_const(n8))),\n                c.setLocal(\"itp\", c.i32_add(c.getLocal(\"itp\"), c.i32_const(n8))),\n                c.br(0)\n            ))\n        );\n    }\n\n    function buildBatchAdd() {\n        const f = module.addFunction(prefix+\"_batchAdd\");\n        f.addParam(\"pa\", \"i32\");\n        f.addParam(\"pb\", \"i32\");\n        f.addParam(\"n\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n        f.addLocal(\"ita\", \"i32\");\n        f.addLocal(\"itb\", \"i32\");\n        f.addLocal(\"itr\", \"i32\");\n        f.addLocal(\"last\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.setLocal(\"ita\", c.getLocal(\"pa\")),\n            c.setLocal(\"itb\", c.getLocal(\"pb\")),\n            c.setLocal(\"itr\", c.getLocal(\"pr\")),\n            c.setLocal(\n                \"last\",\n                c.i32_add(\n                    c.getLocal(\"pa\"),\n                    c.i32_mul(\n                        c.getLocal(\"n\"),\n                        c.i32_const(n8)\n                    )\n                )\n            ),\n            c.block(c.loop(\n                c.br_if(\n                    1,\n                    c.i32_eq(\n                        c.getLocal(\"ita\"),\n                        c.getLocal(\"last\")\n                    )\n                ),\n                c.call(\n                    prefixField + \"_add\",\n                    c.getLocal(\"ita\"),\n                    c.getLocal(\"itb\"),\n                    c.getLocal(\"itr\"),\n                ),\n                c.setLocal(\"ita\", c.i32_add(c.getLocal(\"ita\"), c.i32_const(n8))),\n                c.setLocal(\"itb\", c.i32_add(c.getLocal(\"itb\"), c.i32_const(n8))),\n                c.setLocal(\"itr\", c.i32_add(c.getLocal(\"itr\"), c.i32_const(n8))),\n                c.br(0)\n            ))\n        );\n    }\n\n    buildBuildABC();\n    buildJoinABC();\n    buildBatchAdd();\n\n    module.exportFunction(prefix + \"_buildABC\");\n    module.exportFunction(prefix + \"_joinABC\");\n    module.exportFunction(prefix + \"_batchAdd\");\n\n    return prefix;\n\n};\n\n", "\n\n/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nmodule.exports = function buildApplyKey(module, fnName, gPrefix, frPrefix, sizeGIn, sizeGOut, sizeF, opGtimesF) {\n\n    const f = module.addFunction(fnName);\n    f.addParam(\"pIn\", \"i32\");\n    f.addParam(\"n\", \"i32\");\n    f.addParam(\"pFirst\", \"i32\");\n    f.addParam(\"pInc\", \"i32\");\n    f.addParam(\"pOut\", \"i32\");\n    f.addLocal(\"pOldFree\", \"i32\");\n    f.addLocal(\"i\", \"i32\");\n    f.addLocal(\"pFrom\", \"i32\");\n    f.addLocal(\"pTo\", \"i32\");\n\n    const c = f.getCodeBuilder();\n\n    const t = c.i32_const(module.alloc(sizeF));\n\n    f.addCode(\n        c.setLocal(\"pFrom\", c.getLocal(\"pIn\")),\n        c.setLocal(\"pTo\", c.getLocal(\"pOut\")),\n    );\n\n    // t = first\n    f.addCode(\n        c.call(\n            frPrefix + \"_copy\",\n            c.getLocal(\"pFirst\"),\n            t\n        )\n    );\n    f.addCode(\n        c.setLocal(\"i\", c.i32_const(0)),\n        c.block(c.loop(\n            c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.getLocal(\"n\") )),\n\n            c.call(\n                opGtimesF,\n                c.getLocal(\"pFrom\"),\n                t,\n                c.getLocal(\"pTo\")\n            ),\n            c.setLocal(\"pFrom\", c.i32_add(c.getLocal(\"pFrom\"), c.i32_const(sizeGIn))),\n            c.setLocal(\"pTo\", c.i32_add(c.getLocal(\"pTo\"), c.i32_const(sizeGOut))),\n\n            // t = t* inc\n            c.call(\n                frPrefix + \"_mul\",\n                t,\n                c.getLocal(\"pInc\"),\n                t\n            ),\n            c.setLocal(\"i\", c.i32_add(c.getLocal(\"i\"), c.i32_const(1))),\n            c.br(0)\n        ))\n    );\n\n    module.exportFunction(fnName);\n\n};\n", "const utils = require(\"../utils\");\n\nconst buildF1m =require(\"../build_f1m.js\");\nconst buildF1 =require(\"../build_f1.js\");\nconst buildF2m =require(\"../build_f2m.js\");\nconst buildF3m =require(\"../build_f3m.js\");\nconst buildCurve =require(\"../build_curve_jacobian_a0.js\");\nconst buildFFT = require(\"../build_fft\");\nconst buildPol = require(\"../build_pol\");\nconst buildQAP = require(\"../build_qap\");\nconst buildApplyKey = require(\"../build_applykey\");\nconst { bitLength, modInv, isOdd, isNegative } = require(\"../bigint.js\");\n\nmodule.exports = function buildBN128(module, _prefix) {\n\n    const prefix = _prefix || \"bn128\";\n\n    if (module.modules[prefix]) return prefix;  // already builded\n\n    const q = 21888242871839275222246405745257275088696311157297823662689037894645226208583n;\n    const r = 21888242871839275222246405745257275088548364400416034343698204186575808495617n;\n\n\n    const n64 = Math.floor((bitLength(q - 1n) - 1)/64) +1;\n    const n8 = n64*8;\n    const frsize = n8;\n    const f1size = n8;\n    const f2size = f1size * 2;\n    const ftsize = f1size * 12;\n\n    const pr = module.alloc(utils.bigInt2BytesLE( r, frsize ));\n\n    const f1mPrefix = buildF1m(module, q, \"f1m\");\n    buildF1(module, r, \"fr\", \"frm\");\n\n    const pG1b = module.alloc(utils.bigInt2BytesLE( toMontgomery(3n), f1size ));\n    const g1mPrefix = buildCurve(module, \"g1m\", \"f1m\", pG1b);\n\n    buildFFT(module, \"frm\", \"frm\", \"frm\", \"frm_mul\");\n\n    buildPol(module, \"pol\", \"frm\");\n    buildQAP(module, \"qap\", \"frm\");\n\n    const f2mPrefix = buildF2m(module, \"f1m_neg\", \"f2m\", \"f1m\");\n    const pG2b = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(19485874751759354771024239261021720505790618469301721065564631296452457478373n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(266929791119991161246907387137283842545076965332900288569378510910307636690n), f1size )\n    ]);\n    const g2mPrefix = buildCurve(module, \"g2m\", \"f2m\", pG2b);\n\n\n    function buildGTimesFr(fnName, opMul) {\n        const f = module.addFunction(fnName);\n        f.addParam(\"pG\", \"i32\");\n        f.addParam(\"pFr\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8));\n\n        f.addCode(\n            c.call(\"frm_fromMontgomery\", c.getLocal(\"pFr\"), AUX),\n            c.call(\n                opMul,\n                c.getLocal(\"pG\"),\n                AUX,\n                c.i32_const(n8),\n                c.getLocal(\"pr\")\n            )\n        );\n\n        module.exportFunction(fnName);\n    }\n    buildGTimesFr(\"g1m_timesFr\", \"g1m_timesScalar\");\n    buildFFT(module, \"g1m\", \"g1m\", \"frm\", \"g1m_timesFr\");\n\n    buildGTimesFr(\"g2m_timesFr\", \"g2m_timesScalar\");\n    buildFFT(module, \"g2m\", \"g2m\", \"frm\", \"g2m_timesFr\");\n\n    buildGTimesFr(\"g1m_timesFrAffine\", \"g1m_timesScalarAffine\");\n    buildGTimesFr(\"g2m_timesFrAffine\", \"g2m_timesScalarAffine\");\n\n    buildApplyKey(module, \"frm_batchApplyKey\", \"fmr\", \"frm\", n8, n8, n8, \"frm_mul\");\n    buildApplyKey(module, \"g1m_batchApplyKey\", \"g1m\", \"frm\", n8*3, n8*3, n8, \"g1m_timesFr\");\n    buildApplyKey(module, \"g1m_batchApplyKeyMixed\", \"g1m\", \"frm\", n8*2, n8*3, n8, \"g1m_timesFrAffine\");\n    buildApplyKey(module, \"g2m_batchApplyKey\", \"g2m\", \"frm\", n8*2*3, n8*3*2, n8, \"g2m_timesFr\");\n    buildApplyKey(module, \"g2m_batchApplyKeyMixed\", \"g2m\", \"frm\", n8*2*2, n8*3*2, n8, \"g2m_timesFrAffine\");\n\n    function toMontgomery(a) {\n        return BigInt(a) * ( 1n << BigInt(f1size*8)) % q;\n    }\n\n    const G1gen = [\n        1n,\n        2n,\n        1n\n    ];\n\n    const pG1gen = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[2]), f1size ),\n        ]\n    );\n\n    const G1zero = [\n        0n,\n        1n,\n        0n\n    ];\n\n    const pG1zero = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[2]), f1size )\n        ]\n    );\n\n    const G2gen = [\n        [\n            10857046999023057135944570762232829481370756359578518086990519993285655852781n,\n            11559732032986387107991004021392285783925812861821192530917403151452391805634n,\n        ],[\n            8495653923123431417604973247489272438418190587263600148770280649306958101930n,\n            4082367875863433681332203403145435568316851327593401208105741076214120093531n,\n        ],[\n            1n,\n            0n,\n        ]\n    ];\n\n    const pG2gen = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[0][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[0][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[1][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[1][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[2][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[2][1]), f1size ),\n        ]\n    );\n\n    const G2zero = [\n        [\n            0n,\n            0n,\n        ],[\n            1n,\n            0n,\n        ],[\n            0n,\n            0n,\n        ]\n    ];\n\n    const pG2zero = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[0][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[0][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[1][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[1][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[2][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[2][1]), f1size ),\n        ]\n    );\n\n    const pOneT = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(1), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0), f1size ),\n    ]);\n\n    const pNonResidueF6 = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(9), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(1), f1size ),\n    ]);\n\n    const pTwoInv = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(  modInv(2n, q)), f1size ),\n        ...utils.bigInt2BytesLE( 0n, f1size )\n    ]);\n\n    const pAltBn128Twist = pNonResidueF6;\n\n    const pTwistCoefB = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(19485874751759354771024239261021720505790618469301721065564631296452457478373n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(266929791119991161246907387137283842545076965332900288569378510910307636690n), f1size ),\n    ]);\n\n    function build_mulNR6() {\n        const f = module.addFunction(prefix + \"_mulNR6\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(\n                f2mPrefix + \"_mul\",\n                c.i32_const(pNonResidueF6),\n                c.getLocal(\"x\"),\n                c.getLocal(\"pr\")\n            )\n        );\n    }\n    build_mulNR6();\n\n    const f6mPrefix = buildF3m(module, prefix+\"_mulNR6\", \"f6m\", \"f2m\");\n\n    function build_mulNR12() {\n        const f = module.addFunction(prefix + \"_mulNR12\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(\n                f2mPrefix + \"_mul\",\n                c.i32_const(pNonResidueF6),\n                c.i32_add(c.getLocal(\"x\"), c.i32_const(n8*4)),\n                c.getLocal(\"pr\")\n            ),\n            c.call(\n                f2mPrefix + \"_copy\",\n                c.getLocal(\"x\"),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*2)),\n            ),\n            c.call(\n                f2mPrefix + \"_copy\",\n                c.i32_add(c.getLocal(\"x\"), c.i32_const(n8*2)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8*4)),\n            )\n        );\n    }\n    build_mulNR12();\n\n    const ftmPrefix = buildF2m(module, prefix+\"_mulNR12\", \"ftm\", f6mPrefix);\n\n\n    const ateLoopCount = 29793968203157093288n;\n    const ateLoopBitBytes = bits(ateLoopCount);\n    const pAteLoopBitBytes = module.alloc(ateLoopBitBytes);\n    const isLoopNegative = false;\n\n    const ateCoefSize = 3 * f2size;\n    const ateNDblCoefs = ateLoopBitBytes.length-1;\n    const ateNAddCoefs = ateLoopBitBytes.reduce((acc, b) =>  acc + ( b!=0 ? 1 : 0)   ,0);\n    const ateNCoefs = ateNAddCoefs + ateNDblCoefs + 1;\n    const prePSize = 3*2*n8;\n    const preQSize = 3*n8*2 + ateNCoefs*ateCoefSize;\n    const finalExpIsNegative = false;\n\n\n    module.modules[prefix] = {\n        n64: n64,\n        pG1gen: pG1gen,\n        pG1zero: pG1zero,\n        pG1b: pG1b,\n        pG2gen: pG2gen,\n        pG2zero: pG2zero,\n        pG2b: pG2b,\n        pq: module.modules[\"f1m\"].pq,\n        pr: pr,\n        pOneT: pOneT,\n        prePSize: prePSize,\n        preQSize: preQSize,\n        r: r.toString(),\n        q: q.toString()\n    };\n\n    // console.log(\"PrePSize: \" +prePSize);\n    // console.log(\"PreQSize: \" +preQSize);\n\n    const finalExpZ = 4965661367192848881n;\n\n    function naf(n) {\n        let E = n;\n        const res = [];\n        while (E > 0n) {\n            if (isOdd(E)) {\n                const z = 2 - Number(E % 4n);\n                res.push( z );\n                E = E - BigInt(z);\n            } else {\n                res.push( 0 );\n            }\n            E = E >> 1n;\n        }\n        return res;\n    }\n\n    function bits(n) {\n        let E = n;\n        const res = [];\n        while (E > 0n) {\n            if (isOdd(E)) {\n                res.push( 1 );\n            } else {\n                res.push( 0 );\n            }\n            E = E >> 1n;\n        }\n        return res;\n    }\n\n    function buildPrepareG1() {\n        const f = module.addFunction(prefix+ \"_prepareG1\");\n        f.addParam(\"pP\", \"i32\");\n        f.addParam(\"ppreP\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(g1mPrefix + \"_normalize\", c.getLocal(\"pP\"), c.getLocal(\"ppreP\")),  // TODO Remove if already in affine\n        );\n    }\n\n    function buildPrepAddStep() {\n        const f = module.addFunction(prefix+ \"_prepAddStep\");\n        f.addParam(\"pQ\", \"i32\");\n        f.addParam(\"pR\", \"i32\");\n        f.addParam(\"pCoef\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const X2  = c.getLocal(\"pQ\");\n        const Y2  = c.i32_add(c.getLocal(\"pQ\"), c.i32_const(f2size));\n\n        const X1  = c.getLocal(\"pR\");\n        const Y1  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f2size));\n        const Z1  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(2*f2size));\n\n        const ELL_0  = c.getLocal(\"pCoef\");\n        const ELL_VW = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(f2size));\n        const ELL_VV  = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(2*f2size));\n\n        const D = ELL_VW;\n        const E = c.i32_const(module.alloc(f2size));\n        const F = c.i32_const(module.alloc(f2size));\n        const G = c.i32_const(module.alloc(f2size));\n        const H = c.i32_const(module.alloc(f2size));\n        const I = c.i32_const(module.alloc(f2size));\n        const J = c.i32_const(module.alloc(f2size));\n        const AUX = c.i32_const(module.alloc(f2size));\n\n        f.addCode(\n            // D = X1 - X2*Z1\n            c.call(f2mPrefix + \"_mul\", X2, Z1, D),\n            c.call(f2mPrefix + \"_sub\", X1, D, D),\n\n            // E = Y1 - Y2*Z1\n            c.call(f2mPrefix + \"_mul\", Y2, Z1, E),\n            c.call(f2mPrefix + \"_sub\", Y1, E, E),\n\n            // F = D^2\n            c.call(f2mPrefix + \"_square\", D, F),\n\n            // G = E^2\n            c.call(f2mPrefix + \"_square\", E, G),\n\n            // H = D*F\n            c.call(f2mPrefix + \"_mul\", D, F, H),\n\n            // I = X1 * F\n            c.call(f2mPrefix + \"_mul\", X1, F, I),\n\n            // J = H + Z1*G - (I+I)\n            c.call(f2mPrefix + \"_add\", I, I, AUX),\n            c.call(f2mPrefix + \"_mul\", Z1, G, J),\n            c.call(f2mPrefix + \"_add\", H, J, J),\n            c.call(f2mPrefix + \"_sub\", J, AUX, J),\n\n\n            // X3 (X1) = D*J\n            c.call(f2mPrefix + \"_mul\", D, J, X1),\n\n            // Y3 (Y1) = E*(I-J)-(H*Y1)\n            c.call(f2mPrefix + \"_mul\", H, Y1, Y1),\n            c.call(f2mPrefix + \"_sub\", I, J, AUX),\n            c.call(f2mPrefix + \"_mul\", E, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", AUX, Y1, Y1),\n\n            // Z3 (Z1) = Z1*H\n            c.call(f2mPrefix + \"_mul\", Z1, H, Z1),\n\n            // ell_0 = xi * (E * X2 - D * Y2)\n            c.call(f2mPrefix + \"_mul\", D, Y2, AUX),\n            c.call(f2mPrefix + \"_mul\", E, X2, ELL_0),\n            c.call(f2mPrefix + \"_sub\", ELL_0, AUX, ELL_0),\n            c.call(f2mPrefix + \"_mul\", ELL_0, c.i32_const(pAltBn128Twist), ELL_0),\n\n\n            // ell_VV = - E (later: * xP)\n            c.call(f2mPrefix + \"_neg\", E, ELL_VV),\n\n            // ell_VW = D (later: * yP    )\n            // Already assigned\n\n        );\n    }\n\n\n\n    function buildPrepDoubleStep() {\n        const f = module.addFunction(prefix+ \"_prepDblStep\");\n        f.addParam(\"pR\", \"i32\");\n        f.addParam(\"pCoef\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const X1  = c.getLocal(\"pR\");\n        const Y1  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f2size));\n        const Z1  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(2*f2size));\n\n        const ELL_0  = c.getLocal(\"pCoef\");\n        const ELL_VW = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(f2size));\n        const ELL_VV  = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(2*f2size));\n\n        const A = c.i32_const(module.alloc(f2size));\n        const B = c.i32_const(module.alloc(f2size));\n        const C = c.i32_const(module.alloc(f2size));\n        const D = c.i32_const(module.alloc(f2size));\n        const E = c.i32_const(module.alloc(f2size));\n        const F = c.i32_const(module.alloc(f2size));\n        const G = c.i32_const(module.alloc(f2size));\n        const H = c.i32_const(module.alloc(f2size));\n        const I = c.i32_const(module.alloc(f2size));\n        const J = c.i32_const(module.alloc(f2size));\n        const E2 = c.i32_const(module.alloc(f2size));\n        const AUX = c.i32_const(module.alloc(f2size));\n\n        f.addCode(\n\n            // A = X1 * Y1 / 2\n            c.call(f2mPrefix + \"_mul\", Y1, c.i32_const(pTwoInv), A),\n            c.call(f2mPrefix + \"_mul\", X1, A, A),\n\n            // B = Y1^2\n            c.call(f2mPrefix + \"_square\", Y1, B),\n\n            // C = Z1^2\n            c.call(f2mPrefix + \"_square\", Z1, C),\n\n            // D = 3 * C\n            c.call(f2mPrefix + \"_add\", C, C, D),\n            c.call(f2mPrefix + \"_add\", D, C, D),\n\n            // E = twist_b * D\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pTwistCoefB), D, E),\n\n            // F = 3 * E\n            c.call(f2mPrefix + \"_add\", E, E, F),\n            c.call(f2mPrefix + \"_add\", E, F, F),\n\n            // G = (B+F)/2\n            c.call(f2mPrefix + \"_add\", B, F, G),\n            c.call(f2mPrefix + \"_mul\", G, c.i32_const(pTwoInv), G),\n\n            // H = (Y1+Z1)^2-(B+C)\n            c.call(f2mPrefix + \"_add\", B, C, AUX),\n            c.call(f2mPrefix + \"_add\", Y1, Z1, H),\n            c.call(f2mPrefix + \"_square\", H, H),\n            c.call(f2mPrefix + \"_sub\", H, AUX, H),\n\n            // I = E-B\n            c.call(f2mPrefix + \"_sub\", E, B, I),\n\n            // J = X1^2\n            c.call(f2mPrefix + \"_square\", X1, J),\n\n            // E_squared = E^2\n            c.call(f2mPrefix + \"_square\", E, E2),\n\n            // X3 (X1) = A * (B-F)\n            c.call(f2mPrefix + \"_sub\", B, F, AUX),\n            c.call(f2mPrefix + \"_mul\", A, AUX, X1),\n\n            // Y3 (Y1) = G^2 - 3*E^2\n            c.call(f2mPrefix + \"_add\", E2, E2, AUX),\n            c.call(f2mPrefix + \"_add\", E2, AUX, AUX),\n            c.call(f2mPrefix + \"_square\", G, Y1),\n            c.call(f2mPrefix + \"_sub\", Y1, AUX, Y1),\n\n            // Z3 (Z1) = B * H\n            c.call(f2mPrefix + \"_mul\", B, H, Z1),\n\n            // ell_0 = xi * I\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pAltBn128Twist), I, ELL_0),\n\n            // ell_VW = - H (later: * yP)\n            c.call(f2mPrefix + \"_neg\", H, ELL_VW),\n\n            // ell_VV = 3*J (later: * xP)\n            c.call(f2mPrefix + \"_add\", J, J, ELL_VV),\n            c.call(f2mPrefix + \"_add\", J, ELL_VV, ELL_VV),\n\n        );\n    }\n\n    function buildMulByQ() {\n        const f = module.addFunction(prefix + \"_mulByQ\");\n        f.addParam(\"p1\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"p1\");\n        const y = c.i32_add(c.getLocal(\"p1\"), c.i32_const(f2size));\n        const z = c.i32_add(c.getLocal(\"p1\"), c.i32_const(f2size*2));\n        const x3 = c.getLocal(\"pr\");\n        const y3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(f2size));\n        const z3 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(f2size*2));\n\n        const MulByQX = c.i32_const(module.alloc([\n            ...utils.bigInt2BytesLE( toMontgomery(\"21575463638280843010398324269430826099269044274347216827212613867836435027261\"), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(\"10307601595873709700152284273816112264069230130616436755625194854815875713954\"), f1size ),\n        ]));\n\n        const MulByQY = c.i32_const(module.alloc([\n            ...utils.bigInt2BytesLE( toMontgomery(\"2821565182194536844548159561693502659359617185244120367078079554186484126554\"), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(\"3505843767911556378687030309984248845540243509899259641013678093033130930403\"), f1size ),\n        ]));\n\n        f.addCode(\n            // The frobeniusMap(1) in this field, is the conjugate\n            c.call(f2mPrefix + \"_conjugate\", x, x3),\n            c.call(f2mPrefix + \"_mul\", MulByQX, x3, x3),\n            c.call(f2mPrefix + \"_conjugate\", y, y3),\n            c.call(f2mPrefix + \"_mul\", MulByQY, y3, y3),\n            c.call(f2mPrefix + \"_conjugate\", z, z3),\n        );\n    }\n\n\n    function buildPrepareG2() {\n        buildMulByQ();\n        const f = module.addFunction(prefix+ \"_prepareG2\");\n        f.addParam(\"pQ\", \"i32\");\n        f.addParam(\"ppreQ\", \"i32\");\n        f.addLocal(\"pCoef\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const QX = c.getLocal(\"pQ\");\n\n        const pR = module.alloc(f2size*3);\n        const R = c.i32_const(pR);\n        const RX = c.i32_const(pR);\n        const RY = c.i32_const(pR+f2size);\n        const RZ = c.i32_const(pR+2*f2size);\n\n        const cQX = c.i32_add( c.getLocal(\"ppreQ\"), c.i32_const(0));\n        const cQY = c.i32_add( c.getLocal(\"ppreQ\"), c.i32_const(f2size));\n\n        const pQ1 = module.alloc(f2size*3);\n        const Q1 = c.i32_const(pQ1);\n\n        const pQ2 = module.alloc(f2size*3);\n        const Q2 = c.i32_const(pQ2);\n        const Q2Y = c.i32_const(pQ2 + f2size);\n\n        f.addCode(\n            c.call(g2mPrefix + \"_normalize\", QX, cQX),  // TODO Remove if already in affine\n            c.call(f2mPrefix + \"_copy\", cQX, RX),\n            c.call(f2mPrefix + \"_copy\", cQY, RY),\n            c.call(f2mPrefix + \"_one\", RZ),\n        );\n\n        f.addCode(\n            c.setLocal(\"pCoef\", c.i32_add( c.getLocal(\"ppreQ\"), c.i32_const(f2size*3))),\n            c.setLocal(\"i\", c.i32_const(ateLoopBitBytes.length-2)),\n            c.block(c.loop(\n\n                c.call(prefix + \"_prepDblStep\", R, c.getLocal(\"pCoef\")),\n                c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n                c.if(\n                    c.i32_load8_s(c.getLocal(\"i\"), pAteLoopBitBytes),\n                    [\n                        ...c.call(prefix + \"_prepAddStep\", cQX, R, c.getLocal(\"pCoef\")),\n                        ...c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n                    ]\n                ),\n                c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n\n        f.addCode(\n            c.call(prefix + \"_mulByQ\", cQX, Q1),\n            c.call(prefix + \"_mulByQ\", Q1, Q2)\n        );\n\n        if (isLoopNegative) {\n            f.addCode(\n                c.call(f2mPrefix + \"_neg\", RY, RY),\n            );\n        }\n\n        f.addCode(\n            c.call(f2mPrefix + \"_neg\", Q2Y, Q2Y),\n\n            c.call(prefix + \"_prepAddStep\", Q1, R, c.getLocal(\"pCoef\")),\n            c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n            c.call(prefix + \"_prepAddStep\", Q2, R, c.getLocal(\"pCoef\")),\n            c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n        );\n    }\n\n    function buildMulBy024Old() {\n        const f = module.addFunction(prefix+ \"__mulBy024Old\");\n        f.addParam(\"pEll0\", \"i32\");\n        f.addParam(\"pEllVW\", \"i32\");\n        f.addParam(\"pEllVV\", \"i32\");\n        f.addParam(\"pR\", \"i32\");            // Result in F12\n\n        const c = f.getCodeBuilder();\n\n        const x0  = c.getLocal(\"pEll0\");\n        const x2  = c.getLocal(\"pEllVV\");\n        const x4  = c.getLocal(\"pEllVW\");\n\n        const z0  = c.getLocal(\"pR\");\n\n        const pAUX12 = module.alloc(ftsize);\n        const AUX12 = c.i32_const(pAUX12);\n        const AUX12_0 = c.i32_const(pAUX12);\n        const AUX12_2 = c.i32_const(pAUX12+f2size);\n        const AUX12_4 = c.i32_const(pAUX12+f2size*2);\n        const AUX12_6 = c.i32_const(pAUX12+f2size*3);\n        const AUX12_8 = c.i32_const(pAUX12+f2size*4);\n        const AUX12_10 = c.i32_const(pAUX12+f2size*5);\n\n        f.addCode(\n\n            c.call(f2mPrefix + \"_copy\", x0, AUX12_0),\n            c.call(f2mPrefix + \"_zero\", AUX12_2),\n            c.call(f2mPrefix + \"_copy\", x2, AUX12_4),\n            c.call(f2mPrefix + \"_zero\", AUX12_6),\n            c.call(f2mPrefix + \"_copy\", x4, AUX12_8),\n            c.call(f2mPrefix + \"_zero\", AUX12_10),\n            c.call(ftmPrefix + \"_mul\", AUX12, z0, z0),\n        );\n    }\n\n    function buildMulBy024() {\n        const f = module.addFunction(prefix+ \"__mulBy024\");\n        f.addParam(\"pEll0\", \"i32\");\n        f.addParam(\"pEllVW\", \"i32\");\n        f.addParam(\"pEllVV\", \"i32\");\n        f.addParam(\"pR\", \"i32\");            // Result in F12\n\n        const c = f.getCodeBuilder();\n\n        const x0  = c.getLocal(\"pEll0\");\n        const x2  = c.getLocal(\"pEllVV\");\n        const x4  = c.getLocal(\"pEllVW\");\n\n        const z0  = c.getLocal(\"pR\");\n        const z1  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(2*n8));\n        const z2  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(4*n8));\n        const z3  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(6*n8));\n        const z4  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(8*n8));\n        const z5  = c.i32_add(c.getLocal(\"pR\"), c.i32_const(10*n8));\n\n        const t0 = c.i32_const(module.alloc(f2size));\n        const t1 = c.i32_const(module.alloc(f2size));\n        const t2 = c.i32_const(module.alloc(f2size));\n        const s0 = c.i32_const(module.alloc(f2size));\n        const T3 = c.i32_const(module.alloc(f2size));\n        const T4 = c.i32_const(module.alloc(f2size));\n        const D0 = c.i32_const(module.alloc(f2size));\n        const D2 = c.i32_const(module.alloc(f2size));\n        const D4 = c.i32_const(module.alloc(f2size));\n        const S1 = c.i32_const(module.alloc(f2size));\n        const AUX = c.i32_const(module.alloc(f2size));\n\n        f.addCode(\n\n            // D0 = z0 * x0;\n            c.call(f2mPrefix + \"_mul\", z0, x0, D0),\n            // D2 = z2 * x2;\n            c.call(f2mPrefix + \"_mul\", z2, x2, D2),\n            // D4 = z4 * x4;\n            c.call(f2mPrefix + \"_mul\", z4, x4, D4),\n            // t2 = z0 + z4;\n            c.call(f2mPrefix + \"_add\", z0, z4, t2),\n            // t1 = z0 + z2;\n            c.call(f2mPrefix + \"_add\", z0, z2, t1),\n            // s0 = z1 + z3 + z5;\n            c.call(f2mPrefix + \"_add\", z1, z3, s0),\n            c.call(f2mPrefix + \"_add\", s0, z5, s0),\n\n\n            // For z.a_.a_ = z0.\n            // S1 = z1 * x2;\n            c.call(f2mPrefix + \"_mul\", z1, x2, S1),\n            // T3 = S1 + D4;\n            c.call(f2mPrefix + \"_add\", S1, D4, T3),\n            // T4 = my_Fp6::non_residue * T3 + D0;\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), T3, T4),\n            c.call(f2mPrefix + \"_add\", T4, D0, z0),\n            // z0 = T4;\n\n            // For z.a_.b_ = z1\n            // T3 = z5 * x4;\n            c.call(f2mPrefix + \"_mul\", z5, x4, T3),\n            // S1 = S1 + T3;\n            c.call(f2mPrefix + \"_add\", S1, T3, S1),\n            // T3 = T3 + D2;\n            c.call(f2mPrefix + \"_add\", T3, D2, T3),\n            // T4 = my_Fp6::non_residue * T3;\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), T3, T4),\n            // T3 = z1 * x0;\n            c.call(f2mPrefix + \"_mul\", z1, x0, T3),\n            // S1 = S1 + T3;\n            c.call(f2mPrefix + \"_add\", S1, T3, S1),\n            // T4 = T4 + T3;\n            c.call(f2mPrefix + \"_add\", T4, T3, z1),\n            // z1 = T4;\n\n\n\n            // For z.a_.c_ = z2\n            // t0 = x0 + x2;\n            c.call(f2mPrefix + \"_add\", x0, x2, t0),\n            // T3 = t1 * t0 - D0 - D2;\n            c.call(f2mPrefix + \"_mul\", t1, t0, T3),\n            c.call(f2mPrefix + \"_add\", D0, D2, AUX),\n            c.call(f2mPrefix + \"_sub\", T3, AUX, T3),\n            // T4 = z3 * x4;\n            c.call(f2mPrefix + \"_mul\", z3, x4, T4),\n            // S1 = S1 + T4;\n            c.call(f2mPrefix + \"_add\", S1, T4, S1),\n\n\n            // For z.b_.a_ = z3 (z3 needs z2)\n            // t0 = z2 + z4;\n            c.call(f2mPrefix + \"_add\", z2, z4, t0),\n            // T3 = T3 + T4;\n            // z2 = T3;\n            c.call(f2mPrefix + \"_add\", T3, T4, z2),\n            // t1 = x2 + x4;\n            c.call(f2mPrefix + \"_add\", x2, x4, t1),\n            // T3 = t0 * t1 - D2 - D4;\n            c.call(f2mPrefix + \"_mul\", t1, t0, T3),\n            c.call(f2mPrefix + \"_add\", D2, D4, AUX),\n            c.call(f2mPrefix + \"_sub\", T3, AUX, T3),\n            // T4 = my_Fp6::non_residue * T3;\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), T3, T4),\n            // T3 = z3 * x0;\n            c.call(f2mPrefix + \"_mul\", z3, x0, T3),\n            // S1 = S1 + T3;\n            c.call(f2mPrefix + \"_add\", S1, T3, S1),\n            // T4 = T4 + T3;\n            c.call(f2mPrefix + \"_add\", T4, T3, z3),\n            // z3 = T4;\n\n            // For z.b_.b_ = z4\n            // T3 = z5 * x2;\n            c.call(f2mPrefix + \"_mul\", z5, x2, T3),\n            // S1 = S1 + T3;\n            c.call(f2mPrefix + \"_add\", S1, T3, S1),\n            // T4 = my_Fp6::non_residue * T3;\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), T3, T4),\n            // t0 = x0 + x4;\n            c.call(f2mPrefix + \"_add\", x0, x4, t0),\n            // T3 = t2 * t0 - D0 - D4;\n            c.call(f2mPrefix + \"_mul\", t2, t0, T3),\n            c.call(f2mPrefix + \"_add\", D0, D4, AUX),\n            c.call(f2mPrefix + \"_sub\", T3, AUX, T3),\n            // T4 = T4 + T3;\n            c.call(f2mPrefix + \"_add\", T4, T3, z4),\n            // z4 = T4;\n\n            // For z.b_.c_ = z5.\n            // t0 = x0 + x2 + x4;\n            c.call(f2mPrefix + \"_add\", x0, x2, t0),\n            c.call(f2mPrefix + \"_add\", t0, x4, t0),\n            // T3 = s0 * t0 - S1;\n            c.call(f2mPrefix + \"_mul\", s0, t0, T3),\n            c.call(f2mPrefix + \"_sub\", T3, S1, z5),\n            // z5 = T3;\n\n        );\n    }\n\n\n    function buildMillerLoop() {\n        const f = module.addFunction(prefix+ \"_millerLoop\");\n        f.addParam(\"ppreP\", \"i32\");\n        f.addParam(\"ppreQ\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"pCoef\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const preP_PX = c.getLocal(\"ppreP\");\n        const preP_PY = c.i32_add(c.getLocal(\"ppreP\"), c.i32_const(f1size));\n\n        const ELL_0  = c.getLocal(\"pCoef\");\n        const ELL_VW = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(f2size));\n        const ELL_VV  = c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(2*f2size));\n\n\n        const pVW = module.alloc(f2size);\n        const VW = c.i32_const(pVW);\n        const pVV = module.alloc(f2size);\n        const VV = c.i32_const(pVV);\n\n        const F = c.getLocal(\"r\");\n\n\n        f.addCode(\n            c.call(ftmPrefix + \"_one\", F),\n\n            c.setLocal(\"pCoef\", c.i32_add( c.getLocal(\"ppreQ\"), c.i32_const(f2size*3))),\n\n            c.setLocal(\"i\", c.i32_const(ateLoopBitBytes.length-2)),\n            c.block(c.loop(\n\n\n                c.call(ftmPrefix + \"_square\", F, F),\n\n                c.call(f2mPrefix + \"_mul1\", ELL_VW,preP_PY, VW),\n                c.call(f2mPrefix + \"_mul1\", ELL_VV, preP_PX, VV),\n                c.call(prefix + \"__mulBy024\", ELL_0, VW, VV, F),\n                c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n                c.if(\n                    c.i32_load8_s(c.getLocal(\"i\"), pAteLoopBitBytes),\n                    [\n                        ...c.call(f2mPrefix + \"_mul1\", ELL_VW, preP_PY, VW),\n                        ...c.call(f2mPrefix + \"_mul1\", ELL_VV, preP_PX, VV),\n\n                        ...c.call(prefix + \"__mulBy024\", ELL_0, VW, VV, F),\n                        ...c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n                    ]\n                ),\n                c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n\n        );\n\n        if (isLoopNegative) {\n            f.addCode(\n                c.call(ftmPrefix + \"_inverse\", F, F),\n            );\n        }\n\n        f.addCode(\n            c.call(f2mPrefix + \"_mul1\", ELL_VW, preP_PY, VW),\n            c.call(f2mPrefix + \"_mul1\", ELL_VV, preP_PX, VV),\n            c.call(prefix + \"__mulBy024\", ELL_0, VW, VV, F),\n            c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n            c.call(f2mPrefix + \"_mul1\", ELL_VW, preP_PY, VW),\n            c.call(f2mPrefix + \"_mul1\", ELL_VV, preP_PX, VV),\n            c.call(prefix + \"__mulBy024\", ELL_0, VW, VV, F),\n            c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n        );\n\n    }\n\n\n    function buildFrobeniusMap(n) {\n        const F12 = [\n            [\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n            ],\n            [\n                [1n, 0n],\n                [8376118865763821496583973867626364092589906065868298776909617916018768340080n, 16469823323077808223889137241176536799009286646108169935659301613961712198316n],\n                [21888242871839275220042445260109153167277707414472061641714758635765020556617n, 0n],\n                [11697423496358154304825782922584725312912383441159505038794027105778954184319n, 303847389135065887422783454877609941456349188919719272345083954437860409601n],\n                [21888242871839275220042445260109153167277707414472061641714758635765020556616n, 0n],\n                [3321304630594332808241809054958361220322477375291206261884409189760185844239n, 5722266937896532885780051958958348231143373700109372999374820235121374419868n],\n                [21888242871839275222246405745257275088696311157297823662689037894645226208582n, 0n],\n                [13512124006075453725662431877630910996106405091429524885779419978626457868503n, 5418419548761466998357268504080738289687024511189653727029736280683514010267n],\n                [2203960485148121921418603742825762020974279258880205651966n, 0n],\n                [10190819375481120917420622822672549775783927716138318623895010788866272024264n, 21584395482704209334823622290379665147239961968378104390343953940207365798982n],\n                [2203960485148121921418603742825762020974279258880205651967n, 0n],\n                [18566938241244942414004596690298913868373833782006617400804628704885040364344n, 16165975933942742336466353786298926857552937457188450663314217659523851788715n],\n            ]\n        ];\n\n        const F6 = [\n            [\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n            ],\n            [\n                [1n, 0n],\n                [21575463638280843010398324269430826099269044274347216827212613867836435027261n, 10307601595873709700152284273816112264069230130616436755625194854815875713954n],\n                [21888242871839275220042445260109153167277707414472061641714758635765020556616n, 0n],\n                [3772000881919853776433695186713858239009073593817195771773381919316419345261n, 2236595495967245188281701248203181795121068902605861227855261137820944008926n],\n                [2203960485148121921418603742825762020974279258880205651966n, 0n],\n                [18429021223477853657660792034369865839114504446431234726392080002137598044644n, 9344045779998320333812420223237981029506012124075525679208581902008406485703n],\n            ],\n            [\n                [1n, 0n],\n                [2581911344467009335267311115468803099551665605076196740867805258568234346338n, 19937756971775647987995932169929341994314640652964949448313374472400716661030n],\n                [2203960485148121921418603742825762020974279258880205651966n, 0n],\n                [5324479202449903542726783395506214481928257762400643279780343368557297135718n, 16208900380737693084919495127334387981393726419856888799917914180988844123039n],\n                [21888242871839275220042445260109153167277707414472061641714758635765020556616n, 0n],\n                [13981852324922362344252311234282257507216387789820983642040889267519694726527n, 7629828391165209371577384193250820201684255241773809077146787135900891633097n],\n            ]\n        ];\n\n        const f = module.addFunction(prefix+ \"__frobeniusMap\"+n);\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<6; i++) {\n            const X = (i==0) ? c.getLocal(\"x\") : c.i32_add(c.getLocal(\"x\"), c.i32_const(i*f2size));\n            const Xc0 = X;\n            const Xc1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(i*f2size + f1size));\n            const R = (i==0) ? c.getLocal(\"r\") : c.i32_add(c.getLocal(\"r\"), c.i32_const(i*f2size));\n            const Rc0 = R;\n            const Rc1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(i*f2size + f1size));\n            const coef = mul2(F12[Math.floor(i/3)][n%12] , F6[i%3][n%6]);\n            const pCoef = module.alloc([\n                ...utils.bigInt2BytesLE(toMontgomery(coef[0]), 32),\n                ...utils.bigInt2BytesLE(toMontgomery(coef[1]), 32),\n            ]);\n            if (n%2 == 1) {\n                f.addCode(\n                    c.call(f1mPrefix + \"_copy\", Xc0, Rc0),\n                    c.call(f1mPrefix + \"_neg\", Xc1, Rc1),\n                    c.call(f2mPrefix + \"_mul\", R, c.i32_const(pCoef), R),\n                );\n            } else {\n                f.addCode(c.call(f2mPrefix + \"_mul\", X, c.i32_const(pCoef), R));\n            }\n        }\n\n        function mul2(a, b) {\n            const ac0 = BigInt(a[0]);\n            const ac1 = BigInt(a[1]);\n            const bc0 = BigInt(b[0]);\n            const bc1 = BigInt(b[1]);\n            const res = [\n                (ac0 * bc0 - (  ac1 * bc1)  ) % q,\n                (ac0 * bc1 + (  ac1 * bc0)  ) % q,\n            ];\n            if (isNegative(res[0])) res[0] = res[0] + q;\n            return res;\n        }\n\n    }\n\n\n\n    function buildFinalExponentiationFirstChunk() {\n\n        const f = module.addFunction(prefix+ \"__finalExponentiationFirstChunk\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const elt = c.getLocal(\"x\");\n        const eltC0 = elt;\n        const eltC1 = c.i32_add(elt, c.i32_const(n8*6));\n        const r = c.getLocal(\"r\");\n        const pA = module.alloc(ftsize);\n        const A = c.i32_const(pA);\n        const Ac0 = A;\n        const Ac1 = c.i32_const(pA + n8*6);\n        const B = c.i32_const(module.alloc(ftsize));\n        const C = c.i32_const(module.alloc(ftsize));\n        const D = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(\n            // const alt_bn128_Fq12 A = alt_bn128_Fq12(elt.c0,-elt.c1);\n            c.call(f6mPrefix + \"_copy\", eltC0, Ac0),\n            c.call(f6mPrefix + \"_neg\", eltC1, Ac1),\n\n            // const alt_bn128_Fq12 B = elt.inverse();\n            c.call(ftmPrefix + \"_inverse\", elt, B),\n\n            // const alt_bn128_Fq12 C = A * B;\n            c.call(ftmPrefix + \"_mul\", A, B, C),\n            // const alt_bn128_Fq12 D = C.Frobenius_map(2);\n            c.call(prefix + \"__frobeniusMap2\", C, D),\n            // const alt_bn128_Fq12 result = D * C;\n            c.call(ftmPrefix + \"_mul\", C, D, r),\n        );\n    }\n\n    function buildCyclotomicSquare() {\n        const f = module.addFunction(prefix+ \"__cyclotomicSquare\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x4 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f2size));\n        const x3 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f2size));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(3*f2size));\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(4*f2size));\n        const x5 = c.i32_add(c.getLocal(\"x\"), c.i32_const(5*f2size));\n\n        const r0 = c.getLocal(\"r\");\n        const r4 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f2size));\n        const r3 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f2size));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(3*f2size));\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(4*f2size));\n        const r5 = c.i32_add(c.getLocal(\"r\"), c.i32_const(5*f2size));\n\n        const t0 = c.i32_const(module.alloc(f2size));\n        const t1 = c.i32_const(module.alloc(f2size));\n        const t2 = c.i32_const(module.alloc(f2size));\n        const t3 = c.i32_const(module.alloc(f2size));\n        const t4 = c.i32_const(module.alloc(f2size));\n        const t5 = c.i32_const(module.alloc(f2size));\n        const tmp = c.i32_const(module.alloc(f2size));\n        const AUX = c.i32_const(module.alloc(f2size));\n\n\n        f.addCode(\n            //    // t0 + t1*y = (z0 + z1*y)^2 = a^2\n            //    tmp = z0 * z1;\n            //    t0 = (z0 + z1) * (z0 + my_Fp6::non_residue * z1) - tmp - my_Fp6::non_residue * tmp;\n            //    t1 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x0, x1, tmp),\n            c.call(f2mPrefix + \"_mul\", x1, c.i32_const(pNonResidueF6), t0),\n            c.call(f2mPrefix + \"_add\", x0, t0, t0),\n            c.call(f2mPrefix + \"_add\", x0, x1, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t0, t0),\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t0, AUX, t0),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t1),\n\n            //  // t2 + t3*y = (z2 + z3*y)^2 = b^2\n            //  tmp = z2 * z3;\n            //  t2 = (z2 + z3) * (z2 + my_Fp6::non_residue * z3) - tmp - my_Fp6::non_residue * tmp;\n            //  t3 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x2, x3, tmp),\n            c.call(f2mPrefix + \"_mul\", x3, c.i32_const(pNonResidueF6), t2),\n            c.call(f2mPrefix + \"_add\", x2, t2, t2),\n            c.call(f2mPrefix + \"_add\", x2, x3, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t2, t2),\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t2, AUX, t2),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t3),\n\n            //  // t4 + t5*y = (z4 + z5*y)^2 = c^2\n            //  tmp = z4 * z5;\n            //  t4 = (z4 + z5) * (z4 + my_Fp6::non_residue * z5) - tmp - my_Fp6::non_residue * tmp;\n            //  t5 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x4, x5, tmp),\n            c.call(f2mPrefix + \"_mul\", x5, c.i32_const(pNonResidueF6), t4),\n            c.call(f2mPrefix + \"_add\", x4, t4, t4),\n            c.call(f2mPrefix + \"_add\", x4, x5, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t4, t4),\n            c.call(f2mPrefix + \"_mul\", c.i32_const(pNonResidueF6), tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t4, AUX, t4),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t5),\n\n            // For A\n            // z0 = 3 * t0 - 2 * z0\n            c.call(f2mPrefix + \"_sub\", t0, x0, r0),\n            c.call(f2mPrefix + \"_add\", r0, r0, r0),\n            c.call(f2mPrefix + \"_add\", t0, r0, r0),\n            // z1 = 3 * t1 + 2 * z1\n            c.call(f2mPrefix + \"_add\", t1, x1, r1),\n            c.call(f2mPrefix + \"_add\", r1, r1, r1),\n            c.call(f2mPrefix + \"_add\", t1, r1, r1),\n\n            // For B\n            // z2 = 3 * (xi * t5) + 2 * z2\n            c.call(f2mPrefix + \"_mul\", t5, c.i32_const(pAltBn128Twist), AUX),\n            c.call(f2mPrefix + \"_add\", AUX, x2, r2),\n            c.call(f2mPrefix + \"_add\", r2, r2, r2),\n            c.call(f2mPrefix + \"_add\", AUX, r2, r2),\n            // z3 = 3 * t4 - 2 * z3\n            c.call(f2mPrefix + \"_sub\", t4, x3, r3),\n            c.call(f2mPrefix + \"_add\", r3, r3, r3),\n            c.call(f2mPrefix + \"_add\", t4, r3, r3),\n\n            // For C\n            // z4 = 3 * t2 - 2 * z4\n            c.call(f2mPrefix + \"_sub\", t2, x4, r4),\n            c.call(f2mPrefix + \"_add\", r4, r4, r4),\n            c.call(f2mPrefix + \"_add\", t2, r4, r4),\n            // z5 = 3 * t3 + 2 * z5\n            c.call(f2mPrefix + \"_add\", t3, x5, r5),\n            c.call(f2mPrefix + \"_add\", r5, r5, r5),\n            c.call(f2mPrefix + \"_add\", t3, r5, r5),\n\n        );\n    }\n\n\n    function buildCyclotomicExp(exponent, fnName) {\n        const exponentNafBytes = naf(exponent).map( (b) => (b==-1 ? 0xFF: b) );\n        const pExponentNafBytes = module.alloc(exponentNafBytes);\n\n        const f = module.addFunction(prefix+ \"__cyclotomicExp_\"+fnName);\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"bit\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"x\");\n\n        const res = c.getLocal(\"r\");\n\n        const inverse = c.i32_const(module.alloc(ftsize));\n\n\n        f.addCode(\n            c.call(ftmPrefix + \"_conjugate\", x, inverse),\n            c.call(ftmPrefix + \"_one\", res),\n\n            c.if(\n                c.teeLocal(\"bit\", c.i32_load8_s(c.i32_const(exponentNafBytes.length-1), pExponentNafBytes)),\n                c.if(\n                    c.i32_eq(\n                        c.getLocal(\"bit\"),\n                        c.i32_const(1)\n                    ),\n                    c.call(ftmPrefix + \"_mul\", res, x, res),\n                    c.call(ftmPrefix + \"_mul\", res, inverse, res),\n                )\n            ),\n\n            c.setLocal(\"i\", c.i32_const(exponentNafBytes.length-2)),\n            c.block(c.loop(\n                c.call(prefix + \"__cyclotomicSquare\", res, res),\n                c.if(\n                    c.teeLocal(\"bit\", c.i32_load8_s(c.getLocal(\"i\"), pExponentNafBytes)),\n                    c.if(\n                        c.i32_eq(\n                            c.getLocal(\"bit\"),\n                            c.i32_const(1)\n                        ),\n                        c.call(ftmPrefix + \"_mul\", res, x, res),\n                        c.call(ftmPrefix + \"_mul\", res, inverse, res),\n                    )\n                ),\n                c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n\n\n    function buildFinalExponentiationLastChunk() {\n        buildCyclotomicSquare();\n        buildCyclotomicExp(finalExpZ, \"w0\");\n\n        const f = module.addFunction(prefix+ \"__finalExponentiationLastChunk\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const elt = c.getLocal(\"x\");\n        const result = c.getLocal(\"r\");\n        const A = c.i32_const(module.alloc(ftsize));\n        const B = c.i32_const(module.alloc(ftsize));\n        const C = c.i32_const(module.alloc(ftsize));\n        const D = c.i32_const(module.alloc(ftsize));\n        const E = c.i32_const(module.alloc(ftsize));\n        const F = c.i32_const(module.alloc(ftsize));\n        const G = c.i32_const(module.alloc(ftsize));\n        const H = c.i32_const(module.alloc(ftsize));\n        const I = c.i32_const(module.alloc(ftsize));\n        const J = c.i32_const(module.alloc(ftsize));\n        const K = c.i32_const(module.alloc(ftsize));\n        const L = c.i32_const(module.alloc(ftsize));\n        const M = c.i32_const(module.alloc(ftsize));\n        const N = c.i32_const(module.alloc(ftsize));\n        const O = c.i32_const(module.alloc(ftsize));\n        const P = c.i32_const(module.alloc(ftsize));\n        const Q = c.i32_const(module.alloc(ftsize));\n        const R = c.i32_const(module.alloc(ftsize));\n        const S = c.i32_const(module.alloc(ftsize));\n        const T = c.i32_const(module.alloc(ftsize));\n        const U = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(\n\n\n            // A = exp_by_neg_z(elt)  // = elt^(-z)\n            c.call(prefix + \"__cyclotomicExp_w0\", elt, A),\n            finalExpIsNegative ? [] : c.call(ftmPrefix + \"_conjugate\", A, A),\n            // B = A^2                // = elt^(-2*z)\n            c.call(prefix + \"__cyclotomicSquare\", A, B),\n            // C = B^2                // = elt^(-4*z)\n            c.call(prefix + \"__cyclotomicSquare\", B, C),\n            // D = C * B              // = elt^(-6*z)\n            c.call(ftmPrefix + \"_mul\", C, B, D),\n            // E = exp_by_neg_z(D)    // = elt^(6*z^2)\n            c.call(prefix + \"__cyclotomicExp_w0\", D, E),\n            finalExpIsNegative ? [] : c.call(ftmPrefix + \"_conjugate\", E, E),\n            // F = E^2                // = elt^(12*z^2)\n            c.call(prefix + \"__cyclotomicSquare\", E, F),\n            // G = epx_by_neg_z(F)    // = elt^(-12*z^3)\n            c.call(prefix + \"__cyclotomicExp_w0\", F, G),\n            finalExpIsNegative ? [] : c.call(ftmPrefix + \"_conjugate\", G, G),\n            // H = conj(D)            // = elt^(6*z)\n            c.call(ftmPrefix + \"_conjugate\", D, H),\n            // I = conj(G)            // = elt^(12*z^3)\n            c.call(ftmPrefix + \"_conjugate\", G, I),\n            // J = I * E              // = elt^(12*z^3 + 6*z^2)\n            c.call(ftmPrefix + \"_mul\", I, E, J),\n            // K = J * H              // = elt^(12*z^3 + 6*z^2 + 6*z)\n            c.call(ftmPrefix + \"_mul\", J, H, K),\n            // L = K * B              // = elt^(12*z^3 + 6*z^2 + 4*z)\n            c.call(ftmPrefix + \"_mul\", K, B, L),\n            // M = K * E              // = elt^(12*z^3 + 12*z^2 + 6*z)\n            c.call(ftmPrefix + \"_mul\", K, E, M),\n\n            // N = M * elt            // = elt^(12*z^3 + 12*z^2 + 6*z + 1)\n            c.call(ftmPrefix + \"_mul\", M, elt, N),\n\n            // O = L.Frobenius_map(1) // = elt^(q*(12*z^3 + 6*z^2 + 4*z))\n            c.call(prefix + \"__frobeniusMap1\", L, O),\n            // P = O * N              // = elt^(q*(12*z^3 + 6*z^2 + 4*z) * (12*z^3 + 12*z^2 + 6*z + 1))\n            c.call(ftmPrefix + \"_mul\", O, N, P),\n            // Q = K.Frobenius_map(2) // = elt^(q^2 * (12*z^3 + 6*z^2 + 6*z))\n            c.call(prefix + \"__frobeniusMap2\", K, Q),\n            // R = Q * P              // = elt^(q^2 * (12*z^3 + 6*z^2 + 6*z) + q*(12*z^3 + 6*z^2 + 4*z) * (12*z^3 + 12*z^2 + 6*z + 1))\n            c.call(ftmPrefix + \"_mul\", Q, P, R),\n            // S = conj(elt)          // = elt^(-1)\n            c.call(ftmPrefix + \"_conjugate\", elt, S),\n            // T = S * L              // = elt^(12*z^3 + 6*z^2 + 4*z - 1)\n            c.call(ftmPrefix + \"_mul\", S, L, T),\n            // U = T.Frobenius_map(3) // = elt^(q^3(12*z^3 + 6*z^2 + 4*z - 1))\n            c.call(prefix + \"__frobeniusMap3\", T, U),\n            // V = U * R              // = elt^(q^3(12*z^3 + 6*z^2 + 4*z - 1) + q^2 * (12*z^3 + 6*z^2 + 6*z) + q*(12*z^3 + 6*z^2 + 4*z) * (12*z^3 + 12*z^2 + 6*z + 1))\n            c.call(ftmPrefix + \"_mul\", U, R, result),\n            // result = V\n        );\n    }\n\n\n    function buildFinalExponentiation() {\n        buildFinalExponentiationFirstChunk();\n        buildFinalExponentiationLastChunk();\n        const f = module.addFunction(prefix+ \"_finalExponentiation\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const elt = c.getLocal(\"x\");\n        const result = c.getLocal(\"r\");\n        const eltToFirstChunk = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(\n            c.call(prefix + \"__finalExponentiationFirstChunk\", elt, eltToFirstChunk ),\n            c.call(prefix + \"__finalExponentiationLastChunk\", eltToFirstChunk, result )\n        );\n    }\n\n\n    function buildFinalExponentiationOld() {\n        const f = module.addFunction(prefix+ \"_finalExponentiationOld\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const exponent = 552484233613224096312617126783173147097382103762957654188882734314196910839907541213974502761540629817009608548654680343627701153829446747810907373256841551006201639677726139946029199968412598804882391702273019083653272047566316584365559776493027495458238373902875937659943504873220554161550525926302303331747463515644711876653177129578303191095900909191624817826566688241804408081892785725967931714097716709526092261278071952560171111444072049229123565057483750161460024353346284167282452756217662335528813519139808291170539072125381230815729071544861602750936964829313608137325426383735122175229541155376346436093930287402089517426973178917569713384748081827255472576937471496195752727188261435633271238710131736096299798168852925540549342330775279877006784354801422249722573783561685179618816480037695005515426162362431072245638324744480n;\n\n        const pExponent = module.alloc(utils.bigInt2BytesLE( exponent, 352 ));\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(ftmPrefix + \"_exp\", c.getLocal(\"x\"), c.i32_const(pExponent), c.i32_const(352), c.getLocal(\"r\")),\n        );\n    }\n\n\n\n\n    const pPreP = module.alloc(prePSize);\n    const pPreQ = module.alloc(preQSize);\n\n    function buildPairingEquation(nPairings) {\n\n        const f = module.addFunction(prefix+ \"_pairingEq\"+nPairings);\n        for (let i=0; i<nPairings; i++) {\n            f.addParam(\"p_\"+i, \"i32\");\n            f.addParam(\"q_\"+i, \"i32\");\n        }\n        f.addParam(\"c\", \"i32\");\n        f.setReturnType(\"i32\");\n\n\n        const c = f.getCodeBuilder();\n\n        const resT = c.i32_const(module.alloc(ftsize));\n        const auxT = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(c.call(ftmPrefix + \"_one\", resT ));\n\n        for (let i=0; i<nPairings; i++) {\n\n            f.addCode(c.call(prefix + \"_prepareG1\", c.getLocal(\"p_\"+i), c.i32_const(pPreP) ));\n            f.addCode(c.call(prefix + \"_prepareG2\", c.getLocal(\"q_\"+i), c.i32_const(pPreQ) ));\n            f.addCode(c.call(prefix + \"_millerLoop\", c.i32_const(pPreP), c.i32_const(pPreQ), auxT ));\n\n            f.addCode(c.call(ftmPrefix + \"_mul\", resT, auxT, resT ));\n        }\n\n        f.addCode(c.call(prefix + \"_finalExponentiation\", resT, resT ));\n\n        f.addCode(c.call(ftmPrefix + \"_eq\", resT, c.getLocal(\"c\")));\n    }\n\n\n    function buildPairing() {\n\n        const f = module.addFunction(prefix+ \"_pairing\");\n        f.addParam(\"p\", \"i32\");\n        f.addParam(\"q\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const resT = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(c.call(prefix + \"_prepareG1\", c.getLocal(\"p\"), c.i32_const(pPreP) ));\n        f.addCode(c.call(prefix + \"_prepareG2\", c.getLocal(\"q\"), c.i32_const(pPreQ) ));\n        f.addCode(c.call(prefix + \"_millerLoop\", c.i32_const(pPreP), c.i32_const(pPreQ), resT ));\n        f.addCode(c.call(prefix + \"_finalExponentiation\", resT, c.getLocal(\"r\") ));\n    }\n\n\n    buildPrepAddStep();\n    buildPrepDoubleStep();\n\n    buildPrepareG1();\n    buildPrepareG2();\n\n    buildMulBy024();\n    buildMulBy024Old();\n    buildMillerLoop();\n\n\n    for (let i=0; i<10; i++) {\n        buildFrobeniusMap(i);\n        module.exportFunction(prefix + \"__frobeniusMap\"+i);\n    }\n\n    buildFinalExponentiationOld();\n    buildFinalExponentiation();\n\n    for (let i=1; i<=5; i++) {\n        buildPairingEquation(i);\n        module.exportFunction(prefix + \"_pairingEq\"+i);\n    }\n\n    buildPairing();\n\n    module.exportFunction(prefix + \"_pairing\");\n\n    module.exportFunction(prefix + \"_prepareG1\");\n    module.exportFunction(prefix + \"_prepareG2\");\n    module.exportFunction(prefix + \"_millerLoop\");\n    module.exportFunction(prefix + \"_finalExponentiation\");\n    module.exportFunction(prefix + \"_finalExponentiationOld\");\n    module.exportFunction(prefix + \"__mulBy024\");\n    module.exportFunction(prefix + \"__mulBy024Old\");\n    module.exportFunction(prefix + \"__cyclotomicSquare\");\n    module.exportFunction(prefix + \"__cyclotomicExp_w0\");\n\n    // console.log(module.functionIdxByName);\n\n};\n\n", "const utils = require(\"../utils\");\n\nconst buildF1m =require(\"../build_f1m.js\");\nconst buildF1 =require(\"../build_f1.js\");\nconst buildF2m =require(\"../build_f2m.js\");\nconst buildF3m =require(\"../build_f3m.js\");\nconst buildCurve =require(\"../build_curve_jacobian_a0.js\");\nconst buildFFT = require(\"../build_fft\");\nconst buildPol = require(\"../build_pol\");\nconst buildQAP = require(\"../build_qap\");\nconst buildApplyKey = require(\"../build_applykey\");\nconst { bitLength, isOdd, isNegative } = require(\"../bigint.js\");\n\n// Definition here: https://electriccoin.co/blog/new-snark-curve/\n\nmodule.exports = function buildBLS12381(module, _prefix) {\n\n    const prefix = _prefix || \"bls12381\";\n\n    if (module.modules[prefix]) return prefix;  // already builded\n\n    const q = 0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaabn;\n    const r = 0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001n;\n\n    const n64q = Math.floor((bitLength(q - 1n) - 1)/64) +1;\n    const n8q = n64q*8;\n    const f1size = n8q;\n    const f2size = f1size * 2;\n    const ftsize = f1size * 12;\n\n    const n64r = Math.floor((bitLength(r - 1n) - 1)/64) +1;\n    const n8r = n64r*8;\n    const frsize = n8r;\n\n\n    const pr = module.alloc(utils.bigInt2BytesLE( r, frsize ));\n\n    const f1mPrefix = buildF1m(module, q, \"f1m\", \"intq\");\n    buildF1(module, r, \"fr\", \"frm\", \"intr\");\n    const pG1b = module.alloc(utils.bigInt2BytesLE( toMontgomery(4n), f1size ));\n    const g1mPrefix = buildCurve(module, \"g1m\", \"f1m\", pG1b);\n\n    buildFFT(module, \"frm\", \"frm\", \"frm\", \"frm_mul\");\n\n    buildPol(module, \"pol\", \"frm\");\n    buildQAP(module, \"qap\", \"frm\");\n\n    const f2mPrefix = buildF2m(module, \"f1m_neg\", \"f2m\", \"f1m\");\n    const pG2b = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(4n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(4n), f1size )\n    ]);\n    const g2mPrefix = buildCurve(module, \"g2m\", \"f2m\", pG2b);\n\n\n    function buildGTimesFr(fnName, opMul) {\n        const f = module.addFunction(fnName);\n        f.addParam(\"pG\", \"i32\");\n        f.addParam(\"pFr\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const AUX = c.i32_const(module.alloc(n8r));\n\n        f.addCode(\n            c.call(\"frm_fromMontgomery\", c.getLocal(\"pFr\"), AUX),\n            c.call(\n                opMul,\n                c.getLocal(\"pG\"),\n                AUX,\n                c.i32_const(n8r),\n                c.getLocal(\"pr\")\n            )\n        );\n\n        module.exportFunction(fnName);\n    }\n    buildGTimesFr(\"g1m_timesFr\", \"g1m_timesScalar\");\n    buildFFT(module, \"g1m\", \"g1m\", \"frm\", \"g1m_timesFr\");\n\n    buildGTimesFr(\"g2m_timesFr\", \"g2m_timesScalar\");\n    buildFFT(module, \"g2m\", \"g2m\", \"frm\", \"g2m_timesFr\");\n\n    buildGTimesFr(\"g1m_timesFrAffine\", \"g1m_timesScalarAffine\");\n    buildGTimesFr(\"g2m_timesFrAffine\", \"g2m_timesScalarAffine\");\n\n    buildApplyKey(module, \"frm_batchApplyKey\", \"fmr\", \"frm\", n8r, n8r, n8r, \"frm_mul\");\n    buildApplyKey(module, \"g1m_batchApplyKey\", \"g1m\", \"frm\", n8q*3, n8q*3, n8r, \"g1m_timesFr\");\n    buildApplyKey(module, \"g1m_batchApplyKeyMixed\", \"g1m\", \"frm\", n8q*2, n8q*3, n8r, \"g1m_timesFrAffine\");\n    buildApplyKey(module, \"g2m_batchApplyKey\", \"g2m\", \"frm\", n8q*2*3, n8q*3*2, n8r, \"g2m_timesFr\");\n    buildApplyKey(module, \"g2m_batchApplyKeyMixed\", \"g2m\", \"frm\", n8q*2*2, n8q*3*2, n8r, \"g2m_timesFrAffine\");\n\n\n    function toMontgomery(a) {\n        return BigInt(a) * (1n << BigInt(f1size*8)) % q;\n    }\n\n    const G1gen = [\n        3685416753713387016781088315183077757961620795782546409894578378688607592378376318836054947676345821548104185464507n,\n        1339506544944476473020471379941921221584933875938349620426543736416511423956333506472724655353366534992391756441569n,\n        1n\n    ];\n\n    const pG1gen = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1gen[2]), f1size ),\n        ]\n    );\n\n    const G1zero = [\n        0n,\n        1n,\n        0n\n    ];\n\n    const pG1zero = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G1zero[2]), f1size )\n        ]\n    );\n\n    const G2gen = [\n        [\n            352701069587466618187139116011060144890029952792775240219908644239793785735715026873347600343865175952761926303160n,\n            3059144344244213709971259814753781636986470325476647558659373206291635324768958432433509563104347017837885763365758n,\n        ],[\n            1985150602287291935568054521177171638300868978215655730859378665066344726373823718423869104263333984641494340347905n,\n            927553665492332455747201965776037880757740193453592970025027978793976877002675564980949289727957565575433344219582n,\n        ],[\n            1n,\n            0n,\n        ]\n    ];\n\n    const pG2gen = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[0][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[0][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[1][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[1][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[2][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2gen[2][1]), f1size ),\n        ]\n    );\n\n    const G2zero = [\n        [\n            0n,\n            0n,\n        ],[\n            1n,\n            0n,\n        ],[\n            0n,\n            0n,\n        ]\n    ];\n\n    const pG2zero = module.alloc(\n        [\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[0][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[0][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[1][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[1][1]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[2][0]), f1size ),\n            ...utils.bigInt2BytesLE( toMontgomery(G2zero[2][1]), f1size ),\n        ]\n    );\n\n    const pOneT = module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(1n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(0n), f1size ),\n    ]);\n\n    const pBls12381Twist =  module.alloc([\n        ...utils.bigInt2BytesLE( toMontgomery(1n), f1size ),\n        ...utils.bigInt2BytesLE( toMontgomery(1n), f1size ),\n    ]);\n\n    function build_mulNR2() {\n        const f = module.addFunction(f2mPrefix + \"_mulNR\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0c = c.i32_const(module.alloc(f1size));\n        const x0 = c.getLocal(\"x\");\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f1size));\n        const r0 = c.getLocal(\"pr\");\n        const r1 = c.i32_add(c.getLocal(\"pr\"), c.i32_const(f1size));\n\n        f.addCode(\n            c.call(f1mPrefix+\"_copy\", x0, x0c),\n            c.call(f1mPrefix+\"_sub\", x0, x1, r0),\n            c.call(f1mPrefix+\"_add\", x0c, x1, r1),\n        );\n    }\n    build_mulNR2();\n\n    const f6mPrefix = buildF3m(module, f2mPrefix+\"_mulNR\", \"f6m\", \"f2m\");\n\n    function build_mulNR6() {\n        const f = module.addFunction(f6mPrefix + \"_mulNR\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"pr\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const c0copy = c.i32_const(module.alloc(f1size*2));\n\n        f.addCode(\n            c.call(\n                f2mPrefix + \"_copy\",\n                c.getLocal(\"x\"),\n                c0copy\n            ),\n            c.call(\n                f2mPrefix + \"_mulNR\",\n                c.i32_add(c.getLocal(\"x\"), c.i32_const(n8q*4)),\n                c.getLocal(\"pr\")\n            ),\n            c.call(\n                f2mPrefix + \"_copy\",\n                c.i32_add(c.getLocal(\"x\"), c.i32_const(n8q*2)),\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8q*4)),\n            ),\n            c.call(\n                f2mPrefix + \"_copy\",\n                c0copy,\n                c.i32_add(c.getLocal(\"pr\"), c.i32_const(n8q*2)),\n            ),\n        );\n    }\n    build_mulNR6();\n\n    const ftmPrefix = buildF2m(module, f6mPrefix+\"_mulNR\", \"ftm\", f6mPrefix);\n\n    const ateLoopCount = 0xd201000000010000n;\n    const ateLoopBitBytes = bits(ateLoopCount);\n    const pAteLoopBitBytes = module.alloc(ateLoopBitBytes);\n    const isLoopNegative = true;\n\n    const ateCoefSize = 3 * f2size;\n    const ateNDblCoefs = ateLoopBitBytes.length-1;\n    const ateNAddCoefs = ateLoopBitBytes.reduce((acc, b) =>  acc + ( b!=0 ? 1 : 0)   ,0);\n    const ateNCoefs = ateNAddCoefs + ateNDblCoefs + 1;\n    const prePSize = 3*2*n8q;\n    const preQSize = 3*n8q*2 + ateNCoefs*ateCoefSize;\n    const finalExpIsNegative = true;\n\n    const finalExpZ = 15132376222941642752n;\n\n\n    module.modules[prefix] = {\n        n64q: n64q,\n        n64r: n64r,\n        n8q: n8q,\n        n8r: n8r,\n        pG1gen: pG1gen,\n        pG1zero: pG1zero,\n        pG1b: pG1b,\n        pG2gen: pG2gen,\n        pG2zero: pG2zero,\n        pG2b: pG2b,\n        pq: module.modules[\"f1m\"].pq,\n        pr: pr,\n        pOneT: pOneT,\n        r: r,\n        q: q,\n        prePSize: prePSize,\n        preQSize: preQSize\n    };\n\n\n    function naf(n) {\n        let E = n;\n        const res = [];\n        while (E > 0n) {\n            if (isOdd(E)) {\n                const z = 2 - Number(E % 4n);\n                res.push( z );\n                E = E - BigInt(z);\n            } else {\n                res.push( 0 );\n            }\n            E = E >> 1n;\n        }\n        return res;\n    }\n\n    function bits(n) {\n        let E = n;\n        const res = [];\n        while (E > 0n) {\n            if (isOdd(E)) {\n                res.push( 1 );\n            } else {\n                res.push( 0 );\n            }\n            E = E >> 1n;\n        }\n        return res;\n    }\n\n    function buildPrepareG1() {\n        const f = module.addFunction(prefix+ \"_prepareG1\");\n        f.addParam(\"pP\", \"i32\");\n        f.addParam(\"ppreP\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(g1mPrefix + \"_normalize\", c.getLocal(\"pP\"), c.getLocal(\"ppreP\")),  // TODO Remove if already in affine\n        );\n    }\n\n\n\n    function buildPrepDoubleStep() {\n        const f = module.addFunction(prefix+ \"_prepDblStep\");\n        f.addParam(\"R\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const Rx  = c.getLocal(\"R\");\n        const Ry  = c.i32_add(c.getLocal(\"R\"), c.i32_const(2*n8q));\n        const Rz  = c.i32_add(c.getLocal(\"R\"), c.i32_const(4*n8q));\n\n        const t0  = c.getLocal(\"r\");\n        const t3  = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*n8q));\n        const t6  = c.i32_add(c.getLocal(\"r\"), c.i32_const(4*n8q));\n\n\n        const zsquared = c.i32_const(module.alloc(f2size));\n        const t1 = c.i32_const(module.alloc(f2size));\n        const t2 = c.i32_const(module.alloc(f2size));\n        const t4 = c.i32_const(module.alloc(f2size));\n        const t5 = c.i32_const(module.alloc(f2size));\n\n        f.addCode(\n\n            // tmp0 = r.x.square();\n            c.call(f2mPrefix + \"_square\", Rx, t0),\n\n            // tmp1 = r.y.square();\n            c.call(f2mPrefix + \"_square\", Ry, t1),\n\n            // tmp2 = tmp1.square();\n            c.call(f2mPrefix + \"_square\", t1, t2),\n\n            // tmp3 = (tmp1 + r.x).square() - tmp0 - tmp2;\n            c.call(f2mPrefix + \"_add\", t1, Rx, t3),\n            c.call(f2mPrefix + \"_square\", t3, t3),\n            c.call(f2mPrefix + \"_sub\", t3, t0, t3),\n            c.call(f2mPrefix + \"_sub\", t3, t2, t3),\n\n            // tmp3 = tmp3 + tmp3;\n            c.call(f2mPrefix + \"_add\", t3, t3, t3),\n\n            // tmp4 = tmp0 + tmp0 + tmp0;\n            c.call(f2mPrefix + \"_add\", t0, t0, t4),\n            c.call(f2mPrefix + \"_add\", t4, t0, t4),\n\n            // tmp6 = r.x + tmp4;\n            c.call(f2mPrefix + \"_add\", Rx, t4, t6),\n\n            // tmp5 = tmp4.square();\n            c.call(f2mPrefix + \"_square\", t4, t5),\n\n            // zsquared = r.z.square();\n            c.call(f2mPrefix + \"_square\", Rz, zsquared),\n\n            // r.x = tmp5 - tmp3 - tmp3;\n            c.call(f2mPrefix + \"_sub\", t5, t3, Rx),\n            c.call(f2mPrefix + \"_sub\", Rx, t3, Rx),\n\n            // r.z = (r.z + r.y).square() - tmp1 - zsquared;\n            c.call(f2mPrefix + \"_add\", Rz, Ry, Rz),\n            c.call(f2mPrefix + \"_square\", Rz, Rz),\n            c.call(f2mPrefix + \"_sub\", Rz, t1, Rz),\n            c.call(f2mPrefix + \"_sub\", Rz, zsquared, Rz),\n\n            // r.y = (tmp3 - r.x) * tmp4;\n            c.call(f2mPrefix + \"_sub\", t3, Rx, Ry),\n            c.call(f2mPrefix + \"_mul\", Ry, t4, Ry),\n\n            // tmp2 = tmp2 + tmp2;\n            c.call(f2mPrefix + \"_add\", t2, t2, t2),\n\n            // tmp2 = tmp2 + tmp2;\n            c.call(f2mPrefix + \"_add\", t2, t2, t2),\n\n            // tmp2 = tmp2 + tmp2;\n            c.call(f2mPrefix + \"_add\", t2, t2, t2),\n\n            // r.y -= tmp2;\n            c.call(f2mPrefix + \"_sub\", Ry, t2, Ry),\n\n            // tmp3 = tmp4 * zsquared;\n            c.call(f2mPrefix + \"_mul\", t4, zsquared, t3),\n\n            // tmp3 = tmp3 + tmp3;\n            c.call(f2mPrefix + \"_add\", t3, t3, t3),\n\n            // tmp3 = -tmp3;\n            c.call(f2mPrefix + \"_neg\", t3, t3),\n\n            // tmp6 = tmp6.square() - tmp0 - tmp5;\n            c.call(f2mPrefix + \"_square\", t6, t6),\n            c.call(f2mPrefix + \"_sub\", t6, t0, t6),\n            c.call(f2mPrefix + \"_sub\", t6, t5, t6),\n\n            // tmp1 = tmp1 + tmp1;\n            c.call(f2mPrefix + \"_add\", t1, t1, t1),\n\n            // tmp1 = tmp1 + tmp1;\n            c.call(f2mPrefix + \"_add\", t1, t1, t1),\n\n            // tmp6 = tmp6 - tmp1;\n            c.call(f2mPrefix + \"_sub\", t6, t1, t6),\n\n            // tmp0 = r.z * zsquared;\n            c.call(f2mPrefix + \"_mul\", Rz, zsquared, t0),\n\n            // tmp0 = tmp0 + tmp0;\n            c.call(f2mPrefix + \"_add\", t0, t0, t0),\n\n        );\n    }\n\n    function buildPrepAddStep() {\n        const f = module.addFunction(prefix+ \"_prepAddStep\");\n        f.addParam(\"R\", \"i32\");\n        f.addParam(\"Q\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const Rx  = c.getLocal(\"R\");\n        const Ry  = c.i32_add(c.getLocal(\"R\"), c.i32_const(2*n8q));\n        const Rz  = c.i32_add(c.getLocal(\"R\"), c.i32_const(4*n8q));\n\n        const Qx  = c.getLocal(\"Q\");\n        const Qy  = c.i32_add(c.getLocal(\"Q\"), c.i32_const(2*n8q));\n\n        const t10  = c.getLocal(\"r\");\n        const t1  = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*n8q));\n        const t9  = c.i32_add(c.getLocal(\"r\"), c.i32_const(4*n8q));\n\n        const zsquared = c.i32_const(module.alloc(f2size));\n        const ysquared = c.i32_const(module.alloc(f2size));\n        const ztsquared = c.i32_const(module.alloc(f2size));\n        const t0 = c.i32_const(module.alloc(f2size));\n        const t2 = c.i32_const(module.alloc(f2size));\n        const t3 = c.i32_const(module.alloc(f2size));\n        const t4 = c.i32_const(module.alloc(f2size));\n        const t5 = c.i32_const(module.alloc(f2size));\n        const t6 = c.i32_const(module.alloc(f2size));\n        const t7 = c.i32_const(module.alloc(f2size));\n        const t8 = c.i32_const(module.alloc(f2size));\n\n        f.addCode(\n\n            // zsquared = r.z.square();\n            c.call(f2mPrefix + \"_square\", Rz, zsquared),\n\n            // ysquared = q.y.square();\n            c.call(f2mPrefix + \"_square\", Qy, ysquared),\n\n            // t0 = zsquared * q.x;\n            c.call(f2mPrefix + \"_mul\", zsquared, Qx, t0),\n\n            // t1 = ((q.y + r.z).square() - ysquared - zsquared) * zsquared;\n            c.call(f2mPrefix + \"_add\", Qy, Rz, t1),\n            c.call(f2mPrefix + \"_square\", t1, t1),\n            c.call(f2mPrefix + \"_sub\", t1, ysquared, t1),\n            c.call(f2mPrefix + \"_sub\", t1, zsquared, t1),\n            c.call(f2mPrefix + \"_mul\", t1, zsquared, t1),\n\n            // t2 = t0 - r.x;\n            c.call(f2mPrefix + \"_sub\", t0, Rx, t2),\n\n            // t3 = t2.square();\n            c.call(f2mPrefix + \"_square\", t2, t3),\n\n            // t4 = t3 + t3;\n            c.call(f2mPrefix + \"_add\", t3, t3, t4),\n\n            // t4 = t4 + t4;\n            c.call(f2mPrefix + \"_add\", t4, t4, t4),\n\n            // t5 = t4 * t2;\n            c.call(f2mPrefix + \"_mul\", t4, t2, t5),\n\n            // t6 = t1 - r.y - r.y;\n            c.call(f2mPrefix + \"_sub\", t1, Ry, t6),\n            c.call(f2mPrefix + \"_sub\", t6, Ry, t6),\n\n            // t9 = t6 * q.x;\n            c.call(f2mPrefix + \"_mul\", t6, Qx, t9),\n\n            // t7 = t4 * r.x;\n            c.call(f2mPrefix + \"_mul\", t4, Rx, t7),\n\n            // r.x = t6.square() - t5 - t7 - t7;\n            c.call(f2mPrefix + \"_square\", t6, Rx),\n            c.call(f2mPrefix + \"_sub\", Rx, t5, Rx),\n            c.call(f2mPrefix + \"_sub\", Rx, t7, Rx),\n            c.call(f2mPrefix + \"_sub\", Rx, t7, Rx),\n\n            // r.z = (r.z + t2).square() - zsquared - t3;\n            c.call(f2mPrefix + \"_add\", Rz, t2, Rz),\n            c.call(f2mPrefix + \"_square\", Rz, Rz),\n            c.call(f2mPrefix + \"_sub\", Rz, zsquared, Rz),\n            c.call(f2mPrefix + \"_sub\", Rz, t3, Rz),\n\n            // t10 = q.y + r.z;\n            c.call(f2mPrefix + \"_add\", Qy, Rz, t10),\n\n            // t8 = (t7 - r.x) * t6;\n            c.call(f2mPrefix + \"_sub\", t7, Rx, t8),\n            c.call(f2mPrefix + \"_mul\", t8, t6, t8),\n\n            // t0 = r.y * t5;\n            c.call(f2mPrefix + \"_mul\", Ry, t5, t0),\n\n            // t0 = t0 + t0;\n            c.call(f2mPrefix + \"_add\", t0, t0, t0),\n\n            // r.y = t8 - t0;\n            c.call(f2mPrefix + \"_sub\", t8, t0, Ry),\n\n            // t10 = t10.square() - ysquared;\n            c.call(f2mPrefix + \"_square\", t10, t10),\n            c.call(f2mPrefix + \"_sub\", t10, ysquared, t10),\n\n            // ztsquared = r.z.square();\n            c.call(f2mPrefix + \"_square\", Rz, ztsquared),\n\n            // t10 = t10 - ztsquared;\n            c.call(f2mPrefix + \"_sub\", t10, ztsquared, t10),\n\n            // t9 = t9 + t9 - t10;\n            c.call(f2mPrefix + \"_add\", t9, t9, t9),\n            c.call(f2mPrefix + \"_sub\", t9, t10, t9),\n\n            // t10 = r.z + r.z;\n            c.call(f2mPrefix + \"_add\", Rz, Rz, t10),\n\n            // t6 = -t6;\n            c.call(f2mPrefix + \"_neg\", t6, t6),\n\n            // t1 = t6 + t6;\n            c.call(f2mPrefix + \"_add\", t6, t6, t1),\n        );\n    }\n\n\n    function buildPrepareG2() {\n        const f = module.addFunction(prefix+ \"_prepareG2\");\n        f.addParam(\"pQ\", \"i32\");\n        f.addParam(\"ppreQ\", \"i32\");\n        f.addLocal(\"pCoef\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n\n        const Q = c.getLocal(\"pQ\");\n\n        const pR = module.alloc(f2size*3);\n        const R = c.i32_const(pR);\n\n        const base = c.getLocal(\"ppreQ\");\n\n        f.addCode(\n            c.call(g2mPrefix + \"_normalize\", Q, base),\n            c.if(\n                c.call(g2mPrefix + \"_isZero\", base),\n                c.ret([])\n            ),\n            c.call(g2mPrefix + \"_copy\", base, R),\n            c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"ppreQ\"), c.i32_const(f2size*3))),\n        );\n\n        f.addCode(\n            c.setLocal(\"i\", c.i32_const(ateLoopBitBytes.length-2)),\n            c.block(c.loop(\n\n                c.call(prefix + \"_prepDblStep\", R, c.getLocal(\"pCoef\")),\n                c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n                c.if(\n                    c.i32_load8_s(c.getLocal(\"i\"), pAteLoopBitBytes),\n                    [\n                        ...c.call(prefix + \"_prepAddStep\", R, base, c.getLocal(\"pCoef\")),\n                        ...c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n                    ]\n                ),\n                c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n    }\n\n\n    function buildF6Mul1() {\n        const f = module.addFunction(f6mPrefix+ \"_mul1\");\n        f.addParam(\"pA\", \"i32\");    // F6\n        f.addParam(\"pC1\", \"i32\");   // F2\n        f.addParam(\"pR\", \"i32\");    // F6\n\n        const c = f.getCodeBuilder();\n\n        const A_c0 = c.getLocal(\"pA\");\n        const A_c1 = c.i32_add(c.getLocal(\"pA\"), c.i32_const(f1size*2));\n        const A_c2 = c.i32_add(c.getLocal(\"pA\"), c.i32_const(f1size*4));\n\n        const c1  = c.getLocal(\"pC1\");\n\n        const t1 = c.getLocal(\"pR\");\n        const t2 = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f1size*2));\n        const b_b = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f1size*4));\n\n        const Ac0_Ac1 = c.i32_const(module.alloc(f1size*2));\n        const Ac1_Ac2 = c.i32_const(module.alloc(f1size*2));\n\n        f.addCode(\n\n            c.call(f2mPrefix + \"_add\", A_c0, A_c1, Ac0_Ac1),\n            c.call(f2mPrefix + \"_add\", A_c1, A_c2, Ac1_Ac2),\n\n            // let b_b = self.c1 * c1;\n            c.call(f2mPrefix + \"_mul\", A_c1, c1, b_b),\n\n            // let t1 = (self.c1 + self.c2) * c1 - b_b;\n            c.call(f2mPrefix + \"_mul\", Ac1_Ac2, c1, t1),\n            c.call(f2mPrefix + \"_sub\", t1, b_b, t1),\n\n            // let t1 = t1.mul_by_nonresidue();\n            c.call(f2mPrefix + \"_mulNR\", t1, t1),\n\n            // let t2 = (self.c0 + self.c1) * c1 - b_b;\n            c.call(f2mPrefix + \"_mul\", Ac0_Ac1, c1, t2),\n            c.call(f2mPrefix + \"_sub\", t2, b_b, t2),\n        );\n    }\n    buildF6Mul1();\n\n    function buildF6Mul01() {\n        const f = module.addFunction(f6mPrefix+ \"_mul01\");\n        f.addParam(\"pA\", \"i32\");    // F6\n        f.addParam(\"pC0\", \"i32\");   // F2\n        f.addParam(\"pC1\", \"i32\");   // F2\n        f.addParam(\"pR\", \"i32\");    // F6\n\n        const c = f.getCodeBuilder();\n\n        const A_c0 = c.getLocal(\"pA\");\n        const A_c1 = c.i32_add(c.getLocal(\"pA\"), c.i32_const(f1size*2));\n        const A_c2 = c.i32_add(c.getLocal(\"pA\"), c.i32_const(f1size*4));\n\n        const c0  = c.getLocal(\"pC0\");\n        const c1  = c.getLocal(\"pC1\");\n\n        const t1 = c.getLocal(\"pR\");\n        const t2 = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f1size*2));\n        const t3 = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f1size*4));\n\n        const a_a = c.i32_const(module.alloc(f1size*2));\n        const b_b = c.i32_const(module.alloc(f1size*2));\n        const Ac0_Ac1 = c.i32_const(module.alloc(f1size*2));\n        const Ac0_Ac2 = c.i32_const(module.alloc(f1size*2));\n\n        f.addCode(\n            // let a_a = self.c0 * c0;\n            c.call(f2mPrefix + \"_mul\", A_c0, c0, a_a),\n\n            // let b_b = self.c1 * c1;\n            c.call(f2mPrefix + \"_mul\", A_c1, c1, b_b),\n\n\n            c.call(f2mPrefix + \"_add\", A_c0, A_c1, Ac0_Ac1),\n            c.call(f2mPrefix + \"_add\", A_c0, A_c2, Ac0_Ac2),\n\n            // let t1 = (self.c1 + self.c2) * c1 - b_b;\n            c.call(f2mPrefix + \"_add\", A_c1, A_c2, t1),\n            c.call(f2mPrefix + \"_mul\", t1, c1, t1),\n            c.call(f2mPrefix + \"_sub\", t1, b_b, t1),\n\n            // let t1 = t1.mul_by_nonresidue() + a_a;\n            c.call(f2mPrefix + \"_mulNR\", t1, t1),\n            c.call(f2mPrefix + \"_add\", t1, a_a, t1),\n\n            // let t2 = (c0 + c1) * (self.c0 + self.c1) - a_a - b_b;\n            c.call(f2mPrefix + \"_add\", c0, c1, t2),\n            c.call(f2mPrefix + \"_mul\", t2, Ac0_Ac1, t2),\n            c.call(f2mPrefix + \"_sub\", t2, a_a, t2),\n            c.call(f2mPrefix + \"_sub\", t2, b_b, t2),\n\n            // let t3 = (self.c0 + self.c2) * c0 - a_a + b_b;\n            c.call(f2mPrefix + \"_mul\", Ac0_Ac2, c0, t3),\n            c.call(f2mPrefix + \"_sub\", t3, a_a, t3),\n            c.call(f2mPrefix + \"_add\", t3, b_b, t3),\n\n\n        );\n    }\n    buildF6Mul01();\n\n\n    function buildF12Mul014() {\n\n        const f = module.addFunction(ftmPrefix+ \"_mul014\");\n        f.addParam(\"pA\", \"i32\");    // F12\n        f.addParam(\"pC0\", \"i32\");   // F2\n        f.addParam(\"pC1\", \"i32\");   // F2\n        f.addParam(\"pC4\", \"i32\");   // F2\n        f.addParam(\"pR\", \"i32\");    // F12\n\n        const c = f.getCodeBuilder();\n\n\n        const A_c0 = c.getLocal(\"pA\");\n        const A_c1 = c.i32_add(c.getLocal(\"pA\"), c.i32_const(f1size*6));\n\n        const c0  = c.getLocal(\"pC0\");\n        const c1  = c.getLocal(\"pC1\");\n        const c4  = c.getLocal(\"pC4\");\n\n        const aa = c.i32_const(module.alloc(f1size*6));\n        const bb = c.i32_const(module.alloc(f1size*6));\n        const o = c.i32_const(module.alloc(f1size*2));\n\n        const R_c0 = c.getLocal(\"pR\");\n        const R_c1 = c.i32_add(c.getLocal(\"pR\"), c.i32_const(f1size*6));\n\n        f.addCode(\n            // let aa = self.c0.mul_by_01(c0, c1);\n            c.call(f6mPrefix + \"_mul01\", A_c0, c0, c1, aa),\n\n            // let bb = self.c1.mul_by_1(c4);\n            c.call(f6mPrefix + \"_mul1\", A_c1, c4, bb),\n\n            // let o = c1 + c4;\n            c.call(f2mPrefix + \"_add\", c1, c4, o),\n\n            // let c1 = self.c1 + self.c0;\n            c.call(f6mPrefix + \"_add\", A_c1, A_c0, R_c1),\n\n            // let c1 = c1.mul_by_01(c0, &o);\n            c.call(f6mPrefix + \"_mul01\", R_c1, c0, o, R_c1),\n\n            // let c1 = c1 - aa - bb;\n            c.call(f6mPrefix + \"_sub\", R_c1, aa, R_c1),\n            c.call(f6mPrefix + \"_sub\", R_c1, bb, R_c1),\n\n            // let c0 = bb;\n            c.call(f6mPrefix + \"_copy\", bb, R_c0),\n\n            // let c0 = c0.mul_by_nonresidue();\n            c.call(f6mPrefix + \"_mulNR\", R_c0, R_c0),\n\n            // let c0 = c0 + aa;\n            c.call(f6mPrefix + \"_add\", R_c0, aa, R_c0),\n        );\n    }\n    buildF12Mul014();\n\n\n    function buildELL() {\n        const f = module.addFunction(prefix+ \"_ell\");\n        f.addParam(\"pP\", \"i32\");\n        f.addParam(\"pCoefs\", \"i32\");\n        f.addParam(\"pF\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const Px  = c.getLocal(\"pP\");\n        const Py  = c.i32_add(c.getLocal(\"pP\"), c.i32_const(n8q));\n\n        const F  = c.getLocal(\"pF\");\n\n        const coef0_0  = c.getLocal(\"pCoefs\");\n        const coef0_1  = c.i32_add(c.getLocal(\"pCoefs\"), c.i32_const(f1size));\n        const coef1_0  = c.i32_add(c.getLocal(\"pCoefs\"), c.i32_const(f1size*2));\n        const coef1_1  = c.i32_add(c.getLocal(\"pCoefs\"), c.i32_const(f1size*3));\n        const coef2  = c.i32_add(c.getLocal(\"pCoefs\"), c.i32_const(f1size*4));\n\n        const pc0 = module.alloc(f1size*2);\n        const c0  = c.i32_const(pc0);\n        const c0_c0 = c.i32_const(pc0);\n        const c0_c1 = c.i32_const(pc0+f1size);\n\n        const pc1 = module.alloc(f1size*2);\n        const c1  = c.i32_const(pc1);\n        const c1_c0 = c.i32_const(pc1);\n        const c1_c1 = c.i32_const(pc1+f1size);\n        f.addCode(\n            //     let mut c0 = coeffs.0;\n            //     let mut c1 = coeffs.1;\n            //\n            //    c0.c0 *= p.y;\n            //    c0.c1 *= p.y;\n            //\n            //    c1.c0 *= p.x;\n            //    c1.c1 *= p.x;\n            //\n            //     f.mul_by_014(&coeffs.2, &c1, &c0)\n\n            c.call(f1mPrefix + \"_mul\", coef0_0, Py, c0_c0),\n            c.call(f1mPrefix + \"_mul\", coef0_1, Py, c0_c1),\n            c.call(f1mPrefix + \"_mul\", coef1_0, Px, c1_c0),\n            c.call(f1mPrefix + \"_mul\", coef1_1, Px, c1_c1),\n\n            c.call(ftmPrefix + \"_mul014\", F, coef2, c1, c0, F),\n\n        );\n\n    }\n    buildELL();\n\n    function buildMillerLoop() {\n        const f = module.addFunction(prefix+ \"_millerLoop\");\n        f.addParam(\"ppreP\", \"i32\");\n        f.addParam(\"ppreQ\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"pCoef\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const preP = c.getLocal(\"ppreP\");\n\n        const coefs  = c.getLocal(\"pCoef\");\n\n        const F = c.getLocal(\"r\");\n\n\n        f.addCode(\n            c.call(ftmPrefix + \"_one\", F),\n\n            c.if(\n                c.call(g1mPrefix + \"_isZero\", preP),\n                c.ret([])\n            ),\n            c.if(\n                c.call(g1mPrefix + \"_isZero\", c.getLocal(\"ppreQ\")),\n                c.ret([])\n            ),\n            c.setLocal(\"pCoef\", c.i32_add( c.getLocal(\"ppreQ\"), c.i32_const(f2size*3))),\n\n            c.setLocal(\"i\", c.i32_const(ateLoopBitBytes.length-2)),\n            c.block(c.loop(\n\n\n                c.call(prefix + \"_ell\", preP, coefs,  F),\n                c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n\n                c.if(\n                    c.i32_load8_s(c.getLocal(\"i\"), pAteLoopBitBytes),\n                    [\n                        ...c.call(prefix + \"_ell\", preP, coefs,  F),\n                        ...c.setLocal(\"pCoef\", c.i32_add(c.getLocal(\"pCoef\"), c.i32_const(ateCoefSize))),\n                    ]\n                ),\n                c.call(ftmPrefix + \"_square\", F, F),\n\n                c.br_if(1, c.i32_eq ( c.getLocal(\"i\"), c.i32_const(1) )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            )),\n            c.call(prefix + \"_ell\", preP, coefs,  F),\n\n        );\n\n\n        if (isLoopNegative) {\n            f.addCode(\n                c.call(ftmPrefix + \"_conjugate\", F, F),\n            );\n        }\n    }\n\n\n    function buildFrobeniusMap(n) {\n        const F12 = [\n            [\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n            ],\n            [\n                [1n, 0n],\n                [3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n, 151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n],\n                [793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n, 0n],\n                [2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n, 1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n],\n                [793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n, 0n],\n                [3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n, 877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n],\n                [4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n, 0n],\n                [151655185184498381465642749684540099398075398968325446656007613510403227271200139370504932015952886146304766135027n, 3850754370037169011952147076051364057158807420970682438676050522613628423219637725072182697113062777891589506424760n],\n                [4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n, 0n],\n                [1028732146235106349975324479215795277384839936929757896155643118032610843298655225875571310552543014690878354869257n, 2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n],\n                [4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n, 0n],\n                [877076961050607968509681729531255177986764537961432449499635504522207616027455086505066378536590128544573588734230n, 3125332594171059424908108096204648978570118281977575435832422631601824034463382777937621250592425535493320683825557n],\n            ]\n        ];\n\n        const F6 = [\n            [\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n                [1n, 0n],\n            ],\n            [\n                [1n, 0n],\n                [0n, 4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n],\n                [793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n, 0n],\n                [0n, 1n],\n                [4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n, 0n],\n                [0n, 793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n],\n            ],\n            [\n                [1n, 0n],\n                [4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939437n, 0n],\n                [4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n, 0n],\n                [4002409555221667393417789825735904156556882819939007885332058136124031650490837864442687629129015664037894272559786n, 0n],\n                [793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n, 0n],\n                [793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620351n, 0n],\n            ]\n        ];\n\n        const f = module.addFunction(ftmPrefix + \"_frobeniusMap\"+n);\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        for (let i=0; i<6; i++) {\n            const X = (i==0) ? c.getLocal(\"x\") : c.i32_add(c.getLocal(\"x\"), c.i32_const(i*f2size));\n            const Xc0 = X;\n            const Xc1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(i*f2size + f1size));\n            const R = (i==0) ? c.getLocal(\"r\") : c.i32_add(c.getLocal(\"r\"), c.i32_const(i*f2size));\n            const Rc0 = R;\n            const Rc1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(i*f2size + f1size));\n            const coef = mul2(F12[Math.floor(i/3)][n%12] , F6[i%3][n%6]);\n            const pCoef = module.alloc([\n                ...utils.bigInt2BytesLE(toMontgomery(coef[0]), n8q),\n                ...utils.bigInt2BytesLE(toMontgomery(coef[1]), n8q),\n            ]);\n            if (n%2 == 1) {\n                f.addCode(\n                    c.call(f1mPrefix + \"_copy\", Xc0, Rc0),\n                    c.call(f1mPrefix + \"_neg\", Xc1, Rc1),\n                    c.call(f2mPrefix + \"_mul\", R, c.i32_const(pCoef), R),\n                );\n            } else {\n                f.addCode(c.call(f2mPrefix + \"_mul\", X, c.i32_const(pCoef), R));\n            }\n        }\n\n        function mul2(a, b) {\n            const ac0 = a[0];\n            const ac1 = a[1];\n            const bc0 = b[0];\n            const bc1 = b[1];\n            const res = [\n                (ac0 * bc0 - (ac1 * bc1)) % q,\n                (ac0 * bc1 + (ac1 * bc0)) % q,\n            ];\n            if (isNegative(res[0])) res[0] = res[0] + q;\n            return res;\n        }\n\n    }\n\n\n    function buildCyclotomicSquare() {\n        const f = module.addFunction(prefix+ \"__cyclotomicSquare\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x0 = c.getLocal(\"x\");\n        const x4 = c.i32_add(c.getLocal(\"x\"), c.i32_const(f2size));\n        const x3 = c.i32_add(c.getLocal(\"x\"), c.i32_const(2*f2size));\n        const x2 = c.i32_add(c.getLocal(\"x\"), c.i32_const(3*f2size));\n        const x1 = c.i32_add(c.getLocal(\"x\"), c.i32_const(4*f2size));\n        const x5 = c.i32_add(c.getLocal(\"x\"), c.i32_const(5*f2size));\n\n        const r0 = c.getLocal(\"r\");\n        const r4 = c.i32_add(c.getLocal(\"r\"), c.i32_const(f2size));\n        const r3 = c.i32_add(c.getLocal(\"r\"), c.i32_const(2*f2size));\n        const r2 = c.i32_add(c.getLocal(\"r\"), c.i32_const(3*f2size));\n        const r1 = c.i32_add(c.getLocal(\"r\"), c.i32_const(4*f2size));\n        const r5 = c.i32_add(c.getLocal(\"r\"), c.i32_const(5*f2size));\n\n        const t0 = c.i32_const(module.alloc(f2size));\n        const t1 = c.i32_const(module.alloc(f2size));\n        const t2 = c.i32_const(module.alloc(f2size));\n        const t3 = c.i32_const(module.alloc(f2size));\n        const t4 = c.i32_const(module.alloc(f2size));\n        const t5 = c.i32_const(module.alloc(f2size));\n        const tmp = c.i32_const(module.alloc(f2size));\n        const AUX = c.i32_const(module.alloc(f2size));\n\n\n        f.addCode(\n            //    // t0 + t1*y = (z0 + z1*y)^2 = a^2\n            //    tmp = z0 * z1;\n            //    t0 = (z0 + z1) * (z0 + my_Fp6::non_residue * z1) - tmp - my_Fp6::non_residue * tmp;\n            //    t1 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x0, x1, tmp),\n            c.call(f2mPrefix + \"_mulNR\", x1, t0),\n            c.call(f2mPrefix + \"_add\", x0, t0, t0),\n            c.call(f2mPrefix + \"_add\", x0, x1, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t0, t0),\n            c.call(f2mPrefix + \"_mulNR\", tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t0, AUX, t0),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t1),\n\n            //  // t2 + t3*y = (z2 + z3*y)^2 = b^2\n            //  tmp = z2 * z3;\n            //  t2 = (z2 + z3) * (z2 + my_Fp6::non_residue * z3) - tmp - my_Fp6::non_residue * tmp;\n            //  t3 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x2, x3, tmp),\n            c.call(f2mPrefix + \"_mulNR\", x3, t2),\n            c.call(f2mPrefix + \"_add\", x2, t2, t2),\n            c.call(f2mPrefix + \"_add\", x2, x3, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t2, t2),\n            c.call(f2mPrefix + \"_mulNR\", tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t2, AUX, t2),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t3),\n\n            //  // t4 + t5*y = (z4 + z5*y)^2 = c^2\n            //  tmp = z4 * z5;\n            //  t4 = (z4 + z5) * (z4 + my_Fp6::non_residue * z5) - tmp - my_Fp6::non_residue * tmp;\n            //  t5 = tmp + tmp;\n            c.call(f2mPrefix + \"_mul\", x4, x5, tmp),\n            c.call(f2mPrefix + \"_mulNR\", x5, t4),\n            c.call(f2mPrefix + \"_add\", x4, t4, t4),\n            c.call(f2mPrefix + \"_add\", x4, x5, AUX),\n            c.call(f2mPrefix + \"_mul\", AUX, t4, t4),\n            c.call(f2mPrefix + \"_mulNR\", tmp, AUX),\n            c.call(f2mPrefix + \"_add\", tmp, AUX, AUX),\n            c.call(f2mPrefix + \"_sub\", t4, AUX, t4),\n            c.call(f2mPrefix + \"_add\", tmp, tmp, t5),\n\n            // For A\n            // z0 = 3 * t0 - 2 * z0\n            c.call(f2mPrefix + \"_sub\", t0, x0, r0),\n            c.call(f2mPrefix + \"_add\", r0, r0, r0),\n            c.call(f2mPrefix + \"_add\", t0, r0, r0),\n            // z1 = 3 * t1 + 2 * z1\n            c.call(f2mPrefix + \"_add\", t1, x1, r1),\n            c.call(f2mPrefix + \"_add\", r1, r1, r1),\n            c.call(f2mPrefix + \"_add\", t1, r1, r1),\n\n            // For B\n            // z2 = 3 * (xi * t5) + 2 * z2\n            c.call(f2mPrefix + \"_mul\", t5, c.i32_const(pBls12381Twist), AUX),\n            c.call(f2mPrefix + \"_add\", AUX, x2, r2),\n            c.call(f2mPrefix + \"_add\", r2, r2, r2),\n            c.call(f2mPrefix + \"_add\", AUX, r2, r2),\n            // z3 = 3 * t4 - 2 * z3\n            c.call(f2mPrefix + \"_sub\", t4, x3, r3),\n            c.call(f2mPrefix + \"_add\", r3, r3, r3),\n            c.call(f2mPrefix + \"_add\", t4, r3, r3),\n\n            // For C\n            // z4 = 3 * t2 - 2 * z4\n            c.call(f2mPrefix + \"_sub\", t2, x4, r4),\n            c.call(f2mPrefix + \"_add\", r4, r4, r4),\n            c.call(f2mPrefix + \"_add\", t2, r4, r4),\n            // z5 = 3 * t3 + 2 * z5\n            c.call(f2mPrefix + \"_add\", t3, x5, r5),\n            c.call(f2mPrefix + \"_add\", r5, r5, r5),\n            c.call(f2mPrefix + \"_add\", t3, r5, r5),\n\n        );\n    }\n\n\n    function buildCyclotomicExp(exponent, isExpNegative, fnName) {\n        const exponentNafBytes = naf(exponent).map( (b) => (b==-1 ? 0xFF: b) );\n        const pExponentNafBytes = module.alloc(exponentNafBytes);\n        // const pExponent = module.alloc(utils.bigInt2BytesLE(exponent, n8));\n\n        const f = module.addFunction(prefix+ \"__cyclotomicExp_\"+fnName);\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n        f.addLocal(\"bit\", \"i32\");\n        f.addLocal(\"i\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const x = c.getLocal(\"x\");\n\n        const res = c.getLocal(\"r\");\n\n        const inverse = c.i32_const(module.alloc(ftsize));\n\n\n        f.addCode(\n            c.call(ftmPrefix + \"_conjugate\", x, inverse),\n            c.call(ftmPrefix + \"_one\", res),\n\n            c.if(\n                c.teeLocal(\"bit\", c.i32_load8_s(c.i32_const(exponentNafBytes.length-1), pExponentNafBytes)),\n                c.if(\n                    c.i32_eq(\n                        c.getLocal(\"bit\"),\n                        c.i32_const(1)\n                    ),\n                    c.call(ftmPrefix + \"_mul\", res, x, res),\n                    c.call(ftmPrefix + \"_mul\", res, inverse, res),\n                )\n            ),\n\n            c.setLocal(\"i\", c.i32_const(exponentNafBytes.length-2)),\n            c.block(c.loop(\n                c.call(prefix + \"__cyclotomicSquare\", res, res),\n                c.if(\n                    c.teeLocal(\"bit\", c.i32_load8_s(c.getLocal(\"i\"), pExponentNafBytes)),\n                    c.if(\n                        c.i32_eq(\n                            c.getLocal(\"bit\"),\n                            c.i32_const(1)\n                        ),\n                        c.call(ftmPrefix + \"_mul\", res, x, res),\n                        c.call(ftmPrefix + \"_mul\", res, inverse, res),\n                    )\n                ),\n                c.br_if(1, c.i32_eqz ( c.getLocal(\"i\") )),\n                c.setLocal(\"i\", c.i32_sub(c.getLocal(\"i\"), c.i32_const(1))),\n                c.br(0)\n            ))\n        );\n\n        if (isExpNegative) {\n            f.addCode(\n                c.call(ftmPrefix + \"_conjugate\", res, res),\n            );\n        }\n\n    }\n\n    function buildFinalExponentiation() {\n        buildCyclotomicSquare();\n        buildCyclotomicExp(finalExpZ, finalExpIsNegative, \"w0\");\n\n        const f = module.addFunction(prefix+ \"_finalExponentiation\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const elt = c.getLocal(\"x\");\n        const res = c.getLocal(\"r\");\n        const t0 = c.i32_const(module.alloc(ftsize));\n        const t1 = c.i32_const(module.alloc(ftsize));\n        const t2 = c.i32_const(module.alloc(ftsize));\n        const t3 = c.i32_const(module.alloc(ftsize));\n        const t4 = c.i32_const(module.alloc(ftsize));\n        const t5 = c.i32_const(module.alloc(ftsize));\n        const t6 = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(\n\n            // let mut t0 = f.frobenius_map(6)\n            c.call(ftmPrefix + \"_frobeniusMap6\", elt, t0),\n\n            // let t1 = f.invert()\n            c.call(ftmPrefix + \"_inverse\", elt, t1),\n\n            // let mut t2 = t0 * t1;\n            c.call(ftmPrefix + \"_mul\", t0, t1, t2),\n\n            // t1 = t2.clone();\n            c.call(ftmPrefix + \"_copy\", t2, t1),\n\n            // t2 = t2.frobenius_map().frobenius_map();\n            c.call(ftmPrefix + \"_frobeniusMap2\", t2, t2),\n\n            // t2 *= t1;\n            c.call(ftmPrefix + \"_mul\", t2, t1, t2),\n\n\n            // t1 = cyclotomic_square(t2).conjugate();\n            c.call(prefix + \"__cyclotomicSquare\", t2, t1),\n            c.call(ftmPrefix + \"_conjugate\", t1, t1),\n\n            // let mut t3 = cycolotomic_exp(t2);\n            c.call(prefix + \"__cyclotomicExp_w0\", t2, t3),\n\n            // let mut t4 = cyclotomic_square(t3);\n            c.call(prefix + \"__cyclotomicSquare\", t3, t4),\n\n            // let mut t5 = t1 * t3;\n            c.call(ftmPrefix + \"_mul\", t1, t3, t5),\n\n            // t1 = cycolotomic_exp(t5);\n            c.call(prefix + \"__cyclotomicExp_w0\", t5, t1),\n\n            // t0 = cycolotomic_exp(t1);\n            c.call(prefix + \"__cyclotomicExp_w0\", t1, t0),\n\n            // let mut t6 = cycolotomic_exp(t0);\n            c.call(prefix + \"__cyclotomicExp_w0\", t0, t6),\n\n            // t6 *= t4;\n            c.call(ftmPrefix + \"_mul\", t6, t4, t6),\n\n            // t4 = cycolotomic_exp(t6);\n            c.call(prefix + \"__cyclotomicExp_w0\", t6, t4),\n\n            // t5 = t5.conjugate();\n            c.call(ftmPrefix + \"_conjugate\", t5, t5),\n\n            // t4 *= t5 * t2;\n            c.call(ftmPrefix + \"_mul\", t4, t5, t4),\n            c.call(ftmPrefix + \"_mul\", t4, t2, t4),\n\n            // t5 = t2.conjugate();\n            c.call(ftmPrefix + \"_conjugate\", t2, t5),\n\n            // t1 *= t2;\n            c.call(ftmPrefix + \"_mul\", t1, t2, t1),\n\n            // t1 = t1.frobenius_map().frobenius_map().frobenius_map();\n            c.call(ftmPrefix + \"_frobeniusMap3\", t1, t1),\n\n            // t6 *= t5;\n            c.call(ftmPrefix + \"_mul\", t6, t5, t6),\n\n            // t6 = t6.frobenius_map();\n            c.call(ftmPrefix + \"_frobeniusMap1\", t6, t6),\n\n            // t3 *= t0;\n            c.call(ftmPrefix + \"_mul\", t3, t0, t3),\n\n            // t3 = t3.frobenius_map().frobenius_map();\n            c.call(ftmPrefix + \"_frobeniusMap2\", t3, t3),\n\n            // t3 *= t1;\n            c.call(ftmPrefix + \"_mul\", t3, t1, t3),\n\n            // t3 *= t6;\n            c.call(ftmPrefix + \"_mul\", t3, t6, t3),\n\n            // f = t3 * t4;\n            c.call(ftmPrefix + \"_mul\", t3, t4, res),\n\n        );\n    }\n\n\n    function buildFinalExponentiationOld() {\n        const f = module.addFunction(prefix+ \"_finalExponentiationOld\");\n        f.addParam(\"x\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const exponent = 322277361516934140462891564586510139908379969514828494218366688025288661041104682794998680497580008899973249814104447692778988208376779573819485263026159588510513834876303014016798809919343532899164848730280942609956670917565618115867287399623286813270357901731510188149934363360381614501334086825442271920079363289954510565375378443704372994881406797882676971082200626541916413184642520269678897559532260949334760604962086348898118982248842634379637598665468817769075878555493752214492790122785850202957575200176084204422751485957336465472324810982833638490904279282696134323072515220044451592646885410572234451732790590013479358343841220074174848221722017083597872017638514103174122784843925578370430843522959600095676285723737049438346544753168912974976791528535276317256904336520179281145394686565050419250614107803233314658825463117900250701199181529205942363159325765991819433914303908860460720581408201373164047773794825411011922305820065611121544561808414055302212057471395719432072209245600258134364584636810093520285711072578721435517884103526483832733289802426157301542744476740008494780363354305116978805620671467071400711358839553375340724899735460480144599782014906586543813292157922220645089192130209334926661588737007768565838519456601560804957985667880395221049249803753582637708560n;\n\n        const pExponent = module.alloc(utils.bigInt2BytesLE( exponent, 544 ));\n\n        const c = f.getCodeBuilder();\n\n        f.addCode(\n            c.call(ftmPrefix + \"_exp\", c.getLocal(\"x\"), c.i32_const(pExponent), c.i32_const(544), c.getLocal(\"r\")),\n        );\n    }\n\n\n    const pPreP = module.alloc(prePSize);\n    const pPreQ = module.alloc(preQSize);\n\n    function buildPairingEquation(nPairings) {\n\n        const f = module.addFunction(prefix+ \"_pairingEq\"+nPairings);\n        for (let i=0; i<nPairings; i++) {\n            f.addParam(\"p_\"+i, \"i32\");\n            f.addParam(\"q_\"+i, \"i32\");\n        }\n        f.addParam(\"c\", \"i32\");\n        f.setReturnType(\"i32\");\n\n\n        const c = f.getCodeBuilder();\n\n        const resT = c.i32_const(module.alloc(ftsize));\n        const auxT = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(c.call(ftmPrefix + \"_one\", resT ));\n\n        for (let i=0; i<nPairings; i++) {\n\n            f.addCode(c.call(prefix + \"_prepareG1\", c.getLocal(\"p_\"+i), c.i32_const(pPreP) ));\n            f.addCode(c.call(prefix + \"_prepareG2\", c.getLocal(\"q_\"+i), c.i32_const(pPreQ) ));\n\n            // Checks\n            f.addCode(\n                c.if(\n                    c.i32_eqz(c.call(g1mPrefix + \"_inGroupAffine\", c.i32_const(pPreP))),\n                    c.ret(c.i32_const(0))\n                ),\n                c.if(\n                    c.i32_eqz(c.call(g2mPrefix + \"_inGroupAffine\", c.i32_const(pPreQ))),\n                    c.ret(c.i32_const(0))\n                )\n            );\n\n            f.addCode(c.call(prefix + \"_millerLoop\", c.i32_const(pPreP), c.i32_const(pPreQ), auxT ));\n\n            f.addCode(c.call(ftmPrefix + \"_mul\", resT, auxT, resT ));\n        }\n\n        f.addCode(c.call(prefix + \"_finalExponentiation\", resT, resT ));\n\n        f.addCode(c.call(ftmPrefix + \"_eq\", resT, c.getLocal(\"c\")));\n    }\n\n\n    function buildPairing() {\n\n        const f = module.addFunction(prefix+ \"_pairing\");\n        f.addParam(\"p\", \"i32\");\n        f.addParam(\"q\", \"i32\");\n        f.addParam(\"r\", \"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const resT = c.i32_const(module.alloc(ftsize));\n\n        f.addCode(c.call(prefix + \"_prepareG1\", c.getLocal(\"p\"), c.i32_const(pPreP) ));\n        f.addCode(c.call(prefix + \"_prepareG2\", c.getLocal(\"q\"), c.i32_const(pPreQ) ));\n        f.addCode(c.call(prefix + \"_millerLoop\", c.i32_const(pPreP), c.i32_const(pPreQ), resT ));\n        f.addCode(c.call(prefix + \"_finalExponentiation\", resT, c.getLocal(\"r\") ));\n    }\n\n\n    function buildInGroupG2() {\n        const f = module.addFunction(g2mPrefix+ \"_inGroupAffine\");\n        f.addParam(\"p\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const WINV = [\n            2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279894n,\n            2001204777610833696708894912867952078278441409969503942666029068062015825245418932221343814564507832018947136279893n\n        ];\n\n        const FROB2X = 4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n;\n        const FROB3Y = [\n            2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n,\n            2973677408986561043442465346520108879172042883009249989176415018091420807192182638567116318576472649347015917690530n\n        ];\n\n        const wInv = c.i32_const(module.alloc([\n            ...utils.bigInt2BytesLE(toMontgomery(WINV[0]), n8q),\n            ...utils.bigInt2BytesLE(toMontgomery(WINV[1]), n8q),\n        ]));\n\n        const frob2X = c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(FROB2X), n8q)));\n        const frob3Y = c.i32_const(module.alloc([\n            ...utils.bigInt2BytesLE(toMontgomery(FROB3Y[0]), n8q),\n            ...utils.bigInt2BytesLE(toMontgomery(FROB3Y[1]), n8q),\n        ]));\n\n        const z = c.i32_const(module.alloc(utils.bigInt2BytesLE(finalExpZ, 8)));\n\n        const px = c.getLocal(\"p\");\n        const py = c.i32_add(c.getLocal(\"p\"), c.i32_const(f2size));\n\n        const aux = c.i32_const(module.alloc(f1size));\n\n        const x_winv = c.i32_const(module.alloc(f2size));\n        const y_winv = c.i32_const(module.alloc(f2size));\n        const pf2 = module.alloc(f2size*2);\n        const f2 = c.i32_const(pf2);\n        const f2x = c.i32_const(pf2);\n        const f2x_c1 = c.i32_const(pf2);\n        const f2x_c2 = c.i32_const(pf2+f1size);\n        const f2y = c.i32_const(pf2+f2size);\n        const f2y_c1 = c.i32_const(pf2+f2size);\n        const f2y_c2 = c.i32_const(pf2+f2size+f1size);\n        const pf3 = module.alloc(f2size*3);\n        const f3 = c.i32_const(pf3);\n        const f3x = c.i32_const(pf3);\n        const f3x_c1 = c.i32_const(pf3);\n        const f3x_c2 = c.i32_const(pf3+f1size);\n        const f3y = c.i32_const(pf3+f2size);\n        const f3y_c1 = c.i32_const(pf3+f2size);\n        const f3y_c2 = c.i32_const(pf3+f2size+f1size);\n        const f3z = c.i32_const(pf3+f2size*2);\n\n\n        f.addCode(\n            c.if(\n                c.call(g2mPrefix + \"_isZeroAffine\", c.getLocal(\"p\")),\n                c.ret( c.i32_const(1)),\n            ),\n            c.if(\n                c.i32_eqz(c.call(g2mPrefix + \"_inCurveAffine\", c.getLocal(\"p\"))),\n                c.ret( c.i32_const(0)),\n            ),\n            c.call(f2mPrefix + \"_mul\", px, wInv, x_winv),\n            c.call(f2mPrefix + \"_mul\", py, wInv, y_winv),\n\n            c.call(f2mPrefix + \"_mul1\", x_winv, frob2X, f2x),\n            c.call(f2mPrefix + \"_neg\", y_winv, f2y),\n\n            c.call(f2mPrefix + \"_neg\", x_winv, f3x),\n            c.call(f2mPrefix + \"_mul\", y_winv, frob3Y, f3y),\n\n            c.call(f1mPrefix + \"_sub\", f2x_c1, f2x_c2, aux),\n            c.call(f1mPrefix + \"_add\", f2x_c1, f2x_c2, f2x_c2),\n            c.call(f1mPrefix + \"_copy\", aux, f2x_c1),\n\n            c.call(f1mPrefix + \"_sub\", f2y_c1, f2y_c2, aux),\n            c.call(f1mPrefix + \"_add\", f2y_c1, f2y_c2, f2y_c2),\n            c.call(f1mPrefix + \"_copy\", aux, f2y_c1),\n\n            c.call(f1mPrefix + \"_add\", f3x_c1, f3x_c2, aux),\n            c.call(f1mPrefix + \"_sub\", f3x_c1, f3x_c2, f3x_c2),\n            c.call(f1mPrefix + \"_copy\", aux, f3x_c1),\n\n            c.call(f1mPrefix + \"_sub\", f3y_c2, f3y_c1, aux),\n            c.call(f1mPrefix + \"_add\", f3y_c1, f3y_c2, f3y_c2),\n            c.call(f1mPrefix + \"_copy\", aux, f3y_c1),\n\n            c.call(f2mPrefix + \"_one\", f3z),\n\n            c.call(g2mPrefix + \"_timesScalar\", f3, z, c.i32_const(8), f3),\n            c.call(g2mPrefix + \"_addMixed\", f3, f2, f3),\n\n            c.ret(\n                c.call(g2mPrefix + \"_eqMixed\", f3, c.getLocal(\"p\"))\n            )\n        );\n\n        const fInGroup = module.addFunction(g2mPrefix + \"_inGroup\");\n        fInGroup.addParam(\"pIn\", \"i32\");\n        fInGroup.setReturnType(\"i32\");\n\n        const c2 = fInGroup.getCodeBuilder();\n\n        const aux2 = c2.i32_const(module.alloc(f2size*2));\n\n        fInGroup.addCode(\n            c2.call(g2mPrefix + \"_toAffine\", c2.getLocal(\"pIn\"), aux2),\n\n            c2.ret(\n                c2.call(g2mPrefix + \"_inGroupAffine\", aux2),\n            )\n        );\n\n    }\n\n    function buildInGroupG1() {\n        const f = module.addFunction(g1mPrefix+ \"_inGroupAffine\");\n        f.addParam(\"p\", \"i32\");\n        f.setReturnType(\"i32\");\n\n        const c = f.getCodeBuilder();\n\n        const BETA = 4002409555221667392624310435006688643935503118305586438271171395842971157480381377015405980053539358417135540939436n;\n        const BETA2 = 793479390729215512621379701633421447060886740281060493010456487427281649075476305620758731620350n;\n        const Z2M1D3 = (finalExpZ * finalExpZ - 1n) / 3n;\n\n        const beta = c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(BETA), n8q)));\n        const beta2 = c.i32_const(module.alloc(utils.bigInt2BytesLE(toMontgomery(BETA2), n8q)));\n\n        const z2m1d3 = c.i32_const(module.alloc(utils.bigInt2BytesLE(Z2M1D3, 16)));\n\n\n        const px = c.getLocal(\"p\");\n        const py = c.i32_add(c.getLocal(\"p\"), c.i32_const(f1size));\n\n        const psp = module.alloc(f1size*3);\n        const sp = c.i32_const(psp);\n        const spx = c.i32_const(psp);\n        const spy = c.i32_const(psp+f1size);\n\n        const ps2p = module.alloc(f1size*2);\n        const s2p = c.i32_const(ps2p);\n        const s2px = c.i32_const(ps2p);\n        const s2py = c.i32_const(ps2p+f1size);\n\n        f.addCode(\n            c.if(\n                c.call(g1mPrefix + \"_isZeroAffine\", c.getLocal(\"p\")),\n                c.ret( c.i32_const(1)),\n            ),\n            c.if(\n                c.i32_eqz(c.call(g1mPrefix + \"_inCurveAffine\", c.getLocal(\"p\"))),\n                c.ret( c.i32_const(0)),\n            ),\n\n            c.call(f1mPrefix + \"_mul\", px, beta, spx),\n            c.call(f1mPrefix + \"_copy\", py, spy),\n\n            c.call(f1mPrefix + \"_mul\", px, beta2, s2px),\n            c.call(f1mPrefix + \"_copy\", py, s2py),\n\n\n            c.call(g1mPrefix + \"_doubleAffine\", sp, sp),\n            c.call(g1mPrefix + \"_subMixed\", sp, c.getLocal(\"p\"), sp),\n            c.call(g1mPrefix + \"_subMixed\", sp, s2p, sp),\n\n            c.call(g1mPrefix + \"_timesScalar\", sp, z2m1d3, c.i32_const(16), sp),\n\n            c.ret(\n                c.call(g1mPrefix + \"_eqMixed\", sp, s2p)\n            )\n\n        );\n\n        const fInGroup = module.addFunction(g1mPrefix + \"_inGroup\");\n        fInGroup.addParam(\"pIn\", \"i32\");\n        fInGroup.setReturnType(\"i32\");\n\n        const c2 = fInGroup.getCodeBuilder();\n\n        const aux2 = c2.i32_const(module.alloc(f1size*2));\n\n        fInGroup.addCode(\n            c2.call(g1mPrefix + \"_toAffine\", c2.getLocal(\"pIn\"), aux2),\n\n            c2.ret(\n                c2.call(g1mPrefix + \"_inGroupAffine\", aux2),\n            )\n        );\n    }\n\n    for (let i=0; i<10; i++) {\n        buildFrobeniusMap(i);\n        module.exportFunction(ftmPrefix + \"_frobeniusMap\"+i);\n    }\n\n\n    buildInGroupG1();\n    buildInGroupG2();\n\n    buildPrepAddStep();\n    buildPrepDoubleStep();\n\n    buildPrepareG1();\n    buildPrepareG2();\n\n    buildMillerLoop();\n\n    buildFinalExponentiationOld();\n    buildFinalExponentiation();\n\n    for (let i=1; i<=5; i++) {\n        buildPairingEquation(i);\n        module.exportFunction(prefix + \"_pairingEq\"+i);\n    }\n\n    buildPairing();\n\n    module.exportFunction(prefix + \"_pairing\");\n\n\n    module.exportFunction(prefix + \"_prepareG1\");\n    module.exportFunction(prefix + \"_prepareG2\");\n    module.exportFunction(prefix + \"_millerLoop\");\n    module.exportFunction(prefix + \"_finalExponentiation\");\n    module.exportFunction(prefix + \"_finalExponentiationOld\");\n    module.exportFunction(prefix + \"__cyclotomicSquare\");\n    module.exportFunction(prefix + \"__cyclotomicExp_w0\");\n\n    module.exportFunction(f6mPrefix + \"_mul1\");\n    module.exportFunction(f6mPrefix + \"_mul01\");\n    module.exportFunction(ftmPrefix + \"_mul014\");\n\n    module.exportFunction(g1mPrefix + \"_inGroupAffine\");\n    module.exportFunction(g1mPrefix + \"_inGroup\");\n    module.exportFunction(g2mPrefix + \"_inGroupAffine\");\n    module.exportFunction(g2mPrefix + \"_inGroup\");\n\n    // console.log(module.functionIdxByName);\n};\n\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\n// module.exports.bn128_wasm = require(\"./build/bn128_wasm.js\");\n// module.exports.bls12381_wasm = require(\"./build/bls12381_wasm.js\");\n// module.exports.mnt6753_wasm = require(\"./build/mnt6753_wasm.js\");\n\nmodule.exports.buildBn128 = require(\"./src/bn128/build_bn128.js\");\nmodule.exports.buildBls12381 = require(\"./src/bls12381/build_bls12381.js\");\n// module.exports.buildMnt6753 = require(\"./src/mnt6753/build_mnt7.js\");\n\nmodule.exports.buildF1m = require(\"./src/build_f1m\");\n", "/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nmodule.exports = Worker;", "// Copyright 2018 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the License);\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// <https://apache.org/licenses/LICENSE-2.0>.\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an AS IS BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nclass JSBI extends Array {\n    constructor(length, sign) {\n        super(length);\n        this.sign = sign;\n        // Explicitly set the prototype as per\n        // https://github.com/Microsoft/TypeScript-wiki/blob/main/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        Object.setPrototypeOf(this, JSBI.prototype);\n        if (length > JSBI.__kMaxLength) {\n            throw new RangeError('Maximum BigInt size exceeded');\n        }\n    }\n    static BigInt(arg) {\n        if (typeof arg === 'number') {\n            if (arg === 0)\n                return JSBI.__zero();\n            if (JSBI.__isOneDigitInt(arg)) {\n                if (arg < 0) {\n                    return JSBI.__oneDigit(-arg, true);\n                }\n                return JSBI.__oneDigit(arg, false);\n            }\n            if (!Number.isFinite(arg) || Math.floor(arg) !== arg) {\n                throw new RangeError('The number ' + arg + ' cannot be converted to ' +\n                    'BigInt because it is not an integer');\n            }\n            return JSBI.__fromDouble(arg);\n        }\n        else if (typeof arg === 'string') {\n            const result = JSBI.__fromString(arg);\n            if (result === null) {\n                throw new SyntaxError('Cannot convert ' + arg + ' to a BigInt');\n            }\n            return result;\n        }\n        else if (typeof arg === 'boolean') {\n            if (arg === true) {\n                return JSBI.__oneDigit(1, false);\n            }\n            return JSBI.__zero();\n        }\n        else if (typeof arg === 'object') {\n            if (arg.constructor === JSBI)\n                return arg;\n            const primitive = JSBI.__toPrimitive(arg);\n            return JSBI.BigInt(primitive);\n        }\n        throw new TypeError('Cannot convert ' + arg + ' to a BigInt');\n    }\n    toDebugString() {\n        const result = ['BigInt['];\n        for (const digit of this) {\n            result.push((digit ? (digit >>> 0).toString(16) : digit) + ', ');\n        }\n        result.push(']');\n        return result.join('');\n    }\n    toString(radix = 10) {\n        if (radix < 2 || radix > 36) {\n            throw new RangeError('toString() radix argument must be between 2 and 36');\n        }\n        if (this.length === 0)\n            return '0';\n        if ((radix & (radix - 1)) === 0) {\n            return JSBI.__toStringBasePowerOfTwo(this, radix);\n        }\n        return JSBI.__toStringGeneric(this, radix, false);\n    }\n    valueOf() {\n        throw new Error('Convert JSBI instances to native numbers using `toNumber`.');\n    }\n    // Equivalent of \"Number(my_bigint)\" in the native implementation.\n    // TODO: add more tests\n    static toNumber(x) {\n        const xLength = x.length;\n        if (xLength === 0)\n            return 0;\n        if (xLength === 1) {\n            const value = x.__unsignedDigit(0);\n            return x.sign ? -value : value;\n        }\n        const xMsd = x.__digit(xLength - 1);\n        const msdLeadingZeros = JSBI.__clz30(xMsd);\n        const xBitLength = xLength * 30 - msdLeadingZeros;\n        if (xBitLength > 1024)\n            return x.sign ? -Infinity : Infinity;\n        let exponent = xBitLength - 1;\n        let currentDigit = xMsd;\n        let digitIndex = xLength - 1;\n        const shift = msdLeadingZeros + 3;\n        let mantissaHigh = (shift === 32) ? 0 : currentDigit << shift;\n        mantissaHigh >>>= 12;\n        const mantissaHighBitsUnset = shift - 12;\n        let mantissaLow = (shift >= 12) ? 0 : (currentDigit << (20 + shift));\n        let mantissaLowBitsUnset = 20 + shift;\n        if (mantissaHighBitsUnset > 0 && digitIndex > 0) {\n            digitIndex--;\n            currentDigit = x.__digit(digitIndex);\n            mantissaHigh |= (currentDigit >>> (30 - mantissaHighBitsUnset));\n            mantissaLow = currentDigit << mantissaHighBitsUnset + 2;\n            mantissaLowBitsUnset = mantissaHighBitsUnset + 2;\n        }\n        while (mantissaLowBitsUnset > 0 && digitIndex > 0) {\n            digitIndex--;\n            currentDigit = x.__digit(digitIndex);\n            if (mantissaLowBitsUnset >= 30) {\n                mantissaLow |= (currentDigit << (mantissaLowBitsUnset - 30));\n            }\n            else {\n                mantissaLow |= (currentDigit >>> (30 - mantissaLowBitsUnset));\n            }\n            mantissaLowBitsUnset -= 30;\n        }\n        const rounding = JSBI.__decideRounding(x, mantissaLowBitsUnset, digitIndex, currentDigit);\n        if (rounding === 1 || (rounding === 0 && (mantissaLow & 1) === 1)) {\n            mantissaLow = (mantissaLow + 1) >>> 0;\n            if (mantissaLow === 0) {\n                // Incrementing mantissaLow overflowed.\n                mantissaHigh++;\n                if ((mantissaHigh >>> 20) !== 0) {\n                    // Incrementing mantissaHigh overflowed.\n                    mantissaHigh = 0;\n                    exponent++;\n                    if (exponent > 1023) {\n                        // Incrementing the exponent overflowed.\n                        return x.sign ? -Infinity : Infinity;\n                    }\n                }\n            }\n        }\n        const signBit = x.sign ? (1 << 31) : 0;\n        exponent = (exponent + 0x3FF) << 20;\n        JSBI.__kBitConversionInts[1] = signBit | exponent | mantissaHigh;\n        JSBI.__kBitConversionInts[0] = mantissaLow;\n        return JSBI.__kBitConversionDouble[0];\n    }\n    // Operations.\n    static unaryMinus(x) {\n        if (x.length === 0)\n            return x;\n        const result = x.__copy();\n        result.sign = !x.sign;\n        return result;\n    }\n    static bitwiseNot(x) {\n        if (x.sign) {\n            // ~(-x) == ~(~(x-1)) == x-1\n            return JSBI.__absoluteSubOne(x).__trim();\n        }\n        // ~x == -x-1 == -(x+1)\n        return JSBI.__absoluteAddOne(x, true);\n    }\n    static exponentiate(x, y) {\n        if (y.sign) {\n            throw new RangeError('Exponent must be positive');\n        }\n        if (y.length === 0) {\n            return JSBI.__oneDigit(1, false);\n        }\n        if (x.length === 0)\n            return x;\n        if (x.length === 1 && x.__digit(0) === 1) {\n            // (-1) ** even_number == 1.\n            if (x.sign && (y.__digit(0) & 1) === 0) {\n                return JSBI.unaryMinus(x);\n            }\n            // (-1) ** odd_number == -1, 1 ** anything == 1.\n            return x;\n        }\n        // For all bases >= 2, very large exponents would lead to unrepresentable\n        // results.\n        if (y.length > 1)\n            throw new RangeError('BigInt too big');\n        let expValue = y.__unsignedDigit(0);\n        if (expValue === 1)\n            return x;\n        if (expValue >= JSBI.__kMaxLengthBits) {\n            throw new RangeError('BigInt too big');\n        }\n        if (x.length === 1 && x.__digit(0) === 2) {\n            // Fast path for 2^n.\n            const neededDigits = 1 + ((expValue / 30) | 0);\n            const sign = x.sign && ((expValue & 1) !== 0);\n            const result = new JSBI(neededDigits, sign);\n            result.__initializeDigits();\n            // All bits are zero. Now set the n-th bit.\n            const msd = 1 << (expValue % 30);\n            result.__setDigit(neededDigits - 1, msd);\n            return result;\n        }\n        let result = null;\n        let runningSquare = x;\n        // This implicitly sets the result's sign correctly.\n        if ((expValue & 1) !== 0)\n            result = x;\n        expValue >>= 1;\n        for (; expValue !== 0; expValue >>= 1) {\n            runningSquare = JSBI.multiply(runningSquare, runningSquare);\n            if ((expValue & 1) !== 0) {\n                if (result === null) {\n                    result = runningSquare;\n                }\n                else {\n                    result = JSBI.multiply(result, runningSquare);\n                }\n            }\n        }\n        // TODO see if there's a way for tsc to infer this will always happen?\n        return result;\n    }\n    static multiply(x, y) {\n        if (x.length === 0)\n            return x;\n        if (y.length === 0)\n            return y;\n        let resultLength = x.length + y.length;\n        if (x.__clzmsd() + y.__clzmsd() >= 30) {\n            resultLength--;\n        }\n        const result = new JSBI(resultLength, x.sign !== y.sign);\n        result.__initializeDigits();\n        for (let i = 0; i < x.length; i++) {\n            JSBI.__multiplyAccumulate(y, x.__digit(i), result, i);\n        }\n        return result.__trim();\n    }\n    static divide(x, y) {\n        if (y.length === 0)\n            throw new RangeError('Division by zero');\n        if (JSBI.__absoluteCompare(x, y) < 0)\n            return JSBI.__zero();\n        const resultSign = x.sign !== y.sign;\n        const divisor = y.__unsignedDigit(0);\n        let quotient;\n        if (y.length === 1 && divisor <= 0x7FFF) {\n            if (divisor === 1) {\n                return resultSign === x.sign ? x : JSBI.unaryMinus(x);\n            }\n            quotient = JSBI.__absoluteDivSmall(x, divisor, null);\n        }\n        else {\n            quotient = JSBI.__absoluteDivLarge(x, y, true, false);\n        }\n        quotient.sign = resultSign;\n        return quotient.__trim();\n    }\n    static remainder(x, y) {\n        if (y.length === 0)\n            throw new RangeError('Division by zero');\n        if (JSBI.__absoluteCompare(x, y) < 0)\n            return x;\n        const divisor = y.__unsignedDigit(0);\n        if (y.length === 1 && divisor <= 0x7FFF) {\n            if (divisor === 1)\n                return JSBI.__zero();\n            const remainderDigit = JSBI.__absoluteModSmall(x, divisor);\n            if (remainderDigit === 0)\n                return JSBI.__zero();\n            return JSBI.__oneDigit(remainderDigit, x.sign);\n        }\n        const remainder = JSBI.__absoluteDivLarge(x, y, false, true);\n        remainder.sign = x.sign;\n        return remainder.__trim();\n    }\n    static add(x, y) {\n        const sign = x.sign;\n        if (sign === y.sign) {\n            // x + y == x + y\n            // -x + -y == -(x + y)\n            return JSBI.__absoluteAdd(x, y, sign);\n        }\n        // x + -y == x - y == -(y - x)\n        // -x + y == y - x == -(x - y)\n        if (JSBI.__absoluteCompare(x, y) >= 0) {\n            return JSBI.__absoluteSub(x, y, sign);\n        }\n        return JSBI.__absoluteSub(y, x, !sign);\n    }\n    static subtract(x, y) {\n        const sign = x.sign;\n        if (sign !== y.sign) {\n            // x - (-y) == x + y\n            // (-x) - y == -(x + y)\n            return JSBI.__absoluteAdd(x, y, sign);\n        }\n        // x - y == -(y - x)\n        // (-x) - (-y) == y - x == -(x - y)\n        if (JSBI.__absoluteCompare(x, y) >= 0) {\n            return JSBI.__absoluteSub(x, y, sign);\n        }\n        return JSBI.__absoluteSub(y, x, !sign);\n    }\n    static leftShift(x, y) {\n        if (y.length === 0 || x.length === 0)\n            return x;\n        if (y.sign)\n            return JSBI.__rightShiftByAbsolute(x, y);\n        return JSBI.__leftShiftByAbsolute(x, y);\n    }\n    static signedRightShift(x, y) {\n        if (y.length === 0 || x.length === 0)\n            return x;\n        if (y.sign)\n            return JSBI.__leftShiftByAbsolute(x, y);\n        return JSBI.__rightShiftByAbsolute(x, y);\n    }\n    static unsignedRightShift() {\n        throw new TypeError('BigInts have no unsigned right shift; use >> instead');\n    }\n    static lessThan(x, y) {\n        return JSBI.__compareToBigInt(x, y) < 0;\n    }\n    static lessThanOrEqual(x, y) {\n        return JSBI.__compareToBigInt(x, y) <= 0;\n    }\n    static greaterThan(x, y) {\n        return JSBI.__compareToBigInt(x, y) > 0;\n    }\n    static greaterThanOrEqual(x, y) {\n        return JSBI.__compareToBigInt(x, y) >= 0;\n    }\n    static equal(x, y) {\n        if (x.sign !== y.sign)\n            return false;\n        if (x.length !== y.length)\n            return false;\n        for (let i = 0; i < x.length; i++) {\n            if (x.__digit(i) !== y.__digit(i))\n                return false;\n        }\n        return true;\n    }\n    static notEqual(x, y) {\n        return !JSBI.equal(x, y);\n    }\n    static bitwiseAnd(x, y) {\n        if (!x.sign && !y.sign) {\n            return JSBI.__absoluteAnd(x, y).__trim();\n        }\n        else if (x.sign && y.sign) {\n            const resultLength = Math.max(x.length, y.length) + 1;\n            // (-x) & (-y) == ~(x-1) & ~(y-1) == ~((x-1) | (y-1))\n            // == -(((x-1) | (y-1)) + 1)\n            let result = JSBI.__absoluteSubOne(x, resultLength);\n            const y1 = JSBI.__absoluteSubOne(y);\n            result = JSBI.__absoluteOr(result, y1, result);\n            return JSBI.__absoluteAddOne(result, true, result).__trim();\n        }\n        // Assume that x is the positive BigInt.\n        if (x.sign) {\n            [x, y] = [y, x];\n        }\n        // x & (-y) == x & ~(y-1) == x &~ (y-1)\n        return JSBI.__absoluteAndNot(x, JSBI.__absoluteSubOne(y)).__trim();\n    }\n    static bitwiseXor(x, y) {\n        if (!x.sign && !y.sign) {\n            return JSBI.__absoluteXor(x, y).__trim();\n        }\n        else if (x.sign && y.sign) {\n            // (-x) ^ (-y) == ~(x-1) ^ ~(y-1) == (x-1) ^ (y-1)\n            const resultLength = Math.max(x.length, y.length);\n            const result = JSBI.__absoluteSubOne(x, resultLength);\n            const y1 = JSBI.__absoluteSubOne(y);\n            return JSBI.__absoluteXor(result, y1, result).__trim();\n        }\n        const resultLength = Math.max(x.length, y.length) + 1;\n        // Assume that x is the positive BigInt.\n        if (x.sign) {\n            [x, y] = [y, x];\n        }\n        // x ^ (-y) == x ^ ~(y-1) == ~(x ^ (y-1)) == -((x ^ (y-1)) + 1)\n        let result = JSBI.__absoluteSubOne(y, resultLength);\n        result = JSBI.__absoluteXor(result, x, result);\n        return JSBI.__absoluteAddOne(result, true, result).__trim();\n    }\n    static bitwiseOr(x, y) {\n        const resultLength = Math.max(x.length, y.length);\n        if (!x.sign && !y.sign) {\n            return JSBI.__absoluteOr(x, y).__trim();\n        }\n        else if (x.sign && y.sign) {\n            // (-x) | (-y) == ~(x-1) | ~(y-1) == ~((x-1) & (y-1))\n            // == -(((x-1) & (y-1)) + 1)\n            let result = JSBI.__absoluteSubOne(x, resultLength);\n            const y1 = JSBI.__absoluteSubOne(y);\n            result = JSBI.__absoluteAnd(result, y1, result);\n            return JSBI.__absoluteAddOne(result, true, result).__trim();\n        }\n        // Assume that x is the positive BigInt.\n        if (x.sign) {\n            [x, y] = [y, x];\n        }\n        // x | (-y) == x | ~(y-1) == ~((y-1) &~ x) == -(((y-1) ~& x) + 1)\n        let result = JSBI.__absoluteSubOne(y, resultLength);\n        result = JSBI.__absoluteAndNot(result, x, result);\n        return JSBI.__absoluteAddOne(result, true, result).__trim();\n    }\n    static asIntN(n, x) {\n        if (x.length === 0)\n            return x;\n        n = Math.floor(n);\n        if (n < 0) {\n            throw new RangeError('Invalid value: not (convertible to) a safe integer');\n        }\n        if (n === 0)\n            return JSBI.__zero();\n        // If {x} has less than {n} bits, return it directly.\n        if (n >= JSBI.__kMaxLengthBits)\n            return x;\n        const neededLength = ((n + 29) / 30) | 0;\n        if (x.length < neededLength)\n            return x;\n        const topDigit = x.__unsignedDigit(neededLength - 1);\n        const compareDigit = 1 << ((n - 1) % 30);\n        if (x.length === neededLength && topDigit < compareDigit)\n            return x;\n        // Otherwise truncate and simulate two's complement.\n        const hasBit = (topDigit & compareDigit) === compareDigit;\n        if (!hasBit)\n            return JSBI.__truncateToNBits(n, x);\n        if (!x.sign)\n            return JSBI.__truncateAndSubFromPowerOfTwo(n, x, true);\n        if ((topDigit & (compareDigit - 1)) === 0) {\n            for (let i = neededLength - 2; i >= 0; i--) {\n                if (x.__digit(i) !== 0) {\n                    return JSBI.__truncateAndSubFromPowerOfTwo(n, x, false);\n                }\n            }\n            if (x.length === neededLength && topDigit === compareDigit)\n                return x;\n            return JSBI.__truncateToNBits(n, x);\n        }\n        return JSBI.__truncateAndSubFromPowerOfTwo(n, x, false);\n    }\n    static asUintN(n, x) {\n        if (x.length === 0)\n            return x;\n        n = Math.floor(n);\n        if (n < 0) {\n            throw new RangeError('Invalid value: not (convertible to) a safe integer');\n        }\n        if (n === 0)\n            return JSBI.__zero();\n        // If {x} is negative, simulate two's complement representation.\n        if (x.sign) {\n            if (n > JSBI.__kMaxLengthBits) {\n                throw new RangeError('BigInt too big');\n            }\n            return JSBI.__truncateAndSubFromPowerOfTwo(n, x, false);\n        }\n        // If {x} is positive and has up to {n} bits, return it directly.\n        if (n >= JSBI.__kMaxLengthBits)\n            return x;\n        const neededLength = ((n + 29) / 30) | 0;\n        if (x.length < neededLength)\n            return x;\n        const bitsInTopDigit = n % 30;\n        if (x.length == neededLength) {\n            if (bitsInTopDigit === 0)\n                return x;\n            const topDigit = x.__digit(neededLength - 1);\n            if ((topDigit >>> bitsInTopDigit) === 0)\n                return x;\n        }\n        // Otherwise, truncate.\n        return JSBI.__truncateToNBits(n, x);\n    }\n    // Operators.\n    static ADD(x, y) {\n        x = JSBI.__toPrimitive(x);\n        y = JSBI.__toPrimitive(y);\n        if (typeof x === 'string') {\n            if (typeof y !== 'string')\n                y = y.toString();\n            return x + y;\n        }\n        if (typeof y === 'string') {\n            return x.toString() + y;\n        }\n        x = JSBI.__toNumeric(x);\n        y = JSBI.__toNumeric(y);\n        if (JSBI.__isBigInt(x) && JSBI.__isBigInt(y)) {\n            return JSBI.add(x, y);\n        }\n        if (typeof x === 'number' && typeof y === 'number') {\n            return x + y;\n        }\n        throw new TypeError('Cannot mix BigInt and other types, use explicit conversions');\n    }\n    static LT(x, y) {\n        return JSBI.__compare(x, y, 0);\n    }\n    static LE(x, y) {\n        return JSBI.__compare(x, y, 1);\n    }\n    static GT(x, y) {\n        return JSBI.__compare(x, y, 2);\n    }\n    static GE(x, y) {\n        return JSBI.__compare(x, y, 3);\n    }\n    static EQ(x, y) {\n        while (true) {\n            if (JSBI.__isBigInt(x)) {\n                if (JSBI.__isBigInt(y))\n                    return JSBI.equal(x, y);\n                return JSBI.EQ(y, x);\n            }\n            else if (typeof x === 'number') {\n                if (JSBI.__isBigInt(y))\n                    return JSBI.__equalToNumber(y, x);\n                if (typeof y !== 'object')\n                    return x == y;\n                y = JSBI.__toPrimitive(y);\n            }\n            else if (typeof x === 'string') {\n                if (JSBI.__isBigInt(y)) {\n                    x = JSBI.__fromString(x);\n                    if (x === null)\n                        return false;\n                    return JSBI.equal(x, y);\n                }\n                if (typeof y !== 'object')\n                    return x == y;\n                y = JSBI.__toPrimitive(y);\n            }\n            else if (typeof x === 'boolean') {\n                if (JSBI.__isBigInt(y))\n                    return JSBI.__equalToNumber(y, +x);\n                if (typeof y !== 'object')\n                    return x == y;\n                y = JSBI.__toPrimitive(y);\n            }\n            else if (typeof x === 'symbol') {\n                if (JSBI.__isBigInt(y))\n                    return false;\n                if (typeof y !== 'object')\n                    return x == y;\n                y = JSBI.__toPrimitive(y);\n            }\n            else if (typeof x === 'object') {\n                if (typeof y === 'object' && y.constructor !== JSBI)\n                    return x == y;\n                x = JSBI.__toPrimitive(x);\n            }\n            else {\n                return x == y;\n            }\n        }\n    }\n    static NE(x, y) {\n        return !JSBI.EQ(x, y);\n    }\n    // DataView-related functionality.\n    static DataViewGetBigInt64(dataview, byteOffset, littleEndian = false) {\n        return JSBI.asIntN(64, JSBI.DataViewGetBigUint64(dataview, byteOffset, littleEndian));\n    }\n    static DataViewGetBigUint64(dataview, byteOffset, littleEndian = false) {\n        const [h, l] = littleEndian ? [4, 0] : [0, 4];\n        const high = dataview.getUint32(byteOffset + h, littleEndian);\n        const low = dataview.getUint32(byteOffset + l, littleEndian);\n        const result = new JSBI(3, false);\n        result.__setDigit(0, low & 0x3FFFFFFF);\n        result.__setDigit(1, ((high & 0xFFFFFFF) << 2) | (low >>> 30));\n        result.__setDigit(2, high >>> 28);\n        return result.__trim();\n    }\n    static DataViewSetBigInt64(dataview, byteOffset, value, littleEndian = false) {\n        JSBI.DataViewSetBigUint64(dataview, byteOffset, value, littleEndian);\n    }\n    static DataViewSetBigUint64(dataview, byteOffset, value, littleEndian = false) {\n        value = JSBI.asUintN(64, value);\n        let high = 0;\n        let low = 0;\n        if (value.length > 0) {\n            low = value.__digit(0);\n            if (value.length > 1) {\n                const d1 = value.__digit(1);\n                low = low | d1 << 30;\n                high = d1 >>> 2;\n                if (value.length > 2) {\n                    high = high | (value.__digit(2) << 28);\n                }\n            }\n        }\n        const [h, l] = littleEndian ? [4, 0] : [0, 4];\n        dataview.setUint32(byteOffset + h, high, littleEndian);\n        dataview.setUint32(byteOffset + l, low, littleEndian);\n    }\n    // Helpers.\n    static __zero() {\n        return new JSBI(0, false);\n    }\n    static __oneDigit(value, sign) {\n        const result = new JSBI(1, sign);\n        result.__setDigit(0, value);\n        return result;\n    }\n    __copy() {\n        const result = new JSBI(this.length, this.sign);\n        for (let i = 0; i < this.length; i++) {\n            result[i] = this[i];\n        }\n        return result;\n    }\n    __trim() {\n        let newLength = this.length;\n        let last = this[newLength - 1];\n        while (last === 0) {\n            newLength--;\n            last = this[newLength - 1];\n            this.pop();\n        }\n        if (newLength === 0)\n            this.sign = false;\n        return this;\n    }\n    __initializeDigits() {\n        for (let i = 0; i < this.length; i++) {\n            this[i] = 0;\n        }\n    }\n    static __decideRounding(x, mantissaBitsUnset, digitIndex, currentDigit) {\n        if (mantissaBitsUnset > 0)\n            return -1;\n        let topUnconsumedBit;\n        if (mantissaBitsUnset < 0) {\n            topUnconsumedBit = -mantissaBitsUnset - 1;\n        }\n        else {\n            // {currentDigit} fit the mantissa exactly; look at the next digit.\n            if (digitIndex === 0)\n                return -1;\n            digitIndex--;\n            currentDigit = x.__digit(digitIndex);\n            topUnconsumedBit = 29;\n        }\n        // If the most significant remaining bit is 0, round down.\n        let mask = 1 << topUnconsumedBit;\n        if ((currentDigit & mask) === 0)\n            return -1;\n        // If any other remaining bit is set, round up.\n        mask -= 1;\n        if ((currentDigit & mask) !== 0)\n            return 1;\n        while (digitIndex > 0) {\n            digitIndex--;\n            if (x.__digit(digitIndex) !== 0)\n                return 1;\n        }\n        return 0;\n    }\n    static __fromDouble(value) {\n        const sign = value < 0;\n        JSBI.__kBitConversionDouble[0] = value;\n        const rawExponent = (JSBI.__kBitConversionInts[1] >>> 20) & 0x7FF;\n        const exponent = rawExponent - 0x3FF;\n        const digits = ((exponent / 30) | 0) + 1;\n        const result = new JSBI(digits, sign);\n        const kHiddenBit = 0x00100000;\n        let mantissaHigh = (JSBI.__kBitConversionInts[1] & 0xFFFFF) | kHiddenBit;\n        let mantissaLow = JSBI.__kBitConversionInts[0];\n        const kMantissaHighTopBit = 20;\n        // 0-indexed position of most significant bit in most significant digit.\n        const msdTopBit = exponent % 30;\n        // Number of unused bits in the mantissa. We'll keep them shifted to the\n        // left (i.e. most significant part).\n        let remainingMantissaBits = 0;\n        // Next digit under construction.\n        let digit;\n        // First, build the MSD by shifting the mantissa appropriately.\n        if (msdTopBit < kMantissaHighTopBit) {\n            const shift = kMantissaHighTopBit - msdTopBit;\n            remainingMantissaBits = shift + 32;\n            digit = mantissaHigh >>> shift;\n            mantissaHigh = (mantissaHigh << (32 - shift)) | (mantissaLow >>> shift);\n            mantissaLow = mantissaLow << (32 - shift);\n        }\n        else if (msdTopBit === kMantissaHighTopBit) {\n            remainingMantissaBits = 32;\n            digit = mantissaHigh;\n            mantissaHigh = mantissaLow;\n            mantissaLow = 0;\n        }\n        else {\n            const shift = msdTopBit - kMantissaHighTopBit;\n            remainingMantissaBits = 32 - shift;\n            digit = (mantissaHigh << shift) | (mantissaLow >>> (32 - shift));\n            mantissaHigh = mantissaLow << shift;\n            mantissaLow = 0;\n        }\n        result.__setDigit(digits - 1, digit);\n        // Then fill in the rest of the digits.\n        for (let digitIndex = digits - 2; digitIndex >= 0; digitIndex--) {\n            if (remainingMantissaBits > 0) {\n                remainingMantissaBits -= 30;\n                digit = mantissaHigh >>> 2;\n                mantissaHigh = (mantissaHigh << 30) | (mantissaLow >>> 2);\n                mantissaLow = (mantissaLow << 30);\n            }\n            else {\n                digit = 0;\n            }\n            result.__setDigit(digitIndex, digit);\n        }\n        return result.__trim();\n    }\n    static __isWhitespace(c) {\n        if (c <= 0x0D && c >= 0x09)\n            return true;\n        if (c <= 0x9F)\n            return c === 0x20;\n        if (c <= 0x01FFFF) {\n            return c === 0xA0 || c === 0x1680;\n        }\n        if (c <= 0x02FFFF) {\n            c &= 0x01FFFF;\n            return c <= 0x0A || c === 0x28 || c === 0x29 || c === 0x2F ||\n                c === 0x5F || c === 0x1000;\n        }\n        return c === 0xFEFF;\n    }\n    static __fromString(string, radix = 0) {\n        let sign = 0;\n        let leadingZero = false;\n        const length = string.length;\n        let cursor = 0;\n        if (cursor === length)\n            return JSBI.__zero();\n        let current = string.charCodeAt(cursor);\n        // Skip whitespace.\n        while (JSBI.__isWhitespace(current)) {\n            if (++cursor === length)\n                return JSBI.__zero();\n            current = string.charCodeAt(cursor);\n        }\n        // Detect radix.\n        if (current === 0x2B) { // '+'\n            if (++cursor === length)\n                return null;\n            current = string.charCodeAt(cursor);\n            sign = 1;\n        }\n        else if (current === 0x2D) { // '-'\n            if (++cursor === length)\n                return null;\n            current = string.charCodeAt(cursor);\n            sign = -1;\n        }\n        if (radix === 0) {\n            radix = 10;\n            if (current === 0x30) { // '0'\n                if (++cursor === length)\n                    return JSBI.__zero();\n                current = string.charCodeAt(cursor);\n                if (current === 0x58 || current === 0x78) { // 'X' or 'x'\n                    radix = 16;\n                    if (++cursor === length)\n                        return null;\n                    current = string.charCodeAt(cursor);\n                }\n                else if (current === 0x4F || current === 0x6F) { // 'O' or 'o'\n                    radix = 8;\n                    if (++cursor === length)\n                        return null;\n                    current = string.charCodeAt(cursor);\n                }\n                else if (current === 0x42 || current === 0x62) { // 'B' or 'b'\n                    radix = 2;\n                    if (++cursor === length)\n                        return null;\n                    current = string.charCodeAt(cursor);\n                }\n                else {\n                    leadingZero = true;\n                }\n            }\n        }\n        else if (radix === 16) {\n            if (current === 0x30) { // '0'\n                // Allow \"0x\" prefix.\n                if (++cursor === length)\n                    return JSBI.__zero();\n                current = string.charCodeAt(cursor);\n                if (current === 0x58 || current === 0x78) { // 'X' or 'x'\n                    if (++cursor === length)\n                        return null;\n                    current = string.charCodeAt(cursor);\n                }\n                else {\n                    leadingZero = true;\n                }\n            }\n        }\n        if (sign !== 0 && radix !== 10)\n            return null;\n        // Skip leading zeros.\n        while (current === 0x30) {\n            leadingZero = true;\n            if (++cursor === length)\n                return JSBI.__zero();\n            current = string.charCodeAt(cursor);\n        }\n        // Allocate result.\n        const chars = length - cursor;\n        let bitsPerChar = JSBI.__kMaxBitsPerChar[radix];\n        let roundup = JSBI.__kBitsPerCharTableMultiplier - 1;\n        if (chars > (1 << 30) / bitsPerChar)\n            return null;\n        const bitsMin = (bitsPerChar * chars + roundup) >>> JSBI.__kBitsPerCharTableShift;\n        const resultLength = ((bitsMin + 29) / 30) | 0;\n        const result = new JSBI(resultLength, false);\n        // Parse.\n        const limDigit = radix < 10 ? radix : 10;\n        const limAlpha = radix > 10 ? radix - 10 : 0;\n        if ((radix & (radix - 1)) === 0) {\n            // Power-of-two radix.\n            bitsPerChar >>= JSBI.__kBitsPerCharTableShift;\n            const parts = [];\n            const partsBits = [];\n            let done = false;\n            do {\n                let part = 0;\n                let bits = 0;\n                while (true) {\n                    let d;\n                    if (((current - 48) >>> 0) < limDigit) {\n                        d = current - 48;\n                    }\n                    else if ((((current | 32) - 97) >>> 0) < limAlpha) {\n                        d = (current | 32) - 87;\n                    }\n                    else {\n                        done = true;\n                        break;\n                    }\n                    bits += bitsPerChar;\n                    part = (part << bitsPerChar) | d;\n                    if (++cursor === length) {\n                        done = true;\n                        break;\n                    }\n                    current = string.charCodeAt(cursor);\n                    if (bits + bitsPerChar > 30)\n                        break;\n                }\n                parts.push(part);\n                partsBits.push(bits);\n            } while (!done);\n            JSBI.__fillFromParts(result, parts, partsBits);\n        }\n        else {\n            result.__initializeDigits();\n            let done = false;\n            let charsSoFar = 0;\n            do {\n                let part = 0;\n                let multiplier = 1;\n                while (true) {\n                    let d;\n                    if (((current - 48) >>> 0) < limDigit) {\n                        d = current - 48;\n                    }\n                    else if ((((current | 32) - 97) >>> 0) < limAlpha) {\n                        d = (current | 32) - 87;\n                    }\n                    else {\n                        done = true;\n                        break;\n                    }\n                    const m = multiplier * radix;\n                    if (m > 0x3FFFFFFF)\n                        break;\n                    multiplier = m;\n                    part = part * radix + d;\n                    charsSoFar++;\n                    if (++cursor === length) {\n                        done = true;\n                        break;\n                    }\n                    current = string.charCodeAt(cursor);\n                }\n                roundup = JSBI.__kBitsPerCharTableMultiplier * 30 - 1;\n                const digitsSoFar = (((bitsPerChar * charsSoFar + roundup) >>>\n                    JSBI.__kBitsPerCharTableShift) / 30) | 0;\n                result.__inplaceMultiplyAdd(multiplier, part, digitsSoFar);\n            } while (!done);\n        }\n        if (cursor !== length) {\n            if (!JSBI.__isWhitespace(current))\n                return null;\n            for (cursor++; cursor < length; cursor++) {\n                current = string.charCodeAt(cursor);\n                if (!JSBI.__isWhitespace(current))\n                    return null;\n            }\n        }\n        // Get result.\n        result.sign = (sign === -1);\n        return result.__trim();\n    }\n    static __fillFromParts(result, parts, partsBits) {\n        let digitIndex = 0;\n        let digit = 0;\n        let bitsInDigit = 0;\n        for (let i = parts.length - 1; i >= 0; i--) {\n            const part = parts[i];\n            const partBits = partsBits[i];\n            digit |= (part << bitsInDigit);\n            bitsInDigit += partBits;\n            if (bitsInDigit === 30) {\n                result.__setDigit(digitIndex++, digit);\n                bitsInDigit = 0;\n                digit = 0;\n            }\n            else if (bitsInDigit > 30) {\n                result.__setDigit(digitIndex++, digit & 0x3FFFFFFF);\n                bitsInDigit -= 30;\n                digit = part >>> (partBits - bitsInDigit);\n            }\n        }\n        if (digit !== 0) {\n            if (digitIndex >= result.length)\n                throw new Error('implementation bug');\n            result.__setDigit(digitIndex++, digit);\n        }\n        for (; digitIndex < result.length; digitIndex++) {\n            result.__setDigit(digitIndex, 0);\n        }\n    }\n    static __toStringBasePowerOfTwo(x, radix) {\n        const length = x.length;\n        let bits = radix - 1;\n        bits = ((bits >>> 1) & 0x55) + (bits & 0x55);\n        bits = ((bits >>> 2) & 0x33) + (bits & 0x33);\n        bits = ((bits >>> 4) & 0x0F) + (bits & 0x0F);\n        const bitsPerChar = bits;\n        const charMask = radix - 1;\n        const msd = x.__digit(length - 1);\n        const msdLeadingZeros = JSBI.__clz30(msd);\n        const bitLength = length * 30 - msdLeadingZeros;\n        let charsRequired = ((bitLength + bitsPerChar - 1) / bitsPerChar) | 0;\n        if (x.sign)\n            charsRequired++;\n        if (charsRequired > (1 << 28))\n            throw new Error('string too long');\n        const result = new Array(charsRequired);\n        let pos = charsRequired - 1;\n        let digit = 0;\n        let availableBits = 0;\n        for (let i = 0; i < length - 1; i++) {\n            const newDigit = x.__digit(i);\n            const current = (digit | (newDigit << availableBits)) & charMask;\n            result[pos--] = JSBI.__kConversionChars[current];\n            const consumedBits = bitsPerChar - availableBits;\n            digit = newDigit >>> consumedBits;\n            availableBits = 30 - consumedBits;\n            while (availableBits >= bitsPerChar) {\n                result[pos--] = JSBI.__kConversionChars[digit & charMask];\n                digit >>>= bitsPerChar;\n                availableBits -= bitsPerChar;\n            }\n        }\n        const current = (digit | (msd << availableBits)) & charMask;\n        result[pos--] = JSBI.__kConversionChars[current];\n        digit = msd >>> (bitsPerChar - availableBits);\n        while (digit !== 0) {\n            result[pos--] = JSBI.__kConversionChars[digit & charMask];\n            digit >>>= bitsPerChar;\n        }\n        if (x.sign)\n            result[pos--] = '-';\n        if (pos !== -1)\n            throw new Error('implementation bug');\n        return result.join('');\n    }\n    static __toStringGeneric(x, radix, isRecursiveCall) {\n        const length = x.length;\n        if (length === 0)\n            return '';\n        if (length === 1) {\n            let result = x.__unsignedDigit(0).toString(radix);\n            if (isRecursiveCall === false && x.sign) {\n                result = '-' + result;\n            }\n            return result;\n        }\n        const bitLength = length * 30 - JSBI.__clz30(x.__digit(length - 1));\n        const maxBitsPerChar = JSBI.__kMaxBitsPerChar[radix];\n        const minBitsPerChar = maxBitsPerChar - 1;\n        let charsRequired = bitLength * JSBI.__kBitsPerCharTableMultiplier;\n        charsRequired += minBitsPerChar - 1;\n        charsRequired = (charsRequired / minBitsPerChar) | 0;\n        const secondHalfChars = (charsRequired + 1) >> 1;\n        // Divide-and-conquer: split by a power of {radix} that's approximately\n        // the square root of {x}, then recurse.\n        const conqueror = JSBI.exponentiate(JSBI.__oneDigit(radix, false), JSBI.__oneDigit(secondHalfChars, false));\n        let quotient;\n        let secondHalf;\n        const divisor = conqueror.__unsignedDigit(0);\n        if (conqueror.length === 1 && divisor <= 0x7FFF) {\n            quotient = new JSBI(x.length, false);\n            quotient.__initializeDigits();\n            let remainder = 0;\n            for (let i = x.length * 2 - 1; i >= 0; i--) {\n                const input = (remainder << 15) | x.__halfDigit(i);\n                quotient.__setHalfDigit(i, (input / divisor) | 0);\n                remainder = (input % divisor) | 0;\n            }\n            secondHalf = remainder.toString(radix);\n        }\n        else {\n            const divisionResult = JSBI.__absoluteDivLarge(x, conqueror, true, true);\n            quotient = divisionResult.quotient;\n            const remainder = divisionResult.remainder.__trim();\n            secondHalf = JSBI.__toStringGeneric(remainder, radix, true);\n        }\n        quotient.__trim();\n        let firstHalf = JSBI.__toStringGeneric(quotient, radix, true);\n        while (secondHalf.length < secondHalfChars) {\n            secondHalf = '0' + secondHalf;\n        }\n        if (isRecursiveCall === false && x.sign) {\n            firstHalf = '-' + firstHalf;\n        }\n        return firstHalf + secondHalf;\n    }\n    static __unequalSign(leftNegative) {\n        return leftNegative ? -1 : 1;\n    }\n    static __absoluteGreater(bothNegative) {\n        return bothNegative ? -1 : 1;\n    }\n    static __absoluteLess(bothNegative) {\n        return bothNegative ? 1 : -1;\n    }\n    static __compareToBigInt(x, y) {\n        const xSign = x.sign;\n        if (xSign !== y.sign)\n            return JSBI.__unequalSign(xSign);\n        const result = JSBI.__absoluteCompare(x, y);\n        if (result > 0)\n            return JSBI.__absoluteGreater(xSign);\n        if (result < 0)\n            return JSBI.__absoluteLess(xSign);\n        return 0;\n    }\n    static __compareToNumber(x, y) {\n        if (JSBI.__isOneDigitInt(y)) {\n            const xSign = x.sign;\n            const ySign = (y < 0);\n            if (xSign !== ySign)\n                return JSBI.__unequalSign(xSign);\n            if (x.length === 0) {\n                if (ySign)\n                    throw new Error('implementation bug');\n                return y === 0 ? 0 : -1;\n            }\n            // Any multi-digit BigInt is bigger than an int32.\n            if (x.length > 1)\n                return JSBI.__absoluteGreater(xSign);\n            const yAbs = Math.abs(y);\n            const xDigit = x.__unsignedDigit(0);\n            if (xDigit > yAbs)\n                return JSBI.__absoluteGreater(xSign);\n            if (xDigit < yAbs)\n                return JSBI.__absoluteLess(xSign);\n            return 0;\n        }\n        return JSBI.__compareToDouble(x, y);\n    }\n    static __compareToDouble(x, y) {\n        if (y !== y)\n            return y; // NaN.\n        if (y === Infinity)\n            return -1;\n        if (y === -Infinity)\n            return 1;\n        const xSign = x.sign;\n        const ySign = (y < 0);\n        if (xSign !== ySign)\n            return JSBI.__unequalSign(xSign);\n        if (y === 0) {\n            throw new Error('implementation bug: should be handled elsewhere');\n        }\n        if (x.length === 0)\n            return -1;\n        JSBI.__kBitConversionDouble[0] = y;\n        const rawExponent = (JSBI.__kBitConversionInts[1] >>> 20) & 0x7FF;\n        if (rawExponent === 0x7FF) {\n            throw new Error('implementation bug: handled elsewhere');\n        }\n        const exponent = rawExponent - 0x3FF;\n        if (exponent < 0) {\n            // The absolute value of y is less than 1. Only 0n has an absolute\n            // value smaller than that, but we've already covered that case.\n            return JSBI.__absoluteGreater(xSign);\n        }\n        const xLength = x.length;\n        let xMsd = x.__digit(xLength - 1);\n        const msdLeadingZeros = JSBI.__clz30(xMsd);\n        const xBitLength = xLength * 30 - msdLeadingZeros;\n        const yBitLength = exponent + 1;\n        if (xBitLength < yBitLength)\n            return JSBI.__absoluteLess(xSign);\n        if (xBitLength > yBitLength)\n            return JSBI.__absoluteGreater(xSign);\n        // Same sign, same bit length. Shift mantissa to align with x and compare\n        // bit for bit.\n        const kHiddenBit = 0x00100000;\n        let mantissaHigh = (JSBI.__kBitConversionInts[1] & 0xFFFFF) | kHiddenBit;\n        let mantissaLow = JSBI.__kBitConversionInts[0];\n        const kMantissaHighTopBit = 20;\n        const msdTopBit = 29 - msdLeadingZeros;\n        if (msdTopBit !== (((xBitLength - 1) % 30) | 0)) {\n            throw new Error('implementation bug');\n        }\n        let compareMantissa; // Shifted chunk of mantissa.\n        let remainingMantissaBits = 0;\n        // First, compare most significant digit against beginning of mantissa.\n        if (msdTopBit < kMantissaHighTopBit) {\n            const shift = kMantissaHighTopBit - msdTopBit;\n            remainingMantissaBits = shift + 32;\n            compareMantissa = mantissaHigh >>> shift;\n            mantissaHigh = (mantissaHigh << (32 - shift)) | (mantissaLow >>> shift);\n            mantissaLow = mantissaLow << (32 - shift);\n        }\n        else if (msdTopBit === kMantissaHighTopBit) {\n            remainingMantissaBits = 32;\n            compareMantissa = mantissaHigh;\n            mantissaHigh = mantissaLow;\n            mantissaLow = 0;\n        }\n        else {\n            const shift = msdTopBit - kMantissaHighTopBit;\n            remainingMantissaBits = 32 - shift;\n            compareMantissa =\n                (mantissaHigh << shift) | (mantissaLow >>> (32 - shift));\n            mantissaHigh = mantissaLow << shift;\n            mantissaLow = 0;\n        }\n        xMsd = xMsd >>> 0;\n        compareMantissa = compareMantissa >>> 0;\n        if (xMsd > compareMantissa)\n            return JSBI.__absoluteGreater(xSign);\n        if (xMsd < compareMantissa)\n            return JSBI.__absoluteLess(xSign);\n        // Then, compare additional digits against remaining mantissa bits.\n        for (let digitIndex = xLength - 2; digitIndex >= 0; digitIndex--) {\n            if (remainingMantissaBits > 0) {\n                remainingMantissaBits -= 30;\n                compareMantissa = mantissaHigh >>> 2;\n                mantissaHigh = (mantissaHigh << 30) | (mantissaLow >>> 2);\n                mantissaLow = (mantissaLow << 30);\n            }\n            else {\n                compareMantissa = 0;\n            }\n            const digit = x.__unsignedDigit(digitIndex);\n            if (digit > compareMantissa)\n                return JSBI.__absoluteGreater(xSign);\n            if (digit < compareMantissa)\n                return JSBI.__absoluteLess(xSign);\n        }\n        // Integer parts are equal; check whether {y} has a fractional part.\n        if (mantissaHigh !== 0 || mantissaLow !== 0) {\n            if (remainingMantissaBits === 0)\n                throw new Error('implementation bug');\n            return JSBI.__absoluteLess(xSign);\n        }\n        return 0;\n    }\n    static __equalToNumber(x, y) {\n        if (JSBI.__isOneDigitInt(y)) {\n            if (y === 0)\n                return x.length === 0;\n            // Any multi-digit BigInt is bigger than an int32.\n            return (x.length === 1) && (x.sign === (y < 0)) &&\n                (x.__unsignedDigit(0) === Math.abs(y));\n        }\n        return JSBI.__compareToDouble(x, y) === 0;\n    }\n    // Comparison operations, chosen such that \"op ^ 2\" reverses direction:\n    // 0 - lessThan\n    // 1 - lessThanOrEqual\n    // 2 - greaterThan\n    // 3 - greaterThanOrEqual\n    static __comparisonResultToBool(result, op) {\n        switch (op) {\n            case 0: return result < 0;\n            case 1: return result <= 0;\n            case 2: return result > 0;\n            case 3: return result >= 0;\n        }\n    }\n    static __compare(x, y, op) {\n        x = JSBI.__toPrimitive(x);\n        y = JSBI.__toPrimitive(y);\n        if (typeof x === 'string' && typeof y === 'string') {\n            switch (op) {\n                case 0: return x < y;\n                case 1: return x <= y;\n                case 2: return x > y;\n                case 3: return x >= y;\n            }\n        }\n        if (JSBI.__isBigInt(x) && typeof y === 'string') {\n            y = JSBI.__fromString(y);\n            if (y === null)\n                return false;\n            return JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(x, y), op);\n        }\n        if (typeof x === 'string' && JSBI.__isBigInt(y)) {\n            x = JSBI.__fromString(x);\n            if (x === null)\n                return false;\n            return JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(x, y), op);\n        }\n        x = JSBI.__toNumeric(x);\n        y = JSBI.__toNumeric(y);\n        if (JSBI.__isBigInt(x)) {\n            if (JSBI.__isBigInt(y)) {\n                return JSBI.__comparisonResultToBool(JSBI.__compareToBigInt(x, y), op);\n            }\n            if (typeof y !== 'number')\n                throw new Error('implementation bug');\n            return JSBI.__comparisonResultToBool(JSBI.__compareToNumber(x, y), op);\n        }\n        if (typeof x !== 'number')\n            throw new Error('implementation bug');\n        if (JSBI.__isBigInt(y)) {\n            // Note that \"op ^ 2\" reverses the op's direction.\n            return JSBI.__comparisonResultToBool(JSBI.__compareToNumber(y, x), (op ^ 2));\n        }\n        if (typeof y !== 'number')\n            throw new Error('implementation bug');\n        switch (op) {\n            case 0: return x < y;\n            case 1: return x <= y;\n            case 2: return x > y;\n            case 3: return x >= y;\n        }\n    }\n    __clzmsd() {\n        return JSBI.__clz30(this.__digit(this.length - 1));\n    }\n    static __absoluteAdd(x, y, resultSign) {\n        if (x.length < y.length)\n            return JSBI.__absoluteAdd(y, x, resultSign);\n        if (x.length === 0)\n            return x;\n        if (y.length === 0)\n            return x.sign === resultSign ? x : JSBI.unaryMinus(x);\n        let resultLength = x.length;\n        if (x.__clzmsd() === 0 || (y.length === x.length && y.__clzmsd() === 0)) {\n            resultLength++;\n        }\n        const result = new JSBI(resultLength, resultSign);\n        let carry = 0;\n        let i = 0;\n        for (; i < y.length; i++) {\n            const r = x.__digit(i) + y.__digit(i) + carry;\n            carry = r >>> 30;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        for (; i < x.length; i++) {\n            const r = x.__digit(i) + carry;\n            carry = r >>> 30;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        if (i < result.length) {\n            result.__setDigit(i, carry);\n        }\n        return result.__trim();\n    }\n    static __absoluteSub(x, y, resultSign) {\n        if (x.length === 0)\n            return x;\n        if (y.length === 0)\n            return x.sign === resultSign ? x : JSBI.unaryMinus(x);\n        const result = new JSBI(x.length, resultSign);\n        let borrow = 0;\n        let i = 0;\n        for (; i < y.length; i++) {\n            const r = x.__digit(i) - y.__digit(i) - borrow;\n            borrow = (r >>> 30) & 1;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        for (; i < x.length; i++) {\n            const r = x.__digit(i) - borrow;\n            borrow = (r >>> 30) & 1;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        return result.__trim();\n    }\n    static __absoluteAddOne(x, sign, result = null) {\n        const inputLength = x.length;\n        if (result === null) {\n            result = new JSBI(inputLength, sign);\n        }\n        else {\n            result.sign = sign;\n        }\n        let carry = 1;\n        for (let i = 0; i < inputLength; i++) {\n            const r = x.__digit(i) + carry;\n            carry = r >>> 30;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        if (carry !== 0) {\n            result.__setDigitGrow(inputLength, 1);\n        }\n        return result;\n    }\n    static __absoluteSubOne(x, resultLength) {\n        const length = x.length;\n        resultLength = resultLength || length;\n        const result = new JSBI(resultLength, false);\n        let borrow = 1;\n        for (let i = 0; i < length; i++) {\n            const r = x.__digit(i) - borrow;\n            borrow = (r >>> 30) & 1;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        if (borrow !== 0)\n            throw new Error('implementation bug');\n        for (let i = length; i < resultLength; i++) {\n            result.__setDigit(i, 0);\n        }\n        return result;\n    }\n    static __absoluteAnd(x, y, result = null) {\n        let xLength = x.length;\n        let yLength = y.length;\n        let numPairs = yLength;\n        if (xLength < yLength) {\n            numPairs = xLength;\n            const tmp = x;\n            const tmpLength = xLength;\n            x = y;\n            xLength = yLength;\n            y = tmp;\n            yLength = tmpLength;\n        }\n        let resultLength = numPairs;\n        if (result === null) {\n            result = new JSBI(resultLength, false);\n        }\n        else {\n            resultLength = result.length;\n        }\n        let i = 0;\n        for (; i < numPairs; i++) {\n            result.__setDigit(i, x.__digit(i) & y.__digit(i));\n        }\n        for (; i < resultLength; i++) {\n            result.__setDigit(i, 0);\n        }\n        return result;\n    }\n    static __absoluteAndNot(x, y, result = null) {\n        const xLength = x.length;\n        const yLength = y.length;\n        let numPairs = yLength;\n        if (xLength < yLength) {\n            numPairs = xLength;\n        }\n        let resultLength = xLength;\n        if (result === null) {\n            result = new JSBI(resultLength, false);\n        }\n        else {\n            resultLength = result.length;\n        }\n        let i = 0;\n        for (; i < numPairs; i++) {\n            result.__setDigit(i, x.__digit(i) & ~y.__digit(i));\n        }\n        for (; i < xLength; i++) {\n            result.__setDigit(i, x.__digit(i));\n        }\n        for (; i < resultLength; i++) {\n            result.__setDigit(i, 0);\n        }\n        return result;\n    }\n    static __absoluteOr(x, y, result = null) {\n        let xLength = x.length;\n        let yLength = y.length;\n        let numPairs = yLength;\n        if (xLength < yLength) {\n            numPairs = xLength;\n            const tmp = x;\n            const tmpLength = xLength;\n            x = y;\n            xLength = yLength;\n            y = tmp;\n            yLength = tmpLength;\n        }\n        let resultLength = xLength;\n        if (result === null) {\n            result = new JSBI(resultLength, false);\n        }\n        else {\n            resultLength = result.length;\n        }\n        let i = 0;\n        for (; i < numPairs; i++) {\n            result.__setDigit(i, x.__digit(i) | y.__digit(i));\n        }\n        for (; i < xLength; i++) {\n            result.__setDigit(i, x.__digit(i));\n        }\n        for (; i < resultLength; i++) {\n            result.__setDigit(i, 0);\n        }\n        return result;\n    }\n    static __absoluteXor(x, y, result = null) {\n        let xLength = x.length;\n        let yLength = y.length;\n        let numPairs = yLength;\n        if (xLength < yLength) {\n            numPairs = xLength;\n            const tmp = x;\n            const tmpLength = xLength;\n            x = y;\n            xLength = yLength;\n            y = tmp;\n            yLength = tmpLength;\n        }\n        let resultLength = xLength;\n        if (result === null) {\n            result = new JSBI(resultLength, false);\n        }\n        else {\n            resultLength = result.length;\n        }\n        let i = 0;\n        for (; i < numPairs; i++) {\n            result.__setDigit(i, x.__digit(i) ^ y.__digit(i));\n        }\n        for (; i < xLength; i++) {\n            result.__setDigit(i, x.__digit(i));\n        }\n        for (; i < resultLength; i++) {\n            result.__setDigit(i, 0);\n        }\n        return result;\n    }\n    static __absoluteCompare(x, y) {\n        const diff = x.length - y.length;\n        if (diff !== 0)\n            return diff;\n        let i = x.length - 1;\n        while (i >= 0 && x.__digit(i) === y.__digit(i))\n            i--;\n        if (i < 0)\n            return 0;\n        return x.__unsignedDigit(i) > y.__unsignedDigit(i) ? 1 : -1;\n    }\n    static __multiplyAccumulate(multiplicand, multiplier, accumulator, accumulatorIndex) {\n        if (multiplier === 0)\n            return;\n        const m2Low = multiplier & 0x7FFF;\n        const m2High = multiplier >>> 15;\n        let carry = 0;\n        let high = 0;\n        for (let i = 0; i < multiplicand.length; i++, accumulatorIndex++) {\n            let acc = accumulator.__digit(accumulatorIndex);\n            const m1 = multiplicand.__digit(i);\n            const m1Low = m1 & 0x7FFF;\n            const m1High = m1 >>> 15;\n            const rLow = JSBI.__imul(m1Low, m2Low);\n            const rMid1 = JSBI.__imul(m1Low, m2High);\n            const rMid2 = JSBI.__imul(m1High, m2Low);\n            const rHigh = JSBI.__imul(m1High, m2High);\n            acc += high + rLow + carry;\n            carry = acc >>> 30;\n            acc &= 0x3FFFFFFF;\n            acc += ((rMid1 & 0x7FFF) << 15) + ((rMid2 & 0x7FFF) << 15);\n            carry += acc >>> 30;\n            high = rHigh + (rMid1 >>> 15) + (rMid2 >>> 15);\n            accumulator.__setDigit(accumulatorIndex, acc & 0x3FFFFFFF);\n        }\n        for (; carry !== 0 || high !== 0; accumulatorIndex++) {\n            let acc = accumulator.__digit(accumulatorIndex);\n            acc += carry + high;\n            high = 0;\n            carry = acc >>> 30;\n            accumulator.__setDigit(accumulatorIndex, acc & 0x3FFFFFFF);\n        }\n    }\n    static __internalMultiplyAdd(source, factor, summand, n, result) {\n        let carry = summand;\n        let high = 0;\n        for (let i = 0; i < n; i++) {\n            const digit = source.__digit(i);\n            const rx = JSBI.__imul(digit & 0x7FFF, factor);\n            const ry = JSBI.__imul(digit >>> 15, factor);\n            const r = rx + ((ry & 0x7FFF) << 15) + high + carry;\n            carry = r >>> 30;\n            high = ry >>> 15;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        if (result.length > n) {\n            result.__setDigit(n++, carry + high);\n            while (n < result.length) {\n                result.__setDigit(n++, 0);\n            }\n        }\n        else {\n            if (carry + high !== 0)\n                throw new Error('implementation bug');\n        }\n    }\n    __inplaceMultiplyAdd(multiplier, summand, length) {\n        if (length > this.length)\n            length = this.length;\n        const mLow = multiplier & 0x7FFF;\n        const mHigh = multiplier >>> 15;\n        let carry = 0;\n        let high = summand;\n        for (let i = 0; i < length; i++) {\n            const d = this.__digit(i);\n            const dLow = d & 0x7FFF;\n            const dHigh = d >>> 15;\n            const pLow = JSBI.__imul(dLow, mLow);\n            const pMid1 = JSBI.__imul(dLow, mHigh);\n            const pMid2 = JSBI.__imul(dHigh, mLow);\n            const pHigh = JSBI.__imul(dHigh, mHigh);\n            let result = high + pLow + carry;\n            carry = result >>> 30;\n            result &= 0x3FFFFFFF;\n            result += ((pMid1 & 0x7FFF) << 15) + ((pMid2 & 0x7FFF) << 15);\n            carry += result >>> 30;\n            high = pHigh + (pMid1 >>> 15) + (pMid2 >>> 15);\n            this.__setDigit(i, result & 0x3FFFFFFF);\n        }\n        if (carry !== 0 || high !== 0) {\n            throw new Error('implementation bug');\n        }\n    }\n    static __absoluteDivSmall(x, divisor, quotient = null) {\n        if (quotient === null)\n            quotient = new JSBI(x.length, false);\n        let remainder = 0;\n        for (let i = x.length * 2 - 1; i >= 0; i -= 2) {\n            let input = ((remainder << 15) | x.__halfDigit(i)) >>> 0;\n            const upperHalf = (input / divisor) | 0;\n            remainder = (input % divisor) | 0;\n            input = ((remainder << 15) | x.__halfDigit(i - 1)) >>> 0;\n            const lowerHalf = (input / divisor) | 0;\n            remainder = (input % divisor) | 0;\n            quotient.__setDigit(i >>> 1, (upperHalf << 15) | lowerHalf);\n        }\n        return quotient;\n    }\n    static __absoluteModSmall(x, divisor) {\n        let remainder = 0;\n        for (let i = x.length * 2 - 1; i >= 0; i--) {\n            const input = ((remainder << 15) | x.__halfDigit(i)) >>> 0;\n            remainder = (input % divisor) | 0;\n        }\n        return remainder;\n    }\n    static __absoluteDivLarge(dividend, divisor, wantQuotient, wantRemainder) {\n        const n = divisor.__halfDigitLength();\n        const n2 = divisor.length;\n        const m = dividend.__halfDigitLength() - n;\n        let q = null;\n        if (wantQuotient) {\n            q = new JSBI((m + 2) >>> 1, false);\n            q.__initializeDigits();\n        }\n        const qhatv = new JSBI((n + 2) >>> 1, false);\n        qhatv.__initializeDigits();\n        // D1.\n        const shift = JSBI.__clz15(divisor.__halfDigit(n - 1));\n        if (shift > 0) {\n            divisor = JSBI.__specialLeftShift(divisor, shift, 0 /* add no digits*/);\n        }\n        const u = JSBI.__specialLeftShift(dividend, shift, 1 /* add one digit */);\n        // D2.\n        const vn1 = divisor.__halfDigit(n - 1);\n        let halfDigitBuffer = 0;\n        for (let j = m; j >= 0; j--) {\n            // D3.\n            let qhat = 0x7FFF;\n            const ujn = u.__halfDigit(j + n);\n            if (ujn !== vn1) {\n                const input = ((ujn << 15) | u.__halfDigit(j + n - 1)) >>> 0;\n                qhat = (input / vn1) | 0;\n                let rhat = (input % vn1) | 0;\n                const vn2 = divisor.__halfDigit(n - 2);\n                const ujn2 = u.__halfDigit(j + n - 2);\n                while ((JSBI.__imul(qhat, vn2) >>> 0) > (((rhat << 16) | ujn2) >>> 0)) {\n                    qhat--;\n                    rhat += vn1;\n                    if (rhat > 0x7FFF)\n                        break;\n                }\n            }\n            // D4.\n            JSBI.__internalMultiplyAdd(divisor, qhat, 0, n2, qhatv);\n            let c = u.__inplaceSub(qhatv, j, n + 1);\n            if (c !== 0) {\n                c = u.__inplaceAdd(divisor, j, n);\n                u.__setHalfDigit(j + n, (u.__halfDigit(j + n) + c) & 0x7FFF);\n                qhat--;\n            }\n            if (wantQuotient) {\n                if (j & 1) {\n                    halfDigitBuffer = qhat << 15;\n                }\n                else {\n                    // TODO make this statically determinable\n                    q.__setDigit(j >>> 1, halfDigitBuffer | qhat);\n                }\n            }\n        }\n        if (wantRemainder) {\n            u.__inplaceRightShift(shift);\n            if (wantQuotient) {\n                return { quotient: q, remainder: u };\n            }\n            return u;\n        }\n        if (wantQuotient)\n            return q;\n        // TODO find a way to make this statically unreachable?\n        throw new Error('unreachable');\n    }\n    static __clz15(value) {\n        return JSBI.__clz30(value) - 15;\n    }\n    // TODO: work on full digits, like __inplaceSub?\n    __inplaceAdd(summand, startIndex, halfDigits) {\n        let carry = 0;\n        for (let i = 0; i < halfDigits; i++) {\n            const sum = this.__halfDigit(startIndex + i) +\n                summand.__halfDigit(i) +\n                carry;\n            carry = sum >>> 15;\n            this.__setHalfDigit(startIndex + i, sum & 0x7FFF);\n        }\n        return carry;\n    }\n    __inplaceSub(subtrahend, startIndex, halfDigits) {\n        const fullSteps = (halfDigits - 1) >>> 1;\n        let borrow = 0;\n        if (startIndex & 1) {\n            // this:   [..][..][..]\n            // subtr.:   [..][..]\n            startIndex >>= 1;\n            let current = this.__digit(startIndex);\n            let r0 = current & 0x7FFF;\n            let i = 0;\n            for (; i < fullSteps; i++) {\n                const sub = subtrahend.__digit(i);\n                const r15 = (current >>> 15) - (sub & 0x7FFF) - borrow;\n                borrow = (r15 >>> 15) & 1;\n                this.__setDigit(startIndex + i, ((r15 & 0x7FFF) << 15) | (r0 & 0x7FFF));\n                current = this.__digit(startIndex + i + 1);\n                r0 = (current & 0x7FFF) - (sub >>> 15) - borrow;\n                borrow = (r0 >>> 15) & 1;\n            }\n            // Unrolling the last iteration gives a 5% performance benefit!\n            const sub = subtrahend.__digit(i);\n            const r15 = (current >>> 15) - (sub & 0x7FFF) - borrow;\n            borrow = (r15 >>> 15) & 1;\n            this.__setDigit(startIndex + i, ((r15 & 0x7FFF) << 15) | (r0 & 0x7FFF));\n            const subTop = sub >>> 15;\n            if (startIndex + i + 1 >= this.length) {\n                throw new RangeError('out of bounds');\n            }\n            if ((halfDigits & 1) === 0) {\n                current = this.__digit(startIndex + i + 1);\n                r0 = (current & 0x7FFF) - subTop - borrow;\n                borrow = (r0 >>> 15) & 1;\n                this.__setDigit(startIndex + subtrahend.length, (current & 0x3FFF8000) | (r0 & 0x7FFF));\n            }\n        }\n        else {\n            startIndex >>= 1;\n            let i = 0;\n            for (; i < subtrahend.length - 1; i++) {\n                const current = this.__digit(startIndex + i);\n                const sub = subtrahend.__digit(i);\n                const r0 = (current & 0x7FFF) - (sub & 0x7FFF) - borrow;\n                borrow = (r0 >>> 15) & 1;\n                const r15 = (current >>> 15) - (sub >>> 15) - borrow;\n                borrow = (r15 >>> 15) & 1;\n                this.__setDigit(startIndex + i, ((r15 & 0x7FFF) << 15) | (r0 & 0x7FFF));\n            }\n            const current = this.__digit(startIndex + i);\n            const sub = subtrahend.__digit(i);\n            const r0 = (current & 0x7FFF) - (sub & 0x7FFF) - borrow;\n            borrow = (r0 >>> 15) & 1;\n            let r15 = 0;\n            if ((halfDigits & 1) === 0) {\n                r15 = (current >>> 15) - (sub >>> 15) - borrow;\n                borrow = (r15 >>> 15) & 1;\n            }\n            this.__setDigit(startIndex + i, ((r15 & 0x7FFF) << 15) | (r0 & 0x7FFF));\n        }\n        return borrow;\n    }\n    __inplaceRightShift(shift) {\n        if (shift === 0)\n            return;\n        let carry = this.__digit(0) >>> shift;\n        const last = this.length - 1;\n        for (let i = 0; i < last; i++) {\n            const d = this.__digit(i + 1);\n            this.__setDigit(i, ((d << (30 - shift)) & 0x3FFFFFFF) | carry);\n            carry = d >>> shift;\n        }\n        this.__setDigit(last, carry);\n    }\n    static __specialLeftShift(x, shift, addDigit) {\n        const n = x.length;\n        const resultLength = n + addDigit;\n        const result = new JSBI(resultLength, false);\n        if (shift === 0) {\n            for (let i = 0; i < n; i++)\n                result.__setDigit(i, x.__digit(i));\n            if (addDigit > 0)\n                result.__setDigit(n, 0);\n            return result;\n        }\n        let carry = 0;\n        for (let i = 0; i < n; i++) {\n            const d = x.__digit(i);\n            result.__setDigit(i, ((d << shift) & 0x3FFFFFFF) | carry);\n            carry = d >>> (30 - shift);\n        }\n        if (addDigit > 0) {\n            result.__setDigit(n, carry);\n        }\n        return result;\n    }\n    static __leftShiftByAbsolute(x, y) {\n        const shift = JSBI.__toShiftAmount(y);\n        if (shift < 0)\n            throw new RangeError('BigInt too big');\n        const digitShift = (shift / 30) | 0;\n        const bitsShift = shift % 30;\n        const length = x.length;\n        const grow = bitsShift !== 0 &&\n            (x.__digit(length - 1) >>> (30 - bitsShift)) !== 0;\n        const resultLength = length + digitShift + (grow ? 1 : 0);\n        const result = new JSBI(resultLength, x.sign);\n        if (bitsShift === 0) {\n            let i = 0;\n            for (; i < digitShift; i++)\n                result.__setDigit(i, 0);\n            for (; i < resultLength; i++) {\n                result.__setDigit(i, x.__digit(i - digitShift));\n            }\n        }\n        else {\n            let carry = 0;\n            for (let i = 0; i < digitShift; i++)\n                result.__setDigit(i, 0);\n            for (let i = 0; i < length; i++) {\n                const d = x.__digit(i);\n                result.__setDigit(i + digitShift, ((d << bitsShift) & 0x3FFFFFFF) | carry);\n                carry = d >>> (30 - bitsShift);\n            }\n            if (grow) {\n                result.__setDigit(length + digitShift, carry);\n            }\n            else {\n                if (carry !== 0)\n                    throw new Error('implementation bug');\n            }\n        }\n        return result.__trim();\n    }\n    static __rightShiftByAbsolute(x, y) {\n        const length = x.length;\n        const sign = x.sign;\n        const shift = JSBI.__toShiftAmount(y);\n        if (shift < 0)\n            return JSBI.__rightShiftByMaximum(sign);\n        const digitShift = (shift / 30) | 0;\n        const bitsShift = shift % 30;\n        let resultLength = length - digitShift;\n        if (resultLength <= 0)\n            return JSBI.__rightShiftByMaximum(sign);\n        // For negative numbers, round down if any bit was shifted out (so that\n        // e.g. -5n >> 1n == -3n and not -2n). Check now whether this will happen\n        // and whether itc an cause overflow into a new digit. If we allocate the\n        // result large enough up front, it avoids having to do grow it later.\n        let mustRoundDown = false;\n        if (sign) {\n            const mask = (1 << bitsShift) - 1;\n            if ((x.__digit(digitShift) & mask) !== 0) {\n                mustRoundDown = true;\n            }\n            else {\n                for (let i = 0; i < digitShift; i++) {\n                    if (x.__digit(i) !== 0) {\n                        mustRoundDown = true;\n                        break;\n                    }\n                }\n            }\n        }\n        // If bitsShift is non-zero, it frees up bits, preventing overflow.\n        if (mustRoundDown && bitsShift === 0) {\n            // Overflow cannot happen if the most significant digit has unset bits.\n            const msd = x.__digit(length - 1);\n            const roundingCanOverflow = ~msd === 0;\n            if (roundingCanOverflow)\n                resultLength++;\n        }\n        let result = new JSBI(resultLength, sign);\n        if (bitsShift === 0) {\n            // Zero out any overflow digit (see \"roundingCanOverflow\" above).\n            result.__setDigit(resultLength - 1, 0);\n            for (let i = digitShift; i < length; i++) {\n                result.__setDigit(i - digitShift, x.__digit(i));\n            }\n        }\n        else {\n            let carry = x.__digit(digitShift) >>> bitsShift;\n            const last = length - digitShift - 1;\n            for (let i = 0; i < last; i++) {\n                const d = x.__digit(i + digitShift + 1);\n                result.__setDigit(i, ((d << (30 - bitsShift)) & 0x3FFFFFFF) | carry);\n                carry = d >>> bitsShift;\n            }\n            result.__setDigit(last, carry);\n        }\n        if (mustRoundDown) {\n            // Since the result is negative, rounding down means adding one to its\n            // absolute value. This cannot overflow.\n            result = JSBI.__absoluteAddOne(result, true, result);\n        }\n        return result.__trim();\n    }\n    static __rightShiftByMaximum(sign) {\n        if (sign) {\n            return JSBI.__oneDigit(1, true);\n        }\n        return JSBI.__zero();\n    }\n    static __toShiftAmount(x) {\n        if (x.length > 1)\n            return -1;\n        const value = x.__unsignedDigit(0);\n        if (value > JSBI.__kMaxLengthBits)\n            return -1;\n        return value;\n    }\n    static __toPrimitive(obj, hint = 'default') {\n        if (typeof obj !== 'object')\n            return obj;\n        if (obj.constructor === JSBI)\n            return obj;\n        if (typeof Symbol !== 'undefined' &&\n            typeof Symbol.toPrimitive === 'symbol') {\n            const exoticToPrim = obj[Symbol.toPrimitive];\n            if (exoticToPrim) {\n                const primitive = exoticToPrim(hint);\n                if (typeof primitive !== 'object')\n                    return primitive;\n                throw new TypeError('Cannot convert object to primitive value');\n            }\n        }\n        const valueOf = obj.valueOf;\n        if (valueOf) {\n            const primitive = valueOf.call(obj);\n            if (typeof primitive !== 'object')\n                return primitive;\n        }\n        const toString = obj.toString;\n        if (toString) {\n            const primitive = toString.call(obj);\n            if (typeof primitive !== 'object')\n                return primitive;\n        }\n        throw new TypeError('Cannot convert object to primitive value');\n    }\n    static __toNumeric(value) {\n        if (JSBI.__isBigInt(value))\n            return value;\n        return +value;\n    }\n    static __isBigInt(value) {\n        return typeof value === 'object' && value !== null &&\n            value.constructor === JSBI;\n    }\n    static __truncateToNBits(n, x) {\n        const neededDigits = ((n + 29) / 30) | 0;\n        const result = new JSBI(neededDigits, x.sign);\n        const last = neededDigits - 1;\n        for (let i = 0; i < last; i++) {\n            result.__setDigit(i, x.__digit(i));\n        }\n        let msd = x.__digit(last);\n        if ((n % 30) !== 0) {\n            const drop = 32 - (n % 30);\n            msd = (msd << drop) >>> drop;\n        }\n        result.__setDigit(last, msd);\n        return result.__trim();\n    }\n    static __truncateAndSubFromPowerOfTwo(n, x, resultSign) {\n        const neededDigits = ((n + 29) / 30) | 0;\n        const result = new JSBI(neededDigits, resultSign);\n        let i = 0;\n        const last = neededDigits - 1;\n        let borrow = 0;\n        const limit = Math.min(last, x.length);\n        for (; i < limit; i++) {\n            const r = 0 - x.__digit(i) - borrow;\n            borrow = (r >>> 30) & 1;\n            result.__setDigit(i, r & 0x3FFFFFFF);\n        }\n        for (; i < last; i++) {\n            result.__setDigit(i, (-borrow & 0x3FFFFFFF) | 0);\n        }\n        let msd = last < x.length ? x.__digit(last) : 0;\n        const msdBitsConsumed = n % 30;\n        let resultMsd;\n        if (msdBitsConsumed === 0) {\n            resultMsd = 0 - msd - borrow;\n            resultMsd &= 0x3FFFFFFF;\n        }\n        else {\n            const drop = 32 - msdBitsConsumed;\n            msd = (msd << drop) >>> drop;\n            const minuendMsd = 1 << (32 - drop);\n            resultMsd = minuendMsd - msd - borrow;\n            resultMsd &= (minuendMsd - 1);\n        }\n        result.__setDigit(last, resultMsd);\n        return result.__trim();\n    }\n    // Digit helpers.\n    __digit(i) {\n        return this[i];\n    }\n    __unsignedDigit(i) {\n        return this[i] >>> 0;\n    }\n    __setDigit(i, digit) {\n        this[i] = digit | 0;\n    }\n    __setDigitGrow(i, digit) {\n        this[i] = digit | 0;\n    }\n    __halfDigitLength() {\n        const len = this.length;\n        if (this.__unsignedDigit(len - 1) <= 0x7FFF)\n            return len * 2 - 1;\n        return len * 2;\n    }\n    __halfDigit(i) {\n        return (this[i >>> 1] >>> ((i & 1) * 15)) & 0x7FFF;\n    }\n    __setHalfDigit(i, value) {\n        const digitIndex = i >>> 1;\n        const previous = this.__digit(digitIndex);\n        const updated = (i & 1) ? (previous & 0x7FFF) | (value << 15)\n            : (previous & 0x3FFF8000) | (value & 0x7FFF);\n        this.__setDigit(digitIndex, updated);\n    }\n    static __digitPow(base, exponent) {\n        let result = 1;\n        while (exponent > 0) {\n            if (exponent & 1)\n                result *= base;\n            exponent >>>= 1;\n            base *= base;\n        }\n        return result;\n    }\n    static __isOneDigitInt(x) {\n        return (x & 0x3FFFFFFF) === x;\n    }\n}\nJSBI.__kMaxLength = 1 << 25;\nJSBI.__kMaxLengthBits = JSBI.__kMaxLength << 5;\n// Lookup table for the maximum number of bits required per character of a\n// base-N string representation of a number. To increase accuracy, the array\n// value is the actual value multiplied by 32. To generate this table:\n//\n// for (let i = 0; i <= 36; i++) {\n//   console.log(Math.ceil(Math.log2(i) * 32) + ',');\n// }\nJSBI.__kMaxBitsPerChar = [\n    0, 0, 32, 51, 64, 75, 83, 90, 96,\n    102, 107, 111, 115, 119, 122, 126, 128,\n    131, 134, 136, 139, 141, 143, 145, 147,\n    149, 151, 153, 154, 156, 158, 159, 160,\n    162, 163, 165, 166, // 33..36\n];\nJSBI.__kBitsPerCharTableShift = 5;\nJSBI.__kBitsPerCharTableMultiplier = 1 << JSBI.__kBitsPerCharTableShift;\nJSBI.__kConversionChars = '0123456789abcdefghijklmnopqrstuvwxyz'.split('');\nJSBI.__kBitConversionBuffer = new ArrayBuffer(8);\nJSBI.__kBitConversionDouble = new Float64Array(JSBI.__kBitConversionBuffer);\nJSBI.__kBitConversionInts = new Int32Array(JSBI.__kBitConversionBuffer);\n// For IE11 compatibility.\n// Note that the custom replacements are tailored for JSBI's needs, and as\n// such are not reusable as general-purpose polyfills.\nJSBI.__clz30 = Math.clz32 ? function (x) {\n    return Math.clz32(x) - 2;\n} : function (x) {\n    if (x === 0)\n        return 30;\n    return 29 - (Math.log(x >>> 0) / Math.LN2 | 0) | 0;\n};\nJSBI.__imul = Math.imul || function (a, b) {\n    return (a * b) | 0;\n};\nexport default JSBI;\n//# sourceMappingURL=jsbi.js.map", "/*\n * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = class IdentifierIssuer {\n  /**\n   * Creates a new IdentifierIssuer. A IdentifierIssuer issues unique\n   * identifiers, keeping track of any previously issued identifiers.\n   *\n   * @param prefix the prefix to use ('<prefix><counter>').\n   * @param existing an existing Map to use.\n   * @param counter the counter to use.\n   */\n  constructor(prefix, existing = new Map(), counter = 0) {\n    this.prefix = prefix;\n    this._existing = existing;\n    this.counter = counter;\n  }\n\n  /**\n   * Copies this IdentifierIssuer.\n   *\n   * @return a copy of this IdentifierIssuer.\n   */\n  clone() {\n    const {prefix, _existing, counter} = this;\n    return new IdentifierIssuer(prefix, new Map(_existing), counter);\n  }\n\n  /**\n   * Gets the new identifier for the given old identifier, where if no old\n   * identifier is given a new identifier will be generated.\n   *\n   * @param [old] the old identifier to get the new identifier for.\n   *\n   * @return the new identifier.\n   */\n  getId(old) {\n    // return existing old identifier\n    const existing = old && this._existing.get(old);\n    if(existing) {\n      return existing;\n    }\n\n    // get next identifier\n    const identifier = this.prefix + this.counter;\n    this.counter++;\n\n    // save mapping\n    if(old) {\n      this._existing.set(old, identifier);\n    }\n\n    return identifier;\n  }\n\n  /**\n   * Returns true if the given old identifer has already been assigned a new\n   * identifier.\n   *\n   * @param old the old identifier to check.\n   *\n   * @return true if the old identifier has been assigned a new identifier,\n   *   false if not.\n   */\n  hasId(old) {\n    return this._existing.has(old);\n  }\n\n  /**\n   * Returns all of the IDs that have been issued new IDs in the order in\n   * which they were issued new IDs.\n   *\n   * @return the list of old IDs that has been issued new IDs in order.\n   */\n  getOldIds() {\n    return [...this._existing.keys()];\n  }\n};\n", "(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6\u20138\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nrequire('setimmediate');\n\nconst crypto = self.crypto || self.msCrypto;\n\nmodule.exports = class MessageDigest {\n  /**\n   * Creates a new MessageDigest.\n   *\n   * @param algorithm the algorithm to use.\n   */\n  constructor(algorithm) {\n    // check if crypto.subtle is available\n    // check is here rather than top-level to only fail if class is used\n    if(!(crypto && crypto.subtle)) {\n      throw new Error('crypto.subtle not found.');\n    }\n    if(algorithm === 'sha256') {\n      this.algorithm = {name: 'SHA-256'};\n    } else if(algorithm === 'sha1') {\n      this.algorithm = {name: 'SHA-1'};\n    } else {\n      throw new Error(`Unsupported algorithm \"${algorithm}\".`);\n    }\n    this._content = '';\n  }\n\n  update(msg) {\n    this._content += msg;\n  }\n\n  async digest() {\n    const data = new TextEncoder().encode(this._content);\n    const buffer = new Uint8Array(\n      await crypto.subtle.digest(this.algorithm, data));\n    // return digest in hex\n    let hex = '';\n    for(let i = 0; i < buffer.length; ++i) {\n      hex += buffer[i].toString(16).padStart(2, '0');\n    }\n    return hex;\n  }\n};\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = class Permuter {\n  /**\n   * A Permuter iterates over all possible permutations of the given array\n   * of elements.\n   *\n   * @param list the array of elements to iterate over.\n   */\n  constructor(list) {\n    // original array\n    this.current = list.sort();\n    // indicates whether there are more permutations\n    this.done = false;\n    // directional info for permutation algorithm\n    this.dir = new Map();\n    for(let i = 0; i < list.length; ++i) {\n      this.dir.set(list[i], true);\n    }\n  }\n\n  /**\n   * Returns true if there is another permutation.\n   *\n   * @return true if there is another permutation, false if not.\n   */\n  hasNext() {\n    return !this.done;\n  }\n\n  /**\n   * Gets the next permutation. Call hasNext() to ensure there is another one\n   * first.\n   *\n   * @return the next permutation.\n   */\n  next() {\n    // copy current permutation to return it\n    const {current, dir} = this;\n    const rval = current.slice();\n\n    /* Calculate the next permutation using the Steinhaus-Johnson-Trotter\n     permutation algorithm. */\n\n    // get largest mobile element k\n    // (mobile: element is greater than the one it is looking at)\n    let k = null;\n    let pos = 0;\n    const length = current.length;\n    for(let i = 0; i < length; ++i) {\n      const element = current[i];\n      const left = dir.get(element);\n      if((k === null || element > k) &&\n        ((left && i > 0 && element > current[i - 1]) ||\n        (!left && i < (length - 1) && element > current[i + 1]))) {\n        k = element;\n        pos = i;\n      }\n    }\n\n    // no more permutations\n    if(k === null) {\n      this.done = true;\n    } else {\n      // swap k and the element it is looking at\n      const swap = dir.get(k) ? pos - 1 : pos + 1;\n      current[pos] = current[swap];\n      current[swap] = k;\n\n      // reverse the direction of all elements larger than k\n      for(const element of current) {\n        if(element > k) {\n          dir.set(element, !dir.get(element));\n        }\n      }\n    }\n\n    return rval;\n  }\n};\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\n// eslint-disable-next-line no-unused-vars\nconst TERMS = ['subject', 'predicate', 'object', 'graph'];\nconst RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nconst RDF_LANGSTRING = RDF + 'langString';\nconst XSD_STRING = 'http://www.w3.org/2001/XMLSchema#string';\n\nconst TYPE_NAMED_NODE = 'NamedNode';\nconst TYPE_BLANK_NODE = 'BlankNode';\nconst TYPE_LITERAL = 'Literal';\nconst TYPE_DEFAULT_GRAPH = 'DefaultGraph';\n\n// build regexes\nconst REGEX = {};\n(() => {\n  const iri = '(?:<([^:]+:[^>]*)>)';\n  // https://www.w3.org/TR/turtle/#grammar-production-BLANK_NODE_LABEL\n  const PN_CHARS_BASE =\n    'A-Z' + 'a-z' +\n    '\\u00C0-\\u00D6' +\n    '\\u00D8-\\u00F6' +\n    '\\u00F8-\\u02FF' +\n    '\\u0370-\\u037D' +\n    '\\u037F-\\u1FFF' +\n    '\\u200C-\\u200D' +\n    '\\u2070-\\u218F' +\n    '\\u2C00-\\u2FEF' +\n    '\\u3001-\\uD7FF' +\n    '\\uF900-\\uFDCF' +\n    '\\uFDF0-\\uFFFD';\n    // TODO:\n    //'\\u10000-\\uEFFFF';\n  const PN_CHARS_U =\n    PN_CHARS_BASE +\n    '_';\n  const PN_CHARS =\n    PN_CHARS_U +\n    '0-9' +\n    '-' +\n    '\\u00B7' +\n    '\\u0300-\\u036F' +\n    '\\u203F-\\u2040';\n  const BLANK_NODE_LABEL =\n    '(_:' +\n      '(?:[' + PN_CHARS_U + '0-9])' +\n      '(?:(?:[' + PN_CHARS + '.])*(?:[' + PN_CHARS + ']))?' +\n    ')';\n  const bnode = BLANK_NODE_LABEL;\n  const plain = '\"([^\"\\\\\\\\]*(?:\\\\\\\\.[^\"\\\\\\\\]*)*)\"';\n  const datatype = '(?:\\\\^\\\\^' + iri + ')';\n  const language = '(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))';\n  const literal = '(?:' + plain + '(?:' + datatype + '|' + language + ')?)';\n  const ws = '[ \\\\t]+';\n  const wso = '[ \\\\t]*';\n\n  // define quad part regexes\n  const subject = '(?:' + iri + '|' + bnode + ')' + ws;\n  const property = iri + ws;\n  const object = '(?:' + iri + '|' + bnode + '|' + literal + ')' + wso;\n  const graphName = '(?:\\\\.|(?:(?:' + iri + '|' + bnode + ')' + wso + '\\\\.))';\n\n  // end of line and empty regexes\n  REGEX.eoln = /(?:\\r\\n)|(?:\\n)|(?:\\r)/g;\n  REGEX.empty = new RegExp('^' + wso + '$');\n\n  // full quad regex\n  REGEX.quad = new RegExp(\n    '^' + wso + subject + property + object + graphName + wso + '$');\n})();\n\nmodule.exports = class NQuads {\n  /**\n   * Parses RDF in the form of N-Quads.\n   *\n   * @param input the N-Quads input to parse.\n   *\n   * @return an RDF dataset (an array of quads per http://rdf.js.org/).\n   */\n  static parse(input) {\n    // build RDF dataset\n    const dataset = [];\n\n    const graphs = {};\n\n    // split N-Quad input into lines\n    const lines = input.split(REGEX.eoln);\n    let lineNumber = 0;\n    for(const line of lines) {\n      lineNumber++;\n\n      // skip empty lines\n      if(REGEX.empty.test(line)) {\n        continue;\n      }\n\n      // parse quad\n      const match = line.match(REGEX.quad);\n      if(match === null) {\n        throw new Error('N-Quads parse error on line ' + lineNumber + '.');\n      }\n\n      // create RDF quad\n      const quad = {subject: null, predicate: null, object: null, graph: null};\n\n      // get subject\n      if(match[1] !== undefined) {\n        quad.subject = {termType: TYPE_NAMED_NODE, value: match[1]};\n      } else {\n        quad.subject = {termType: TYPE_BLANK_NODE, value: match[2]};\n      }\n\n      // get predicate\n      quad.predicate = {termType: TYPE_NAMED_NODE, value: match[3]};\n\n      // get object\n      if(match[4] !== undefined) {\n        quad.object = {termType: TYPE_NAMED_NODE, value: match[4]};\n      } else if(match[5] !== undefined) {\n        quad.object = {termType: TYPE_BLANK_NODE, value: match[5]};\n      } else {\n        quad.object = {\n          termType: TYPE_LITERAL,\n          value: undefined,\n          datatype: {\n            termType: TYPE_NAMED_NODE\n          }\n        };\n        if(match[7] !== undefined) {\n          quad.object.datatype.value = match[7];\n        } else if(match[8] !== undefined) {\n          quad.object.datatype.value = RDF_LANGSTRING;\n          quad.object.language = match[8];\n        } else {\n          quad.object.datatype.value = XSD_STRING;\n        }\n        quad.object.value = _unescape(match[6]);\n      }\n\n      // get graph\n      if(match[9] !== undefined) {\n        quad.graph = {\n          termType: TYPE_NAMED_NODE,\n          value: match[9]\n        };\n      } else if(match[10] !== undefined) {\n        quad.graph = {\n          termType: TYPE_BLANK_NODE,\n          value: match[10]\n        };\n      } else {\n        quad.graph = {\n          termType: TYPE_DEFAULT_GRAPH,\n          value: ''\n        };\n      }\n\n      // only add quad if it is unique in its graph\n      if(!(quad.graph.value in graphs)) {\n        graphs[quad.graph.value] = [quad];\n        dataset.push(quad);\n      } else {\n        let unique = true;\n        const quads = graphs[quad.graph.value];\n        for(const q of quads) {\n          if(_compareTriples(q, quad)) {\n            unique = false;\n            break;\n          }\n        }\n        if(unique) {\n          quads.push(quad);\n          dataset.push(quad);\n        }\n      }\n    }\n\n    return dataset;\n  }\n\n  /**\n   * Converts an RDF dataset to N-Quads.\n   *\n   * @param dataset (array of quads) the RDF dataset to convert.\n   *\n   * @return the N-Quads string.\n   */\n  static serialize(dataset) {\n    if(!Array.isArray(dataset)) {\n      dataset = NQuads.legacyDatasetToQuads(dataset);\n    }\n    const quads = [];\n    for(const quad of dataset) {\n      quads.push(NQuads.serializeQuad(quad));\n    }\n    return quads.sort().join('');\n  }\n\n  /**\n   * Converts RDF quad components to an N-Quad string (a single quad).\n   *\n   * @param {Object} s - N-Quad subject component.\n   * @param {Object} p - N-Quad predicate component.\n   * @param {Object} o - N-Quad object component.\n   * @param {Object} g - N-Quad graph component.\n   *\n   * @return {string} the N-Quad.\n   */\n  static serializeQuadComponents(s, p, o, g) {\n    let nquad = '';\n\n    // subject can only be NamedNode or BlankNode\n    if(s.termType === TYPE_NAMED_NODE) {\n      nquad += `<${s.value}>`;\n    } else {\n      nquad += `${s.value}`;\n    }\n\n    // predicate can only be NamedNode\n    nquad += ` <${p.value}> `;\n\n    // object is NamedNode, BlankNode, or Literal\n    if(o.termType === TYPE_NAMED_NODE) {\n      nquad += `<${o.value}>`;\n    } else if(o.termType === TYPE_BLANK_NODE) {\n      nquad += o.value;\n    } else {\n      nquad += `\"${_escape(o.value)}\"`;\n      if(o.datatype.value === RDF_LANGSTRING) {\n        if(o.language) {\n          nquad += `@${o.language}`;\n        }\n      } else if(o.datatype.value !== XSD_STRING) {\n        nquad += `^^<${o.datatype.value}>`;\n      }\n    }\n\n    // graph can only be NamedNode or BlankNode (or DefaultGraph, but that\n    // does not add to `nquad`)\n    if(g.termType === TYPE_NAMED_NODE) {\n      nquad += ` <${g.value}>`;\n    } else if(g.termType === TYPE_BLANK_NODE) {\n      nquad += ` ${g.value}`;\n    }\n\n    nquad += ' .\\n';\n    return nquad;\n  }\n\n  /**\n   * Converts an RDF quad to an N-Quad string (a single quad).\n   *\n   * @param quad the RDF quad convert.\n   *\n   * @return the N-Quad string.\n   */\n  static serializeQuad(quad) {\n    return NQuads.serializeQuadComponents(\n      quad.subject, quad.predicate, quad.object, quad.graph);\n  }\n\n  /**\n   * Converts a legacy-formatted dataset to an array of quads dataset per\n   * http://rdf.js.org/.\n   *\n   * @param dataset the legacy dataset to convert.\n   *\n   * @return the array of quads dataset.\n   */\n  static legacyDatasetToQuads(dataset) {\n    const quads = [];\n\n    const termTypeMap = {\n      'blank node': TYPE_BLANK_NODE,\n      IRI: TYPE_NAMED_NODE,\n      literal: TYPE_LITERAL\n    };\n\n    for(const graphName in dataset) {\n      const triples = dataset[graphName];\n      triples.forEach(triple => {\n        const quad = {};\n        for(const componentName in triple) {\n          const oldComponent = triple[componentName];\n          const newComponent = {\n            termType: termTypeMap[oldComponent.type],\n            value: oldComponent.value\n          };\n          if(newComponent.termType === TYPE_LITERAL) {\n            newComponent.datatype = {\n              termType: TYPE_NAMED_NODE\n            };\n            if('datatype' in oldComponent) {\n              newComponent.datatype.value = oldComponent.datatype;\n            }\n            if('language' in oldComponent) {\n              if(!('datatype' in oldComponent)) {\n                newComponent.datatype.value = RDF_LANGSTRING;\n              }\n              newComponent.language = oldComponent.language;\n            } else if(!('datatype' in oldComponent)) {\n              newComponent.datatype.value = XSD_STRING;\n            }\n          }\n          quad[componentName] = newComponent;\n        }\n        if(graphName === '@default') {\n          quad.graph = {\n            termType: TYPE_DEFAULT_GRAPH,\n            value: ''\n          };\n        } else {\n          quad.graph = {\n            termType: graphName.startsWith('_:') ?\n              TYPE_BLANK_NODE : TYPE_NAMED_NODE,\n            value: graphName\n          };\n        }\n        quads.push(quad);\n      });\n    }\n\n    return quads;\n  }\n};\n\n/**\n * Compares two RDF triples for equality.\n *\n * @param t1 the first triple.\n * @param t2 the second triple.\n *\n * @return true if the triples are the same, false if not.\n */\nfunction _compareTriples(t1, t2) {\n  // compare subject and object types first as it is the quickest check\n  if(!(t1.subject.termType === t2.subject.termType &&\n    t1.object.termType === t2.object.termType)) {\n    return false;\n  }\n  // compare values\n  if(!(t1.subject.value === t2.subject.value &&\n    t1.predicate.value === t2.predicate.value &&\n    t1.object.value === t2.object.value)) {\n    return false;\n  }\n  if(t1.object.termType !== TYPE_LITERAL) {\n    // no `datatype` or `language` to check\n    return true;\n  }\n  return (\n    (t1.object.datatype.termType === t2.object.datatype.termType) &&\n    (t1.object.language === t2.object.language) &&\n    (t1.object.datatype.value === t2.object.datatype.value)\n  );\n}\n\nconst _escapeRegex = /[\"\\\\\\n\\r]/g;\n/**\n * Escape string to N-Quads literal\n */\nfunction _escape(s) {\n  return s.replace(_escapeRegex, function(match) {\n    switch(match) {\n      case '\"': return '\\\\\"';\n      case '\\\\': return '\\\\\\\\';\n      case '\\n': return '\\\\n';\n      case '\\r': return '\\\\r';\n    }\n  });\n}\n\nconst _unescapeRegex =\n  /(?:\\\\([tbnrf\"'\\\\]))|(?:\\\\u([0-9A-Fa-f]{4}))|(?:\\\\U([0-9A-Fa-f]{8}))/g;\n/**\n * Unescape N-Quads literal to string\n */\nfunction _unescape(s) {\n  return s.replace(_unescapeRegex, function(match, code, u, U) {\n    if(code) {\n      switch(code) {\n        case 't': return '\\t';\n        case 'b': return '\\b';\n        case 'n': return '\\n';\n        case 'r': return '\\r';\n        case 'f': return '\\f';\n        case '\"': return '\"';\n        case '\\'': return '\\'';\n        case '\\\\': return '\\\\';\n      }\n    }\n    if(u) {\n      return String.fromCharCode(parseInt(u, 16));\n    }\n    if(U) {\n      // FIXME: support larger values\n      throw new Error('Unsupported U escape');\n    }\n  });\n}\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst IdentifierIssuer = require('./IdentifierIssuer');\nconst MessageDigest = require('./MessageDigest');\nconst Permuter = require('./Permuter');\nconst NQuads = require('./NQuads');\n\nmodule.exports = class URDNA2015 {\n  constructor({\n    createMessageDigest = () => new MessageDigest('sha256'),\n    canonicalIdMap = new Map(),\n    maxDeepIterations = Infinity\n  } = {}) {\n    this.name = 'URDNA2015';\n    this.blankNodeInfo = new Map();\n    this.canonicalIssuer = new IdentifierIssuer('_:c14n', canonicalIdMap);\n    this.createMessageDigest = createMessageDigest;\n    this.maxDeepIterations = maxDeepIterations;\n    this.quads = null;\n    this.deepIterations = null;\n  }\n\n  // 4.4) Normalization Algorithm\n  async main(dataset) {\n    this.deepIterations = new Map();\n    this.quads = dataset;\n\n    // 1) Create the normalization state.\n    // 2) For every quad in input dataset:\n    for(const quad of dataset) {\n      // 2.1) For each blank node that occurs in the quad, add a reference\n      // to the quad using the blank node identifier in the blank node to\n      // quads map, creating a new entry if necessary.\n      this._addBlankNodeQuadInfo({quad, component: quad.subject});\n      this._addBlankNodeQuadInfo({quad, component: quad.object});\n      this._addBlankNodeQuadInfo({quad, component: quad.graph});\n    }\n\n    // 3) Create a list of non-normalized blank node identifiers\n    // non-normalized identifiers and populate it using the keys from the\n    // blank node to quads map.\n    // Note: We use a map here and it was generated during step 2.\n\n    // 4) `simple` flag is skipped -- loop is optimized away. This optimization\n    // is permitted because there was a typo in the hash first degree quads\n    // algorithm in the URDNA2015 spec that was implemented widely making it\n    // such that it could not be fixed; the result was that the loop only\n    // needs to be run once and the first degree quad hashes will never change.\n    // 5.1-5.2 are skipped; first degree quad hashes are generated just once\n    // for all non-normalized blank nodes.\n\n    // 5.3) For each blank node identifier identifier in non-normalized\n    // identifiers:\n    const hashToBlankNodes = new Map();\n    const nonNormalized = [...this.blankNodeInfo.keys()];\n    let i = 0;\n    for(const id of nonNormalized) {\n      // Note: batch hashing first degree quads 100 at a time\n      if(++i % 100 === 0) {\n        await this._yield();\n      }\n      // steps 5.3.1 and 5.3.2:\n      await this._hashAndTrackBlankNode({id, hashToBlankNodes});\n    }\n\n    // 5.4) For each hash to identifier list mapping in hash to blank\n    // nodes map, lexicographically-sorted by hash:\n    const hashes = [...hashToBlankNodes.keys()].sort();\n    // optimize away second sort, gather non-unique hashes in order as we go\n    const nonUnique = [];\n    for(const hash of hashes) {\n      // 5.4.1) If the length of identifier list is greater than 1,\n      // continue to the next mapping.\n      const idList = hashToBlankNodes.get(hash);\n      if(idList.length > 1) {\n        nonUnique.push(idList);\n        continue;\n      }\n\n      // 5.4.2) Use the Issue Identifier algorithm, passing canonical\n      // issuer and the single blank node identifier in identifier\n      // list, identifier, to issue a canonical replacement identifier\n      // for identifier.\n      const id = idList[0];\n      this.canonicalIssuer.getId(id);\n\n      // Note: These steps are skipped, optimized away since the loop\n      // only needs to be run once.\n      // 5.4.3) Remove identifier from non-normalized identifiers.\n      // 5.4.4) Remove hash from the hash to blank nodes map.\n      // 5.4.5) Set simple to true.\n    }\n\n    // 6) For each hash to identifier list mapping in hash to blank nodes map,\n    // lexicographically-sorted by hash:\n    // Note: sort optimized away, use `nonUnique`.\n    for(const idList of nonUnique) {\n      // 6.1) Create hash path list where each item will be a result of\n      // running the Hash N-Degree Quads algorithm.\n      const hashPathList = [];\n\n      // 6.2) For each blank node identifier identifier in identifier list:\n      for(const id of idList) {\n        // 6.2.1) If a canonical identifier has already been issued for\n        // identifier, continue to the next identifier.\n        if(this.canonicalIssuer.hasId(id)) {\n          continue;\n        }\n\n        // 6.2.2) Create temporary issuer, an identifier issuer\n        // initialized with the prefix _:b.\n        const issuer = new IdentifierIssuer('_:b');\n\n        // 6.2.3) Use the Issue Identifier algorithm, passing temporary\n        // issuer and identifier, to issue a new temporary blank node\n        // identifier for identifier.\n        issuer.getId(id);\n\n        // 6.2.4) Run the Hash N-Degree Quads algorithm, passing\n        // temporary issuer, and append the result to the hash path list.\n        const result = await this.hashNDegreeQuads(id, issuer);\n        hashPathList.push(result);\n      }\n\n      // 6.3) For each result in the hash path list,\n      // lexicographically-sorted by the hash in result:\n      hashPathList.sort(_stringHashCompare);\n      for(const result of hashPathList) {\n        // 6.3.1) For each blank node identifier, existing identifier,\n        // that was issued a temporary identifier by identifier issuer\n        // in result, issue a canonical identifier, in the same order,\n        // using the Issue Identifier algorithm, passing canonical\n        // issuer and existing identifier.\n        const oldIds = result.issuer.getOldIds();\n        for(const id of oldIds) {\n          this.canonicalIssuer.getId(id);\n        }\n      }\n    }\n\n    /* Note: At this point all blank nodes in the set of RDF quads have been\n    assigned canonical identifiers, which have been stored in the canonical\n    issuer. Here each quad is updated by assigning each of its blank nodes\n    its new identifier. */\n\n    // 7) For each quad, quad, in input dataset:\n    const normalized = [];\n    for(const quad of this.quads) {\n      // 7.1) Create a copy, quad copy, of quad and replace any existing\n      // blank node identifiers using the canonical identifiers\n      // previously issued by canonical issuer.\n      // Note: We optimize away the copy here.\n      const nQuad = NQuads.serializeQuadComponents(\n        this._componentWithCanonicalId(quad.subject),\n        quad.predicate,\n        this._componentWithCanonicalId(quad.object),\n        this._componentWithCanonicalId(quad.graph)\n      );\n      // 7.2) Add quad copy to the normalized dataset.\n      normalized.push(nQuad);\n    }\n\n    // sort normalized output\n    normalized.sort();\n\n    // 8) Return the normalized dataset.\n    return normalized.join('');\n  }\n\n  // 4.6) Hash First Degree Quads\n  async hashFirstDegreeQuads(id) {\n    // 1) Initialize nquads to an empty list. It will be used to store quads in\n    // N-Quads format.\n    const nquads = [];\n\n    // 2) Get the list of quads `quads` associated with the reference blank node\n    // identifier in the blank node to quads map.\n    const info = this.blankNodeInfo.get(id);\n    const quads = info.quads;\n\n    // 3) For each quad `quad` in `quads`:\n    for(const quad of quads) {\n      // 3.1) Serialize the quad in N-Quads format with the following special\n      // rule:\n\n      // 3.1.1) If any component in quad is an blank node, then serialize it\n      // using a special identifier as follows:\n      const copy = {\n        subject: null, predicate: quad.predicate, object: null, graph: null\n      };\n      // 3.1.2) If the blank node's existing blank node identifier matches\n      // the reference blank node identifier then use the blank node\n      // identifier _:a, otherwise, use the blank node identifier _:z.\n      copy.subject = this.modifyFirstDegreeComponent(\n        id, quad.subject, 'subject');\n      copy.object = this.modifyFirstDegreeComponent(\n        id, quad.object, 'object');\n      copy.graph = this.modifyFirstDegreeComponent(\n        id, quad.graph, 'graph');\n      nquads.push(NQuads.serializeQuad(copy));\n    }\n\n    // 4) Sort nquads in lexicographical order.\n    nquads.sort();\n\n    // 5) Return the hash that results from passing the sorted, joined nquads\n    // through the hash algorithm.\n    const md = this.createMessageDigest();\n    for(const nquad of nquads) {\n      md.update(nquad);\n    }\n    info.hash = await md.digest();\n    return info.hash;\n  }\n\n  // 4.7) Hash Related Blank Node\n  async hashRelatedBlankNode(related, quad, issuer, position) {\n    // 1) Set the identifier to use for related, preferring first the canonical\n    // identifier for related if issued, second the identifier issued by issuer\n    // if issued, and last, if necessary, the result of the Hash First Degree\n    // Quads algorithm, passing related.\n    let id;\n    if(this.canonicalIssuer.hasId(related)) {\n      id = this.canonicalIssuer.getId(related);\n    } else if(issuer.hasId(related)) {\n      id = issuer.getId(related);\n    } else {\n      id = this.blankNodeInfo.get(related).hash;\n    }\n\n    // 2) Initialize a string input to the value of position.\n    // Note: We use a hash object instead.\n    const md = this.createMessageDigest();\n    md.update(position);\n\n    // 3) If position is not g, append <, the value of the predicate in quad,\n    // and > to input.\n    if(position !== 'g') {\n      md.update(this.getRelatedPredicate(quad));\n    }\n\n    // 4) Append identifier to input.\n    md.update(id);\n\n    // 5) Return the hash that results from passing input through the hash\n    // algorithm.\n    return md.digest();\n  }\n\n  // 4.8) Hash N-Degree Quads\n  async hashNDegreeQuads(id, issuer) {\n    const deepIterations = this.deepIterations.get(id) || 0;\n    if(deepIterations > this.maxDeepIterations) {\n      throw new Error(\n        `Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);\n    }\n    this.deepIterations.set(id, deepIterations + 1);\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    // Note: 2) and 3) handled within `createHashToRelated`\n    const md = this.createMessageDigest();\n    const hashToRelated = await this.createHashToRelated(id, issuer);\n\n    // 4) Create an empty string, data to hash.\n    // Note: We created a hash object `md` above instead.\n\n    // 5) For each related hash to blank node list mapping in hash to related\n    // blank nodes map, sorted lexicographically by related hash:\n    const hashes = [...hashToRelated.keys()].sort();\n    for(const hash of hashes) {\n      // 5.1) Append the related hash to the data to hash.\n      md.update(hash);\n\n      // 5.2) Create a string chosen path.\n      let chosenPath = '';\n\n      // 5.3) Create an unset chosen issuer variable.\n      let chosenIssuer;\n\n      // 5.4) For each permutation of blank node list:\n      const permuter = new Permuter(hashToRelated.get(hash));\n      let i = 0;\n      while(permuter.hasNext()) {\n        const permutation = permuter.next();\n        // Note: batch permutations 3 at a time\n        if(++i % 3 === 0) {\n          await this._yield();\n        }\n\n        // 5.4.1) Create a copy of issuer, issuer copy.\n        let issuerCopy = issuer.clone();\n\n        // 5.4.2) Create a string path.\n        let path = '';\n\n        // 5.4.3) Create a recursion list, to store blank node identifiers\n        // that must be recursively processed by this algorithm.\n        const recursionList = [];\n\n        // 5.4.4) For each related in permutation:\n        let nextPermutation = false;\n        for(const related of permutation) {\n          // 5.4.4.1) If a canonical identifier has been issued for\n          // related, append it to path.\n          if(this.canonicalIssuer.hasId(related)) {\n            path += this.canonicalIssuer.getId(related);\n          } else {\n            // 5.4.4.2) Otherwise:\n            // 5.4.4.2.1) If issuer copy has not issued an identifier for\n            // related, append related to recursion list.\n            if(!issuerCopy.hasId(related)) {\n              recursionList.push(related);\n            }\n            // 5.4.4.2.2) Use the Issue Identifier algorithm, passing\n            // issuer copy and related and append the result to path.\n            path += issuerCopy.getId(related);\n          }\n\n          // 5.4.4.3) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.5) For each related in recursion list:\n        for(const related of recursionList) {\n          // 5.4.5.1) Set result to the result of recursively executing\n          // the Hash N-Degree Quads algorithm, passing related for\n          // identifier and issuer copy for path identifier issuer.\n          const result = await this.hashNDegreeQuads(related, issuerCopy);\n\n          // 5.4.5.2) Use the Issue Identifier algorithm, passing issuer\n          // copy and related and append the result to path.\n          path += issuerCopy.getId(related);\n\n          // 5.4.5.3) Append <, the hash in result, and > to path.\n          path += `<${result.hash}>`;\n\n          // 5.4.5.4) Set issuer copy to the identifier issuer in\n          // result.\n          issuerCopy = result.issuer;\n\n          // 5.4.5.5) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.6) If chosen path is empty or path is lexicographically\n        // less than chosen path, set chosen path to path and chosen\n        // issuer to issuer copy.\n        if(chosenPath.length === 0 || path < chosenPath) {\n          chosenPath = path;\n          chosenIssuer = issuerCopy;\n        }\n      }\n\n      // 5.5) Append chosen path to data to hash.\n      md.update(chosenPath);\n\n      // 5.6) Replace issuer, by reference, with chosen issuer.\n      issuer = chosenIssuer;\n    }\n\n    // 6) Return issuer and the hash that results from passing data to hash\n    // through the hash algorithm.\n    return {hash: await md.digest(), issuer};\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    /* Note: A mistake in the URDNA2015 spec that made its way into\n    implementations (and therefore must stay to avoid interop breakage)\n    resulted in an assigned canonical ID, if available for\n    `component.value`, not being used in place of `_:a`/`_:z`, so\n    we don't use it here. */\n    return {\n      termType: 'BlankNode',\n      value: component.value === id ? '_:a' : '_:z'\n    };\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return `<${quad.predicate.value}>`;\n  }\n\n  // helper for creating hash to related blank nodes map\n  async createHashToRelated(id, issuer) {\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = new Map();\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = this.blankNodeInfo.get(id).quads;\n\n    // 3) For each quad in quads:\n    let i = 0;\n    for(const quad of quads) {\n      // Note: batch hashing related blank node quads 100 at a time\n      if(++i % 100 === 0) {\n        await this._yield();\n      }\n      // 3.1) For each component in quad, if component is the subject, object,\n      // and graph name and it is a blank node that is not identified by\n      // identifier:\n      // steps 3.1.1 and 3.1.2 occur in helpers:\n      await Promise.all([\n        this._addRelatedBlankNodeHash({\n          quad, component: quad.subject, position: 's',\n          id, issuer, hashToRelated\n        }),\n        this._addRelatedBlankNodeHash({\n          quad, component: quad.object, position: 'o',\n          id, issuer, hashToRelated\n        }),\n        this._addRelatedBlankNodeHash({\n          quad, component: quad.graph, position: 'g',\n          id, issuer, hashToRelated\n        })\n      ]);\n    }\n\n    return hashToRelated;\n  }\n\n  async _hashAndTrackBlankNode({id, hashToBlankNodes}) {\n    // 5.3.1) Create a hash, hash, according to the Hash First Degree\n    // Quads algorithm.\n    const hash = await this.hashFirstDegreeQuads(id);\n\n    // 5.3.2) Add hash and identifier to hash to blank nodes map,\n    // creating a new entry if necessary.\n    const idList = hashToBlankNodes.get(hash);\n    if(!idList) {\n      hashToBlankNodes.set(hash, [id]);\n    } else {\n      idList.push(id);\n    }\n  }\n\n  _addBlankNodeQuadInfo({quad, component}) {\n    if(component.termType !== 'BlankNode') {\n      return;\n    }\n    const id = component.value;\n    const info = this.blankNodeInfo.get(id);\n    if(info) {\n      info.quads.add(quad);\n    } else {\n      this.blankNodeInfo.set(id, {quads: new Set([quad]), hash: null});\n    }\n  }\n\n  async _addRelatedBlankNodeHash(\n    {quad, component, position, id, issuer, hashToRelated}) {\n    if(!(component.termType === 'BlankNode' && component.value !== id)) {\n      return;\n    }\n    // 3.1.1) Set hash to the result of the Hash Related Blank Node\n    // algorithm, passing the blank node identifier for component as\n    // related, quad, path identifier issuer as issuer, and position as\n    // either s, o, or g based on whether component is a subject, object,\n    // graph name, respectively.\n    const related = component.value;\n    const hash = await this.hashRelatedBlankNode(\n      related, quad, issuer, position);\n\n    // 3.1.2) Add a mapping of hash to the blank node identifier for\n    // component to hash to related blank nodes map, adding an entry as\n    // necessary.\n    const entries = hashToRelated.get(hash);\n    if(entries) {\n      entries.push(related);\n    } else {\n      hashToRelated.set(hash, [related]);\n    }\n  }\n\n  // canonical ids for 7.1\n  _componentWithCanonicalId(component) {\n    if(component.termType === 'BlankNode' &&\n      !component.value.startsWith(this.canonicalIssuer.prefix)) {\n      // create new BlankNode\n      return {\n        termType: 'BlankNode',\n        value: this.canonicalIssuer.getId(component.value)\n      };\n    }\n    return component;\n  }\n\n  async _yield() {\n    return new Promise(resolve => setImmediate(resolve));\n  }\n};\n\nfunction _stringHashCompare(a, b) {\n  return a.hash < b.hash ? -1 : a.hash > b.hash ? 1 : 0;\n}\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst MessageDigest = require('./MessageDigest');\nconst URDNA2015 = require('./URDNA2015');\n\nmodule.exports = class URDNA2012 extends URDNA2015 {\n  constructor() {\n    super();\n    this.name = 'URGNA2012';\n    this.createMessageDigest = () => new MessageDigest('sha1');\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component, key) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    if(key === 'graph') {\n      return {\n        termType: 'BlankNode',\n        value: '_:g'\n      };\n    }\n    return {\n      termType: 'BlankNode',\n      value: (component.value === id ? '_:a' : '_:z')\n    };\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return quad.predicate.value;\n  }\n\n  // helper for creating hash to related blank nodes map\n  async createHashToRelated(id, issuer) {\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = new Map();\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = this.blankNodeInfo.get(id).quads;\n\n    // 3) For each quad in quads:\n    let i = 0;\n    for(const quad of quads) {\n      // 3.1) If the quad's subject is a blank node that does not match\n      // identifier, set hash to the result of the Hash Related Blank Node\n      // algorithm, passing the blank node identifier for subject as related,\n      // quad, path identifier issuer as issuer, and p as position.\n      let position;\n      let related;\n      if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {\n        related = quad.subject.value;\n        position = 'p';\n      } else if(\n        quad.object.termType === 'BlankNode' && quad.object.value !== id) {\n        // 3.2) Otherwise, if quad's object is a blank node that does not match\n        // identifier, to the result of the Hash Related Blank Node algorithm,\n        // passing the blank node identifier for object as related, quad, path\n        // identifier issuer as issuer, and r as position.\n        related = quad.object.value;\n        position = 'r';\n      } else {\n        // 3.3) Otherwise, continue to the next quad.\n        continue;\n      }\n      // Note: batch hashing related blank nodes 100 at a time\n      if(++i % 100 === 0) {\n        await this._yield();\n      }\n      // 3.4) Add a mapping of hash to the blank node identifier for the\n      // component that matched (subject or object) to hash to related blank\n      // nodes map, adding an entry as necessary.\n      const hash = await this.hashRelatedBlankNode(\n        related, quad, issuer, position);\n      const entries = hashToRelated.get(hash);\n      if(entries) {\n        entries.push(related);\n      } else {\n        hashToRelated.set(hash, [related]);\n      }\n    }\n\n    return hashToRelated;\n  }\n};\n", "/*!\n * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst IdentifierIssuer = require('./IdentifierIssuer');\n// FIXME: do not import; convert to requiring a\n// hash factory\nconst MessageDigest = require('./MessageDigest');\nconst Permuter = require('./Permuter');\nconst NQuads = require('./NQuads');\n\nmodule.exports = class URDNA2015Sync {\n  constructor({\n    createMessageDigest = () => new MessageDigest('sha256'),\n    canonicalIdMap = new Map(),\n    maxDeepIterations = Infinity\n  } = {}) {\n    this.name = 'URDNA2015';\n    this.blankNodeInfo = new Map();\n    this.canonicalIssuer = new IdentifierIssuer('_:c14n', canonicalIdMap);\n    this.createMessageDigest = createMessageDigest;\n    this.maxDeepIterations = maxDeepIterations;\n    this.quads = null;\n    this.deepIterations = null;\n  }\n\n  // 4.4) Normalization Algorithm\n  main(dataset) {\n    this.deepIterations = new Map();\n    this.quads = dataset;\n\n    // 1) Create the normalization state.\n    // 2) For every quad in input dataset:\n    for(const quad of dataset) {\n      // 2.1) For each blank node that occurs in the quad, add a reference\n      // to the quad using the blank node identifier in the blank node to\n      // quads map, creating a new entry if necessary.\n      this._addBlankNodeQuadInfo({quad, component: quad.subject});\n      this._addBlankNodeQuadInfo({quad, component: quad.object});\n      this._addBlankNodeQuadInfo({quad, component: quad.graph});\n    }\n\n    // 3) Create a list of non-normalized blank node identifiers\n    // non-normalized identifiers and populate it using the keys from the\n    // blank node to quads map.\n    // Note: We use a map here and it was generated during step 2.\n\n    // 4) `simple` flag is skipped -- loop is optimized away. This optimization\n    // is permitted because there was a typo in the hash first degree quads\n    // algorithm in the URDNA2015 spec that was implemented widely making it\n    // such that it could not be fixed; the result was that the loop only\n    // needs to be run once and the first degree quad hashes will never change.\n    // 5.1-5.2 are skipped; first degree quad hashes are generated just once\n    // for all non-normalized blank nodes.\n\n    // 5.3) For each blank node identifier identifier in non-normalized\n    // identifiers:\n    const hashToBlankNodes = new Map();\n    const nonNormalized = [...this.blankNodeInfo.keys()];\n    for(const id of nonNormalized) {\n      // steps 5.3.1 and 5.3.2:\n      this._hashAndTrackBlankNode({id, hashToBlankNodes});\n    }\n\n    // 5.4) For each hash to identifier list mapping in hash to blank\n    // nodes map, lexicographically-sorted by hash:\n    const hashes = [...hashToBlankNodes.keys()].sort();\n    // optimize away second sort, gather non-unique hashes in order as we go\n    const nonUnique = [];\n    for(const hash of hashes) {\n      // 5.4.1) If the length of identifier list is greater than 1,\n      // continue to the next mapping.\n      const idList = hashToBlankNodes.get(hash);\n      if(idList.length > 1) {\n        nonUnique.push(idList);\n        continue;\n      }\n\n      // 5.4.2) Use the Issue Identifier algorithm, passing canonical\n      // issuer and the single blank node identifier in identifier\n      // list, identifier, to issue a canonical replacement identifier\n      // for identifier.\n      const id = idList[0];\n      this.canonicalIssuer.getId(id);\n\n      // Note: These steps are skipped, optimized away since the loop\n      // only needs to be run once.\n      // 5.4.3) Remove identifier from non-normalized identifiers.\n      // 5.4.4) Remove hash from the hash to blank nodes map.\n      // 5.4.5) Set simple to true.\n    }\n\n    // 6) For each hash to identifier list mapping in hash to blank nodes map,\n    // lexicographically-sorted by hash:\n    // Note: sort optimized away, use `nonUnique`.\n    for(const idList of nonUnique) {\n      // 6.1) Create hash path list where each item will be a result of\n      // running the Hash N-Degree Quads algorithm.\n      const hashPathList = [];\n\n      // 6.2) For each blank node identifier identifier in identifier list:\n      for(const id of idList) {\n        // 6.2.1) If a canonical identifier has already been issued for\n        // identifier, continue to the next identifier.\n        if(this.canonicalIssuer.hasId(id)) {\n          continue;\n        }\n\n        // 6.2.2) Create temporary issuer, an identifier issuer\n        // initialized with the prefix _:b.\n        const issuer = new IdentifierIssuer('_:b');\n\n        // 6.2.3) Use the Issue Identifier algorithm, passing temporary\n        // issuer and identifier, to issue a new temporary blank node\n        // identifier for identifier.\n        issuer.getId(id);\n\n        // 6.2.4) Run the Hash N-Degree Quads algorithm, passing\n        // temporary issuer, and append the result to the hash path list.\n        const result = this.hashNDegreeQuads(id, issuer);\n        hashPathList.push(result);\n      }\n\n      // 6.3) For each result in the hash path list,\n      // lexicographically-sorted by the hash in result:\n      hashPathList.sort(_stringHashCompare);\n      for(const result of hashPathList) {\n        // 6.3.1) For each blank node identifier, existing identifier,\n        // that was issued a temporary identifier by identifier issuer\n        // in result, issue a canonical identifier, in the same order,\n        // using the Issue Identifier algorithm, passing canonical\n        // issuer and existing identifier.\n        const oldIds = result.issuer.getOldIds();\n        for(const id of oldIds) {\n          this.canonicalIssuer.getId(id);\n        }\n      }\n    }\n\n    /* Note: At this point all blank nodes in the set of RDF quads have been\n    assigned canonical identifiers, which have been stored in the canonical\n    issuer. Here each quad is updated by assigning each of its blank nodes\n    its new identifier. */\n\n    // 7) For each quad, quad, in input dataset:\n    const normalized = [];\n    for(const quad of this.quads) {\n      // 7.1) Create a copy, quad copy, of quad and replace any existing\n      // blank node identifiers using the canonical identifiers\n      // previously issued by canonical issuer.\n      // Note: We optimize away the copy here.\n      const nQuad = NQuads.serializeQuadComponents(\n        this._componentWithCanonicalId({component: quad.subject}),\n        quad.predicate,\n        this._componentWithCanonicalId({component: quad.object}),\n        this._componentWithCanonicalId({component: quad.graph})\n      );\n      // 7.2) Add quad copy to the normalized dataset.\n      normalized.push(nQuad);\n    }\n\n    // sort normalized output\n    normalized.sort();\n\n    // 8) Return the normalized dataset.\n    return normalized.join('');\n  }\n\n  // 4.6) Hash First Degree Quads\n  hashFirstDegreeQuads(id) {\n    // 1) Initialize nquads to an empty list. It will be used to store quads in\n    // N-Quads format.\n    const nquads = [];\n\n    // 2) Get the list of quads `quads` associated with the reference blank node\n    // identifier in the blank node to quads map.\n    const info = this.blankNodeInfo.get(id);\n    const quads = info.quads;\n\n    // 3) For each quad `quad` in `quads`:\n    for(const quad of quads) {\n      // 3.1) Serialize the quad in N-Quads format with the following special\n      // rule:\n\n      // 3.1.1) If any component in quad is an blank node, then serialize it\n      // using a special identifier as follows:\n      const copy = {\n        subject: null, predicate: quad.predicate, object: null, graph: null\n      };\n      // 3.1.2) If the blank node's existing blank node identifier matches\n      // the reference blank node identifier then use the blank node\n      // identifier _:a, otherwise, use the blank node identifier _:z.\n      copy.subject = this.modifyFirstDegreeComponent(\n        id, quad.subject, 'subject');\n      copy.object = this.modifyFirstDegreeComponent(\n        id, quad.object, 'object');\n      copy.graph = this.modifyFirstDegreeComponent(\n        id, quad.graph, 'graph');\n      nquads.push(NQuads.serializeQuad(copy));\n    }\n\n    // 4) Sort nquads in lexicographical order.\n    nquads.sort();\n\n    // 5) Return the hash that results from passing the sorted, joined nquads\n    // through the hash algorithm.\n    const md = this.createMessageDigest();\n    for(const nquad of nquads) {\n      md.update(nquad);\n    }\n    info.hash = md.digest();\n    return info.hash;\n  }\n\n  // 4.7) Hash Related Blank Node\n  hashRelatedBlankNode(related, quad, issuer, position) {\n    // 1) Set the identifier to use for related, preferring first the canonical\n    // identifier for related if issued, second the identifier issued by issuer\n    // if issued, and last, if necessary, the result of the Hash First Degree\n    // Quads algorithm, passing related.\n    let id;\n    if(this.canonicalIssuer.hasId(related)) {\n      id = this.canonicalIssuer.getId(related);\n    } else if(issuer.hasId(related)) {\n      id = issuer.getId(related);\n    } else {\n      id = this.blankNodeInfo.get(related).hash;\n    }\n\n    // 2) Initialize a string input to the value of position.\n    // Note: We use a hash object instead.\n    const md = this.createMessageDigest();\n    md.update(position);\n\n    // 3) If position is not g, append <, the value of the predicate in quad,\n    // and > to input.\n    if(position !== 'g') {\n      md.update(this.getRelatedPredicate(quad));\n    }\n\n    // 4) Append identifier to input.\n    md.update(id);\n\n    // 5) Return the hash that results from passing input through the hash\n    // algorithm.\n    return md.digest();\n  }\n\n  // 4.8) Hash N-Degree Quads\n  hashNDegreeQuads(id, issuer) {\n    const deepIterations = this.deepIterations.get(id) || 0;\n    if(deepIterations > this.maxDeepIterations) {\n      throw new Error(\n        `Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);\n    }\n    this.deepIterations.set(id, deepIterations + 1);\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    // Note: 2) and 3) handled within `createHashToRelated`\n    const md = this.createMessageDigest();\n    const hashToRelated = this.createHashToRelated(id, issuer);\n\n    // 4) Create an empty string, data to hash.\n    // Note: We created a hash object `md` above instead.\n\n    // 5) For each related hash to blank node list mapping in hash to related\n    // blank nodes map, sorted lexicographically by related hash:\n    const hashes = [...hashToRelated.keys()].sort();\n    for(const hash of hashes) {\n      // 5.1) Append the related hash to the data to hash.\n      md.update(hash);\n\n      // 5.2) Create a string chosen path.\n      let chosenPath = '';\n\n      // 5.3) Create an unset chosen issuer variable.\n      let chosenIssuer;\n\n      // 5.4) For each permutation of blank node list:\n      const permuter = new Permuter(hashToRelated.get(hash));\n      while(permuter.hasNext()) {\n        const permutation = permuter.next();\n\n        // 5.4.1) Create a copy of issuer, issuer copy.\n        let issuerCopy = issuer.clone();\n\n        // 5.4.2) Create a string path.\n        let path = '';\n\n        // 5.4.3) Create a recursion list, to store blank node identifiers\n        // that must be recursively processed by this algorithm.\n        const recursionList = [];\n\n        // 5.4.4) For each related in permutation:\n        let nextPermutation = false;\n        for(const related of permutation) {\n          // 5.4.4.1) If a canonical identifier has been issued for\n          // related, append it to path.\n          if(this.canonicalIssuer.hasId(related)) {\n            path += this.canonicalIssuer.getId(related);\n          } else {\n            // 5.4.4.2) Otherwise:\n            // 5.4.4.2.1) If issuer copy has not issued an identifier for\n            // related, append related to recursion list.\n            if(!issuerCopy.hasId(related)) {\n              recursionList.push(related);\n            }\n            // 5.4.4.2.2) Use the Issue Identifier algorithm, passing\n            // issuer copy and related and append the result to path.\n            path += issuerCopy.getId(related);\n          }\n\n          // 5.4.4.3) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.5) For each related in recursion list:\n        for(const related of recursionList) {\n          // 5.4.5.1) Set result to the result of recursively executing\n          // the Hash N-Degree Quads algorithm, passing related for\n          // identifier and issuer copy for path identifier issuer.\n          const result = this.hashNDegreeQuads(related, issuerCopy);\n\n          // 5.4.5.2) Use the Issue Identifier algorithm, passing issuer\n          // copy and related and append the result to path.\n          path += issuerCopy.getId(related);\n\n          // 5.4.5.3) Append <, the hash in result, and > to path.\n          path += `<${result.hash}>`;\n\n          // 5.4.5.4) Set issuer copy to the identifier issuer in\n          // result.\n          issuerCopy = result.issuer;\n\n          // 5.4.5.5) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.6) If chosen path is empty or path is lexicographically\n        // less than chosen path, set chosen path to path and chosen\n        // issuer to issuer copy.\n        if(chosenPath.length === 0 || path < chosenPath) {\n          chosenPath = path;\n          chosenIssuer = issuerCopy;\n        }\n      }\n\n      // 5.5) Append chosen path to data to hash.\n      md.update(chosenPath);\n\n      // 5.6) Replace issuer, by reference, with chosen issuer.\n      issuer = chosenIssuer;\n    }\n\n    // 6) Return issuer and the hash that results from passing data to hash\n    // through the hash algorithm.\n    return {hash: md.digest(), issuer};\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    /* Note: A mistake in the URDNA2015 spec that made its way into\n    implementations (and therefore must stay to avoid interop breakage)\n    resulted in an assigned canonical ID, if available for\n    `component.value`, not being used in place of `_:a`/`_:z`, so\n    we don't use it here. */\n    return {\n      termType: 'BlankNode',\n      value: component.value === id ? '_:a' : '_:z'\n    };\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return `<${quad.predicate.value}>`;\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer) {\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = new Map();\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = this.blankNodeInfo.get(id).quads;\n\n    // 3) For each quad in quads:\n    for(const quad of quads) {\n      // 3.1) For each component in quad, if component is the subject, object,\n      // or graph name and it is a blank node that is not identified by\n      // identifier:\n      // steps 3.1.1 and 3.1.2 occur in helpers:\n      this._addRelatedBlankNodeHash({\n        quad, component: quad.subject, position: 's',\n        id, issuer, hashToRelated\n      });\n      this._addRelatedBlankNodeHash({\n        quad, component: quad.object, position: 'o',\n        id, issuer, hashToRelated\n      });\n      this._addRelatedBlankNodeHash({\n        quad, component: quad.graph, position: 'g',\n        id, issuer, hashToRelated\n      });\n    }\n\n    return hashToRelated;\n  }\n\n  _hashAndTrackBlankNode({id, hashToBlankNodes}) {\n    // 5.3.1) Create a hash, hash, according to the Hash First Degree\n    // Quads algorithm.\n    const hash = this.hashFirstDegreeQuads(id);\n\n    // 5.3.2) Add hash and identifier to hash to blank nodes map,\n    // creating a new entry if necessary.\n    const idList = hashToBlankNodes.get(hash);\n    if(!idList) {\n      hashToBlankNodes.set(hash, [id]);\n    } else {\n      idList.push(id);\n    }\n  }\n\n  _addBlankNodeQuadInfo({quad, component}) {\n    if(component.termType !== 'BlankNode') {\n      return;\n    }\n    const id = component.value;\n    const info = this.blankNodeInfo.get(id);\n    if(info) {\n      info.quads.add(quad);\n    } else {\n      this.blankNodeInfo.set(id, {quads: new Set([quad]), hash: null});\n    }\n  }\n\n  _addRelatedBlankNodeHash(\n    {quad, component, position, id, issuer, hashToRelated}) {\n    if(!(component.termType === 'BlankNode' && component.value !== id)) {\n      return;\n    }\n    // 3.1.1) Set hash to the result of the Hash Related Blank Node\n    // algorithm, passing the blank node identifier for component as\n    // related, quad, path identifier issuer as issuer, and position as\n    // either s, o, or g based on whether component is a subject, object,\n    // graph name, respectively.\n    const related = component.value;\n    const hash = this.hashRelatedBlankNode(related, quad, issuer, position);\n\n    // 3.1.2) Add a mapping of hash to the blank node identifier for\n    // component to hash to related blank nodes map, adding an entry as\n    // necessary.\n    const entries = hashToRelated.get(hash);\n    if(entries) {\n      entries.push(related);\n    } else {\n      hashToRelated.set(hash, [related]);\n    }\n  }\n\n  // canonical ids for 7.1\n  _componentWithCanonicalId({component}) {\n    if(component.termType === 'BlankNode' &&\n      !component.value.startsWith(this.canonicalIssuer.prefix)) {\n      // create new BlankNode\n      return {\n        termType: 'BlankNode',\n        value: this.canonicalIssuer.getId(component.value)\n      };\n    }\n    return component;\n  }\n};\n\nfunction _stringHashCompare(a, b) {\n  return a.hash < b.hash ? -1 : a.hash > b.hash ? 1 : 0;\n}\n", "/*!\n * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst MessageDigest = require('./MessageDigest');\nconst URDNA2015Sync = require('./URDNA2015Sync');\n\nmodule.exports = class URDNA2012Sync extends URDNA2015Sync {\n  constructor() {\n    super();\n    this.name = 'URGNA2012';\n    this.createMessageDigest = () => new MessageDigest('sha1');\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component, key) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    if(key === 'graph') {\n      return {\n        termType: 'BlankNode',\n        value: '_:g'\n      };\n    }\n    return {\n      termType: 'BlankNode',\n      value: (component.value === id ? '_:a' : '_:z')\n    };\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return quad.predicate.value;\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer) {\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = new Map();\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = this.blankNodeInfo.get(id).quads;\n\n    // 3) For each quad in quads:\n    for(const quad of quads) {\n      // 3.1) If the quad's subject is a blank node that does not match\n      // identifier, set hash to the result of the Hash Related Blank Node\n      // algorithm, passing the blank node identifier for subject as related,\n      // quad, path identifier issuer as issuer, and p as position.\n      let position;\n      let related;\n      if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {\n        related = quad.subject.value;\n        position = 'p';\n      } else if(\n        quad.object.termType === 'BlankNode' && quad.object.value !== id) {\n        // 3.2) Otherwise, if quad's object is a blank node that does not match\n        // identifier, to the result of the Hash Related Blank Node algorithm,\n        // passing the blank node identifier for object as related, quad, path\n        // identifier issuer as issuer, and r as position.\n        related = quad.object.value;\n        position = 'r';\n      } else {\n        // 3.3) Otherwise, continue to the next quad.\n        continue;\n      }\n      // 3.4) Add a mapping of hash to the blank node identifier for the\n      // component that matched (subject or object) to hash to related blank\n      // nodes map, adding an entry as necessary.\n      const hash = this.hashRelatedBlankNode(related, quad, issuer, position);\n      const entries = hashToRelated.get(hash);\n      if(entries) {\n        entries.push(related);\n      } else {\n        hashToRelated.set(hash, [related]);\n      }\n    }\n\n    return hashToRelated;\n  }\n};\n", "", "/**\n * An implementation of the RDF Dataset Normalization specification.\n * This library works in the browser and node.js.\n *\n * BSD 3-Clause License\n * Copyright (c) 2016-2023 Digital Bazaar, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *\n * Neither the name of the Digital Bazaar, Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\n\nconst URDNA2015 = require('./URDNA2015');\nconst URGNA2012 = require('./URGNA2012');\nconst URDNA2015Sync = require('./URDNA2015Sync');\nconst URGNA2012Sync = require('./URGNA2012Sync');\n\n// optional native support\nlet rdfCanonizeNative;\ntry {\n  rdfCanonizeNative = require('rdf-canonize-native');\n} catch(e) {}\n\n// return a dataset from input dataset or legacy dataset\nfunction _inputToDataset(input/*, options*/) {\n  // back-compat with legacy dataset\n  if(!Array.isArray(input)) {\n    return exports.NQuads.legacyDatasetToQuads(input);\n  }\n  return input;\n}\n\n// expose helpers\nexports.NQuads = require('./NQuads');\nexports.IdentifierIssuer = require('./IdentifierIssuer');\n\n/**\n * Get or set native API.\n *\n * @param api the native API.\n *\n * @return the currently set native API.\n */\nexports._rdfCanonizeNative = function(api) {\n  if(api) {\n    rdfCanonizeNative = api;\n  }\n  return rdfCanonizeNative;\n};\n\n/**\n * Asynchronously canonizes an RDF dataset.\n *\n * @param {Array|object|string} input - The input to canonize given as a\n *   dataset or legacy dataset.\n * @param {object} options - The options to use:\n *   {string} algorithm - The canonicalization algorithm to use, `URDNA2015` or\n *     `URGNA2012`.\n *   {Function} [createMessageDigest] - A factory function for creating a\n *     `MessageDigest` interface that overrides the built-in message digest\n *     implementation used by the canonize algorithm; note that using a hash\n *     algorithm (or HMAC algorithm) that differs from the one specified by\n *     the canonize algorithm will result in different output.\n *   {Map} [canonicalIdMap] - An optional Map to be populated by the canonical\n *     identifier issuer with the bnode identifier mapping generated by the\n *     canonicalization algorithm.\n *   {boolean} [useNative=false] - Use native implementation.\n *   {number} [maxDeepIterations=Infinity] - The maximum number of times to run\n *     deep comparison algorithms (such as the N-Degree Hash Quads algorithm\n *     used in URDNA2015) before bailing out and throwing an error; this is a\n *     useful setting for preventing wasted CPU cycles or DoS when canonizing\n *     meaningless or potentially malicious datasets, a recommended value is\n *     `1`.\n *\n * @return a Promise that resolves to the canonicalized RDF Dataset.\n */\nexports.canonize = async function(input, options) {\n  const dataset = _inputToDataset(input, options);\n\n  if(options.useNative) {\n    if(!rdfCanonizeNative) {\n      throw new Error('rdf-canonize-native not available');\n    }\n    if(options.createMessageDigest) {\n      throw new Error(\n        '\"createMessageDigest\" cannot be used with \"useNative\".');\n    }\n    return new Promise((resolve, reject) =>\n      rdfCanonizeNative.canonize(dataset, options, (err, canonical) =>\n        err ? reject(err) : resolve(canonical)));\n  }\n\n  if(options.algorithm === 'URDNA2015') {\n    return new URDNA2015(options).main(dataset);\n  }\n  if(options.algorithm === 'URGNA2012') {\n    if(options.createMessageDigest) {\n      throw new Error(\n        '\"createMessageDigest\" cannot be used with \"URGNA2012\".');\n    }\n    return new URGNA2012(options).main(dataset);\n  }\n  if(!('algorithm' in options)) {\n    throw new Error('No RDF Dataset Canonicalization algorithm specified.');\n  }\n  throw new Error(\n    'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);\n};\n\n/**\n * This method is no longer available in the public API, it is for testing\n * only. It synchronously canonizes an RDF dataset and does not work in the\n * browser.\n *\n * @param {Array|object|string} input - The input to canonize given as a\n *   dataset or legacy dataset.\n * @param {object} options - The options to use:\n *   {string} algorithm - The canonicalization algorithm to use, `URDNA2015` or\n *     `URGNA2012`.\n *   {Function} [createMessageDigest] - A factory function for creating a\n *     `MessageDigest` interface that overrides the built-in message digest\n *     implementation used by the canonize algorithm; note that using a hash\n *     algorithm (or HMAC algorithm) that differs from the one specified by\n *     the canonize algorithm will result in different output.\n *   {boolean} [useNative=false] - Use native implementation.\n *   {number} [maxDeepIterations=Infinity] - The maximum number of times to run\n *     deep comparison algorithms (such as the N-Degree Hash Quads algorithm\n *     used in URDNA2015) before bailing out and throwing an error; this is a\n *     useful setting for preventing wasted CPU cycles or DoS when canonizing\n *     meaningless or potentially malicious datasets, a recommended value is\n *     `1`.\n *\n * @return the RDF dataset in canonical form.\n */\nexports._canonizeSync = function(input, options) {\n  const dataset = _inputToDataset(input, options);\n\n  if(options.useNative) {\n    if(!rdfCanonizeNative) {\n      throw new Error('rdf-canonize-native not available');\n    }\n    if(options.createMessageDigest) {\n      throw new Error(\n        '\"createMessageDigest\" cannot be used with \"useNative\".');\n    }\n    return rdfCanonizeNative.canonizeSync(dataset, options);\n  }\n  if(options.algorithm === 'URDNA2015') {\n    return new URDNA2015Sync(options).main(dataset);\n  }\n  if(options.algorithm === 'URGNA2012') {\n    if(options.createMessageDigest) {\n      throw new Error(\n        '\"createMessageDigest\" cannot be used with \"URGNA2012\".');\n    }\n    return new URGNA2012Sync(options).main(dataset);\n  }\n  if(!('algorithm' in options)) {\n    throw new Error('No RDF Dataset Canonicalization algorithm specified.');\n  }\n  throw new Error(\n    'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);\n};\n", "/**\n * An implementation of the RDF Dataset Normalization specification.\n *\n * @author Dave Longley\n *\n * Copyright 2010-2021 Digital Bazaar, Inc.\n */\nmodule.exports = require('./lib');\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Returns true if the given value is an Array.\n *\n * @param v the value to check.\n *\n * @return true if the value is an Array, false if not.\n */\napi.isArray = Array.isArray;\n\n/**\n * Returns true if the given value is a Boolean.\n *\n * @param v the value to check.\n *\n * @return true if the value is a Boolean, false if not.\n */\napi.isBoolean = v => (typeof v === 'boolean' ||\n  Object.prototype.toString.call(v) === '[object Boolean]');\n\n/**\n * Returns true if the given value is a double.\n *\n * @param v the value to check.\n *\n * @return true if the value is a double, false if not.\n */\napi.isDouble = v => api.isNumber(v) &&\n  (String(v).indexOf('.') !== -1 || Math.abs(v) >= 1e21);\n\n/**\n * Returns true if the given value is an empty Object.\n *\n * @param v the value to check.\n *\n * @return true if the value is an empty Object, false if not.\n */\napi.isEmptyObject = v => api.isObject(v) && Object.keys(v).length === 0;\n\n/**\n * Returns true if the given value is a Number.\n *\n * @param v the value to check.\n *\n * @return true if the value is a Number, false if not.\n */\napi.isNumber = v => (typeof v === 'number' ||\n  Object.prototype.toString.call(v) === '[object Number]');\n\n/**\n * Returns true if the given value is numeric.\n *\n * @param v the value to check.\n *\n * @return true if the value is numeric, false if not.\n */\napi.isNumeric = v => !isNaN(parseFloat(v)) && isFinite(v);\n\n/**\n * Returns true if the given value is an Object.\n *\n * @param v the value to check.\n *\n * @return true if the value is an Object, false if not.\n */\napi.isObject = v => Object.prototype.toString.call(v) === '[object Object]';\n\n/**\n * Returns true if the given value is a String.\n *\n * @param v the value to check.\n *\n * @return true if the value is a String, false if not.\n */\napi.isString = v => (typeof v === 'string' ||\n  Object.prototype.toString.call(v) === '[object String]');\n\n/**\n * Returns true if the given value is undefined.\n *\n * @param v the value to check.\n *\n * @return true if the value is undefined, false if not.\n */\napi.isUndefined = v => typeof v === 'undefined';\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst types = require('./types');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Returns true if the given value is a subject with properties.\n *\n * @param v the value to check.\n *\n * @return true if the value is a subject with properties, false if not.\n */\napi.isSubject = v => {\n  // Note: A value is a subject if all of these hold true:\n  // 1. It is an Object.\n  // 2. It is not a @value, @set, or @list.\n  // 3. It has more than 1 key OR any existing key is not @id.\n  if(types.isObject(v) &&\n    !(('@value' in v) || ('@set' in v) || ('@list' in v))) {\n    const keyCount = Object.keys(v).length;\n    return (keyCount > 1 || !('@id' in v));\n  }\n  return false;\n};\n\n/**\n * Returns true if the given value is a subject reference.\n *\n * @param v the value to check.\n *\n * @return true if the value is a subject reference, false if not.\n */\napi.isSubjectReference = v =>\n  // Note: A value is a subject reference if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has a single key: @id.\n  (types.isObject(v) && Object.keys(v).length === 1 && ('@id' in v));\n\n/**\n * Returns true if the given value is a @value.\n *\n * @param v the value to check.\n *\n * @return true if the value is a @value, false if not.\n */\napi.isValue = v =>\n  // Note: A value is a @value if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has the @value property.\n  types.isObject(v) && ('@value' in v);\n\n/**\n * Returns true if the given value is a @list.\n *\n * @param v the value to check.\n *\n * @return true if the value is a @list, false if not.\n */\napi.isList = v =>\n  // Note: A value is a @list if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has the @list property.\n  types.isObject(v) && ('@list' in v);\n\n/**\n * Returns true if the given value is a @graph.\n *\n * @return true if the value is a @graph, false if not.\n */\napi.isGraph = v => {\n  // Note: A value is a graph if all of these hold true:\n  // 1. It is an object.\n  // 2. It has an `@graph` key.\n  // 3. It may have '@id' or '@index'\n  return types.isObject(v) &&\n    '@graph' in v &&\n    Object.keys(v)\n      .filter(key => key !== '@id' && key !== '@index').length === 1;\n};\n\n/**\n * Returns true if the given value is a simple @graph.\n *\n * @return true if the value is a simple @graph, false if not.\n */\napi.isSimpleGraph = v => {\n  // Note: A value is a simple graph if all of these hold true:\n  // 1. It is an object.\n  // 2. It has an `@graph` key.\n  // 3. It has only 1 key or 2 keys where one of them is `@index`.\n  return api.isGraph(v) && !('@id' in v);\n};\n\n/**\n * Returns true if the given value is a blank node.\n *\n * @param v the value to check.\n *\n * @return true if the value is a blank node, false if not.\n */\napi.isBlankNode = v => {\n  // Note: A value is a blank node if all of these hold true:\n  // 1. It is an Object.\n  // 2. If it has an @id key that is not a string OR begins with '_:'.\n  // 3. It has no keys OR is not a @value, @set, or @list.\n  if(types.isObject(v)) {\n    if('@id' in v) {\n      const id = v['@id'];\n      return !types.isString(id) || id.indexOf('_:') === 0;\n    }\n    return (Object.keys(v).length === 0 ||\n      !(('@value' in v) || ('@set' in v) || ('@list' in v)));\n  }\n  return false;\n};\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = class JsonLdError extends Error {\n  /**\n   * Creates a JSON-LD Error.\n   *\n   * @param msg the error message.\n   * @param type the error type.\n   * @param details the error details.\n   */\n  constructor(\n    message = 'An unspecified JSON-LD error occurred.',\n    name = 'jsonld.Error',\n    details = {}) {\n    super(message);\n    this.name = name;\n    this.message = message;\n    this.details = details;\n  }\n};\n", "/*\n * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\n// TODO: move `IdentifierIssuer` to its own package\nconst IdentifierIssuer = require('rdf-canonize').IdentifierIssuer;\nconst JsonLdError = require('./JsonLdError');\n\n// constants\nconst REGEX_BCP47 = /^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/;\nconst REGEX_LINK_HEADERS = /(?:<[^>]*?>|\"[^\"]*?\"|[^,])+/g;\nconst REGEX_LINK_HEADER = /\\s*<([^>]*?)>\\s*(?:;\\s*(.*))?/;\nconst REGEX_LINK_HEADER_PARAMS =\n  /(.*?)=(?:(?:\"([^\"]*?)\")|([^\"]*?))\\s*(?:(?:;\\s*)|$)/g;\nconst REGEX_KEYWORD = /^@[a-zA-Z]+$/;\n\nconst DEFAULTS = {\n  headers: {\n    accept: 'application/ld+json, application/json'\n  }\n};\n\nconst api = {};\nmodule.exports = api;\napi.IdentifierIssuer = IdentifierIssuer;\napi.REGEX_BCP47 = REGEX_BCP47;\napi.REGEX_KEYWORD = REGEX_KEYWORD;\n\n/**\n * Clones an object, array, Map, Set, or string/number. If a typed JavaScript\n * object is given, such as a Date, it will be converted to a string.\n *\n * @param value the value to clone.\n *\n * @return the cloned value.\n */\napi.clone = function(value) {\n  if(value && typeof value === 'object') {\n    let rval;\n    if(types.isArray(value)) {\n      rval = [];\n      for(let i = 0; i < value.length; ++i) {\n        rval[i] = api.clone(value[i]);\n      }\n    } else if(value instanceof Map) {\n      rval = new Map();\n      for(const [k, v] of value) {\n        rval.set(k, api.clone(v));\n      }\n    } else if(value instanceof Set) {\n      rval = new Set();\n      for(const v of value) {\n        rval.add(api.clone(v));\n      }\n    } else if(types.isObject(value)) {\n      rval = {};\n      for(const key in value) {\n        rval[key] = api.clone(value[key]);\n      }\n    } else {\n      rval = value.toString();\n    }\n    return rval;\n  }\n  return value;\n};\n\n/**\n * Ensure a value is an array. If the value is an array, it is returned.\n * Otherwise, it is wrapped in an array.\n *\n * @param value the value to return as an array.\n *\n * @return the value as an array.\n */\napi.asArray = function(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\n/**\n * Builds an HTTP headers object for making a JSON-LD request from custom\n * headers and asserts the `accept` header isn't overridden.\n *\n * @param headers an object of headers with keys as header names and values\n *          as header values.\n *\n * @return an object of headers with a valid `accept` header.\n */\napi.buildHeaders = (headers = {}) => {\n  const hasAccept = Object.keys(headers).some(\n    h => h.toLowerCase() === 'accept');\n\n  if(hasAccept) {\n    throw new RangeError(\n      'Accept header may not be specified; only \"' +\n      DEFAULTS.headers.accept + '\" is supported.');\n  }\n\n  return Object.assign({Accept: DEFAULTS.headers.accept}, headers);\n};\n\n/**\n * Parses a link header. The results will be key'd by the value of \"rel\".\n *\n * Link: <http://json-ld.org/contexts/person.jsonld>;\n * rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\"\n *\n * Parses as: {\n *   'http://www.w3.org/ns/json-ld#context': {\n *     target: http://json-ld.org/contexts/person.jsonld,\n *     type: 'application/ld+json'\n *   }\n * }\n *\n * If there is more than one \"rel\" with the same IRI, then entries in the\n * resulting map for that \"rel\" will be arrays.\n *\n * @param header the link header to parse.\n */\napi.parseLinkHeader = header => {\n  const rval = {};\n  // split on unbracketed/unquoted commas\n  const entries = header.match(REGEX_LINK_HEADERS);\n  for(let i = 0; i < entries.length; ++i) {\n    let match = entries[i].match(REGEX_LINK_HEADER);\n    if(!match) {\n      continue;\n    }\n    const result = {target: match[1]};\n    const params = match[2];\n    while((match = REGEX_LINK_HEADER_PARAMS.exec(params))) {\n      result[match[1]] = (match[2] === undefined) ? match[3] : match[2];\n    }\n    const rel = result.rel || '';\n    if(Array.isArray(rval[rel])) {\n      rval[rel].push(result);\n    } else if(rval.hasOwnProperty(rel)) {\n      rval[rel] = [rval[rel], result];\n    } else {\n      rval[rel] = result;\n    }\n  }\n  return rval;\n};\n\n/**\n * Throws an exception if the given value is not a valid @type value.\n *\n * @param v the value to check.\n */\napi.validateTypeValue = (v, isFrame) => {\n  if(types.isString(v)) {\n    return;\n  }\n\n  if(types.isArray(v) && v.every(vv => types.isString(vv))) {\n    return;\n  }\n  if(isFrame && types.isObject(v)) {\n    switch(Object.keys(v).length) {\n      case 0:\n        // empty object is wildcard\n        return;\n      case 1:\n        // default entry is all strings\n        if('@default' in v &&\n          api.asArray(v['@default']).every(vv => types.isString(vv))) {\n          return;\n        }\n    }\n  }\n\n  throw new JsonLdError(\n    'Invalid JSON-LD syntax; \"@type\" value must a string, an array of ' +\n    'strings, an empty object, ' +\n    'or a default object.', 'jsonld.SyntaxError',\n    {code: 'invalid type value', value: v});\n};\n\n/**\n * Returns true if the given subject has the given property.\n *\n * @param subject the subject to check.\n * @param property the property to look for.\n *\n * @return true if the subject has the given property, false if not.\n */\napi.hasProperty = (subject, property) => {\n  if(subject.hasOwnProperty(property)) {\n    const value = subject[property];\n    return (!types.isArray(value) || value.length > 0);\n  }\n  return false;\n};\n\n/**\n * Determines if the given value is a property of the given subject.\n *\n * @param subject the subject to check.\n * @param property the property to check.\n * @param value the value to check.\n *\n * @return true if the value exists, false if not.\n */\napi.hasValue = (subject, property, value) => {\n  if(api.hasProperty(subject, property)) {\n    let val = subject[property];\n    const isList = graphTypes.isList(val);\n    if(types.isArray(val) || isList) {\n      if(isList) {\n        val = val['@list'];\n      }\n      for(let i = 0; i < val.length; ++i) {\n        if(api.compareValues(value, val[i])) {\n          return true;\n        }\n      }\n    } else if(!types.isArray(value)) {\n      // avoid matching the set of values with an array value parameter\n      return api.compareValues(value, val);\n    }\n  }\n  return false;\n};\n\n/**\n * Adds a value to a subject. If the value is an array, all values in the\n * array will be added.\n *\n * @param subject the subject to add the value to.\n * @param property the property that relates the value to the subject.\n * @param value the value to add.\n * @param [options] the options to use:\n *        [propertyIsArray] true if the property is always an array, false\n *          if not (default: false).\n *        [valueIsArray] true if the value to be added should be preserved as\n *          an array (lists) (default: false).\n *        [allowDuplicate] true to allow duplicates, false not to (uses a\n *          simple shallow comparison of subject ID or value) (default: true).\n *        [prependValue] false to prepend value to any existing values.\n *          (default: false)\n */\napi.addValue = (subject, property, value, options) => {\n  options = options || {};\n  if(!('propertyIsArray' in options)) {\n    options.propertyIsArray = false;\n  }\n  if(!('valueIsArray' in options)) {\n    options.valueIsArray = false;\n  }\n  if(!('allowDuplicate' in options)) {\n    options.allowDuplicate = true;\n  }\n  if(!('prependValue' in options)) {\n    options.prependValue = false;\n  }\n\n  if(options.valueIsArray) {\n    subject[property] = value;\n  } else if(types.isArray(value)) {\n    if(value.length === 0 && options.propertyIsArray &&\n      !subject.hasOwnProperty(property)) {\n      subject[property] = [];\n    }\n    if(options.prependValue) {\n      value = value.concat(subject[property]);\n      subject[property] = [];\n    }\n    for(let i = 0; i < value.length; ++i) {\n      api.addValue(subject, property, value[i], options);\n    }\n  } else if(subject.hasOwnProperty(property)) {\n    // check if subject already has value if duplicates not allowed\n    const hasValue = (!options.allowDuplicate &&\n      api.hasValue(subject, property, value));\n\n    // make property an array if value not present or always an array\n    if(!types.isArray(subject[property]) &&\n      (!hasValue || options.propertyIsArray)) {\n      subject[property] = [subject[property]];\n    }\n\n    // add new value\n    if(!hasValue) {\n      if(options.prependValue) {\n        subject[property].unshift(value);\n      } else {\n        subject[property].push(value);\n      }\n    }\n  } else {\n    // add new value as set or single value\n    subject[property] = options.propertyIsArray ? [value] : value;\n  }\n};\n\n/**\n * Gets all of the values for a subject's property as an array.\n *\n * @param subject the subject.\n * @param property the property.\n *\n * @return all of the values for a subject's property as an array.\n */\napi.getValues = (subject, property) => [].concat(subject[property] || []);\n\n/**\n * Removes a property from a subject.\n *\n * @param subject the subject.\n * @param property the property.\n */\napi.removeProperty = (subject, property) => {\n  delete subject[property];\n};\n\n/**\n * Removes a value from a subject.\n *\n * @param subject the subject.\n * @param property the property that relates the value to the subject.\n * @param value the value to remove.\n * @param [options] the options to use:\n *          [propertyIsArray] true if the property is always an array, false\n *            if not (default: false).\n */\napi.removeValue = (subject, property, value, options) => {\n  options = options || {};\n  if(!('propertyIsArray' in options)) {\n    options.propertyIsArray = false;\n  }\n\n  // filter out value\n  const values = api.getValues(subject, property).filter(\n    e => !api.compareValues(e, value));\n\n  if(values.length === 0) {\n    api.removeProperty(subject, property);\n  } else if(values.length === 1 && !options.propertyIsArray) {\n    subject[property] = values[0];\n  } else {\n    subject[property] = values;\n  }\n};\n\n/**\n * Relabels all blank nodes in the given JSON-LD input.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [issuer] an IdentifierIssuer to use to label blank nodes.\n */\napi.relabelBlankNodes = (input, options) => {\n  options = options || {};\n  const issuer = options.issuer || new IdentifierIssuer('_:b');\n  return _labelBlankNodes(issuer, input);\n};\n\n/**\n * Compares two JSON-LD values for equality. Two JSON-LD values will be\n * considered equal if:\n *\n * 1. They are both primitives of the same type and value.\n * 2. They are both @values with the same @value, @type, @language,\n *   and @index, OR\n * 3. They both have @ids they are the same.\n *\n * @param v1 the first value.\n * @param v2 the second value.\n *\n * @return true if v1 and v2 are considered equal, false if not.\n */\napi.compareValues = (v1, v2) => {\n  // 1. equal primitives\n  if(v1 === v2) {\n    return true;\n  }\n\n  // 2. equal @values\n  if(graphTypes.isValue(v1) && graphTypes.isValue(v2) &&\n    v1['@value'] === v2['@value'] &&\n    v1['@type'] === v2['@type'] &&\n    v1['@language'] === v2['@language'] &&\n    v1['@index'] === v2['@index']) {\n    return true;\n  }\n\n  // 3. equal @ids\n  if(types.isObject(v1) &&\n    ('@id' in v1) &&\n    types.isObject(v2) &&\n    ('@id' in v2)) {\n    return v1['@id'] === v2['@id'];\n  }\n\n  return false;\n};\n\n/**\n * Compares two strings first based on length and then lexicographically.\n *\n * @param a the first string.\n * @param b the second string.\n *\n * @return -1 if a < b, 1 if a > b, 0 if a === b.\n */\napi.compareShortestLeast = (a, b) => {\n  if(a.length < b.length) {\n    return -1;\n  }\n  if(b.length < a.length) {\n    return 1;\n  }\n  if(a === b) {\n    return 0;\n  }\n  return (a < b) ? -1 : 1;\n};\n\n/**\n * Labels the blank nodes in the given value using the given IdentifierIssuer.\n *\n * @param issuer the IdentifierIssuer to use.\n * @param element the element with blank nodes to rename.\n *\n * @return the element.\n */\nfunction _labelBlankNodes(issuer, element) {\n  if(types.isArray(element)) {\n    for(let i = 0; i < element.length; ++i) {\n      element[i] = _labelBlankNodes(issuer, element[i]);\n    }\n  } else if(graphTypes.isList(element)) {\n    element['@list'] = _labelBlankNodes(issuer, element['@list']);\n  } else if(types.isObject(element)) {\n    // relabel blank node\n    if(graphTypes.isBlankNode(element)) {\n      element['@id'] = issuer.getId(element['@id']);\n    }\n\n    // recursively apply to all keys\n    const keys = Object.keys(element).sort();\n    for(let ki = 0; ki < keys.length; ++ki) {\n      const key = keys[ki];\n      if(key !== '@id') {\n        element[key] = _labelBlankNodes(issuer, element[key]);\n      }\n    }\n  }\n\n  return element;\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nconst XSD = 'http://www.w3.org/2001/XMLSchema#';\n\nmodule.exports = {\n  // TODO: Deprecated and will be removed later. Use LINK_HEADER_CONTEXT.\n  LINK_HEADER_REL: 'http://www.w3.org/ns/json-ld#context',\n\n  LINK_HEADER_CONTEXT: 'http://www.w3.org/ns/json-ld#context',\n\n  RDF,\n  RDF_LIST: RDF + 'List',\n  RDF_FIRST: RDF + 'first',\n  RDF_REST: RDF + 'rest',\n  RDF_NIL: RDF + 'nil',\n  RDF_TYPE: RDF + 'type',\n  RDF_PLAIN_LITERAL: RDF + 'PlainLiteral',\n  RDF_XML_LITERAL: RDF + 'XMLLiteral',\n  RDF_JSON_LITERAL: RDF + 'JSON',\n  RDF_OBJECT: RDF + 'object',\n  RDF_LANGSTRING: RDF + 'langString',\n\n  XSD,\n  XSD_BOOLEAN: XSD + 'boolean',\n  XSD_DOUBLE: XSD + 'double',\n  XSD_INTEGER: XSD + 'integer',\n  XSD_STRING: XSD + 'string',\n};\n", "/*\n * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = class RequestQueue {\n  /**\n   * Creates a simple queue for requesting documents.\n   */\n  constructor() {\n    this._requests = {};\n  }\n\n  wrapLoader(loader) {\n    const self = this;\n    self._loader = loader;\n    return function(/* url */) {\n      return self.add.apply(self, arguments);\n    };\n  }\n\n  async add(url) {\n    let promise = this._requests[url];\n    if(promise) {\n      // URL already queued, wait for it to load\n      return Promise.resolve(promise);\n    }\n\n    // queue URL and load it\n    promise = this._requests[url] = this._loader(url);\n\n    try {\n      return await promise;\n    } finally {\n      delete this._requests[url];\n    }\n  }\n};\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst types = require('./types');\n\nconst api = {};\nmodule.exports = api;\n\n// define URL parser\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// MIT License\n// with local jsonld.js modifications\napi.parsers = {\n  simple: {\n    // RFC 3986 basic parts\n    keys: [\n      'href', 'scheme', 'authority', 'path', 'query', 'fragment'\n    ],\n    /* eslint-disable-next-line max-len */\n    regex: /^(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/\n  },\n  full: {\n    keys: [\n      'href', 'protocol', 'scheme', 'authority', 'auth', 'user', 'password',\n      'hostname', 'port', 'path', 'directory', 'file', 'query', 'fragment'\n    ],\n    /* eslint-disable-next-line max-len */\n    regex: /^(([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?(?:(((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n};\napi.parse = (str, parser) => {\n  const parsed = {};\n  const o = api.parsers[parser || 'full'];\n  const m = o.regex.exec(str);\n  let i = o.keys.length;\n  while(i--) {\n    parsed[o.keys[i]] = (m[i] === undefined) ? null : m[i];\n  }\n\n  // remove default ports in found in URLs\n  if((parsed.scheme === 'https' && parsed.port === '443') ||\n    (parsed.scheme === 'http' && parsed.port === '80')) {\n    parsed.href = parsed.href.replace(':' + parsed.port, '');\n    parsed.authority = parsed.authority.replace(':' + parsed.port, '');\n    parsed.port = null;\n  }\n\n  parsed.normalizedPath = api.removeDotSegments(parsed.path);\n  return parsed;\n};\n\n/**\n * Prepends a base IRI to the given relative IRI.\n *\n * @param base the base IRI.\n * @param iri the relative IRI.\n *\n * @return the absolute IRI.\n */\napi.prependBase = (base, iri) => {\n  // skip IRI processing\n  if(base === null) {\n    return iri;\n  }\n  // already an absolute IRI\n  if(api.isAbsolute(iri)) {\n    return iri;\n  }\n\n  // parse base if it is a string\n  if(!base || types.isString(base)) {\n    base = api.parse(base || '');\n  }\n\n  // parse given IRI\n  const rel = api.parse(iri);\n\n  // per RFC3986 5.2.2\n  const transform = {\n    protocol: base.protocol || ''\n  };\n\n  if(rel.authority !== null) {\n    transform.authority = rel.authority;\n    transform.path = rel.path;\n    transform.query = rel.query;\n  } else {\n    transform.authority = base.authority;\n\n    if(rel.path === '') {\n      transform.path = base.path;\n      if(rel.query !== null) {\n        transform.query = rel.query;\n      } else {\n        transform.query = base.query;\n      }\n    } else {\n      if(rel.path.indexOf('/') === 0) {\n        // IRI represents an absolute path\n        transform.path = rel.path;\n      } else {\n        // merge paths\n        let path = base.path;\n\n        // append relative path to the end of the last directory from base\n        path = path.substr(0, path.lastIndexOf('/') + 1);\n        if((path.length > 0 || base.authority) && path.substr(-1) !== '/') {\n          path += '/';\n        }\n        path += rel.path;\n\n        transform.path = path;\n      }\n      transform.query = rel.query;\n    }\n  }\n\n  if(rel.path !== '') {\n    // remove slashes and dots in path\n    transform.path = api.removeDotSegments(transform.path);\n  }\n\n  // construct URL\n  let rval = transform.protocol;\n  if(transform.authority !== null) {\n    rval += '//' + transform.authority;\n  }\n  rval += transform.path;\n  if(transform.query !== null) {\n    rval += '?' + transform.query;\n  }\n  if(rel.fragment !== null) {\n    rval += '#' + rel.fragment;\n  }\n\n  // handle empty base\n  if(rval === '') {\n    rval = './';\n  }\n\n  return rval;\n};\n\n/**\n * Removes a base IRI from the given absolute IRI.\n *\n * @param base the base IRI.\n * @param iri the absolute IRI.\n *\n * @return the relative IRI if relative to base, otherwise the absolute IRI.\n */\napi.removeBase = (base, iri) => {\n  // skip IRI processing\n  if(base === null) {\n    return iri;\n  }\n\n  if(!base || types.isString(base)) {\n    base = api.parse(base || '');\n  }\n\n  // establish base root\n  let root = '';\n  if(base.href !== '') {\n    root += (base.protocol || '') + '//' + (base.authority || '');\n  } else if(iri.indexOf('//')) {\n    // support network-path reference with empty base\n    root += '//';\n  }\n\n  // IRI not relative to base\n  if(iri.indexOf(root) !== 0) {\n    return iri;\n  }\n\n  // remove root from IRI and parse remainder\n  const rel = api.parse(iri.substr(root.length));\n\n  // remove path segments that match (do not remove last segment unless there\n  // is a hash or query)\n  const baseSegments = base.normalizedPath.split('/');\n  const iriSegments = rel.normalizedPath.split('/');\n  const last = (rel.fragment || rel.query) ? 0 : 1;\n  while(baseSegments.length > 0 && iriSegments.length > last) {\n    if(baseSegments[0] !== iriSegments[0]) {\n      break;\n    }\n    baseSegments.shift();\n    iriSegments.shift();\n  }\n\n  // use '../' for each non-matching base segment\n  let rval = '';\n  if(baseSegments.length > 0) {\n    // don't count the last segment (if it ends with '/' last path doesn't\n    // count and if it doesn't end with '/' it isn't a path)\n    baseSegments.pop();\n    for(let i = 0; i < baseSegments.length; ++i) {\n      rval += '../';\n    }\n  }\n\n  // prepend remaining segments\n  rval += iriSegments.join('/');\n\n  // add query and hash\n  if(rel.query !== null) {\n    rval += '?' + rel.query;\n  }\n  if(rel.fragment !== null) {\n    rval += '#' + rel.fragment;\n  }\n\n  // handle empty base\n  if(rval === '') {\n    rval = './';\n  }\n\n  return rval;\n};\n\n/**\n * Removes dot segments from a URL path.\n *\n * @param path the path to remove dot segments from.\n */\napi.removeDotSegments = path => {\n  // RFC 3986 5.2.4 (reworked)\n\n  // empty path shortcut\n  if(path.length === 0) {\n    return '';\n  }\n\n  const input = path.split('/');\n  const output = [];\n\n  while(input.length > 0) {\n    const next = input.shift();\n    const done = input.length === 0;\n\n    if(next === '.') {\n      if(done) {\n        // ensure output has trailing /\n        output.push('');\n      }\n      continue;\n    }\n\n    if(next === '..') {\n      output.pop();\n      if(done) {\n        // ensure output has trailing /\n        output.push('');\n      }\n      continue;\n    }\n\n    output.push(next);\n  }\n\n  // if path was absolute, ensure output has leading /\n  if(path[0] === '/' && output.length > 0 && output[0] !== '') {\n    output.unshift('');\n  }\n  if(output.length === 1 && output[0] === '') {\n    return '/';\n  }\n\n  return output.join('/');\n};\n\n// TODO: time better isAbsolute/isRelative checks using full regexes:\n// http://jmrware.com/articles/2009/uri_regexp/URI_regex.html\n\n// regex to check for absolute IRI (starting scheme and ':') or blank node IRI\nconst isAbsoluteRegex = /^([A-Za-z][A-Za-z0-9+-.]*|_):[^\\s]*$/;\n\n/**\n * Returns true if the given value is an absolute IRI or blank node IRI, false\n * if not.\n * Note: This weak check only checks for a correct starting scheme.\n *\n * @param v the value to check.\n *\n * @return true if the value is an absolute IRI, false if not.\n */\napi.isAbsolute = v => types.isString(v) && isAbsoluteRegex.test(v);\n\n/**\n * Returns true if the given value is a relative IRI, false if not.\n * Note: this is a weak check.\n *\n * @param v the value to check.\n *\n * @return true if the value is a relative IRI, false if not.\n */\napi.isRelative = v => types.isString(v);\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {parseLinkHeader, buildHeaders} = require('../util');\nconst {LINK_HEADER_CONTEXT} = require('../constants');\nconst JsonLdError = require('../JsonLdError');\nconst RequestQueue = require('../RequestQueue');\nconst {prependBase} = require('../url');\n\nconst REGEX_LINK_HEADER = /(^|(\\r\\n))link:/i;\n\n/**\n * Creates a built-in XMLHttpRequest document loader.\n *\n * @param options the options to use:\n *          secure: require all URLs to use HTTPS.\n *          headers: an object (map) of headers which will be passed as request\n *            headers for the requested document. Accept is not allowed.\n *          [xhr]: the XMLHttpRequest API to use.\n *\n * @return the XMLHttpRequest document loader.\n */\nmodule.exports = ({\n  secure,\n  headers = {},\n  xhr\n} = {headers: {}}) => {\n  headers = buildHeaders(headers);\n  const queue = new RequestQueue();\n  return queue.wrapLoader(loader);\n\n  async function loader(url) {\n    if(url.indexOf('http:') !== 0 && url.indexOf('https:') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; only \"http\" and \"https\" URLs are ' +\n        'supported.',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n    if(secure && url.indexOf('https') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; secure mode is enabled and ' +\n        'the URL\\'s scheme is not \"https\".',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n\n    let req;\n    try {\n      req = await _get(xhr, url, headers);\n    } catch(e) {\n      throw new JsonLdError(\n        'URL could not be dereferenced, an error occurred.',\n        'jsonld.LoadDocumentError',\n        {code: 'loading document failed', url, cause: e});\n    }\n\n    if(req.status >= 400) {\n      throw new JsonLdError(\n        'URL could not be dereferenced: ' + req.statusText,\n        'jsonld.LoadDocumentError', {\n          code: 'loading document failed',\n          url,\n          httpStatusCode: req.status\n        });\n    }\n\n    let doc = {contextUrl: null, documentUrl: url, document: req.response};\n    let alternate = null;\n\n    // handle Link Header (avoid unsafe header warning by existence testing)\n    const contentType = req.getResponseHeader('Content-Type');\n    let linkHeader;\n    if(REGEX_LINK_HEADER.test(req.getAllResponseHeaders())) {\n      linkHeader = req.getResponseHeader('Link');\n    }\n    if(linkHeader && contentType !== 'application/ld+json') {\n      // only 1 related link header permitted\n      const linkHeaders = parseLinkHeader(linkHeader);\n      const linkedContext = linkHeaders[LINK_HEADER_CONTEXT];\n      if(Array.isArray(linkedContext)) {\n        throw new JsonLdError(\n          'URL could not be dereferenced, it has more than one ' +\n          'associated HTTP Link Header.',\n          'jsonld.InvalidUrl',\n          {code: 'multiple context link headers', url});\n      }\n      if(linkedContext) {\n        doc.contextUrl = linkedContext.target;\n      }\n\n      // \"alternate\" link header is a redirect\n      alternate = linkHeaders.alternate;\n      if(alternate &&\n        alternate.type == 'application/ld+json' &&\n        !(contentType || '').match(/^application\\/(\\w*\\+)?json$/)) {\n        doc = await loader(prependBase(url, alternate.target));\n      }\n    }\n\n    return doc;\n  }\n};\n\nfunction _get(xhr, url, headers) {\n  xhr = xhr || XMLHttpRequest;\n  const req = new xhr();\n  return new Promise((resolve, reject) => {\n    req.onload = () => resolve(req);\n    req.onerror = err => reject(err);\n    req.open('GET', url, true);\n    for(const k in headers) {\n      req.setRequestHeader(k, headers[k]);\n    }\n    req.send();\n  });\n}\n", "/*\n * Copyright (c) 2021 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst xhrLoader = require('./documentLoaders/xhr');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Setup browser document loaders.\n *\n * @param jsonld the jsonld api.\n */\napi.setupDocumentLoaders = function(jsonld) {\n  if(typeof XMLHttpRequest !== 'undefined') {\n    jsonld.documentLoaders.xhr = xhrLoader;\n    // use xhr document loader by default\n    jsonld.useDocumentLoader('xhr');\n  }\n};\n\n/**\n * Setup browser globals.\n *\n * @param jsonld the jsonld api.\n */\napi.setupGlobals = function(jsonld) {\n  // setup browser global JsonLdProcessor\n  if(typeof globalThis.JsonLdProcessor === 'undefined') {\n    Object.defineProperty(globalThis, 'JsonLdProcessor', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: jsonld.JsonLdProcessor\n    });\n  }\n};\n", "'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n", "'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n", "'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n", "/*\n * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst LRU = require('lru-cache');\n\nconst MAX_ACTIVE_CONTEXTS = 10;\n\nmodule.exports = class ResolvedContext {\n  /**\n   * Creates a ResolvedContext.\n   *\n   * @param document the context document.\n   */\n  constructor({document}) {\n    this.document = document;\n    // TODO: enable customization of processed context cache\n    // TODO: limit based on size of processed contexts vs. number of them\n    this.cache = new LRU({max: MAX_ACTIVE_CONTEXTS});\n  }\n\n  getProcessed(activeCtx) {\n    return this.cache.get(activeCtx);\n  }\n\n  setProcessed(activeCtx, processedCtx) {\n    this.cache.set(activeCtx, processedCtx);\n  }\n};\n", "/*\n * Copyright (c) 2019 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString,\n} = require('./types');\nconst {\n  asArray: _asArray\n} = require('./util');\nconst {prependBase} = require('./url');\nconst JsonLdError = require('./JsonLdError');\nconst ResolvedContext = require('./ResolvedContext');\n\nconst MAX_CONTEXT_URLS = 10;\n\nmodule.exports = class ContextResolver {\n  /**\n   * Creates a ContextResolver.\n   *\n   * @param sharedCache a shared LRU cache with `get` and `set` APIs.\n   */\n  constructor({sharedCache}) {\n    this.perOpCache = new Map();\n    this.sharedCache = sharedCache;\n  }\n\n  async resolve({\n    activeCtx, context, documentLoader, base, cycles = new Set()\n  }) {\n    // process `@context`\n    if(context && _isObject(context) && context['@context']) {\n      context = context['@context'];\n    }\n\n    // context is one or more contexts\n    context = _asArray(context);\n\n    // resolve each context in the array\n    const allResolved = [];\n    for(const ctx of context) {\n      if(_isString(ctx)) {\n        // see if `ctx` has been resolved before...\n        let resolved = this._get(ctx);\n        if(!resolved) {\n          // not resolved yet, resolve\n          resolved = await this._resolveRemoteContext(\n            {activeCtx, url: ctx, documentLoader, base, cycles});\n        }\n\n        // add to output and continue\n        if(_isArray(resolved)) {\n          allResolved.push(...resolved);\n        } else {\n          allResolved.push(resolved);\n        }\n        continue;\n      }\n      if(ctx === null) {\n        // handle `null` context, nothing to cache\n        allResolved.push(new ResolvedContext({document: null}));\n        continue;\n      }\n      if(!_isObject(ctx)) {\n        _throwInvalidLocalContext(context);\n      }\n      // context is an object, get/create `ResolvedContext` for it\n      const key = JSON.stringify(ctx);\n      let resolved = this._get(key);\n      if(!resolved) {\n        // create a new static `ResolvedContext` and cache it\n        resolved = new ResolvedContext({document: ctx});\n        this._cacheResolvedContext({key, resolved, tag: 'static'});\n      }\n      allResolved.push(resolved);\n    }\n\n    return allResolved;\n  }\n\n  _get(key) {\n    // get key from per operation cache; no `tag` is used with this cache so\n    // any retrieved context will always be the same during a single operation\n    let resolved = this.perOpCache.get(key);\n    if(!resolved) {\n      // see if the shared cache has a `static` entry for this URL\n      const tagMap = this.sharedCache.get(key);\n      if(tagMap) {\n        resolved = tagMap.get('static');\n        if(resolved) {\n          this.perOpCache.set(key, resolved);\n        }\n      }\n    }\n    return resolved;\n  }\n\n  _cacheResolvedContext({key, resolved, tag}) {\n    this.perOpCache.set(key, resolved);\n    if(tag !== undefined) {\n      let tagMap = this.sharedCache.get(key);\n      if(!tagMap) {\n        tagMap = new Map();\n        this.sharedCache.set(key, tagMap);\n      }\n      tagMap.set(tag, resolved);\n    }\n    return resolved;\n  }\n\n  async _resolveRemoteContext({activeCtx, url, documentLoader, base, cycles}) {\n    // resolve relative URL and fetch context\n    url = prependBase(base, url);\n    const {context, remoteDoc} = await this._fetchContext(\n      {activeCtx, url, documentLoader, cycles});\n\n    // update base according to remote document and resolve any relative URLs\n    base = remoteDoc.documentUrl || url;\n    _resolveContextUrls({context, base});\n\n    // resolve, cache, and return context\n    const resolved = await this.resolve(\n      {activeCtx, context, documentLoader, base, cycles});\n    this._cacheResolvedContext({key: url, resolved, tag: remoteDoc.tag});\n    return resolved;\n  }\n\n  async _fetchContext({activeCtx, url, documentLoader, cycles}) {\n    // check for max context URLs fetched during a resolve operation\n    if(cycles.size > MAX_CONTEXT_URLS) {\n      throw new JsonLdError(\n        'Maximum number of @context URLs exceeded.',\n        'jsonld.ContextUrlError',\n        {\n          code: activeCtx.processingMode === 'json-ld-1.0' ?\n            'loading remote context failed' :\n            'context overflow',\n          max: MAX_CONTEXT_URLS\n        });\n    }\n\n    // check for context URL cycle\n    // shortcut to avoid extra work that would eventually hit the max above\n    if(cycles.has(url)) {\n      throw new JsonLdError(\n        'Cyclical @context URLs detected.',\n        'jsonld.ContextUrlError',\n        {\n          code: activeCtx.processingMode === 'json-ld-1.0' ?\n            'recursive context inclusion' :\n            'context overflow',\n          url\n        });\n    }\n\n    // track cycles\n    cycles.add(url);\n\n    let context;\n    let remoteDoc;\n\n    try {\n      remoteDoc = await documentLoader(url);\n      context = remoteDoc.document || null;\n      // parse string context as JSON\n      if(_isString(context)) {\n        context = JSON.parse(context);\n      }\n    } catch(e) {\n      throw new JsonLdError(\n        'Dereferencing a URL did not result in a valid JSON-LD object. ' +\n        'Possible causes are an inaccessible URL perhaps due to ' +\n        'a same-origin policy (ensure the server uses CORS if you are ' +\n        'using client-side JavaScript), too many redirects, a ' +\n        'non-JSON response, or more than one HTTP Link Header was ' +\n        'provided for a remote context.',\n        'jsonld.InvalidUrl',\n        {code: 'loading remote context failed', url, cause: e});\n    }\n\n    // ensure ctx is an object\n    if(!_isObject(context)) {\n      throw new JsonLdError(\n        'Dereferencing a URL did not result in a JSON object. The ' +\n        'response was valid JSON, but it was not a JSON object.',\n        'jsonld.InvalidUrl', {code: 'invalid remote context', url});\n    }\n\n    // use empty context if no @context key is present\n    if(!('@context' in context)) {\n      context = {'@context': {}};\n    } else {\n      context = {'@context': context['@context']};\n    }\n\n    // append @context URL to context if given\n    if(remoteDoc.contextUrl) {\n      if(!_isArray(context['@context'])) {\n        context['@context'] = [context['@context']];\n      }\n      context['@context'].push(remoteDoc.contextUrl);\n    }\n\n    return {context, remoteDoc};\n  }\n};\n\nfunction _throwInvalidLocalContext(ctx) {\n  throw new JsonLdError(\n    'Invalid JSON-LD syntax; @context must be an object.',\n    'jsonld.SyntaxError', {\n      code: 'invalid local context', context: ctx\n    });\n}\n\n/**\n * Resolve all relative `@context` URLs in the given context by inline\n * replacing them with absolute URLs.\n *\n * @param context the context.\n * @param base the base IRI to use to resolve relative IRIs.\n */\nfunction _resolveContextUrls({context, base}) {\n  if(!context) {\n    return;\n  }\n\n  const ctx = context['@context'];\n\n  if(_isString(ctx)) {\n    context['@context'] = prependBase(base, ctx);\n    return;\n  }\n\n  if(_isArray(ctx)) {\n    for(let i = 0; i < ctx.length; ++i) {\n      const element = ctx[i];\n      if(_isString(element)) {\n        ctx[i] = prependBase(base, element);\n        continue;\n      }\n      if(_isObject(element)) {\n        _resolveContextUrls({context: {'@context': element}, base});\n      }\n    }\n    return;\n  }\n\n  if(!_isObject(ctx)) {\n    // no @context URLs can be found in non-object\n    return;\n  }\n\n  // ctx is an object, resolve any context URLs in terms\n  for(const term in ctx) {\n    _resolveContextUrls({context: ctx[term], base});\n  }\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\n// TODO: move `NQuads` to its own package\nmodule.exports = require('rdf-canonize').NQuads;\n", "/*\n * Copyright (c) 2020 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray\n} = require('./types');\n\nconst {\n  asArray: _asArray\n} = require('./util');\n\nconst api = {};\nmodule.exports = api;\n\n// default handler, store as null or an array\n// exposed to allow fast external pre-handleEvent() checks\napi.defaultEventHandler = null;\n\n/**\n * Setup event handler.\n *\n * Return an array event handler constructed from an optional safe mode\n * handler, an optional options event handler, and an optional default handler.\n *\n * @param {object} options - processing options\n *   {function|object|array} [eventHandler] - an event handler.\n *\n * @return an array event handler.\n */\napi.setupEventHandler = ({options = {}}) => {\n  // build in priority order\n  const eventHandler = [].concat(\n    options.safe ? api.safeEventHandler : [],\n    options.eventHandler ? _asArray(options.eventHandler) : [],\n    api.defaultEventHandler ? api.defaultEventHandler : []\n  );\n  // null if no handlers\n  return eventHandler.length === 0 ? null : eventHandler;\n};\n\n/**\n * Handle an event.\n *\n * Top level APIs have a common 'eventHandler' option. This option can be a\n * function, array of functions, object mapping event.code to functions (with a\n * default to call next()), or any combination of such handlers. Handlers will\n * be called with an object with an 'event' entry and a 'next' function. Custom\n * handlers should process the event as appropriate. The 'next()' function\n * should be called to let the next handler process the event.\n *\n * NOTE: Only call this function if options.eventHandler is set and is an\n * array of hanlers. This is an optimization. Callers are expected to check\n * for an event handler before constructing events and calling this function.\n *\n * @param {object} event - event structure:\n *   {string} code - event code\n *   {string} level - severity level, one of: ['warning']\n *   {string} message - human readable message\n *   {object} details - event specific details\n * @param {object} options - processing options\n *   {array} eventHandler - an event handler array.\n */\napi.handleEvent = ({\n  event,\n  options\n}) => {\n  _handle({event, handlers: options.eventHandler});\n};\n\nfunction _handle({event, handlers}) {\n  let doNext = true;\n  for(let i = 0; doNext && i < handlers.length; ++i) {\n    doNext = false;\n    const handler = handlers[i];\n    if(_isArray(handler)) {\n      doNext = _handle({event, handlers: handler});\n    } else if(typeof handler === 'function') {\n      handler({event, next: () => {\n        doNext = true;\n      }});\n    } else if(typeof handler === 'object') {\n      if(event.code in handler) {\n        handler[event.code]({event, next: () => {\n          doNext = true;\n        }});\n      } else {\n        doNext = true;\n      }\n    } else {\n      throw new JsonLdError(\n        'Invalid event handler.',\n        'jsonld.InvalidEventHandler',\n        {event});\n    }\n  }\n  return doNext;\n}\n\nconst _notSafeEventCodes = new Set([\n  'empty object',\n  'free-floating scalar',\n  'invalid @language value',\n  'invalid property',\n  // NOTE: spec edge case\n  'null @id value',\n  'null @value value',\n  'object with only @id',\n  'object with only @language',\n  'object with only @list',\n  'object with only @value',\n  'relative @id reference',\n  'relative @type reference',\n  'relative @vocab reference',\n  'reserved @id value',\n  'reserved @reverse value',\n  'reserved term',\n  // toRDF\n  'blank node predicate',\n  'relative graph reference',\n  'relative object reference',\n  'relative predicate reference',\n  'relative subject reference'\n]);\n\n// safe handler that rejects unsafe warning conditions\napi.safeEventHandler = function safeEventHandler({event, next}) {\n  // fail on all unsafe warnings\n  if(event.level === 'warning' && _notSafeEventCodes.has(event.code)) {\n    throw new JsonLdError(\n      'Safe mode validation error.',\n      'jsonld.ValidationError',\n      {event}\n    );\n  }\n  next();\n};\n\n// logs all events and continues\napi.logEventHandler = function logEventHandler({event, next}) {\n  console.log(`EVENT: ${event.message}`, {event});\n  next();\n};\n\n// log 'warning' level events\napi.logWarningEventHandler = function logWarningEventHandler({event, next}) {\n  if(event.level === 'warning') {\n    console.warn(`WARNING: ${event.message}`, {event});\n  }\n  next();\n};\n\n// fallback to throw errors for any unhandled events\napi.unhandledEventHandler = function unhandledEventHandler({event}) {\n  throw new JsonLdError(\n    'No handler for event.',\n    'jsonld.UnhandledEvent',\n    {event}\n  );\n};\n\n/**\n * Set default event handler.\n *\n * By default, all event are unhandled. It is recommended to pass in an\n * eventHandler into each call. However, this call allows using a default\n * eventHandler when one is not otherwise provided.\n *\n * @param {object} options - default handler options:\n *   {function|object|array} eventHandler - a default event handler.\n *     falsey to unset.\n */\napi.setDefaultEventHandler = function({eventHandler} = {}) {\n  api.defaultEventHandler = eventHandler ? _asArray(eventHandler) : null;\n};\n", "/*\n * Copyright (c) 2017-2019 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst util = require('./util');\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isAbsolute: _isAbsoluteIri,\n  isRelative: _isRelativeIri,\n  prependBase\n} = require('./url');\n\nconst {\n  handleEvent: _handleEvent\n} = require('./events');\n\nconst {\n  REGEX_BCP47,\n  REGEX_KEYWORD,\n  asArray: _asArray,\n  compareShortestLeast: _compareShortestLeast\n} = require('./util');\n\nconst INITIAL_CONTEXT_CACHE = new Map();\nconst INITIAL_CONTEXT_CACHE_MAX_SIZE = 10000;\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Processes a local context and returns a new active context.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context to process.\n * @param options the context processing options.\n * @param propagate `true` if `false`, retains any previously defined term,\n *   which can be rolled back when the descending into a new node object.\n * @param overrideProtected `false` allows protected terms to be modified.\n *\n * @return a Promise that resolves to the new active context.\n */\napi.process = async ({\n  activeCtx, localCtx, options,\n  propagate = true,\n  overrideProtected = false,\n  cycles = new Set()\n}) => {\n  // normalize local context to an array of @context objects\n  if(_isObject(localCtx) && '@context' in localCtx &&\n    _isArray(localCtx['@context'])) {\n    localCtx = localCtx['@context'];\n  }\n  const ctxs = _asArray(localCtx);\n\n  // no contexts in array, return current active context w/o changes\n  if(ctxs.length === 0) {\n    return activeCtx;\n  }\n\n  // event handler for capturing events to replay when using a cached context\n  const events = [];\n  const eventCaptureHandler = [\n    ({event, next}) => {\n      events.push(event);\n      next();\n    }\n  ];\n  // chain to original handler\n  if(options.eventHandler) {\n    eventCaptureHandler.push(options.eventHandler);\n  }\n  // store original options to use when replaying events\n  const originalOptions = options;\n  // shallow clone options with event capture handler\n  options = {...options, eventHandler: eventCaptureHandler};\n\n  // resolve contexts\n  const resolved = await options.contextResolver.resolve({\n    activeCtx,\n    context: localCtx,\n    documentLoader: options.documentLoader,\n    base: options.base\n  });\n\n  // override propagate if first resolved context has `@propagate`\n  if(_isObject(resolved[0].document) &&\n    typeof resolved[0].document['@propagate'] === 'boolean') {\n    // retrieve early, error checking done later\n    propagate = resolved[0].document['@propagate'];\n  }\n\n  // process each context in order, update active context\n  // on each iteration to ensure proper caching\n  let rval = activeCtx;\n\n  // track the previous context\n  // if not propagating, make sure rval has a previous context\n  if(!propagate && !rval.previousContext) {\n    // clone `rval` context before updating\n    rval = rval.clone();\n    rval.previousContext = activeCtx;\n  }\n\n  for(const resolvedContext of resolved) {\n    let {document: ctx} = resolvedContext;\n\n    // update active context to one computed from last iteration\n    activeCtx = rval;\n\n    // reset to initial context\n    if(ctx === null) {\n      // We can't nullify if there are protected terms and we're\n      // not allowing overrides (e.g. processing a property term scoped context)\n      if(!overrideProtected && Object.keys(activeCtx.protected).length !== 0) {\n        throw new JsonLdError(\n          'Tried to nullify a context with protected terms outside of ' +\n          'a term definition.',\n          'jsonld.SyntaxError',\n          {code: 'invalid context nullification'});\n      }\n      rval = activeCtx = api.getInitialContext(options).clone();\n      continue;\n    }\n\n    // get processed context from cache if available\n    const processed = resolvedContext.getProcessed(activeCtx);\n    if(processed) {\n      if(originalOptions.eventHandler) {\n        // replay events with original non-capturing options\n        for(const event of processed.events) {\n          _handleEvent({event, options: originalOptions});\n        }\n      }\n\n      rval = activeCtx = processed.context;\n      continue;\n    }\n\n    // dereference @context key if present\n    if(_isObject(ctx) && '@context' in ctx) {\n      ctx = ctx['@context'];\n    }\n\n    // context must be an object by now, all URLs retrieved before this call\n    if(!_isObject(ctx)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context must be an object.',\n        'jsonld.SyntaxError', {code: 'invalid local context', context: ctx});\n    }\n\n    // TODO: there is likely a `previousContext` cloning optimization that\n    // could be applied here (no need to copy it under certain conditions)\n\n    // clone context before updating it\n    rval = rval.clone();\n\n    // define context mappings for keys in local context\n    const defined = new Map();\n\n    // handle @version\n    if('@version' in ctx) {\n      if(ctx['@version'] !== 1.1) {\n        throw new JsonLdError(\n          'Unsupported JSON-LD version: ' + ctx['@version'],\n          'jsonld.UnsupportedVersion',\n          {code: 'invalid @version value', context: ctx});\n      }\n      if(activeCtx.processingMode &&\n        activeCtx.processingMode === 'json-ld-1.0') {\n        throw new JsonLdError(\n          '@version: ' + ctx['@version'] + ' not compatible with ' +\n          activeCtx.processingMode,\n          'jsonld.ProcessingModeConflict',\n          {code: 'processing mode conflict', context: ctx});\n      }\n      rval.processingMode = 'json-ld-1.1';\n      rval['@version'] = ctx['@version'];\n      defined.set('@version', true);\n    }\n\n    // if not set explicitly, set processingMode to \"json-ld-1.1\"\n    rval.processingMode =\n      rval.processingMode || activeCtx.processingMode;\n\n    // handle @base\n    if('@base' in ctx) {\n      let base = ctx['@base'];\n\n      if(base === null || _isAbsoluteIri(base)) {\n        // no action\n      } else if(_isRelativeIri(base)) {\n        base = prependBase(rval['@base'], base);\n      } else {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@base\" in a ' +\n          '@context must be an absolute IRI, a relative IRI, or null.',\n          'jsonld.SyntaxError', {code: 'invalid base IRI', context: ctx});\n      }\n\n      rval['@base'] = base;\n      defined.set('@base', true);\n    }\n\n    // handle @vocab\n    if('@vocab' in ctx) {\n      const value = ctx['@vocab'];\n      if(value === null) {\n        delete rval['@vocab'];\n      } else if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@vocab\" in a ' +\n          '@context must be a string or null.',\n          'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});\n      } else if(!_isAbsoluteIri(value) && api.processingMode(rval, 1.0)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@vocab\" in a ' +\n          '@context must be an absolute IRI.',\n          'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});\n      } else {\n        const vocab = _expandIri(rval, value, {vocab: true, base: true},\n          undefined, undefined, options);\n        if(!_isAbsoluteIri(vocab)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'relative @vocab reference',\n                level: 'warning',\n                message: 'Relative @vocab reference found.',\n                details: {\n                  vocab\n                }\n              },\n              options\n            });\n          }\n        }\n        rval['@vocab'] = vocab;\n      }\n      defined.set('@vocab', true);\n    }\n\n    // handle @language\n    if('@language' in ctx) {\n      const value = ctx['@language'];\n      if(value === null) {\n        delete rval['@language'];\n      } else if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@language\" in a ' +\n          '@context must be a string or null.',\n          'jsonld.SyntaxError',\n          {code: 'invalid default language', context: ctx});\n      } else {\n        if(!value.match(REGEX_BCP47)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'invalid @language value',\n                level: 'warning',\n                message: '@language value must be valid BCP47.',\n                details: {\n                  language: value\n                }\n              },\n              options\n            });\n          }\n        }\n        rval['@language'] = value.toLowerCase();\n      }\n      defined.set('@language', true);\n    }\n\n    // handle @direction\n    if('@direction' in ctx) {\n      const value = ctx['@direction'];\n      if(activeCtx.processingMode === 'json-ld-1.0') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @direction not compatible with ' +\n          activeCtx.processingMode,\n          'jsonld.SyntaxError',\n          {code: 'invalid context member', context: ctx});\n      }\n      if(value === null) {\n        delete rval['@direction'];\n      } else if(value !== 'ltr' && value !== 'rtl') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@direction\" in a ' +\n          '@context must be null, \"ltr\", or \"rtl\".',\n          'jsonld.SyntaxError',\n          {code: 'invalid base direction', context: ctx});\n      } else {\n        rval['@direction'] = value;\n      }\n      defined.set('@direction', true);\n    }\n\n    // handle @propagate\n    // note: we've already extracted it, here we just do error checking\n    if('@propagate' in ctx) {\n      const value = ctx['@propagate'];\n      if(activeCtx.processingMode === 'json-ld-1.0') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @propagate not compatible with ' +\n          activeCtx.processingMode,\n          'jsonld.SyntaxError',\n          {code: 'invalid context entry', context: ctx});\n      }\n      if(typeof value !== 'boolean') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @propagate value must be a boolean.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @propagate value', context: localCtx});\n      }\n      defined.set('@propagate', true);\n    }\n\n    // handle @import\n    if('@import' in ctx) {\n      const value = ctx['@import'];\n      if(activeCtx.processingMode === 'json-ld-1.0') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @import not compatible with ' +\n          activeCtx.processingMode,\n          'jsonld.SyntaxError',\n          {code: 'invalid context entry', context: ctx});\n      }\n      if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @import must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @import value', context: localCtx});\n      }\n\n      // resolve contexts\n      const resolvedImport = await options.contextResolver.resolve({\n        activeCtx,\n        context: value,\n        documentLoader: options.documentLoader,\n        base: options.base\n      });\n      if(resolvedImport.length !== 1) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @import must reference a single context.',\n          'jsonld.SyntaxError',\n          {code: 'invalid remote context', context: localCtx});\n      }\n      const processedImport = resolvedImport[0].getProcessed(activeCtx);\n      if(processedImport) {\n        // Note: if the same context were used in this active context\n        // as a reference context, then processed_input might not\n        // be a dict.\n        ctx = processedImport;\n      } else {\n        const importCtx = resolvedImport[0].document;\n        if('@import' in importCtx) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax: ' +\n            'imported context must not include @import.',\n            'jsonld.SyntaxError',\n            {code: 'invalid context entry', context: localCtx});\n        }\n\n        // merge ctx into importCtx and replace rval with the result\n        for(const key in importCtx) {\n          if(!ctx.hasOwnProperty(key)) {\n            ctx[key] = importCtx[key];\n          }\n        }\n\n        // Note: this could potenially conflict if the import\n        // were used in the same active context as a referenced\n        // context and an import. In this case, we\n        // could override the cached result, but seems unlikely.\n        resolvedImport[0].setProcessed(activeCtx, ctx);\n      }\n\n      defined.set('@import', true);\n    }\n\n    // handle @protected; determine whether this sub-context is declaring\n    // all its terms to be \"protected\" (exceptions can be made on a\n    // per-definition basis)\n    defined.set('@protected', ctx['@protected'] || false);\n\n    // process all other keys\n    for(const key in ctx) {\n      api.createTermDefinition({\n        activeCtx: rval,\n        localCtx: ctx,\n        term: key,\n        defined,\n        options,\n        overrideProtected\n      });\n\n      if(_isObject(ctx[key]) && '@context' in ctx[key]) {\n        const keyCtx = ctx[key]['@context'];\n        let process = true;\n        if(_isString(keyCtx)) {\n          const url = prependBase(options.base, keyCtx);\n          // track processed contexts to avoid scoped context recursion\n          if(cycles.has(url)) {\n            process = false;\n          } else {\n            cycles.add(url);\n          }\n        }\n        // parse context to validate\n        if(process) {\n          try {\n            await api.process({\n              activeCtx: rval.clone(),\n              localCtx: ctx[key]['@context'],\n              overrideProtected: true,\n              options,\n              cycles\n            });\n          } catch(e) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; invalid scoped context.',\n              'jsonld.SyntaxError',\n              {\n                code: 'invalid scoped context',\n                context: ctx[key]['@context'],\n                term: key\n              });\n          }\n        }\n      }\n    }\n\n    // cache processed result\n    resolvedContext.setProcessed(activeCtx, {\n      context: rval,\n      events\n    });\n  }\n\n  return rval;\n};\n\n/**\n * Creates a term definition during context processing.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context being processed.\n * @param term the term in the local context to define the mapping for.\n * @param defined a map of defining/defined keys to detect cycles and prevent\n *          double definitions.\n * @param {Object} [options] - creation options.\n * @param overrideProtected `false` allows protected terms to be modified.\n */\napi.createTermDefinition = ({\n  activeCtx,\n  localCtx,\n  term,\n  defined,\n  options,\n  overrideProtected = false,\n}) => {\n  if(defined.has(term)) {\n    // term already defined\n    if(defined.get(term)) {\n      return;\n    }\n    // cycle detected\n    throw new JsonLdError(\n      'Cyclical context definition detected.',\n      'jsonld.CyclicalContext',\n      {code: 'cyclic IRI mapping', context: localCtx, term});\n  }\n\n  // now defining term\n  defined.set(term, false);\n\n  // get context term value\n  let value;\n  if(localCtx.hasOwnProperty(term)) {\n    value = localCtx[term];\n  }\n\n  if(term === '@type' &&\n     _isObject(value) &&\n     (value['@container'] || '@set') === '@set' &&\n     api.processingMode(activeCtx, 1.1)) {\n\n    const validKeys = ['@container', '@id', '@protected'];\n    const keys = Object.keys(value);\n    if(keys.length === 0 || keys.some(k => !validKeys.includes(k))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; keywords cannot be overridden.',\n        'jsonld.SyntaxError',\n        {code: 'keyword redefinition', context: localCtx, term});\n    }\n  } else if(api.isKeyword(term)) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; keywords cannot be overridden.',\n      'jsonld.SyntaxError',\n      {code: 'keyword redefinition', context: localCtx, term});\n  } else if(term.match(REGEX_KEYWORD)) {\n    if(options.eventHandler) {\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code: 'reserved term',\n          level: 'warning',\n          message:\n            'Terms beginning with \"@\" are ' +\n            'reserved for future use and dropped.',\n          details: {\n            term\n          }\n        },\n        options\n      });\n    }\n    return;\n  } else if(term === '') {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; a term cannot be an empty string.',\n      'jsonld.SyntaxError',\n      {code: 'invalid term definition', context: localCtx});\n  }\n\n  // keep reference to previous mapping for potential `@protected` check\n  const previousMapping = activeCtx.mappings.get(term);\n\n  // remove old mapping\n  if(activeCtx.mappings.has(term)) {\n    activeCtx.mappings.delete(term);\n  }\n\n  // convert short-hand value to object w/@id\n  let simpleTerm = false;\n  if(_isString(value) || value === null) {\n    simpleTerm = true;\n    value = {'@id': value};\n  }\n\n  if(!_isObject(value)) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; @context term values must be ' +\n      'strings or objects.',\n      'jsonld.SyntaxError',\n      {code: 'invalid term definition', context: localCtx});\n  }\n\n  // create new mapping\n  const mapping = {};\n  activeCtx.mappings.set(term, mapping);\n  mapping.reverse = false;\n\n  // make sure term definition only has expected keywords\n  const validKeys = ['@container', '@id', '@language', '@reverse', '@type'];\n\n  // JSON-LD 1.1 support\n  if(api.processingMode(activeCtx, 1.1)) {\n    validKeys.push(\n      '@context', '@direction', '@index', '@nest', '@prefix', '@protected');\n  }\n\n  for(const kw in value) {\n    if(!validKeys.includes(kw)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a term definition must not contain ' + kw,\n        'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n  }\n\n  // always compute whether term has a colon as an optimization for\n  // _compactIri\n  const colon = term.indexOf(':');\n  mapping._termHasColon = (colon > 0);\n\n  if('@reverse' in value) {\n    if('@id' in value) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @reverse term definition must not ' +\n        'contain @id.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n    if('@nest' in value) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @reverse term definition must not ' +\n        'contain @nest.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n    const reverse = value['@reverse'];\n    if(!_isString(reverse)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @reverse value must be a string.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n\n    if(reverse.match(REGEX_KEYWORD)) {\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'reserved @reverse value',\n            level: 'warning',\n            message:\n              '@reverse values beginning with \"@\" are ' +\n              'reserved for future use and dropped.',\n            details: {\n              reverse\n            }\n          },\n          options\n        });\n      }\n      if(previousMapping) {\n        activeCtx.mappings.set(term, previousMapping);\n      } else {\n        activeCtx.mappings.delete(term);\n      }\n      return;\n    }\n\n    // expand and add @id mapping\n    const id = _expandIri(\n      activeCtx, reverse, {vocab: true, base: false}, localCtx, defined,\n      options);\n    if(!_isAbsoluteIri(id)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @reverse value must be an ' +\n        'absolute IRI or a blank node identifier.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n\n    mapping['@id'] = id;\n    mapping.reverse = true;\n  } else if('@id' in value) {\n    let id = value['@id'];\n    if(id && !_isString(id)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @id value must be an array ' +\n        'of strings or a string.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n    if(id === null) {\n      // reserve a null term, which may be protected\n      mapping['@id'] = null;\n    } else if(!api.isKeyword(id) && id.match(REGEX_KEYWORD)) {\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'reserved @id value',\n            level: 'warning',\n            message:\n              '@id values beginning with \"@\" are ' +\n              'reserved for future use and dropped.',\n            details: {\n              id\n            }\n          },\n          options\n        });\n      }\n      if(previousMapping) {\n        activeCtx.mappings.set(term, previousMapping);\n      } else {\n        activeCtx.mappings.delete(term);\n      }\n      return;\n    } else if(id !== term) {\n      // expand and add @id mapping\n      id = _expandIri(\n        activeCtx, id, {vocab: true, base: false}, localCtx, defined, options);\n      if(!_isAbsoluteIri(id) && !api.isKeyword(id)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; a @context @id value must be an ' +\n          'absolute IRI, a blank node identifier, or a keyword.',\n          'jsonld.SyntaxError',\n          {code: 'invalid IRI mapping', context: localCtx});\n      }\n\n      // if term has the form of an IRI it must map the same\n      if(term.match(/(?::[^:])|\\//)) {\n        const termDefined = new Map(defined).set(term, true);\n        const termIri = _expandIri(\n          activeCtx, term, {vocab: true, base: false},\n          localCtx, termDefined, options);\n        if(termIri !== id) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; term in form of IRI must ' +\n            'expand to definition.',\n            'jsonld.SyntaxError',\n            {code: 'invalid IRI mapping', context: localCtx});\n        }\n      }\n\n      mapping['@id'] = id;\n      // indicate if this term may be used as a compact IRI prefix\n      mapping._prefix = (simpleTerm &&\n        !mapping._termHasColon &&\n        id.match(/[:\\/\\?#\\[\\]@]$/));\n    }\n  }\n\n  if(!('@id' in mapping)) {\n    // see if the term has a prefix\n    if(mapping._termHasColon) {\n      const prefix = term.substr(0, colon);\n      if(localCtx.hasOwnProperty(prefix)) {\n        // define parent prefix\n        api.createTermDefinition({\n          activeCtx, localCtx, term: prefix, defined, options\n        });\n      }\n\n      if(activeCtx.mappings.has(prefix)) {\n        // set @id based on prefix parent\n        const suffix = term.substr(colon + 1);\n        mapping['@id'] = activeCtx.mappings.get(prefix)['@id'] + suffix;\n      } else {\n        // term is an absolute IRI\n        mapping['@id'] = term;\n      }\n    } else if(term === '@type') {\n      // Special case, were we've previously determined that container is @set\n      mapping['@id'] = term;\n    } else {\n      // non-IRIs *must* define @ids if @vocab is not available\n      if(!('@vocab' in activeCtx)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @context terms must define an @id.',\n          'jsonld.SyntaxError',\n          {code: 'invalid IRI mapping', context: localCtx, term});\n      }\n      // prepend vocab to term\n      mapping['@id'] = activeCtx['@vocab'] + term;\n    }\n  }\n\n  // Handle term protection\n  if(value['@protected'] === true ||\n    (defined.get('@protected') === true && value['@protected'] !== false)) {\n    activeCtx.protected[term] = true;\n    mapping.protected = true;\n  }\n\n  // IRI mapping now defined\n  defined.set(term, true);\n\n  if('@type' in value) {\n    let type = value['@type'];\n    if(!_isString(type)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an @context @type value must be a string.',\n        'jsonld.SyntaxError',\n        {code: 'invalid type mapping', context: localCtx});\n    }\n\n    if((type === '@json' || type === '@none')) {\n      if(api.processingMode(activeCtx, 1.0)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; an @context @type value must not be ' +\n          `\"${type}\" in JSON-LD 1.0 mode.`,\n          'jsonld.SyntaxError',\n          {code: 'invalid type mapping', context: localCtx});\n      }\n    } else if(type !== '@id' && type !== '@vocab') {\n      // expand @type to full IRI\n      type = _expandIri(\n        activeCtx, type, {vocab: true, base: false}, localCtx, defined,\n        options);\n      if(!_isAbsoluteIri(type)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; an @context @type value must be an ' +\n          'absolute IRI.',\n          'jsonld.SyntaxError',\n          {code: 'invalid type mapping', context: localCtx});\n      }\n      if(type.indexOf('_:') === 0) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; an @context @type value must be an IRI, ' +\n          'not a blank node identifier.',\n          'jsonld.SyntaxError',\n          {code: 'invalid type mapping', context: localCtx});\n      }\n    }\n\n    // add @type to mapping\n    mapping['@type'] = type;\n  }\n\n  if('@container' in value) {\n    // normalize container to an array form\n    const container = _isString(value['@container']) ?\n      [value['@container']] : (value['@container'] || []);\n    const validContainers = ['@list', '@set', '@index', '@language'];\n    let isValid = true;\n    const hasSet = container.includes('@set');\n\n    // JSON-LD 1.1 support\n    if(api.processingMode(activeCtx, 1.1)) {\n      validContainers.push('@graph', '@id', '@type');\n\n      // check container length\n      if(container.includes('@list')) {\n        if(container.length !== 1) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; @context @container with @list must ' +\n            'have no other values',\n            'jsonld.SyntaxError',\n            {code: 'invalid container mapping', context: localCtx});\n        }\n      } else if(container.includes('@graph')) {\n        if(container.some(key =>\n          key !== '@graph' && key !== '@id' && key !== '@index' &&\n          key !== '@set')) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; @context @container with @graph must ' +\n            'have no other values other than @id, @index, and @set',\n            'jsonld.SyntaxError',\n            {code: 'invalid container mapping', context: localCtx});\n        }\n      } else {\n        // otherwise, container may also include @set\n        isValid &= container.length <= (hasSet ? 2 : 1);\n      }\n\n      if(container.includes('@type')) {\n        // If mapping does not have an @type,\n        // set it to @id\n        mapping['@type'] = mapping['@type'] || '@id';\n\n        // type mapping must be either @id or @vocab\n        if(!['@id', '@vocab'].includes(mapping['@type'])) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; container: @type requires @type to be ' +\n            '@id or @vocab.',\n            'jsonld.SyntaxError',\n            {code: 'invalid type mapping', context: localCtx});\n        }\n      }\n    } else {\n      // in JSON-LD 1.0, container must not be an array (it must be a string,\n      // which is one of the validContainers)\n      isValid &= !_isArray(value['@container']);\n\n      // check container length\n      isValid &= container.length <= 1;\n    }\n\n    // check against valid containers\n    isValid &= container.every(c => validContainers.includes(c));\n\n    // @set not allowed with @list\n    isValid &= !(hasSet && container.includes('@list'));\n\n    if(!isValid) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @container value must be ' +\n        'one of the following: ' + validContainers.join(', '),\n        'jsonld.SyntaxError',\n        {code: 'invalid container mapping', context: localCtx});\n    }\n\n    if(mapping.reverse &&\n      !container.every(c => ['@index', '@set'].includes(c))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @container value for a @reverse ' +\n        'type definition must be @index or @set.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n\n    // add @container to mapping\n    mapping['@container'] = container;\n  }\n\n  // property indexing\n  if('@index' in value) {\n    if(!('@container' in value) || !mapping['@container'].includes('@index')) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @index without @index in @container: ' +\n        `\"${value['@index']}\" on term \"${term}\".`, 'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n    if(!_isString(value['@index']) || value['@index'].indexOf('@') === 0) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @index must expand to an IRI: ' +\n        `\"${value['@index']}\" on term \"${term}\".`, 'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n    mapping['@index'] = value['@index'];\n  }\n\n  // scoped contexts\n  if('@context' in value) {\n    mapping['@context'] = value['@context'];\n  }\n\n  if('@language' in value && !('@type' in value)) {\n    let language = value['@language'];\n    if(language !== null && !_isString(language)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @language value must be ' +\n        'a string or null.', 'jsonld.SyntaxError',\n        {code: 'invalid language mapping', context: localCtx});\n    }\n\n    // add @language to mapping\n    if(language !== null) {\n      language = language.toLowerCase();\n    }\n    mapping['@language'] = language;\n  }\n\n  // term may be used as a prefix\n  if('@prefix' in value) {\n    if(term.match(/:|\\//)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @prefix used on a compact IRI term',\n        'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n    if(api.isKeyword(mapping['@id'])) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; keywords may not be used as prefixes',\n        'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n    if(typeof value['@prefix'] === 'boolean') {\n      mapping._prefix = value['@prefix'] === true;\n    } else {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context value for @prefix must be boolean',\n        'jsonld.SyntaxError',\n        {code: 'invalid @prefix value', context: localCtx});\n    }\n  }\n\n  if('@direction' in value) {\n    const direction = value['@direction'];\n    if(direction !== null && direction !== 'ltr' && direction !== 'rtl') {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @direction value must be ' +\n        'null, \"ltr\", or \"rtl\".',\n        'jsonld.SyntaxError',\n        {code: 'invalid base direction', context: localCtx});\n    }\n    mapping['@direction'] = direction;\n  }\n\n  if('@nest' in value) {\n    const nest = value['@nest'];\n    if(!_isString(nest) || (nest !== '@nest' && nest.indexOf('@') === 0)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @nest value must be ' +\n        'a string which is not a keyword other than @nest.',\n        'jsonld.SyntaxError',\n        {code: 'invalid @nest value', context: localCtx});\n    }\n    mapping['@nest'] = nest;\n  }\n\n  // disallow aliasing @context and @preserve\n  const id = mapping['@id'];\n  if(id === '@context' || id === '@preserve') {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; @context and @preserve cannot be aliased.',\n      'jsonld.SyntaxError', {code: 'invalid keyword alias', context: localCtx});\n  }\n\n  // Check for overriding protected terms\n  if(previousMapping && previousMapping.protected && !overrideProtected) {\n    // force new term to continue to be protected and see if the mappings would\n    // be equal\n    activeCtx.protected[term] = true;\n    mapping.protected = true;\n    if(!_deepCompare(previousMapping, mapping)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; tried to redefine a protected term.',\n        'jsonld.SyntaxError',\n        {code: 'protected term redefinition', context: localCtx, term});\n    }\n  }\n};\n\n/**\n * Expands a string to a full IRI. The string may be a term, a prefix, a\n * relative IRI, or an absolute IRI. The associated absolute IRI will be\n * returned.\n *\n * @param activeCtx the current active context.\n * @param value the string to expand.\n * @param relativeTo options for how to resolve relative IRIs:\n *          base: true to resolve against the base IRI, false not to.\n *          vocab: true to concatenate after @vocab, false not to.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\napi.expandIri = (activeCtx, value, relativeTo, options) => {\n  return _expandIri(activeCtx, value, relativeTo, undefined, undefined,\n    options);\n};\n\n/**\n * Expands a string to a full IRI. The string may be a term, a prefix, a\n * relative IRI, or an absolute IRI. The associated absolute IRI will be\n * returned.\n *\n * @param activeCtx the current active context.\n * @param value the string to expand.\n * @param relativeTo options for how to resolve relative IRIs:\n *          base: true to resolve against the base IRI, false not to.\n *          vocab: true to concatenate after @vocab, false not to.\n * @param localCtx the local context being processed (only given if called\n *          during context processing).\n * @param defined a map for tracking cycles in context definitions (only given\n *          if called during context processing).\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\nfunction _expandIri(activeCtx, value, relativeTo, localCtx, defined, options) {\n  // already expanded\n  if(value === null || !_isString(value) || api.isKeyword(value)) {\n    return value;\n  }\n\n  // ignore non-keyword things that look like a keyword\n  if(value.match(REGEX_KEYWORD)) {\n    return null;\n  }\n\n  // define term dependency if not defined\n  if(localCtx && localCtx.hasOwnProperty(value) &&\n    defined.get(value) !== true) {\n    api.createTermDefinition({\n      activeCtx, localCtx, term: value, defined, options\n    });\n  }\n\n  relativeTo = relativeTo || {};\n  if(relativeTo.vocab) {\n    const mapping = activeCtx.mappings.get(value);\n\n    // value is explicitly ignored with a null mapping\n    if(mapping === null) {\n      return null;\n    }\n\n    if(_isObject(mapping) && '@id' in mapping) {\n      // value is a term\n      return mapping['@id'];\n    }\n  }\n\n  // split value into prefix:suffix\n  const colon = value.indexOf(':');\n  if(colon > 0) {\n    const prefix = value.substr(0, colon);\n    const suffix = value.substr(colon + 1);\n\n    // do not expand blank nodes (prefix of '_') or already-absolute\n    // IRIs (suffix of '//')\n    if(prefix === '_' || suffix.indexOf('//') === 0) {\n      return value;\n    }\n\n    // prefix dependency not defined, define it\n    if(localCtx && localCtx.hasOwnProperty(prefix)) {\n      api.createTermDefinition({\n        activeCtx, localCtx, term: prefix, defined, options\n      });\n    }\n\n    // use mapping if prefix is defined\n    const mapping = activeCtx.mappings.get(prefix);\n    if(mapping && mapping._prefix) {\n      return mapping['@id'] + suffix;\n    }\n\n    // already absolute IRI\n    if(_isAbsoluteIri(value)) {\n      return value;\n    }\n  }\n\n  // A flag that captures whether the iri being expanded is\n  // the value for an @type\n  //let typeExpansion = false;\n\n  //if(options !== undefined && options.typeExpansion !== undefined) {\n  //  typeExpansion = options.typeExpansion;\n  //}\n\n  if(relativeTo.vocab && '@vocab' in activeCtx) {\n    // prepend vocab\n    const prependedResult = activeCtx['@vocab'] + value;\n    // FIXME: needed? may be better as debug event.\n    /*\n    if(options && options.eventHandler) {\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code: 'prepending @vocab during expansion',\n          level: 'info',\n          message: 'Prepending @vocab during expansion.',\n          details: {\n            type: '@vocab',\n            vocab: activeCtx['@vocab'],\n            value,\n            result: prependedResult,\n            typeExpansion\n          }\n        },\n        options\n      });\n    }\n    */\n    // the null case preserves value as potentially relative\n    value = prependedResult;\n  } else if(relativeTo.base) {\n    // prepend base\n    let prependedResult;\n    let base;\n    if('@base' in activeCtx) {\n      if(activeCtx['@base']) {\n        base = prependBase(options.base, activeCtx['@base']);\n        prependedResult = prependBase(base, value);\n      } else {\n        base = activeCtx['@base'];\n        prependedResult = value;\n      }\n    } else {\n      base = options.base;\n      prependedResult = prependBase(options.base, value);\n    }\n    // FIXME: needed? may be better as debug event.\n    /*\n    if(options && options.eventHandler) {\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code: 'prepending @base during expansion',\n          level: 'info',\n          message: 'Prepending @base during expansion.',\n          details: {\n            type: '@base',\n            base,\n            value,\n            result: prependedResult,\n            typeExpansion\n          }\n        },\n        options\n      });\n    }\n    */\n    // the null case preserves value as potentially relative\n    value = prependedResult;\n  }\n\n  // FIXME: duplicate? needed? maybe just enable in a verbose debug mode\n  /*\n  if(!_isAbsoluteIri(value) && options && options.eventHandler) {\n    // emit event indicating a relative IRI was found, which can result in it\n    // being dropped when converting to other RDF representations\n    _handleEvent({\n      event: {\n        type: ['JsonLdEvent'],\n        code: 'relative IRI after expansion',\n        // FIXME: what level?\n        level: 'warning',\n        message: 'Relative IRI after expansion.',\n        details: {\n          relativeIri: value,\n          typeExpansion\n        }\n      },\n      options\n    });\n    // NOTE: relative reference events emitted at calling sites as needed\n  }\n  */\n\n  return value;\n}\n\n/**\n * Gets the initial context.\n *\n * @param options the options to use:\n *          [base] the document base IRI.\n *\n * @return the initial context.\n */\napi.getInitialContext = options => {\n  const key = JSON.stringify({processingMode: options.processingMode});\n  const cached = INITIAL_CONTEXT_CACHE.get(key);\n  if(cached) {\n    return cached;\n  }\n\n  const initialContext = {\n    processingMode: options.processingMode,\n    mappings: new Map(),\n    inverse: null,\n    getInverse: _createInverseContext,\n    clone: _cloneActiveContext,\n    revertToPreviousContext: _revertToPreviousContext,\n    protected: {}\n  };\n  // TODO: consider using LRU cache instead\n  if(INITIAL_CONTEXT_CACHE.size === INITIAL_CONTEXT_CACHE_MAX_SIZE) {\n    // clear whole cache -- assumes scenario where the cache fills means\n    // the cache isn't being used very efficiently anyway\n    INITIAL_CONTEXT_CACHE.clear();\n  }\n  INITIAL_CONTEXT_CACHE.set(key, initialContext);\n  return initialContext;\n\n  /**\n   * Generates an inverse context for use in the compaction algorithm, if\n   * not already generated for the given active context.\n   *\n   * @return the inverse context.\n   */\n  function _createInverseContext() {\n    const activeCtx = this;\n\n    // lazily create inverse\n    if(activeCtx.inverse) {\n      return activeCtx.inverse;\n    }\n    const inverse = activeCtx.inverse = {};\n\n    // variables for building fast CURIE map\n    const fastCurieMap = activeCtx.fastCurieMap = {};\n    const irisToTerms = {};\n\n    // handle default language\n    const defaultLanguage = (activeCtx['@language'] || '@none').toLowerCase();\n\n    // handle default direction\n    const defaultDirection = activeCtx['@direction'];\n\n    // create term selections for each mapping in the context, ordered by\n    // shortest and then lexicographically least\n    const mappings = activeCtx.mappings;\n    const terms = [...mappings.keys()].sort(_compareShortestLeast);\n    for(const term of terms) {\n      const mapping = mappings.get(term);\n      if(mapping === null) {\n        continue;\n      }\n\n      let container = mapping['@container'] || '@none';\n      container = [].concat(container).sort().join('');\n\n      if(mapping['@id'] === null) {\n        continue;\n      }\n      // iterate over every IRI in the mapping\n      const ids = _asArray(mapping['@id']);\n      for(const iri of ids) {\n        let entry = inverse[iri];\n        const isKeyword = api.isKeyword(iri);\n\n        if(!entry) {\n          // initialize entry\n          inverse[iri] = entry = {};\n\n          if(!isKeyword && !mapping._termHasColon) {\n            // init IRI to term map and fast CURIE prefixes\n            irisToTerms[iri] = [term];\n            const fastCurieEntry = {iri, terms: irisToTerms[iri]};\n            if(iri[0] in fastCurieMap) {\n              fastCurieMap[iri[0]].push(fastCurieEntry);\n            } else {\n              fastCurieMap[iri[0]] = [fastCurieEntry];\n            }\n          }\n        } else if(!isKeyword && !mapping._termHasColon) {\n          // add IRI to term match\n          irisToTerms[iri].push(term);\n        }\n\n        // add new entry\n        if(!entry[container]) {\n          entry[container] = {\n            '@language': {},\n            '@type': {},\n            '@any': {}\n          };\n        }\n        entry = entry[container];\n        _addPreferredTerm(term, entry['@any'], '@none');\n\n        if(mapping.reverse) {\n          // term is preferred for values using @reverse\n          _addPreferredTerm(term, entry['@type'], '@reverse');\n        } else if(mapping['@type'] === '@none') {\n          _addPreferredTerm(term, entry['@any'], '@none');\n          _addPreferredTerm(term, entry['@language'], '@none');\n          _addPreferredTerm(term, entry['@type'], '@none');\n        } else if('@type' in mapping) {\n          // term is preferred for values using specific type\n          _addPreferredTerm(term, entry['@type'], mapping['@type']);\n        } else if('@language' in mapping && '@direction' in mapping) {\n          // term is preferred for values using specific language and direction\n          const language = mapping['@language'];\n          const direction = mapping['@direction'];\n          if(language && direction) {\n            _addPreferredTerm(term, entry['@language'],\n              `${language}_${direction}`.toLowerCase());\n          } else if(language) {\n            _addPreferredTerm(term, entry['@language'], language.toLowerCase());\n          } else if(direction) {\n            _addPreferredTerm(term, entry['@language'], `_${direction}`);\n          } else {\n            _addPreferredTerm(term, entry['@language'], '@null');\n          }\n        } else if('@language' in mapping) {\n          _addPreferredTerm(term, entry['@language'],\n            (mapping['@language'] || '@null').toLowerCase());\n        } else if('@direction' in mapping) {\n          if(mapping['@direction']) {\n            _addPreferredTerm(term, entry['@language'],\n              `_${mapping['@direction']}`);\n          } else {\n            _addPreferredTerm(term, entry['@language'], '@none');\n          }\n        } else if(defaultDirection) {\n          _addPreferredTerm(term, entry['@language'], `_${defaultDirection}`);\n          _addPreferredTerm(term, entry['@language'], '@none');\n          _addPreferredTerm(term, entry['@type'], '@none');\n        } else {\n          // add entries for no type and no language\n          _addPreferredTerm(term, entry['@language'], defaultLanguage);\n          _addPreferredTerm(term, entry['@language'], '@none');\n          _addPreferredTerm(term, entry['@type'], '@none');\n        }\n      }\n    }\n\n    // build fast CURIE map\n    for(const key in fastCurieMap) {\n      _buildIriMap(fastCurieMap, key, 1);\n    }\n\n    return inverse;\n  }\n\n  /**\n   * Runs a recursive algorithm to build a lookup map for quickly finding\n   * potential CURIEs.\n   *\n   * @param iriMap the map to build.\n   * @param key the current key in the map to work on.\n   * @param idx the index into the IRI to compare.\n   */\n  function _buildIriMap(iriMap, key, idx) {\n    const entries = iriMap[key];\n    const next = iriMap[key] = {};\n\n    let iri;\n    let letter;\n    for(const entry of entries) {\n      iri = entry.iri;\n      if(idx >= iri.length) {\n        letter = '';\n      } else {\n        letter = iri[idx];\n      }\n      if(letter in next) {\n        next[letter].push(entry);\n      } else {\n        next[letter] = [entry];\n      }\n    }\n\n    for(const key in next) {\n      if(key === '') {\n        continue;\n      }\n      _buildIriMap(next, key, idx + 1);\n    }\n  }\n\n  /**\n   * Adds the term for the given entry if not already added.\n   *\n   * @param term the term to add.\n   * @param entry the inverse context typeOrLanguage entry to add to.\n   * @param typeOrLanguageValue the key in the entry to add to.\n   */\n  function _addPreferredTerm(term, entry, typeOrLanguageValue) {\n    if(!entry.hasOwnProperty(typeOrLanguageValue)) {\n      entry[typeOrLanguageValue] = term;\n    }\n  }\n\n  /**\n   * Clones an active context, creating a child active context.\n   *\n   * @return a clone (child) of the active context.\n   */\n  function _cloneActiveContext() {\n    const child = {};\n    child.mappings = util.clone(this.mappings);\n    child.clone = this.clone;\n    child.inverse = null;\n    child.getInverse = this.getInverse;\n    child.protected = util.clone(this.protected);\n    if(this.previousContext) {\n      child.previousContext = this.previousContext.clone();\n    }\n    child.revertToPreviousContext = this.revertToPreviousContext;\n    if('@base' in this) {\n      child['@base'] = this['@base'];\n    }\n    if('@language' in this) {\n      child['@language'] = this['@language'];\n    }\n    if('@vocab' in this) {\n      child['@vocab'] = this['@vocab'];\n    }\n    return child;\n  }\n\n  /**\n   * Reverts any type-scoped context in this active context to the previous\n   * context.\n   */\n  function _revertToPreviousContext() {\n    if(!this.previousContext) {\n      return this;\n    }\n    return this.previousContext.clone();\n  }\n};\n\n/**\n * Gets the value for the given active context key and type, null if none is\n * set or undefined if none is set and type is '@context'.\n *\n * @param ctx the active context.\n * @param key the context key.\n * @param [type] the type of value to get (eg: '@id', '@type'), if not\n *          specified gets the entire entry for a key, null if not found.\n *\n * @return the value, null, or undefined.\n */\napi.getContextValue = (ctx, key, type) => {\n  // invalid key\n  if(key === null) {\n    if(type === '@context') {\n      return undefined;\n    }\n    return null;\n  }\n\n  // get specific entry information\n  if(ctx.mappings.has(key)) {\n    const entry = ctx.mappings.get(key);\n\n    if(_isUndefined(type)) {\n      // return whole entry\n      return entry;\n    }\n    if(entry.hasOwnProperty(type)) {\n      // return entry value for type\n      return entry[type];\n    }\n  }\n\n  // get default language\n  if(type === '@language' && type in ctx) {\n    return ctx[type];\n  }\n\n  // get default direction\n  if(type === '@direction' && type in ctx) {\n    return ctx[type];\n  }\n\n  if(type === '@context') {\n    return undefined;\n  }\n  return null;\n};\n\n/**\n * Processing Mode check.\n *\n * @param activeCtx the current active context.\n * @param version the string or numeric version to check.\n *\n * @return boolean.\n */\napi.processingMode = (activeCtx, version) => {\n  if(version.toString() >= '1.1') {\n    return !activeCtx.processingMode ||\n      activeCtx.processingMode >= 'json-ld-' + version.toString();\n  } else {\n    return activeCtx.processingMode === 'json-ld-1.0';\n  }\n};\n\n/**\n * Returns whether or not the given value is a keyword.\n *\n * @param v the value to check.\n *\n * @return true if the value is a keyword, false if not.\n */\napi.isKeyword = v => {\n  if(!_isString(v) || v[0] !== '@') {\n    return false;\n  }\n  switch(v) {\n    case '@base':\n    case '@container':\n    case '@context':\n    case '@default':\n    case '@direction':\n    case '@embed':\n    case '@explicit':\n    case '@graph':\n    case '@id':\n    case '@included':\n    case '@index':\n    case '@json':\n    case '@language':\n    case '@list':\n    case '@nest':\n    case '@none':\n    case '@omitDefault':\n    case '@prefix':\n    case '@preserve':\n    case '@protected':\n    case '@requireAll':\n    case '@reverse':\n    case '@set':\n    case '@type':\n    case '@value':\n    case '@version':\n    case '@vocab':\n      return true;\n  }\n  return false;\n};\n\nfunction _deepCompare(x1, x2) {\n  // compare `null` or primitive types directly\n  if((!(x1 && typeof x1 === 'object')) ||\n     (!(x2 && typeof x2 === 'object'))) {\n    return x1 === x2;\n  }\n  // x1 and x2 are objects (also potentially arrays)\n  const x1Array = Array.isArray(x1);\n  if(x1Array !== Array.isArray(x2)) {\n    return false;\n  }\n  if(x1Array) {\n    if(x1.length !== x2.length) {\n      return false;\n    }\n    for(let i = 0; i < x1.length; ++i) {\n      if(!_deepCompare(x1[i], x2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  // x1 and x2 are non-array objects\n  const k1s = Object.keys(x1);\n  const k2s = Object.keys(x2);\n  if(k1s.length !== k2s.length) {\n    return false;\n  }\n  for(const k1 in x1) {\n    let v1 = x1[k1];\n    let v2 = x2[k1];\n    // special case: `@container` can be in any order\n    if(k1 === '@container') {\n      if(Array.isArray(v1) && Array.isArray(v2)) {\n        v1 = v1.slice().sort();\n        v2 = v2.slice().sort();\n      }\n    }\n    if(!_deepCompare(v1, v2)) {\n      return false;\n    }\n  }\n  return true;\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isEmptyObject: _isEmptyObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isList: _isList,\n  isValue: _isValue,\n  isGraph: _isGraph,\n  isSubject: _isSubject\n} = require('./graphTypes');\n\nconst {\n  expandIri: _expandIri,\n  getContextValue: _getContextValue,\n  isKeyword: _isKeyword,\n  process: _processContext,\n  processingMode: _processingMode\n} = require('./context');\n\nconst {\n  isAbsolute: _isAbsoluteIri\n} = require('./url');\n\nconst {\n  REGEX_BCP47,\n  REGEX_KEYWORD,\n  addValue: _addValue,\n  asArray: _asArray,\n  getValues: _getValues,\n  validateTypeValue: _validateTypeValue\n} = require('./util');\n\nconst {\n  handleEvent: _handleEvent\n} = require('./events');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Recursively expands an element using the given context. Any context in\n * the element will be removed. All context URLs must have been retrieved\n * before calling this method.\n *\n * @param activeCtx the context to use.\n * @param activeProperty the property for the element, null for none.\n * @param element the element to expand.\n * @param options the expansion options.\n * @param insideList true if the element is a list, false if not.\n * @param insideIndex true if the element is inside an index container,\n *          false if not.\n * @param typeScopedContext an optional type-scoped active context for\n *          expanding values of nodes that were expressed according to\n *          a type-scoped context.\n *\n * @return a Promise that resolves to the expanded value.\n */\napi.expand = async ({\n  activeCtx,\n  activeProperty = null,\n  element,\n  options = {},\n  insideList = false,\n  insideIndex = false,\n  typeScopedContext = null\n}) => {\n  // nothing to expand\n  if(element === null || element === undefined) {\n    return null;\n  }\n\n  // disable framing if activeProperty is @default\n  if(activeProperty === '@default') {\n    options = Object.assign({}, options, {isFrame: false});\n  }\n\n  if(!_isArray(element) && !_isObject(element)) {\n    // drop free-floating scalars that are not in lists\n    if(!insideList && (activeProperty === null ||\n      _expandIri(activeCtx, activeProperty, {vocab: true},\n        options) === '@graph')) {\n      // FIXME\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'free-floating scalar',\n            level: 'warning',\n            message: 'Dropping free-floating scalar not in a list.',\n            details: {\n              value: element\n              //activeProperty\n              //insideList\n            }\n          },\n          options\n        });\n      }\n      return null;\n    }\n\n    // expand element according to value expansion rules\n    return _expandValue({activeCtx, activeProperty, value: element, options});\n  }\n\n  // recursively expand array\n  if(_isArray(element)) {\n    let rval = [];\n    const container = _getContextValue(\n      activeCtx, activeProperty, '@container') || [];\n    insideList = insideList || container.includes('@list');\n    for(let i = 0; i < element.length; ++i) {\n      // expand element\n      let e = await api.expand({\n        activeCtx,\n        activeProperty,\n        element: element[i],\n        options,\n        insideIndex,\n        typeScopedContext\n      });\n      if(insideList && _isArray(e)) {\n        e = {'@list': e};\n      }\n\n      if(e === null) {\n        // FIXME: add debug event?\n        //unmappedValue: element[i],\n        //activeProperty,\n        //parent: element,\n        //index: i,\n        //expandedParent: rval,\n        //insideList\n\n        // NOTE: no-value events emitted at calling sites as needed\n        continue;\n      }\n\n      if(_isArray(e)) {\n        rval = rval.concat(e);\n      } else {\n        rval.push(e);\n      }\n    }\n    return rval;\n  }\n\n  // recursively expand object:\n\n  // first, expand the active property\n  const expandedActiveProperty = _expandIri(\n    activeCtx, activeProperty, {vocab: true}, options);\n\n  // Get any property-scoped context for activeProperty\n  const propertyScopedCtx =\n    _getContextValue(activeCtx, activeProperty, '@context');\n\n  // second, determine if any type-scoped context should be reverted; it\n  // should only be reverted when the following are all true:\n  // 1. `element` is not a value or subject reference\n  // 2. `insideIndex` is false\n  typeScopedContext = typeScopedContext ||\n    (activeCtx.previousContext ? activeCtx : null);\n  let keys = Object.keys(element).sort();\n  let mustRevert = !insideIndex;\n  if(mustRevert && typeScopedContext && keys.length <= 2 &&\n    !keys.includes('@context')) {\n    for(const key of keys) {\n      const expandedProperty = _expandIri(\n        typeScopedContext, key, {vocab: true}, options);\n      if(expandedProperty === '@value') {\n        // value found, ensure type-scoped context is used to expand it\n        mustRevert = false;\n        activeCtx = typeScopedContext;\n        break;\n      }\n      if(expandedProperty === '@id' && keys.length === 1) {\n        // subject reference found, do not revert\n        mustRevert = false;\n        break;\n      }\n    }\n  }\n\n  if(mustRevert) {\n    // revert type scoped context\n    activeCtx = activeCtx.revertToPreviousContext();\n  }\n\n  // apply property-scoped context after reverting term-scoped context\n  if(!_isUndefined(propertyScopedCtx)) {\n    activeCtx = await _processContext({\n      activeCtx,\n      localCtx: propertyScopedCtx,\n      propagate: true,\n      overrideProtected: true,\n      options\n    });\n  }\n\n  // if element has a context, process it\n  if('@context' in element) {\n    activeCtx = await _processContext(\n      {activeCtx, localCtx: element['@context'], options});\n  }\n\n  // set the type-scoped context to the context on input, for use later\n  typeScopedContext = activeCtx;\n\n  // Remember the first key found expanding to @type\n  let typeKey = null;\n\n  // look for scoped contexts on `@type`\n  for(const key of keys) {\n    const expandedProperty = _expandIri(activeCtx, key, {vocab: true}, options);\n    if(expandedProperty === '@type') {\n      // set scoped contexts from @type\n      // avoid sorting if possible\n      typeKey = typeKey || key;\n      const value = element[key];\n      const types =\n        Array.isArray(value) ?\n          (value.length > 1 ? value.slice().sort() : value) : [value];\n      for(const type of types) {\n        const ctx = _getContextValue(typeScopedContext, type, '@context');\n        if(!_isUndefined(ctx)) {\n          activeCtx = await _processContext({\n            activeCtx,\n            localCtx: ctx,\n            options,\n            propagate: false\n          });\n        }\n      }\n    }\n  }\n\n  // process each key and value in element, ignoring @nest content\n  let rval = {};\n  await _expandObject({\n    activeCtx,\n    activeProperty,\n    expandedActiveProperty,\n    element,\n    expandedParent: rval,\n    options,\n    insideList,\n    typeKey,\n    typeScopedContext\n  });\n\n  // get property count on expanded output\n  keys = Object.keys(rval);\n  let count = keys.length;\n\n  if('@value' in rval) {\n    // @value must only have @language or @type\n    if('@type' in rval && ('@language' in rval || '@direction' in rval)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" may not ' +\n        'contain both \"@type\" and either \"@language\" or \"@direction\".',\n        'jsonld.SyntaxError', {code: 'invalid value object', element: rval});\n    }\n    let validCount = count - 1;\n    if('@type' in rval) {\n      validCount -= 1;\n    }\n    if('@index' in rval) {\n      validCount -= 1;\n    }\n    if('@language' in rval) {\n      validCount -= 1;\n    }\n    if('@direction' in rval) {\n      validCount -= 1;\n    }\n    if(validCount !== 0) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" may only ' +\n        'have an \"@index\" property and either \"@type\" ' +\n        'or either or both \"@language\" or \"@direction\".',\n        'jsonld.SyntaxError', {code: 'invalid value object', element: rval});\n    }\n    const values = rval['@value'] === null ? [] : _asArray(rval['@value']);\n    const types = _getValues(rval, '@type');\n\n    // drop null @values\n    if(_processingMode(activeCtx, 1.1) && types.includes('@json') &&\n      types.length === 1) {\n      // Any value of @value is okay if @type: @json\n    } else if(values.length === 0) {\n      // FIXME\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'null @value value',\n            level: 'warning',\n            message: 'Dropping null @value value.',\n            details: {\n              value: rval\n            }\n          },\n          options\n        });\n      }\n      rval = null;\n    } else if(!values.every(v => (_isString(v) || _isEmptyObject(v))) &&\n      '@language' in rval) {\n      // if @language is present, @value must be a string\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; only strings may be language-tagged.',\n        'jsonld.SyntaxError',\n        {code: 'invalid language-tagged value', element: rval});\n    } else if(!types.every(t =>\n      (_isAbsoluteIri(t) && !(_isString(t) && t.indexOf('_:') === 0) ||\n      _isEmptyObject(t)))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" and \"@type\" ' +\n        'must have an absolute IRI for the value of \"@type\".',\n        'jsonld.SyntaxError', {code: 'invalid typed value', element: rval});\n    }\n  } else if('@type' in rval && !_isArray(rval['@type'])) {\n    // convert @type to an array\n    rval['@type'] = [rval['@type']];\n  } else if('@set' in rval || '@list' in rval) {\n    // handle @set and @list\n    if(count > 1 && !(count === 2 && '@index' in rval)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; if an element has the property \"@set\" ' +\n        'or \"@list\", then it can have at most one other property that is ' +\n        '\"@index\".', 'jsonld.SyntaxError',\n        {code: 'invalid set or list object', element: rval});\n    }\n    // optimize away @set\n    if('@set' in rval) {\n      rval = rval['@set'];\n      keys = Object.keys(rval);\n      count = keys.length;\n    }\n  } else if(count === 1 && '@language' in rval) {\n    // drop objects with only @language\n    // FIXME\n    if(options.eventHandler) {\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code: 'object with only @language',\n          level: 'warning',\n          message: 'Dropping object with only @language.',\n          details: {\n            value: rval\n          }\n        },\n        options\n      });\n    }\n    rval = null;\n  }\n\n  // drop certain top-level objects that do not occur in lists\n  if(_isObject(rval) &&\n    !options.keepFreeFloatingNodes && !insideList &&\n    (activeProperty === null ||\n      expandedActiveProperty === '@graph' ||\n      (_getContextValue(activeCtx, activeProperty, '@container') || [])\n        .includes('@graph')\n    )) {\n    // drop empty object, top-level @value/@list, or object with only @id\n    rval = _dropUnsafeObject({value: rval, count, options});\n  }\n\n  return rval;\n};\n\n/**\n * Drop empty object, top-level @value/@list, or object with only @id\n */\nfunction _dropUnsafeObject({\n  value,\n  count,\n  options\n}) {\n  if(count === 0 || '@value' in value || '@list' in value ||\n    (count === 1 && '@id' in value)) {\n    // FIXME\n    if(options.eventHandler) {\n      // FIXME: one event or diff event for empty, @v/@l, {@id}?\n      let code;\n      let message;\n      if(count === 0) {\n        code = 'empty object';\n        message = 'Dropping empty object.';\n      } else if('@value' in value) {\n        code = 'object with only @value';\n        message = 'Dropping object with only @value.';\n      } else if('@list' in value) {\n        code = 'object with only @list';\n        message = 'Dropping object with only @list.';\n      } else if(count === 1 && '@id' in value) {\n        code = 'object with only @id';\n        message = 'Dropping object with only @id.';\n      }\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code,\n          level: 'warning',\n          message,\n          details: {\n            value\n          }\n        },\n        options\n      });\n    }\n    return null;\n  }\n  return value;\n}\n\n/**\n * Expand each key and value of element adding to result\n *\n * @param activeCtx the context to use.\n * @param activeProperty the property for the element.\n * @param expandedActiveProperty the expansion of activeProperty\n * @param element the element to expand.\n * @param expandedParent the expanded result into which to add values.\n * @param options the expansion options.\n * @param insideList true if the element is a list, false if not.\n * @param typeKey first key found expanding to @type.\n * @param typeScopedContext the context before reverting.\n */\nasync function _expandObject({\n  activeCtx,\n  activeProperty,\n  expandedActiveProperty,\n  element,\n  expandedParent,\n  options = {},\n  insideList,\n  typeKey,\n  typeScopedContext\n}) {\n  const keys = Object.keys(element).sort();\n  const nests = [];\n  let unexpandedValue;\n\n  // Figure out if this is the type for a JSON literal\n  const isJsonType = element[typeKey] &&\n    _expandIri(activeCtx,\n      (_isArray(element[typeKey]) ? element[typeKey][0] : element[typeKey]),\n      {vocab: true}, {\n        ...options,\n        typeExpansion: true\n      }) === '@json';\n\n  for(const key of keys) {\n    let value = element[key];\n    let expandedValue;\n\n    // skip @context\n    if(key === '@context') {\n      continue;\n    }\n\n    // expand property\n    const expandedProperty = _expandIri(activeCtx, key, {vocab: true}, options);\n\n    // drop non-absolute IRI keys that aren't keywords\n    if(expandedProperty === null ||\n      !(_isAbsoluteIri(expandedProperty) || _isKeyword(expandedProperty))) {\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'invalid property',\n            level: 'warning',\n            message: 'Dropping property that did not expand into an ' +\n              'absolute IRI or keyword.',\n            details: {\n              property: key,\n              expandedProperty\n            }\n          },\n          options\n        });\n      }\n      continue;\n    }\n\n    if(_isKeyword(expandedProperty)) {\n      if(expandedActiveProperty === '@reverse') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; a keyword cannot be used as a @reverse ' +\n          'property.', 'jsonld.SyntaxError',\n          {code: 'invalid reverse property map', value});\n      }\n      if(expandedProperty in expandedParent &&\n         expandedProperty !== '@included' &&\n         expandedProperty !== '@type') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; colliding keywords detected.',\n          'jsonld.SyntaxError',\n          {code: 'colliding keywords', keyword: expandedProperty});\n      }\n    }\n\n    // syntax error if @id is not a string\n    if(expandedProperty === '@id') {\n      if(!_isString(value)) {\n        if(!options.isFrame) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@id\" value must a string.',\n            'jsonld.SyntaxError', {code: 'invalid @id value', value});\n        }\n        if(_isObject(value)) {\n          // empty object is a wildcard\n          if(!_isEmptyObject(value)) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n              'of strings, if framing',\n              'jsonld.SyntaxError', {code: 'invalid @id value', value});\n          }\n        } else if(_isArray(value)) {\n          if(!value.every(v => _isString(v))) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n              'of strings, if framing',\n              'jsonld.SyntaxError', {code: 'invalid @id value', value});\n          }\n        } else {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n            'of strings, if framing',\n            'jsonld.SyntaxError', {code: 'invalid @id value', value});\n        }\n      }\n\n      _addValue(\n        expandedParent, '@id',\n        _asArray(value).map(v => {\n          if(_isString(v)) {\n            const ve = _expandIri(activeCtx, v, {base: true}, options);\n            if(options.eventHandler) {\n              if(ve === null) {\n                // NOTE: spec edge case\n                // See https://github.com/w3c/json-ld-api/issues/480\n                if(v === null) {\n                  _handleEvent({\n                    event: {\n                      type: ['JsonLdEvent'],\n                      code: 'null @id value',\n                      level: 'warning',\n                      message: 'Null @id found.',\n                      details: {\n                        id: v\n                      }\n                    },\n                    options\n                  });\n                } else {\n                  // matched KEYWORD regex\n                  _handleEvent({\n                    event: {\n                      type: ['JsonLdEvent'],\n                      code: 'reserved @id value',\n                      level: 'warning',\n                      message: 'Reserved @id found.',\n                      details: {\n                        id: v\n                      }\n                    },\n                    options\n                  });\n                }\n              } else if(!_isAbsoluteIri(ve)) {\n                _handleEvent({\n                  event: {\n                    type: ['JsonLdEvent'],\n                    code: 'relative @id reference',\n                    level: 'warning',\n                    message: 'Relative @id reference found.',\n                    details: {\n                      id: v,\n                      expandedId: ve\n                    }\n                  },\n                  options\n                });\n              }\n            }\n            return ve;\n          }\n          return v;\n        }),\n        {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    if(expandedProperty === '@type') {\n      // if framing, can be a default object, but need to expand\n      // key to determine that\n      if(_isObject(value)) {\n        value = Object.fromEntries(Object.entries(value).map(([k, v]) => [\n          _expandIri(typeScopedContext, k, {vocab: true}),\n          _asArray(v).map(vv =>\n            _expandIri(typeScopedContext, vv, {base: true, vocab: true},\n              {...options, typeExpansion: true})\n          )\n        ]));\n      }\n      _validateTypeValue(value, options.isFrame);\n      _addValue(\n        expandedParent, '@type',\n        _asArray(value).map(v => {\n          if(_isString(v)) {\n            const ve = _expandIri(typeScopedContext, v,\n              {base: true, vocab: true},\n              {...options, typeExpansion: true});\n            if(ve !== '@json' && !_isAbsoluteIri(ve)) {\n              if(options.eventHandler) {\n                _handleEvent({\n                  event: {\n                    type: ['JsonLdEvent'],\n                    code: 'relative @type reference',\n                    level: 'warning',\n                    message: 'Relative @type reference found.',\n                    details: {\n                      type: v\n                    }\n                  },\n                  options\n                });\n              }\n            }\n            return ve;\n          }\n          return v;\n        }),\n        {propertyIsArray: !!options.isFrame});\n      continue;\n    }\n\n    // Included blocks are treated as an array of separate object nodes sharing\n    // the same referencing active_property.\n    // For 1.0, it is skipped as are other unknown keywords\n    if(expandedProperty === '@included' && _processingMode(activeCtx, 1.1)) {\n      const includedResult = _asArray(await api.expand({\n        activeCtx,\n        activeProperty,\n        element: value,\n        options\n      }));\n\n      // Expanded values must be node objects\n      if(!includedResult.every(v => _isSubject(v))) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; ' +\n          'values of @included must expand to node objects.',\n          'jsonld.SyntaxError', {code: 'invalid @included value', value});\n      }\n\n      _addValue(\n        expandedParent, '@included', includedResult, {propertyIsArray: true});\n      continue;\n    }\n\n    // @graph must be an array or an object\n    if(expandedProperty === '@graph' &&\n      !(_isObject(value) || _isArray(value))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; \"@graph\" value must not be an ' +\n        'object or an array.',\n        'jsonld.SyntaxError', {code: 'invalid @graph value', value});\n    }\n\n    if(expandedProperty === '@value') {\n      // capture value for later\n      // \"colliding keywords\" check prevents this from being set twice\n      unexpandedValue = value;\n      if(isJsonType && _processingMode(activeCtx, 1.1)) {\n        // no coercion to array, and retain all values\n        expandedParent['@value'] = value;\n      } else {\n        _addValue(\n          expandedParent, '@value', value, {propertyIsArray: options.isFrame});\n      }\n      continue;\n    }\n\n    // @language must be a string\n    // it should match BCP47\n    if(expandedProperty === '@language') {\n      if(value === null) {\n        // drop null @language values, they expand as if they didn't exist\n        continue;\n      }\n      if(!_isString(value) && !options.isFrame) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@language\" value must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid language-tagged string', value});\n      }\n      // ensure language value is lowercase\n      value = _asArray(value).map(v => _isString(v) ? v.toLowerCase() : v);\n\n      // ensure language tag matches BCP47\n      for(const language of value) {\n        if(_isString(language) && !language.match(REGEX_BCP47)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'invalid @language value',\n                level: 'warning',\n                message: '@language value must be valid BCP47.',\n                details: {\n                  language\n                }\n              },\n              options\n            });\n          }\n        }\n      }\n\n      _addValue(\n        expandedParent, '@language', value, {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    // @direction must be \"ltr\" or \"rtl\"\n    if(expandedProperty === '@direction') {\n      if(!_isString(value) && !options.isFrame) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@direction\" value must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid base direction', value});\n      }\n\n      value = _asArray(value);\n\n      // ensure direction is \"ltr\" or \"rtl\"\n      for(const dir of value) {\n        if(_isString(dir) && dir !== 'ltr' && dir !== 'rtl') {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@direction\" must be \"ltr\" or \"rtl\".',\n            'jsonld.SyntaxError',\n            {code: 'invalid base direction', value});\n        }\n      }\n\n      _addValue(\n        expandedParent, '@direction', value,\n        {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    // @index must be a string\n    if(expandedProperty === '@index') {\n      if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@index\" value must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @index value', value});\n      }\n      _addValue(expandedParent, '@index', value);\n      continue;\n    }\n\n    // @reverse must be an object\n    if(expandedProperty === '@reverse') {\n      if(!_isObject(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@reverse\" value must be an object.',\n          'jsonld.SyntaxError', {code: 'invalid @reverse value', value});\n      }\n\n      expandedValue = await api.expand({\n        activeCtx,\n        activeProperty: '@reverse',\n        element: value,\n        options\n      });\n      // properties double-reversed\n      if('@reverse' in expandedValue) {\n        for(const property in expandedValue['@reverse']) {\n          _addValue(\n            expandedParent, property, expandedValue['@reverse'][property],\n            {propertyIsArray: true});\n        }\n      }\n\n      // FIXME: can this be merged with code below to simplify?\n      // merge in all reversed properties\n      let reverseMap = expandedParent['@reverse'] || null;\n      for(const property in expandedValue) {\n        if(property === '@reverse') {\n          continue;\n        }\n        if(reverseMap === null) {\n          reverseMap = expandedParent['@reverse'] = {};\n        }\n        _addValue(reverseMap, property, [], {propertyIsArray: true});\n        const items = expandedValue[property];\n        for(let ii = 0; ii < items.length; ++ii) {\n          const item = items[ii];\n          if(_isValue(item) || _isList(item)) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@reverse\" value must not be a ' +\n              '@value or an @list.', 'jsonld.SyntaxError',\n              {code: 'invalid reverse property value', value: expandedValue});\n          }\n          _addValue(reverseMap, property, item, {propertyIsArray: true});\n        }\n      }\n\n      continue;\n    }\n\n    // nested keys\n    if(expandedProperty === '@nest') {\n      nests.push(key);\n      continue;\n    }\n\n    // use potential scoped context for key\n    let termCtx = activeCtx;\n    const ctx = _getContextValue(activeCtx, key, '@context');\n    if(!_isUndefined(ctx)) {\n      termCtx = await _processContext({\n        activeCtx,\n        localCtx: ctx,\n        propagate: true,\n        overrideProtected: true,\n        options\n      });\n    }\n\n    const container = _getContextValue(termCtx, key, '@container') || [];\n\n    if(container.includes('@language') && _isObject(value)) {\n      const direction = _getContextValue(termCtx, key, '@direction');\n      // handle language map container (skip if value is not an object)\n      expandedValue = _expandLanguageMap(termCtx, value, direction, options);\n    } else if(container.includes('@index') && _isObject(value)) {\n      // handle index container (skip if value is not an object)\n      const asGraph = container.includes('@graph');\n      const indexKey = _getContextValue(termCtx, key, '@index') || '@index';\n      const propertyIndex = indexKey !== '@index' &&\n        _expandIri(activeCtx, indexKey, {vocab: true}, options);\n\n      expandedValue = await _expandIndexMap({\n        activeCtx: termCtx,\n        options,\n        activeProperty: key,\n        value,\n        asGraph,\n        indexKey,\n        propertyIndex\n      });\n    } else if(container.includes('@id') && _isObject(value)) {\n      // handle id container (skip if value is not an object)\n      const asGraph = container.includes('@graph');\n      expandedValue = await _expandIndexMap({\n        activeCtx: termCtx,\n        options,\n        activeProperty: key,\n        value,\n        asGraph,\n        indexKey: '@id'\n      });\n    } else if(container.includes('@type') && _isObject(value)) {\n      // handle type container (skip if value is not an object)\n      expandedValue = await _expandIndexMap({\n        // since container is `@type`, revert type scoped context when expanding\n        activeCtx: termCtx.revertToPreviousContext(),\n        options,\n        activeProperty: key,\n        value,\n        asGraph: false,\n        indexKey: '@type'\n      });\n    } else {\n      // recurse into @list or @set\n      const isList = expandedProperty === '@list';\n      if(isList || expandedProperty === '@set') {\n        let nextActiveProperty = activeProperty;\n        if(isList && expandedActiveProperty === '@graph') {\n          nextActiveProperty = null;\n        }\n        expandedValue = await api.expand({\n          activeCtx: termCtx,\n          activeProperty: nextActiveProperty,\n          element: value,\n          options,\n          insideList: isList\n        });\n      } else if(\n        _getContextValue(activeCtx, key, '@type') === '@json') {\n        expandedValue = {\n          '@type': '@json',\n          '@value': value\n        };\n      } else {\n        // recursively expand value with key as new active property\n        expandedValue = await api.expand({\n          activeCtx: termCtx,\n          activeProperty: key,\n          element: value,\n          options,\n          insideList: false\n        });\n      }\n    }\n\n    // drop null values if property is not @value\n    if(expandedValue === null && expandedProperty !== '@value') {\n      // FIXME: event?\n      //unmappedValue: value,\n      //expandedProperty,\n      //key,\n      continue;\n    }\n\n    // convert expanded value to @list if container specifies it\n    if(expandedProperty !== '@list' && !_isList(expandedValue) &&\n      container.includes('@list')) {\n      // ensure expanded value in @list is an array\n      expandedValue = {'@list': _asArray(expandedValue)};\n    }\n\n    // convert expanded value to @graph if container specifies it\n    // and value is not, itself, a graph\n    // index cases handled above\n    if(container.includes('@graph') &&\n      !container.some(key => key === '@id' || key === '@index')) {\n      // ensure expanded values are arrays\n      // ensure an array\n      expandedValue = _asArray(expandedValue);\n      // check if needs to be dropped\n      const count = Object.keys(expandedValue[0]).length;\n      if(!options.isFrame && _dropUnsafeObject({\n        value: expandedValue[0], count, options\n      }) === null) {\n        // skip adding and continue\n        continue;\n      }\n      // convert to graph\n      expandedValue = expandedValue.map(v => ({'@graph': _asArray(v)}));\n    }\n\n    // FIXME: can this be merged with code above to simplify?\n    // merge in reverse properties\n    if(termCtx.mappings.has(key) && termCtx.mappings.get(key).reverse) {\n      const reverseMap =\n        expandedParent['@reverse'] = expandedParent['@reverse'] || {};\n      expandedValue = _asArray(expandedValue);\n      for(let ii = 0; ii < expandedValue.length; ++ii) {\n        const item = expandedValue[ii];\n        if(_isValue(item) || _isList(item)) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@reverse\" value must not be a ' +\n            '@value or an @list.', 'jsonld.SyntaxError',\n            {code: 'invalid reverse property value', value: expandedValue});\n        }\n        _addValue(reverseMap, expandedProperty, item, {propertyIsArray: true});\n      }\n      continue;\n    }\n\n    // add value for property\n    // special keywords handled above\n    _addValue(expandedParent, expandedProperty, expandedValue, {\n      propertyIsArray: true\n    });\n  }\n\n  // @value must not be an object or an array (unless framing) or if @type is\n  // @json\n  if('@value' in expandedParent) {\n    if(expandedParent['@type'] === '@json' && _processingMode(activeCtx, 1.1)) {\n      // allow any value, to be verified when the object is fully expanded and\n      // the @type is @json.\n    } else if((_isObject(unexpandedValue) || _isArray(unexpandedValue)) &&\n      !options.isFrame) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; \"@value\" value must not be an ' +\n        'object or an array.',\n        'jsonld.SyntaxError',\n        {code: 'invalid value object value', value: unexpandedValue});\n    }\n  }\n\n  // expand each nested key\n  for(const key of nests) {\n    const nestedValues = _isArray(element[key]) ? element[key] : [element[key]];\n    for(const nv of nestedValues) {\n      if(!_isObject(nv) || Object.keys(nv).some(k =>\n        _expandIri(activeCtx, k, {vocab: true}, options) === '@value')) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; nested value must be a node object.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @nest value', value: nv});\n      }\n      await _expandObject({\n        activeCtx,\n        activeProperty,\n        expandedActiveProperty,\n        element: nv,\n        expandedParent,\n        options,\n        insideList,\n        typeScopedContext,\n        typeKey\n      });\n    }\n  }\n}\n\n/**\n * Expands the given value by using the coercion and keyword rules in the\n * given context.\n *\n * @param activeCtx the active context to use.\n * @param activeProperty the active property the value is associated with.\n * @param value the value to expand.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\nfunction _expandValue({activeCtx, activeProperty, value, options}) {\n  // nothing to expand\n  if(value === null || value === undefined) {\n    return null;\n  }\n\n  // special-case expand @id and @type (skips '@id' expansion)\n  const expandedProperty = _expandIri(\n    activeCtx, activeProperty, {vocab: true}, options);\n  if(expandedProperty === '@id') {\n    return _expandIri(activeCtx, value, {base: true}, options);\n  } else if(expandedProperty === '@type') {\n    return _expandIri(activeCtx, value, {vocab: true, base: true},\n      {...options, typeExpansion: true});\n  }\n\n  // get type definition from context\n  const type = _getContextValue(activeCtx, activeProperty, '@type');\n\n  // do @id expansion (automatic for @graph)\n  if((type === '@id' || expandedProperty === '@graph') && _isString(value)) {\n    const expandedValue = _expandIri(activeCtx, value, {base: true}, options);\n    // NOTE: handle spec edge case and avoid invalid {\"@id\": null}\n    if(expandedValue === null && value.match(REGEX_KEYWORD)) {\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'reserved @id value',\n            level: 'warning',\n            message: 'Reserved @id found.',\n            details: {\n              id: activeProperty\n            }\n          },\n          options\n        });\n      }\n    }\n    return {'@id': expandedValue};\n  }\n  // do @id expansion w/vocab\n  if(type === '@vocab' && _isString(value)) {\n    return {\n      '@id': _expandIri(activeCtx, value, {vocab: true, base: true}, options)\n    };\n  }\n\n  // do not expand keyword values\n  if(_isKeyword(expandedProperty)) {\n    return value;\n  }\n\n  const rval = {};\n\n  if(type && !['@id', '@vocab', '@none'].includes(type)) {\n    // other type\n    rval['@type'] = type;\n  } else if(_isString(value)) {\n    // check for language tagging for strings\n    const language = _getContextValue(activeCtx, activeProperty, '@language');\n    if(language !== null) {\n      rval['@language'] = language;\n    }\n    const direction = _getContextValue(activeCtx, activeProperty, '@direction');\n    if(direction !== null) {\n      rval['@direction'] = direction;\n    }\n  }\n  // do conversion of values that aren't basic JSON types to strings\n  if(!['boolean', 'number', 'string'].includes(typeof value)) {\n    value = value.toString();\n  }\n  rval['@value'] = value;\n\n  return rval;\n}\n\n/**\n * Expands a language map.\n *\n * @param activeCtx the active context to use.\n * @param languageMap the language map to expand.\n * @param direction the direction to apply to values.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded language map.\n */\nfunction _expandLanguageMap(activeCtx, languageMap, direction, options) {\n  const rval = [];\n  const keys = Object.keys(languageMap).sort();\n  for(const key of keys) {\n    const expandedKey = _expandIri(activeCtx, key, {vocab: true}, options);\n    let val = languageMap[key];\n    if(!_isArray(val)) {\n      val = [val];\n    }\n    for(const item of val) {\n      if(item === null) {\n        // null values are allowed (8.5) but ignored (3.1)\n        continue;\n      }\n      if(!_isString(item)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; language map values must be strings.',\n          'jsonld.SyntaxError',\n          {code: 'invalid language map value', languageMap});\n      }\n      const val = {'@value': item};\n      if(expandedKey !== '@none') {\n        if(!key.match(REGEX_BCP47)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'invalid @language value',\n                level: 'warning',\n                message: '@language value must be valid BCP47.',\n                details: {\n                  language: key\n                }\n              },\n              options\n            });\n          }\n        }\n        val['@language'] = key.toLowerCase();\n      }\n      if(direction) {\n        val['@direction'] = direction;\n      }\n      rval.push(val);\n    }\n  }\n  return rval;\n}\n\nasync function _expandIndexMap({\n  activeCtx, options, activeProperty, value, asGraph, indexKey, propertyIndex\n}) {\n  const rval = [];\n  const keys = Object.keys(value).sort();\n  const isTypeIndex = indexKey === '@type';\n  for(let key of keys) {\n    // if indexKey is @type, there may be a context defined for it\n    if(isTypeIndex) {\n      const ctx = _getContextValue(activeCtx, key, '@context');\n      if(!_isUndefined(ctx)) {\n        activeCtx = await _processContext({\n          activeCtx,\n          localCtx: ctx,\n          propagate: false,\n          options\n        });\n      }\n    }\n\n    let val = value[key];\n    if(!_isArray(val)) {\n      val = [val];\n    }\n\n    val = await api.expand({\n      activeCtx,\n      activeProperty,\n      element: val,\n      options,\n      insideList: false,\n      insideIndex: true\n    });\n\n    // expand for @type, but also for @none\n    let expandedKey;\n    if(propertyIndex) {\n      if(key === '@none') {\n        expandedKey = '@none';\n      } else {\n        expandedKey = _expandValue(\n          {activeCtx, activeProperty: indexKey, value: key, options});\n      }\n    } else {\n      expandedKey = _expandIri(activeCtx, key, {vocab: true}, options);\n    }\n\n    if(indexKey === '@id') {\n      // expand document relative\n      key = _expandIri(activeCtx, key, {base: true}, options);\n    } else if(isTypeIndex) {\n      key = expandedKey;\n    }\n\n    for(let item of val) {\n      // If this is also a @graph container, turn items into graphs\n      if(asGraph && !_isGraph(item)) {\n        item = {'@graph': [item]};\n      }\n      if(indexKey === '@type') {\n        if(expandedKey === '@none') {\n          // ignore @none\n        } else if(item['@type']) {\n          item['@type'] = [key].concat(item['@type']);\n        } else {\n          item['@type'] = [key];\n        }\n      } else if(_isValue(item) &&\n        !['@language', '@type', '@index'].includes(indexKey)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; Attempt to add illegal key to value ' +\n          `object: \"${indexKey}\".`,\n          'jsonld.SyntaxError',\n          {code: 'invalid value object', value: item});\n      } else if(propertyIndex) {\n        // index is a property to be expanded, and values interpreted for that\n        // property\n        if(expandedKey !== '@none') {\n          // expand key as a value\n          _addValue(item, propertyIndex, expandedKey, {\n            propertyIsArray: true,\n            prependValue: true\n          });\n        }\n      } else if(expandedKey !== '@none' && !(indexKey in item)) {\n        item[indexKey] = key;\n      }\n      rval.push(item);\n    }\n  }\n  return rval;\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\nconst util = require('./util');\nconst JsonLdError = require('./JsonLdError');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Creates a merged JSON-LD node map (node ID => node).\n *\n * @param input the expanded JSON-LD to create a node map of.\n * @param [options] the options to use:\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *\n * @return the node map.\n */\napi.createMergedNodeMap = (input, options) => {\n  options = options || {};\n\n  // produce a map of all subjects and name each bnode\n  const issuer = options.issuer || new util.IdentifierIssuer('_:b');\n  const graphs = {'@default': {}};\n  api.createNodeMap(input, graphs, '@default', issuer);\n\n  // add all non-default graphs to default graph\n  return api.mergeNodeMaps(graphs);\n};\n\n/**\n * Recursively flattens the subjects in the given JSON-LD expanded input\n * into a node map.\n *\n * @param input the JSON-LD expanded input.\n * @param graphs a map of graph name to subject map.\n * @param graph the name of the current graph.\n * @param issuer the blank node identifier issuer.\n * @param name the name assigned to the current input if it is a bnode.\n * @param list the list to append to, null for none.\n */\napi.createNodeMap = (input, graphs, graph, issuer, name, list) => {\n  // recurse through array\n  if(types.isArray(input)) {\n    for(const node of input) {\n      api.createNodeMap(node, graphs, graph, issuer, undefined, list);\n    }\n    return;\n  }\n\n  // add non-object to list\n  if(!types.isObject(input)) {\n    if(list) {\n      list.push(input);\n    }\n    return;\n  }\n\n  // add values to list\n  if(graphTypes.isValue(input)) {\n    if('@type' in input) {\n      let type = input['@type'];\n      // rename @type blank node\n      if(type.indexOf('_:') === 0) {\n        input['@type'] = type = issuer.getId(type);\n      }\n    }\n    if(list) {\n      list.push(input);\n    }\n    return;\n  } else if(list && graphTypes.isList(input)) {\n    const _list = [];\n    api.createNodeMap(input['@list'], graphs, graph, issuer, name, _list);\n    list.push({'@list': _list});\n    return;\n  }\n\n  // Note: At this point, input must be a subject.\n\n  // spec requires @type to be named first, so assign names early\n  if('@type' in input) {\n    const types = input['@type'];\n    for(const type of types) {\n      if(type.indexOf('_:') === 0) {\n        issuer.getId(type);\n      }\n    }\n  }\n\n  // get name for subject\n  if(types.isUndefined(name)) {\n    name = graphTypes.isBlankNode(input) ?\n      issuer.getId(input['@id']) : input['@id'];\n  }\n\n  // add subject reference to list\n  if(list) {\n    list.push({'@id': name});\n  }\n\n  // create new subject or merge into existing one\n  const subjects = graphs[graph];\n  const subject = subjects[name] = subjects[name] || {};\n  subject['@id'] = name;\n  const properties = Object.keys(input).sort();\n  for(let property of properties) {\n    // skip @id\n    if(property === '@id') {\n      continue;\n    }\n\n    // handle reverse properties\n    if(property === '@reverse') {\n      const referencedNode = {'@id': name};\n      const reverseMap = input['@reverse'];\n      for(const reverseProperty in reverseMap) {\n        const items = reverseMap[reverseProperty];\n        for(const item of items) {\n          let itemName = item['@id'];\n          if(graphTypes.isBlankNode(item)) {\n            itemName = issuer.getId(itemName);\n          }\n          api.createNodeMap(item, graphs, graph, issuer, itemName);\n          util.addValue(\n            subjects[itemName], reverseProperty, referencedNode,\n            {propertyIsArray: true, allowDuplicate: false});\n        }\n      }\n      continue;\n    }\n\n    // recurse into graph\n    if(property === '@graph') {\n      // add graph subjects map entry\n      if(!(name in graphs)) {\n        graphs[name] = {};\n      }\n      api.createNodeMap(input[property], graphs, name, issuer);\n      continue;\n    }\n\n    // recurse into included\n    if(property === '@included') {\n      api.createNodeMap(input[property], graphs, graph, issuer);\n      continue;\n    }\n\n    // copy non-@type keywords\n    if(property !== '@type' && isKeyword(property)) {\n      if(property === '@index' && property in subject &&\n        (input[property] !== subject[property] ||\n        input[property]['@id'] !== subject[property]['@id'])) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; conflicting @index property detected.',\n          'jsonld.SyntaxError',\n          {code: 'conflicting indexes', subject});\n      }\n      subject[property] = input[property];\n      continue;\n    }\n\n    // iterate over objects\n    const objects = input[property];\n\n    // if property is a bnode, assign it a new id\n    if(property.indexOf('_:') === 0) {\n      property = issuer.getId(property);\n    }\n\n    // ensure property is added for empty arrays\n    if(objects.length === 0) {\n      util.addValue(subject, property, [], {propertyIsArray: true});\n      continue;\n    }\n    for(let o of objects) {\n      if(property === '@type') {\n        // rename @type blank nodes\n        o = (o.indexOf('_:') === 0) ? issuer.getId(o) : o;\n      }\n\n      // handle embedded subject or subject reference\n      if(graphTypes.isSubject(o) || graphTypes.isSubjectReference(o)) {\n        // skip null @id\n        if('@id' in o && !o['@id']) {\n          continue;\n        }\n\n        // relabel blank node @id\n        const id = graphTypes.isBlankNode(o) ?\n          issuer.getId(o['@id']) : o['@id'];\n\n        // add reference and recurse\n        util.addValue(\n          subject, property, {'@id': id},\n          {propertyIsArray: true, allowDuplicate: false});\n        api.createNodeMap(o, graphs, graph, issuer, id);\n      } else if(graphTypes.isValue(o)) {\n        util.addValue(\n          subject, property, o,\n          {propertyIsArray: true, allowDuplicate: false});\n      } else if(graphTypes.isList(o)) {\n        // handle @list\n        const _list = [];\n        api.createNodeMap(o['@list'], graphs, graph, issuer, name, _list);\n        o = {'@list': _list};\n        util.addValue(\n          subject, property, o,\n          {propertyIsArray: true, allowDuplicate: false});\n      } else {\n        // handle @value\n        api.createNodeMap(o, graphs, graph, issuer, name);\n        util.addValue(\n          subject, property, o, {propertyIsArray: true, allowDuplicate: false});\n      }\n    }\n  }\n};\n\n/**\n * Merge separate named graphs into a single merged graph including\n * all nodes from the default graph and named graphs.\n *\n * @param graphs a map of graph name to subject map.\n *\n * @return the merged graph map.\n */\napi.mergeNodeMapGraphs = graphs => {\n  const merged = {};\n  for(const name of Object.keys(graphs).sort()) {\n    for(const id of Object.keys(graphs[name]).sort()) {\n      const node = graphs[name][id];\n      if(!(id in merged)) {\n        merged[id] = {'@id': id};\n      }\n      const mergedNode = merged[id];\n\n      for(const property of Object.keys(node).sort()) {\n        if(isKeyword(property) && property !== '@type') {\n          // copy keywords\n          mergedNode[property] = util.clone(node[property]);\n        } else {\n          // merge objects\n          for(const value of node[property]) {\n            util.addValue(\n              mergedNode, property, util.clone(value),\n              {propertyIsArray: true, allowDuplicate: false});\n          }\n        }\n      }\n    }\n  }\n\n  return merged;\n};\n\napi.mergeNodeMaps = graphs => {\n  // add all non-default graphs to default graph\n  const defaultGraph = graphs['@default'];\n  const graphNames = Object.keys(graphs).sort();\n  for(const graphName of graphNames) {\n    if(graphName === '@default') {\n      continue;\n    }\n    const nodeMap = graphs[graphName];\n    let subject = defaultGraph[graphName];\n    if(!subject) {\n      defaultGraph[graphName] = subject = {\n        '@id': graphName,\n        '@graph': []\n      };\n    } else if(!('@graph' in subject)) {\n      subject['@graph'] = [];\n    }\n    const graph = subject['@graph'];\n    for(const id of Object.keys(nodeMap).sort()) {\n      const node = nodeMap[id];\n      // only add full subjects\n      if(!graphTypes.isSubjectReference(node)) {\n        graph.push(node);\n      }\n    }\n  }\n  return defaultGraph;\n};\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {\n  isSubjectReference: _isSubjectReference\n} = require('./graphTypes');\n\nconst {\n  createMergedNodeMap: _createMergedNodeMap\n} = require('./nodeMap');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Performs JSON-LD flattening.\n *\n * @param input the expanded JSON-LD to flatten.\n *\n * @return the flattened output.\n */\napi.flatten = input => {\n  const defaultGraph = _createMergedNodeMap(input);\n\n  // produce flattened output\n  const flattened = [];\n  const keys = Object.keys(defaultGraph).sort();\n  for(let ki = 0; ki < keys.length; ++ki) {\n    const node = defaultGraph[keys[ki]];\n    // only add full subjects to top-level\n    if(!_isSubjectReference(node)) {\n      flattened.push(node);\n    }\n  }\n  return flattened;\n};\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\n\nconst {\n  REGEX_BCP47,\n  addValue: _addValue\n} = require('./util');\n\nconst {\n  handleEvent: _handleEvent\n} = require('./events');\n\n// constants\nconst {\n  // RDF,\n  RDF_LIST,\n  RDF_FIRST,\n  RDF_REST,\n  RDF_NIL,\n  RDF_TYPE,\n  // RDF_PLAIN_LITERAL,\n  // RDF_XML_LITERAL,\n  RDF_JSON_LITERAL,\n  // RDF_OBJECT,\n  // RDF_LANGSTRING,\n\n  // XSD,\n  XSD_BOOLEAN,\n  XSD_DOUBLE,\n  XSD_INTEGER,\n  XSD_STRING,\n} = require('./constants');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Converts an RDF dataset to JSON-LD.\n *\n * @param dataset the RDF dataset.\n * @param options the RDF serialization options.\n *\n * @return a Promise that resolves to the JSON-LD output.\n */\napi.fromRDF = async (\n  dataset,\n  options\n) => {\n  const defaultGraph = {};\n  const graphMap = {'@default': defaultGraph};\n  const referencedOnce = {};\n  const {\n    useRdfType = false,\n    useNativeTypes = false,\n    rdfDirection = null\n  } = options;\n\n  for(const quad of dataset) {\n    // TODO: change 'name' to 'graph'\n    const name = (quad.graph.termType === 'DefaultGraph') ?\n      '@default' : quad.graph.value;\n    if(!(name in graphMap)) {\n      graphMap[name] = {};\n    }\n    if(name !== '@default' && !(name in defaultGraph)) {\n      defaultGraph[name] = {'@id': name};\n    }\n\n    const nodeMap = graphMap[name];\n\n    // get subject, predicate, object\n    const s = quad.subject.value;\n    const p = quad.predicate.value;\n    const o = quad.object;\n\n    if(!(s in nodeMap)) {\n      nodeMap[s] = {'@id': s};\n    }\n    const node = nodeMap[s];\n\n    const objectIsNode = o.termType.endsWith('Node');\n    if(objectIsNode && !(o.value in nodeMap)) {\n      nodeMap[o.value] = {'@id': o.value};\n    }\n\n    if(p === RDF_TYPE && !useRdfType && objectIsNode) {\n      _addValue(node, '@type', o.value, {propertyIsArray: true});\n      continue;\n    }\n\n    const value = _RDFToObject(o, useNativeTypes, rdfDirection, options);\n    _addValue(node, p, value, {propertyIsArray: true});\n\n    // object may be an RDF list/partial list node but we can't know easily\n    // until all triples are read\n    if(objectIsNode) {\n      if(o.value === RDF_NIL) {\n        // track rdf:nil uniquely per graph\n        const object = nodeMap[o.value];\n        if(!('usages' in object)) {\n          object.usages = [];\n        }\n        object.usages.push({\n          node,\n          property: p,\n          value\n        });\n      } else if(o.value in referencedOnce) {\n        // object referenced more than once\n        referencedOnce[o.value] = false;\n      } else {\n        // keep track of single reference\n        referencedOnce[o.value] = {\n          node,\n          property: p,\n          value\n        };\n      }\n    }\n  }\n\n  /*\n  for(let name in dataset) {\n    const graph = dataset[name];\n    if(!(name in graphMap)) {\n      graphMap[name] = {};\n    }\n    if(name !== '@default' && !(name in defaultGraph)) {\n      defaultGraph[name] = {'@id': name};\n    }\n    const nodeMap = graphMap[name];\n    for(let ti = 0; ti < graph.length; ++ti) {\n      const triple = graph[ti];\n\n      // get subject, predicate, object\n      const s = triple.subject.value;\n      const p = triple.predicate.value;\n      const o = triple.object;\n\n      if(!(s in nodeMap)) {\n        nodeMap[s] = {'@id': s};\n      }\n      const node = nodeMap[s];\n\n      const objectIsId = (o.type === 'IRI' || o.type === 'blank node');\n      if(objectIsId && !(o.value in nodeMap)) {\n        nodeMap[o.value] = {'@id': o.value};\n      }\n\n      if(p === RDF_TYPE && !useRdfType && objectIsId) {\n        _addValue(node, '@type', o.value, {propertyIsArray: true});\n        continue;\n      }\n\n      const value = _RDFToObject(o, useNativeTypes);\n      _addValue(node, p, value, {propertyIsArray: true});\n\n      // object may be an RDF list/partial list node but we can't know easily\n      // until all triples are read\n      if(objectIsId) {\n        if(o.value === RDF_NIL) {\n          // track rdf:nil uniquely per graph\n          const object = nodeMap[o.value];\n          if(!('usages' in object)) {\n            object.usages = [];\n          }\n          object.usages.push({\n            node: node,\n            property: p,\n            value: value\n          });\n        } else if(o.value in referencedOnce) {\n          // object referenced more than once\n          referencedOnce[o.value] = false;\n        } else {\n          // keep track of single reference\n          referencedOnce[o.value] = {\n            node: node,\n            property: p,\n            value: value\n          };\n        }\n      }\n    }\n  }*/\n\n  // convert linked lists to @list arrays\n  for(const name in graphMap) {\n    const graphObject = graphMap[name];\n\n    // no @lists to be converted, continue\n    if(!(RDF_NIL in graphObject)) {\n      continue;\n    }\n\n    // iterate backwards through each RDF list\n    const nil = graphObject[RDF_NIL];\n    if(!nil.usages) {\n      continue;\n    }\n    for(let usage of nil.usages) {\n      let node = usage.node;\n      let property = usage.property;\n      let head = usage.value;\n      const list = [];\n      const listNodes = [];\n\n      // ensure node is a well-formed list node; it must:\n      // 1. Be referenced only once.\n      // 2. Have an array for rdf:first that has 1 item.\n      // 3. Have an array for rdf:rest that has 1 item.\n      // 4. Have no keys other than: @id, rdf:first, rdf:rest, and,\n      //   optionally, @type where the value is rdf:List.\n      let nodeKeyCount = Object.keys(node).length;\n      while(property === RDF_REST &&\n        types.isObject(referencedOnce[node['@id']]) &&\n        types.isArray(node[RDF_FIRST]) && node[RDF_FIRST].length === 1 &&\n        types.isArray(node[RDF_REST]) && node[RDF_REST].length === 1 &&\n        (nodeKeyCount === 3 ||\n          (nodeKeyCount === 4 && types.isArray(node['@type']) &&\n          node['@type'].length === 1 && node['@type'][0] === RDF_LIST))) {\n        list.push(node[RDF_FIRST][0]);\n        listNodes.push(node['@id']);\n\n        // get next node, moving backwards through list\n        usage = referencedOnce[node['@id']];\n        node = usage.node;\n        property = usage.property;\n        head = usage.value;\n        nodeKeyCount = Object.keys(node).length;\n\n        // if node is not a blank node, then list head found\n        if(!graphTypes.isBlankNode(node)) {\n          break;\n        }\n      }\n\n      // transform list into @list object\n      delete head['@id'];\n      head['@list'] = list.reverse();\n      for(const listNode of listNodes) {\n        delete graphObject[listNode];\n      }\n    }\n\n    delete nil.usages;\n  }\n\n  const result = [];\n  const subjects = Object.keys(defaultGraph).sort();\n  for(const subject of subjects) {\n    const node = defaultGraph[subject];\n    if(subject in graphMap) {\n      const graph = node['@graph'] = [];\n      const graphObject = graphMap[subject];\n      const graphSubjects = Object.keys(graphObject).sort();\n      for(const graphSubject of graphSubjects) {\n        const node = graphObject[graphSubject];\n        // only add full subjects to top-level\n        if(!graphTypes.isSubjectReference(node)) {\n          graph.push(node);\n        }\n      }\n    }\n    // only add full subjects to top-level\n    if(!graphTypes.isSubjectReference(node)) {\n      result.push(node);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Converts an RDF triple object to a JSON-LD object.\n *\n * @param o the RDF triple object to convert.\n * @param useNativeTypes true to output native types, false not to.\n * @param rdfDirection text direction mode [null, i18n-datatype]\n * @param options top level API options\n *\n * @return the JSON-LD object.\n */\nfunction _RDFToObject(o, useNativeTypes, rdfDirection, options) {\n  // convert NamedNode/BlankNode object to JSON-LD\n  if(o.termType.endsWith('Node')) {\n    return {'@id': o.value};\n  }\n\n  // convert literal to JSON-LD\n  const rval = {'@value': o.value};\n\n  // add language\n  if(o.language) {\n    if(!o.language.match(REGEX_BCP47)) {\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'invalid @language value',\n            level: 'warning',\n            message: '@language value must be valid BCP47.',\n            details: {\n              language: o.language\n            }\n          },\n          options\n        });\n      }\n    }\n    rval['@language'] = o.language;\n  } else {\n    let type = o.datatype.value;\n    if(!type) {\n      type = XSD_STRING;\n    }\n    if(type === RDF_JSON_LITERAL) {\n      type = '@json';\n      try {\n        rval['@value'] = JSON.parse(rval['@value']);\n      } catch(e) {\n        throw new JsonLdError(\n          'JSON literal could not be parsed.',\n          'jsonld.InvalidJsonLiteral',\n          {code: 'invalid JSON literal', value: rval['@value'], cause: e});\n      }\n    }\n    // use native types for certain xsd types\n    if(useNativeTypes) {\n      if(type === XSD_BOOLEAN) {\n        if(rval['@value'] === 'true') {\n          rval['@value'] = true;\n        } else if(rval['@value'] === 'false') {\n          rval['@value'] = false;\n        }\n      } else if(types.isNumeric(rval['@value'])) {\n        if(type === XSD_INTEGER) {\n          const i = parseInt(rval['@value'], 10);\n          if(i.toFixed(0) === rval['@value']) {\n            rval['@value'] = i;\n          }\n        } else if(type === XSD_DOUBLE) {\n          rval['@value'] = parseFloat(rval['@value']);\n        }\n      }\n      // do not add native type\n      if(![XSD_BOOLEAN, XSD_INTEGER, XSD_DOUBLE, XSD_STRING].includes(type)) {\n        rval['@type'] = type;\n      }\n    } else if(rdfDirection === 'i18n-datatype' &&\n      type.startsWith('https://www.w3.org/ns/i18n#')) {\n      const [, language, direction] = type.split(/[#_]/);\n      if(language.length > 0) {\n        rval['@language'] = language;\n        if(!language.match(REGEX_BCP47)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'invalid @language value',\n                level: 'warning',\n                message: '@language value must be valid BCP47.',\n                details: {\n                  language\n                }\n              },\n              options\n            });\n          }\n        }\n      }\n      rval['@direction'] = direction;\n    } else if(type !== XSD_STRING) {\n      rval['@type'] = type;\n    }\n  }\n\n  return rval;\n}\n", "/* jshint esversion: 6 */\n/* jslint node: true */\n'use strict';\n\nmodule.exports = function serialize (object) {\n  if (object === null || typeof object !== 'object' || object.toJSON != null) {\n    return JSON.stringify(object);\n  }\n\n  if (Array.isArray(object)) {\n    return '[' + object.reduce((t, cv, ci) => {\n      const comma = ci === 0 ? '' : ',';\n      const value = cv === undefined || typeof cv === 'symbol' ? null : cv;\n      return t + comma + serialize(value);\n    }, '') + ']';\n  }\n\n  return '{' + Object.keys(object).sort().reduce((t, cv, ci) => {\n    if (object[cv] === undefined ||\n        typeof object[cv] === 'symbol') {\n      return t;\n    }\n    const comma = t.length === 0 ? '' : ',';\n    return t + comma + serialize(cv) + ':' + serialize(object[cv]);\n  }, '') + '}';\n};\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {createNodeMap} = require('./nodeMap');\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst jsonCanonicalize = require('canonicalize');\nconst types = require('./types');\nconst util = require('./util');\n\nconst {\n  handleEvent: _handleEvent\n} = require('./events');\n\nconst {\n  // RDF,\n  // RDF_LIST,\n  RDF_FIRST,\n  RDF_REST,\n  RDF_NIL,\n  RDF_TYPE,\n  // RDF_PLAIN_LITERAL,\n  // RDF_XML_LITERAL,\n  RDF_JSON_LITERAL,\n  // RDF_OBJECT,\n  RDF_LANGSTRING,\n\n  // XSD,\n  XSD_BOOLEAN,\n  XSD_DOUBLE,\n  XSD_INTEGER,\n  XSD_STRING,\n} = require('./constants');\n\nconst {\n  isAbsolute: _isAbsoluteIri\n} = require('./url');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Outputs an RDF dataset for the expanded JSON-LD input.\n *\n * @param input the expanded JSON-LD input.\n * @param options the RDF serialization options.\n *\n * @return the RDF dataset.\n */\napi.toRDF = (input, options) => {\n  // create node map for default graph (and any named graphs)\n  const issuer = new util.IdentifierIssuer('_:b');\n  const nodeMap = {'@default': {}};\n  createNodeMap(input, nodeMap, '@default', issuer);\n\n  const dataset = [];\n  const graphNames = Object.keys(nodeMap).sort();\n  for(const graphName of graphNames) {\n    let graphTerm;\n    if(graphName === '@default') {\n      graphTerm = {termType: 'DefaultGraph', value: ''};\n    } else if(_isAbsoluteIri(graphName)) {\n      if(graphName.startsWith('_:')) {\n        graphTerm = {termType: 'BlankNode'};\n      } else {\n        graphTerm = {termType: 'NamedNode'};\n      }\n      graphTerm.value = graphName;\n    } else {\n      // skip relative IRIs (not valid RDF)\n      if(options.eventHandler) {\n        _handleEvent({\n          event: {\n            type: ['JsonLdEvent'],\n            code: 'relative graph reference',\n            level: 'warning',\n            message: 'Relative graph reference found.',\n            details: {\n              graph: graphName\n            }\n          },\n          options\n        });\n      }\n      continue;\n    }\n    _graphToRDF(dataset, nodeMap[graphName], graphTerm, issuer, options);\n  }\n\n  return dataset;\n};\n\n/**\n * Adds RDF quads for a particular graph to the given dataset.\n *\n * @param dataset the dataset to append RDF quads to.\n * @param graph the graph to create RDF quads for.\n * @param graphTerm the graph term for each quad.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param options the RDF serialization options.\n *\n * @return the array of RDF triples for the given graph.\n */\nfunction _graphToRDF(dataset, graph, graphTerm, issuer, options) {\n  const ids = Object.keys(graph).sort();\n  for(const id of ids) {\n    const node = graph[id];\n    const properties = Object.keys(node).sort();\n    for(let property of properties) {\n      const items = node[property];\n      if(property === '@type') {\n        property = RDF_TYPE;\n      } else if(isKeyword(property)) {\n        continue;\n      }\n\n      for(const item of items) {\n        // RDF subject\n        const subject = {\n          termType: id.startsWith('_:') ? 'BlankNode' : 'NamedNode',\n          value: id\n        };\n\n        // skip relative IRI subjects (not valid RDF)\n        if(!_isAbsoluteIri(id)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'relative subject reference',\n                level: 'warning',\n                message: 'Relative subject reference found.',\n                details: {\n                  subject: id\n                }\n              },\n              options\n            });\n          }\n          continue;\n        }\n\n        // RDF predicate\n        const predicate = {\n          termType: property.startsWith('_:') ? 'BlankNode' : 'NamedNode',\n          value: property\n        };\n\n        // skip relative IRI predicates (not valid RDF)\n        if(!_isAbsoluteIri(property)) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'relative predicate reference',\n                level: 'warning',\n                message: 'Relative predicate reference found.',\n                details: {\n                  predicate: property\n                }\n              },\n              options\n            });\n          }\n          continue;\n        }\n\n        // skip blank node predicates unless producing generalized RDF\n        if(predicate.termType === 'BlankNode' &&\n          !options.produceGeneralizedRdf) {\n          if(options.eventHandler) {\n            _handleEvent({\n              event: {\n                type: ['JsonLdEvent'],\n                code: 'blank node predicate',\n                level: 'warning',\n                message: 'Dropping blank node predicate.',\n                details: {\n                  // FIXME: add better issuer API to get reverse mapping\n                  property: issuer.getOldIds()\n                    .find(key => issuer.getId(key) === property)\n                }\n              },\n              options\n            });\n          }\n          continue;\n        }\n\n        // convert list, value or node object to triple\n        const object = _objectToRDF(\n          item, issuer, dataset, graphTerm, options.rdfDirection, options);\n        // skip null objects (they are relative IRIs)\n        if(object) {\n          dataset.push({\n            subject,\n            predicate,\n            object,\n            graph: graphTerm\n          });\n        }\n      }\n    }\n  }\n}\n\n/**\n * Converts a @list value into linked list of blank node RDF quads\n * (an RDF collection).\n *\n * @param list the @list value.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param dataset the array of quads to append to.\n * @param graphTerm the graph term for each quad.\n * @param options the RDF serialization options.\n *\n * @return the head of the list.\n */\nfunction _listToRDF(list, issuer, dataset, graphTerm, rdfDirection, options) {\n  const first = {termType: 'NamedNode', value: RDF_FIRST};\n  const rest = {termType: 'NamedNode', value: RDF_REST};\n  const nil = {termType: 'NamedNode', value: RDF_NIL};\n\n  const last = list.pop();\n  // Result is the head of the list\n  const result = last ? {termType: 'BlankNode', value: issuer.getId()} : nil;\n  let subject = result;\n\n  for(const item of list) {\n    const object = _objectToRDF(\n      item, issuer, dataset, graphTerm, rdfDirection, options);\n    const next = {termType: 'BlankNode', value: issuer.getId()};\n    dataset.push({\n      subject,\n      predicate: first,\n      object,\n      graph: graphTerm\n    });\n    dataset.push({\n      subject,\n      predicate: rest,\n      object: next,\n      graph: graphTerm\n    });\n    subject = next;\n  }\n\n  // Tail of list\n  if(last) {\n    const object = _objectToRDF(\n      last, issuer, dataset, graphTerm, rdfDirection, options);\n    dataset.push({\n      subject,\n      predicate: first,\n      object,\n      graph: graphTerm\n    });\n    dataset.push({\n      subject,\n      predicate: rest,\n      object: nil,\n      graph: graphTerm\n    });\n  }\n\n  return result;\n}\n\n/**\n * Converts a JSON-LD value object to an RDF literal or a JSON-LD string,\n * node object to an RDF resource, or adds a list.\n *\n * @param item the JSON-LD value or node object.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param dataset the dataset to append RDF quads to.\n * @param graphTerm the graph term for each quad.\n * @param options the RDF serialization options.\n *\n * @return the RDF literal or RDF resource.\n */\nfunction _objectToRDF(\n  item, issuer, dataset, graphTerm, rdfDirection, options\n) {\n  const object = {};\n\n  // convert value object to RDF\n  if(graphTypes.isValue(item)) {\n    object.termType = 'Literal';\n    object.value = undefined;\n    object.datatype = {\n      termType: 'NamedNode'\n    };\n    let value = item['@value'];\n    const datatype = item['@type'] || null;\n\n    // convert to XSD/JSON datatypes as appropriate\n    if(datatype === '@json') {\n      object.value = jsonCanonicalize(value);\n      object.datatype.value = RDF_JSON_LITERAL;\n    } else if(types.isBoolean(value)) {\n      object.value = value.toString();\n      object.datatype.value = datatype || XSD_BOOLEAN;\n    } else if(types.isDouble(value) || datatype === XSD_DOUBLE) {\n      if(!types.isDouble(value)) {\n        value = parseFloat(value);\n      }\n      // canonical double representation\n      object.value = value.toExponential(15).replace(/(\\d)0*e\\+?/, '$1E');\n      object.datatype.value = datatype || XSD_DOUBLE;\n    } else if(types.isNumber(value)) {\n      object.value = value.toFixed(0);\n      object.datatype.value = datatype || XSD_INTEGER;\n    } else if(rdfDirection === 'i18n-datatype' &&\n      '@direction' in item) {\n      const datatype = 'https://www.w3.org/ns/i18n#' +\n        (item['@language'] || '') +\n        `_${item['@direction']}`;\n      object.datatype.value = datatype;\n      object.value = value;\n    } else if('@language' in item) {\n      object.value = value;\n      object.datatype.value = datatype || RDF_LANGSTRING;\n      object.language = item['@language'];\n    } else {\n      object.value = value;\n      object.datatype.value = datatype || XSD_STRING;\n    }\n  } else if(graphTypes.isList(item)) {\n    const _list = _listToRDF(\n      item['@list'], issuer, dataset, graphTerm, rdfDirection, options);\n    object.termType = _list.termType;\n    object.value = _list.value;\n  } else {\n    // convert string/node object to RDF\n    const id = types.isObject(item) ? item['@id'] : item;\n    object.termType = id.startsWith('_:') ? 'BlankNode' : 'NamedNode';\n    object.value = id;\n  }\n\n  // skip relative IRIs, not valid RDF\n  if(object.termType === 'NamedNode' && !_isAbsoluteIri(object.value)) {\n    if(options.eventHandler) {\n      _handleEvent({\n        event: {\n          type: ['JsonLdEvent'],\n          code: 'relative object reference',\n          level: 'warning',\n          message: 'Relative object reference found.',\n          details: {\n            object: object.value\n          }\n        },\n        options\n      });\n    }\n    return null;\n  }\n\n  return object;\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\nconst util = require('./util');\nconst url = require('./url');\nconst JsonLdError = require('./JsonLdError');\nconst {\n  createNodeMap: _createNodeMap,\n  mergeNodeMapGraphs: _mergeNodeMapGraphs\n} = require('./nodeMap');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Performs JSON-LD `merged` framing.\n *\n * @param input the expanded JSON-LD to frame.\n * @param frame the expanded JSON-LD frame to use.\n * @param options the framing options.\n *\n * @return the framed output.\n */\napi.frameMergedOrDefault = (input, frame, options) => {\n  // create framing state\n  const state = {\n    options,\n    embedded: false,\n    graph: '@default',\n    graphMap: {'@default': {}},\n    subjectStack: [],\n    link: {},\n    bnodeMap: {}\n  };\n\n  // produce a map of all graphs and name each bnode\n  // FIXME: currently uses subjects from @merged graph only\n  const issuer = new util.IdentifierIssuer('_:b');\n  _createNodeMap(input, state.graphMap, '@default', issuer);\n  if(options.merged) {\n    state.graphMap['@merged'] = _mergeNodeMapGraphs(state.graphMap);\n    state.graph = '@merged';\n  }\n  state.subjects = state.graphMap[state.graph];\n\n  // frame the subjects\n  const framed = [];\n  api.frame(state, Object.keys(state.subjects).sort(), frame, framed);\n\n  // If pruning blank nodes, find those to prune\n  if(options.pruneBlankNodeIdentifiers) {\n    // remove all blank nodes appearing only once, done in compaction\n    options.bnodesToClear =\n      Object.keys(state.bnodeMap).filter(id => state.bnodeMap[id].length === 1);\n  }\n\n  // remove @preserve from results\n  options.link = {};\n  return _cleanupPreserve(framed, options);\n};\n\n/**\n * Frames subjects according to the given frame.\n *\n * @param state the current framing state.\n * @param subjects the subjects to filter.\n * @param frame the frame.\n * @param parent the parent subject or top-level array.\n * @param property the parent property, initialized to null.\n */\napi.frame = (state, subjects, frame, parent, property = null) => {\n  // validate the frame\n  _validateFrame(frame);\n  frame = frame[0];\n\n  // get flags for current frame\n  const options = state.options;\n  const flags = {\n    embed: _getFrameFlag(frame, options, 'embed'),\n    explicit: _getFrameFlag(frame, options, 'explicit'),\n    requireAll: _getFrameFlag(frame, options, 'requireAll')\n  };\n\n  // get link for current graph\n  if(!state.link.hasOwnProperty(state.graph)) {\n    state.link[state.graph] = {};\n  }\n  const link = state.link[state.graph];\n\n  // filter out subjects that match the frame\n  const matches = _filterSubjects(state, subjects, frame, flags);\n\n  // add matches to output\n  const ids = Object.keys(matches).sort();\n  for(const id of ids) {\n    const subject = matches[id];\n\n    /* Note: In order to treat each top-level match as a compartmentalized\n    result, clear the unique embedded subjects map when the property is null,\n    which only occurs at the top-level. */\n    if(property === null) {\n      state.uniqueEmbeds = {[state.graph]: {}};\n    } else {\n      state.uniqueEmbeds[state.graph] = state.uniqueEmbeds[state.graph] || {};\n    }\n\n    if(flags.embed === '@link' && id in link) {\n      // TODO: may want to also match an existing linked subject against\n      // the current frame ... so different frames could produce different\n      // subjects that are only shared in-memory when the frames are the same\n\n      // add existing linked subject\n      _addFrameOutput(parent, property, link[id]);\n      continue;\n    }\n\n    // start output for subject\n    const output = {'@id': id};\n    if(id.indexOf('_:') === 0) {\n      util.addValue(state.bnodeMap, id, output, {propertyIsArray: true});\n    }\n    link[id] = output;\n\n    // validate @embed\n    if((flags.embed === '@first' || flags.embed === '@last') && state.is11) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; invalid value of @embed.',\n        'jsonld.SyntaxError', {code: 'invalid @embed value', frame});\n    }\n\n    if(!state.embedded && state.uniqueEmbeds[state.graph].hasOwnProperty(id)) {\n      // skip adding this node object to the top level, as it was\n      // already included in another node object\n      continue;\n    }\n\n    // if embed is @never or if a circular reference would be created by an\n    // embed, the subject cannot be embedded, just add the reference;\n    // note that a circular reference won't occur when the embed flag is\n    // `@link` as the above check will short-circuit before reaching this point\n    if(state.embedded &&\n      (flags.embed === '@never' ||\n      _createsCircularReference(subject, state.graph, state.subjectStack))) {\n      _addFrameOutput(parent, property, output);\n      continue;\n    }\n\n    // if only the first (or once) should be embedded\n    if(state.embedded &&\n       (flags.embed == '@first' || flags.embed == '@once') &&\n       state.uniqueEmbeds[state.graph].hasOwnProperty(id)) {\n      _addFrameOutput(parent, property, output);\n      continue;\n    }\n\n    // if only the last match should be embedded\n    if(flags.embed === '@last') {\n      // remove any existing embed\n      if(id in state.uniqueEmbeds[state.graph]) {\n        _removeEmbed(state, id);\n      }\n    }\n\n    state.uniqueEmbeds[state.graph][id] = {parent, property};\n\n    // push matching subject onto stack to enable circular embed checks\n    state.subjectStack.push({subject, graph: state.graph});\n\n    // subject is also the name of a graph\n    if(id in state.graphMap) {\n      let recurse = false;\n      let subframe = null;\n      if(!('@graph' in frame)) {\n        recurse = state.graph !== '@merged';\n        subframe = {};\n      } else {\n        subframe = frame['@graph'][0];\n        recurse = !(id === '@merged' || id === '@default');\n        if(!types.isObject(subframe)) {\n          subframe = {};\n        }\n      }\n\n      if(recurse) {\n        // recurse into graph\n        api.frame(\n          {...state, graph: id, embedded: false},\n          Object.keys(state.graphMap[id]).sort(), [subframe], output, '@graph');\n      }\n    }\n\n    // if frame has @included, recurse over its sub-frame\n    if('@included' in frame) {\n      api.frame(\n        {...state, embedded: false},\n        subjects, frame['@included'], output, '@included');\n    }\n\n    // iterate over subject properties\n    for(const prop of Object.keys(subject).sort()) {\n      // copy keywords to output\n      if(isKeyword(prop)) {\n        output[prop] = util.clone(subject[prop]);\n\n        if(prop === '@type') {\n          // count bnode values of @type\n          for(const type of subject['@type']) {\n            if(type.indexOf('_:') === 0) {\n              util.addValue(\n                state.bnodeMap, type, output, {propertyIsArray: true});\n            }\n          }\n        }\n        continue;\n      }\n\n      // explicit is on and property isn't in the frame, skip processing\n      if(flags.explicit && !(prop in frame)) {\n        continue;\n      }\n\n      // add objects\n      for(const o of subject[prop]) {\n        const subframe = (prop in frame ?\n          frame[prop] : _createImplicitFrame(flags));\n\n        // recurse into list\n        if(graphTypes.isList(o)) {\n          const subframe =\n            (frame[prop] && frame[prop][0] && frame[prop][0]['@list']) ?\n              frame[prop][0]['@list'] :\n              _createImplicitFrame(flags);\n\n          // add empty list\n          const list = {'@list': []};\n          _addFrameOutput(output, prop, list);\n\n          // add list objects\n          const src = o['@list'];\n          for(const oo of src) {\n            if(graphTypes.isSubjectReference(oo)) {\n              // recurse into subject reference\n              api.frame(\n                {...state, embedded: true},\n                [oo['@id']], subframe, list, '@list');\n            } else {\n              // include other values automatically\n              _addFrameOutput(list, '@list', util.clone(oo));\n            }\n          }\n        } else if(graphTypes.isSubjectReference(o)) {\n          // recurse into subject reference\n          api.frame(\n            {...state, embedded: true},\n            [o['@id']], subframe, output, prop);\n        } else if(_valueMatch(subframe[0], o)) {\n          // include other values, if they match\n          _addFrameOutput(output, prop, util.clone(o));\n        }\n      }\n    }\n\n    // handle defaults\n    for(const prop of Object.keys(frame).sort()) {\n      // skip keywords\n      if(prop === '@type') {\n        if(!types.isObject(frame[prop][0]) ||\n           !('@default' in frame[prop][0])) {\n          continue;\n        }\n        // allow through default types\n      } else if(isKeyword(prop)) {\n        continue;\n      }\n\n      // if omit default is off, then include default values for properties\n      // that appear in the next frame but are not in the matching subject\n      const next = frame[prop][0] || {};\n      const omitDefaultOn = _getFrameFlag(next, options, 'omitDefault');\n      if(!omitDefaultOn && !(prop in output)) {\n        let preserve = '@null';\n        if('@default' in next) {\n          preserve = util.clone(next['@default']);\n        }\n        if(!types.isArray(preserve)) {\n          preserve = [preserve];\n        }\n        output[prop] = [{'@preserve': preserve}];\n      }\n    }\n\n    // if embed reverse values by finding nodes having this subject as a value\n    // of the associated property\n    for(const reverseProp of Object.keys(frame['@reverse'] || {}).sort()) {\n      const subframe = frame['@reverse'][reverseProp];\n      for(const subject of Object.keys(state.subjects)) {\n        const nodeValues =\n          util.getValues(state.subjects[subject], reverseProp);\n        if(nodeValues.some(v => v['@id'] === id)) {\n          // node has property referencing this subject, recurse\n          output['@reverse'] = output['@reverse'] || {};\n          util.addValue(\n            output['@reverse'], reverseProp, [], {propertyIsArray: true});\n          api.frame(\n            {...state, embedded: true},\n            [subject], subframe, output['@reverse'][reverseProp],\n            property);\n        }\n      }\n    }\n\n    // add output to parent\n    _addFrameOutput(parent, property, output);\n\n    // pop matching subject from circular ref-checking stack\n    state.subjectStack.pop();\n  }\n};\n\n/**\n * Replace `@null` with `null`, removing it from arrays.\n *\n * @param input the framed, compacted output.\n * @param options the framing options used.\n *\n * @return the resulting output.\n */\napi.cleanupNull = (input, options) => {\n  // recurse through arrays\n  if(types.isArray(input)) {\n    const noNulls = input.map(v => api.cleanupNull(v, options));\n    return noNulls.filter(v => v); // removes nulls from array\n  }\n\n  if(input === '@null') {\n    return null;\n  }\n\n  if(types.isObject(input)) {\n    // handle in-memory linked nodes\n    if('@id' in input) {\n      const id = input['@id'];\n      if(options.link.hasOwnProperty(id)) {\n        const idx = options.link[id].indexOf(input);\n        if(idx !== -1) {\n          // already visited\n          return options.link[id][idx];\n        }\n        // prevent circular visitation\n        options.link[id].push(input);\n      } else {\n        // prevent circular visitation\n        options.link[id] = [input];\n      }\n    }\n\n    for(const key in input) {\n      input[key] = api.cleanupNull(input[key], options);\n    }\n  }\n  return input;\n};\n\n/**\n * Creates an implicit frame when recursing through subject matches. If\n * a frame doesn't have an explicit frame for a particular property, then\n * a wildcard child frame will be created that uses the same flags that the\n * parent frame used.\n *\n * @param flags the current framing flags.\n *\n * @return the implicit frame.\n */\nfunction _createImplicitFrame(flags) {\n  const frame = {};\n  for(const key in flags) {\n    if(flags[key] !== undefined) {\n      frame['@' + key] = [flags[key]];\n    }\n  }\n  return [frame];\n}\n\n/**\n * Checks the current subject stack to see if embedding the given subject\n * would cause a circular reference.\n *\n * @param subjectToEmbed the subject to embed.\n * @param graph the graph the subject to embed is in.\n * @param subjectStack the current stack of subjects.\n *\n * @return true if a circular reference would be created, false if not.\n */\nfunction _createsCircularReference(subjectToEmbed, graph, subjectStack) {\n  for(let i = subjectStack.length - 1; i >= 0; --i) {\n    const subject = subjectStack[i];\n    if(subject.graph === graph &&\n      subject.subject['@id'] === subjectToEmbed['@id']) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Gets the frame flag value for the given flag name.\n *\n * @param frame the frame.\n * @param options the framing options.\n * @param name the flag name.\n *\n * @return the flag value.\n */\nfunction _getFrameFlag(frame, options, name) {\n  const flag = '@' + name;\n  let rval = (flag in frame ? frame[flag][0] : options[name]);\n  if(name === 'embed') {\n    // default is \"@last\"\n    // backwards-compatibility support for \"embed\" maps:\n    // true => \"@last\"\n    // false => \"@never\"\n    if(rval === true) {\n      rval = '@once';\n    } else if(rval === false) {\n      rval = '@never';\n    } else if(rval !== '@always' && rval !== '@never' && rval !== '@link' &&\n      rval !== '@first' && rval !== '@last' && rval !== '@once') {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; invalid value of @embed.',\n        'jsonld.SyntaxError', {code: 'invalid @embed value', frame});\n    }\n  }\n  return rval;\n}\n\n/**\n * Validates a JSON-LD frame, throwing an exception if the frame is invalid.\n *\n * @param frame the frame to validate.\n */\nfunction _validateFrame(frame) {\n  if(!types.isArray(frame) || frame.length !== 1 || !types.isObject(frame[0])) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; a JSON-LD frame must be a single object.',\n      'jsonld.SyntaxError', {frame});\n  }\n\n  if('@id' in frame[0]) {\n    for(const id of util.asArray(frame[0]['@id'])) {\n      // @id must be wildcard or an IRI\n      if(!(types.isObject(id) || url.isAbsolute(id)) ||\n        (types.isString(id) && id.indexOf('_:') === 0)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; invalid @id in frame.',\n          'jsonld.SyntaxError', {code: 'invalid frame', frame});\n      }\n    }\n  }\n\n  if('@type' in frame[0]) {\n    for(const type of util.asArray(frame[0]['@type'])) {\n      // @type must be wildcard, IRI, or @json\n      if(!(types.isObject(type) || url.isAbsolute(type) ||\n          (type === '@json')) ||\n        (types.isString(type) && type.indexOf('_:') === 0)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; invalid @type in frame.',\n          'jsonld.SyntaxError', {code: 'invalid frame', frame});\n      }\n    }\n  }\n}\n\n/**\n * Returns a map of all of the subjects that match a parsed frame.\n *\n * @param state the current framing state.\n * @param subjects the set of subjects to filter.\n * @param frame the parsed frame.\n * @param flags the frame flags.\n *\n * @return all of the matched subjects.\n */\nfunction _filterSubjects(state, subjects, frame, flags) {\n  // filter subjects in @id order\n  const rval = {};\n  for(const id of subjects) {\n    const subject = state.graphMap[state.graph][id];\n    if(_filterSubject(state, subject, frame, flags)) {\n      rval[id] = subject;\n    }\n  }\n  return rval;\n}\n\n/**\n * Returns true if the given subject matches the given frame.\n *\n * Matches either based on explicit type inclusion where the node has any\n * type listed in the frame. If the frame has empty types defined matches\n * nodes not having a @type. If the frame has a type of {} defined matches\n * nodes having any type defined.\n *\n * Otherwise, does duck typing, where the node must have all of the\n * properties defined in the frame.\n *\n * @param state the current framing state.\n * @param subject the subject to check.\n * @param frame the frame to check.\n * @param flags the frame flags.\n *\n * @return true if the subject matches, false if not.\n */\nfunction _filterSubject(state, subject, frame, flags) {\n  // check ducktype\n  let wildcard = true;\n  let matchesSome = false;\n\n  for(const key in frame) {\n    let matchThis = false;\n    const nodeValues = util.getValues(subject, key);\n    const isEmpty = util.getValues(frame, key).length === 0;\n\n    if(key === '@id') {\n      // match on no @id or any matching @id, including wildcard\n      if(types.isEmptyObject(frame['@id'][0] || {})) {\n        matchThis = true;\n      } else if(frame['@id'].length >= 0) {\n        matchThis = frame['@id'].includes(nodeValues[0]);\n      }\n      if(!flags.requireAll) {\n        return matchThis;\n      }\n    } else if(key === '@type') {\n      // check @type (object value means 'any' type,\n      // fall through to ducktyping)\n      wildcard = false;\n      if(isEmpty) {\n        if(nodeValues.length > 0) {\n          // don't match on no @type\n          return false;\n        }\n        matchThis = true;\n      } else if(frame['@type'].length === 1 &&\n        types.isEmptyObject(frame['@type'][0])) {\n        // match on wildcard @type if there is a type\n        matchThis = nodeValues.length > 0;\n      } else {\n        // match on a specific @type\n        for(const type of frame['@type']) {\n          if(types.isObject(type) && '@default' in type) {\n            // match on default object\n            matchThis = true;\n          } else {\n            matchThis = matchThis || nodeValues.some(tt => tt === type);\n          }\n        }\n      }\n      if(!flags.requireAll) {\n        return matchThis;\n      }\n    } else if(isKeyword(key)) {\n      continue;\n    } else {\n      // Force a copy of this frame entry so it can be manipulated\n      const thisFrame = util.getValues(frame, key)[0];\n      let hasDefault = false;\n      if(thisFrame) {\n        _validateFrame([thisFrame]);\n        hasDefault = '@default' in thisFrame;\n      }\n\n      // no longer a wildcard pattern if frame has any non-keyword properties\n      wildcard = false;\n\n      // skip, but allow match if node has no value for property, and frame has\n      // a default value\n      if(nodeValues.length === 0 && hasDefault) {\n        continue;\n      }\n\n      // if frame value is empty, don't match if subject has any value\n      if(nodeValues.length > 0 && isEmpty) {\n        return false;\n      }\n\n      if(thisFrame === undefined) {\n        // node does not match if values is not empty and the value of property\n        // in frame is match none.\n        if(nodeValues.length > 0) {\n          return false;\n        }\n        matchThis = true;\n      } else {\n        if(graphTypes.isList(thisFrame)) {\n          const listValue = thisFrame['@list'][0];\n          if(graphTypes.isList(nodeValues[0])) {\n            const nodeListValues = nodeValues[0]['@list'];\n\n            if(graphTypes.isValue(listValue)) {\n              // match on any matching value\n              matchThis = nodeListValues.some(lv => _valueMatch(listValue, lv));\n            } else if(graphTypes.isSubject(listValue) ||\n              graphTypes.isSubjectReference(listValue)) {\n              matchThis = nodeListValues.some(lv => _nodeMatch(\n                state, listValue, lv, flags));\n            }\n          }\n        } else if(graphTypes.isValue(thisFrame)) {\n          matchThis = nodeValues.some(nv => _valueMatch(thisFrame, nv));\n        } else if(graphTypes.isSubjectReference(thisFrame)) {\n          matchThis =\n            nodeValues.some(nv => _nodeMatch(state, thisFrame, nv, flags));\n        } else if(types.isObject(thisFrame)) {\n          matchThis = nodeValues.length > 0;\n        } else {\n          matchThis = false;\n        }\n      }\n    }\n\n    // all non-defaulted values must match if requireAll is set\n    if(!matchThis && flags.requireAll) {\n      return false;\n    }\n\n    matchesSome = matchesSome || matchThis;\n  }\n\n  // return true if wildcard or subject matches some properties\n  return wildcard || matchesSome;\n}\n\n/**\n * Removes an existing embed.\n *\n * @param state the current framing state.\n * @param id the @id of the embed to remove.\n */\nfunction _removeEmbed(state, id) {\n  // get existing embed\n  const embeds = state.uniqueEmbeds[state.graph];\n  const embed = embeds[id];\n  const parent = embed.parent;\n  const property = embed.property;\n\n  // create reference to replace embed\n  const subject = {'@id': id};\n\n  // remove existing embed\n  if(types.isArray(parent)) {\n    // replace subject with reference\n    for(let i = 0; i < parent.length; ++i) {\n      if(util.compareValues(parent[i], subject)) {\n        parent[i] = subject;\n        break;\n      }\n    }\n  } else {\n    // replace subject with reference\n    const useArray = types.isArray(parent[property]);\n    util.removeValue(parent, property, subject, {propertyIsArray: useArray});\n    util.addValue(parent, property, subject, {propertyIsArray: useArray});\n  }\n\n  // recursively remove dependent dangling embeds\n  const removeDependents = id => {\n    // get embed keys as a separate array to enable deleting keys in map\n    const ids = Object.keys(embeds);\n    for(const next of ids) {\n      if(next in embeds && types.isObject(embeds[next].parent) &&\n        embeds[next].parent['@id'] === id) {\n        delete embeds[next];\n        removeDependents(next);\n      }\n    }\n  };\n  removeDependents(id);\n}\n\n/**\n * Removes the @preserve keywords from expanded result of framing.\n *\n * @param input the framed, framed output.\n * @param options the framing options used.\n *\n * @return the resulting output.\n */\nfunction _cleanupPreserve(input, options) {\n  // recurse through arrays\n  if(types.isArray(input)) {\n    return input.map(value => _cleanupPreserve(value, options));\n  }\n\n  if(types.isObject(input)) {\n    // remove @preserve\n    if('@preserve' in input) {\n      return input['@preserve'][0];\n    }\n\n    // skip @values\n    if(graphTypes.isValue(input)) {\n      return input;\n    }\n\n    // recurse through @lists\n    if(graphTypes.isList(input)) {\n      input['@list'] = _cleanupPreserve(input['@list'], options);\n      return input;\n    }\n\n    // handle in-memory linked nodes\n    if('@id' in input) {\n      const id = input['@id'];\n      if(options.link.hasOwnProperty(id)) {\n        const idx = options.link[id].indexOf(input);\n        if(idx !== -1) {\n          // already visited\n          return options.link[id][idx];\n        }\n        // prevent circular visitation\n        options.link[id].push(input);\n      } else {\n        // prevent circular visitation\n        options.link[id] = [input];\n      }\n    }\n\n    // recurse through properties\n    for(const prop in input) {\n      // potentially remove the id, if it is an unreference bnode\n      if(prop === '@id' && options.bnodesToClear.includes(input[prop])) {\n        delete input['@id'];\n        continue;\n      }\n\n      input[prop] = _cleanupPreserve(input[prop], options);\n    }\n  }\n  return input;\n}\n\n/**\n * Adds framing output to the given parent.\n *\n * @param parent the parent to add to.\n * @param property the parent property.\n * @param output the output to add.\n */\nfunction _addFrameOutput(parent, property, output) {\n  if(types.isObject(parent)) {\n    util.addValue(parent, property, output, {propertyIsArray: true});\n  } else {\n    parent.push(output);\n  }\n}\n\n/**\n * Node matches if it is a node, and matches the pattern as a frame.\n *\n * @param state the current framing state.\n * @param pattern used to match value\n * @param value to check\n * @param flags the frame flags.\n */\nfunction _nodeMatch(state, pattern, value, flags) {\n  if(!('@id' in value)) {\n    return false;\n  }\n  const nodeObject = state.subjects[value['@id']];\n  return nodeObject && _filterSubject(state, nodeObject, pattern, flags);\n}\n\n/**\n * Value matches if it is a value and matches the value pattern\n *\n * * `pattern` is empty\n * * @values are the same, or `pattern[@value]` is a wildcard, and\n * * @types are the same or `value[@type]` is not null\n *   and `pattern[@type]` is `{}`, or `value[@type]` is null\n *   and `pattern[@type]` is null or `[]`, and\n * * @languages are the same or `value[@language]` is not null\n *   and `pattern[@language]` is `{}`, or `value[@language]` is null\n *   and `pattern[@language]` is null or `[]`.\n *\n * @param pattern used to match value\n * @param value to check\n */\nfunction _valueMatch(pattern, value) {\n  const v1 = value['@value'];\n  const t1 = value['@type'];\n  const l1 = value['@language'];\n  const v2 = pattern['@value'] ?\n    (types.isArray(pattern['@value']) ?\n      pattern['@value'] : [pattern['@value']]) :\n    [];\n  const t2 = pattern['@type'] ?\n    (types.isArray(pattern['@type']) ?\n      pattern['@type'] : [pattern['@type']]) :\n    [];\n  const l2 = pattern['@language'] ?\n    (types.isArray(pattern['@language']) ?\n      pattern['@language'] : [pattern['@language']]) :\n    [];\n\n  if(v2.length === 0 && t2.length === 0 && l2.length === 0) {\n    return true;\n  }\n  if(!(v2.includes(v1) || types.isEmptyObject(v2[0]))) {\n    return false;\n  }\n  if(!(!t1 && t2.length === 0 || t2.includes(t1) || t1 &&\n    types.isEmptyObject(t2[0]))) {\n    return false;\n  }\n  if(!(!l1 && l2.length === 0 || l2.includes(l1) || l1 &&\n    types.isEmptyObject(l2[0]))) {\n    return false;\n  }\n  return true;\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isList: _isList,\n  isValue: _isValue,\n  isGraph: _isGraph,\n  isSimpleGraph: _isSimpleGraph,\n  isSubjectReference: _isSubjectReference\n} = require('./graphTypes');\n\nconst {\n  expandIri: _expandIri,\n  getContextValue: _getContextValue,\n  isKeyword: _isKeyword,\n  process: _processContext,\n  processingMode: _processingMode\n} = require('./context');\n\nconst {\n  removeBase: _removeBase,\n  prependBase: _prependBase\n} = require('./url');\n\nconst {\n  REGEX_KEYWORD,\n  addValue: _addValue,\n  asArray: _asArray,\n  compareShortestLeast: _compareShortestLeast\n} = require('./util');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Recursively compacts an element using the given active context. All values\n * must be in expanded form before this method is called.\n *\n * @param activeCtx the active context to use.\n * @param activeProperty the compacted property associated with the element\n *          to compact, null for none.\n * @param element the element to compact.\n * @param options the compaction options.\n *\n * @return a promise that resolves to the compacted value.\n */\napi.compact = async ({\n  activeCtx,\n  activeProperty = null,\n  element,\n  options = {}\n}) => {\n  // recursively compact array\n  if(_isArray(element)) {\n    let rval = [];\n    for(let i = 0; i < element.length; ++i) {\n      const compacted = await api.compact({\n        activeCtx,\n        activeProperty,\n        element: element[i],\n        options\n      });\n      if(compacted === null) {\n        // FIXME: need event?\n        continue;\n      }\n      rval.push(compacted);\n    }\n    if(options.compactArrays && rval.length === 1) {\n      // use single element if no container is specified\n      const container = _getContextValue(\n        activeCtx, activeProperty, '@container') || [];\n      if(container.length === 0) {\n        rval = rval[0];\n      }\n    }\n    return rval;\n  }\n\n  // use any scoped context on activeProperty\n  const ctx = _getContextValue(activeCtx, activeProperty, '@context');\n  if(!_isUndefined(ctx)) {\n    activeCtx = await _processContext({\n      activeCtx,\n      localCtx: ctx,\n      propagate: true,\n      overrideProtected: true,\n      options\n    });\n  }\n\n  // recursively compact object\n  if(_isObject(element)) {\n    if(options.link && '@id' in element &&\n      options.link.hasOwnProperty(element['@id'])) {\n      // check for a linked element to reuse\n      const linked = options.link[element['@id']];\n      for(let i = 0; i < linked.length; ++i) {\n        if(linked[i].expanded === element) {\n          return linked[i].compacted;\n        }\n      }\n    }\n\n    // do value compaction on @values and subject references\n    if(_isValue(element) || _isSubjectReference(element)) {\n      const rval =\n        api.compactValue({activeCtx, activeProperty, value: element, options});\n      if(options.link && _isSubjectReference(element)) {\n        // store linked element\n        if(!(options.link.hasOwnProperty(element['@id']))) {\n          options.link[element['@id']] = [];\n        }\n        options.link[element['@id']].push({expanded: element, compacted: rval});\n      }\n      return rval;\n    }\n\n    // if expanded property is @list and we're contained within a list\n    // container, recursively compact this item to an array\n    if(_isList(element)) {\n      const container = _getContextValue(\n        activeCtx, activeProperty, '@container') || [];\n      if(container.includes('@list')) {\n        return api.compact({\n          activeCtx,\n          activeProperty,\n          element: element['@list'],\n          options\n        });\n      }\n    }\n\n    // FIXME: avoid misuse of active property as an expanded property?\n    const insideReverse = (activeProperty === '@reverse');\n\n    const rval = {};\n\n    // original context before applying property-scoped and local contexts\n    const inputCtx = activeCtx;\n\n    // revert to previous context, if there is one,\n    // and element is not a value object or a node reference\n    if(!_isValue(element) && !_isSubjectReference(element)) {\n      activeCtx = activeCtx.revertToPreviousContext();\n    }\n\n    // apply property-scoped context after reverting term-scoped context\n    const propertyScopedCtx =\n      _getContextValue(inputCtx, activeProperty, '@context');\n    if(!_isUndefined(propertyScopedCtx)) {\n      activeCtx = await _processContext({\n        activeCtx,\n        localCtx: propertyScopedCtx,\n        propagate: true,\n        overrideProtected: true,\n        options\n      });\n    }\n\n    if(options.link && '@id' in element) {\n      // store linked element\n      if(!options.link.hasOwnProperty(element['@id'])) {\n        options.link[element['@id']] = [];\n      }\n      options.link[element['@id']].push({expanded: element, compacted: rval});\n    }\n\n    // apply any context defined on an alias of @type\n    // if key is @type and any compacted value is a term having a local\n    // context, overlay that context\n    let types = element['@type'] || [];\n    if(types.length > 1) {\n      types = Array.from(types).sort();\n    }\n    // find all type-scoped contexts based on current context, prior to\n    // updating it\n    const typeContext = activeCtx;\n    for(const type of types) {\n      const compactedType = api.compactIri(\n        {activeCtx: typeContext, iri: type, relativeTo: {vocab: true}});\n\n      // Use any type-scoped context defined on this value\n      const ctx = _getContextValue(inputCtx, compactedType, '@context');\n      if(!_isUndefined(ctx)) {\n        activeCtx = await _processContext({\n          activeCtx,\n          localCtx: ctx,\n          options,\n          propagate: false\n        });\n      }\n    }\n\n    // process element keys in order\n    const keys = Object.keys(element).sort();\n    for(const expandedProperty of keys) {\n      const expandedValue = element[expandedProperty];\n\n      // compact @id\n      if(expandedProperty === '@id') {\n        let compactedValue = _asArray(expandedValue).map(\n          expandedIri => api.compactIri({\n            activeCtx,\n            iri: expandedIri,\n            relativeTo: {vocab: false},\n            base: options.base\n          }));\n        if(compactedValue.length === 1) {\n          compactedValue = compactedValue[0];\n        }\n\n        // use keyword alias and add value\n        const alias = api.compactIri(\n          {activeCtx, iri: '@id', relativeTo: {vocab: true}});\n\n        rval[alias] = compactedValue;\n        continue;\n      }\n\n      // compact @type(s)\n      if(expandedProperty === '@type') {\n        // resolve type values against previous context\n        let compactedValue = _asArray(expandedValue).map(\n          expandedIri => api.compactIri({\n            activeCtx: inputCtx,\n            iri: expandedIri,\n            relativeTo: {vocab: true}\n          }));\n        if(compactedValue.length === 1) {\n          compactedValue = compactedValue[0];\n        }\n\n        // use keyword alias and add value\n        const alias = api.compactIri(\n          {activeCtx, iri: '@type', relativeTo: {vocab: true}});\n        const container = _getContextValue(\n          activeCtx, alias, '@container') || [];\n\n        // treat as array for @type if @container includes @set\n        const typeAsSet =\n          container.includes('@set') &&\n          _processingMode(activeCtx, 1.1);\n        const isArray =\n          typeAsSet || (_isArray(compactedValue) && expandedValue.length === 0);\n        _addValue(rval, alias, compactedValue, {propertyIsArray: isArray});\n        continue;\n      }\n\n      // handle @reverse\n      if(expandedProperty === '@reverse') {\n        // recursively compact expanded value\n        const compactedValue = await api.compact({\n          activeCtx,\n          activeProperty: '@reverse',\n          element: expandedValue,\n          options\n        });\n\n        // handle double-reversed properties\n        for(const compactedProperty in compactedValue) {\n          if(activeCtx.mappings.has(compactedProperty) &&\n            activeCtx.mappings.get(compactedProperty).reverse) {\n            const value = compactedValue[compactedProperty];\n            const container = _getContextValue(\n              activeCtx, compactedProperty, '@container') || [];\n            const useArray = (\n              container.includes('@set') || !options.compactArrays);\n            _addValue(\n              rval, compactedProperty, value, {propertyIsArray: useArray});\n            delete compactedValue[compactedProperty];\n          }\n        }\n\n        if(Object.keys(compactedValue).length > 0) {\n          // use keyword alias and add value\n          const alias = api.compactIri({\n            activeCtx,\n            iri: expandedProperty,\n            relativeTo: {vocab: true}\n          });\n          _addValue(rval, alias, compactedValue);\n        }\n\n        continue;\n      }\n\n      if(expandedProperty === '@preserve') {\n        // compact using activeProperty\n        const compactedValue = await api.compact({\n          activeCtx,\n          activeProperty,\n          element: expandedValue,\n          options\n        });\n\n        if(!(_isArray(compactedValue) && compactedValue.length === 0)) {\n          _addValue(rval, expandedProperty, compactedValue);\n        }\n        continue;\n      }\n\n      // handle @index property\n      if(expandedProperty === '@index') {\n        // drop @index if inside an @index container\n        const container = _getContextValue(\n          activeCtx, activeProperty, '@container') || [];\n        if(container.includes('@index')) {\n          continue;\n        }\n\n        // use keyword alias and add value\n        const alias = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          relativeTo: {vocab: true}\n        });\n        _addValue(rval, alias, expandedValue);\n        continue;\n      }\n\n      // skip array processing for keywords that aren't\n      // @graph, @list, or @included\n      if(expandedProperty !== '@graph' && expandedProperty !== '@list' &&\n        expandedProperty !== '@included' &&\n        _isKeyword(expandedProperty)) {\n        // use keyword alias and add value as is\n        const alias = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          relativeTo: {vocab: true}\n        });\n        _addValue(rval, alias, expandedValue);\n        continue;\n      }\n\n      // Note: expanded value must be an array due to expansion algorithm.\n      if(!_isArray(expandedValue)) {\n        throw new JsonLdError(\n          'JSON-LD expansion error; expanded value must be an array.',\n          'jsonld.SyntaxError');\n      }\n\n      // preserve empty arrays\n      if(expandedValue.length === 0) {\n        const itemActiveProperty = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          value: expandedValue,\n          relativeTo: {vocab: true},\n          reverse: insideReverse\n        });\n        const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?\n          activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;\n        let nestResult = rval;\n        if(nestProperty) {\n          _checkNestProperty(activeCtx, nestProperty, options);\n          if(!_isObject(rval[nestProperty])) {\n            rval[nestProperty] = {};\n          }\n          nestResult = rval[nestProperty];\n        }\n        _addValue(\n          nestResult, itemActiveProperty, expandedValue, {\n            propertyIsArray: true\n          });\n      }\n\n      // recusively process array values\n      for(const expandedItem of expandedValue) {\n        // compact property and get container type\n        const itemActiveProperty = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          value: expandedItem,\n          relativeTo: {vocab: true},\n          reverse: insideReverse\n        });\n\n        // if itemActiveProperty is a @nest property, add values to nestResult,\n        // otherwise rval\n        const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?\n          activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;\n        let nestResult = rval;\n        if(nestProperty) {\n          _checkNestProperty(activeCtx, nestProperty, options);\n          if(!_isObject(rval[nestProperty])) {\n            rval[nestProperty] = {};\n          }\n          nestResult = rval[nestProperty];\n        }\n\n        const container = _getContextValue(\n          activeCtx, itemActiveProperty, '@container') || [];\n\n        // get simple @graph or @list value if appropriate\n        const isGraph = _isGraph(expandedItem);\n        const isList = _isList(expandedItem);\n        let inner;\n        if(isList) {\n          inner = expandedItem['@list'];\n        } else if(isGraph) {\n          inner = expandedItem['@graph'];\n        }\n\n        // recursively compact expanded item\n        let compactedItem = await api.compact({\n          activeCtx,\n          activeProperty: itemActiveProperty,\n          element: (isList || isGraph) ? inner : expandedItem,\n          options\n        });\n\n        // handle @list\n        if(isList) {\n          // ensure @list value is an array\n          if(!_isArray(compactedItem)) {\n            compactedItem = [compactedItem];\n          }\n\n          if(!container.includes('@list')) {\n            // wrap using @list alias\n            compactedItem = {\n              [api.compactIri({\n                activeCtx,\n                iri: '@list',\n                relativeTo: {vocab: true}\n              })]: compactedItem\n            };\n\n            // include @index from expanded @list, if any\n            if('@index' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@index',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@index'];\n            }\n          } else {\n            _addValue(nestResult, itemActiveProperty, compactedItem, {\n              valueIsArray: true,\n              allowDuplicate: true\n            });\n            continue;\n          }\n        }\n\n        // Graph object compaction cases\n        if(isGraph) {\n          if(container.includes('@graph') && (container.includes('@id') ||\n            container.includes('@index') && _isSimpleGraph(expandedItem))) {\n            // get or create the map object\n            let mapObject;\n            if(nestResult.hasOwnProperty(itemActiveProperty)) {\n              mapObject = nestResult[itemActiveProperty];\n            } else {\n              nestResult[itemActiveProperty] = mapObject = {};\n            }\n\n            // index on @id or @index or alias of @none\n            const key = (container.includes('@id') ?\n              expandedItem['@id'] : expandedItem['@index']) ||\n              api.compactIri({activeCtx, iri: '@none',\n                relativeTo: {vocab: true}});\n            // add compactedItem to map, using value of `@id` or a new blank\n            // node identifier\n\n            _addValue(\n              mapObject, key, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          } else if(container.includes('@graph') &&\n            _isSimpleGraph(expandedItem)) {\n            // container includes @graph but not @id or @index and value is a\n            // simple graph object add compact value\n            // if compactedItem contains multiple values, it is wrapped in\n            // `@included`\n            if(_isArray(compactedItem) && compactedItem.length > 1) {\n              compactedItem = {'@included': compactedItem};\n            }\n            _addValue(\n              nestResult, itemActiveProperty, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          } else {\n            // wrap using @graph alias, remove array if only one item and\n            // compactArrays not set\n            if(_isArray(compactedItem) && compactedItem.length === 1 &&\n              options.compactArrays) {\n              compactedItem = compactedItem[0];\n            }\n            compactedItem = {\n              [api.compactIri({\n                activeCtx,\n                iri: '@graph',\n                relativeTo: {vocab: true}\n              })]: compactedItem\n            };\n\n            // include @id from expanded graph, if any\n            if('@id' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@id',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@id'];\n            }\n\n            // include @index from expanded graph, if any\n            if('@index' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@index',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@index'];\n            }\n            _addValue(\n              nestResult, itemActiveProperty, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          }\n        } else if(container.includes('@language') ||\n          container.includes('@index') || container.includes('@id') ||\n          container.includes('@type')) {\n          // handle language and index maps\n          // get or create the map object\n          let mapObject;\n          if(nestResult.hasOwnProperty(itemActiveProperty)) {\n            mapObject = nestResult[itemActiveProperty];\n          } else {\n            nestResult[itemActiveProperty] = mapObject = {};\n          }\n\n          let key;\n          if(container.includes('@language')) {\n            // if container is a language map, simplify compacted value to\n            // a simple string\n            if(_isValue(compactedItem)) {\n              compactedItem = compactedItem['@value'];\n            }\n            key = expandedItem['@language'];\n          } else if(container.includes('@index')) {\n            const indexKey = _getContextValue(\n              activeCtx, itemActiveProperty, '@index') || '@index';\n            const containerKey = api.compactIri(\n              {activeCtx, iri: indexKey, relativeTo: {vocab: true}});\n            if(indexKey === '@index') {\n              key = expandedItem['@index'];\n              delete compactedItem[containerKey];\n            } else {\n              let others;\n              [key, ...others] = _asArray(compactedItem[indexKey] || []);\n              if(!_isString(key)) {\n                // Will use @none if it isn't a string.\n                key = null;\n              } else {\n                switch(others.length) {\n                  case 0:\n                    delete compactedItem[indexKey];\n                    break;\n                  case 1:\n                    compactedItem[indexKey] = others[0];\n                    break;\n                  default:\n                    compactedItem[indexKey] = others;\n                    break;\n                }\n              }\n            }\n          } else if(container.includes('@id')) {\n            const idKey = api.compactIri({activeCtx, iri: '@id',\n              relativeTo: {vocab: true}});\n            key = compactedItem[idKey];\n            delete compactedItem[idKey];\n          } else if(container.includes('@type')) {\n            const typeKey = api.compactIri({\n              activeCtx,\n              iri: '@type',\n              relativeTo: {vocab: true}\n            });\n            let types;\n            [key, ...types] = _asArray(compactedItem[typeKey] || []);\n            switch(types.length) {\n              case 0:\n                delete compactedItem[typeKey];\n                break;\n              case 1:\n                compactedItem[typeKey] = types[0];\n                break;\n              default:\n                compactedItem[typeKey] = types;\n                break;\n            }\n\n            // If compactedItem contains a single entry\n            // whose key maps to @id, recompact without @type\n            if(Object.keys(compactedItem).length === 1 &&\n              '@id' in expandedItem) {\n              compactedItem = await api.compact({\n                activeCtx,\n                activeProperty: itemActiveProperty,\n                element: {'@id': expandedItem['@id']},\n                options\n              });\n            }\n          }\n\n          // if compacting this value which has no key, index on @none\n          if(!key) {\n            key = api.compactIri({activeCtx, iri: '@none',\n              relativeTo: {vocab: true}});\n          }\n          // add compact value to map object using key from expanded value\n          // based on the container type\n          _addValue(\n            mapObject, key, compactedItem, {\n              propertyIsArray: container.includes('@set')\n            });\n        } else {\n          // use an array if: compactArrays flag is false,\n          // @container is @set or @list , value is an empty\n          // array, or key is @graph\n          const isArray = (!options.compactArrays ||\n            container.includes('@set') || container.includes('@list') ||\n            (_isArray(compactedItem) && compactedItem.length === 0) ||\n            expandedProperty === '@list' || expandedProperty === '@graph');\n\n          // add compact value\n          _addValue(\n            nestResult, itemActiveProperty, compactedItem,\n            {propertyIsArray: isArray});\n        }\n      }\n    }\n\n    return rval;\n  }\n\n  // only primitives remain which are already compact\n  return element;\n};\n\n/**\n * Compacts an IRI or keyword into a term or prefix if it can be. If the\n * IRI has an associated value it may be passed.\n *\n * @param activeCtx the active context to use.\n * @param iri the IRI to compact.\n * @param value the value to check or null.\n * @param relativeTo options for how to compact IRIs:\n *          vocab: true to split after @vocab, false not to.\n * @param reverse true if a reverse property is being compacted, false if not.\n * @param base the absolute URL to use for compacting document-relative IRIs.\n *\n * @return the compacted term, prefix, keyword alias, or the original IRI.\n */\napi.compactIri = ({\n  activeCtx,\n  iri,\n  value = null,\n  relativeTo = {vocab: false},\n  reverse = false,\n  base = null\n}) => {\n  // can't compact null\n  if(iri === null) {\n    return iri;\n  }\n\n  // if context is from a property term scoped context composed with a\n  // type-scoped context, then use the previous context instead\n  if(activeCtx.isPropertyTermScoped && activeCtx.previousContext) {\n    activeCtx = activeCtx.previousContext;\n  }\n\n  const inverseCtx = activeCtx.getInverse();\n\n  // if term is a keyword, it may be compacted to a simple alias\n  if(_isKeyword(iri) &&\n    iri in inverseCtx &&\n    '@none' in inverseCtx[iri] &&\n    '@type' in inverseCtx[iri]['@none'] &&\n    '@none' in inverseCtx[iri]['@none']['@type']) {\n    return inverseCtx[iri]['@none']['@type']['@none'];\n  }\n\n  // use inverse context to pick a term if iri is relative to vocab\n  if(relativeTo.vocab && iri in inverseCtx) {\n    const defaultLanguage = activeCtx['@language'] || '@none';\n\n    // prefer @index if available in value\n    const containers = [];\n    if(_isObject(value) && '@index' in value && !('@graph' in value)) {\n      containers.push('@index', '@index@set');\n    }\n\n    // if value is a preserve object, use its value\n    if(_isObject(value) && '@preserve' in value) {\n      value = value['@preserve'][0];\n    }\n\n    // prefer most specific container including @graph, prefering @set\n    // variations\n    if(_isGraph(value)) {\n      // favor indexmap if the graph is indexed\n      if('@index' in value) {\n        containers.push(\n          '@graph@index', '@graph@index@set', '@index', '@index@set');\n      }\n      // favor idmap if the graph is has an @id\n      if('@id' in value) {\n        containers.push(\n          '@graph@id', '@graph@id@set');\n      }\n      containers.push('@graph', '@graph@set', '@set');\n      // allow indexmap if the graph is not indexed\n      if(!('@index' in value)) {\n        containers.push(\n          '@graph@index', '@graph@index@set', '@index', '@index@set');\n      }\n      // allow idmap if the graph does not have an @id\n      if(!('@id' in value)) {\n        containers.push('@graph@id', '@graph@id@set');\n      }\n    } else if(_isObject(value) && !_isValue(value)) {\n      containers.push('@id', '@id@set', '@type', '@set@type');\n    }\n\n    // defaults for term selection based on type/language\n    let typeOrLanguage = '@language';\n    let typeOrLanguageValue = '@null';\n\n    if(reverse) {\n      typeOrLanguage = '@type';\n      typeOrLanguageValue = '@reverse';\n      containers.push('@set');\n    } else if(_isList(value)) {\n      // choose the most specific term that works for all elements in @list\n      // only select @list containers if @index is NOT in value\n      if(!('@index' in value)) {\n        containers.push('@list');\n      }\n      const list = value['@list'];\n      if(list.length === 0) {\n        // any empty list can be matched against any term that uses the\n        // @list container regardless of @type or @language\n        typeOrLanguage = '@any';\n        typeOrLanguageValue = '@none';\n      } else {\n        let commonLanguage = (list.length === 0) ? defaultLanguage : null;\n        let commonType = null;\n        for(let i = 0; i < list.length; ++i) {\n          const item = list[i];\n          let itemLanguage = '@none';\n          let itemType = '@none';\n          if(_isValue(item)) {\n            if('@direction' in item) {\n              const lang = (item['@language'] || '').toLowerCase();\n              const dir = item['@direction'];\n              itemLanguage = `${lang}_${dir}`;\n            } else if('@language' in item) {\n              itemLanguage = item['@language'].toLowerCase();\n            } else if('@type' in item) {\n              itemType = item['@type'];\n            } else {\n              // plain literal\n              itemLanguage = '@null';\n            }\n          } else {\n            itemType = '@id';\n          }\n          if(commonLanguage === null) {\n            commonLanguage = itemLanguage;\n          } else if(itemLanguage !== commonLanguage && _isValue(item)) {\n            commonLanguage = '@none';\n          }\n          if(commonType === null) {\n            commonType = itemType;\n          } else if(itemType !== commonType) {\n            commonType = '@none';\n          }\n          // there are different languages and types in the list, so choose\n          // the most generic term, no need to keep iterating the list\n          if(commonLanguage === '@none' && commonType === '@none') {\n            break;\n          }\n        }\n        commonLanguage = commonLanguage || '@none';\n        commonType = commonType || '@none';\n        if(commonType !== '@none') {\n          typeOrLanguage = '@type';\n          typeOrLanguageValue = commonType;\n        } else {\n          typeOrLanguageValue = commonLanguage;\n        }\n      }\n    } else {\n      if(_isValue(value)) {\n        if('@language' in value && !('@index' in value)) {\n          containers.push('@language', '@language@set');\n          typeOrLanguageValue = value['@language'];\n          const dir = value['@direction'];\n          if(dir) {\n            typeOrLanguageValue = `${typeOrLanguageValue}_${dir}`;\n          }\n        } else if('@direction' in value && !('@index' in value)) {\n          typeOrLanguageValue = `_${value['@direction']}`;\n        } else if('@type' in value) {\n          typeOrLanguage = '@type';\n          typeOrLanguageValue = value['@type'];\n        }\n      } else {\n        typeOrLanguage = '@type';\n        typeOrLanguageValue = '@id';\n      }\n      containers.push('@set');\n    }\n\n    // do term selection\n    containers.push('@none');\n\n    // an index map can be used to index values using @none, so add as a low\n    // priority\n    if(_isObject(value) && !('@index' in value)) {\n      // allow indexing even if no @index present\n      containers.push('@index', '@index@set');\n    }\n\n    // values without type or language can use @language map\n    if(_isValue(value) && Object.keys(value).length === 1) {\n      // allow indexing even if no @index present\n      containers.push('@language', '@language@set');\n    }\n\n    const term = _selectTerm(\n      activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue);\n    if(term !== null) {\n      return term;\n    }\n  }\n\n  // no term match, use @vocab if available\n  if(relativeTo.vocab) {\n    if('@vocab' in activeCtx) {\n      // determine if vocab is a prefix of the iri\n      const vocab = activeCtx['@vocab'];\n      if(iri.indexOf(vocab) === 0 && iri !== vocab) {\n        // use suffix as relative iri if it is not a term in the active context\n        const suffix = iri.substr(vocab.length);\n        if(!activeCtx.mappings.has(suffix)) {\n          return suffix;\n        }\n      }\n    }\n  }\n\n  // no term or @vocab match, check for possible CURIEs\n  let choice = null;\n  // TODO: make FastCurieMap a class with a method to do this lookup\n  const partialMatches = [];\n  let iriMap = activeCtx.fastCurieMap;\n  // check for partial matches of against `iri`, which means look until\n  // iri.length - 1, not full length\n  const maxPartialLength = iri.length - 1;\n  for(let i = 0; i < maxPartialLength && iri[i] in iriMap; ++i) {\n    iriMap = iriMap[iri[i]];\n    if('' in iriMap) {\n      partialMatches.push(iriMap[''][0]);\n    }\n  }\n  // check partial matches in reverse order to prefer longest ones first\n  for(let i = partialMatches.length - 1; i >= 0; --i) {\n    const entry = partialMatches[i];\n    const terms = entry.terms;\n    for(const term of terms) {\n      // a CURIE is usable if:\n      // 1. it has no mapping, OR\n      // 2. value is null, which means we're not compacting an @value, AND\n      //   the mapping matches the IRI\n      const curie = term + ':' + iri.substr(entry.iri.length);\n      const isUsableCurie = (activeCtx.mappings.get(term)._prefix &&\n        (!activeCtx.mappings.has(curie) ||\n        (value === null && activeCtx.mappings.get(curie)['@id'] === iri)));\n\n      // select curie if it is shorter or the same length but lexicographically\n      // less than the current choice\n      if(isUsableCurie && (choice === null ||\n        _compareShortestLeast(curie, choice) < 0)) {\n        choice = curie;\n      }\n    }\n  }\n\n  // return chosen curie\n  if(choice !== null) {\n    return choice;\n  }\n\n  // If iri could be confused with a compact IRI using a term in this context,\n  // signal an error\n  for(const [term, td] of activeCtx.mappings) {\n    if(td && td._prefix && iri.startsWith(term + ':')) {\n      throw new JsonLdError(\n        `Absolute IRI \"${iri}\" confused with prefix \"${term}\".`,\n        'jsonld.SyntaxError',\n        {code: 'IRI confused with prefix', context: activeCtx});\n    }\n  }\n\n  // compact IRI relative to base\n  if(!relativeTo.vocab) {\n    if('@base' in activeCtx) {\n      if(!activeCtx['@base']) {\n        // The None case preserves rval as potentially relative\n        return iri;\n      } else {\n        const _iri = _removeBase(_prependBase(base, activeCtx['@base']), iri);\n        return REGEX_KEYWORD.test(_iri) ? `./${_iri}` : _iri;\n      }\n    } else {\n      return _removeBase(base, iri);\n    }\n  }\n\n  // return IRI as is\n  return iri;\n};\n\n/**\n * Performs value compaction on an object with '@value' or '@id' as the only\n * property.\n *\n * @param activeCtx the active context.\n * @param activeProperty the active property that points to the value.\n * @param value the value to compact.\n * @param {Object} [options] - processing options.\n *\n * @return the compaction result.\n */\napi.compactValue = ({activeCtx, activeProperty, value, options}) => {\n  // value is a @value\n  if(_isValue(value)) {\n    // get context rules\n    const type = _getContextValue(activeCtx, activeProperty, '@type');\n    const language = _getContextValue(activeCtx, activeProperty, '@language');\n    const direction = _getContextValue(activeCtx, activeProperty, '@direction');\n    const container =\n      _getContextValue(activeCtx, activeProperty, '@container') || [];\n\n    // whether or not the value has an @index that must be preserved\n    const preserveIndex = '@index' in value && !container.includes('@index');\n\n    // if there's no @index to preserve ...\n    if(!preserveIndex && type !== '@none') {\n      // matching @type or @language specified in context, compact value\n      if(value['@type'] === type) {\n        return value['@value'];\n      }\n      if('@language' in value && value['@language'] === language &&\n         '@direction' in value && value['@direction'] === direction) {\n        return value['@value'];\n      }\n      if('@language' in value && value['@language'] === language) {\n        return value['@value'];\n      }\n      if('@direction' in value && value['@direction'] === direction) {\n        return value['@value'];\n      }\n    }\n\n    // return just the value of @value if all are true:\n    // 1. @value is the only key or @index isn't being preserved\n    // 2. there is no default language or @value is not a string or\n    //   the key has a mapping with a null @language\n    const keyCount = Object.keys(value).length;\n    const isValueOnlyKey = (keyCount === 1 ||\n      (keyCount === 2 && '@index' in value && !preserveIndex));\n    const hasDefaultLanguage = ('@language' in activeCtx);\n    const isValueString = _isString(value['@value']);\n    const hasNullMapping = (activeCtx.mappings.has(activeProperty) &&\n      activeCtx.mappings.get(activeProperty)['@language'] === null);\n    if(isValueOnlyKey &&\n      type !== '@none' &&\n      (!hasDefaultLanguage || !isValueString || hasNullMapping)) {\n      return value['@value'];\n    }\n\n    const rval = {};\n\n    // preserve @index\n    if(preserveIndex) {\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@index',\n        relativeTo: {vocab: true}\n      })] = value['@index'];\n    }\n\n    if('@type' in value) {\n      // compact @type IRI\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@type',\n        relativeTo: {vocab: true}\n      })] = api.compactIri(\n        {activeCtx, iri: value['@type'], relativeTo: {vocab: true}});\n    } else if('@language' in value) {\n      // alias @language\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@language',\n        relativeTo: {vocab: true}\n      })] = value['@language'];\n    }\n\n    if('@direction' in value) {\n      // alias @direction\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@direction',\n        relativeTo: {vocab: true}\n      })] = value['@direction'];\n    }\n\n    // alias @value\n    rval[api.compactIri({\n      activeCtx,\n      iri: '@value',\n      relativeTo: {vocab: true}\n    })] = value['@value'];\n\n    return rval;\n  }\n\n  // value is a subject reference\n  const expandedProperty = _expandIri(activeCtx, activeProperty, {vocab: true},\n    options);\n  const type = _getContextValue(activeCtx, activeProperty, '@type');\n  const compacted = api.compactIri({\n    activeCtx,\n    iri: value['@id'],\n    relativeTo: {vocab: type === '@vocab'},\n    base: options.base});\n\n  // compact to scalar\n  if(type === '@id' || type === '@vocab' || expandedProperty === '@graph') {\n    return compacted;\n  }\n\n  return {\n    [api.compactIri({\n      activeCtx,\n      iri: '@id',\n      relativeTo: {vocab: true}\n    })]: compacted\n  };\n};\n\n/**\n * Picks the preferred compaction term from the given inverse context entry.\n *\n * @param activeCtx the active context.\n * @param iri the IRI to pick the term for.\n * @param value the value to pick the term for.\n * @param containers the preferred containers.\n * @param typeOrLanguage either '@type' or '@language'.\n * @param typeOrLanguageValue the preferred value for '@type' or '@language'.\n *\n * @return the preferred term.\n */\nfunction _selectTerm(\n  activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue) {\n  if(typeOrLanguageValue === null) {\n    typeOrLanguageValue = '@null';\n  }\n\n  // preferences for the value of @type or @language\n  const prefs = [];\n\n  // determine prefs for @id based on whether or not value compacts to a term\n  if((typeOrLanguageValue === '@id' || typeOrLanguageValue === '@reverse') &&\n    _isObject(value) && '@id' in value) {\n    // prefer @reverse first\n    if(typeOrLanguageValue === '@reverse') {\n      prefs.push('@reverse');\n    }\n    // try to compact value to a term\n    const term = api.compactIri(\n      {activeCtx, iri: value['@id'], relativeTo: {vocab: true}});\n    if(activeCtx.mappings.has(term) &&\n      activeCtx.mappings.get(term) &&\n      activeCtx.mappings.get(term)['@id'] === value['@id']) {\n      // prefer @vocab\n      prefs.push.apply(prefs, ['@vocab', '@id']);\n    } else {\n      // prefer @id\n      prefs.push.apply(prefs, ['@id', '@vocab']);\n    }\n  } else {\n    prefs.push(typeOrLanguageValue);\n\n    // consider direction only\n    const langDir = prefs.find(el => el.includes('_'));\n    if(langDir) {\n      // consider _dir portion\n      prefs.push(langDir.replace(/^[^_]+_/, '_'));\n    }\n  }\n  prefs.push('@none');\n\n  const containerMap = activeCtx.inverse[iri];\n  for(const container of containers) {\n    // if container not available in the map, continue\n    if(!(container in containerMap)) {\n      continue;\n    }\n\n    const typeOrLanguageValueMap = containerMap[container][typeOrLanguage];\n    for(const pref of prefs) {\n      // if type/language option not available in the map, continue\n      if(!(pref in typeOrLanguageValueMap)) {\n        continue;\n      }\n\n      // select term\n      return typeOrLanguageValueMap[pref];\n    }\n  }\n\n  return null;\n}\n\n/**\n * The value of `@nest` in the term definition must either be `@nest`, or a term\n * which resolves to `@nest`.\n *\n * @param activeCtx the active context.\n * @param nestProperty a term in the active context or `@nest`.\n * @param {Object} [options] - processing options.\n */\nfunction _checkNestProperty(activeCtx, nestProperty, options) {\n  if(_expandIri(activeCtx, nestProperty, {vocab: true}, options) !== '@nest') {\n    throw new JsonLdError(\n      'JSON-LD compact error; nested property must have an @nest value ' +\n      'resolving to @nest.',\n      'jsonld.SyntaxError', {code: 'invalid @nest value'});\n  }\n}\n", "/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = jsonld => {\n  class JsonLdProcessor {\n    toString() {\n      return '[object JsonLdProcessor]';\n    }\n  }\n  Object.defineProperty(JsonLdProcessor, 'prototype', {\n    writable: false,\n    enumerable: false\n  });\n  Object.defineProperty(JsonLdProcessor.prototype, 'constructor', {\n    writable: true,\n    enumerable: false,\n    configurable: true,\n    value: JsonLdProcessor\n  });\n\n  // The Web IDL test harness will check the number of parameters defined in\n  // the functions below. The number of parameters must exactly match the\n  // required (non-optional) parameters of the JsonLdProcessor interface as\n  // defined here:\n  // https://www.w3.org/TR/json-ld-api/#the-jsonldprocessor-interface\n\n  JsonLdProcessor.compact = function(input, ctx) {\n    if(arguments.length < 2) {\n      return Promise.reject(\n        new TypeError('Could not compact, too few arguments.'));\n    }\n    return jsonld.compact(input, ctx);\n  };\n  JsonLdProcessor.expand = function(input) {\n    if(arguments.length < 1) {\n      return Promise.reject(\n        new TypeError('Could not expand, too few arguments.'));\n    }\n    return jsonld.expand(input);\n  };\n  JsonLdProcessor.flatten = function(input) {\n    if(arguments.length < 1) {\n      return Promise.reject(\n        new TypeError('Could not flatten, too few arguments.'));\n    }\n    return jsonld.flatten(input);\n  };\n\n  return JsonLdProcessor;\n};\n", "/**\n * A JavaScript implementation of the JSON-LD API.\n *\n * @author Dave Longley\n *\n * @license BSD 3-Clause License\n * Copyright (c) 2011-2022 Digital Bazaar, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *\n * Neither the name of the Digital Bazaar, Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\nconst canonize = require('rdf-canonize');\nconst platform = require('./platform');\nconst util = require('./util');\nconst ContextResolver = require('./ContextResolver');\nconst IdentifierIssuer = util.IdentifierIssuer;\nconst JsonLdError = require('./JsonLdError');\nconst LRU = require('lru-cache');\nconst NQuads = require('./NQuads');\n\nconst {expand: _expand} = require('./expand');\nconst {flatten: _flatten} = require('./flatten');\nconst {fromRDF: _fromRDF} = require('./fromRdf');\nconst {toRDF: _toRDF} = require('./toRdf');\n\nconst {\n  frameMergedOrDefault: _frameMergedOrDefault,\n  cleanupNull: _cleanupNull\n} = require('./frame');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString\n} = require('./types');\n\nconst {\n  isSubjectReference: _isSubjectReference,\n} = require('./graphTypes');\n\nconst {\n  expandIri: _expandIri,\n  getInitialContext: _getInitialContext,\n  process: _processContext,\n  processingMode: _processingMode\n} = require('./context');\n\nconst {\n  compact: _compact,\n  compactIri: _compactIri\n} = require('./compact');\n\nconst {\n  createNodeMap: _createNodeMap,\n  createMergedNodeMap: _createMergedNodeMap,\n  mergeNodeMaps: _mergeNodeMaps\n} = require('./nodeMap');\n\nconst {\n  logEventHandler: _logEventHandler,\n  logWarningEventHandler: _logWarningEventHandler,\n  safeEventHandler: _safeEventHandler,\n  setDefaultEventHandler: _setDefaultEventHandler,\n  setupEventHandler: _setupEventHandler,\n  strictEventHandler: _strictEventHandler,\n  unhandledEventHandler: _unhandledEventHandler\n} = require('./events');\n\n/* eslint-disable indent */\n// attaches jsonld API to the given object\nconst wrapper = function(jsonld) {\n\n/** Registered RDF dataset parsers hashed by content-type. */\nconst _rdfParsers = {};\n\n// resolved context cache\n// TODO: consider basing max on context size rather than number\nconst RESOLVED_CONTEXT_CACHE_MAX_SIZE = 100;\nconst _resolvedContextCache = new LRU({max: RESOLVED_CONTEXT_CACHE_MAX_SIZE});\n\n/* Core API */\n\n/**\n * Performs JSON-LD compaction.\n *\n * @param input the JSON-LD input to compact.\n * @param ctx the context to compact with.\n * @param [options] options to use:\n *          [base] the base IRI to use.\n *          [compactArrays] true to compact arrays to single values when\n *            appropriate, false not to (default: true).\n *          [compactToRelative] true to compact IRIs to be relative to document\n *            base, false to keep absolute (default: true)\n *          [graph] true to always output a top-level graph (default: false).\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [documentLoader(url, options)] the document loader.\n *          [framing] true if compaction is occuring during a framing operation.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the compacted output.\n */\njsonld.compact = async function(input, ctx, options) {\n  if(arguments.length < 2) {\n    throw new TypeError('Could not compact, too few arguments.');\n  }\n\n  if(ctx === null) {\n    throw new JsonLdError(\n      'The compaction context must not be null.',\n      'jsonld.CompactError', {code: 'invalid local context'});\n  }\n\n  // nothing to compact\n  if(input === null) {\n    return null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    compactArrays: true,\n    compactToRelative: true,\n    graph: false,\n    skipExpansion: false,\n    link: false,\n    issuer: new IdentifierIssuer('_:b'),\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n  if(options.link) {\n    // force skip expansion when linking, \"link\" is not part of the public\n    // API, it should only be called from framing\n    options.skipExpansion = true;\n  }\n  if(!options.compactToRelative) {\n    delete options.base;\n  }\n\n  // expand input\n  let expanded;\n  if(options.skipExpansion) {\n    expanded = input;\n  } else {\n    expanded = await jsonld.expand(input, options);\n  }\n\n  // process context\n  const activeCtx = await jsonld.processContext(\n    _getInitialContext(options), ctx, options);\n\n  // do compaction\n  let compacted = await _compact({\n    activeCtx,\n    element: expanded,\n    options\n  });\n\n  // perform clean up\n  if(options.compactArrays && !options.graph && _isArray(compacted)) {\n    if(compacted.length === 1) {\n      // simplify to a single item\n      compacted = compacted[0];\n    } else if(compacted.length === 0) {\n      // simplify to an empty object\n      compacted = {};\n    }\n  } else if(options.graph && _isObject(compacted)) {\n    // always use array if graph option is on\n    compacted = [compacted];\n  }\n\n  // follow @context key\n  if(_isObject(ctx) && '@context' in ctx) {\n    ctx = ctx['@context'];\n  }\n\n  // build output context\n  ctx = util.clone(ctx);\n  if(!_isArray(ctx)) {\n    ctx = [ctx];\n  }\n  // remove empty contexts\n  const tmp = ctx;\n  ctx = [];\n  for(let i = 0; i < tmp.length; ++i) {\n    if(!_isObject(tmp[i]) || Object.keys(tmp[i]).length > 0) {\n      ctx.push(tmp[i]);\n    }\n  }\n\n  // remove array if only one context\n  const hasContext = (ctx.length > 0);\n  if(ctx.length === 1) {\n    ctx = ctx[0];\n  }\n\n  // add context and/or @graph\n  if(_isArray(compacted)) {\n    // use '@graph' keyword\n    const graphAlias = _compactIri({\n      activeCtx, iri: '@graph', relativeTo: {vocab: true}\n    });\n    const graph = compacted;\n    compacted = {};\n    if(hasContext) {\n      compacted['@context'] = ctx;\n    }\n    compacted[graphAlias] = graph;\n  } else if(_isObject(compacted) && hasContext) {\n    // reorder keys so @context is first\n    const graph = compacted;\n    compacted = {'@context': ctx};\n    for(const key in graph) {\n      compacted[key] = graph[key];\n    }\n  }\n\n  return compacted;\n};\n\n/**\n * Performs JSON-LD expansion.\n *\n * @param input the JSON-LD input to expand.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [keepFreeFloatingNodes] true to keep free-floating nodes,\n *            false not to, defaults to false.\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the expanded output.\n */\njsonld.expand = async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not expand, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    keepFreeFloatingNodes: false,\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // build set of objects that may have @contexts to resolve\n  const toResolve = {};\n\n  // build set of contexts to process prior to expansion\n  const contextsToProcess = [];\n\n  // if an `expandContext` has been given ensure it gets resolved\n  if('expandContext' in options) {\n    const expandContext = util.clone(options.expandContext);\n    if(_isObject(expandContext) && '@context' in expandContext) {\n      toResolve.expandContext = expandContext;\n    } else {\n      toResolve.expandContext = {'@context': expandContext};\n    }\n    contextsToProcess.push(toResolve.expandContext);\n  }\n\n  // if input is a string, attempt to dereference remote document\n  let defaultBase;\n  if(!_isString(input)) {\n    // input is not a URL, do not need to retrieve it first\n    toResolve.input = util.clone(input);\n  } else {\n    // load remote doc\n    const remoteDoc = await jsonld.get(input, options);\n    defaultBase = remoteDoc.documentUrl;\n    toResolve.input = remoteDoc.document;\n    if(remoteDoc.contextUrl) {\n      // context included in HTTP link header and must be resolved\n      toResolve.remoteContext = {'@context': remoteDoc.contextUrl};\n      contextsToProcess.push(toResolve.remoteContext);\n    }\n  }\n\n  // set default base\n  if(!('base' in options)) {\n    options.base = defaultBase || '';\n  }\n\n  // process any additional contexts\n  let activeCtx = _getInitialContext(options);\n  for(const localCtx of contextsToProcess) {\n    activeCtx = await _processContext({activeCtx, localCtx, options});\n  }\n\n  // expand resolved input\n  let expanded = await _expand({\n    activeCtx,\n    element: toResolve.input,\n    options\n  });\n\n  // optimize away @graph with no other properties\n  if(_isObject(expanded) && ('@graph' in expanded) &&\n    Object.keys(expanded).length === 1) {\n    expanded = expanded['@graph'];\n  } else if(expanded === null) {\n    expanded = [];\n  }\n\n  // normalize to an array\n  if(!_isArray(expanded)) {\n    expanded = [expanded];\n  }\n\n  return expanded;\n};\n\n/**\n * Performs JSON-LD flattening.\n *\n * @param input the JSON-LD to flatten.\n * @param ctx the context to use to compact the flattened output, or null.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [documentLoader(url, options)] the document loader.\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the flattened output.\n */\njsonld.flatten = async function(input, ctx, options) {\n  if(arguments.length < 1) {\n    return new TypeError('Could not flatten, too few arguments.');\n  }\n\n  if(typeof ctx === 'function') {\n    ctx = null;\n  } else {\n    ctx = ctx || null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  // do flattening\n  const flattened = _flatten(expanded);\n\n  if(ctx === null) {\n    // no compaction required\n    return flattened;\n  }\n\n  // compact result (force @graph option to true, skip expansion)\n  options.graph = true;\n  options.skipExpansion = true;\n  const compacted = await jsonld.compact(flattened, ctx, options);\n\n  return compacted;\n};\n\n/**\n * Performs JSON-LD framing.\n *\n * @param input the JSON-LD input to frame.\n * @param frame the JSON-LD frame to use.\n * @param [options] the framing options.\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [embed] default @embed flag: '@last', '@always', '@never', '@link'\n *            (default: '@last').\n *          [explicit] default @explicit flag (default: false).\n *          [requireAll] default @requireAll flag (default: true).\n *          [omitDefault] default @omitDefault flag (default: false).\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the framed output.\n */\njsonld.frame = async function(input, frame, options) {\n  if(arguments.length < 2) {\n    throw new TypeError('Could not frame, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    embed: '@once',\n    explicit: false,\n    requireAll: false,\n    omitDefault: false,\n    bnodesToClear: [],\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // if frame is a string, attempt to dereference remote document\n  if(_isString(frame)) {\n    // load remote doc\n    const remoteDoc = await jsonld.get(frame, options);\n    frame = remoteDoc.document;\n\n    if(remoteDoc.contextUrl) {\n      // inject link header @context into frame\n      let ctx = frame['@context'];\n      if(!ctx) {\n        ctx = remoteDoc.contextUrl;\n      } else if(_isArray(ctx)) {\n        ctx.push(remoteDoc.contextUrl);\n      } else {\n        ctx = [ctx, remoteDoc.contextUrl];\n      }\n      frame['@context'] = ctx;\n    }\n  }\n\n  const frameContext = frame ? frame['@context'] || {} : {};\n\n  // process context\n  const activeCtx = await jsonld.processContext(\n    _getInitialContext(options), frameContext, options);\n\n  // mode specific defaults\n  if(!options.hasOwnProperty('omitGraph')) {\n    options.omitGraph = _processingMode(activeCtx, 1.1);\n  }\n  if(!options.hasOwnProperty('pruneBlankNodeIdentifiers')) {\n    options.pruneBlankNodeIdentifiers = _processingMode(activeCtx, 1.1);\n  }\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  // expand frame\n  const opts = {...options};\n  opts.isFrame = true;\n  opts.keepFreeFloatingNodes = true;\n  const expandedFrame = await jsonld.expand(frame, opts);\n\n  // if the unexpanded frame includes a key expanding to @graph, frame the\n  // default graph, otherwise, the merged graph\n  const frameKeys = Object.keys(frame)\n    .map(key => _expandIri(activeCtx, key, {vocab: true}));\n  opts.merged = !frameKeys.includes('@graph');\n  opts.is11 = _processingMode(activeCtx, 1.1);\n\n  // do framing\n  const framed = _frameMergedOrDefault(expanded, expandedFrame, opts);\n\n  opts.graph = !options.omitGraph;\n  opts.skipExpansion = true;\n  opts.link = {};\n  opts.framing = true;\n  let compacted = await jsonld.compact(framed, frameContext, opts);\n\n  // replace @null with null, compacting arrays\n  opts.link = {};\n  compacted = _cleanupNull(compacted, opts);\n\n  return compacted;\n};\n\n/**\n * **Experimental**\n *\n * Links a JSON-LD document's nodes in memory.\n *\n * @param input the JSON-LD document to link.\n * @param [ctx] the JSON-LD context to apply.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the linked output.\n */\njsonld.link = async function(input, ctx, options) {\n  // API matches running frame with a wildcard frame and embed: '@link'\n  // get arguments\n  const frame = {};\n  if(ctx) {\n    frame['@context'] = ctx;\n  }\n  frame['@embed'] = '@link';\n  return jsonld.frame(input, frame, options);\n};\n\n/**\n * Performs RDF dataset normalization on the given input. The input is JSON-LD\n * unless the 'inputFormat' option is used. The output is an RDF dataset\n * unless the 'format' option is used.\n *\n * Note: Canonicalization sets `safe` to `true` and `base` to `null` by\n * default in order to produce safe outputs and \"fail closed\" by default. This\n * is different from the other API transformations in this version which\n * allow unsafe defaults (for cryptographic usage) in order to comply with the\n * JSON-LD 1.1 specification.\n *\n * @param input the input to normalize as JSON-LD or as a format specified by\n *          the 'inputFormat' option.\n * @param [options] the options to use:\n *          [algorithm] the normalization algorithm to use, `URDNA2015` or\n *            `URGNA2012` (default: `URDNA2015`).\n *          [base] the base IRI to use (default: `null`).\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [inputFormat] the format if input is not JSON-LD:\n *            'application/n-quads' for N-Quads.\n *          [format] the format if output is a string:\n *            'application/n-quads' for N-Quads.\n *          [documentLoader(url, options)] the document loader.\n *          [useNative] true to use a native canonize algorithm\n *          [safe] true to use safe mode. (default: true).\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the normalized output.\n */\njsonld.normalize = jsonld.canonize = async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not canonize, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : null,\n    algorithm: 'URDNA2015',\n    skipExpansion: false,\n    safe: true,\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n  if('inputFormat' in options) {\n    if(options.inputFormat !== 'application/n-quads' &&\n      options.inputFormat !== 'application/nquads') {\n      throw new JsonLdError(\n        'Unknown canonicalization input format.',\n        'jsonld.CanonizeError');\n    }\n    // TODO: `await` for async parsers\n    const parsedInput = NQuads.parse(input);\n\n    // do canonicalization\n    return canonize.canonize(parsedInput, options);\n  }\n\n  // convert to RDF dataset then do normalization\n  const opts = {...options};\n  delete opts.format;\n  opts.produceGeneralizedRdf = false;\n  const dataset = await jsonld.toRDF(input, opts);\n\n  // do canonicalization\n  return canonize.canonize(dataset, options);\n};\n\n/**\n * Converts an RDF dataset to JSON-LD.\n *\n * @param dataset a serialized string of RDF in a format specified by the\n *          format option or an RDF dataset to convert.\n * @param [options] the options to use:\n *          [format] the format if dataset param must first be parsed:\n *            'application/n-quads' for N-Quads (default).\n *          [rdfParser] a custom RDF-parser to use to parse the dataset.\n *          [useRdfType] true to use rdf:type, false to use @type\n *            (default: false).\n *          [useNativeTypes] true to convert XSD types into native types\n *            (boolean, integer, double), false not to (default: false).\n *          [rdfDirection] 'i18n-datatype' to support RDF transformation of\n *             @direction (default: null).\n *          [safe] true to use safe mode. (default: false)\n *\n * @return a Promise that resolves to the JSON-LD document.\n */\njsonld.fromRDF = async function(dataset, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not convert from RDF, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    format: _isString(dataset) ? 'application/n-quads' : undefined\n  });\n\n  const {format} = options;\n  let {rdfParser} = options;\n\n  // handle special format\n  if(format) {\n    // check supported formats\n    rdfParser = rdfParser || _rdfParsers[format];\n    if(!rdfParser) {\n      throw new JsonLdError(\n        'Unknown input format.',\n        'jsonld.UnknownFormat', {format});\n    }\n  } else {\n    // no-op parser, assume dataset already parsed\n    rdfParser = () => dataset;\n  }\n\n  // rdfParser must be synchronous or return a promise, no callback support\n  const parsedDataset = await rdfParser(dataset);\n  return _fromRDF(parsedDataset, options);\n};\n\n/**\n * Outputs the RDF dataset found in the given JSON-LD object.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [format] the format to use to output a string:\n *            'application/n-quads' for N-Quads.\n *          [produceGeneralizedRdf] true to output generalized RDF, false\n *            to produce only standard RDF (default: false).\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the RDF dataset.\n */\njsonld.toRDF = async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not convert to RDF, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    skipExpansion: false,\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // TODO: support toRDF custom map?\n  let expanded;\n  if(options.skipExpansion) {\n    expanded = input;\n  } else {\n    // expand input\n    expanded = await jsonld.expand(input, options);\n  }\n\n  // output RDF dataset\n  const dataset = _toRDF(expanded, options);\n  if(options.format) {\n    if(options.format === 'application/n-quads' ||\n      options.format === 'application/nquads') {\n      return NQuads.serialize(dataset);\n    }\n    throw new JsonLdError(\n      'Unknown output format.',\n      'jsonld.UnknownFormat', {format: options.format});\n  }\n\n  return dataset;\n};\n\n/**\n * **Experimental**\n *\n * Recursively flattens the nodes in the given JSON-LD input into a merged\n * map of node ID => node. All graphs will be merged into the default graph.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *          [documentLoader(url, options)] the document loader.\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the merged node map.\n */\njsonld.createNodeMap = async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not create node map, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  return _createMergedNodeMap(expanded, options);\n};\n\n/**\n * **Experimental**\n *\n * Merges two or more JSON-LD documents into a single flattened document.\n *\n * @param docs the JSON-LD documents to merge together.\n * @param ctx the context to use to compact the merged result, or null.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *          [mergeNodes] true to merge properties for nodes with the same ID,\n *            false to ignore new properties for nodes with the same ID once\n *            the ID has been defined; note that this may not prevent merging\n *            new properties where a node is in the `object` position\n *            (default: true).\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the merged output.\n */\njsonld.merge = async function(docs, ctx, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not merge, too few arguments.');\n  }\n  if(!_isArray(docs)) {\n    throw new TypeError('Could not merge, \"docs\" must be an array.');\n  }\n\n  if(typeof ctx === 'function') {\n    ctx = null;\n  } else {\n    ctx = ctx || null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // expand all documents\n  const expanded = await Promise.all(docs.map(doc => {\n    const opts = {...options};\n    return jsonld.expand(doc, opts);\n  }));\n\n  let mergeNodes = true;\n  if('mergeNodes' in options) {\n    mergeNodes = options.mergeNodes;\n  }\n\n  const issuer = options.issuer || new IdentifierIssuer('_:b');\n  const graphs = {'@default': {}};\n\n  for(let i = 0; i < expanded.length; ++i) {\n    // uniquely relabel blank nodes\n    const doc = util.relabelBlankNodes(expanded[i], {\n      issuer: new IdentifierIssuer('_:b' + i + '-')\n    });\n\n    // add nodes to the shared node map graphs if merging nodes, to a\n    // separate graph set if not\n    const _graphs = (mergeNodes || i === 0) ? graphs : {'@default': {}};\n    _createNodeMap(doc, _graphs, '@default', issuer);\n\n    if(_graphs !== graphs) {\n      // merge document graphs but don't merge existing nodes\n      for(const graphName in _graphs) {\n        const _nodeMap = _graphs[graphName];\n        if(!(graphName in graphs)) {\n          graphs[graphName] = _nodeMap;\n          continue;\n        }\n        const nodeMap = graphs[graphName];\n        for(const key in _nodeMap) {\n          if(!(key in nodeMap)) {\n            nodeMap[key] = _nodeMap[key];\n          }\n        }\n      }\n    }\n  }\n\n  // add all non-default graphs to default graph\n  const defaultGraph = _mergeNodeMaps(graphs);\n\n  // produce flattened output\n  const flattened = [];\n  const keys = Object.keys(defaultGraph).sort();\n  for(let ki = 0; ki < keys.length; ++ki) {\n    const node = defaultGraph[keys[ki]];\n    // only add full subjects to top-level\n    if(!_isSubjectReference(node)) {\n      flattened.push(node);\n    }\n  }\n\n  if(ctx === null) {\n    return flattened;\n  }\n\n  // compact result (force @graph option to true, skip expansion)\n  options.graph = true;\n  options.skipExpansion = true;\n  const compacted = await jsonld.compact(flattened, ctx, options);\n\n  return compacted;\n};\n\n/**\n * The default document loader for external documents.\n *\n * @param url the URL to load.\n *\n * @return a promise that resolves to the remote document.\n */\nObject.defineProperty(jsonld, 'documentLoader', {\n  get: () => jsonld._documentLoader,\n  set: v => jsonld._documentLoader = v\n});\n// default document loader not implemented\njsonld.documentLoader = async url => {\n  throw new JsonLdError(\n    'Could not retrieve a JSON-LD document from the URL. URL ' +\n    'dereferencing not implemented.', 'jsonld.LoadDocumentError',\n    {code: 'loading document failed', url});\n};\n\n/**\n * Gets a remote JSON-LD document using the default document loader or\n * one given in the passed options.\n *\n * @param url the URL to fetch.\n * @param [options] the options to use:\n *          [documentLoader] the document loader to use.\n *\n * @return a Promise that resolves to the retrieved remote document.\n */\njsonld.get = async function(url, options) {\n  let load;\n  if(typeof options.documentLoader === 'function') {\n    load = options.documentLoader;\n  } else {\n    load = jsonld.documentLoader;\n  }\n\n  const remoteDoc = await load(url);\n\n  try {\n    if(!remoteDoc.document) {\n      throw new JsonLdError(\n        'No remote document found at the given URL.',\n        'jsonld.NullRemoteDocument');\n    }\n    if(_isString(remoteDoc.document)) {\n      remoteDoc.document = JSON.parse(remoteDoc.document);\n    }\n  } catch(e) {\n    throw new JsonLdError(\n      'Could not retrieve a JSON-LD document from the URL.',\n      'jsonld.LoadDocumentError', {\n        code: 'loading document failed',\n        cause: e,\n        remoteDoc\n      });\n  }\n\n  return remoteDoc;\n};\n\n/**\n * Processes a local context, resolving any URLs as necessary, and returns a\n * new active context.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context to process.\n * @param [options] the options to use:\n *          [documentLoader(url, options)] the document loader.\n *          [safe] true to use safe mode. (default: false)\n *          [contextResolver] internal use only.\n *\n * @return a Promise that resolves to the new active context.\n */\njsonld.processContext = async function(\n  activeCtx, localCtx, options) {\n  // set default options\n  options = _setDefaults(options, {\n    base: '',\n    contextResolver: new ContextResolver(\n      {sharedCache: _resolvedContextCache})\n  });\n\n  // return initial context early for null context\n  if(localCtx === null) {\n    return _getInitialContext(options);\n  }\n\n  // get URLs in localCtx\n  localCtx = util.clone(localCtx);\n  if(!(_isObject(localCtx) && '@context' in localCtx)) {\n    localCtx = {'@context': localCtx};\n  }\n\n  return _processContext({activeCtx, localCtx, options});\n};\n\n// backwards compatibility\njsonld.getContextValue = require('./context').getContextValue;\n\n/**\n * Document loaders.\n */\njsonld.documentLoaders = {};\n\n/**\n * Assigns the default document loader for external document URLs to a built-in\n * default. Supported types currently include: 'xhr' and 'node'.\n *\n * @param type the type to set.\n * @param [params] the parameters required to use the document loader.\n */\njsonld.useDocumentLoader = function(type) {\n  if(!(type in jsonld.documentLoaders)) {\n    throw new JsonLdError(\n      'Unknown document loader type: \"' + type + '\"',\n      'jsonld.UnknownDocumentLoader',\n      {type});\n  }\n\n  // set document loader\n  jsonld.documentLoader = jsonld.documentLoaders[type].apply(\n    jsonld, Array.prototype.slice.call(arguments, 1));\n};\n\n/**\n * Registers an RDF dataset parser by content-type, for use with\n * jsonld.fromRDF. An RDF dataset parser will always be given one parameter,\n * a string of input. An RDF dataset parser can be synchronous or\n * asynchronous (by returning a promise).\n *\n * @param contentType the content-type for the parser.\n * @param parser(input) the parser function (takes a string as a parameter\n *          and either returns an RDF dataset or a Promise that resolves to one.\n */\njsonld.registerRDFParser = function(contentType, parser) {\n  _rdfParsers[contentType] = parser;\n};\n\n/**\n * Unregisters an RDF dataset parser by content-type.\n *\n * @param contentType the content-type for the parser.\n */\njsonld.unregisterRDFParser = function(contentType) {\n  delete _rdfParsers[contentType];\n};\n\n// register the N-Quads RDF parser\njsonld.registerRDFParser('application/n-quads', NQuads.parse);\njsonld.registerRDFParser('application/nquads', NQuads.parse);\n\n/* URL API */\njsonld.url = require('./url');\n\n/* Events API and handlers */\njsonld.logEventHandler = _logEventHandler;\njsonld.logWarningEventHandler = _logWarningEventHandler;\njsonld.safeEventHandler = _safeEventHandler;\njsonld.setDefaultEventHandler = _setDefaultEventHandler;\njsonld.strictEventHandler = _strictEventHandler;\njsonld.unhandledEventHandler = _unhandledEventHandler;\n\n/* Utility API */\njsonld.util = util;\n// backwards compatibility\nObject.assign(jsonld, util);\n\n// reexpose API as jsonld.promises for backwards compatability\njsonld.promises = jsonld;\n\n// backwards compatibility\njsonld.RequestQueue = require('./RequestQueue');\n\n/* WebIDL API */\njsonld.JsonLdProcessor = require('./JsonLdProcessor')(jsonld);\n\nplatform.setupGlobals(jsonld);\nplatform.setupDocumentLoaders(jsonld);\n\nfunction _setDefaults(options, {\n  documentLoader = jsonld.documentLoader,\n  ...defaults\n}) {\n  // fail if obsolete options present\n  if(options && 'compactionMap' in options) {\n    throw new JsonLdError(\n      '\"compactionMap\" not supported.',\n      'jsonld.OptionsError');\n  }\n  if(options && 'expansionMap' in options) {\n    throw new JsonLdError(\n      '\"expansionMap\" not supported.',\n      'jsonld.OptionsError');\n  }\n  return Object.assign(\n    {},\n    {documentLoader},\n    defaults,\n    options,\n    {eventHandler: _setupEventHandler({options})}\n  );\n}\n\n// end of jsonld API `wrapper` factory\nreturn jsonld;\n};\n\n// external APIs:\n\n// used to generate a new jsonld API instance\nconst factory = function() {\n  return wrapper(function() {\n    return factory();\n  });\n};\n\n// wrap the main jsonld API instance\nwrapper(factory);\n// export API\nmodule.exports = factory;\n", "/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport {Buffer} from 'buffer';\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nexport function StringDecoder(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n", "export { Value } from './lib/types/types';\nexport { MtValue } from './lib/mt-value';\nexport { Merklizer } from './lib/merklizer';\nexport { Path } from './lib/path';\nexport { Hasher, Options } from './lib/types/types';\nexport { MerklizationConstants } from './lib/constants';\nexport { getDocumentLoader } from './lib/options';\nexport { DocumentLoader } from './loaders/jsonld-loader';\n", "import { Temporal } from '@js-temporal/polyfill';\nimport { DocumentLoader } from '../../loaders/jsonld-loader';\nimport { JsonLdDocument } from 'jsonld/jsonld';\nimport { Options as jsonLDOpts } from 'jsonld/jsonld-spec';\n\nexport interface Options {\n  hasher?: Hasher;\n  ipfsNodeURL?: string;\n  ipfsGatewayURL?: string;\n  documentLoader?: DocumentLoader;\n}\n\nexport interface Hasher {\n  hash: (inp: bigint[]) => Promise<bigint>;\n  hashBytes: (b: Uint8Array) => Promise<bigint>;\n  prime: () => bigint;\n}\n\nexport enum NodeType {\n  BlankNode = 'BlankNode',\n  IRI = 'NamedNode',\n  Literal = 'Literal',\n  Undefined = 'Undefined'\n}\n\nexport enum XSDNS {\n  Boolean = 'http://www.w3.org/2001/XMLSchema#boolean',\n  Integer = 'http://www.w3.org/2001/XMLSchema#integer',\n  NonNegativeInteger = 'http://www.w3.org/2001/XMLSchema#nonNegativeInteger',\n  NonPositiveInteger = 'http://www.w3.org/2001/XMLSchema#nonPositiveInteger',\n  NegativeInteger = 'http://www.w3.org/2001/XMLSchema#negativeInteger',\n  PositiveInteger = 'http://www.w3.org/2001/XMLSchema#positiveInteger',\n  DateTime = 'http://www.w3.org/2001/XMLSchema#dateTime',\n  Double = 'http://www.w3.org/2001/XMLSchema#double'\n}\nexport const isDouble = (v: number) => String(v).includes('.') || Math.abs(v) >= 1e21;\n\nexport const canonicalDouble = (v: number) => v.toExponential(15).replace(/(\\d)0*e\\+?/, '$1E');\n\nexport type Value = boolean | number | Temporal.Instant | string;\n\nexport type Parts = Array<string | number>;\n\nexport interface ParsedCtx {\n  mappings: Map<string, object | string>;\n}\n\ndeclare module 'jsonld' {\n  function processContext(\n    activeCtx: ParsedCtx | null,\n    localCtx: JsonLdDocument | null,\n    opts: jsonLDOpts\n  ): Promise<ParsedCtx>;\n}\n", "import { MerklizationConstants } from './constants';\nimport { Hasher } from './types/types';\nimport { Value } from './types/types';\nimport { DEFAULT_HASHER } from './poseidon';\nimport { Temporal } from '@js-temporal/polyfill';\n\nconst bytesEncoder = new TextEncoder();\n\nexport class MtValue {\n  constructor(public readonly value: Value, private readonly h: Hasher = DEFAULT_HASHER) {}\n\n  isString(): boolean {\n    return typeof this.value === 'string';\n  }\n\n  asString(): string {\n    if (!this.isString()) {\n      throw MerklizationConstants.ERRORS.MT_VALUE_INCORRECT_TYPE;\n    }\n    return this.value.toString();\n  }\n\n  isTime(): boolean {\n    return this.value instanceof Temporal.Instant;\n  }\n\n  asTime(): Temporal.Instant {\n    if (!this.isTime()) {\n      throw MerklizationConstants.ERRORS.MT_VALUE_INCORRECT_TYPE;\n    }\n    return this.value as Temporal.Instant;\n  }\n\n  isNumber(): boolean {\n    return typeof this.value === 'number';\n  }\n\n  asNumber(): number {\n    if (!this.isNumber()) {\n      throw MerklizationConstants.ERRORS.MT_VALUE_INCORRECT_TYPE;\n    }\n    return this.value as number;\n  }\n\n  isBool(): boolean {\n    return typeof this.value === 'boolean';\n  }\n\n  asBool(): boolean {\n    if (!this.isBool()) {\n      throw MerklizationConstants.ERRORS.MT_VALUE_INCORRECT_TYPE;\n    }\n    return this.value as boolean;\n  }\n\n  mtEntry(): Promise<bigint> {\n    return MtValue.mkValueMtEntry(this.h, this.value);\n  }\n\n  static mkValueMtEntry = (h: Hasher, v: Value): Promise<bigint> => {\n    switch (typeof v) {\n      case 'number':\n        return MtValue.mkValueInt(h, v);\n      case 'string':\n        return MtValue.mkValueString(h, v);\n      case 'boolean':\n        return MtValue.mkValueBool(h, v);\n      default: {\n        if (v instanceof Temporal.Instant) {\n          return MtValue.mkValueTime(h, v);\n        }\n        throw new Error(`error: unexpected type ${typeof v}`);\n      }\n    }\n  };\n\n  static async mkValueInt(h: Hasher, v: number | bigint): Promise<bigint> {\n    if (v >= 0) {\n      return BigInt(v);\n    }\n    return h.prime() + BigInt(v);\n  }\n\n  static mkValueUInt = (h: Hasher, v: bigint): bigint => {\n    return BigInt.asUintN(64, v);\n  };\n\n  static mkValueBool = (h: Hasher, v: boolean): Promise<bigint> => {\n    if (v) {\n      return h.hash([BigInt.asIntN(64, BigInt(1))]);\n    }\n    return h.hash([BigInt.asIntN(64, BigInt(0))]);\n  };\n\n  static mkValueString = (h: Hasher, v: string): Promise<bigint> => {\n    return h.hashBytes(bytesEncoder.encode(v));\n  };\n\n  static mkValueTime = async (h: Hasher, v: Temporal.Instant): Promise<bigint> => {\n    // convert unixTimeStamp from ms -> ns as in go implementation\n    return this.mkValueInt(h, v.epochNanoseconds);\n  };\n}\n", "export const MerklizationConstants = Object.freeze({\n  ERRORS: {\n    CONTEXT_NOT_DEFINED: new Error('error: context not defined on the object'),\n    PARSED_CONTEXT_IS_NULL: new Error('error: parsed context is null'),\n    TERM_IS_NOT_DEFINED: new Error('error: term is not defined'),\n    NO_ID_ATTR: new Error('error: no @id attribute is defined'),\n    CTX_TYP_IS_EMPTY: new Error('error: ctx type is empty'),\n    FIELD_PATH_IS_EMPTY: new Error('error: filed path is empty'),\n    UNEXPECTED_ARR_ELEMENT: new Error('error: unexpected array elements'),\n    INVALID_REFERENCE_TYPE: new Error('error: invalid reference type'),\n    MULTIPLE_PARENTS_FOUND: new Error('error: multiple parents found'),\n    PARENT_NOT_FOUND: new Error('error: parent not found'),\n    GRAPH_NOT_FOUND: new Error('error: graph not found'),\n    QUAD_NOT_FOUND: new Error('error: quad not found'),\n    MT_VALUE_INCORRECT_TYPE: new Error('error: incorrect type')\n  },\n  DEFAULT_GRAPH_NODE_NAME: '@default',\n  DEFAULT_GRAPH_TERM_TYPE: 'DefaultGraph',\n  QUADS_FORMAT: 'application/n-quads',\n  DIGITS_ONLY_REGEX: /^\\d+$/,\n  Q: BigInt('21888242871839275222246405745257275088548364400416034343698204186575808495617')\n});\n", "import { MerklizationConstants } from './constants';\nimport { poseidon } from '@iden3/js-crypto';\nimport { Hasher } from './types/types';\n\nexport class PoseidonHasher implements Hasher {\n  constructor(private readonly _hasher = poseidon) {}\n\n  async hash(inp: bigint[]): Promise<bigint> {\n    return this._hasher.hash(inp);\n  }\n\n  async hashBytes(b: Uint8Array): Promise<bigint> {\n    return this._hasher.hashBytes(b);\n  }\n\n  prime(): bigint {\n    return MerklizationConstants.Q;\n  }\n}\n\nexport const DEFAULT_HASHER = new PoseidonHasher();\n", null, null, null, null, null, null, "\nimport * as _Scalar  from \"./src/scalar.js\";\nexport const Scalar=_Scalar;\n\nexport {default as PolField} from \"./src/polfield.js\";\nexport {default as F1Field} from \"./src/f1field.js\";\nexport {default as F2Field} from \"./src/f2field.js\";\nexport {default as F3Field} from \"./src/f3field.js\";\n\nexport {default as ZqField} from \"./src/f1field.js\";\n\nexport {default as EC} from \"./src/ec.js\";\n\nexport {default as buildBn128} from \"./src/bn128.js\";\nexport {default as buildBls12381} from \"./src/bls12381.js\";\n\nimport * as _utils from \"./src/utils.js\";\nexport const utils = _utils;\nexport {default as ChaCha} from \"./src/chacha.js\";\n\nexport {default as BigBuffer} from \"./src/bigbuffer.js\";\n\nexport {getCurveFromR, getCurveFromQ, getCurveFromName} from \"./src/curves.js\";\n\n", "\n/* global BigInt */\nconst hexLen = [ 0, 1, 2, 2, 3, 3, 3, 3, 4 ,4 ,4 ,4 ,4 ,4 ,4 ,4];\n\nexport function fromString(s, radix) {\n    if ((!radix)||(radix==10)) {\n        return BigInt(s);\n    } else if (radix==16) {\n        if (s.slice(0,2) == \"0x\") {\n            return BigInt(s);\n        } else {\n            return BigInt(\"0x\"+s);\n        }\n    }\n}\n\nexport const e = fromString;\n\nexport function fromArray(a, radix) {\n    let acc =BigInt(0);\n    radix = BigInt(radix);\n    for (let i=0; i<a.length; i++) {\n        acc = acc*radix + BigInt(a[i]);\n    }\n    return acc;\n}\n\nexport function bitLength(a) {\n    const aS =a.toString(16);\n    return (aS.length-1)*4 +hexLen[parseInt(aS[0], 16)];\n}\n\nexport function isNegative(a) {\n    return BigInt(a) < BigInt(0);\n}\n\nexport function isZero(a) {\n    return !a;\n}\n\nexport function shiftLeft(a, n) {\n    return BigInt(a) << BigInt(n);\n}\n\nexport function shiftRight(a, n) {\n    return BigInt(a) >> BigInt(n);\n}\n\nexport const shl = shiftLeft;\nexport const shr = shiftRight;\n\nexport function isOdd(a) {\n    return (BigInt(a) & BigInt(1)) == BigInt(1);\n}\n\n\nexport function naf(n) {\n    let E = BigInt(n);\n    const res = [];\n    while (E) {\n        if (E & BigInt(1)) {\n            const z = 2 - Number(E % BigInt(4));\n            res.push( z );\n            E = E - BigInt(z);\n        } else {\n            res.push( 0 );\n        }\n        E = E >> BigInt(1);\n    }\n    return res;\n}\n\n\nexport function bits(n) {\n    let E = BigInt(n);\n    const res = [];\n    while (E) {\n        if (E & BigInt(1)) {\n            res.push(1);\n        } else {\n            res.push( 0 );\n        }\n        E = E >> BigInt(1);\n    }\n    return res;\n}\n\nexport function toNumber(s) {\n    if (s>BigInt(Number.MAX_SAFE_INTEGER )) {\n        throw new Error(\"Number too big\");\n    }\n    return Number(s);\n}\n\nexport function toArray(s, radix) {\n    const res = [];\n    let rem = BigInt(s);\n    radix = BigInt(radix);\n    while (rem) {\n        res.unshift( Number(rem % radix));\n        rem = rem / radix;\n    }\n    return res;\n}\n\n\nexport function add(a, b) {\n    return BigInt(a) + BigInt(b);\n}\n\nexport function sub(a, b) {\n    return BigInt(a) - BigInt(b);\n}\n\nexport function neg(a) {\n    return -BigInt(a);\n}\n\nexport function mul(a, b) {\n    return BigInt(a) * BigInt(b);\n}\n\nexport function square(a) {\n    return BigInt(a) * BigInt(a);\n}\n\nexport function pow(a, b) {\n    return BigInt(a) ** BigInt(b);\n}\n\nexport function exp(a, b) {\n    return BigInt(a) ** BigInt(b);\n}\n\nexport function abs(a) {\n    return BigInt(a) >= 0 ? BigInt(a) : -BigInt(a);\n}\n\nexport function div(a, b) {\n    return BigInt(a) / BigInt(b);\n}\n\nexport function mod(a, b) {\n    return BigInt(a) % BigInt(b);\n}\n\nexport function eq(a, b) {\n    return BigInt(a) == BigInt(b);\n}\n\nexport function neq(a, b) {\n    return BigInt(a) != BigInt(b);\n}\n\nexport function lt(a, b) {\n    return BigInt(a) < BigInt(b);\n}\n\nexport function gt(a, b) {\n    return BigInt(a) > BigInt(b);\n}\n\nexport function leq(a, b) {\n    return BigInt(a) <= BigInt(b);\n}\n\nexport function geq(a, b) {\n    return BigInt(a) >= BigInt(b);\n}\n\nexport function band(a, b) {\n    return BigInt(a) & BigInt(b);\n}\n\nexport function bor(a, b) {\n    return BigInt(a) | BigInt(b);\n}\n\nexport function bxor(a, b) {\n    return BigInt(a) ^ BigInt(b);\n}\n\nexport function land(a, b) {\n    return BigInt(a) && BigInt(b);\n}\n\nexport function lor(a, b) {\n    return BigInt(a) || BigInt(b);\n}\n\nexport function lnot(a) {\n    return !BigInt(a);\n}\n\n// Returns a buffer with Little Endian Representation\nexport function toRprLE(buff, o, e, n8) {\n    const s = \"0000000\" + e.toString(16);\n    const v = new Uint32Array(buff.buffer, buff.byteOffset + o, n8/4);\n    const l = (((s.length-7)*4 - 1) >> 5)+1;    // Number of 32bit words;\n    for (let i=0; i<l; i++) v[i] = parseInt(s.substring(s.length-8*i-8, s.length-8*i), 16);\n    for (let i=l; i<v.length; i++) v[i] = 0;\n    for (let i=v.length*4; i<n8; i++) buff[i] = toNumber(band(shiftRight(e, i*8), 0xFF));\n}\n\n// Returns a buffer with Big Endian Representation\nexport function toRprBE(buff, o, e, n8) {\n    const s = \"0000000\" + e.toString(16);\n    const v = new DataView(buff.buffer, buff.byteOffset + o, n8);\n    const l = (((s.length-7)*4 - 1) >> 5)+1;    // Number of 32bit words;\n    for (let i=0; i<l; i++) v.setUint32(n8-i*4 -4, parseInt(s.substring(s.length-8*i-8, s.length-8*i), 16), false);\n    for (let i=0; i<n8/4-l; i++) v[i] = 0;\n}\n\n// Pases a buffer with Little Endian Representation\nexport function fromRprLE(buff, o, n8) {\n    n8 = n8 || buff.byteLength;\n    o = o || 0;\n    const v = new Uint32Array(buff.buffer, buff.byteOffset + o, n8/4);\n    const a = new Array(n8/4);\n    v.forEach( (ch,i) => a[a.length-i-1] = ch.toString(16).padStart(8,\"0\") );\n    return fromString(a.join(\"\"), 16);\n}\n\n// Pases a buffer with Big Endian Representation\nexport function fromRprBE(buff, o, n8) {\n    n8 = n8 || buff.byteLength;\n    o = o || 0;\n    const v = new DataView(buff.buffer, buff.byteOffset + o, n8);\n    const a = new Array(n8/4);\n    for (let i=0; i<n8/4; i++) {\n        a[i] = v.getUint32(i*4, false).toString(16).padStart(8, \"0\");\n    }\n    return fromString(a.join(\"\"), 16);\n}\n\nexport function toString(a, radix) {\n    return a.toString(radix);\n}\n\nexport function toLEBuff(a) {\n    const buff = new Uint8Array(Math.floor((bitLength(a) - 1) / 8) +1);\n    toRprLE(buff, 0, a, buff.byteLength);\n    return buff;\n}\n\nexport const zero = e(0);\nexport const one = e(1);\n\n\n\n\n\n", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\n    This library does operations on polynomials with coefficients in a field F.\n\n    A polynomial P(x) = p0 + p1 * x + p2 * x^2 + ... + pn * x^n  is represented\n    by the array [ p0, p1, p2, ... , pn ].\n */\n\nexport default class PolField {\n    constructor (F) {\n        this.F = F;\n\n        let rem = F.sqrt_t;\n        let s = F.sqrt_s;\n\n        const five = this.F.add(this.F.add(this.F.two, this.F.two), this.F.one);\n\n        this.w = new Array(s+1);\n        this.wi = new Array(s+1);\n        this.w[s] = this.F.pow(five, rem);\n        this.wi[s] = this.F.inv(this.w[s]);\n\n        let n=s-1;\n        while (n>=0) {\n            this.w[n] = this.F.square(this.w[n+1]);\n            this.wi[n] = this.F.square(this.wi[n+1]);\n            n--;\n        }\n\n\n        this.roots = [];\n/*        for (let i=0; i<16; i++) {\n            let r = this.F.one;\n            n = 1 << i;\n            const rootsi = new Array(n);\n            for (let j=0; j<n; j++) {\n                rootsi[j] = r;\n                r = this.F.mul(r, this.w[i]);\n            }\n\n            this.roots.push(rootsi);\n        }\n    */\n        this._setRoots(15);\n    }\n\n    _setRoots(n) {\n        if (n > this.F.sqrt_s) n = this.s;\n        for (let i=n; (i>=0) && (!this.roots[i]); i--) {\n            let r = this.F.one;\n            const nroots = 1 << i;\n            const rootsi = new Array(nroots);\n            for (let j=0; j<nroots; j++) {\n                rootsi[j] = r;\n                r = this.F.mul(r, this.w[i]);\n            }\n            this.roots[i] = rootsi;\n        }\n    }\n\n    add(a, b) {\n        const m = Math.max(a.length, b.length);\n        const res = new Array(m);\n        for (let i=0; i<m; i++) {\n            res[i] = this.F.add(a[i] || this.F.zero, b[i] || this.F.zero);\n        }\n        return this.reduce(res);\n    }\n\n    double(a) {\n        return this.add(a,a);\n    }\n\n    sub(a, b) {\n        const m = Math.max(a.length, b.length);\n        const res = new Array(m);\n        for (let i=0; i<m; i++) {\n            res[i] = this.F.sub(a[i] || this.F.zero, b[i] || this.F.zero);\n        }\n        return this.reduce(res);\n    }\n\n    mulScalar(p, b) {\n        if (this.F.eq(b, this.F.zero)) return [];\n        if (this.F.eq(b, this.F.one)) return p;\n        const res = new Array(p.length);\n        for (let i=0; i<p.length; i++) {\n            res[i] = this.F.mul(p[i], b);\n        }\n        return res;\n    }\n\n\n\n    mul(a, b) {\n        if (a.length == 0) return [];\n        if (b.length == 0) return [];\n        if (a.length == 1) return this.mulScalar(b, a[0]);\n        if (b.length == 1) return this.mulScalar(a, b[0]);\n\n        if (b.length > a.length) {\n            [b, a] = [a, b];\n        }\n\n        if ((b.length <= 2) || (b.length < log2(a.length))) {\n            return this.mulNormal(a,b);\n        } else {\n            return this.mulFFT(a,b);\n        }\n    }\n\n    mulNormal(a, b) {\n        let res = [];\n        for (let i=0; i<b.length; i++) {\n            res = this.add(res, this.scaleX(this.mulScalar(a, b[i]), i) );\n        }\n        return res;\n    }\n\n    mulFFT(a,b) {\n        const longestN = Math.max(a.length, b.length);\n        const bitsResult = log2(longestN-1)+2;\n        this._setRoots(bitsResult);\n\n        const m = 1 << bitsResult;\n        const ea = this.extend(a,m);\n        const eb = this.extend(b,m);\n\n        const ta = __fft(this, ea, bitsResult, 0, 1, false);\n        const tb = __fft(this, eb, bitsResult, 0, 1, false);\n\n        const tres = new Array(m);\n\n        for (let i=0; i<m; i++) {\n            tres[i] = this.F.mul(ta[i], tb[i]);\n        }\n\n        const res = __fft(this, tres, bitsResult, 0, 1, true);\n\n        const twoinvm = this.F.inv( this.F.mulScalar(this.F.one, m) );\n        const resn = new Array(m);\n        for (let i=0; i<m; i++) {\n            resn[i] = this.F.mul(res[(m-i)%m], twoinvm);\n        }\n\n        return this.reduce(resn);\n    }\n\n\n\n    square(a) {\n        return this.mul(a,a);\n    }\n\n    scaleX(p, n) {\n        if (n==0) {\n            return p;\n        } else if (n>0) {\n            const z = new Array(n).fill(this.F.zero);\n            return z.concat(p);\n        } else {\n            if (-n >= p.length) return [];\n            return p.slice(-n);\n        }\n    }\n\n    eval2(p, x) {\n        let v = this.F.zero;\n        let ix = this.F.one;\n        for (let i=0; i<p.length; i++) {\n            v = this.F.add(v, this.F.mul(p[i], ix));\n            ix = this.F.mul(ix, x);\n        }\n        return v;\n    }\n\n    eval(p,x) {\n        const F = this.F;\n        if (p.length == 0) return F.zero;\n        const m = this._next2Power(p.length);\n        const ep = this.extend(p, m);\n\n        return _eval(ep, x, 0, 1, m);\n\n        function _eval(p, x, offset, step, n) {\n            if (n==1) return p[offset];\n            const newX = F.square(x);\n            const res= F.add(\n                _eval(p, newX, offset, step << 1, n >> 1),\n                F.mul(\n                    x,\n                    _eval(p, newX, offset+step , step << 1, n >> 1)));\n            return res;\n        }\n    }\n\n    lagrange(points) {\n        let roots = [this.F.one];\n        for (let i=0; i<points.length; i++) {\n            roots = this.mul(roots, [this.F.neg(points[i][0]), this.F.one]);\n        }\n\n        let sum = [];\n        for (let i=0; i<points.length; i++) {\n            let mpol = this.ruffini(roots, points[i][0]);\n            const factor =\n                this.F.mul(\n                    this.F.inv(this.eval(mpol, points[i][0])),\n                    points[i][1]);\n            mpol = this.mulScalar(mpol, factor);\n            sum = this.add(sum, mpol);\n        }\n        return sum;\n    }\n\n\n    fft(p) {\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n\n        const m = 1 << bits;\n        const ep = this.extend(p, m);\n        const res = __fft(this, ep, bits, 0, 1);\n        return res;\n    }\n\n    fft2(p) {\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n\n        const m = 1 << bits;\n        const ep = this.extend(p, m);\n        __bitReverse(ep, bits);\n        const res = __fft2(this, ep, bits);\n        return res;\n    }\n\n\n    ifft(p) {\n\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n        const m = 1 << bits;\n        const ep = this.extend(p, m);\n        const res =  __fft(this, ep, bits, 0, 1);\n\n        const twoinvm = this.F.inv( this.F.mulScalar(this.F.one, m) );\n        const resn = new Array(m);\n        for (let i=0; i<m; i++) {\n            resn[i] = this.F.mul(res[(m-i)%m], twoinvm);\n        }\n\n        return resn;\n\n    }\n\n\n    ifft2(p) {\n\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n        const m = 1 << bits;\n        const ep = this.extend(p, m);\n        __bitReverse(ep, bits);\n        const res =  __fft2(this, ep, bits, 0, 1);\n\n        const twoinvm = this.F.inv( this.F.mulScalar(this.F.one, m) );\n        const resn = new Array(m);\n        for (let i=0; i<m; i++) {\n            resn[i] = this.F.mul(res[(m-i)%m], twoinvm);\n        }\n\n        return resn;\n\n    }\n\n    _fft(pall, bits, offset, step) {\n\n        const n = 1 << bits;\n        if (n==1) {\n            return [ pall[offset] ];\n        }\n\n        const ndiv2 = n >> 1;\n        const p1 = this._fft(pall, bits-1, offset, step*2);\n        const p2 = this._fft(pall, bits-1, offset+step, step*2);\n\n        const out = new Array(n);\n\n        let m= this.F.one;\n        for (let i=0; i<ndiv2; i++) {\n            out[i] = this.F.add(p1[i], this.F.mul(m, p2[i]));\n            out[i+ndiv2] = this.F.sub(p1[i], this.F.mul(m, p2[i]));\n            m = this.F.mul(m, this.w[bits]);\n        }\n\n        return out;\n    }\n\n    extend(p, e) {\n        if (e == p.length) return p;\n        const z = new Array(e-p.length).fill(this.F.zero);\n\n        return p.concat(z);\n    }\n\n    reduce(p) {\n        if (p.length == 0) return p;\n        if (! this.F.eq(p[p.length-1], this.F.zero) ) return p;\n        let i=p.length-1;\n        while( i>0 && this.F.eq(p[i], this.F.zero) ) i--;\n        return p.slice(0, i+1);\n    }\n\n    eq(a, b) {\n        const pa = this.reduce(a);\n        const pb = this.reduce(b);\n\n        if (pa.length != pb.length) return false;\n        for (let i=0; i<pb.length; i++) {\n            if (!this.F.eq(pa[i], pb[i])) return false;\n        }\n\n        return true;\n    }\n\n    ruffini(p, r) {\n        const res = new Array(p.length-1);\n        res[res.length-1] = p[p.length-1];\n        for (let i = res.length-2; i>=0; i--) {\n            res[i] = this.F.add(this.F.mul(res[i+1], r), p[i+1]);\n        }\n        return res;\n    }\n\n    _next2Power(v) {\n        v--;\n        v |= v >> 1;\n        v |= v >> 2;\n        v |= v >> 4;\n        v |= v >> 8;\n        v |= v >> 16;\n        v++;\n        return v;\n    }\n\n    toString(p) {\n        const ap = this.normalize(p);\n        let S = \"\";\n        for (let i=ap.length-1; i>=0; i--) {\n            if (!this.F.eq(p[i], this.F.zero)) {\n                if (S!=\"\") S += \" + \";\n                S = S + p[i].toString(10);\n                if (i>0) {\n                    S = S + \"x\";\n                    if (i>1) {\n                        S = S + \"^\" +i;\n                    }\n                }\n            }\n        }\n        return S;\n    }\n\n    normalize(p) {\n        const res  = new Array(p.length);\n        for (let i=0; i<p.length; i++) {\n            res[i] = this.F.normalize(p[i]);\n        }\n        return res;\n    }\n\n\n    _reciprocal(p, bits) {\n        const k = 1 << bits;\n        if (k==1) {\n            return [ this.F.inv(p[0]) ];\n        }\n        const np = this.scaleX(p, -k/2);\n        const q = this._reciprocal(np, bits-1);\n        const a = this.scaleX(this.double(q), 3*k/2-2);\n        const b = this.mul( this.square(q), p);\n\n        return this.scaleX(this.sub(a,b),   -(k-2));\n    }\n\n    // divides x^m / v\n    _div2(m, v) {\n        const kbits = log2(v.length-1)+1;\n        const k = 1 << kbits;\n\n        const scaleV = k - v.length;\n\n        // rec = x^(k - 2) / v* x^scaleV =>\n        // rec = x^(k-2-scaleV)/ v\n        //\n        // res = x^m/v = x^(m + (2*k-2 - scaleV) - (2*k-2 - scaleV)) /v =>\n        // res = rec * x^(m - (2*k-2 - scaleV)) =>\n        // res = rec * x^(m - 2*k + 2 + scaleV)\n\n        const rec = this._reciprocal(this.scaleX(v, scaleV), kbits);\n        const res = this.scaleX(rec, m - 2*k + 2 + scaleV);\n\n        return res;\n    }\n\n    div(_u, _v) {\n        if (_u.length < _v.length) return [];\n        const kbits = log2(_v.length-1)+1;\n        const k = 1 << kbits;\n\n        const u = this.scaleX(_u, k-_v.length);\n        const v = this.scaleX(_v, k-_v.length);\n\n        const n = v.length-1;\n        let m = u.length-1;\n\n        const s = this._reciprocal(v, kbits);\n        let t;\n        if (m>2*n) {\n            t = this.sub(this.scaleX([this.F.one], 2*n), this.mul(s, v));\n        }\n\n        let q = [];\n        let rem = u;\n        let us, ut;\n        let finish = false;\n\n        while (!finish) {\n            us = this.mul(rem, s);\n            q = this.add(q, this.scaleX(us, -2*n));\n\n            if ( m > 2*n ) {\n                ut = this.mul(rem, t);\n                rem = this.scaleX(ut, -2*n);\n                m = rem.length-1;\n            } else {\n                finish = true;\n            }\n        }\n\n        return q;\n    }\n\n\n    // returns the ith nth-root of one\n    oneRoot(n, i) {\n        let nbits = log2(n-1)+1;\n        let res = this.F.one;\n        let r = i;\n\n        if(i>=n) {\n            throw new Error(\"Given 'i' should be lower than 'n'\");\n        }\n        else if (1<<nbits !== n) {\n            throw new Error(`Internal errlr: ${n} should equal ${1<<nbits}`);\n        }\n\n        while (r>0) {\n            if (r & 1 == 1) {\n                res = this.F.mul(res, this.w[nbits]);\n            }\n            r = r >> 1;\n            nbits --;\n        }\n        return res;\n    }\n\n    computeVanishingPolinomial(bits, t) {\n        const m = 1 << bits;\n        return this.F.sub(this.F.pow(t, m), this.F.one);\n    }\n\n    evaluateLagrangePolynomials(bits, t) {\n        const m= 1 << bits;\n        const tm = this.F.pow(t, m);\n        const u= new Array(m).fill(this.F.zero);\n        this._setRoots(bits);\n        const omega = this.w[bits];\n\n        if (this.F.eq(tm, this.F.one)) {\n            for (let i = 0; i < m; i++) {\n                if (this.F.eq(this.roots[bits][0],t)) { // i.e., t equals omega^i\n                    u[i] = this.F.one;\n                    return u;\n                }\n            }\n        }\n\n        const z = this.F.sub(tm, this.F.one);\n        //        let l = this.F.mul(z,  this.F.pow(this.F.twoinv, m));\n        let l = this.F.mul(z,  this.F.inv(this.F.e(m)));\n        for (let i = 0; i < m; i++) {\n            u[i] = this.F.mul(l, this.F.inv(this.F.sub(t,this.roots[bits][i])));\n            l = this.F.mul(l, omega);\n        }\n\n        return u;\n    }\n\n    log2(V) {\n        return log2(V);\n    }\n}\n\nfunction log2( V )\n{\n    return( ( ( V & 0xFFFF0000 ) !== 0 ? ( V &= 0xFFFF0000, 16 ) : 0 ) | ( ( V & 0xFF00FF00 ) !== 0 ? ( V &= 0xFF00FF00, 8 ) : 0 ) | ( ( V & 0xF0F0F0F0 ) !== 0 ? ( V &= 0xF0F0F0F0, 4 ) : 0 ) | ( ( V & 0xCCCCCCCC ) !== 0 ? ( V &= 0xCCCCCCCC, 2 ) : 0 ) | ( ( V & 0xAAAAAAAA ) !== 0 ) );\n}\n\n\nfunction __fft(PF, pall, bits, offset, step) {\n\n    const n = 1 << bits;\n    if (n==1) {\n        return [ pall[offset] ];\n    } else if (n==2) {\n        return [\n            PF.F.add(pall[offset], pall[offset + step]),\n            PF.F.sub(pall[offset], pall[offset + step])];\n    }\n\n    const ndiv2 = n >> 1;\n    const p1 = __fft(PF, pall, bits-1, offset, step*2);\n    const p2 = __fft(PF, pall, bits-1, offset+step, step*2);\n\n    const out = new Array(n);\n\n    for (let i=0; i<ndiv2; i++) {\n        out[i] = PF.F.add(p1[i], PF.F.mul(PF.roots[bits][i], p2[i]));\n        out[i+ndiv2] = PF.F.sub(p1[i], PF.F.mul(PF.roots[bits][i], p2[i]));\n    }\n\n    return out;\n}\n\n\nfunction __fft2(PF, pall, bits) {\n\n    const n = 1 << bits;\n    if (n==1) {\n        return [ pall[0] ];\n    }\n\n    const ndiv2 = n >> 1;\n    const p1 = __fft2(PF, pall.slice(0, ndiv2), bits-1);\n    const p2 = __fft2(PF, pall.slice(ndiv2), bits-1);\n\n    const out = new Array(n);\n\n    for (let i=0; i<ndiv2; i++) {\n        out[i] = PF.F.add(p1[i], PF.F.mul(PF.roots[bits][i], p2[i]));\n        out[i+ndiv2] = PF.F.sub(p1[i], PF.F.mul(PF.roots[bits][i], p2[i]));\n    }\n\n    return out;\n}\n\nconst _revTable = [];\nfor (let i=0; i<256; i++) {\n    _revTable[i] = _revSlow(i, 8);\n}\n\nfunction _revSlow(idx, bits) {\n    let res =0;\n    let a = idx;\n    for (let i=0; i<bits; i++) {\n        res <<= 1;\n        res = res | (a &1);\n        a >>=1;\n    }\n    return res;\n}\n\nfunction rev(idx, bits) {\n    return (\n        _revTable[idx >>> 24] |\n        (_revTable[(idx >>> 16) & 0xFF] << 8) |\n        (_revTable[(idx >>> 8) & 0xFF] << 16) |\n        (_revTable[idx & 0xFF] << 24)\n    ) >>> (32-bits);\n}\n\nfunction __bitReverse(p, bits) {\n    for (let k=0; k<p.length; k++) {\n        const r = rev(k, bits);\n        if (r>k) {\n            const tmp= p[k];\n            p[k] = p[r];\n            p[r] = tmp;\n        }\n    }\n\n}\n\n\n", "/* global BigInt */\nimport * as Scalar from \"./scalar.js\";\nimport * as futils from \"./futils.js\";\nimport buildSqrt from \"./fsqrt.js\";\nimport {getRandomBytes} from \"./random.js\";\nimport FFFT from \"./fft.js\";\n\nexport default class ZqField {\n    constructor(p) {\n        this.type=\"F1\";\n        this.one = BigInt(1);\n        this.zero = BigInt(0);\n        this.p = BigInt(p);\n        this.m = 1;\n        this.negone = this.p-this.one;\n        this.two = BigInt(2);\n        this.half = this.p >> this.one;\n        this.bitLength = Scalar.bitLength(this.p);\n        this.mask = (this.one << BigInt(this.bitLength)) - this.one;\n\n        this.n64 = Math.floor((this.bitLength - 1) / 64)+1;\n        this.n32 = this.n64*2;\n        this.n8 = this.n64*8;\n        this.R = this.e(this.one << BigInt(this.n64*64));\n        this.Ri = this.inv(this.R);\n\n        const e = this.negone >> this.one;\n        this.nqr = this.two;\n        let r = this.pow(this.nqr, e);\n        while (!this.eq(r, this.negone)) {\n            this.nqr = this.nqr + this.one;\n            r = this.pow(this.nqr, e);\n        }\n\n\n        this.s = 0;\n        this.t = this.negone;\n\n        while ((this.t & this.one) == this.zero) {\n            this.s = this.s + 1;\n            this.t = this.t >> this.one;\n        }\n\n        this.nqr_to_t = this.pow(this.nqr, this.t);\n\n        buildSqrt(this);\n\n        this.FFT = new FFFT(this, this, this.mul.bind(this));\n\n        this.fft = this.FFT.fft.bind(this.FFT);\n        this.ifft = this.FFT.ifft.bind(this.FFT);\n        this.w = this.FFT.w;\n        this.wi = this.FFT.wi; \n    \n        this.shift = this.square(this.nqr);\n        this.k = this.exp(this.nqr, 2**this.s);\n    }\n\n    e(a,b) {\n        let res;\n        if (!b) {\n            res = BigInt(a);\n        } else if (b==16) {\n            res = BigInt(\"0x\"+a);\n        }\n        if (res < 0) {\n            let nres = -res;\n            if (nres >= this.p) nres = nres % this.p;\n            return this.p - nres;\n        } else {\n            return (res>= this.p) ? res%this.p : res;\n        }\n\n    }\n\n    add(a, b) {\n        const res = a + b;\n        return res >= this.p ? res-this.p : res;\n    }\n\n    sub(a, b) {\n        return (a >= b) ? a-b : this.p-b+a;\n    }\n\n    neg(a) {\n        return a ? this.p-a : a;\n    }\n\n    mul(a, b) {\n        return (a*b)%this.p;\n    }\n\n    mulScalar(base, s) {\n        return (base * this.e(s)) % this.p;\n    }\n\n    square(a) {\n        return (a*a) % this.p;\n    }\n\n    eq(a, b) {\n        return a==b;\n    }\n\n    neq(a, b) {\n        return a!=b;\n    }\n\n    lt(a, b) {\n        const aa = (a > this.half) ? a - this.p : a;\n        const bb = (b > this.half) ? b - this.p : b;\n        return aa < bb;\n    }\n\n    gt(a, b) {\n        const aa = (a > this.half) ? a - this.p : a;\n        const bb = (b > this.half) ? b - this.p : b;\n        return aa > bb;\n    }\n\n    leq(a, b) {\n        const aa = (a > this.half) ? a - this.p : a;\n        const bb = (b > this.half) ? b - this.p : b;\n        return aa <= bb;\n    }\n\n    geq(a, b) {\n        const aa = (a > this.half) ? a - this.p : a;\n        const bb = (b > this.half) ? b - this.p : b;\n        return aa >= bb;\n    }\n\n    div(a, b) {\n        return this.mul(a, this.inv(b));\n    }\n\n    idiv(a, b) {\n        if (!b) throw new Error(\"Division by zero\");\n        return a / b;\n    }\n\n    inv(a) {\n        if (!a) throw new Error(\"Division by zero\");\n\n        let t = this.zero;\n        let r = this.p;\n        let newt = this.one;\n        let newr = a % this.p;\n        while (newr) {\n            let q = r/newr;\n            [t, newt] = [newt, t-q*newt];\n            [r, newr] = [newr, r-q*newr];\n        }\n        if (t<this.zero) t += this.p;\n        return t;\n    }\n\n    mod(a, b) {\n        return a % b;\n    }\n\n    pow(b, e) {\n        return futils.exp(this, b, e);\n    }\n\n    exp(b, e) {\n        return futils.exp(this, b, e);\n    }\n\n    band(a, b) {\n        const res =  ((a & b) & this.mask);\n        return res >= this.p ? res-this.p : res;\n    }\n\n    bor(a, b) {\n        const res =  ((a | b) & this.mask);\n        return res >= this.p ? res-this.p : res;\n    }\n\n    bxor(a, b) {\n        const res =  ((a ^ b) & this.mask);\n        return res >= this.p ? res-this.p : res;\n    }\n\n    bnot(a) {\n        const res = a ^ this.mask;\n        return res >= this.p ? res-this.p : res;\n    }\n\n    shl(a, b) {\n        if (Number(b) < this.bitLength) {\n            const res = (a << b) & this.mask;\n            return res >= this.p ? res-this.p : res;\n        } else {\n            const nb = this.p - b;\n            if (Number(nb) < this.bitLength) {\n                return a >> nb;\n            } else {\n                return this.zero;\n            }\n        }\n    }\n\n    shr(a, b) {\n        if (Number(b) < this.bitLength) {\n            return a >> b;\n        } else {\n            const nb = this.p - b;\n            if (Number(nb) < this.bitLength) {\n                const res = (a << nb) & this.mask;\n                return res >= this.p ? res-this.p : res;\n            } else {\n                return 0;\n            }\n        }\n    }\n\n    land(a, b) {\n        return (a && b) ? this.one : this.zero;\n    }\n\n    lor(a, b) {\n        return (a || b) ? this.one : this.zero;\n    }\n\n    lnot(a) {\n        return (a) ? this.zero : this.one;\n    }\n\n    sqrt_old(n) {\n\n        if (n == this.zero) return this.zero;\n\n        // Test that have solution\n        const res = this.pow(n, this.negone >> this.one);\n        if ( res != this.one ) return null;\n\n        let m = this.s;\n        let c = this.nqr_to_t;\n        let t = this.pow(n, this.t);\n        let r = this.pow(n, this.add(this.t, this.one) >> this.one );\n\n        while ( t != this.one ) {\n            let sq = this.square(t);\n            let i = 1;\n            while (sq != this.one ) {\n                i++;\n                sq = this.square(sq);\n            }\n\n            // b = c ^ m-i-1\n            let b = c;\n            for (let j=0; j< m-i-1; j ++) b = this.square(b);\n\n            m = i;\n            c = this.square(b);\n            t = this.mul(t, c);\n            r = this.mul(r, b);\n        }\n\n        if (r > (this.p >> this.one)) {\n            r = this.neg(r);\n        }\n\n        return r;\n    }\n\n    normalize(a, b) {\n        a = BigInt(a,b);\n        if (a < 0) {\n            let na = -a;\n            if (na >= this.p) na = na % this.p;\n            return this.p - na;\n        } else {\n            return (a>= this.p) ? a%this.p : a;\n        }\n    }\n\n    random() {\n        const nBytes = (this.bitLength*2 / 8);\n        let res =this.zero;\n        for (let i=0; i<nBytes; i++) {\n            res = (res << BigInt(8)) + BigInt(getRandomBytes(1)[0]);\n        }\n        return res % this.p;\n    }\n\n    toString(a, base) {\n        base = base || 10;\n        let vs;\n        if ((a > this.half)&&(base == 10)) {\n            const v = this.p-a;\n            vs = \"-\"+v.toString(base);\n        } else {\n            vs = a.toString(base);\n        }\n        return vs;\n    }\n\n    isZero(a) {\n        return a == this.zero;\n    }\n\n    fromRng(rng) {\n        let v;\n        do {\n            v=this.zero;\n            for (let i=0; i<this.n64; i++) {\n                v += rng.nextU64() << BigInt(64 *i);\n            }\n            v &= this.mask;\n        } while (v >= this.p);\n        v = (v * this.Ri) % this.p;   // Convert from montgomery\n        return v;\n    }\n\n    fft(a) {\n        return this.FFT.fft(a);\n    }\n\n    ifft(a) {\n        return this.FFT.ifft(a);\n    }\n\n    // Returns a buffer with Little Endian Representation\n    toRprLE(buff, o, e) {\n        Scalar.toRprLE(buff, o, e, this.n64*8);\n    }\n\n    // Returns a buffer with Big Endian Representation\n    toRprBE(buff, o, e) {\n        Scalar.toRprBE(buff, o, e, this.n64*8);\n    }\n\n    // Returns a buffer with Big Endian Montgomery Representation\n    toRprBEM(buff, o, e) {\n        return this.toRprBE(buff, o, this.mul(this.R, e));\n    }\n\n    toRprLEM(buff, o, e) {\n        return this.toRprLE(buff, o, this.mul(this.R, e));\n    }\n\n\n    // Pases a buffer with Little Endian Representation\n    fromRprLE(buff, o) {\n        return Scalar.fromRprLE(buff, o, this.n8);\n    }\n\n    // Pases a buffer with Big Endian Representation\n    fromRprBE(buff, o) {\n        return Scalar.fromRprBE(buff, o, this.n8);\n    }\n\n    fromRprLEM(buff, o) {\n        return this.mul(this.fromRprLE(buff, o), this.Ri);\n    }\n\n    fromRprBEM(buff, o) {\n        return this.mul(this.fromRprBE(buff, o), this.Ri);\n    }\n\n    toObject(a) {\n        return a;\n    }\n}", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as Scalar from \"./scalar.js\";\n\n\nexport function mulScalar(F, base, e) {\n    let res;\n\n    if (Scalar.isZero(e)) return F.zero;\n\n    const n = Scalar.naf(e);\n\n    if (n[n.length-1] == 1) {\n        res = base;\n    } else if (n[n.length-1] == -1) {\n        res = F.neg(base);\n    } else {\n        throw new Error(\"invlaud NAF\");\n    }\n\n    for (let i=n.length-2; i>=0; i--) {\n\n        res = F.double(res);\n\n        if (n[i] == 1) {\n            res = F.add(res, base);\n        } else if (n[i] == -1) {\n            res = F.sub(res, base);\n        }\n    }\n\n    return res;\n}\n\n\n/*\nexports.mulScalar = (F, base, e) =>{\n    let res = F.zero;\n    let rem = bigInt(e);\n    let exp = base;\n\n    while (! rem.eq(bigInt.zero)) {\n        if (rem.and(bigInt.one).eq(bigInt.one)) {\n            res = F.add(res, exp);\n        }\n        exp = F.double(exp);\n        rem = rem.shiftRight(1);\n    }\n\n    return res;\n};\n*/\n\n\nexport function exp(F, base, e) {\n\n    if (Scalar.isZero(e)) return F.one;\n\n    const n = Scalar.bits(e);\n\n    if (n.length==0) return F.one;\n\n    let res = base;\n\n    for (let i=n.length-2; i>=0; i--) {\n\n        res = F.square(res);\n\n        if (n[i]) {\n            res = F.mul(res, base);\n        }\n    }\n\n    return res;\n}\n\n\n", "import * as Scalar from \"./scalar.js\";\n// Check here: https://eprint.iacr.org/2012/685.pdf\n\nexport default function buildSqrt (F) {\n    if ((F.m % 2) == 1) {\n        if (Scalar.eq(Scalar.mod(F.p, 4), 1 )) {\n            if (Scalar.eq(Scalar.mod(F.p, 8), 1 )) {\n                if (Scalar.eq(Scalar.mod(F.p, 16), 1 )) {\n                    // alg7_muller(F);\n                    alg5_tonelliShanks(F);\n                } else if (Scalar.eq(Scalar.mod(F.p, 16), 9 )) {\n                    alg4_kong(F);\n                } else {\n                    throw new Error(\"Field withot sqrt\");\n                }\n            } else if (Scalar.eq(Scalar.mod(F.p, 8), 5 )) {\n                alg3_atkin(F);\n            } else {\n                throw new Error(\"Field withot sqrt\");\n            }\n        } else if (Scalar.eq(Scalar.mod(F.p, 4), 3 )) {\n            alg2_shanks(F);\n        }\n    } else {\n        const pm2mod4 = Scalar.mod(Scalar.pow(F.p, F.m/2), 4);\n        if (pm2mod4 == 1) {\n            alg10_adj(F);\n        } else if (pm2mod4 == 3) {\n            alg9_adj(F);\n        } else {\n            alg8_complex(F);\n        }\n\n    }\n}\n\n\nfunction alg5_tonelliShanks(F) {\n    F.sqrt_q = Scalar.pow(F.p, F.m);\n\n    F.sqrt_s = 0;\n    F.sqrt_t = Scalar.sub(F.sqrt_q, 1);\n\n    while (!Scalar.isOdd(F.sqrt_t)) {\n        F.sqrt_s = F.sqrt_s + 1;\n        F.sqrt_t = Scalar.div(F.sqrt_t, 2);\n    }\n\n    let c0 = F.one;\n\n    while (F.eq(c0, F.one)) {\n        const c = F.random();\n        F.sqrt_z = F.pow(c, F.sqrt_t);\n        c0 = F.pow(F.sqrt_z, 2 ** (F.sqrt_s-1) );\n    }\n\n    F.sqrt_tm1d2 = Scalar.div(Scalar.sub(F.sqrt_t, 1),2);\n\n    F.sqrt = function(a) {\n        const F=this;\n        if (F.isZero(a)) return F.zero;\n        let w = F.pow(a, F.sqrt_tm1d2);\n        const a0 = F.pow( F.mul(F.square(w), a), 2 ** (F.sqrt_s-1) );\n        if (F.eq(a0, F.negone)) return null;\n\n        let v = F.sqrt_s;\n        let x = F.mul(a, w);\n        let b = F.mul(x, w);\n        let z = F.sqrt_z;\n        while (!F.eq(b, F.one)) {\n            let b2k = F.square(b);\n            let k=1;\n            while (!F.eq(b2k, F.one)) {\n                b2k = F.square(b2k);\n                k++;\n            }\n\n            w = z;\n            for (let i=0; i<v-k-1; i++) {\n                w = F.square(w);\n            }\n            z = F.square(w);\n            b = F.mul(b, z);\n            x = F.mul(x, w);\n            v = k;\n        }\n        return F.geq(x, F.zero) ? x : F.neg(x);\n    };\n}\n\nfunction alg4_kong(F) {\n    F.sqrt = function() {\n        throw new Error(\"Sqrt alg 4 not implemented\");\n    };\n}\n\nfunction alg3_atkin(F) {\n    F.sqrt = function() {\n        throw new Error(\"Sqrt alg 3 not implemented\");\n    };\n}\n\nfunction alg2_shanks(F) {\n\n    F.sqrt_q = Scalar.pow(F.p, F.m);\n    F.sqrt_e1 = Scalar.div( Scalar.sub(F.sqrt_q, 3) , 4);\n\n    F.sqrt = function(a) {\n        if (this.isZero(a)) return this.zero;\n\n        // Test that have solution\n        const a1 = this.pow(a, this.sqrt_e1);\n\n        const a0 = this.mul(this.square(a1), a);\n\n        if ( this.eq(a0, this.negone) ) return null;\n\n        const x = this.mul(a1, a);\n\n        return F.geq(x, F.zero) ? x : F.neg(x);\n    };\n}\n\nfunction alg10_adj(F) {\n    F.sqrt = function() {\n        throw new Error(\"Sqrt alg 10 not implemented\");\n    };\n}\n\nfunction alg9_adj(F) {\n    F.sqrt_q = Scalar.pow(F.p, F.m/2);\n    F.sqrt_e34 = Scalar.div( Scalar.sub(F.sqrt_q, 3) , 4);\n    F.sqrt_e12 = Scalar.div( Scalar.sub(F.sqrt_q, 1) , 2);\n\n    F.frobenius = function(n, x) {\n        if ((n%2) == 1) {\n            return F.conjugate(x);\n        } else {\n            return x;\n        }\n    };\n\n    F.sqrt = function(a) {\n        const F = this;\n        const a1 = F.pow(a, F.sqrt_e34);\n        const alfa = F.mul(F.square(a1), a);\n        const a0 = F.mul(F.frobenius(1, alfa), alfa);\n        if (F.eq(a0, F.negone)) return null;\n        const x0 = F.mul(a1, a);\n        let x;\n        if (F.eq(alfa, F.negone)) {\n            x = F.mul(x0, [F.F.zero, F.F.one]);\n        } else {\n            const b = F.pow(F.add(F.one, alfa), F.sqrt_e12);\n            x = F.mul(b, x0);\n        }\n        return F.geq(x, F.zero) ? x : F.neg(x);\n    };\n}\n\n\nfunction alg8_complex(F) {\n    F.sqrt = function() {\n        throw new Error(\"Sqrt alg 8 not implemented\");\n    };\n}\n", "import ChaCha from \"./chacha.js\";\nimport crypto from \"crypto\";\n\nexport function getRandomBytes(n) {\n    let array = new Uint8Array(n);\n    if (process.browser) { // Browser\n        if (typeof globalThis.crypto !== \"undefined\") { // Supported\n            globalThis.crypto.getRandomValues(array);\n        } else { // fallback\n            for (let i=0; i<n; i++) {\n                array[i] = (Math.random()*4294967296)>>>0;\n            }\n        }\n    }\n    else { // NodeJS\n        crypto.randomFillSync(array);\n    }\n    return array;\n}\n\nexport function getRandomSeed() {\n    const arr = getRandomBytes(32);\n    const arrV = new Uint32Array(arr.buffer);\n    const seed = [];\n    for (let i=0; i<8; i++) {\n        seed.push(arrV[i]);\n    }\n    return seed;\n}\n\nlet threadRng = null;\n\nexport function getThreadRng() {\n    if (threadRng) return threadRng;\n    threadRng = new ChaCha(getRandomSeed());\n    return threadRng;\n}\n", "\n\nimport * as Scalar from \"./scalar.js\";\n\n\nfunction quarterRound(st, a, b, c, d) {\n\n    st[a] = (st[a] + st[b]) >>> 0;\n    st[d] = (st[d] ^ st[a]) >>> 0;\n    st[d] = ((st[d] << 16) | ((st[d]>>>16) & 0xFFFF)) >>> 0;\n\n    st[c] = (st[c] + st[d]) >>> 0;\n    st[b] = (st[b] ^ st[c]) >>> 0;\n    st[b] = ((st[b] << 12) | ((st[b]>>>20) & 0xFFF)) >>> 0;\n\n    st[a] = (st[a] + st[b]) >>> 0;\n    st[d] = (st[d] ^ st[a]) >>> 0;\n    st[d] = ((st[d] << 8) | ((st[d]>>>24) & 0xFF)) >>> 0;\n\n    st[c] = (st[c] + st[d]) >>> 0;\n    st[b] = (st[b] ^ st[c]) >>> 0;\n    st[b] = ((st[b] << 7) | ((st[b]>>>25) & 0x7F)) >>> 0;\n}\n\nfunction doubleRound(st) {\n    quarterRound(st, 0, 4, 8,12);\n    quarterRound(st, 1, 5, 9,13);\n    quarterRound(st, 2, 6,10,14);\n    quarterRound(st, 3, 7,11,15);\n\n    quarterRound(st, 0, 5,10,15);\n    quarterRound(st, 1, 6,11,12);\n    quarterRound(st, 2, 7, 8,13);\n    quarterRound(st, 3, 4, 9,14);\n}\n\nexport default class ChaCha {\n\n    constructor(seed) {\n        seed = seed || [0,0,0,0,0,0,0,0];\n        this.state = [\n            0x61707865,\n            0x3320646E,\n            0x79622D32,\n            0x6B206574,\n            seed[0],\n            seed[1],\n            seed[2],\n            seed[3],\n            seed[4],\n            seed[5],\n            seed[6],\n            seed[7],\n            0,\n            0,\n            0,\n            0\n        ];\n        this.idx = 16;\n        this.buff = new Array(16);\n    }\n\n    nextU32() {\n        if (this.idx == 16) this.update();\n        return this.buff[this.idx++];\n    }\n\n    nextU64() {\n        return Scalar.add(Scalar.mul(this.nextU32(), 0x100000000), this.nextU32());\n    }\n\n    nextBool() {\n        return (this.nextU32() & 1) == 1;\n    }\n\n    update() {\n        // Copy the state\n        for (let i=0; i<16; i++) this.buff[i] = this.state[i];\n\n        // Apply the rounds\n        for (let i=0; i<10; i++) doubleRound(this.buff);\n\n        // Add to the initial\n        for (let i=0; i<16; i++) this.buff[i] = (this.buff[i] + this.state[i]) >>> 0;\n\n        this.idx = 0;\n\n        this.state[12] = (this.state[12] + 1) >>> 0;\n        if (this.state[12] != 0) return;\n        this.state[13] = (this.state[13] + 1) >>> 0;\n        if (this.state[13] != 0) return;\n        this.state[14] = (this.state[14] + 1) >>> 0;\n        if (this.state[14] != 0) return;\n        this.state[15] = (this.state[15] + 1) >>> 0;\n    }\n}\n", "export default {};\n", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n/*\n    This library does operations on polynomials with coefficients in a field F.\n\n    A polynomial P(x) = p0 + p1 * x + p2 * x^2 + ... + pn * x^n  is represented\n    by the array [ p0, p1, p2, ... , pn ].\n */\n\nexport default class FFT {\n    constructor (G, F, opMulGF) {\n        this.F = F;\n        this.G = G;\n        this.opMulGF = opMulGF;\n\n        let rem = F.sqrt_t || F.t;\n        let s = F.sqrt_s || F.s;\n\n        let nqr = F.one;\n        while (F.eq(F.pow(nqr, F.half), F.one)) nqr = F.add(nqr, F.one);\n\n        this.w = new Array(s+1);\n        this.wi = new Array(s+1);\n        this.w[s] = this.F.pow(nqr, rem);\n        this.wi[s] = this.F.inv(this.w[s]);\n\n        let n=s-1;\n        while (n>=0) {\n            this.w[n] = this.F.square(this.w[n+1]);\n            this.wi[n] = this.F.square(this.wi[n+1]);\n            n--;\n        }\n\n\n        this.roots = [];\n        /*\n        for (let i=0; i<16; i++) {\n            let r = this.F.one;\n            n = 1 << i;\n            const rootsi = new Array(n);\n            for (let j=0; j<n; j++) {\n                rootsi[j] = r;\n                r = this.F.mul(r, this.w[i]);\n            }\n\n            this.roots.push(rootsi);\n        }\n        */\n        this._setRoots(Math.min(s, 15));\n    }\n\n    _setRoots(n) {\n        for (let i=n; (i>=0) && (!this.roots[i]); i--) {\n            let r = this.F.one;\n            const nroots = 1 << i;\n            const rootsi = new Array(nroots);\n            for (let j=0; j<nroots; j++) {\n                rootsi[j] = r;\n                r = this.F.mul(r, this.w[i]);\n            }\n\n            this.roots[i] = rootsi;\n        }\n    }\n\n    fft(p) {\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n\n        const m = 1 << bits;\n        if (p.length != m) {\n            throw new Error(\"Size must be multiple of 2\");\n        }\n        const res = __fft(this, p, bits, 0, 1);\n        return res;\n    }\n\n    ifft(p) {\n\n        if (p.length <= 1) return p;\n        const bits = log2(p.length-1)+1;\n        this._setRoots(bits);\n        const m = 1 << bits;\n        if (p.length != m) {\n            throw new Error(\"Size must be multiple of 2\");\n        }\n        const res =  __fft(this, p, bits, 0, 1);\n        const twoinvm = this.F.inv( this.F.mulScalar(this.F.one, m) );\n        const resn = new Array(m);\n        for (let i=0; i<m; i++) {\n            resn[i] = this.opMulGF(res[(m-i)%m], twoinvm);\n        }\n\n        return resn;\n    }\n\n\n}\n\nfunction log2( V )\n{\n    return( ( ( V & 0xFFFF0000 ) !== 0 ? ( V &= 0xFFFF0000, 16 ) : 0 ) | ( ( V & 0xFF00FF00 ) !== 0 ? ( V &= 0xFF00FF00, 8 ) : 0 ) | ( ( V & 0xF0F0F0F0 ) !== 0 ? ( V &= 0xF0F0F0F0, 4 ) : 0 ) | ( ( V & 0xCCCCCCCC ) !== 0 ? ( V &= 0xCCCCCCCC, 2 ) : 0 ) | ( ( V & 0xAAAAAAAA ) !== 0 ) );\n}\n\n\nfunction __fft(PF, pall, bits, offset, step) {\n\n    const n = 1 << bits;\n    if (n==1) {\n        return [ pall[offset] ];\n    } else if (n==2) {\n        return [\n            PF.G.add(pall[offset], pall[offset + step]),\n            PF.G.sub(pall[offset], pall[offset + step])];\n    }\n\n    const ndiv2 = n >> 1;\n    const p1 = __fft(PF, pall, bits-1, offset, step*2);\n    const p2 = __fft(PF, pall, bits-1, offset+step, step*2);\n\n    const out = new Array(n);\n\n    for (let i=0; i<ndiv2; i++) {\n        out[i] = PF.G.add(p1[i], PF.opMulGF(p2[i], PF.roots[bits][i]));\n        out[i+ndiv2] = PF.G.sub(p1[i], PF.opMulGF(p2[i], PF.roots[bits][i]));\n    }\n\n    return out;\n}\n\n", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as fUtils from \"./futils.js\";\nimport buildSqrt from \"./fsqrt.js\";\n\nexport default class F2Field {\n    constructor(F, nonResidue) {\n        this.type=\"F2\";\n        this.F = F;\n        this.zero = [this.F.zero, this.F.zero];\n        this.one = [this.F.one, this.F.zero];\n        this.negone = this.neg(this.one);\n        this.nonResidue = nonResidue;\n        this.m = F.m*2;\n        this.p = F.p;\n        this.n64 = F.n64*2;\n        this.n32 = this.n64*2;\n        this.n8 = this.n64*8;\n\n        buildSqrt(this);\n    }\n\n    _mulByNonResidue(a) {\n        return this.F.mul(this.nonResidue, a);\n    }\n\n    copy(a) {\n        return [this.F.copy(a[0]), this.F.copy(a[1])];\n    }\n\n    add(a, b) {\n        return [\n            this.F.add(a[0], b[0]),\n            this.F.add(a[1], b[1])\n        ];\n    }\n\n    double(a) {\n        return this.add(a,a);\n    }\n\n    sub(a, b) {\n        return [\n            this.F.sub(a[0], b[0]),\n            this.F.sub(a[1], b[1])\n        ];\n    }\n\n    neg(a) {\n        return this.sub(this.zero, a);\n    }\n\n    conjugate(a) {\n        return [\n            a[0],\n            this.F.neg(a[1])\n        ];\n    }\n\n    mul(a, b) {\n        const aA = this.F.mul(a[0] , b[0]);\n        const bB = this.F.mul(a[1] , b[1]);\n\n        return [\n            this.F.add( aA , this._mulByNonResidue(bB)),\n            this.F.sub(\n                this.F.mul(\n                    this.F.add(a[0], a[1]),\n                    this.F.add(b[0], b[1])),\n                this.F.add(aA, bB))];\n    }\n\n    inv(a) {\n        const t0 = this.F.square(a[0]);\n        const t1 = this.F.square(a[1]);\n        const t2 = this.F.sub(t0, this._mulByNonResidue(t1));\n        const t3 = this.F.inv(t2);\n        return [\n            this.F.mul(a[0], t3),\n            this.F.neg(this.F.mul( a[1], t3)) ];\n    }\n\n    div(a, b) {\n        return this.mul(a, this.inv(b));\n    }\n\n    square(a) {\n        const ab = this.F.mul(a[0] , a[1]);\n\n        /*\n        [\n            (a + b) * (a + non_residue * b) - ab - non_residue * ab,\n            ab + ab\n        ];\n        */\n\n        return [\n            this.F.sub(\n                this.F.mul(\n                    this.F.add(a[0], a[1]) ,\n                    this.F.add(\n                        a[0] ,\n                        this._mulByNonResidue(a[1]))),\n                this.F.add(\n                    ab,\n                    this._mulByNonResidue(ab))),\n            this.F.add(ab, ab)\n        ];\n    }\n\n    isZero(a) {\n        return this.F.isZero(a[0]) && this.F.isZero(a[1]);\n    }\n\n    eq(a, b) {\n        return this.F.eq(a[0], b[0]) && this.F.eq(a[1], b[1]);\n    }\n\n    mulScalar(base, e) {\n        return fUtils.mulScalar(this, base, e);\n    }\n\n    pow(base, e) {\n        return fUtils.exp(this, base, e);\n    }\n\n    exp(base, e) {\n        return fUtils.exp(this, base, e);\n    }\n\n    toString(a) {\n        return `[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])} ]`;\n    }\n\n    fromRng(rng) {\n        const c0 = this.F.fromRng(rng);\n        const c1 = this.F.fromRng(rng);\n        return [c0, c1];\n    }\n\n    gt(a, b) {\n        if (this.F.gt(a[0], b[0])) return true;\n        if (this.F.gt(b[0], a[0])) return false;\n        if (this.F.gt(a[1], b[1])) return true;\n        return false;\n    }\n\n    geq(a, b) {\n        return this.gt(a, b) || this.eq(a, b);\n    }\n\n    lt(a, b) {\n        return !this.geq(a,b);\n    }\n\n    leq(a, b) {\n        return !this.gt(a,b);\n    }\n\n    neq(a, b) {\n        return !this.eq(a,b);\n    }\n\n    random() {\n        return [this.F.random(), this.F.random()];\n    }\n\n\n    toRprLE(buff, o, e) {\n        this.F.toRprLE(buff, o, e[0]);\n        this.F.toRprLE(buff, o+this.F.n8, e[1]);\n    }\n\n    toRprBE(buff, o, e) {\n        this.F.toRprBE(buff, o, e[1]);\n        this.F.toRprBE(buff, o+this.F.n8, e[0]);\n    }\n\n    toRprLEM(buff, o, e) {\n        this.F.toRprLEM(buff, o, e[0]);\n        this.F.toRprLEM(buff, o+this.F.n8, e[1]);\n    }\n\n\n    toRprBEM(buff, o, e) {\n        this.F.toRprBEM(buff, o, e[1]);\n        this.F.toRprBEM(buff, o+this.F.n8, e[0]);\n    }\n\n    fromRprLE(buff, o) {\n        o = o || 0;\n        const c0 = this.F.fromRprLE(buff, o);\n        const c1 = this.F.fromRprLE(buff, o+this.F.n8);\n        return [c0, c1];\n    }\n\n    fromRprBE(buff, o) {\n        o = o || 0;\n        const c1 = this.F.fromRprBE(buff, o);\n        const c0 = this.F.fromRprBE(buff, o+this.F.n8);\n        return [c0, c1];\n    }\n\n    fromRprLEM(buff, o) {\n        o = o || 0;\n        const c0 = this.F.fromRprLEM(buff, o);\n        const c1 = this.F.fromRprLEM(buff, o+this.F.n8);\n        return [c0, c1];\n    }\n\n    fromRprBEM(buff, o) {\n        o = o || 0;\n        const c1 = this.F.fromRprBEM(buff, o);\n        const c0 = this.F.fromRprBEM(buff, o+this.F.n8);\n        return [c0, c1];\n    }\n\n    toObject(a) {\n        return a;\n    }\n\n}\n\n", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as fUtils from \"./futils.js\";\n\nexport default class F3Field {\n    constructor(F, nonResidue) {\n        this.type=\"F3\";\n        this.F = F;\n        this.zero = [this.F.zero, this.F.zero, this.F.zero];\n        this.one = [this.F.one, this.F.zero, this.F.zero];\n        this.negone = this.neg(this.one);\n        this.nonResidue = nonResidue;\n        this.m = F.m*3;\n        this.p = F.p;\n        this.n64 = F.n64*3;\n        this.n32 = this.n64*2;\n        this.n8 = this.n64*8;\n    }\n\n    _mulByNonResidue(a) {\n        return this.F.mul(this.nonResidue, a);\n    }\n\n    copy(a) {\n        return [this.F.copy(a[0]), this.F.copy(a[1]), this.F.copy(a[2])];\n    }\n\n    add(a, b) {\n        return [\n            this.F.add(a[0], b[0]),\n            this.F.add(a[1], b[1]),\n            this.F.add(a[2], b[2])\n        ];\n    }\n\n    double(a) {\n        return this.add(a,a);\n    }\n\n    sub(a, b) {\n        return [\n            this.F.sub(a[0], b[0]),\n            this.F.sub(a[1], b[1]),\n            this.F.sub(a[2], b[2])\n        ];\n    }\n\n    neg(a) {\n        return this.sub(this.zero, a);\n    }\n\n    mul(a, b) {\n\n        const aA = this.F.mul(a[0] , b[0]);\n        const bB = this.F.mul(a[1] , b[1]);\n        const cC = this.F.mul(a[2] , b[2]);\n\n        return [\n            this.F.add(\n                aA,\n                this._mulByNonResidue(\n                    this.F.sub(\n                        this.F.mul(\n                            this.F.add(a[1], a[2]),\n                            this.F.add(b[1], b[2])),\n                        this.F.add(bB, cC)))),    // aA + non_residue*((b+c)*(B+C)-bB-cC),\n\n            this.F.add(\n                this.F.sub(\n                    this.F.mul(\n                        this.F.add(a[0], a[1]),\n                        this.F.add(b[0], b[1])),\n                    this.F.add(aA, bB)),\n                this._mulByNonResidue( cC)),   // (a+b)*(A+B)-aA-bB+non_residue*cC\n\n            this.F.add(\n                this.F.sub(\n                    this.F.mul(\n                        this.F.add(a[0], a[2]),\n                        this.F.add(b[0], b[2])),\n                    this.F.add(aA, cC)),\n                bB)];                           // (a+c)*(A+C)-aA+bB-cC)\n    }\n\n    inv(a) {\n        const t0 = this.F.square(a[0]);             // t0 = a^2 ;\n        const t1 = this.F.square(a[1]);             // t1 = b^2 ;\n        const t2 = this.F.square(a[2]);             // t2 = c^2;\n        const t3 = this.F.mul(a[0],a[1]);           // t3 = ab\n        const t4 = this.F.mul(a[0],a[2]);           // t4 = ac\n        const t5 = this.F.mul(a[1],a[2]);           // t5 = bc;\n        // c0 = t0 - non_residue * t5;\n        const c0 = this.F.sub(t0, this._mulByNonResidue(t5));\n        // c1 = non_residue * t2 - t3;\n        const c1 = this.F.sub(this._mulByNonResidue(t2), t3);\n        const c2 = this.F.sub(t1, t4);              // c2 = t1-t4\n\n        // t6 = (a * c0 + non_residue * (c * c1 + b * c2)).inv();\n        const t6 =\n            this.F.inv(\n                this.F.add(\n                    this.F.mul(a[0], c0),\n                    this._mulByNonResidue(\n                        this.F.add(\n                            this.F.mul(a[2], c1),\n                            this.F.mul(a[1], c2)))));\n\n        return [\n            this.F.mul(t6, c0),         // t6*c0\n            this.F.mul(t6, c1),         // t6*c1\n            this.F.mul(t6, c2)];        // t6*c2\n    }\n\n    div(a, b) {\n        return this.mul(a, this.inv(b));\n    }\n\n    square(a) {\n        const s0 = this.F.square(a[0]);                   // s0 = a^2\n        const ab = this.F.mul(a[0], a[1]);                // ab = a*b\n        const s1 = this.F.add(ab, ab);                    // s1 = 2ab;\n        const s2 = this.F.square(\n            this.F.add(this.F.sub(a[0],a[1]), a[2]));     // s2 = (a - b + c)^2;\n        const bc = this.F.mul(a[1],a[2]);                 // bc = b*c\n        const s3 = this.F.add(bc, bc);                    // s3 = 2*bc\n        const s4 = this.F.square(a[2]);                   // s4 = c^2\n\n\n        return [\n            this.F.add(\n                s0,\n                this._mulByNonResidue(s3)),           // s0 + non_residue * s3,\n            this.F.add(\n                s1,\n                this._mulByNonResidue(s4)),           // s1 + non_residue * s4,\n            this.F.sub(\n                this.F.add( this.F.add(s1, s2) , s3 ),\n                this.F.add(s0, s4))];                      // s1 + s2 + s3 - s0 - s4\n    }\n\n    isZero(a) {\n        return this.F.isZero(a[0]) && this.F.isZero(a[1]) && this.F.isZero(a[2]);\n    }\n\n    eq(a, b) {\n        return this.F.eq(a[0], b[0]) && this.F.eq(a[1], b[1]) && this.F.eq(a[2], b[2]);\n    }\n\n    affine(a) {\n        return [this.F.affine(a[0]), this.F.affine(a[1]), this.F.affine(a[2])];\n    }\n\n    mulScalar(base, e) {\n        return fUtils.mulScalar(this, base, e);\n    }\n\n    pow(base, e) {\n        return fUtils.exp(this, base, e);\n    }\n\n    exp(base, e) {\n        return fUtils.exp(this, base, e);\n    }\n\n    toString(a) {\n        return `[ ${this.F.toString(a[0])} , ${this.F.toString(a[1])}, ${this.F.toString(a[2])} ]`;\n    }\n\n    fromRng(rng) {\n        const c0 = this.F.fromRng(rng);\n        const c1 = this.F.fromRng(rng);\n        const c2 = this.F.fromRng(rng);\n        return [c0, c1, c2];\n    }\n\n    gt(a, b) {\n        if (this.F.gt(a[0], b[0])) return true;\n        if (this.F.gt(b[0], a[0])) return false;\n        if (this.F.gt(a[1], b[1])) return true;\n        if (this.F.gt(b[1], a[1])) return false;\n        if (this.F.gt(a[2], b[2])) return true;\n        return false;\n    }\n\n\n    geq(a, b) {\n        return this.gt(a, b) || this.eq(a, b);\n    }\n\n    lt(a, b) {\n        return !this.geq(a,b);\n    }\n\n    leq(a, b) {\n        return !this.gt(a,b);\n    }\n\n    neq(a, b) {\n        return !this.eq(a,b);\n    }\n\n    random() {\n        return [this.F.random(), this.F.random(), this.F.random()];\n    }\n\n\n    toRprLE(buff, o, e) {\n        this.F.toRprLE(buff, o, e[0]);\n        this.F.toRprLE(buff, o+this.F.n8, e[1]);\n        this.F.toRprLE(buff, o+this.F.n8*2, e[2]);\n    }\n\n    toRprBE(buff, o, e) {\n        this.F.toRprBE(buff, o, e[2]);\n        this.F.toRprBE(buff, o+this.F.n8, e[1]);\n        this.F.toRprBE(buff, o+this.F.n8*2, e[0]);\n    }\n\n    toRprLEM(buff, o, e) {\n        this.F.toRprLEM(buff, o, e[0]);\n        this.F.toRprLEM(buff, o+this.F.n8, e[1]);\n        this.F.toRprLEM(buff, o+this.F.n8*2, e[2]);\n    }\n\n\n    toRprBEM(buff, o, e) {\n        this.F.toRprBEM(buff, o, e[2]);\n        this.F.toRprBEM(buff, o+this.F.n8, e[1]);\n        this.F.toRprBEM(buff, o+this.F.n8*2, e[0]);\n    }\n\n    fromRprLE(buff, o) {\n        o = o || 0;\n        const c0 = this.F.fromRprLE(buff, o);\n        const c1 = this.F.fromRprLE(buff, o+this.n8);\n        const c2 = this.F.fromRprLE(buff, o+this.n8*2);\n        return [c0, c1, c2];\n    }\n\n    fromRprBE(buff, o) {\n        o = o || 0;\n        const c2 = this.F.fromRprBE(buff, o);\n        const c1 = this.F.fromRprBE(buff, o+this.n8);\n        const c0 = this.F.fromRprBE(buff, o+this.n8*2);\n        return [c0, c1, c2];\n    }\n\n    fromRprLEM(buff, o) {\n        o = o || 0;\n        const c0 = this.F.fromRprLEM(buff, o);\n        const c1 = this.F.fromRprLEM(buff, o+this.n8);\n        const c2 = this.F.fromRprLEM(buff, o+this.n8*2);\n        return [c0, c1, c2];\n    }\n\n    fromRprBEM(buff, o) {\n        o = o || 0;\n        const c2 = this.F.fromRprBEM(buff, o);\n        const c1 = this.F.fromRprBEM(buff, o+this.n8);\n        const c0 = this.F.fromRprBEM(buff, o+this.n8*2);\n        return [c0, c1, c2];\n    }\n\n    toObject(a) {\n        return a;\n    }\n}\n", "/*\n    Copyright 2018 0kims association.\n\n    This file is part of snarkjs.\n\n    snarkjs is a free software: you can redistribute it and/or\n    modify it under the terms of the GNU General Public License as published by the\n    Free Software Foundation, either version 3 of the License, or (at your option)\n    any later version.\n\n    snarkjs is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n    more details.\n\n    You should have received a copy of the GNU General Public License along with\n    snarkjs. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\n\nimport * as fUtils from \"./futils.js\";\nimport * as Scalar from \"./scalar.js\";\n\n\nfunction isGreatest(F, a) {\n    if (Array.isArray(a)) {\n        for (let i=a.length-1; i>=0; i--) {\n            if (!F.F.isZero(a[i])) {\n                return isGreatest(F.F, a[i]);\n            }\n        }\n        return 0;\n    } else {\n        const na = F.neg(a);\n        return Scalar.gt(a, na);\n    }\n}\n\n\nexport default class EC {\n\n    constructor(F, g) {\n        this.F = F;\n        this.g = g;\n        if (this.g.length == 2) this.g[2] = this.F.one;\n        this.zero = [this.F.zero, this.F.one, this.F.zero];\n    }\n\n    add(p1, p2) {\n\n        const F = this.F;\n\n        if (this.eq(p1, this.zero)) return p2;\n        if (this.eq(p2, this.zero)) return p1;\n\n        const res = new Array(3);\n\n        const Z1Z1 = F.square( p1[2] );\n        const Z2Z2 = F.square( p2[2] );\n\n        const U1 = F.mul( p1[0] , Z2Z2 );     // U1 = X1  * Z2Z2\n        const U2 = F.mul( p2[0] , Z1Z1 );     // U2 = X2  * Z1Z1\n\n        const Z1_cubed = F.mul( p1[2] , Z1Z1);\n        const Z2_cubed = F.mul( p2[2] , Z2Z2);\n\n        const S1 = F.mul( p1[1] , Z2_cubed);  // S1 = Y1 * Z2 * Z2Z2\n        const S2 = F.mul( p2[1] , Z1_cubed);  // S2 = Y2 * Z1 * Z1Z1\n\n        if (F.eq(U1,U2) && F.eq(S1,S2)) {\n            return this.double(p1);\n        }\n\n        const H = F.sub( U2 , U1 );                    // H = U2-U1\n\n        const S2_minus_S1 = F.sub( S2 , S1 );\n\n        const I = F.square( F.add(H,H) );         // I = (2 * H)^2\n        const J = F.mul( H , I );                      // J = H * I\n\n        const r = F.add( S2_minus_S1 , S2_minus_S1 );  // r = 2 * (S2-S1)\n        const V = F.mul( U1 , I );                     // V = U1 * I\n\n        res[0] =\n            F.sub(\n                F.sub( F.square(r) , J ),\n                F.add( V , V ));                       // X3 = r^2 - J - 2 * V\n\n        const S1_J = F.mul( S1 , J );\n\n        res[1] =\n            F.sub(\n                F.mul( r , F.sub(V,res[0])),\n                F.add( S1_J,S1_J ));                   // Y3 = r * (V-X3)-2 S1 J\n\n        res[2] =\n            F.mul(\n                H,\n                F.sub(\n                    F.square( F.add(p1[2],p2[2]) ),\n                    F.add( Z1Z1 , Z2Z2 )));            // Z3 = ((Z1+Z2)^2-Z1Z1-Z2Z2) * H\n\n        return res;\n    }\n\n    neg(p) {\n        return [p[0], this.F.neg(p[1]), p[2]];\n    }\n\n    sub(a, b) {\n        return this.add(a, this.neg(b));\n    }\n\n    double(p) {\n        const F = this.F;\n\n        const res = new Array(3);\n\n        if (this.eq(p, this.zero)) return p;\n\n        const A = F.square( p[0] );                    // A = X1^2\n        const B = F.square( p[1] );                    // B = Y1^2\n        const C = F.square( B );                       // C = B^2\n\n        let D =\n            F.sub(\n                F.square( F.add(p[0] , B )),\n                F.add( A , C));\n        D = F.add(D,D);                    // D = 2 * ((X1 + B)^2 - A - C)\n\n        const E = F.add( F.add(A,A), A);          // E = 3 * A\n        const FF =F.square( E );                       // F = E^2\n\n        res[0] = F.sub( FF , F.add(D,D) );         // X3 = F - 2 D\n\n        let eightC = F.add( C , C );\n        eightC = F.add( eightC , eightC );\n        eightC = F.add( eightC , eightC );\n\n        res[1] =\n            F.sub(\n                F.mul(\n                    E,\n                    F.sub( D, res[0] )),\n                eightC);                                    // Y3 = E * (D - X3) - 8 * C\n\n        const Y1Z1 = F.mul( p[1] , p[2] );\n        res[2] = F.add( Y1Z1 , Y1Z1 );                 // Z3 = 2 * Y1 * Z1\n\n        return res;\n    }\n\n    timesScalar(base, e) {\n        return fUtils.mulScalar(this, base, e);\n    }\n\n    mulScalar(base, e) {\n        return fUtils.mulScalar(this, base, e);\n    }\n\n    affine(p) {\n        const F = this.F;\n        if (this.isZero(p)) {\n            return this.zero;\n        } else if (F.eq(p[2], F.one)) {\n            return p;\n        } else {\n            const Z_inv = F.inv(p[2]);\n            const Z2_inv = F.square(Z_inv);\n            const Z3_inv = F.mul(Z2_inv, Z_inv);\n\n            const res = new Array(3);\n            res[0] = F.mul(p[0],Z2_inv);\n            res[1] = F.mul(p[1],Z3_inv);\n            res[2] = F.one;\n\n            return res;\n        }\n    }\n\n    multiAffine(arr) {\n        const keys = Object.keys(arr);\n        const F = this.F;\n        const accMul = new Array(keys.length+1);\n        accMul[0] = F.one;\n        for (let i = 0; i< keys.length; i++) {\n            if (F.eq(arr[keys[i]][2], F.zero)) {\n                accMul[i+1] = accMul[i];\n            } else {\n                accMul[i+1] = F.mul(accMul[i], arr[keys[i]][2]);\n            }\n        }\n\n        accMul[keys.length] = F.inv(accMul[keys.length]);\n\n        for (let i = keys.length-1; i>=0; i--) {\n            if (F.eq(arr[keys[i]][2], F.zero)) {\n                accMul[i] = accMul[i+1];\n                arr[keys[i]] = this.zero;\n            } else {\n                const Z_inv = F.mul(accMul[i], accMul[i+1]);\n                accMul[i] = F.mul(arr[keys[i]][2], accMul[i+1]);\n\n                const Z2_inv = F.square(Z_inv);\n                const Z3_inv = F.mul(Z2_inv, Z_inv);\n\n                arr[keys[i]][0] = F.mul(arr[keys[i]][0],Z2_inv);\n                arr[keys[i]][1] = F.mul(arr[keys[i]][1],Z3_inv);\n                arr[keys[i]][2] = F.one;\n            }\n        }\n\n    }\n\n    eq(p1, p2) {\n        const F = this.F;\n\n        if (this.F.eq(p1[2], this.F.zero)) return this.F.eq(p2[2], this.F.zero);\n        if (this.F.eq(p2[2], this.F.zero)) return false;\n\n        const Z1Z1 = F.square( p1[2] );\n        const Z2Z2 = F.square( p2[2] );\n\n        const U1 = F.mul( p1[0] , Z2Z2 );\n        const U2 = F.mul( p2[0] , Z1Z1 );\n\n        const Z1_cubed = F.mul( p1[2] , Z1Z1);\n        const Z2_cubed = F.mul( p2[2] , Z2Z2);\n\n        const S1 = F.mul( p1[1] , Z2_cubed);\n        const S2 = F.mul( p2[1] , Z1_cubed);\n\n        return (F.eq(U1,U2) && F.eq(S1,S2));\n    }\n\n    isZero(p) {\n        return this.F.isZero(p[2]);\n    }\n\n    toString(p) {\n        const cp = this.affine(p);\n        return `[ ${this.F.toString(cp[0])} , ${this.F.toString(cp[1])} ]`;\n    }\n\n    fromRng(rng) {\n        const F = this.F;\n        let P = [];\n        let greatest;\n        do {\n            P[0] = F.fromRng(rng);\n            greatest = rng.nextBool();\n            const x3b = F.add(F.mul(F.square(P[0]), P[0]), this.b);\n            P[1] = F.sqrt(x3b);\n        } while ((P[1] == null)||(F.isZero[P]));\n\n        const s = isGreatest(F, P[1]);\n        if (greatest ^ s) P[1] = F.neg(P[1]);\n        P[2] = F.one;\n\n        if (this.cofactor) {\n            P = this.mulScalar(P, this.cofactor);\n        }\n\n        P = this.affine(P);\n\n        return P;\n\n    }\n\n    toRprLE(buff, o, p) {\n        p = this.affine(p);\n        if (this.isZero(p)) {\n            const BuffV = new Uint8Array(buff, o, this.F.n8*2);\n            BuffV.fill(0);\n            return;\n        }\n        this.F.toRprLE(buff, o, p[0]);\n        this.F.toRprLE(buff, o+this.F.n8, p[1]);\n    }\n\n    toRprBE(buff, o, p) {\n        p = this.affine(p);\n        if (this.isZero(p)) {\n            const BuffV = new Uint8Array(buff, o, this.F.n8*2);\n            BuffV.fill(0);\n            return;\n        }\n        this.F.toRprBE(buff, o, p[0]);\n        this.F.toRprBE(buff, o+this.F.n8, p[1]);\n    }\n\n    toRprLEM(buff, o, p) {\n        p = this.affine(p);\n        if (this.isZero(p)) {\n            const BuffV = new Uint8Array(buff, o, this.F.n8*2);\n            BuffV.fill(0);\n            return;\n        }\n        this.F.toRprLEM(buff, o, p[0]);\n        this.F.toRprLEM(buff, o+this.F.n8, p[1]);\n    }\n\n    toRprLEJM(buff, o, p) {\n        p = this.affine(p);\n        if (this.isZero(p)) {\n            const BuffV = new Uint8Array(buff, o, this.F.n8*2);\n            BuffV.fill(0);\n            return;\n        }\n        this.F.toRprLEM(buff, o, p[0]);\n        this.F.toRprLEM(buff, o+this.F.n8, p[1]);\n        this.F.toRprLEM(buff, o+2*this.F.n8, p[2]);\n    }\n\n\n    toRprBEM(buff, o, p) {\n        p = this.affine(p);\n        if (this.isZero(p)) {\n            const BuffV = new Uint8Array(buff, o, this.F.n8*2);\n            BuffV.fill(0);\n            return;\n        }\n        this.F.toRprBEM(buff, o, p[0]);\n        this.F.toRprBEM(buff, o+this.F.n8, p[1]);\n    }\n\n    fromRprLE(buff, o) {\n        o = o || 0;\n        const x = this.F.fromRprLE(buff, o);\n        const y = this.F.fromRprLE(buff, o+this.F.n8);\n        if (this.F.isZero(x) && this.F.isZero(y)) {\n            return this.zero;\n        }\n        return [x, y, this.F.one];\n    }\n\n    fromRprBE(buff, o) {\n        o = o || 0;\n        const x = this.F.fromRprBE(buff, o);\n        const y = this.F.fromRprBE(buff, o+this.F.n8);\n        if (this.F.isZero(x) && this.F.isZero(y)) {\n            return this.zero;\n        }\n        return [x, y, this.F.one];\n    }\n\n    fromRprLEM(buff, o) {\n        o = o || 0;\n        const x = this.F.fromRprLEM(buff, o);\n        const y = this.F.fromRprLEM(buff, o+this.F.n8);\n        if (this.F.isZero(x) && this.F.isZero(y)) {\n            return this.zero;\n        }\n        return [x, y, this.F.one];\n    }\n\n    fromRprLEJM(buff, o) {\n        o = o || 0;\n        const x = this.F.fromRprLEM(buff, o);\n        const y = this.F.fromRprLEM(buff, o+this.F.n8);\n        const z = this.F.fromRprLEM(buff, o+this.F.n8*2);\n        if (this.F.isZero(x) && this.F.isZero(y)) {\n            return this.zero;\n        }\n        return [x, y, z];\n    }\n\n    fromRprBEM(buff, o) {\n        o = o || 0;\n        const x = this.F.fromRprBEM(buff, o);\n        const y = this.F.fromRprBEM(buff, o+this.F.n8);\n        if (this.F.isZero(x) && this.F.isZero(y)) {\n            return this.zero;\n        }\n        return [x, y, this.F.one];\n    }\n\n    fromRprCompressed(buff, o) {\n        const F = this.F;\n        const v = new Uint8Array(buff.buffer, o, F.n8);\n        if (v[0] & 0x40) return this.zero;\n        const P = new Array(3);\n\n        const greatest = ((v[0] & 0x80) != 0);\n        v[0] = v[0] & 0x7F;\n        P[0] = F.fromRprBE(buff, o);\n        if (greatest) v[0] = v[0] | 0x80;  // set back again the old value\n\n        const x3b = F.add(F.mul(F.square(P[0]), P[0]), this.b);\n        P[1] = F.sqrt(x3b);\n\n        if (P[1] === null) {\n            throw new Error(\"Invalid Point!\");\n        }\n\n        const s = isGreatest(F, P[1]);\n        if (greatest ^ s) P[1] = F.neg(P[1]);\n        P[2] = F.one;\n\n        return P;\n    }\n\n    toRprCompressed(buff, o, p) {\n        p = this.affine(p);\n        const v = new Uint8Array(buff.buffer, o, this.F.n8);\n        if (this.isZero(p)) {\n            v.fill(0);\n            v[0] = 0x40;\n            return;\n        }\n        this.F.toRprBE(buff, o, p[0]);\n\n        if (isGreatest(this.F, p[1])) {\n            v[0] = v[0] | 0x80;\n        }\n    }\n\n\n    fromRprUncompressed(buff, o) {\n        if (buff[0] & 0x40) return this.zero;\n\n        return this.fromRprBE(buff, o);\n    }\n\n    toRprUncompressed(buff, o, p) {\n        this.toRprBE(buff, o, p);\n\n        if (this.isZero(p)) {\n            buff[o] = buff[o] | 0x40;\n        }\n    }\n\n\n}\n\n\n", "import { buildBn128 as buildBn128wasm } from \"wasmcurves\";\nimport buildEngine from \"./engine.js\";\nimport * as Scalar from \"./scalar.js\";\nimport { ModuleBuilder } from \"wasmbuilder\";\n\nglobalThis.curve_bn128 = null;\n\nexport default async function buildBn128(singleThread, plugins) {\n\n    const moduleBuilder = new ModuleBuilder();\n    moduleBuilder.setMemory(25);\n    buildBn128wasm(moduleBuilder);\n\n    if (plugins) plugins(moduleBuilder);\n\n    const bn128wasm = {};\n\n    bn128wasm.code = moduleBuilder.build();\n    bn128wasm.pq = moduleBuilder.modules.f1m.pq;\n    bn128wasm.pr = moduleBuilder.modules.frm.pq;\n    bn128wasm.pG1gen = moduleBuilder.modules.bn128.pG1gen;\n    bn128wasm.pG1zero = moduleBuilder.modules.bn128.pG1zero;\n    bn128wasm.pG1b = moduleBuilder.modules.bn128.pG1b;\n    bn128wasm.pG2gen = moduleBuilder.modules.bn128.pG2gen;\n    bn128wasm.pG2zero = moduleBuilder.modules.bn128.pG2zero;\n    bn128wasm.pG2b = moduleBuilder.modules.bn128.pG2b;\n    bn128wasm.pOneT = moduleBuilder.modules.bn128.pOneT;\n    bn128wasm.prePSize = moduleBuilder.modules.bn128.prePSize;\n    bn128wasm.preQSize = moduleBuilder.modules.bn128.preQSize;\n    bn128wasm.n8q = 32;\n    bn128wasm.n8r = 32;\n    bn128wasm.q = moduleBuilder.modules.bn128.q;\n    bn128wasm.r = moduleBuilder.modules.bn128.r;\n\n    if ((!singleThread) && (globalThis.curve_bn128)) return globalThis.curve_bn128;\n    const params = {\n        name: \"bn128\",\n        wasm: bn128wasm,\n        q: Scalar.e(\"21888242871839275222246405745257275088696311157297823662689037894645226208583\"),\n        r: Scalar.e(\"21888242871839275222246405745257275088548364400416034343698204186575808495617\"),\n        n8q: 32,\n        n8r: 32,\n        cofactorG2: Scalar.e(\"30644e72e131a029b85045b68181585e06ceecda572a2489345f2299c0f9fa8d\", 16),\n        singleThread: singleThread ? true : false\n    };\n\n    const curve = await buildEngine(params);\n    curve.terminate = async function () {\n        if (!params.singleThread) {\n            globalThis.curve_bn128 = null;\n            await this.tm.terminate();\n        }\n    };\n\n    if (!singleThread) {\n        globalThis.curve_bn128 = curve;\n    }\n\n    return curve;\n}\n\n", "import WasmField1 from \"./wasm_field1.js\";\nimport WasmField2 from \"./wasm_field2.js\";\nimport WasmField3 from \"./wasm_field3.js\";\nimport WasmCurve from \"./wasm_curve.js\";\nimport buildThreadManager from \"./threadman.js\";\nimport * as Scalar from \"./scalar.js\";\nimport buildBatchApplyKey from \"./engine_applykey.js\";\nimport buildPairing from \"./engine_pairing.js\";\nimport buildMultiExp from \"./engine_multiexp.js\";\nimport buildFFT from \"./engine_fft.js\";\n\nexport default async function buildEngine(params) {\n\n    const tm = await buildThreadManager(params.wasm, params.singleThread);\n\n\n    const curve = {};\n\n    curve.q = Scalar.e(params.wasm.q.toString());\n    curve.r = Scalar.e(params.wasm.r.toString());\n    curve.name = params.name;\n    curve.tm = tm;\n    curve.prePSize = params.wasm.prePSize;\n    curve.preQSize = params.wasm.preQSize;\n    curve.Fr = new WasmField1(tm, \"frm\", params.n8r, params.r);\n    curve.F1 = new WasmField1(tm, \"f1m\", params.n8q, params.q);\n    curve.F2 = new WasmField2(tm, \"f2m\", curve.F1);\n    curve.G1 = new WasmCurve(tm, \"g1m\", curve.F1, params.wasm.pG1gen, params.wasm.pG1b, params.cofactorG1);\n    curve.G2 = new WasmCurve(tm, \"g2m\", curve.F2, params.wasm.pG2gen, params.wasm.pG2b, params.cofactorG2);\n    curve.F6 = new WasmField3(tm, \"f6m\", curve.F2);\n    curve.F12 = new WasmField2(tm, \"ftm\", curve.F6);\n\n    curve.Gt = curve.F12;\n\n    buildBatchApplyKey(curve, \"G1\");\n    buildBatchApplyKey(curve, \"G2\");\n    buildBatchApplyKey(curve, \"Fr\");\n\n    buildMultiExp(curve, \"G1\");\n    buildMultiExp(curve, \"G2\");\n\n    buildFFT(curve, \"G1\");\n    buildFFT(curve, \"G2\");\n    buildFFT(curve, \"Fr\");\n\n    buildPairing(curve);\n\n    curve.array2buffer = function(arr, sG) {\n        const buff = new Uint8Array(sG*arr.length);\n\n        for (let i=0; i<arr.length; i++) {\n            buff.set(arr[i], i*sG);\n        }\n\n        return buff;\n    };\n\n    curve.buffer2array = function(buff , sG) {\n        const n= buff.byteLength / sG;\n        const arr = new Array(n);\n        for (let i=0; i<n; i++) {\n            arr[i] = buff.slice(i*sG, i*sG+sG);\n        }\n        return arr;\n    };\n\n    return curve;\n}\n\n\n", "import * as Scalar from \"./scalar.js\";\nimport * as utils from \"./utils.js\";\nimport { getThreadRng } from \"./random.js\";\nimport buildBatchConvert from \"./engine_batchconvert.js\";\nimport BigBuffer from \"./bigbuffer.js\";\n\n\nexport default class WasmField1 {\n\n    constructor(tm, prefix, n8, p) {\n        this.tm = tm;\n        this.prefix = prefix;\n\n        this.p = p;\n        this.n8 = n8;\n        this.type = \"F1\";\n        this.m = 1;\n\n        this.half = Scalar.shiftRight(p, Scalar.one);\n        this.bitLength = Scalar.bitLength(p);\n        this.mask = Scalar.sub(Scalar.shiftLeft(Scalar.one, this.bitLength), Scalar.one);\n\n        this.pOp1 = tm.alloc(n8);\n        this.pOp2 = tm.alloc(n8);\n        this.pOp3 = tm.alloc(n8);\n        this.tm.instance.exports[prefix + \"_zero\"](this.pOp1);\n        this.zero = this.tm.getBuff(this.pOp1, this.n8);\n        this.tm.instance.exports[prefix + \"_one\"](this.pOp1);\n        this.one = this.tm.getBuff(this.pOp1, this.n8);\n\n        this.negone = this.neg(this.one);\n        this.two = this.add(this.one, this.one);\n\n        this.n64 = Math.floor(n8/8);\n        this.n32 = Math.floor(n8/4);\n\n        if(this.n64*8 != this.n8) {\n            throw new Error(\"n8 must be a multiple of 8\");\n        }\n\n        this.half = Scalar.shiftRight(this.p, Scalar.one);\n        this.nqr = this.two;\n        let r = this.exp(this.nqr, this.half);\n        while (!this.eq(r, this.negone)) {\n            this.nqr = this.add(this.nqr, this.one);\n            r = this.exp(this.nqr, this.half);\n        }\n\n        this.shift = this.mul(this.nqr, this.nqr);\n        this.shiftInv = this.inv(this.shift);\n\n        this.s = 0;\n        let t = Scalar.sub(this.p, Scalar.one);\n\n        while ( !Scalar.isOdd(t) ) {\n            this.s = this.s + 1;\n            t = Scalar.shiftRight(t, Scalar.one);\n        }\n\n        this.w = [];\n        this.w[this.s] = this.exp(this.nqr, t);\n\n        for (let i= this.s-1; i>=0; i--) {\n            this.w[i] = this.square(this.w[i+1]);\n        }\n\n        if (!this.eq(this.w[0], this.one)) {\n            throw new Error(\"Error calculating roots of unity\");\n        }\n\n        this.batchToMontgomery = buildBatchConvert(tm, prefix + \"_batchToMontgomery\", this.n8, this.n8);\n        this.batchFromMontgomery = buildBatchConvert(tm, prefix + \"_batchFromMontgomery\", this.n8, this.n8);\n    }\n\n\n    op2(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op2Bool(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2);\n    }\n\n    op1(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op1Bool(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n    }\n\n    add(a,b) {\n        return this.op2(\"_add\", a, b);\n    }\n\n\n    eq(a,b) {\n        return this.op2Bool(\"_eq\", a, b);\n    }\n\n    isZero(a) {\n        return this.op1Bool(\"_isZero\", a);\n    }\n\n    sub(a,b) {\n        return this.op2(\"_sub\", a, b);\n    }\n\n    neg(a) {\n        return this.op1(\"_neg\", a);\n    }\n\n    inv(a) {\n        return this.op1(\"_inverse\", a);\n    }\n\n    toMontgomery(a) {\n        return this.op1(\"_toMontgomery\", a);\n    }\n\n    fromMontgomery(a) {\n        return this.op1(\"_fromMontgomery\", a);\n    }\n\n    mul(a,b) {\n        return this.op2(\"_mul\", a, b);\n    }\n\n    div(a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_inverse\"](this.pOp2, this.pOp2);\n        this.tm.instance.exports[this.prefix + \"_mul\"](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    square(a) {\n        return this.op1(\"_square\", a);\n    }\n\n    isSquare(a) {\n        return this.op1Bool(\"_isSquare\", a);\n    }\n\n    sqrt(a) {\n        return this.op1(\"_sqrt\", a);\n    }\n\n    exp(a, b) {\n        if (!(b instanceof Uint8Array)) {\n            b = Scalar.toLEBuff(Scalar.e(b));\n        }\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_exp\"](this.pOp1, this.pOp2, b.byteLength, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    isNegative(a) {\n        return this.op1Bool(\"_isNegative\", a);\n    }\n\n    e(a, b) {\n        if (a instanceof Uint8Array) return a;\n        let ra = Scalar.e(a, b);\n        if (Scalar.isNegative(ra)) {\n            ra = Scalar.neg(ra);\n            if (Scalar.gt(ra, this.p)) {\n                ra = Scalar.mod(ra, this.p);\n            }\n            ra = Scalar.sub(this.p, ra);\n        } else {\n            if (Scalar.gt(ra, this.p)) {\n                ra = Scalar.mod(ra, this.p);\n            }\n        }\n        const buff = utils.leInt2Buff(ra, this.n8);\n        return this.toMontgomery(buff);\n    }\n\n    toString(a, radix) {\n        const an = this.fromMontgomery(a);\n        const s = Scalar.fromRprLE(an, 0);\n        return Scalar.toString(s, radix);\n    }\n\n    fromRng(rng) {\n        let v;\n        const buff = new Uint8Array(this.n8);\n        do {\n            v = Scalar.zero;\n            for (let i=0; i<this.n64; i++) {\n                v = Scalar.add(v,  Scalar.shiftLeft(rng.nextU64(), 64*i));\n            }\n            v = Scalar.band(v, this.mask);\n        } while (Scalar.geq(v, this.p));\n        Scalar.toRprLE(buff, 0, v, this.n8);\n        return buff;\n    }\n\n    random() {\n        return this.fromRng(getThreadRng());\n    }\n\n    toObject(a) {\n        const an = this.fromMontgomery(a);\n        return Scalar.fromRprLE(an, 0);\n    }\n\n    fromObject(a) {\n        const buff = new Uint8Array(this.n8);\n        Scalar.toRprLE(buff, 0, a, this.n8);\n        return this.toMontgomery(buff);\n    }\n\n    toRprLE(buff, offset, a) {\n        buff.set(this.fromMontgomery(a), offset);\n    }\n\n    toRprBE(buff, offset, a) {\n        const buff2 = this.fromMontgomery(a);\n        for (let i=0; i<this.n8/2; i++) {\n            const aux = buff2[i];\n            buff2[i] = buff2[this.n8-1-i];\n            buff2[this.n8-1-i] = aux;\n        }\n        buff.set(buff2, offset);\n    }\n\n    fromRprLE(buff, offset) {\n        offset = offset || 0;\n        const res = buff.slice(offset, offset + this.n8);\n        return this.toMontgomery(res);\n    }\n\n    async batchInverse(buffIn) {\n        let returnArray = false;\n        const sIn = this.n8;\n        const sOut = this.n8;\n\n        if (Array.isArray(buffIn)) {\n            buffIn = utils.array2buffer(buffIn, sIn );\n            returnArray = true;\n        } else {\n            buffIn = buffIn.slice(0, buffIn.byteLength);\n        }\n\n        const nPoints = Math.floor(buffIn.byteLength / sIn);\n        if ( nPoints * sIn !== buffIn.byteLength) {\n            throw new Error(\"Invalid buffer size\");\n        }\n        const pointsPerChunk = Math.floor(nPoints/this.tm.concurrency);\n        const opPromises = [];\n        for (let i=0; i<this.tm.concurrency; i++) {\n            let n;\n            if (i< this.tm.concurrency-1) {\n                n = pointsPerChunk;\n            } else {\n                n = nPoints - i*pointsPerChunk;\n            }\n            if (n==0) continue;\n\n            const buffChunk = buffIn.slice(i*pointsPerChunk*sIn, i*pointsPerChunk*sIn + n*sIn);\n            const task = [\n                {cmd: \"ALLOCSET\", var: 0, buff:buffChunk},\n                {cmd: \"ALLOC\", var: 1, len:sOut * n},\n                {cmd: \"CALL\", fnName: this.prefix + \"_batchInverse\", params: [\n                    {var: 0},\n                    {val: sIn},\n                    {val: n},\n                    {var: 1},\n                    {val: sOut},\n                ]},\n                {cmd: \"GET\", out: 0, var: 1, len:sOut * n},\n            ];\n            opPromises.push(\n                this.tm.queueAction(task)\n            );\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let fullBuffOut;\n        if (buffIn instanceof BigBuffer) {\n            fullBuffOut = new BigBuffer(nPoints*sOut);\n        } else {\n            fullBuffOut = new Uint8Array(nPoints*sOut);\n        }\n\n        let p =0;\n        for (let i=0; i<result.length; i++) {\n            fullBuffOut.set(result[i][0], p);\n            p+=result[i][0].byteLength;\n        }\n\n        if (returnArray) {\n            return utils.buffer2array(fullBuffOut, sOut);\n        } else {\n            return fullBuffOut;\n        }\n\n    }\n\n}\n\n\n", "/* global BigInt */\nimport * as Scalar from \"./scalar.js\";\n\nexport function stringifyBigInts(o) {\n    if (typeof o == \"bigint\" || o.eq !== undefined) {\n        return o.toString(10);\n    } else if (o instanceof Uint8Array) {\n        return Scalar.fromRprLE(o, 0);\n    } else if (Array.isArray(o)) {\n        return o.map(stringifyBigInts);\n    } else if (typeof o == \"object\") {\n        const res = {};\n        const keys = Object.keys(o);\n        keys.forEach((k) => {\n            res[k] = stringifyBigInts(o[k]);\n        });\n        return res;\n    } else {\n        return o;\n    }\n}\n\nexport function unstringifyBigInts(o) {\n    if (typeof o == \"string\" && /^[0-9]+$/.test(o)) {\n        return BigInt(o);\n    } else if (typeof o == \"string\" && /^0x[0-9a-fA-F]+$/.test(o)) {\n        return BigInt(o);\n    } else if (Array.isArray(o)) {\n        return o.map(unstringifyBigInts);\n    } else if (typeof o == \"object\") {\n        if (o === null) return null;\n        const res = {};\n        const keys = Object.keys(o);\n        keys.forEach((k) => {\n            res[k] = unstringifyBigInts(o[k]);\n        });\n        return res;\n    } else {\n        return o;\n    }\n}\n\nexport function beBuff2int(buff) {\n    let res = BigInt(0);\n    let i = buff.length;\n    let offset = 0;\n    const buffV = new DataView(buff.buffer, buff.byteOffset, buff.byteLength);\n    while (i > 0) {\n        if (i >= 4) {\n            i -= 4;\n            res += BigInt(buffV.getUint32(i)) << BigInt(offset * 8);\n            offset += 4;\n        } else if (i >= 2) {\n            i -= 2;\n            res += BigInt(buffV.getUint16(i)) << BigInt(offset * 8);\n            offset += 2;\n        } else {\n            i -= 1;\n            res += BigInt(buffV.getUint8(i)) << BigInt(offset * 8);\n            offset += 1;\n        }\n    }\n    return res;\n}\n\nexport function beInt2Buff(n, len) {\n    let r = n;\n    const buff = new Uint8Array(len);\n    const buffV = new DataView(buff.buffer);\n    let o = len;\n    while (o > 0) {\n        if (o - 4 >= 0) {\n            o -= 4;\n            buffV.setUint32(o, Number(r & BigInt(0xffffffff)));\n            r = r >> BigInt(32);\n        } else if (o - 2 >= 0) {\n            o -= 2;\n            buffV.setUint16(o, Number(r & BigInt(0xffff)));\n            r = r >> BigInt(16);\n        } else {\n            o -= 1;\n            buffV.setUint8(o, Number(r & BigInt(0xff)));\n            r = r >> BigInt(8);\n        }\n    }\n    if (r) {\n        throw new Error(\"Number does not fit in this length\");\n    }\n    return buff;\n}\n\nexport function leBuff2int(buff) {\n    let res = BigInt(0);\n    let i = 0;\n    const buffV = new DataView(buff.buffer, buff.byteOffset, buff.byteLength);\n    while (i < buff.length) {\n        if (i + 4 <= buff.length) {\n            res += BigInt(buffV.getUint32(i, true)) << BigInt(i * 8);\n            i += 4;\n        } else if (i + 2 <= buff.length) {\n            res += BigInt(buffV.getUint16(i, true)) << BigInt(i * 8);\n            i += 2;\n        } else {\n            res += BigInt(buffV.getUint8(i, true)) << BigInt(i * 8);\n            i += 1;\n        }\n    }\n    return res;\n}\n\nexport function leInt2Buff(n, len) {\n    let r = n;\n    if (typeof len === \"undefined\") {\n        len = Math.floor((Scalar.bitLength(n) - 1) / 8) + 1;\n        if (len == 0) len = 1;\n    }\n    const buff = new Uint8Array(len);\n    const buffV = new DataView(buff.buffer);\n    let o = 0;\n    while (o < len) {\n        if (o + 4 <= len) {\n            buffV.setUint32(o, Number(r & BigInt(0xffffffff)), true);\n            o += 4;\n            r = r >> BigInt(32);\n        } else if (o + 2 <= len) {\n            buffV.setUint16(o, Number(r & BigInt(0xffff)), true);\n            o += 2;\n            r = r >> BigInt(16);\n        } else {\n            buffV.setUint8(o, Number(r & BigInt(0xff)), true);\n            o += 1;\n            r = r >> BigInt(8);\n        }\n    }\n    if (r) {\n        throw new Error(\"Number does not fit in this length\");\n    }\n    return buff;\n}\n\nexport function stringifyFElements(F, o) {\n    if (typeof o == \"bigint\" || o.eq !== undefined) {\n        return o.toString(10);\n    } else if (o instanceof Uint8Array) {\n        return F.toString(F.e(o));\n    } else if (Array.isArray(o)) {\n        return o.map(stringifyFElements.bind(this, F));\n    } else if (typeof o == \"object\") {\n        const res = {};\n        const keys = Object.keys(o);\n        keys.forEach((k) => {\n            res[k] = stringifyFElements(F, o[k]);\n        });\n        return res;\n    } else {\n        return o;\n    }\n}\n\nexport function unstringifyFElements(F, o) {\n    if (typeof o == \"string\" && /^[0-9]+$/.test(o)) {\n        return F.e(o);\n    } else if (typeof o == \"string\" && /^0x[0-9a-fA-F]+$/.test(o)) {\n        return F.e(o);\n    } else if (Array.isArray(o)) {\n        return o.map(unstringifyFElements.bind(this, F));\n    } else if (typeof o == \"object\") {\n        if (o === null) return null;\n        const res = {};\n        const keys = Object.keys(o);\n        keys.forEach((k) => {\n            res[k] = unstringifyFElements(F, o[k]);\n        });\n        return res;\n    } else {\n        return o;\n    }\n}\n\nconst _revTable = [];\nfor (let i = 0; i < 256; i++) {\n    _revTable[i] = _revSlow(i, 8);\n}\n\nfunction _revSlow(idx, bits) {\n    let res = 0;\n    let a = idx;\n    for (let i = 0; i < bits; i++) {\n        res <<= 1;\n        res = res | (a & 1);\n        a >>= 1;\n    }\n    return res;\n}\n\nexport function bitReverse(idx, bits) {\n    return (\n        (_revTable[idx >>> 24] |\n        (_revTable[(idx >>> 16) & 0xff] << 8) |\n        (_revTable[(idx >>> 8) & 0xff] << 16) |\n        (_revTable[idx & 0xff] << 24)) >>>\n        (32 - bits)\n    );\n}\n\nexport function log2(V) {\n    return (\n        ((V & 0xffff0000) !== 0 ? ((V &= 0xffff0000), 16) : 0) |\n        ((V & 0xff00ff00) !== 0 ? ((V &= 0xff00ff00), 8) : 0) |\n        ((V & 0xf0f0f0f0) !== 0 ? ((V &= 0xf0f0f0f0), 4) : 0) |\n        ((V & 0xcccccccc) !== 0 ? ((V &= 0xcccccccc), 2) : 0) |\n        ((V & 0xaaaaaaaa) !== 0)\n    );\n}\n\nexport function buffReverseBits(buff, eSize) {\n    const n = buff.byteLength / eSize;\n    const bits = log2(n);\n    if (n != 1 << bits) {\n        throw new Error(\"Invalid number of pointers\");\n    }\n    for (let i = 0; i < n; i++) {\n        const r = bitReverse(i, bits);\n        if (i > r) {\n            const tmp = buff.slice(i * eSize, (i + 1) * eSize);\n            buff.set(buff.slice(r * eSize, (r + 1) * eSize), i * eSize);\n            buff.set(tmp, r * eSize);\n        }\n    }\n}\n\nexport function array2buffer(arr, sG) {\n    const buff = new Uint8Array(sG * arr.length);\n\n    for (let i = 0; i < arr.length; i++) {\n        buff.set(arr[i], i * sG);\n    }\n\n    return buff;\n}\n\nexport function buffer2array(buff, sG) {\n    const n = buff.byteLength / sG;\n    const arr = new Array(n);\n    for (let i = 0; i < n; i++) {\n        arr[i] = buff.slice(i * sG, i * sG + sG);\n    }\n    return arr;\n}\n", "import BigBuffer from \"./bigbuffer.js\";\n\nexport default function buildBatchConvert(tm, fnName, sIn, sOut) {\n    return async function batchConvert(buffIn) {\n        const nPoints = Math.floor(buffIn.byteLength / sIn);\n        if ( nPoints * sIn !== buffIn.byteLength) {\n            throw new Error(\"Invalid buffer size\");\n        }\n        const pointsPerChunk = Math.floor(nPoints/tm.concurrency);\n        const opPromises = [];\n        for (let i=0; i<tm.concurrency; i++) {\n            let n;\n            if (i< tm.concurrency-1) {\n                n = pointsPerChunk;\n            } else {\n                n = nPoints - i*pointsPerChunk;\n            }\n            if (n==0) continue;\n\n            const buffChunk = buffIn.slice(i*pointsPerChunk*sIn, i*pointsPerChunk*sIn + n*sIn);\n            const task = [\n                {cmd: \"ALLOCSET\", var: 0, buff:buffChunk},\n                {cmd: \"ALLOC\", var: 1, len:sOut * n},\n                {cmd: \"CALL\", fnName: fnName, params: [\n                    {var: 0},\n                    {val: n},\n                    {var: 1}\n                ]},\n                {cmd: \"GET\", out: 0, var: 1, len:sOut * n},\n            ];\n            opPromises.push(\n                tm.queueAction(task)\n            );\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let fullBuffOut;\n        if (buffIn instanceof BigBuffer) {\n            fullBuffOut = new BigBuffer(nPoints*sOut);\n        } else {\n            fullBuffOut = new Uint8Array(nPoints*sOut);\n        }\n\n        let p =0;\n        for (let i=0; i<result.length; i++) {\n            fullBuffOut.set(result[i][0], p);\n            p+=result[i][0].byteLength;\n        }\n\n        return fullBuffOut;\n    };\n}\n", "\nconst PAGE_SIZE = 1<<30;\n\nexport default class BigBuffer {\n\n    constructor(size) {\n        this.buffers = [];\n        this.byteLength = size;\n        for (let i=0; i<size; i+= PAGE_SIZE) {\n            const n = Math.min(size-i, PAGE_SIZE);\n            this.buffers.push(new Uint8Array(n));\n        }\n\n    }\n\n    slice(fr, to) {\n        if ( to === undefined ) to = this.byteLength;\n        if ( fr === undefined ) fr = 0;\n        const len = to-fr;\n\n        const firstPage = Math.floor(fr / PAGE_SIZE);\n        const lastPage = Math.floor((fr+len-1) / PAGE_SIZE);\n\n        if ((firstPage == lastPage)||(len==0))\n            return this.buffers[firstPage].slice(fr%PAGE_SIZE, fr%PAGE_SIZE + len);\n\n        let buff;\n\n        let p = firstPage;\n        let o = fr % PAGE_SIZE;\n        // Remaining bytes to read\n        let r = len;\n        while (r>0) {\n            // bytes to copy from this page\n            const l = (o+r > PAGE_SIZE) ? (PAGE_SIZE -o) : r;\n            const srcView = new Uint8Array(this.buffers[p].buffer, this.buffers[p].byteOffset+o, l);\n            if (l == len) return srcView.slice();\n            if (!buff) {\n                if (len <= PAGE_SIZE) {\n                    buff = new Uint8Array(len);\n                } else {\n                    buff = new BigBuffer(len);\n                }\n            }\n            buff.set(srcView, len-r);\n            r = r-l;\n            p ++;\n            o = 0;\n        }\n\n        return buff;\n    }\n\n    set(buff, offset) {\n        if (offset === undefined) offset = 0;\n\n        const len = buff.byteLength;\n\n        if (len==0) return;\n\n        const firstPage = Math.floor(offset / PAGE_SIZE);\n        const lastPage = Math.floor((offset+len-1) / PAGE_SIZE);\n\n        if (firstPage == lastPage) {\n            if ((buff instanceof BigBuffer)&&(buff.buffers.length==1)) {\n                return this.buffers[firstPage].set(buff.buffers[0], offset % PAGE_SIZE);\n            } else {\n                return this.buffers[firstPage].set(buff, offset % PAGE_SIZE);\n            }\n\n        }\n\n\n        let p = firstPage;\n        let o = offset % PAGE_SIZE;\n        let r = len;\n        while (r>0) {\n            const l = (o+r > PAGE_SIZE) ? (PAGE_SIZE -o) : r;\n            const srcView = buff.slice( len -r, len -r+l);\n            const dstView = new Uint8Array(this.buffers[p].buffer, this.buffers[p].byteOffset + o, l);\n            dstView.set(srcView);\n            r = r-l;\n            p ++;\n            o = 0;\n        }\n\n    }\n}\n", "import { getThreadRng } from \"./random.js\";\nimport * as Scalar from \"./scalar.js\";\n\n\nexport default class WasmField2 {\n\n    constructor(tm, prefix, F) {\n        this.tm = tm;\n        this.prefix = prefix;\n\n        this.F = F;\n        this.type = \"F2\";\n        this.m = F.m * 2;\n        this.n8 = this.F.n8*2;\n        this.n32 = this.F.n32*2;\n        this.n64 = this.F.n64*2;\n\n        this.pOp1 = tm.alloc(F.n8*2);\n        this.pOp2 = tm.alloc(F.n8*2);\n        this.pOp3 = tm.alloc(F.n8*2);\n        this.tm.instance.exports[prefix + \"_zero\"](this.pOp1);\n        this.zero = tm.getBuff(this.pOp1, this.n8);\n        this.tm.instance.exports[prefix + \"_one\"](this.pOp1);\n        this.one = tm.getBuff(this.pOp1, this.n8);\n\n        this.negone = this.neg(this.one);\n        this.two = this.add(this.one, this.one);\n\n    }\n\n    op2(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op2Bool(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2);\n    }\n\n    op1(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op1Bool(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n    }\n\n    add(a,b) {\n        return this.op2(\"_add\", a, b);\n    }\n\n    eq(a,b) {\n        return this.op2Bool(\"_eq\", a, b);\n    }\n\n    isZero(a) {\n        return this.op1Bool(\"_isZero\", a);\n    }\n\n    sub(a,b) {\n        return this.op2(\"_sub\", a, b);\n    }\n\n    neg(a) {\n        return this.op1(\"_neg\", a);\n    }\n\n    inv(a) {\n        return this.op1(\"_inverse\", a);\n    }\n\n    isNegative(a) {\n        return this.op1Bool(\"_isNegative\", a);\n    }\n\n    toMontgomery(a) {\n        return this.op1(\"_toMontgomery\", a);\n    }\n\n    fromMontgomery(a) {\n        return this.op1(\"_fromMontgomery\", a);\n    }\n\n    mul(a,b) {\n        return this.op2(\"_mul\", a, b);\n    }\n\n    mul1(a,b) {\n        return this.op2(\"_mul1\", a, b);\n    }\n\n    div(a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_inverse\"](this.pOp2, this.pOp2);\n        this.tm.instance.exports[this.prefix + \"_mul\"](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    square(a) {\n        return this.op1(\"_square\", a);\n    }\n\n    isSquare(a) {\n        return this.op1Bool(\"_isSquare\", a);\n    }\n\n    sqrt(a) {\n        return this.op1(\"_sqrt\", a);\n    }\n\n    exp(a, b) {\n        if (!(b instanceof Uint8Array)) {\n            b = Scalar.toLEBuff(Scalar.e(b));\n        }\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_exp\"](this.pOp1, this.pOp2, b.byteLength, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    e(a, b) {\n        if (a instanceof Uint8Array) return a;\n        if ((Array.isArray(a)) && (a.length == 2)) {\n            const c1 = this.F.e(a[0], b);\n            const c2 = this.F.e(a[1], b);\n            const res = new Uint8Array(this.F.n8*2);\n            res.set(c1);\n            res.set(c2, this.F.n8*2);\n            return res;\n        } else {\n            throw new Error(\"invalid F2\");\n        }\n    }\n\n    toString(a, radix) {\n        const s1 = this.F.toString(a.slice(0, this.F.n8), radix);\n        const s2 = this.F.toString(a.slice(this.F.n8), radix);\n        return `[${s1}, ${s2}]`;\n    }\n\n    fromRng(rng) {\n        const c1 = this.F.fromRng(rng);\n        const c2 = this.F.fromRng(rng);\n        const res = new Uint8Array(this.F.n8*2);\n        res.set(c1);\n        res.set(c2, this.F.n8);\n        return res;\n    }\n\n    random() {\n        return this.fromRng(getThreadRng());\n    }\n\n    toObject(a) {\n        const c1 = this.F.toObject(a.slice(0, this.F.n8));\n        const c2 = this.F.toObject(a.slice(this.F.n8, this.F.n8*2));\n        return [c1, c2];\n    }\n\n    fromObject(a) {\n        const buff = new Uint8Array(this.F.n8*2);\n        const b1 = this.F.fromObject(a[0]);\n        const b2 = this.F.fromObject(a[1]);\n        buff.set(b1);\n        buff.set(b2, this.F.n8);\n        return buff;\n    }\n\n    c1(a) {\n        return a.slice(0, this.F.n8);\n    }\n\n    c2(a) {\n        return a.slice(this.F.n8);\n    }\n\n}\n\n", "\n\nimport { getThreadRng } from \"./random.js\";\nimport * as Scalar from \"./scalar.js\";\n\n\nexport default class WasmField3 {\n\n    constructor(tm, prefix, F) {\n        this.tm = tm;\n        this.prefix = prefix;\n\n        this.F = F;\n        this.type = \"F3\";\n        this.m = F.m * 3;\n        this.n8 = this.F.n8*3;\n        this.n32 = this.F.n32*3;\n        this.n64 = this.F.n64*3;\n\n        this.pOp1 = tm.alloc(F.n8*3);\n        this.pOp2 = tm.alloc(F.n8*3);\n        this.pOp3 = tm.alloc(F.n8*3);\n        this.tm.instance.exports[prefix + \"_zero\"](this.pOp1);\n        this.zero = tm.getBuff(this.pOp1, this.n8);\n        this.tm.instance.exports[prefix + \"_one\"](this.pOp1);\n        this.one = tm.getBuff(this.pOp1, this.n8);\n\n        this.negone = this.neg(this.one);\n        this.two = this.add(this.one, this.one);\n\n    }\n\n    op2(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op2Bool(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2);\n    }\n\n    op1(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    op1Bool(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n    }\n\n\n    eq(a,b) {\n        return this.op2Bool(\"_eq\", a, b);\n    }\n\n    isZero(a) {\n        return this.op1Bool(\"_isZero\", a);\n    }\n\n    add(a,b) {\n        return this.op2(\"_add\", a, b);\n    }\n\n    sub(a,b) {\n        return this.op2(\"_sub\", a, b);\n    }\n\n    neg(a) {\n        return this.op1(\"_neg\", a);\n    }\n\n    inv(a) {\n        return this.op1(\"_inverse\", a);\n    }\n\n    isNegative(a) {\n        return this.op1Bool(\"_isNegative\", a);\n    }\n\n    toMontgomery(a) {\n        return this.op1(\"_toMontgomery\", a);\n    }\n\n    fromMontgomery(a) {\n        return this.op1(\"_fromMontgomery\", a);\n    }\n\n    mul(a,b) {\n        return this.op2(\"_mul\", a, b);\n    }\n\n    div(a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_inverse\"](this.pOp2, this.pOp2);\n        this.tm.instance.exports[this.prefix + \"_mul\"](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.n8);\n    }\n\n    square(a) {\n        return this.op1(\"_square\", a);\n    }\n\n    isSquare(a) {\n        return this.op1Bool(\"_isSquare\", a);\n    }\n\n    sqrt(a) {\n        return this.op1(\"_sqrt\", a);\n    }\n\n    exp(a, b) {\n        if (!(b instanceof Uint8Array)) {\n            b = Scalar.toLEBuff(Scalar.e(b));\n        }\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + \"_exp\"](this.pOp1, this.pOp2, b.byteLength, this.pOp3);\n        return this.getBuff(this.pOp3, this.n8);\n    }\n\n    e(a, b) {\n        if (a instanceof Uint8Array) return a;\n        if ((Array.isArray(a)) && (a.length == 3)) {\n            const c1 = this.F.e(a[0], b);\n            const c2 = this.F.e(a[1], b);\n            const c3 = this.F.e(a[2], b);\n            const res = new Uint8Array(this.F.n8*3);\n            res.set(c1);\n            res.set(c2, this.F.n8);\n            res.set(c3, this.F.n8*2);\n            return res;\n        } else {\n            throw new Error(\"invalid F3\");\n        }\n    }\n\n    toString(a, radix) {\n        const s1 = this.F.toString(a.slice(0, this.F.n8), radix);\n        const s2 = this.F.toString(a.slice(this.F.n8, this.F.n8*2), radix);\n        const s3 = this.F.toString(a.slice(this.F.n8*2), radix);\n        return `[${s1}, ${s2}, ${s3}]`;\n    }\n\n    fromRng(rng) {\n        const c1 = this.F.fromRng(rng);\n        const c2 = this.F.fromRng(rng);\n        const c3 = this.F.fromRng(rng);\n        const res = new Uint8Array(this.F.n8*3);\n        res.set(c1);\n        res.set(c2, this.F.n8);\n        res.set(c3, this.F.n8*2);\n        return res;\n    }\n\n    random() {\n        return this.fromRng(getThreadRng());\n    }\n\n    toObject(a) {\n        const c1 = this.F.toObject(a.slice(0, this.F.n8));\n        const c2 = this.F.toObject(a.slice(this.F.n8, this.F.n8*2));\n        const c3 = this.F.toObject(a.slice(this.F.n8*2, this.F.n8*3));\n        return [c1, c2, c3];\n    }\n\n    fromObject(a) {\n        const buff = new Uint8Array(this.F.n8*3);\n        const b1 = this.F.fromObject(a[0]);\n        const b2 = this.F.fromObject(a[1]);\n        const b3 = this.F.fromObject(a[2]);\n        buff.set(b1);\n        buff.set(b2, this.F.n8);\n        buff.set(b3, this.F.n8*2);\n        return buff;\n    }\n\n    c1(a) {\n        return a.slice(0, this.F.n8);\n    }\n\n    c2(a) {\n        return a.slice(this.F.n8, this.F.n8*2);\n    }\n\n    c3(a) {\n        return a.slice(this.F.n8*2);\n    }\n\n}\n\n\n", "\n\nimport * as Scalar from \"./scalar.js\";\nimport buildBatchConvert from \"./engine_batchconvert.js\";\n\nexport default class WasmCurve {\n\n    constructor(tm, prefix, F, pGen, pGb, cofactor) {\n        this.tm = tm;\n        this.prefix = prefix;\n        this.F = F;\n\n        this.pOp1 = tm.alloc(F.n8*3);\n        this.pOp2 = tm.alloc(F.n8*3);\n        this.pOp3 = tm.alloc(F.n8*3);\n        this.tm.instance.exports[prefix + \"_zero\"](this.pOp1);\n        this.zero = this.tm.getBuff(this.pOp1, F.n8*3);\n        this.tm.instance.exports[prefix + \"_zeroAffine\"](this.pOp1);\n        this.zeroAffine = this.tm.getBuff(this.pOp1, F.n8*2);\n        this.one = this.tm.getBuff(pGen, F.n8*3);\n        this.g = this.one;\n        this.oneAffine = this.tm.getBuff(pGen, F.n8*2);\n        this.gAffine = this.oneAffine;\n        this.b = this.tm.getBuff(pGb, F.n8);\n\n        if (cofactor) {\n            this.cofactor = Scalar.toLEBuff(cofactor);\n        }\n\n        this.negone = this.neg(this.one);\n        this.two = this.add(this.one, this.one);\n\n        this.batchLEMtoC = buildBatchConvert(tm, prefix + \"_batchLEMtoC\", F.n8*2, F.n8);\n        this.batchLEMtoU = buildBatchConvert(tm, prefix + \"_batchLEMtoU\", F.n8*2, F.n8*2);\n        this.batchCtoLEM = buildBatchConvert(tm, prefix + \"_batchCtoLEM\", F.n8, F.n8*2);\n        this.batchUtoLEM = buildBatchConvert(tm, prefix + \"_batchUtoLEM\", F.n8*2, F.n8*2);\n        this.batchToJacobian = buildBatchConvert(tm, prefix + \"_batchToJacobian\", F.n8*2, F.n8*3);\n        this.batchToAffine = buildBatchConvert(tm, prefix + \"_batchToAffine\", F.n8*3, F.n8*2);\n    }\n\n    op2(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.F.n8*3);\n    }\n\n    op2bool(opName, a, b) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, b);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp2, this.pOp3);\n    }\n\n    op1(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.F.n8*3);\n    }\n\n    op1Affine(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.F.n8*2);\n    }\n\n    op1Bool(opName, a) {\n        this.tm.setBuff(this.pOp1, a);\n        return !!this.tm.instance.exports[this.prefix + opName](this.pOp1, this.pOp3);\n    }\n\n    add(a,b) {\n        if (a.byteLength == this.F.n8*3) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2(\"_add\", a, b);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2(\"_addMixed\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else if (a.byteLength == this.F.n8*2) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2(\"_addMixed\", b, a);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2(\"_addAffine\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    sub(a,b) {\n        if (a.byteLength == this.F.n8*3) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2(\"_sub\", a, b);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2(\"_subMixed\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else if (a.byteLength == this.F.n8*2) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2(\"_subMixed\", b, a);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2(\"_subAffine\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    neg(a) {\n        if (a.byteLength == this.F.n8*3) {\n            return this.op1(\"_neg\", a);\n        } else if (a.byteLength == this.F.n8*2) {\n            return this.op1Affine(\"_negAffine\", a);\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    double(a) {\n        if (a.byteLength == this.F.n8*3) {\n            return this.op1(\"_double\", a);\n        } else if (a.byteLength == this.F.n8*2) {\n            return this.op1(\"_doubleAffine\", a);\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    isZero(a) {\n        if (a.byteLength == this.F.n8*3) {\n            return this.op1Bool(\"_isZero\", a);\n        } else if (a.byteLength == this.F.n8*2) {\n            return this.op1Bool(\"_isZeroAffine\", a);\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    timesScalar(a, s) {\n        if (!(s instanceof Uint8Array)) {\n            s = Scalar.toLEBuff(Scalar.e(s));\n        }\n        let fnName;\n        if (a.byteLength == this.F.n8*3) {\n            fnName = this.prefix + \"_timesScalar\";\n        } else if (a.byteLength == this.F.n8*2) {\n            fnName = this.prefix + \"_timesScalarAffine\";\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, s);\n        this.tm.instance.exports[fnName](this.pOp1, this.pOp2, s.byteLength, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.F.n8*3);\n    }\n\n    timesFr(a, s) {\n        let fnName;\n        if (a.byteLength == this.F.n8*3) {\n            fnName = this.prefix + \"_timesFr\";\n        } else if (a.byteLength == this.F.n8*2) {\n            fnName = this.prefix + \"_timesFrAffine\";\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n        this.tm.setBuff(this.pOp1, a);\n        this.tm.setBuff(this.pOp2, s);\n        this.tm.instance.exports[fnName](this.pOp1, this.pOp2, this.pOp3);\n        return this.tm.getBuff(this.pOp3, this.F.n8*3);\n    }\n\n    eq(a,b) {\n        if (a.byteLength == this.F.n8*3) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2bool(\"_eq\", a, b);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2bool(\"_eqMixed\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else if (a.byteLength == this.F.n8*2) {\n            if (b.byteLength == this.F.n8*3) {\n                return this.op2bool(\"_eqMixed\", b, a);\n            } else if (b.byteLength == this.F.n8*2) {\n                return this.op2bool(\"_eqAffine\", a, b);\n            } else {\n                throw new Error(\"invalid point size\");\n            }\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    toAffine(a) {\n        if (a.byteLength == this.F.n8*3) {\n            return this.op1Affine(\"_toAffine\", a);\n        } else if (a.byteLength == this.F.n8*2) {\n            return a;\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    toJacobian(a) {\n        if (a.byteLength == this.F.n8*3) {\n            return a;\n        } else if (a.byteLength == this.F.n8*2) {\n            return this.op1(\"_toJacobian\", a);\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    toRprUncompressed(arr, offset, a) {\n        this.tm.setBuff(this.pOp1, a);\n        if (a.byteLength == this.F.n8*3) {\n            this.tm.instance.exports[this.prefix + \"_toAffine\"](this.pOp1, this.pOp1);\n        } else if (a.byteLength != this.F.n8*2) {\n            throw new Error(\"invalid point size\");\n        }\n        this.tm.instance.exports[this.prefix + \"_LEMtoU\"](this.pOp1, this.pOp1);\n        const res = this.tm.getBuff(this.pOp1, this.F.n8*2);\n        arr.set(res, offset);\n    }\n\n    fromRprUncompressed(arr, offset) {\n        const buff = arr.slice(offset, offset + this.F.n8*2);\n        this.tm.setBuff(this.pOp1, buff);\n        this.tm.instance.exports[this.prefix + \"_UtoLEM\"](this.pOp1, this.pOp1);\n        return this.tm.getBuff(this.pOp1, this.F.n8*2);\n    }\n\n    toRprCompressed(arr, offset, a) {\n        this.tm.setBuff(this.pOp1, a);\n        if (a.byteLength == this.F.n8*3) {\n            this.tm.instance.exports[this.prefix + \"_toAffine\"](this.pOp1, this.pOp1);\n        } else if (a.byteLength != this.F.n8*2) {\n            throw new Error(\"invalid point size\");\n        }\n        this.tm.instance.exports[this.prefix + \"_LEMtoC\"](this.pOp1, this.pOp1);\n        const res = this.tm.getBuff(this.pOp1, this.F.n8);\n        arr.set(res, offset);\n    }\n\n    fromRprCompressed(arr, offset) {\n        const buff = arr.slice(offset, offset + this.F.n8);\n        this.tm.setBuff(this.pOp1, buff);\n        this.tm.instance.exports[this.prefix + \"_CtoLEM\"](this.pOp1, this.pOp2);\n        return this.tm.getBuff(this.pOp2, this.F.n8*2);\n    }\n\n    toUncompressed(a) {\n        const buff = new Uint8Array(this.F.n8*2);\n        this.toRprUncompressed(buff, 0, a);\n        return buff;\n    }\n\n    toRprLEM(arr, offset, a) {\n        if (a.byteLength == this.F.n8*2) {\n            arr.set(a, offset);\n            return;\n        } else if (a.byteLength == this.F.n8*3) {\n            this.tm.setBuff(this.pOp1, a);\n            this.tm.instance.exports[this.prefix + \"_toAffine\"](this.pOp1, this.pOp1);\n            const res = this.tm.getBuff(this.pOp1, this.F.n8*2);\n            arr.set(res, offset);\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    fromRprLEM(arr, offset) {\n        offset = offset || 0;\n        return arr.slice(offset, offset+this.F.n8*2);\n    }\n\n    toString(a, radix) {\n        if (a.byteLength == this.F.n8*3) {\n            const x = this.F.toString(a.slice(0, this.F.n8), radix);\n            const y = this.F.toString(a.slice(this.F.n8, this.F.n8*2), radix);\n            const z = this.F.toString(a.slice(this.F.n8*2), radix);\n            return `[ ${x}, ${y}, ${z} ]`;\n        } else if (a.byteLength == this.F.n8*2) {\n            const x = this.F.toString(a.slice(0, this.F.n8), radix);\n            const y = this.F.toString(a.slice(this.F.n8), radix);\n            return `[ ${x}, ${y} ]`;\n        } else {\n            throw new Error(\"invalid point size\");\n        }\n    }\n\n    isValid(a) {\n        if (this.isZero(a)) return true;\n        const F = this.F;\n        const aa = this.toAffine(a);\n        const x = aa.slice(0, this.F.n8);\n        const y = aa.slice(this.F.n8, this.F.n8*2);\n        const x3b = F.add(F.mul(F.square(x),x), this.b);\n        const y2 = F.square(y);\n        return F.eq(x3b, y2);\n    }\n\n    fromRng(rng) {\n        const F = this.F;\n        let P = [];\n        let greatest;\n        let x3b;\n        do {\n            P[0] = F.fromRng(rng);\n            greatest = rng.nextBool();\n            x3b = F.add(F.mul(F.square(P[0]), P[0]), this.b);\n        } while (!F.isSquare(x3b));\n\n        P[1] = F.sqrt(x3b);\n\n        const s = F.isNegative(P[1]);\n        if (greatest ^ s) P[1] = F.neg(P[1]);\n\n        let Pbuff = new Uint8Array(this.F.n8*2);\n        Pbuff.set(P[0]);\n        Pbuff.set(P[1], this.F.n8);\n\n        if (this.cofactor) {\n            Pbuff = this.timesScalar(Pbuff, this.cofactor);\n        }\n\n        return Pbuff;\n    }\n\n\n\n    toObject(a) {\n        if (this.isZero(a)) {\n            return [\n                this.F.toObject(this.F.zero),\n                this.F.toObject(this.F.one),\n                this.F.toObject(this.F.zero),\n            ];\n        }\n        const x = this.F.toObject(a.slice(0, this.F.n8));\n        const y = this.F.toObject(a.slice(this.F.n8, this.F.n8*2));\n        let z;\n        if (a.byteLength == this.F.n8*3) {\n            z = this.F.toObject(a.slice(this.F.n8*2, this.F.n8*3));\n        } else {\n            z = this.F.toObject(this.F.one);\n        }\n        return [x, y, z];\n    }\n\n    fromObject(a) {\n        const x = this.F.fromObject(a[0]);\n        const y = this.F.fromObject(a[1]);\n        let z;\n        if (a.length==3) {\n            z = this.F.fromObject(a[2]);\n        } else {\n            z = this.F.one;\n        }\n        if (this.F.isZero(z, this.F.one)) {\n            return this.zeroAffine;\n        } else if (this.F.eq(z, this.F.one)) {\n            const buff = new Uint8Array(this.F.n8*2);\n            buff.set(x);\n            buff.set(y, this.F.n8);\n            return buff;\n        } else {\n            const buff = new Uint8Array(this.F.n8*3);\n            buff.set(x);\n            buff.set(y, this.F.n8);\n            buff.set(z, this.F.n8*2);\n            return buff;\n        }\n    }\n\n    e(a) {\n        if (a instanceof Uint8Array) return a;\n        return this.fromObject(a);\n    }\n\n    x(a) {\n        const tmp = this.toAffine(a);\n        return tmp.slice(0, this.F.n8);\n    }\n\n    y(a) {\n        const tmp = this.toAffine(a);\n        return tmp.slice(this.F.n8);\n    }\n\n}\n\n\n", "/* global navigator, WebAssembly */\n/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmsnark (Web Assembly zkSnark Prover).\n\n    wasmsnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmsnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmsnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// const MEM_SIZE = 1000;  // Memory size in 64K Pakes (512Mb)\nconst MEM_SIZE = 25;  // Memory size in 64K Pakes (1600Kb)\n\n\nimport thread from \"./threadman_thread.js\";\nimport os from \"os\";\nimport Worker from \"web-worker\";\n\nclass Deferred {\n    constructor() {\n        this.promise = new Promise((resolve, reject)=> {\n            this.reject = reject;\n            this.resolve = resolve;\n        });\n    }\n}\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nfunction stringToBase64(str) {\n    if (process.browser) {\n        return globalThis.btoa(str);\n    } else {\n        return Buffer.from(str).toString(\"base64\");\n    }\n}\n\nconst threadSource = stringToBase64(\"(\" + thread.toString() + \")(self)\");\nconst workerSource = \"data:application/javascript;base64,\" + threadSource;\n\n\n\nexport default async function buildThreadManager(wasm, singleThread) {\n    const tm = new ThreadManager();\n\n    tm.memory = new WebAssembly.Memory({initial:MEM_SIZE});\n    tm.u8 = new Uint8Array(tm.memory.buffer);\n    tm.u32 = new Uint32Array(tm.memory.buffer);\n\n    const wasmModule = await WebAssembly.compile(wasm.code);\n\n    tm.instance = await WebAssembly.instantiate(wasmModule, {\n        env: {\n            \"memory\": tm.memory\n        }\n    });\n\n    tm.singleThread = singleThread;\n    tm.initalPFree = tm.u32[0];   // Save the Pointer to free space.\n    tm.pq = wasm.pq;\n    tm.pr = wasm.pr;\n    tm.pG1gen = wasm.pG1gen;\n    tm.pG1zero = wasm.pG1zero;\n    tm.pG2gen = wasm.pG2gen;\n    tm.pG2zero = wasm.pG2zero;\n    tm.pOneT = wasm.pOneT;\n\n    //    tm.pTmp0 = tm.alloc(curve.G2.F.n8*3);\n    //    tm.pTmp1 = tm.alloc(curve.G2.F.n8*3);\n\n\n    if (singleThread) {\n        tm.code = wasm.code;\n        tm.taskManager = thread();\n        await tm.taskManager([{\n            cmd: \"INIT\",\n            init: MEM_SIZE,\n            code: tm.code.slice()\n        }]);\n        tm.concurrency  = 1;\n    } else {\n        tm.workers = [];\n        tm.pendingDeferreds = [];\n        tm.working = [];\n\n        let concurrency;\n\n        if ((typeof(navigator) === \"object\") && navigator.hardwareConcurrency) {\n            concurrency = navigator.hardwareConcurrency;\n        } else {\n            concurrency = os.cpus().length;\n        }\n\n        if(concurrency == 0){\n            concurrency = 2;\n        }\n\n        // Limit to 64 threads for memory reasons.\n        if (concurrency>64) concurrency=64;\n        tm.concurrency = concurrency;\n\n        for (let i = 0; i<concurrency; i++) {\n\n            tm.workers[i] = new Worker(workerSource);\n\n            tm.workers[i].addEventListener(\"message\", getOnMsg(i));\n\n            tm.working[i]=false;\n        }\n\n        const initPromises = [];\n        for (let i=0; i<tm.workers.length;i++) {\n            const copyCode = wasm.code.slice();\n            initPromises.push(tm.postAction(i, [{\n                cmd: \"INIT\",\n                init: MEM_SIZE,\n                code: copyCode\n            }], [copyCode.buffer]));\n        }\n\n        await Promise.all(initPromises);\n\n    }\n    return tm;\n\n    function getOnMsg(i) {\n        return function(e) {\n            let data;\n            if ((e)&&(e.data)) {\n                data = e.data;\n            } else {\n                data = e;\n            }\n\n            tm.working[i]=false;\n            tm.pendingDeferreds[i].resolve(data);\n            tm.processWorks();\n        };\n    }\n\n}\n\nclass ThreadManager {\n    constructor() {\n        this.actionQueue = [];\n        this.oldPFree = 0;\n    }\n\n    startSyncOp() {\n        if (this.oldPFree != 0) throw new Error(\"Sync operation in progress\");\n        this.oldPFree = this.u32[0];\n    }\n\n    endSyncOp() {\n        if (this.oldPFree == 0) throw new Error(\"No sync operation in progress\");\n        this.u32[0] = this.oldPFree;\n        this.oldPFree = 0;\n    }\n\n    postAction(workerId, e, transfers, _deferred) {\n        if (this.working[workerId]) {\n            throw new Error(\"Posting a job t a working worker\");\n        }\n        this.working[workerId] = true;\n\n        this.pendingDeferreds[workerId] = _deferred ? _deferred : new Deferred();\n        this.workers[workerId].postMessage(e, transfers);\n\n        return this.pendingDeferreds[workerId].promise;\n    }\n\n    processWorks() {\n        for (let i=0; (i<this.workers.length)&&(this.actionQueue.length > 0); i++) {\n            if (this.working[i] == false) {\n                const work = this.actionQueue.shift();\n                this.postAction(i, work.data, work.transfers, work.deferred);\n            }\n        }\n    }\n\n    queueAction(actionData, transfers) {\n        const d = new Deferred();\n\n        if (this.singleThread) {\n            const res = this.taskManager(actionData);\n            d.resolve(res);\n        } else {\n            this.actionQueue.push({\n                data: actionData,\n                transfers: transfers,\n                deferred: d\n            });\n            this.processWorks();\n        }\n        return d.promise;\n    }\n\n    resetMemory() {\n        this.u32[0] = this.initalPFree;\n    }\n\n    allocBuff(buff) {\n        const pointer = this.alloc(buff.byteLength);\n        this.setBuff(pointer, buff);\n        return pointer;\n    }\n\n    getBuff(pointer, length) {\n        return this.u8.slice(pointer, pointer+ length);\n    }\n\n    setBuff(pointer, buffer) {\n        this.u8.set(new Uint8Array(buffer), pointer);\n    }\n\n    alloc(length) {\n        while (this.u32[0] & 3) this.u32[0]++;  // Return always aligned pointers\n        const res = this.u32[0];\n        this.u32[0] += length;\n        return res;\n    }\n\n    async terminate() {\n        for (let i=0; i<this.workers.length; i++) {\n            this.workers[i].postMessage([{cmd: \"TERMINATE\"}]);\n        }\n        await sleep(200);\n    }\n\n}\n", "/* global WebAssembly */\n\nexport default function thread(self) {\n    const MAXMEM = 32767;\n    let instance;\n    let memory;\n\n    if (self) {\n        self.onmessage = function(e) {\n            let data;\n            if (e.data) {\n                data = e.data;\n            } else {\n                data = e;\n            }\n\n            if (data[0].cmd == \"INIT\") {\n                init(data[0]).then(function() {\n                    self.postMessage(data.result);\n                });\n            } else if (data[0].cmd == \"TERMINATE\") {\n                self.close();\n            } else {\n                const res = runTask(data);\n                self.postMessage(res);\n            }\n        };\n    }\n\n    async function init(data) {\n        const code = new Uint8Array(data.code);\n        const wasmModule = await WebAssembly.compile(code);\n        memory = new WebAssembly.Memory({initial:data.init, maximum: MAXMEM});\n\n        instance = await WebAssembly.instantiate(wasmModule, {\n            env: {\n                \"memory\": memory\n            }\n        });\n    }\n\n\n\n    function alloc(length) {\n        const u32 = new Uint32Array(memory.buffer, 0, 1);\n        while (u32[0] & 3) u32[0]++;  // Return always aligned pointers\n        const res = u32[0];\n        u32[0] += length;\n        if (u32[0] + length > memory.buffer.byteLength) {\n            const currentPages = memory.buffer.byteLength / 0x10000;\n            let requiredPages = Math.floor((u32[0] + length) / 0x10000)+1;\n            if (requiredPages>MAXMEM) requiredPages=MAXMEM;\n            memory.grow(requiredPages-currentPages);\n        }\n        return res;\n    }\n\n    function allocBuffer(buffer) {\n        const p = alloc(buffer.byteLength);\n        setBuffer(p, buffer);\n        return p;\n    }\n\n    function getBuffer(pointer, length) {\n        const u8 = new Uint8Array(memory.buffer);\n        return new Uint8Array(u8.buffer, u8.byteOffset + pointer, length);\n    }\n\n    function setBuffer(pointer, buffer) {\n        const u8 = new Uint8Array(memory.buffer);\n        u8.set(new Uint8Array(buffer), pointer);\n    }\n\n    function runTask(task) {\n        if (task[0].cmd == \"INIT\") {\n            return init(task[0]);\n        }\n        const ctx = {\n            vars: [],\n            out: []\n        };\n        const u32a = new Uint32Array(memory.buffer, 0, 1);\n        const oldAlloc = u32a[0];\n        for (let i=0; i<task.length; i++) {\n            switch (task[i].cmd) {\n            case \"ALLOCSET\":\n                ctx.vars[task[i].var] = allocBuffer(task[i].buff);\n                break;\n            case \"ALLOC\":\n                ctx.vars[task[i].var] = alloc(task[i].len);\n                break;\n            case \"SET\":\n                setBuffer(ctx.vars[task[i].var], task[i].buff);\n                break;\n            case \"CALL\": {\n                const params = [];\n                for (let j=0; j<task[i].params.length; j++) {\n                    const p = task[i].params[j];\n                    if (typeof p.var !== \"undefined\") {\n                        params.push(ctx.vars[p.var] + (p.offset || 0));\n                    } else if (typeof p.val != \"undefined\") {\n                        params.push(p.val);\n                    }\n                }\n                instance.exports[task[i].fnName](...params);\n                break;\n            }\n            case \"GET\":\n                ctx.out[task[i].out] = getBuffer(ctx.vars[task[i].var], task[i].len).slice();\n                break;\n            default:\n                throw new Error(\"Invalid cmd\");\n            }\n        }\n        const u32b = new Uint32Array(memory.buffer, 0, 1);\n        u32b[0] = oldAlloc;\n        return ctx.out;\n    }\n\n\n    return runTask;\n}\n", "/*\nThe MIT License (MIT)\n\nCopyright (c) 2016 CoderPuppy\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\nvar _endianness;\nexport function endianness() {\n  if (typeof _endianness === 'undefined') {\n    var a = new ArrayBuffer(2);\n    var b = new Uint8Array(a);\n    var c = new Uint16Array(a);\n    b[0] = 1;\n    b[1] = 2;\n    if (c[0] === 258) {\n      _endianness = 'BE';\n    } else if (c[0] === 513){\n      _endianness = 'LE';\n    } else {\n      throw new Error('unable to figure out endianess');\n    }\n  }\n  return _endianness;\n}\n\nexport function hostname() {\n  if (typeof global.location !== 'undefined') {\n    return global.location.hostname\n  } else return '';\n}\n\nexport function loadavg() {\n  return [];\n}\n\nexport function uptime() {\n  return 0;\n}\n\nexport function freemem() {\n  return Number.MAX_VALUE;\n}\n\nexport function totalmem() {\n  return Number.MAX_VALUE;\n}\n\nexport function cpus() {\n  return [];\n}\n\nexport function type() {\n  return 'Browser';\n}\n\nexport function release () {\n  if (typeof global.navigator !== 'undefined') {\n    return global.navigator.appVersion;\n  }\n  return '';\n}\n\nexport function networkInterfaces(){}\nexport function getNetworkInterfaces(){}\n\nexport function arch() {\n  return 'javascript';\n}\n\nexport function platform() {\n  return 'browser';\n}\n\nexport function tmpDir() {\n  return '/tmp';\n}\nexport var tmpdir = tmpDir;\n\nexport var EOL = '\\n';\nexport default {\n  EOL: EOL,\n  tmpdir: tmpdir,\n  tmpDir: tmpDir,\n  networkInterfaces:networkInterfaces,\n  getNetworkInterfaces: getNetworkInterfaces,\n  release: release,\n  type: type,\n  cpus: cpus,\n  totalmem: totalmem,\n  freemem: freemem,\n  uptime: uptime,\n  loadavg: loadavg,\n  hostname: hostname,\n  endianness: endianness,\n}\n", "import BigBuffer from \"./bigbuffer.js\";\n\nexport default function buildBatchApplyKey(curve, groupName) {\n    const G = curve[groupName];\n    const Fr = curve.Fr;\n    const tm = curve.tm;\n\n    curve[groupName].batchApplyKey = async function(buff, first, inc, inType, outType) {\n        inType = inType || \"affine\";\n        outType = outType || \"affine\";\n        let fnName, fnAffine;\n        let sGin, sGmid, sGout;\n        if (groupName == \"G1\") {\n            if (inType == \"jacobian\") {\n                sGin = G.F.n8*3;\n                fnName = \"g1m_batchApplyKey\";\n            } else {\n                sGin = G.F.n8*2;\n                fnName = \"g1m_batchApplyKeyMixed\";\n            }\n            sGmid = G.F.n8*3;\n            if (outType == \"jacobian\") {\n                sGout = G.F.n8*3;\n            } else {\n                fnAffine = \"g1m_batchToAffine\";\n                sGout = G.F.n8*2;\n            }\n        } else if (groupName == \"G2\") {\n            if (inType == \"jacobian\") {\n                sGin = G.F.n8*3;\n                fnName = \"g2m_batchApplyKey\";\n            } else {\n                sGin = G.F.n8*2;\n                fnName = \"g2m_batchApplyKeyMixed\";\n            }\n            sGmid = G.F.n8*3;\n            if (outType == \"jacobian\") {\n                sGout = G.F.n8*3;\n            } else {\n                fnAffine = \"g2m_batchToAffine\";\n                sGout = G.F.n8*2;\n            }\n        } else if (groupName == \"Fr\") {\n            fnName = \"frm_batchApplyKey\";\n            sGin = G.n8;\n            sGmid = G.n8;\n            sGout = G.n8;\n        } else {\n            throw new Error(\"Invalid group: \" + groupName);\n        }\n        const nPoints = Math.floor(buff.byteLength / sGin);\n        const pointsPerChunk = Math.floor(nPoints/tm.concurrency);\n        const opPromises = [];\n        inc = Fr.e(inc);\n        let t = Fr.e(first);\n        for (let i=0; i<tm.concurrency; i++) {\n            let n;\n            if (i< tm.concurrency-1) {\n                n = pointsPerChunk;\n            } else {\n                n = nPoints - i*pointsPerChunk;\n            }\n            if (n==0) continue;\n\n            const task = [];\n\n            task.push({\n                cmd: \"ALLOCSET\",\n                var: 0,\n                buff: buff.slice(i*pointsPerChunk*sGin, i*pointsPerChunk*sGin + n*sGin)\n            });\n            task.push({cmd: \"ALLOCSET\", var: 1, buff: t});\n            task.push({cmd: \"ALLOCSET\", var: 2, buff: inc});\n            task.push({cmd: \"ALLOC\", var: 3, len: n*Math.max(sGmid, sGout)});\n            task.push({\n                cmd: \"CALL\",\n                fnName: fnName,\n                params: [\n                    {var: 0},\n                    {val: n},\n                    {var: 1},\n                    {var: 2},\n                    {var:3}\n                ]\n            });\n            if (fnAffine) {\n                task.push({\n                    cmd: \"CALL\",\n                    fnName: fnAffine,\n                    params: [\n                        {var: 3},\n                        {val: n},\n                        {var: 3},\n                    ]\n                });\n            }\n            task.push({cmd: \"GET\", out: 0, var: 3, len: n*sGout});\n\n            opPromises.push(tm.queueAction(task));\n            t = Fr.mul(t, Fr.exp(inc, n));\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let outBuff;\n        if (buff instanceof BigBuffer) {\n            outBuff = new BigBuffer(nPoints*sGout);\n        } else {\n            outBuff = new Uint8Array(nPoints*sGout);\n        }\n\n        let p=0;\n        for (let i=0; i<result.length; i++) {\n            outBuff.set(result[i][0], p);\n            p += result[i][0].byteLength;\n        }\n\n        return outBuff;\n    };\n}\n", "\nexport default function buildPairing(curve) {\n    const tm = curve.tm;\n    curve.pairing = function pairing(a, b) {\n\n        tm.startSyncOp();\n        const pA = tm.allocBuff(curve.G1.toJacobian(a));\n        const pB = tm.allocBuff(curve.G2.toJacobian(b));\n        const pRes = tm.alloc(curve.Gt.n8);\n        tm.instance.exports[curve.name + \"_pairing\"](pA, pB, pRes);\n\n        const res = tm.getBuff(pRes, curve.Gt.n8);\n\n        tm.endSyncOp();\n        return res;\n    };\n\n    curve.pairingEq = async function pairingEq() {\n        let  buffCt;\n        let nEqs;\n        if ((arguments.length % 2) == 1) {\n            buffCt = arguments[arguments.length-1];\n            nEqs = (arguments.length -1) /2;\n        } else {\n            buffCt = curve.Gt.one;\n            nEqs = arguments.length /2;\n        }\n\n        const opPromises = [];\n        for (let i=0; i<nEqs; i++) {\n\n            const task = [];\n\n            const g1Buff = curve.G1.toJacobian(arguments[i*2]);\n            task.push({cmd: \"ALLOCSET\", var: 0, buff: g1Buff});\n            task.push({cmd: \"ALLOC\", var: 1, len: curve.prePSize});\n\n            const g2Buff = curve.G2.toJacobian(arguments[i*2 +1]);\n            task.push({cmd: \"ALLOCSET\", var: 2, buff: g2Buff});\n            task.push({cmd: \"ALLOC\", var: 3, len: curve.preQSize});\n\n            task.push({cmd: \"ALLOC\", var: 4, len: curve.Gt.n8});\n\n            task.push({cmd: \"CALL\", fnName: curve.name + \"_prepareG1\", params: [\n                {var: 0},\n                {var: 1}\n            ]});\n\n            task.push({cmd: \"CALL\", fnName: curve.name + \"_prepareG2\", params: [\n                {var: 2},\n                {var: 3}\n            ]});\n\n            task.push({cmd: \"CALL\", fnName: curve.name + \"_millerLoop\", params: [\n                {var: 1},\n                {var: 3},\n                {var: 4}\n            ]});\n\n            task.push({cmd: \"GET\", out: 0, var: 4, len: curve.Gt.n8});\n\n            opPromises.push(\n                tm.queueAction(task)\n            );\n        }\n\n\n        const result = await Promise.all(opPromises);\n\n        tm.startSyncOp();\n        const pRes = tm.alloc(curve.Gt.n8);\n        tm.instance.exports.ftm_one(pRes);\n\n        for (let i=0; i<result.length; i++) {\n            const pMR = tm.allocBuff(result[i][0]);\n            tm.instance.exports.ftm_mul(pRes, pMR, pRes);\n        }\n        tm.instance.exports[curve.name + \"_finalExponentiation\"](pRes, pRes);\n\n        const pCt = tm.allocBuff(buffCt);\n\n        const r = !!tm.instance.exports.ftm_eq(pRes, pCt);\n\n        tm.endSyncOp();\n\n        return r;\n    };\n\n    curve.prepareG1 = function(p) {\n        this.tm.startSyncOp();\n        const pP = this.tm.allocBuff(p);\n        const pPrepP = this.tm.alloc(this.prePSize);\n        this.tm.instance.exports[this.name + \"_prepareG1\"](pP, pPrepP);\n        const res = this.tm.getBuff(pPrepP, this.prePSize);\n        this.tm.endSyncOp();\n        return res;\n    };\n\n    curve.prepareG2 = function(q) {\n        this.tm.startSyncOp();\n        const pQ = this.tm.allocBuff(q);\n        const pPrepQ = this.tm.alloc(this.preQSize);\n        this.tm.instance.exports[this.name + \"_prepareG2\"](pQ, pPrepQ);\n        const res = this.tm.getBuff(pPrepQ, this.preQSize);\n        this.tm.endSyncOp();\n        return res;\n    };\n\n    curve.millerLoop = function(preP, preQ) {\n        this.tm.startSyncOp();\n        const pPreP = this.tm.allocBuff(preP);\n        const pPreQ = this.tm.allocBuff(preQ);\n        const pRes = this.tm.alloc(this.Gt.n8);\n        this.tm.instance.exports[this.name + \"_millerLoop\"](pPreP, pPreQ, pRes);\n        const res = this.tm.getBuff(pRes, this.Gt.n8);\n        this.tm.endSyncOp();\n        return res;\n    };\n\n    curve.finalExponentiation = function(a) {\n        this.tm.startSyncOp();\n        const pA = this.tm.allocBuff(a);\n        const pRes = this.tm.alloc(this.Gt.n8);\n        this.tm.instance.exports[this.name + \"_finalExponentiation\"](pA, pRes);\n        const res = this.tm.getBuff(pRes, this.Gt.n8);\n        this.tm.endSyncOp();\n        return res;\n    };\n\n}\n", "import { log2 } from \"./utils.js\";\n\nconst pTSizes = [\n    1 ,  1,  1,  1,    2,  3,  4,  5,\n    6 ,  7,  7,  8,    9, 10, 11, 12,\n    13, 13, 14, 15,   16, 16, 17, 17,\n    17, 17, 17, 17,   17, 17, 17, 17\n];\n\nexport default function buildMultiexp(curve, groupName) {\n    const G = curve[groupName];\n    const tm = G.tm;\n    async function _multiExpChunk(buffBases, buffScalars, inType, logger, logText) {\n        if ( ! (buffBases instanceof Uint8Array) ) {\n            if (logger) logger.error(`${logText} _multiExpChunk buffBases is not Uint8Array`);\n            throw new Error(`${logText} _multiExpChunk buffBases is not Uint8Array`);\n        }\n        if ( ! (buffScalars instanceof Uint8Array) ) {\n            if (logger) logger.error(`${logText} _multiExpChunk buffScalars is not Uint8Array`);\n            throw new Error(`${logText} _multiExpChunk buffScalars is not Uint8Array`);\n        }\n        inType = inType || \"affine\";\n\n        let sGIn;\n        let fnName;\n        if (groupName == \"G1\") {\n            if (inType == \"affine\") {\n                fnName = \"g1m_multiexpAffine_chunk\";\n                sGIn = G.F.n8*2;\n            } else {\n                fnName = \"g1m_multiexp_chunk\";\n                sGIn = G.F.n8*3;\n            }\n        } else if (groupName == \"G2\") {\n            if (inType == \"affine\") {\n                fnName = \"g2m_multiexpAffine_chunk\";\n                sGIn = G.F.n8*2;\n            } else {\n                fnName = \"g2m_multiexp_chunk\";\n                sGIn = G.F.n8*3;\n            }\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n        const nPoints = Math.floor(buffBases.byteLength / sGIn);\n\n        if (nPoints == 0) return G.zero;\n        const sScalar = Math.floor(buffScalars.byteLength / nPoints);\n        if( sScalar * nPoints != buffScalars.byteLength) {\n            throw new Error(\"Scalar size does not match\");\n        }\n\n        const bitChunkSize = pTSizes[log2(nPoints)];\n        const nChunks = Math.floor((sScalar*8 - 1) / bitChunkSize) +1;\n\n        const opPromises = [];\n        for (let i=0; i<nChunks; i++) {\n            const task = [\n                {cmd: \"ALLOCSET\", var: 0, buff: buffBases},\n                {cmd: \"ALLOCSET\", var: 1, buff: buffScalars},\n                {cmd: \"ALLOC\", var: 2, len: G.F.n8*3},\n                {cmd: \"CALL\", fnName: fnName, params: [\n                    {var: 0},\n                    {var: 1},\n                    {val: sScalar},\n                    {val: nPoints},\n                    {val: i*bitChunkSize},\n                    {val: Math.min(sScalar*8 - i*bitChunkSize, bitChunkSize)},\n                    {var: 2}\n                ]},\n                {cmd: \"GET\", out: 0, var: 2, len: G.F.n8*3}\n            ];\n            opPromises.push(\n                G.tm.queueAction(task)\n            );\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let res = G.zero;\n        for (let i=result.length-1; i>=0; i--) {\n            if (!G.isZero(res)) {\n                for (let j=0; j<bitChunkSize; j++) res = G.double(res);\n            }\n            res = G.add(res, result[i][0]);\n        }\n\n        return res;\n    }\n\n    async function _multiExp(buffBases, buffScalars, inType, logger, logText) {\n        const MAX_CHUNK_SIZE = 1 << 22;\n        const MIN_CHUNK_SIZE = 1 << 10;\n        let sGIn;\n\n        if (groupName == \"G1\") {\n            if (inType == \"affine\") {\n                sGIn = G.F.n8*2;\n            } else {\n                sGIn = G.F.n8*3;\n            }\n        } else if (groupName == \"G2\") {\n            if (inType == \"affine\") {\n                sGIn = G.F.n8*2;\n            } else {\n                sGIn = G.F.n8*3;\n            }\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        const nPoints = Math.floor(buffBases.byteLength / sGIn);\n        const sScalar = Math.floor(buffScalars.byteLength / nPoints);\n        if( sScalar * nPoints != buffScalars.byteLength) {\n            throw new Error(\"Scalar size does not match\");\n        }\n\n        const bitChunkSize = pTSizes[log2(nPoints)];\n        const nChunks = Math.floor((sScalar*8 - 1) / bitChunkSize) +1;\n\n        let chunkSize;\n        chunkSize = Math.floor(nPoints / (tm.concurrency /nChunks));\n        if (chunkSize>MAX_CHUNK_SIZE) chunkSize = MAX_CHUNK_SIZE;\n        if (chunkSize<MIN_CHUNK_SIZE) chunkSize = MIN_CHUNK_SIZE;\n\n        const opPromises = [];\n        for (let i=0; i<nPoints; i += chunkSize) {\n            if (logger) logger.debug(`Multiexp start: ${logText}: ${i}/${nPoints}`);\n            const n= Math.min(nPoints - i, chunkSize);\n            const buffBasesChunk = buffBases.slice(i*sGIn, (i+n)*sGIn);\n            const buffScalarsChunk = buffScalars.slice(i*sScalar, (i+n)*sScalar);\n            opPromises.push(_multiExpChunk(buffBasesChunk, buffScalarsChunk, inType, logger, logText).then( (r) => {\n                if (logger) logger.debug(`Multiexp end: ${logText}: ${i}/${nPoints}`);\n                return r;\n            }));\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let res = G.zero;\n        for (let i=result.length-1; i>=0; i--) {\n            res = G.add(res, result[i]);\n        }\n\n        return res;\n    }\n\n    G.multiExp = async function multiExpAffine(buffBases, buffScalars, logger, logText) {\n        return await _multiExp(buffBases, buffScalars, \"jacobian\", logger, logText);\n    };\n    G.multiExpAffine = async function multiExpAffine(buffBases, buffScalars, logger, logText) {\n        return await _multiExp(buffBases, buffScalars, \"affine\", logger, logText);\n    };\n}\n", "import {log2, buffReverseBits, array2buffer, buffer2array} from \"./utils.js\";\nimport BigBuffer from \"./bigbuffer.js\";\n\n\nexport default function buildFFT(curve, groupName) {\n    const G = curve[groupName];\n    const Fr = curve.Fr;\n    const tm = G.tm;\n    async function _fft(buff, inverse, inType, outType, logger, loggerTxt) {\n\n        inType = inType || \"affine\";\n        outType = outType || \"affine\";\n        const MAX_BITS_THREAD = 14;\n\n        let sIn, sMid, sOut, fnIn2Mid, fnMid2Out, fnFFTMix, fnFFTJoin, fnFFTFinal;\n        if (groupName == \"G1\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n                fnIn2Mid = \"g1m_batchToJacobian\";\n            } else {\n                sIn = G.F.n8*3;\n            }\n            sMid = G.F.n8*3;\n            if (inverse) {\n                fnFFTFinal = \"g1m_fftFinal\";\n            }\n            fnFFTJoin = \"g1m_fftJoin\";\n            fnFFTMix = \"g1m_fftMix\";\n\n            if (outType == \"affine\") {\n                sOut = G.F.n8*2;\n                fnMid2Out = \"g1m_batchToAffine\";\n            } else {\n                sOut = G.F.n8*3;\n            }\n\n        } else if (groupName == \"G2\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n                fnIn2Mid = \"g2m_batchToJacobian\";\n            } else {\n                sIn = G.F.n8*3;\n            }\n            sMid = G.F.n8*3;\n            if (inverse) {\n                fnFFTFinal = \"g2m_fftFinal\";\n            }\n            fnFFTJoin = \"g2m_fftJoin\";\n            fnFFTMix = \"g2m_fftMix\";\n            if (outType == \"affine\") {\n                sOut = G.F.n8*2;\n                fnMid2Out = \"g2m_batchToAffine\";\n            } else {\n                sOut = G.F.n8*3;\n            }\n        } else if (groupName == \"Fr\") {\n            sIn = G.n8;\n            sMid = G.n8;\n            sOut = G.n8;\n            if (inverse) {\n                fnFFTFinal = \"frm_fftFinal\";\n            }\n            fnFFTMix = \"frm_fftMix\";\n            fnFFTJoin = \"frm_fftJoin\";\n        }\n\n\n        let returnArray = false;\n        if (Array.isArray(buff)) {\n            buff = array2buffer(buff, sIn);\n            returnArray = true;\n        } else {\n            buff = buff.slice(0, buff.byteLength);\n        }\n\n        const nPoints = buff.byteLength / sIn;\n        const bits = log2(nPoints);\n\n        if  ((1 << bits) != nPoints) {\n            throw new Error(\"fft must be multiple of 2\" );\n        }\n\n        if (bits == Fr.s +1) {\n            let buffOut;\n\n            if (inverse) {\n                buffOut =  await _fftExtInv(buff, inType, outType, logger, loggerTxt);\n            } else {\n                buffOut =  await _fftExt(buff, inType, outType, logger, loggerTxt);\n            }\n\n            if (returnArray) {\n                return buffer2array(buffOut, sOut);\n            } else {\n                return buffOut;\n            }\n        }\n\n        let inv;\n        if (inverse) {\n            inv = Fr.inv(Fr.e(nPoints));\n        }\n\n        let buffOut;\n\n        buffReverseBits(buff, sIn);\n\n        let chunks;\n        let pointsInChunk = Math.min(1 << MAX_BITS_THREAD, nPoints);\n        let nChunks = nPoints / pointsInChunk;\n\n        while ((nChunks < tm.concurrency)&&(pointsInChunk>=16)) {\n            nChunks *= 2;\n            pointsInChunk /= 2;\n        }\n\n        const l2Chunk = log2(pointsInChunk);\n\n        const promises = [];\n        for (let i = 0; i< nChunks; i++) {\n            if (logger) logger.debug(`${loggerTxt}: fft ${bits} mix start: ${i}/${nChunks}`);\n            const task = [];\n            task.push({cmd: \"ALLOC\", var: 0, len: sMid*pointsInChunk});\n            const buffChunk = buff.slice( (pointsInChunk * i)*sIn, (pointsInChunk * (i+1))*sIn);\n            task.push({cmd: \"SET\", var: 0, buff: buffChunk});\n            if (fnIn2Mid) {\n                task.push({cmd: \"CALL\", fnName:fnIn2Mid, params: [{var:0}, {val: pointsInChunk}, {var: 0}]});\n            }\n            for (let j=1; j<=l2Chunk;j++) {\n                task.push({cmd: \"CALL\", fnName:fnFFTMix, params: [{var:0}, {val: pointsInChunk}, {val: j}]});\n            }\n\n            if (l2Chunk==bits) {\n                if (fnFFTFinal) {\n                    task.push({cmd: \"ALLOCSET\", var: 1, buff: inv});\n                    task.push({cmd: \"CALL\", fnName: fnFFTFinal,  params:[\n                        {var: 0},\n                        {val: pointsInChunk},\n                        {var: 1},\n                    ]});\n                }\n                if (fnMid2Out) {\n                    task.push({cmd: \"CALL\", fnName:fnMid2Out, params: [{var:0}, {val: pointsInChunk}, {var: 0}]});\n                }\n                task.push({cmd: \"GET\", out: 0, var: 0, len: pointsInChunk*sOut});\n            } else {\n                task.push({cmd: \"GET\", out:0, var: 0, len: sMid*pointsInChunk});\n            }\n            promises.push(tm.queueAction(task).then( (r) => {\n                if (logger) logger.debug(`${loggerTxt}: fft ${bits} mix end: ${i}/${nChunks}`);\n                return r;\n            }));\n        }\n\n        chunks = await Promise.all(promises);\n        for (let i = 0; i< nChunks; i++) chunks[i] = chunks[i][0];\n\n        for (let i = l2Chunk+1;   i<=bits; i++) {\n            if (logger) logger.debug(`${loggerTxt}: fft  ${bits}  join: ${i}/${bits}`);\n            const nGroups = 1 << (bits - i);\n            const nChunksPerGroup = nChunks / nGroups;\n            const opPromises = [];\n            for (let j=0; j<nGroups; j++) {\n                for (let k=0; k <nChunksPerGroup/2; k++) {\n                    const first = Fr.exp( Fr.w[i], k*pointsInChunk);\n                    const inc = Fr.w[i];\n                    const o1 = j*nChunksPerGroup + k;\n                    const o2 = j*nChunksPerGroup + k + nChunksPerGroup/2;\n\n                    const task = [];\n                    task.push({cmd: \"ALLOCSET\", var: 0, buff: chunks[o1]});\n                    task.push({cmd: \"ALLOCSET\", var: 1, buff: chunks[o2]});\n                    task.push({cmd: \"ALLOCSET\", var: 2, buff: first});\n                    task.push({cmd: \"ALLOCSET\", var: 3, buff: inc});\n                    task.push({cmd: \"CALL\", fnName: fnFFTJoin,  params:[\n                        {var: 0},\n                        {var: 1},\n                        {val: pointsInChunk},\n                        {var: 2},\n                        {var: 3}\n                    ]});\n                    if (i==bits) {\n                        if (fnFFTFinal) {\n                            task.push({cmd: \"ALLOCSET\", var: 4, buff: inv});\n                            task.push({cmd: \"CALL\", fnName: fnFFTFinal,  params:[\n                                {var: 0},\n                                {val: pointsInChunk},\n                                {var: 4},\n                            ]});\n                            task.push({cmd: \"CALL\", fnName: fnFFTFinal,  params:[\n                                {var: 1},\n                                {val: pointsInChunk},\n                                {var: 4},\n                            ]});\n                        }\n                        if (fnMid2Out) {\n                            task.push({cmd: \"CALL\", fnName:fnMid2Out, params: [{var:0}, {val: pointsInChunk}, {var: 0}]});\n                            task.push({cmd: \"CALL\", fnName:fnMid2Out, params: [{var:1}, {val: pointsInChunk}, {var: 1}]});\n                        }\n                        task.push({cmd: \"GET\", out: 0, var: 0, len: pointsInChunk*sOut});\n                        task.push({cmd: \"GET\", out: 1, var: 1, len: pointsInChunk*sOut});\n                    } else {\n                        task.push({cmd: \"GET\", out: 0, var: 0, len: pointsInChunk*sMid});\n                        task.push({cmd: \"GET\", out: 1, var: 1, len: pointsInChunk*sMid});\n                    }\n                    opPromises.push(tm.queueAction(task).then( (r) => {\n                        if (logger) logger.debug(`${loggerTxt}: fft ${bits} join  ${i}/${bits}  ${j+1}/${nGroups} ${k}/${nChunksPerGroup/2}`);\n                        return r;\n                    }));\n                }\n            }\n\n            const res = await Promise.all(opPromises);\n            for (let j=0; j<nGroups; j++) {\n                for (let k=0; k <nChunksPerGroup/2; k++) {\n                    const o1 = j*nChunksPerGroup + k;\n                    const o2 = j*nChunksPerGroup + k + nChunksPerGroup/2;\n                    const resChunk = res.shift();\n                    chunks[o1] = resChunk[0];\n                    chunks[o2] = resChunk[1];\n                }\n            }\n        }\n\n        if (buff instanceof BigBuffer) {\n            buffOut = new BigBuffer(nPoints*sOut);\n        } else {\n            buffOut = new Uint8Array(nPoints*sOut);\n        }\n        if (inverse) {\n            buffOut.set(chunks[0].slice((pointsInChunk-1)*sOut));\n            let p= sOut;\n            for (let i=nChunks-1; i>0; i--) {\n                buffOut.set(chunks[i], p);\n                p += pointsInChunk*sOut;\n                delete chunks[i];  // Liberate mem\n            }\n            buffOut.set(chunks[0].slice(0, (pointsInChunk-1)*sOut), p);\n            delete chunks[0];\n        } else {\n            for (let i=0; i<nChunks; i++) {\n                buffOut.set(chunks[i], pointsInChunk*sOut*i);\n                delete chunks[i];\n            }\n        }\n\n        if (returnArray) {\n            return buffer2array(buffOut, sOut);\n        } else {\n            return buffOut;\n        }\n    }\n\n    async function _fftExt(buff, inType, outType, logger, loggerTxt) {\n        let b1, b2;\n        b1 = buff.slice( 0 , buff.byteLength/2);\n        b2 = buff.slice( buff.byteLength/2, buff.byteLength);\n\n        const promises = [];\n\n        [b1, b2] = await _fftJoinExt(b1, b2, \"fftJoinExt\", Fr.one, Fr.shift, inType, \"jacobian\", logger, loggerTxt);\n\n        promises.push( _fft(b1, false, \"jacobian\", outType, logger, loggerTxt));\n        promises.push( _fft(b2, false, \"jacobian\", outType, logger, loggerTxt));\n\n        const res1 = await Promise.all(promises);\n\n        let buffOut;\n        if (res1[0].byteLength > (1<<28)) {\n            buffOut = new BigBuffer(res1[0].byteLength*2);\n        } else {\n            buffOut = new Uint8Array(res1[0].byteLength*2);\n        }\n\n        buffOut.set(res1[0]);\n        buffOut.set(res1[1], res1[0].byteLength);\n\n        return buffOut;\n    }\n\n    async function _fftExtInv(buff, inType, outType, logger, loggerTxt) {\n        let b1, b2;\n        b1 = buff.slice( 0 , buff.byteLength/2);\n        b2 = buff.slice( buff.byteLength/2, buff.byteLength);\n\n        const promises = [];\n\n        promises.push( _fft(b1, true, inType, \"jacobian\", logger, loggerTxt));\n        promises.push( _fft(b2, true, inType, \"jacobian\", logger, loggerTxt));\n\n        [b1, b2] = await Promise.all(promises);\n\n        const res1 = await _fftJoinExt(b1, b2, \"fftJoinExtInv\", Fr.one, Fr.shiftInv, \"jacobian\", outType, logger, loggerTxt);\n\n        let buffOut;\n        if (res1[0].byteLength > (1<<28)) {\n            buffOut = new BigBuffer(res1[0].byteLength*2);\n        } else {\n            buffOut = new Uint8Array(res1[0].byteLength*2);\n        }\n\n        buffOut.set(res1[0]);\n        buffOut.set(res1[1], res1[0].byteLength);\n\n        return buffOut;\n    }\n\n\n    async function _fftJoinExt(buff1, buff2, fn, first, inc, inType, outType, logger, loggerTxt) {\n        const MAX_CHUNK_SIZE = 1<<16;\n        const MIN_CHUNK_SIZE = 1<<4;\n\n        let fnName;\n        let fnIn2Mid, fnMid2Out;\n        let sOut, sIn, sMid;\n\n        if (groupName == \"G1\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n                fnIn2Mid = \"g1m_batchToJacobian\";\n            } else {\n                sIn = G.F.n8*3;\n            }\n            sMid = G.F.n8*3;\n            fnName = \"g1m_\"+fn;\n            if (outType == \"affine\") {\n                fnMid2Out = \"g1m_batchToAffine\";\n                sOut = G.F.n8*2;\n            } else {\n                sOut = G.F.n8*3;\n            }\n        } else if (groupName == \"G2\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n                fnIn2Mid = \"g2m_batchToJacobian\";\n            } else {\n                sIn = G.F.n8*3;\n            }\n            fnName = \"g2m_\"+fn;\n            sMid = G.F.n8*3;\n            if (outType == \"affine\") {\n                fnMid2Out = \"g2m_batchToAffine\";\n                sOut = G.F.n8*2;\n            } else {\n                sOut = G.F.n8*3;\n            }\n        } else if (groupName == \"Fr\") {\n            sIn = Fr.n8;\n            sOut = Fr.n8;\n            sMid = Fr.n8;\n            fnName = \"frm_\" + fn;\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        if (buff1.byteLength != buff2.byteLength) {\n            throw new Error(\"Invalid buffer size\");\n        }\n        const nPoints = Math.floor(buff1.byteLength / sIn);\n        if (nPoints != 1 << log2(nPoints)) {\n            throw new Error(\"Invalid number of points\");\n        }\n\n        let chunkSize = Math.floor(nPoints /tm.concurrency);\n        if (chunkSize < MIN_CHUNK_SIZE) chunkSize = MIN_CHUNK_SIZE;\n        if (chunkSize > MAX_CHUNK_SIZE) chunkSize = MAX_CHUNK_SIZE;\n\n        const opPromises = [];\n\n        for (let i=0; i<nPoints; i += chunkSize) {\n            if (logger) logger.debug(`${loggerTxt}: fftJoinExt Start: ${i}/${nPoints}`);\n            const n= Math.min(nPoints - i, chunkSize);\n\n            const firstChunk = Fr.mul(first, Fr.exp( inc, i));\n            const task = [];\n\n            const b1 = buff1.slice(i*sIn, (i+n)*sIn);\n            const b2 = buff2.slice(i*sIn, (i+n)*sIn);\n\n            task.push({cmd: \"ALLOC\", var: 0, len: sMid*n});\n            task.push({cmd: \"SET\", var: 0, buff: b1});\n            task.push({cmd: \"ALLOC\", var: 1, len: sMid*n});\n            task.push({cmd: \"SET\", var: 1, buff: b2});\n            task.push({cmd: \"ALLOCSET\", var: 2, buff: firstChunk});\n            task.push({cmd: \"ALLOCSET\", var: 3, buff: inc});\n            if (fnIn2Mid) {\n                task.push({cmd: \"CALL\", fnName:fnIn2Mid, params: [{var:0}, {val: n}, {var: 0}]});\n                task.push({cmd: \"CALL\", fnName:fnIn2Mid, params: [{var:1}, {val: n}, {var: 1}]});\n            }\n            task.push({cmd: \"CALL\", fnName: fnName, params: [\n                {var: 0},\n                {var: 1},\n                {val: n},\n                {var: 2},\n                {var: 3},\n                {val: Fr.s},\n            ]});\n            if (fnMid2Out) {\n                task.push({cmd: \"CALL\", fnName:fnMid2Out, params: [{var:0}, {val: n}, {var: 0}]});\n                task.push({cmd: \"CALL\", fnName:fnMid2Out, params: [{var:1}, {val: n}, {var: 1}]});\n            }\n            task.push({cmd: \"GET\", out: 0, var: 0, len: n*sOut});\n            task.push({cmd: \"GET\", out: 1, var: 1, len: n*sOut});\n            opPromises.push(\n                tm.queueAction(task).then( (r) => {\n                    if (logger) logger.debug(`${loggerTxt}: fftJoinExt End: ${i}/${nPoints}`);\n                    return r;\n                })\n            );\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let fullBuffOut1;\n        let fullBuffOut2;\n        if (nPoints * sOut > 1<<28) {\n            fullBuffOut1 = new BigBuffer(nPoints*sOut);\n            fullBuffOut2 = new BigBuffer(nPoints*sOut);\n        } else {\n            fullBuffOut1 = new Uint8Array(nPoints*sOut);\n            fullBuffOut2 = new Uint8Array(nPoints*sOut);\n        }\n\n        let p =0;\n        for (let i=0; i<result.length; i++) {\n            fullBuffOut1.set(result[i][0], p);\n            fullBuffOut2.set(result[i][1], p);\n            p+=result[i][0].byteLength;\n        }\n\n        return [fullBuffOut1, fullBuffOut2];\n    }\n\n\n    G.fft = async function(buff, inType, outType, logger, loggerTxt) {\n        return await _fft(buff, false, inType, outType, logger, loggerTxt);\n    };\n\n    G.ifft = async function(buff, inType, outType, logger, loggerTxt) {\n        return await _fft(buff, true, inType, outType, logger, loggerTxt);\n    };\n\n    G.lagrangeEvaluations = async function (buff, inType, outType, logger, loggerTxt) {\n        inType = inType || \"affine\";\n        outType = outType || \"affine\";\n\n        let sIn;\n        if (groupName == \"G1\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n            } else {\n                sIn = G.F.n8*3;\n            }\n        } else if (groupName == \"G2\") {\n            if (inType == \"affine\") {\n                sIn = G.F.n8*2;\n            } else {\n                sIn = G.F.n8*3;\n            }\n        } else if (groupName == \"Fr\") {\n            sIn = Fr.n8;\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        const nPoints = buff.byteLength /sIn;\n        const bits = log2(nPoints);\n\n        if ((2 ** bits)*sIn != buff.byteLength) {\n            if (logger) logger.error(\"lagrangeEvaluations iinvalid input size\");\n            throw new Error(\"lagrangeEvaluations invalid Input size\");\n        }\n\n        if (bits <= Fr.s) {\n            return await G.ifft(buff, inType, outType, logger, loggerTxt);\n        }\n\n        if (bits > Fr.s+1) {\n            if (logger) logger.error(\"lagrangeEvaluations input too big\");\n            throw new Error(\"lagrangeEvaluations input too big\");\n        }\n\n        let t0 = buff.slice(0, buff.byteLength/2);\n        let t1 = buff.slice(buff.byteLength/2, buff.byteLength);\n\n\n        const shiftToSmallM = Fr.exp(Fr.shift, nPoints/2);\n        const sConst = Fr.inv( Fr.sub(Fr.one, shiftToSmallM));\n\n        [t0, t1] = await _fftJoinExt(t0, t1, \"prepareLagrangeEvaluation\", sConst, Fr.shiftInv, inType, \"jacobian\", logger, loggerTxt + \" prep\");\n\n        const promises = [];\n\n        promises.push( _fft(t0, true, \"jacobian\", outType, logger, loggerTxt + \" t0\"));\n        promises.push( _fft(t1, true, \"jacobian\", outType, logger, loggerTxt + \" t1\"));\n\n        [t0, t1] = await Promise.all(promises);\n\n        let buffOut;\n        if (t0.byteLength > (1<<28)) {\n            buffOut = new BigBuffer(t0.byteLength*2);\n        } else {\n            buffOut = new Uint8Array(t0.byteLength*2);\n        }\n\n        buffOut.set(t0);\n        buffOut.set(t1, t0.byteLength);\n\n        return buffOut;\n    };\n\n    G.fftMix = async function fftMix(buff) {\n        const sG = G.F.n8*3;\n        let fnName, fnFFTJoin;\n        if (groupName == \"G1\") {\n            fnName = \"g1m_fftMix\";\n            fnFFTJoin = \"g1m_fftJoin\";\n        } else if (groupName == \"G2\") {\n            fnName = \"g2m_fftMix\";\n            fnFFTJoin = \"g2m_fftJoin\";\n        } else if (groupName == \"Fr\") {\n            fnName = \"frm_fftMix\";\n            fnFFTJoin = \"frm_fftJoin\";\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        const nPoints = Math.floor(buff.byteLength / sG);\n        const power = log2(nPoints);\n\n        let nChunks = 1 << log2(tm.concurrency);\n\n        if (nPoints <= nChunks*2) nChunks = 1;\n\n        const pointsPerChunk = nPoints / nChunks;\n\n        const powerChunk = log2(pointsPerChunk);\n\n        const opPromises = [];\n        for (let i=0; i<nChunks; i++) {\n            const task = [];\n            const b = buff.slice((i* pointsPerChunk)*sG, ((i+1)* pointsPerChunk)*sG);\n            task.push({cmd: \"ALLOCSET\", var: 0, buff: b});\n            for (let j=1; j<=powerChunk; j++) {\n                task.push({cmd: \"CALL\", fnName: fnName, params: [\n                    {var: 0},\n                    {val: pointsPerChunk},\n                    {val: j}\n                ]});\n            }\n            task.push({cmd: \"GET\", out: 0, var: 0, len: pointsPerChunk*sG});\n            opPromises.push(\n                tm.queueAction(task)\n            );\n        }\n\n        const result = await Promise.all(opPromises);\n\n        const chunks = [];\n        for (let i=0; i<result.length; i++) chunks[i] = result[i][0];\n\n\n        for (let i = powerChunk+1; i<=power; i++) {\n            const nGroups = 1 << (power - i);\n            const nChunksPerGroup = nChunks / nGroups;\n            const opPromises = [];\n            for (let j=0; j<nGroups; j++) {\n                for (let k=0; k <nChunksPerGroup/2; k++) {\n                    const first = Fr.exp( Fr.w[i], k*pointsPerChunk);\n                    const inc = Fr.w[i];\n                    const o1 = j*nChunksPerGroup + k;\n                    const o2 = j*nChunksPerGroup + k + nChunksPerGroup/2;\n\n                    const task = [];\n                    task.push({cmd: \"ALLOCSET\", var: 0, buff: chunks[o1]});\n                    task.push({cmd: \"ALLOCSET\", var: 1, buff: chunks[o2]});\n                    task.push({cmd: \"ALLOCSET\", var: 2, buff: first});\n                    task.push({cmd: \"ALLOCSET\", var: 3, buff: inc});\n                    task.push({cmd: \"CALL\", fnName: fnFFTJoin,  params:[\n                        {var: 0},\n                        {var: 1},\n                        {val: pointsPerChunk},\n                        {var: 2},\n                        {var: 3}\n                    ]});\n                    task.push({cmd: \"GET\", out: 0, var: 0, len: pointsPerChunk*sG});\n                    task.push({cmd: \"GET\", out: 1, var: 1, len: pointsPerChunk*sG});\n                    opPromises.push(tm.queueAction(task));\n                }\n            }\n\n            const res = await Promise.all(opPromises);\n            for (let j=0; j<nGroups; j++) {\n                for (let k=0; k <nChunksPerGroup/2; k++) {\n                    const o1 = j*nChunksPerGroup + k;\n                    const o2 = j*nChunksPerGroup + k + nChunksPerGroup/2;\n                    const resChunk = res.shift();\n                    chunks[o1] = resChunk[0];\n                    chunks[o2] = resChunk[1];\n                }\n            }\n        }\n\n        let fullBuffOut;\n        if (buff instanceof BigBuffer) {\n            fullBuffOut = new BigBuffer(nPoints*sG);\n        } else {\n            fullBuffOut = new Uint8Array(nPoints*sG);\n        }\n        let p =0;\n        for (let i=0; i<nChunks; i++) {\n            fullBuffOut.set(chunks[i], p);\n            p+=chunks[i].byteLength;\n        }\n\n        return fullBuffOut;\n    };\n\n    G.fftJoin = async function fftJoin(buff1, buff2, first, inc) {\n        const sG = G.F.n8*3;\n        let fnName;\n        if (groupName == \"G1\") {\n            fnName = \"g1m_fftJoin\";\n        } else if (groupName == \"G2\") {\n            fnName = \"g2m_fftJoin\";\n        } else if (groupName == \"Fr\") {\n            fnName = \"frm_fftJoin\";\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        if (buff1.byteLength != buff2.byteLength) {\n            throw new Error(\"Invalid buffer size\");\n        }\n        const nPoints = Math.floor(buff1.byteLength / sG);\n        if (nPoints != 1 << log2(nPoints)) {\n            throw new Error(\"Invalid number of points\");\n        }\n\n        let nChunks = 1 << log2(tm.concurrency);\n        if (nPoints <= nChunks*2) nChunks = 1;\n\n        const pointsPerChunk = nPoints / nChunks;\n\n\n        const opPromises = [];\n        for (let i=0; i<nChunks; i++) {\n            const task = [];\n\n            const firstChunk = Fr.mul(first, Fr.exp(inc, i*pointsPerChunk));\n            const b1 = buff1.slice((i* pointsPerChunk)*sG, ((i+1)* pointsPerChunk)*sG);\n            const b2 = buff2.slice((i* pointsPerChunk)*sG, ((i+1)* pointsPerChunk)*sG);\n            task.push({cmd: \"ALLOCSET\", var: 0, buff: b1});\n            task.push({cmd: \"ALLOCSET\", var: 1, buff: b2});\n            task.push({cmd: \"ALLOCSET\", var: 2, buff: firstChunk});\n            task.push({cmd: \"ALLOCSET\", var: 3, buff: inc});\n            task.push({cmd: \"CALL\", fnName: fnName, params: [\n                {var: 0},\n                {var: 1},\n                {val: pointsPerChunk},\n                {var: 2},\n                {var: 3}\n            ]});\n            task.push({cmd: \"GET\", out: 0, var: 0, len: pointsPerChunk*sG});\n            task.push({cmd: \"GET\", out: 1, var: 1, len: pointsPerChunk*sG});\n            opPromises.push(\n                tm.queueAction(task)\n            );\n\n        }\n\n\n        const result = await Promise.all(opPromises);\n\n        let fullBuffOut1;\n        let fullBuffOut2;\n        if (buff1 instanceof BigBuffer) {\n            fullBuffOut1 = new BigBuffer(nPoints*sG);\n            fullBuffOut2 = new BigBuffer(nPoints*sG);\n        } else {\n            fullBuffOut1 = new Uint8Array(nPoints*sG);\n            fullBuffOut2 = new Uint8Array(nPoints*sG);\n        }\n\n        let p =0;\n        for (let i=0; i<result.length; i++) {\n            fullBuffOut1.set(result[i][0], p);\n            fullBuffOut2.set(result[i][1], p);\n            p+=result[i][0].byteLength;\n        }\n\n        return [fullBuffOut1, fullBuffOut2];\n    };\n\n\n\n    G.fftFinal =  async function fftFinal(buff, factor) {\n        const sG = G.F.n8*3;\n        const sGout = G.F.n8*2;\n        let fnName, fnToAffine;\n        if (groupName == \"G1\") {\n            fnName = \"g1m_fftFinal\";\n            fnToAffine = \"g1m_batchToAffine\";\n        } else if (groupName == \"G2\") {\n            fnName = \"g2m_fftFinal\";\n            fnToAffine = \"g2m_batchToAffine\";\n        } else {\n            throw new Error(\"Invalid group\");\n        }\n\n        const nPoints = Math.floor(buff.byteLength / sG);\n        if (nPoints != 1 << log2(nPoints)) {\n            throw new Error(\"Invalid number of points\");\n        }\n\n        const pointsPerChunk = Math.floor(nPoints / tm.concurrency);\n\n        const opPromises = [];\n        for (let i=0; i<tm.concurrency; i++) {\n            let n;\n            if (i< tm.concurrency-1) {\n                n = pointsPerChunk;\n            } else {\n                n = nPoints - i*pointsPerChunk;\n            }\n            if (n==0) continue;\n            const task = [];\n            const b = buff.slice((i* pointsPerChunk)*sG, (i*pointsPerChunk+n)*sG);\n            task.push({cmd: \"ALLOCSET\", var: 0, buff: b});\n            task.push({cmd: \"ALLOCSET\", var: 1, buff: factor});\n            task.push({cmd: \"CALL\", fnName: fnName, params: [\n                {var: 0},\n                {val: n},\n                {var: 1},\n            ]});\n            task.push({cmd: \"CALL\", fnName: fnToAffine, params: [\n                {var: 0},\n                {val: n},\n                {var: 0},\n            ]});\n            task.push({cmd: \"GET\", out: 0, var: 0, len: n*sGout});\n            opPromises.push(\n                tm.queueAction(task)\n            );\n\n        }\n\n        const result = await Promise.all(opPromises);\n\n        let fullBuffOut;\n        if (buff instanceof BigBuffer) {\n            fullBuffOut = new BigBuffer(nPoints*sGout);\n        } else {\n            fullBuffOut = new Uint8Array(nPoints*sGout);\n        }\n\n        let p =0;\n        for (let i=result.length-1; i>=0; i--) {\n            fullBuffOut.set(result[i][0], p);\n            p+=result[i][0].byteLength;\n        }\n\n        return fullBuffOut;\n    };\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport { ModuleBuilder } from \"./src/modulebuilder.js\";\nexport { ModuleBuilderWat } from \"./src/modulebuilder_wat.js\";\nexport { buildProtoboard } from \"./src/protoboard.js\";\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { FunctionBuilder } from \"./functionbuilder.js\";\nimport * as utils from \"./utils.js\";\n\nexport class ModuleBuilder {\n\n    constructor() {\n        this.functions = [];\n        this.functionIdxByName = {};\n        this.nImportFunctions = 0;\n        this.nInternalFunctions =0;\n        this.memory = {\n            pagesSize: 1,\n            moduleName: \"env\",\n            fieldName: \"memory\"\n        };\n        this.free = 8;\n        this.datas = [];\n        this.modules = {};\n        this.exports = [];\n        this.functionsTable = [];\n    }\n\n    build() {\n        this._setSignatures();\n        return new Uint8Array([\n            ...utils.u32(0x6d736100),\n            ...utils.u32(1),\n            ...this._buildType(),\n            ...this._buildImport(),\n            ...this._buildFunctionDeclarations(),\n            ...this._buildFunctionsTable(),\n            ...this._buildExports(),\n            ...this._buildElements(),\n            ...this._buildCode(),\n            ...this._buildData()\n        ]);\n    }\n\n    addFunction(fnName) {\n        if (typeof(this.functionIdxByName[fnName]) !== \"undefined\")\n            throw new Error(`Function already defined: ${fnName}`);\n\n        const idx = this.functions.length;\n        this.functionIdxByName[fnName] = idx;\n\n        this.functions.push(new FunctionBuilder(this, fnName, \"internal\"));\n\n        this.nInternalFunctions++;\n        return this.functions[idx];\n    }\n\n    addIimportFunction(fnName, moduleName, _fieldName) {\n        if (typeof(this.functionIdxByName[fnName]) !== \"undefined\")\n            throw new Error(`Function already defined: ${fnName}`);\n\n        if (  (this.functions.length>0)\n            &&(this.functions[this.functions.length-1].type == \"internal\"))\n            throw new Error(`Import functions must be declared before internal: ${fnName}`);\n\n        let fieldName = _fieldName || fnName;\n\n        const idx = this.functions.length;\n        this.functionIdxByName[fnName] = idx;\n\n        this.functions.push(new FunctionBuilder(this, fnName, \"import\", moduleName, fieldName));\n\n        this.nImportFunctions ++;\n        return this.functions[idx];\n    }\n\n    setMemory(pagesSize, moduleName, fieldName) {\n        this.memory = {\n            pagesSize: pagesSize,\n            moduleName: moduleName || \"env\",\n            fieldName: fieldName || \"memory\"\n        };\n    }\n\n    exportFunction(fnName, _exportName) {\n        const exportName = _exportName || fnName;\n        if (typeof(this.functionIdxByName[fnName]) === \"undefined\")\n            throw new Error(`Function not defined: ${fnName}`);\n        const idx = this.functionIdxByName[fnName];\n        if (exportName != fnName) {\n            this.functionIdxByName[exportName] = idx;\n        }\n        this.exports.push({\n            exportName: exportName,\n            idx: idx\n        });\n    }\n\n    addFunctionToTable(fnName) {\n        const idx = this.functionIdxByName[fnName];\n        this.functionsTable.push(idx);\n    }\n\n    addData(offset, bytes) {\n        this.datas.push({\n            offset: offset,\n            bytes: bytes\n        });\n    }\n\n    alloc(a, b) {\n        let size;\n        let bytes;\n        if ((Array.isArray(a) || ArrayBuffer.isView(a)) && (typeof(b) === \"undefined\")) {\n            size = a.length;\n            bytes = a;\n        } else {\n            size = a;\n            bytes = b;\n        }\n        size = (((size-1)>>3) +1)<<3;       // Align to 64 bits.\n        const p = this.free;\n        this.free += size;\n        if (bytes) {\n            this.addData(p, bytes);\n        }\n        return p;\n    }\n\n    allocString(s) {\n        const encoder = new globalThis.TextEncoder();\n        const uint8array = encoder.encode(s);\n        return this.alloc([...uint8array, 0]);\n    }\n\n    _setSignatures() {\n        this.signatures = [];\n        const signatureIdxByName = {};\n        if (this.functionsTable.length>0) {\n            const signature = this.functions[this.functionsTable[0]].getSignature();\n            const signatureName = \"s_\"+utils.toHexString(signature);\n            signatureIdxByName[signatureName] = 0;\n            this.signatures.push(signature);\n        }\n        for (let i=0; i<this.functions.length; i++) {\n            const signature = this.functions[i].getSignature();\n            const signatureName = \"s_\"+utils.toHexString(signature);\n            if (typeof(signatureIdxByName[signatureName]) === \"undefined\") {\n                signatureIdxByName[signatureName] = this.signatures.length;\n                this.signatures.push(signature);\n            }\n\n            this.functions[i].signatureIdx = signatureIdxByName[signatureName];\n        }\n\n    }\n\n    _buildSection(sectionType, section) {\n        return [sectionType, ...utils.varuint32(section.length), ...section];\n    }\n\n    _buildType() {\n        return this._buildSection(\n            0x01,\n            [\n                ...utils.varuint32(this.signatures.length),\n                ...[].concat(...this.signatures)\n            ]\n        );\n    }\n\n    _buildImport() {\n        const entries = [];\n        entries.push([\n            ...utils.string(this.memory.moduleName),\n            ...utils.string(this.memory.fieldName),\n            0x02,\n            0x00,   //Flags no init valua\n            ...utils.varuint32(this.memory.pagesSize)\n        ]);\n        for (let i=0; i< this.nImportFunctions; i++) {\n            entries.push([\n                ...utils.string(this.functions[i].moduleName),\n                ...utils.string(this.functions[i].fieldName),\n                0x00,\n                ...utils.varuint32(this.functions[i].signatureIdx)\n            ]);\n        }\n        return this._buildSection(\n            0x02,\n            utils.varuint32(entries.length).concat(...entries)\n        );\n    }\n\n    _buildFunctionDeclarations() {\n        const entries = [];\n        for (let i=this.nImportFunctions; i< this.nImportFunctions + this.nInternalFunctions; i++) {\n            entries.push(...utils.varuint32(this.functions[i].signatureIdx));\n        }\n        return this._buildSection(\n            0x03,\n            [\n                ...utils.varuint32(entries.length),\n                ...[...entries]\n            ]\n        );\n    }\n\n    _buildFunctionsTable() {\n        if (this.functionsTable.length == 0) return [];\n        return this._buildSection(\n            0x04,\n            [\n                ...utils.varuint32(1),\n                0x70, 0, ...utils.varuint32(this.functionsTable.length)\n            ]\n        );\n    }\n\n    _buildElements() {\n        if (this.functionsTable.length == 0) return [];\n        const entries = [];\n        for (let i=0; i<this.functionsTable.length; i++) {\n            entries.push(...utils.varuint32(this.functionsTable[i]));\n        }\n        return this._buildSection(\n            0x09,\n            [\n                ...utils.varuint32(1),      // 1 entry\n                ...utils.varuint32(0),      // Table (0 in MVP)\n                0x41,                       // offset 0\n                ...utils.varint32(0),\n                0x0b,\n                ...utils.varuint32(this.functionsTable.length), // Number of elements\n                ...[...entries]\n            ]\n        );\n    }\n\n    _buildExports() {\n        const entries = [];\n        for (let i=0; i< this.exports.length; i++) {\n            entries.push([\n                ...utils.string(this.exports[i].exportName),\n                0x00,\n                ...utils.varuint32(this.exports[i].idx)\n            ]);\n        }\n        return this._buildSection(\n            0x07,\n            utils.varuint32(entries.length).concat(...entries)\n        );\n    }\n\n    _buildCode() {\n        const entries = [];\n        for (let i=this.nImportFunctions; i< this.nImportFunctions + this.nInternalFunctions; i++) {\n            entries.push(this.functions[i].getBody());\n        }\n        return this._buildSection(\n            0x0a,\n            utils.varuint32(entries.length).concat(...entries)\n        );\n    }\n\n    _buildData() {\n        const entries = [];\n        entries.push([\n            0x00,\n            0x41,\n            0x00,\n            0x0b,\n            0x04,\n            ...utils.u32(this.free)\n        ]);\n        for (let i=0; i< this.datas.length; i++) {\n            entries.push([\n                0x00,\n                0x41,\n                ...utils.varint32(this.datas[i].offset),\n                0x0b,\n                ...utils.varuint32(this.datas[i].bytes.length),\n                ...this.datas[i].bytes,\n            ]);\n        }\n        return this._buildSection(\n            0x0b,\n            utils.varuint32(entries.length).concat(...entries)\n        );\n    }\n\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { CodeBuilder } from \"./codebuilder.js\";\nimport * as utils from \"./utils.js\";\n\nconst typeCodes = {\n    \"i32\": 0x7f,\n    \"i64\": 0x7e,\n    \"f32\": 0x7d,\n    \"f64\": 0x7c,\n    \"anyfunc\": 0x70,\n    \"func\": 0x60,\n    \"emptyblock\": 0x40\n};\n\n\nexport class FunctionBuilder {\n\n    constructor (module, fnName, fnType, moduleName, fieldName) {\n        if (fnType == \"import\") {\n            this.fnType = \"import\";\n            this.moduleName = moduleName;\n            this.fieldName = fieldName;\n        } else if (fnType == \"internal\") {\n            this.fnType = \"internal\";\n        } else {\n            throw new Error(\"Invalid function fnType: \" + fnType);\n        }\n        this.module = module;\n        this.fnName = fnName;\n        this.params = [];\n        this.locals = [];\n        this.localIdxByName = {};\n        this.code = [];\n        this.returnType = null;\n        this.nextLocal =0;\n    }\n\n    addParam(paramName, paramType) {\n        if (this.localIdxByName[paramName])\n            throw new Error(`param already exists. Function: ${this.fnName}, Param: ${paramName} `);\n        const idx = this.nextLocal++;\n        this.localIdxByName[paramName] = idx;\n        this.params.push({\n            type: paramType\n        });\n    }\n\n    addLocal(localName, localType, _length) {\n        const length = _length || 1;\n        if (this.localIdxByName[localName])\n            throw new Error(`local already exists. Function: ${this.fnName}, Param: ${localName} `);\n        const idx = this.nextLocal++;\n        this.localIdxByName[localName] = idx;\n        this.locals.push({\n            type: localType,\n            length: length\n        });\n    }\n\n    setReturnType(returnType) {\n        if (this.returnType)\n            throw new Error(`returnType already defined. Function: ${this.fnName}`);\n        this.returnType = returnType;\n    }\n\n    getSignature() {\n        const params = [...utils.varuint32(this.params.length), ...this.params.map((p) => typeCodes[p.type])];\n        const returns = this.returnType ? [0x01, typeCodes[this.returnType]] : [0];\n        return [0x60, ...params, ...returns];\n    }\n\n    getBody() {\n        const locals = this.locals.map((l) => [\n            ...utils.varuint32(l.length),\n            typeCodes[l.type]\n        ]);\n\n        const body = [\n            ...utils.varuint32(this.locals.length),\n            ...[].concat(...locals),\n            ...this.code,\n            0x0b\n        ];\n        return [\n            ...utils.varuint32(body.length),\n            ...body\n        ];\n    }\n\n    addCode(...code) {\n        this.code.push(...[].concat(...[...code]));\n    }\n\n    getCodeBuilder() {\n        return new CodeBuilder(this);\n    }\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as utils from \"./utils.js\";\n\nexport class CodeBuilder {\n    constructor(func) {\n        this.func = func;\n        this.functionName = func.functionName;\n        this.module = func.module;\n    }\n\n    setLocal(localName, valCode) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return [...valCode, 0x21, ...utils.varuint32( idx )];\n    }\n\n    teeLocal(localName, valCode) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return [...valCode, 0x22, ...utils.varuint32( idx )];\n    }\n\n    getLocal(localName) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return [0x20, ...utils.varuint32( idx )];\n    }\n\n    i64_load8_s(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 0 : _align;  // 8 bits alignment by default\n        return [...idxCode, 0x30, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load8_u(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 0 : _align;  // 8 bits alignment by default\n        return [...idxCode, 0x31, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load16_s(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 1 : _align;  // 16 bits alignment by default\n        return [...idxCode, 0x32, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load16_u(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 1 : _align;  // 16 bits alignment by default\n        return [...idxCode, 0x33, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load32_s(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 2 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x34, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load32_u(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 2 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x35, align, ...utils.varuint32(offset)];\n    }\n\n    i64_load(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 3 : _align;  // 64 bits alignment by default\n        return [...idxCode, 0x29, align, ...utils.varuint32(offset)];\n    }\n\n\n    i64_store(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 3;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 3;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x37, align, ...utils.varuint32(offset)];\n    }\n\n    i64_store32(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 2;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 2;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x3e, align, ...utils.varuint32(offset)];\n    }\n\n\n    i64_store16(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 1;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 1;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x3d, align, ...utils.varuint32(offset)];\n    }\n\n\n    i64_store8(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 0;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 0;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x3c, align, ...utils.varuint32(offset)];\n    }\n\n    i32_load8_s(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 0 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x2c, align, ...utils.varuint32(offset)];\n    }\n\n    i32_load8_u(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 0 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x2d, align, ...utils.varuint32(offset)];\n    }\n\n    i32_load16_s(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 1 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x2e, align, ...utils.varuint32(offset)];\n    }\n\n    i32_load16_u(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 1 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x2f, align, ...utils.varuint32(offset)];\n    }\n\n    i32_load(idxCode, _offset, _align) {\n        const offset = _offset || 0;\n        const align = (_align === undefined) ? 2 : _align;  // 32 bits alignment by default\n        return [...idxCode, 0x28, align, ...utils.varuint32(offset)];\n    }\n\n    i32_store(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 2;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 2;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x36, align, ...utils.varuint32(offset)];\n    }\n\n\n    i32_store16(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 1;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 1;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x3b, align, ...utils.varuint32(offset)];\n    }\n\n    i32_store8(idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (Array.isArray(_offset)) {\n            offset = 0;\n            align = 0;\n            codeVal = _offset;\n        } else if (Array.isArray(_align)) {\n            offset = _offset;\n            align = 0;\n            codeVal = _align;\n        } else if (Array.isArray(_codeVal)) {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        return [...idxCode, ...codeVal, 0x3a, align, ...utils.varuint32(offset)];\n    }\n\n    call(fnName, ...args) {\n        const idx = this.module.functionIdxByName[fnName];\n        if (idx === undefined)\n            throw new Error(`Function not defined: Function: ${fnName}`);\n        return [...[].concat(...args), 0x10, ...utils.varuint32(idx)];\n    }\n\n    call_indirect(fnIdx, ...args) {\n        return [...[].concat(...args), ...fnIdx, 0x11, 0, 0];\n    }\n\n    if(condCode, thenCode, elseCode) {\n        if (elseCode) {\n            return [...condCode, 0x04, 0x40, ...thenCode, 0x05, ...elseCode, 0x0b];\n        } else {\n            return [...condCode, 0x04, 0x40, ...thenCode, 0x0b];\n        }\n    }\n\n    block(bCode) { return [0x02, 0x40, ...bCode, 0x0b]; }\n    loop(...args) {\n        return [0x03, 0x40, ...[].concat(...[...args]), 0x0b];\n    }\n    br_if(relPath, condCode) { return [...condCode, 0x0d, ...utils.varuint32(relPath)]; }\n    br(relPath) { return [0x0c, ...utils.varuint32(relPath)]; }\n    ret(rCode) { return [...rCode, 0x0f]; }\n    drop(dCode) { return [...dCode,  0x1a]; }\n\n    i64_const(num) { return [0x42, ...utils.varint64(num)]; }\n    i32_const(num) { return [0x41, ...utils.varint32(num)]; }\n\n\n    i64_eqz(opcode) { return [...opcode, 0x50]; }\n    i64_eq(op1code, op2code) { return [...op1code, ...op2code, 0x51]; }\n    i64_ne(op1code, op2code) { return [...op1code, ...op2code, 0x52]; }\n    i64_lt_s(op1code, op2code) { return [...op1code, ...op2code, 0x53]; }\n    i64_lt_u(op1code, op2code) { return [...op1code, ...op2code, 0x54]; }\n    i64_gt_s(op1code, op2code) { return [...op1code, ...op2code, 0x55]; }\n    i64_gt_u(op1code, op2code) { return [...op1code, ...op2code, 0x56]; }\n    i64_le_s(op1code, op2code) { return [...op1code, ...op2code, 0x57]; }\n    i64_le_u(op1code, op2code) { return [...op1code, ...op2code, 0x58]; }\n    i64_ge_s(op1code, op2code) { return [...op1code, ...op2code, 0x59]; }\n    i64_ge_u(op1code, op2code) { return [...op1code, ...op2code, 0x5a]; }\n    i64_add(op1code, op2code) { return [...op1code, ...op2code, 0x7c]; }\n    i64_sub(op1code, op2code) { return [...op1code, ...op2code, 0x7d]; }\n    i64_mul(op1code, op2code) { return [...op1code, ...op2code, 0x7e]; }\n    i64_div_s(op1code, op2code) { return [...op1code, ...op2code, 0x7f]; }\n    i64_div_u(op1code, op2code) { return [...op1code, ...op2code, 0x80]; }\n    i64_rem_s(op1code, op2code) { return [...op1code, ...op2code, 0x81]; }\n    i64_rem_u(op1code, op2code) { return [...op1code, ...op2code, 0x82]; }\n    i64_and(op1code, op2code) { return [...op1code, ...op2code, 0x83]; }\n    i64_or(op1code, op2code) { return [...op1code, ...op2code, 0x84]; }\n    i64_xor(op1code, op2code) { return [...op1code, ...op2code, 0x85]; }\n    i64_shl(op1code, op2code) { return [...op1code, ...op2code, 0x86]; }\n    i64_shr_s(op1code, op2code) { return [...op1code, ...op2code, 0x87]; }\n    i64_shr_u(op1code, op2code) { return [...op1code, ...op2code, 0x88]; }\n    i64_extend_i32_s(op1code) { return [...op1code, 0xac]; }\n    i64_extend_i32_u(op1code) { return [...op1code, 0xad]; }\n    i64_clz(op1code) { return [...op1code, 0x79]; }\n    i64_ctz(op1code) { return [...op1code, 0x7a]; }\n\n    i32_eqz(op1code) { return [...op1code, 0x45]; }\n    i32_eq(op1code, op2code) { return [...op1code, ...op2code, 0x46]; }\n    i32_ne(op1code, op2code) { return [...op1code, ...op2code, 0x47]; }\n    i32_lt_s(op1code, op2code) { return [...op1code, ...op2code, 0x48]; }\n    i32_lt_u(op1code, op2code) { return [...op1code, ...op2code, 0x49]; }\n    i32_gt_s(op1code, op2code) { return [...op1code, ...op2code, 0x4a]; }\n    i32_gt_u(op1code, op2code) { return [...op1code, ...op2code, 0x4b]; }\n    i32_le_s(op1code, op2code) { return [...op1code, ...op2code, 0x4c]; }\n    i32_le_u(op1code, op2code) { return [...op1code, ...op2code, 0x4d]; }\n    i32_ge_s(op1code, op2code) { return [...op1code, ...op2code, 0x4e]; }\n    i32_ge_u(op1code, op2code) { return [...op1code, ...op2code, 0x4f]; }\n    i32_add(op1code, op2code) { return [...op1code, ...op2code, 0x6a]; }\n    i32_sub(op1code, op2code) { return [...op1code, ...op2code, 0x6b]; }\n    i32_mul(op1code, op2code) { return [...op1code, ...op2code, 0x6c]; }\n    i32_div_s(op1code, op2code) { return [...op1code, ...op2code, 0x6d]; }\n    i32_div_u(op1code, op2code) { return [...op1code, ...op2code, 0x6e]; }\n    i32_rem_s(op1code, op2code) { return [...op1code, ...op2code, 0x6f]; }\n    i32_rem_u(op1code, op2code) { return [...op1code, ...op2code, 0x70]; }\n    i32_and(op1code, op2code) { return [...op1code, ...op2code, 0x71]; }\n    i32_or(op1code, op2code) { return [...op1code, ...op2code, 0x72]; }\n    i32_xor(op1code, op2code) { return [...op1code, ...op2code, 0x73]; }\n    i32_shl(op1code, op2code) { return [...op1code, ...op2code, 0x74]; }\n    i32_shr_s(op1code, op2code) { return [...op1code, ...op2code, 0x75]; }\n    i32_shr_u(op1code, op2code) { return [...op1code, ...op2code, 0x76]; }\n    i32_rotl(op1code, op2code) { return [...op1code, ...op2code, 0x77]; }\n    i32_rotr(op1code, op2code) { return [...op1code, ...op2code, 0x78]; }\n    i32_wrap_i64(op1code) { return [...op1code, 0xa7]; }\n    i32_clz(op1code) { return [...op1code, 0x67]; }\n    i32_ctz(op1code) { return [...op1code, 0x68]; }\n\n    unreachable() { return [ 0x0 ]; }\n\n    current_memory() { return [ 0x3f, 0]; }\n\n    comment() { return []; }\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport function toNumber(n) {\n    return BigInt(n);\n}\n\nexport function isNegative(n) {\n    return n < 0n;\n}\n\nexport function isZero(n) {\n    return n === 0n;\n}\n\nexport function bitLength(n) {\n    if (isNegative(n)) {\n        return n.toString(2).length - 1; // discard the - sign\n    } else {\n        return n.toString(2).length;\n    }\n}\n\nexport function u32(n) {\n    const b = [];\n    const v = toNumber(n);\n    b.push(Number(v & 0xFFn));\n    b.push(Number(v >> 8n & 0xFFn));\n    b.push(Number(v >> 16n & 0xFFn));\n    b.push(Number(v >> 24n & 0xFFn));\n    return b;\n}\n\nexport function u64(n) {\n    const b = [];\n    const v = toNumber(n);\n    b.push(Number(v & 0xFFn));\n    b.push(Number(v >> 8n & 0xFFn));\n    b.push(Number(v >> 16n & 0xFFn));\n    b.push(Number(v >> 24n & 0xFFn));\n    b.push(Number(v >> 32n & 0xFFn));\n    b.push(Number(v >> 40n & 0xFFn));\n    b.push(Number(v >> 48n & 0xFFn));\n    b.push(Number(v >> 56n & 0xFFn));\n    return b;\n}\n\nexport function toUTF8Array(str) {\n    var utf8 = [];\n    for (var i=0; i < str.length; i++) {\n        var charcode = str.charCodeAt(i);\n        if (charcode < 0x80) utf8.push(charcode);\n        else if (charcode < 0x800) {\n            utf8.push(0xc0 | (charcode >> 6),\n                0x80 | (charcode & 0x3f));\n        }\n        else if (charcode < 0xd800 || charcode >= 0xe000) {\n            utf8.push(0xe0 | (charcode >> 12),\n                0x80 | ((charcode>>6) & 0x3f),\n                0x80 | (charcode & 0x3f));\n        }\n        // surrogate pair\n        else {\n            i++;\n            // UTF-16 encodes 0x10000-0x10FFFF by\n            // subtracting 0x10000 and splitting the\n            // 20 bits of 0x0-0xFFFFF into two halves\n            charcode = 0x10000 + (((charcode & 0x3ff)<<10)\n                      | (str.charCodeAt(i) & 0x3ff));\n            utf8.push(0xf0 | (charcode >>18),\n                0x80 | ((charcode>>12) & 0x3f),\n                0x80 | ((charcode>>6) & 0x3f),\n                0x80 | (charcode & 0x3f));\n        }\n    }\n    return utf8;\n}\n\nexport function string(str) {\n    const bytes = toUTF8Array(str);\n    return [ ...varuint32(bytes.length), ...bytes ];\n}\n\nexport function varuint(n) {\n    const code = [];\n    let v = toNumber(n);\n    if (isNegative(v)) throw new Error(\"Number cannot be negative\");\n    while (!isZero(v)) {\n        code.push(Number(v & 0x7Fn));\n        v = v >> 7n;\n    }\n    if (code.length==0) code.push(0);\n    for (let i=0; i<code.length-1; i++) {\n        code[i] = code[i] | 0x80;\n    }\n    return code;\n}\n\nexport function varint(_n) {\n    let n, sign;\n    const bits = bitLength(_n);\n    if (_n<0) {\n        sign = true;\n        n = (1n << BigInt(bits)) + _n;\n    } else {\n        sign = false;\n        n = toNumber(_n);\n    }\n    const paddingBits = 7 - (bits % 7);\n\n    const padding = ((1n << BigInt(paddingBits)) - 1n) << BigInt(bits);\n    const paddingMask = ((1 << (7 - paddingBits))-1) | 0x80;\n\n    const code = varuint(n + padding);\n\n    if (!sign) {\n        code[code.length-1] = code[code.length-1] & paddingMask;\n    }\n\n    return code;\n}\n\nexport function varint32(n) {\n    let v = toNumber(n);\n    if (v > 0xFFFFFFFFn) throw new Error(\"Number too big\");\n    if (v > 0x7FFFFFFFn) v = v - 0x100000000n;\n    // bigInt(\"-80000000\", 16) as base10\n    if (v < -2147483648n) throw new Error(\"Number too small\");\n    return varint(v);\n}\n\nexport function varint64(n) {\n    let v = toNumber(n);\n    if (v > 0xFFFFFFFFFFFFFFFFn) throw new Error(\"Number too big\");\n    if (v > 0x7FFFFFFFFFFFFFFFn) v = v - 0x10000000000000000n;\n    // bigInt(\"-8000000000000000\", 16) as base10\n    if (v < -9223372036854775808n) throw new Error(\"Number too small\");\n    return varint(v);\n}\n\nexport function varuint32(n) {\n    let v = toNumber(n);\n    if (v > 0xFFFFFFFFn) throw new Error(\"Number too big\");\n    return varuint(v);\n}\n\nexport function varuint64(n) {\n    let v = toNumber(n);\n    if (v > 0xFFFFFFFFFFFFFFFFn) throw new Error(\"Number too big\");\n    return varuint(v);\n}\n\nexport function toHexString(byteArray) {\n    return Array.from(byteArray, function(byte) {\n        return (\"0\" + (byte & 0xFF).toString(16)).slice(-2);\n    }).join(\"\");\n}\n\nexport function ident(text) {\n    if (typeof text === \"string\") {\n        let lines = text.split(\"\\n\");\n        for (let i=0; i<lines.length; i++) {\n            if (lines[i]) lines[i] = \"    \"+lines[i];\n        }\n        return lines.join(\"\\n\");\n    } else if (Array.isArray(text)) {\n        for (let i=0; i<text.length; i++ ) {\n            text[i] = ident(text[i]);\n        }\n        return text;\n    }\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\nimport { FunctionBuilderWat } from \"./functionbuilder_wat.js\";\nimport * as utils from \"./utils.js\";\n\nexport class ModuleBuilderWat {\n\n    constructor() {\n        this.functions = [];\n        this.functionIdxByName = {};\n        this.nImportFunctions = 0;\n        this.nInternalFunctions =0;\n        this.memory = {\n            pagesSize: 1,\n            moduleName: \"env\",\n            fieldName: \"memory\"\n        };\n        this.free = 8;\n        this.datas = [];\n        this.modules = {};\n        this.exports = [];\n        this.functionsTable = [];\n    }\n\n    build() {\n        const src = [];\n        this._setSignatures();\n        src.push(this._buildType());\n        src.push(this._buildImport());\n        if (this.functionsTable.length>0) {\n            src.push(this._buildFunctionsTable());\n        }\n        if (this.exports.length > 0) {\n            src.push(this._buildExports());\n        }\n        if (this.functionsTable.length>0) {\n            src.push(this._buildElements());\n        }\n        if (this.nInternalFunctions>0) {\n            src.push(this._buildFunctions());\n        }\n        src.push(this._buildData());\n        return [\n            \"(module\",\n            utils.ident(src),\n            \")\"\n        ];\n    }\n\n    addFunction(fnName, comment) {\n        if (typeof(this.functionIdxByName[fnName]) !== \"undefined\")\n            throw new Error(`Function already defined: ${fnName}`);\n\n        const idx = this.functions.length;\n        this.functionIdxByName[fnName] = idx;\n\n        this.functions.push(new FunctionBuilderWat(this, fnName, \"internal\", comment));\n\n        this.nInternalFunctions++;\n        return this.functions[idx];\n    }\n\n    addIimportFunction(fnName, moduleName, _fieldName) {\n        if (typeof(this.functionIdxByName[fnName]) !== \"undefined\")\n            throw new Error(`Function already defined: ${fnName}`);\n\n        if (  (this.functions.length>0)\n            &&(this.functions[this.functions.length-1].type == \"internal\"))\n            throw new Error(`Import functions must be declared before internal: ${fnName}`);\n\n        let fieldName = _fieldName || fnName;\n\n        const idx = this.functions.length;\n        this.functionIdxByName[fnName] = idx;\n\n        this.functions.push(new FunctionBuilderWat(this, fnName, \"import\", moduleName, fieldName));\n\n        this.nImportFunctions ++;\n        return this.functions[idx];\n    }\n\n    setMemory(pagesSize, moduleName, fieldName) {\n        this.memory = {\n            pagesSize: pagesSize,\n            moduleName: moduleName || \"env\",\n            fieldName: fieldName || \"memory\"\n        };\n    }\n\n    exportFunction(fnName, _exportName) {\n        const exportName = _exportName || fnName;\n        if (typeof(this.functionIdxByName[fnName]) === \"undefined\")\n            throw new Error(`Function not defined: ${fnName}`);\n        const idx = this.functionIdxByName[fnName];\n        if (exportName != fnName) {\n            this.functionIdxByName[exportName] = idx;\n        }\n        this.exports.push({\n            exportName: exportName,\n            idx: idx\n        });\n    }\n\n    addFunctionToTable(fnName) {\n        const idx = this.functionIdxByName[fnName];\n        this.functionsTable.push(idx);\n    }\n\n    addData(offset, bytes) {\n        this.datas.push({\n            offset: offset,\n            bytes: bytes\n        });\n    }\n\n    alloc(a, b) {\n        let size;\n        let bytes;\n        if ((Array.isArray(a) || ArrayBuffer.isView(a)) && (typeof(b) === \"undefined\")) {\n            size = a.length;\n            bytes = a;\n        } else {\n            size = a;\n            bytes = b;\n        }\n        size = (((size-1)>>3) +1)<<3;       // Align to 64 bits.\n        const p = this.free;\n        this.free += size;\n        if (bytes) {\n            this.addData(p, bytes);\n        }\n        return p;\n    }\n\n    allocString(s) {\n        const encoder = new TextEncoder();\n        const uint8array = encoder.encode(s);\n        return this.alloc([...uint8array, 0]);\n    }\n\n    _setSignatures() {\n        this.signatures = [];\n        const signatureIdxByName = {};\n        if (this.functionsTable.length>0) {\n            const signature = this.functions[this.functionsTable[0]].getSignature();\n            const signatureName = this.functions[this.functionsTable[0]].getSignatureName();\n            signatureIdxByName[signatureName] = 0;\n            this.signatures.push(signature);\n        }\n        for (let i=0; i<this.functions.length; i++) {\n            const signature = this.functions[i].getSignature();\n            const signatureName = this.functions[i].getSignatureName();\n            if (typeof(signatureIdxByName[signatureName]) === \"undefined\") {\n                signatureIdxByName[signatureName] = this.signatures.length;\n                this.signatures.push(signature);\n            }\n\n            this.functions[i].signatureIdx = signatureIdxByName[signatureName];\n            this.functions[i].signatureName = signatureName;\n        }\n\n    }\n\n    _buildType() {\n        return this.signatures;\n    }\n\n    _buildImport() {\n        const src = [];\n        src.push(`(import \"${this.memory.moduleName}\" \"${this.memory.fieldName}\" (memory ${this.memory.pagesSize}))`);\n        for (let i=0; i< this.nImportFunctions; i++) {\n            src.push(`(import \"${this.functions[i].moduleName}\" \"${this.functions[i].fieldName}\" (func $${this.functions[i].fnName} (type $${this.functions[i].getSignatureName()})))`);\n        }\n        return src;\n    }\n\n    _buildFunctionsTable() {\n        return `(table ${this.functionsTable.length} anyfunc)`;\n    }\n\n    _buildElements() {\n        let funcs=\"\";\n        for (let i=0; i<this.functionsTable.length; i++) {\n            funcs += \" $\"+this.functions[this.functionsTable[i]].fnName;\n        }\n        return `(elem (i32.const 0) ${funcs})`;\n    }\n\n    _buildExports() {\n        const src = [];\n        for (let i=0; i< this.exports.length; i++) {\n            src.push(`(export \"${this.exports[i].exportName}\" (func $${this.functions[this.exports[i].idx].fnName}))`);\n        }\n        return src;\n    }\n\n    _buildFunctions() {\n        const src = [];\n        for (let i=this.nImportFunctions; i< this.nImportFunctions + this.nInternalFunctions; i++) {\n            src.push(this.functions[i].getBody());\n        }\n        return src;\n    }\n\n    _buildData() {\n        const src = [];\n        const buf = Buffer.alloc(4);\n        buf.writeUInt32LE(this.free, 0);\n        src.push(`(data (i32.const 0) ${bytes2string(buf)})`);\n        for (let i=0; i< this.datas.length; i++) {\n            src.push(`(data (i32.const ${this.datas[i].offset}) ${bytes2string(this.datas[i].bytes)})`);\n        }\n        return src;\n\n        function bytes2string(b) {\n            let S = \"\\\"\";\n            for (let i=0; i<b.length; i++) {\n                if (b[i]<32 || b[i] >126 || b[i] == 34 || b[i]==92) {\n                    let h=b[i].toString(16);\n                    while (h.length<2) h = \"0\"+h;\n                    S += \"\\\\\" + h;\n                } else {\n                    S += String.fromCharCode(b[i]);\n                }\n            }\n            S +=  \"\\\"\";\n            return S;\n        }\n    }\n\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { CodeBuilderWat } from \"./codebuilder_wat.js\";\nimport * as utils from \"./utils.js\";\n\nexport class FunctionBuilderWat {\n\n    constructor (module, fnName, fnType, moduleName, fieldName) {\n        if (fnType == \"import\") {\n            this.fnType = \"import\";\n            this.moduleName = moduleName;\n            this.fieldName = fieldName;\n        } else if (fnType == \"internal\") {\n            this.fnType = \"internal\";\n            this.comment = moduleName;\n        } else {\n            throw new Error(\"Invalid function fnType: \" + fnType);\n        }\n        this.module = module;\n        this.fnName = fnName;\n        this.params = [];\n        this.locals = [];\n        this.localIdxByName = {};\n        this.code = [];\n        this.returnType = null;\n        this.nextLocal =0;\n    }\n\n    addParam(paramName, paramType) {\n        if (this.localIdxByName[paramName])\n            throw new Error(`param already exists. Function: ${this.fnName}, Param: ${paramName} `);\n        const idx = this.nextLocal++;\n        this.localIdxByName[paramName] = idx;\n        this.params.push({\n            type: paramType,\n            name: paramName\n        });\n    }\n\n    addLocal(localName, localType, _length) {\n        if ((typeof _length != \"undefined\") && (_length != 1)) {\n            throw new Error(\"Locals greater than 1 not implemented\");\n        }\n        if (this.localIdxByName[localName])\n            throw new Error(`local already exists. Function: ${this.fnName}, Param: ${localName} `);\n        const idx = this.nextLocal++;\n        this.localIdxByName[localName] = idx;\n        this.locals.push({\n            type: localType,\n            name: localName,\n        });\n    }\n\n    setReturnType(returnType) {\n        if (this.returnType)\n            throw new Error(`returnType already defined. Function: ${this.fnName}`);\n        this.returnType = returnType;\n    }\n\n    getSignature() {\n        let p = \"\";\n        for (let i=0; i<this.params.length; i++) {\n            if (i==0) p += \" (param\";\n            p += \" \" + this.params[i].type;\n        }\n        if (p!=\"\") p+= \")\";\n        let r = \"\";\n        if (this.returnType) {\n            r += ` (result ${this.returnType})`;\n        }\n        return `(type $${this.getSignatureName()} (func ${p}${r}))`;\n    }\n\n    getSignatureName() {\n        let s = \"_sig_\";\n        for (let i=0; i<this.params.length; i++) {\n            s += this.params[i].type;\n        }\n        if (this.returnType) {\n            s+=\"r\"+this.returnType;\n        }\n        return s;\n    }\n\n    getBody() {\n        const src = [];\n\n        for (let i=0; i<this.params.length; i++) {\n            src.push(` (param $${this.params[i].name} ${this.params[i].type})`);\n        }\n        if (this.returnType) {\n            src.push(`(result ${this.returnType})`);\n        }\n        for (let i=0; i<this.locals.length; i++) {\n            src.push(` (local $${this.locals[i].name} ${this.locals[i].type})`);\n        }\n        src.push(this.code);\n\n        let Ss;\n        if (this.comment) {\n            Ss = this.comment.split(\"\\n\");\n            for (let i=0; i<Ss.length; i++) {\n                Ss[i] = \";; \" + Ss[i];\n            }\n        } else {\n            Ss = [];\n        }\n\n        return [\n            ...Ss,\n            `(func $${this.fnName} (type $${this.getSignatureName()})`,\n            utils.ident(src),\n            \")\"\n        ];\n\n    }\n\n    addCode(...code) {\n        this.code.push(code);\n    }\n\n    getCodeBuilder() {\n        return new CodeBuilderWat(this);\n    }\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of wasmbuilder\n\n    wasmbuilder is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    wasmbuilder is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with wasmbuilder. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport * as utils from \"./utils.js\";\n\nexport class CodeBuilderWat {\n    constructor(func) {\n        this.func = func;\n        this.functionName = func.functionName;\n        this.module = func.module;\n    }\n\n    setLocal(localName, valCode) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return [valCode, `set_local $${localName}`];\n    }\n\n    teeLocal(localName, valCode) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return [valCode, `tee_local $${localName}`];\n    }\n\n    getLocal(localName) {\n        const idx = this.func.localIdxByName[localName];\n        if (idx === undefined)\n            throw new Error(`Local Variable not defined: Function: ${this.functionName} local: ${localName} `);\n        return `get_local $${localName}`;\n    }\n\n    genLoad(inst, def_align, idxCode, _offset, _align) {\n        let S = inst;\n        const offset = _offset || 0;\n        if (offset>0) S += ` offset=${offset}`;\n        const align = (_align === undefined) ? def_align : _align;  // 8 bits alignment by default\n        if (align!=def_align) S += ` align=${1 << align}`;\n        return [idxCode, S];\n    }\n\n\n    genStore(inst, def_align, idxCode, _offset, _align, _codeVal) {\n        let offset, align, codeVal;\n        if (typeof _align === \"undefined\") {\n            offset = 0;\n            align = def_align;\n            codeVal = _offset;\n        } else if (typeof _codeVal === \"undefined\") {\n            offset = _offset;\n            align = def_align;\n            codeVal = _align;\n        } else {\n            offset = _offset;\n            align = _align;\n            codeVal = _codeVal;\n        }\n        let S = inst;\n        if (offset>0) S += ` offset=${offset}`;\n        if (align!=def_align) S += ` align=${1 << align}`;\n        return [idxCode, codeVal, S];\n    }\n\n    i64_load8_s(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load8_s\", 0, idxCode, _offset, _align);\n    }\n\n    i64_load8_u(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load8_u\", 0, idxCode, _offset, _align);\n    }\n\n    i64_load16_s(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load16_s\", 1,idxCode, _offset, _align);\n    }\n\n    i64_load16_u(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load16_u\", 1, idxCode, _offset, _align);\n    }\n\n    i64_load32_s(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load32_s\", 2, idxCode, _offset, _align);\n    }\n\n    i64_load32_u(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load32_u\", 2, idxCode, _offset, _align);\n    }\n\n    i64_load(idxCode, _offset, _align) {\n        return this.genLoad(\"i64.load\", 3, idxCode, _offset, _align);\n    }\n\n\n    i64_store(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i64.store\", 3, idxCode, _offset, _align, _codeVal);\n    }\n\n    i64_store32(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i64.store32\", 2, idxCode, _offset, _align, _codeVal);\n    }\n\n    i64_store16(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i64.store16\", 1, idxCode, _offset, _align, _codeVal);\n    }\n\n    i64_store8(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i64.store8\", 0, idxCode, _offset, _align, _codeVal);\n    }\n\n    i32_load8_s(idxCode, _offset, _align) {\n        return this.genLoad(\"i32.load8_s\", 0, idxCode, _offset, _align);\n    }\n\n    i32_load8_u(idxCode, _offset, _align) {\n        return this.genLoad(\"i32.load8_u\", 0, idxCode, _offset, _align);\n    }\n\n    i32_load16_s(idxCode, _offset, _align) {\n        return this.genLoad(\"i32.load16_s\", 1, idxCode, _offset, _align);\n    }\n\n    i32_load16_u(idxCode, _offset, _align) {\n        return this.genLoad(\"i32.load16_u\", 1, idxCode, _offset, _align);\n    }\n\n    i32_load(idxCode, _offset, _align) {\n        return this.genLoad(\"i32.load\", 2, idxCode, _offset, _align);\n    }\n\n    i32_store(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i32.store\", 2, idxCode, _offset, _align, _codeVal);\n    }\n\n    i32_store16(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i32.store16\", 1, idxCode, _offset, _align, _codeVal);\n    }\n\n    i32_store8(idxCode, _offset, _align, _codeVal) {\n        return this.genStore(\"i32.store8\", 0, idxCode, _offset, _align, _codeVal);\n    }\n\n    call(fnName, ...args) {\n        const idx = this.module.functionIdxByName[fnName];\n        if (idx === undefined)\n            throw new Error(`Function not defined: Function: ${fnName}`);\n        return [args, `call $${fnName}`];\n    }\n\n    call_indirect(fnIdx, ...args) {\n        return [args, fnIdx, \"call_indirect (type 0)\"];\n    }\n\n    if(condCode, thenCode, elseCode) {\n        if (elseCode) {\n            return [condCode, \"if\", utils.ident(thenCode), \"else\", utils.ident(elseCode), \"end\"];\n        } else {\n            return [condCode, \"if\", utils.ident(thenCode), \"end\"];\n        }\n    }\n\n    block(bCode) { return [\"block\", utils.ident(bCode), \"end\"]; }\n    loop(...args) { return [\"loop\", utils.ident(args), \"end\"]; }\n    br_if(relPath, condCode) { return [condCode, `br_if ${relPath}`]; }\n    br(relPath) { return `br ${relPath}`; }\n    ret(rCode) { return [rCode, \"return\"]; }\n    drop(dCode) { return [dCode,  \"drop\"]; }\n\n    i64_const(num) { return `i64.const ${num}`; }\n    i32_const(num) { return `i32.const ${num}`; }\n\n    i64_eqz(opcode) { return [opcode, \"i64.eqz\"]; }\n    i64_eq(op1code, op2code) { return [op1code, op2code, \"i64.eq\"]; }\n    i64_ne(op1code, op2code) { return [op1code, op2code, \"i64.ne\"]; }\n    i64_lt_s(op1code, op2code) { return [op1code, op2code, \"i64.lt_s\"]; }\n    i64_lt_u(op1code, op2code) { return [op1code, op2code, \"i64.lt_u\"]; }\n    i64_gt_s(op1code, op2code) { return [op1code, op2code, \"i64.gt_s\"]; }\n    i64_gt_u(op1code, op2code) { return [op1code, op2code, \"i64.gt_u\"]; }\n    i64_le_s(op1code, op2code) { return [op1code, op2code, \"i64.le_s\"]; }\n    i64_le_u(op1code, op2code) { return [op1code, op2code, \"i64.le_u\"]; }\n    i64_ge_s(op1code, op2code) { return [op1code, op2code, \"i64.ge_s\"]; }\n    i64_ge_u(op1code, op2code) { return [op1code, op2code, \"i64.ge_u\"]; }\n    i64_add(op1code, op2code) { return [op1code, op2code, \"i64.add\"]; }\n    i64_sub(op1code, op2code) { return [op1code, op2code, \"i64.sub\"]; }\n    i64_mul(op1code, op2code) { return [op1code, op2code, \"i64.mul\"]; }\n    i64_div_s(op1code, op2code) { return [op1code, op2code, \"i64.div_s\"]; }\n    i64_div_u(op1code, op2code) { return [op1code, op2code, \"i64.div_u\"]; }\n    i64_rem_s(op1code, op2code) { return [op1code, op2code, \"i64.rem_s\"]; }\n    i64_rem_u(op1code, op2code) { return [op1code, op2code, \"i64.rem_u\"]; }\n    i64_and(op1code, op2code) { return [op1code, op2code, \"i64.and\"]; }\n    i64_or(op1code, op2code) { return [op1code, op2code, \"i64.or\"]; }\n    i64_xor(op1code, op2code) { return [op1code, op2code, \"i64.xor\"]; }\n    i64_shl(op1code, op2code) { return [op1code, op2code, \"i64.shl\"]; }\n    i64_shr_s(op1code, op2code) { return [op1code, op2code, \"i64.shr_s\"]; }\n    i64_shr_u(op1code, op2code) { return [op1code, op2code, \"i64.shr_u\"]; }\n    i64_extend_i32_s(op1code) { return [op1code, \"i64.extend_s/i32\"]; }\n    i64_extend_i32_u(op1code) { return [op1code, \"i64.extend_u/i32\"]; }\n\n\n    i32_eqz(op1code) { return [op1code, \"i32.eqz\"]; }\n    i32_eq(op1code, op2code) { return [op1code, op2code, \"i32.eq\"]; }\n    i32_ne(op1code, op2code) { return [op1code, op2code, \"i32.ne\"]; }\n    i32_lt_s(op1code, op2code) { return [op1code, op2code, \"i32.lt_s\"]; }\n    i32_lt_u(op1code, op2code) { return [op1code, op2code, \"i32.lt_u\"]; }\n    i32_gt_s(op1code, op2code) { return [op1code, op2code, \"i32.gt_s\"]; }\n    i32_gt_u(op1code, op2code) { return [op1code, op2code, \"i32.gt_u\"]; }\n    i32_le_s(op1code, op2code) { return [op1code, op2code, \"i32.le_s\"]; }\n    i32_le_u(op1code, op2code) { return [op1code, op2code, \"i32.le_u\"]; }\n    i32_ge_s(op1code, op2code) { return [op1code, op2code, \"i32.ge_s\"]; }\n    i32_ge_u(op1code, op2code) { return [op1code, op2code, \"i32.ge_u\"]; }\n    i32_add(op1code, op2code) { return [op1code, op2code, \"i32.add\"]; }\n    i32_sub(op1code, op2code) { return [op1code, op2code, \"i32.sub\"]; }\n    i32_mul(op1code, op2code) { return [op1code, op2code, \"i32.mul\"]; }\n    i32_div_s(op1code, op2code) { return [op1code, op2code, \"i32.div_s\"]; }\n    i32_div_u(op1code, op2code) { return [op1code, op2code, \"i32.div_u\"]; }\n    i32_rem_s(op1code, op2code) { return [op1code, op2code, \"i32.rem_s\"]; }\n    i32_rem_u(op1code, op2code) { return [op1code, op2code, \"i32.rem_u\"]; }\n    i32_and(op1code, op2code) { return [op1code, op2code, \"i32.and\"]; }\n    i32_or(op1code, op2code) { return [op1code, op2code, \"i32.or\"]; }\n    i32_xor(op1code, op2code) { return [op1code, op2code, \"i32.xor\"]; }\n    i32_shl(op1code, op2code) { return [op1code, op2code, \"i32.shl\"]; }\n    i32_shr_s(op1code, op2code) { return [op1code, op2code, \"i32.shr_s\"]; }\n    i32_shr_u(op1code, op2code) { return [op1code, op2code, \"i32.shr_u\"]; }\n    i32_rotl(op1code, op2code) { return [op1code, op2code, \"i32.rotl\"]; }\n    i32_rotr(op1code, op2code) { return [op1code, op2code, \"i32.rotr\"]; }\n    i32_wrap_i64(op1code) { return [op1code, \"i32.wrap/i64\"]; }\n\n    ureachable() { return \"unreachable\"; }\n\n    current_memory() { return \"current_memory\"; }\n\n    comment(c) { return \";; \" + c; }\n\n}\n", "/*\n    Copyright 2019 0KIMS association.\n\n    This file is part of websnark (Web Assembly zkSnark Prover).\n\n    websnark is a free software: you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    websnark is distributed in the hope that it will be useful, but WITHOUT\n    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n    or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public\n    License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with websnark. If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { ModuleBuilder } from \"./modulebuilder.js\";\n\nexport async function buildProtoboard(builder, defBytes, bitsPerBytes) {\n    const protoboard = new Protoboard();\n\n    protoboard.defBytes = defBytes;\n    protoboard.bitsPerBytes = bitsPerBytes || 32;\n\n    protoboard.memory = new WebAssembly.Memory({initial:20000});\n    protoboard.i32 = new Uint32Array(protoboard.memory.buffer);\n    protoboard.i8 = new Uint8Array(protoboard.memory.buffer);\n\n    const moduleBuilder = new ModuleBuilder();\n\n    const fLog32 = moduleBuilder.addIimportFunction(\"debug_log32\", \"debug\", \"log32\");\n    fLog32.addParam(\"x\", \"i32\");\n    const fLog64 = moduleBuilder.addIimportFunction(\"debug_log64\", \"debug\", \"log64\");\n    fLog64.addParam(\"x\", \"i32\");\n    fLog64.addParam(\"y\", \"i32\");\n\n    buildLog32(moduleBuilder);\n    buildLog64(moduleBuilder);\n\n    builder(moduleBuilder, protoboard);\n\n\n    const code = moduleBuilder.build();\n\n    const wasmModule = await WebAssembly.compile(code);\n\n    protoboard.log = console.log;\n\n    protoboard.instance = await WebAssembly.instantiate(wasmModule, {\n        env: {\n            \"memory\": protoboard.memory\n        },\n        debug: {\n            log32: function (c1) {\n                if (c1<0) c1 = 0x100000000+c1;\n                let s=c1.toString(16);\n                while (s.length<8) s = \"0\"+s;\n                protoboard.log(s + \": \" + c1.toString());\n            },\n            log64: function (c1, c2) {\n                if (c1<0) c1 = 0x100000000+c1;\n                if (c2<0) c2 = 0x100000000+c2;\n                const n = BigInt(c1) + (BigInt(c2) << 32n);\n                let s=n.toString(16);\n                while (s.length<16) s = \"0\"+s;\n                protoboard.log(s + \": \" + n.toString());\n            }\n        }\n    });\n\n    Object.assign(protoboard, protoboard.instance.exports);\n    Object.assign(protoboard, moduleBuilder.modules);\n\n    return protoboard;\n\n    function buildLog32(module) {\n\n        const f = module.addFunction(\"log32\");\n        f.addParam(\"x\", \"i32\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(\"debug_log32\", c.getLocal(\"x\")));\n    }\n\n    function buildLog64(module) {\n\n        const f = module.addFunction(\"log64\");\n        f.addParam(\"x\", \"i64\");\n\n        const c = f.getCodeBuilder();\n        f.addCode(c.call(\n            \"debug_log64\",\n            c.i32_wrap_i64(c.getLocal(\"x\")),\n            c.i32_wrap_i64(\n                c.i64_shr_u(\n                    c.getLocal(\"x\"),\n                    c.i64_const(32)\n                )\n            )\n        ));\n    }\n\n}\n\nclass Protoboard {\n\n    constructor() {\n\n    }\n\n    alloc(length) {\n        if (typeof length === \"undefined\") {\n            length = this.defBytes;\n        }\n        length = (((length-1)>>3) +1)<<3;       // Align to 64 bits.\n\n        const res = this.i32[0];\n        this.i32[0] += length;\n        return res;\n    }\n\n    set(pos, nums, nBytes) {\n        if (!Array.isArray(nums)) {\n            nums = [nums];\n        }\n        if (typeof nBytes === \"undefined\") {\n            nBytes = this.defBytes;\n        }\n\n        const words = Math.floor((nBytes -1)/4)+1;\n        let p = pos;\n\n        const CHUNK = 1n << BigInt(this.bitsPerBytes);\n\n        for (let i=0; i<nums.length; i++) {\n            let v = BigInt(nums[i]);\n            for (let j=0; j<words; j++) {\n                const quotient = v / CHUNK;\n                const remainder = v % CHUNK;\n                this.i32[p>>2] = Number(remainder);\n                v = quotient;\n                p += 4;\n            }\n            if (v !== 0n) {\n                throw new Error(\"Expected v to be 0\");\n            }\n        }\n\n        return pos;\n    }\n\n    get(pos, nElements, nBytes) {\n        if (typeof nBytes == \"undefined\") {\n            if (typeof nElements == \"undefined\") {\n                nElements = 1;\n                nBytes = this.defBytes;\n            } else {\n                nElements = nBytes;\n                nBytes = this.defBytes;\n            }\n        }\n\n        const words = Math.floor((nBytes -1)/4)+1;\n\n        const CHUNK = 1n << BigInt(this.bitsPerBytes);\n\n\n        const nums = [];\n        for (let i=0; i<nElements; i++) {\n            let acc = 0n;\n            for (let j=words-1; j>=0; j--) {\n                acc = acc * CHUNK;\n                let v = this.i32[(pos>>2)+j];\n                if (this.bitsPerBytes <32) {\n                    if (v&0x80000000) v = v-0x100000000;\n                }\n                acc = acc + BigInt(v);\n            }\n            nums.push(acc);\n            pos += words*4;\n        }\n\n        if (nums.length == 1) return nums[0];\n        return nums;\n    }\n}\n", "import { buildBls12381 as buildBls12381wasm } from \"wasmcurves\";\nimport buildEngine from \"./engine.js\";\nimport * as Scalar from \"./scalar.js\";\nimport { ModuleBuilder } from \"wasmbuilder\";\n\nglobalThis.curve_bls12381 = null;\n\nexport default async function buildBls12381(singleThread, plugins) {\n\n    const moduleBuilder = new ModuleBuilder();\n    moduleBuilder.setMemory(25);\n    buildBls12381wasm(moduleBuilder);\n\n    if (plugins) plugins(moduleBuilder);\n\n    const bls12381wasm = {};\n\n    bls12381wasm.code = moduleBuilder.build();\n    bls12381wasm.pq = moduleBuilder.modules.f1m.pq;\n    bls12381wasm.pr = moduleBuilder.modules.frm.pq;\n    bls12381wasm.pG1gen = moduleBuilder.modules.bls12381.pG1gen;\n    bls12381wasm.pG1zero = moduleBuilder.modules.bls12381.pG1zero;\n    bls12381wasm.pG1b = moduleBuilder.modules.bls12381.pG1b;\n    bls12381wasm.pG2gen = moduleBuilder.modules.bls12381.pG2gen;\n    bls12381wasm.pG2zero = moduleBuilder.modules.bls12381.pG2zero;\n    bls12381wasm.pG2b = moduleBuilder.modules.bls12381.pG2b;\n    bls12381wasm.pOneT = moduleBuilder.modules.bls12381.pOneT;\n    bls12381wasm.prePSize = moduleBuilder.modules.bls12381.prePSize;\n    bls12381wasm.preQSize = moduleBuilder.modules.bls12381.preQSize;\n    bls12381wasm.n8q = 48;\n    bls12381wasm.n8r = 32;\n    bls12381wasm.q = moduleBuilder.modules.bls12381.q;\n    bls12381wasm.r = moduleBuilder.modules.bls12381.r;\n\n\n    if ((!singleThread) && (globalThis.curve_bls12381)) return globalThis.curve_bls12381;\n    const params = {\n        name: \"bls12381\",\n        wasm: bls12381wasm,\n        q: Scalar.e(\"1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab\", 16),\n        r: Scalar.e(\"73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001\", 16),\n        n8q: 48,\n        n8r: 32,\n        cofactorG1: Scalar.e(\"0x396c8c005555e1568c00aaab0000aaab\", 16),\n        cofactorG2: Scalar.e(\"0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5\", 16),\n        singleThread: singleThread ? true : false\n    };\n\n    const curve = await buildEngine(params);\n    curve.terminate = async function () {\n        if (!params.singleThread) {\n            globalThis.curve_bls12381 = null;\n            await this.tm.terminate();\n        }\n    };\n\n    if (!singleThread) {\n        globalThis.curve_bls12381 = curve;\n    }\n\n    return curve;\n}\n\n", "import * as Scalar from \"./scalar.js\";\nimport {default as buildBn128} from \"./bn128.js\";\nimport {default as buildBls12381} from \"./bls12381.js\";\n\nconst bls12381r = Scalar.e(\"73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001\", 16);\nconst bn128r = Scalar.e(\"21888242871839275222246405745257275088548364400416034343698204186575808495617\");\n\nconst bls12381q = Scalar.e(\"1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab\", 16);\nconst bn128q = Scalar.e(\"21888242871839275222246405745257275088696311157297823662689037894645226208583\");\n\nexport async function getCurveFromR(r, singleThread, plugins) {\n    let curve;\n    if (Scalar.eq(r, bn128r)) {\n        curve = await buildBn128(singleThread, plugins);\n    } else if (Scalar.eq(r, bls12381r)) {\n        curve = await buildBls12381(singleThread, plugins);\n    } else {\n        throw new Error(`Curve not supported: ${Scalar.toString(r)}`);\n    }\n    return curve;\n}\n\nexport async function getCurveFromQ(q, singleThread, plugins) {\n    let curve;\n    if (Scalar.eq(q, bn128q)) {\n        curve = await buildBn128(singleThread, plugins);\n    } else if (Scalar.eq(q, bls12381q)) {\n        curve = await buildBls12381(singleThread, plugins);\n    } else {\n        throw new Error(`Curve not supported: ${Scalar.toString(q, 16)}`);\n    }\n    return curve;\n}\n\nexport async function getCurveFromName(name, singleThread, plugins) {\n    let curve;\n    const normName = normalizeName(name);\n    if ([\"BN128\", \"BN254\", \"ALTBN128\"].indexOf(normName) >= 0) {\n        curve = await buildBn128(singleThread, plugins);\n    } else if ([\"BLS12381\"].indexOf(normName) >= 0) {\n        curve = await buildBls12381(singleThread, plugins);\n    } else {\n        throw new Error(`Curve not supported: ${name}`);\n    }\n    return curve;\n\n    function normalizeName(n) {\n        return n.toUpperCase().match(/[A-Za-z0-9]+/g).join(\"\");\n    }\n\n}\n", null, null, null, "import type JSBI from 'jsbi';\nimport type { Temporal } from '..';\n\nimport { DEBUG } from './debug';\n\ntype OmitConstructor<T> = { [P in keyof T as T[P] extends new (...args: any[]) => any ? P : never]: T[P] };\n\ntype TemporalIntrinsics = Omit<typeof Temporal, 'Now' | 'Instant' | 'ZonedDateTime'> & {\n  Instant: OmitConstructor<Temporal.Instant> &\n    (new (epochNanoseconds: JSBI) => Temporal.Instant) & { prototype: typeof Temporal.Instant.prototype };\n  ZonedDateTime: OmitConstructor<Temporal.ZonedDateTime> &\n    (new (\n      epochNanoseconds: JSBI,\n      timeZone: string | Temporal.TimeZoneProtocol,\n      calendar?: string | Temporal.CalendarProtocol\n    ) => Temporal.ZonedDateTime) & {\n      prototype: typeof Temporal.ZonedDateTime.prototype;\n      from: typeof Temporal.ZonedDateTime.from;\n      compare: typeof Temporal.ZonedDateTime.compare;\n    };\n};\ntype TemporalIntrinsicRegistrations = {\n  [key in keyof TemporalIntrinsics as `Temporal.${key}`]: TemporalIntrinsics[key];\n};\ntype TemporalIntrinsicPrototypeRegistrations = {\n  [key in keyof TemporalIntrinsics as `Temporal.${key}.prototype`]: TemporalIntrinsics[key]['prototype'];\n};\ntype TemporalIntrinsicRegisteredKeys = {\n  [key in keyof TemporalIntrinsicRegistrations as `%${key}%`]: TemporalIntrinsicRegistrations[key];\n};\ntype TemporalIntrinsicPrototypeRegisteredKeys = {\n  [key in keyof TemporalIntrinsicPrototypeRegistrations as `%${key}%`]: TemporalIntrinsicPrototypeRegistrations[key];\n};\n\ntype CalendarPrototypeKeys = keyof Omit<Temporal.Calendar, typeof Symbol.toStringTag>;\ntype TemporalCalendarIntrinsicRegistrations = {\n  [key in CalendarPrototypeKeys as `Temporal.Calendar.prototype.${key}`]: Temporal.Calendar[key];\n} & {\n  'Temporal.Calendar.from': typeof Temporal.Calendar.from;\n};\ntype TemporalCalendarIntrinsicRegisteredKeys = {\n  [key in keyof TemporalCalendarIntrinsicRegistrations as `%${key}%`]: TemporalCalendarIntrinsicRegistrations[key];\n};\n\ntype TimeZonePrototypeKeys = 'getOffsetNanosecondsFor' | 'getPossibleInstantsFor';\ntype TemporalTimeZoneIntrinsicRegistrations = {\n  [key in TimeZonePrototypeKeys as `Temporal.TimeZone.prototype.${key}`]: Temporal.TimeZone[key];\n} & {\n  'Temporal.TimeZone.from': typeof Temporal.TimeZone.from;\n};\ntype TemporalTimeZoneIntrinsicRegisteredKeys = {\n  [key in keyof TemporalTimeZoneIntrinsicRegistrations as `%${key}%`]: TemporalTimeZoneIntrinsicRegistrations[key];\n};\n\nconst INTRINSICS = {} as TemporalIntrinsicRegisteredKeys &\n  TemporalIntrinsicPrototypeRegisteredKeys &\n  TemporalTimeZoneIntrinsicRegisteredKeys &\n  TemporalCalendarIntrinsicRegisteredKeys;\n\ntype customFormatFunction<T> = (\n  this: T,\n  depth: number,\n  options: { stylize: (value: unknown, type: 'number' | 'special') => string }\n) => string;\nconst customUtilInspectFormatters: Partial<{\n  [key in keyof TemporalIntrinsicRegistrations]: customFormatFunction<\n    InstanceType<TemporalIntrinsicRegistrations[key]>\n  >;\n}> = {\n  ['Temporal.Duration'](depth, options) {\n    const descr = options.stylize(`${this[Symbol.toStringTag]} <${this}>`, 'special');\n    if (depth < 1) return descr;\n    const entries = [];\n    for (const prop of [\n      'years',\n      'months',\n      'weeks',\n      'days',\n      'hours',\n      'minutes',\n      'seconds',\n      'milliseconds',\n      'microseconds',\n      'nanoseconds'\n    ] as const) {\n      if (this[prop] !== 0) entries.push(`  ${prop}: ${options.stylize(this[prop], 'number')}`);\n    }\n    return descr + ' {\\n' + entries.join(',\\n') + '\\n}';\n  }\n};\n\ntype InspectFormatterOptions = { stylize: (str: string, styleType: string) => string };\nfunction defaultUtilInspectFormatter(this: any, depth: number, options: InspectFormatterOptions) {\n  return options.stylize(`${this[Symbol.toStringTag]} <${this}>`, 'special');\n}\n\nexport function MakeIntrinsicClass(\n  Class: TemporalIntrinsicRegistrations[typeof name],\n  name: keyof TemporalIntrinsicRegistrations\n) {\n  Object.defineProperty(Class.prototype, Symbol.toStringTag, {\n    value: name,\n    writable: false,\n    enumerable: false,\n    configurable: true\n  });\n  if (DEBUG) {\n    Object.defineProperty(Class.prototype, Symbol.for('nodejs.util.inspect.custom'), {\n      value: customUtilInspectFormatters[name] || defaultUtilInspectFormatter,\n      writable: false,\n      enumerable: false,\n      configurable: true\n    });\n  }\n  for (const prop of Object.getOwnPropertyNames(Class)) {\n    // we know that `prop` is present, so the descriptor is never undefined\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const desc = Object.getOwnPropertyDescriptor(Class, prop)!;\n    if (!desc.configurable || !desc.enumerable) continue;\n    desc.enumerable = false;\n    Object.defineProperty(Class, prop, desc);\n  }\n  for (const prop of Object.getOwnPropertyNames(Class.prototype)) {\n    // we know that `prop` is present, so the descriptor is never undefined\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const desc = Object.getOwnPropertyDescriptor(Class.prototype, prop)!;\n    if (!desc.configurable || !desc.enumerable) continue;\n    desc.enumerable = false;\n    Object.defineProperty(Class.prototype, prop, desc);\n  }\n\n  DefineIntrinsic(name, Class);\n  DefineIntrinsic(`${name}.prototype`, Class.prototype);\n}\n\ntype IntrinsicDefinitionKeys =\n  | keyof TemporalIntrinsicRegistrations\n  | keyof TemporalIntrinsicPrototypeRegistrations\n  | keyof TemporalCalendarIntrinsicRegistrations\n  | keyof TemporalTimeZoneIntrinsicRegistrations;\nexport function DefineIntrinsic<KeyT extends keyof TemporalIntrinsicRegistrations>(\n  name: KeyT,\n  value: TemporalIntrinsicRegistrations[KeyT]\n): void;\nexport function DefineIntrinsic<KeyT extends keyof TemporalIntrinsicPrototypeRegistrations>(\n  name: KeyT,\n  value: TemporalIntrinsicPrototypeRegistrations[KeyT]\n): void;\nexport function DefineIntrinsic<KeyT extends keyof TemporalCalendarIntrinsicRegistrations>(\n  name: KeyT,\n  value: TemporalCalendarIntrinsicRegistrations[KeyT]\n): void;\nexport function DefineIntrinsic<KeyT extends keyof TemporalTimeZoneIntrinsicRegistrations>(\n  name: KeyT,\n  value: TemporalTimeZoneIntrinsicRegistrations[KeyT]\n): void;\nexport function DefineIntrinsic<KeyT>(name: KeyT, value: never): void;\nexport function DefineIntrinsic<KeyT extends IntrinsicDefinitionKeys>(name: KeyT, value: unknown): void {\n  const key: `%${IntrinsicDefinitionKeys}%` = `%${name}%`;\n  if (INTRINSICS[key] !== undefined) throw new Error(`intrinsic ${name} already exists`);\n  INTRINSICS[key] = value;\n}\nexport function GetIntrinsic<KeyT extends keyof typeof INTRINSICS>(intrinsic: KeyT): typeof INTRINSICS[KeyT] {\n  return INTRINSICS[intrinsic];\n}\n", "import type JSBI from 'jsbi';\nimport type { Temporal } from '..';\nimport type { BuiltinCalendarId, AnyTemporalType, CalendarSlot, TimeZoneSlot } from './internaltypes';\n\n// Instant\nexport const EPOCHNANOSECONDS = 'slot-epochNanoSeconds';\n\n// TimeZone\nexport const TIMEZONE_ID = 'slot-timezone-identifier';\n\n// DateTime, Date, Time, YearMonth, MonthDay\nexport const ISO_YEAR = 'slot-year';\nexport const ISO_MONTH = 'slot-month';\nexport const ISO_DAY = 'slot-day';\nexport const ISO_HOUR = 'slot-hour';\nexport const ISO_MINUTE = 'slot-minute';\nexport const ISO_SECOND = 'slot-second';\nexport const ISO_MILLISECOND = 'slot-millisecond';\nexport const ISO_MICROSECOND = 'slot-microsecond';\nexport const ISO_NANOSECOND = 'slot-nanosecond';\nexport const CALENDAR = 'slot-calendar';\n// Date, YearMonth, and MonthDay all have the same slots, disambiguation needed:\nexport const DATE_BRAND = 'slot-date-brand';\nexport const YEAR_MONTH_BRAND = 'slot-year-month-brand';\nexport const MONTH_DAY_BRAND = 'slot-month-day-brand';\n\n// ZonedDateTime\nexport const INSTANT = 'slot-cached-instant';\nexport const TIME_ZONE = 'slot-time-zone';\n\n// Duration\nexport const YEARS = 'slot-years';\nexport const MONTHS = 'slot-months';\nexport const WEEKS = 'slot-weeks';\nexport const DAYS = 'slot-days';\nexport const HOURS = 'slot-hours';\nexport const MINUTES = 'slot-minutes';\nexport const SECONDS = 'slot-seconds';\nexport const MILLISECONDS = 'slot-milliseconds';\nexport const MICROSECONDS = 'slot-microseconds';\nexport const NANOSECONDS = 'slot-nanoseconds';\n\n// Calendar\nexport const CALENDAR_ID = 'slot-calendar-identifier';\n\ninterface SlotInfo<ValueType, UsedByType extends AnyTemporalType> {\n  value: ValueType;\n  usedBy: UsedByType;\n}\n\ninterface SlotInfoRecord {\n  [k: string]: SlotInfo<unknown, AnyTemporalType>;\n}\n\ninterface Slots extends SlotInfoRecord {\n  // Instant\n  [EPOCHNANOSECONDS]: SlotInfo<JSBI, Temporal.Instant | Temporal.ZonedDateTime>; // number? JSBI?\n\n  // TimeZone\n  [TIMEZONE_ID]: SlotInfo<string, Temporal.TimeZone>;\n\n  // DateTime, Date, Time, YearMonth, MonthDay\n  [ISO_YEAR]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_MONTH]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_DAY]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_HOUR]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_MINUTE]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_SECOND]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_MILLISECOND]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_MICROSECOND]: SlotInfo<number, TypesWithCalendarUnits>;\n  [ISO_NANOSECOND]: SlotInfo<number, TypesWithCalendarUnits>;\n  [CALENDAR]: SlotInfo<CalendarSlot, TypesWithCalendarUnits>;\n\n  // Date, YearMonth, MonthDay common slots\n  [DATE_BRAND]: SlotInfo<true, Temporal.PlainDate>;\n  [YEAR_MONTH_BRAND]: SlotInfo<true, Temporal.PlainYearMonth>;\n  [MONTH_DAY_BRAND]: SlotInfo<true, Temporal.PlainMonthDay>;\n\n  // ZonedDateTime\n  [INSTANT]: SlotInfo<Temporal.Instant, Temporal.ZonedDateTime>;\n  [TIME_ZONE]: SlotInfo<TimeZoneSlot, Temporal.ZonedDateTime>;\n\n  // Duration\n  [YEARS]: SlotInfo<number, Temporal.Duration>;\n  [MONTHS]: SlotInfo<number, Temporal.Duration>;\n  [WEEKS]: SlotInfo<number, Temporal.Duration>;\n  [DAYS]: SlotInfo<number, Temporal.Duration>;\n  [HOURS]: SlotInfo<number, Temporal.Duration>;\n  [MINUTES]: SlotInfo<number, Temporal.Duration>;\n  [SECONDS]: SlotInfo<number, Temporal.Duration>;\n  [MILLISECONDS]: SlotInfo<number, Temporal.Duration>;\n  [MICROSECONDS]: SlotInfo<number, Temporal.Duration>;\n  [NANOSECONDS]: SlotInfo<number, Temporal.Duration>;\n\n  // Calendar\n  [CALENDAR_ID]: SlotInfo<BuiltinCalendarId, Temporal.Calendar>;\n}\n\ntype TypesWithCalendarUnits =\n  | Temporal.PlainDateTime\n  | Temporal.PlainDate\n  | Temporal.PlainTime\n  | Temporal.PlainYearMonth\n  | Temporal.PlainMonthDay\n  | Temporal.ZonedDateTime;\n\ninterface SlotsToTypes {\n  // Instant\n  [EPOCHNANOSECONDS]: Temporal.Instant;\n\n  // TimeZone\n  [TIMEZONE_ID]: Temporal.TimeZone;\n\n  // DateTime, Date, Time, YearMonth, MonthDay\n  [ISO_YEAR]: TypesWithCalendarUnits;\n  [ISO_MONTH]: TypesWithCalendarUnits;\n  [ISO_DAY]: TypesWithCalendarUnits;\n  [ISO_HOUR]: TypesWithCalendarUnits;\n  [ISO_MINUTE]: TypesWithCalendarUnits;\n  [ISO_SECOND]: TypesWithCalendarUnits;\n  [ISO_MILLISECOND]: TypesWithCalendarUnits;\n  [ISO_MICROSECOND]: TypesWithCalendarUnits;\n  [ISO_NANOSECOND]: TypesWithCalendarUnits;\n  [CALENDAR]: TypesWithCalendarUnits;\n\n  // Date, YearMonth, MonthDay common slots\n  [DATE_BRAND]: Temporal.PlainDate;\n  [YEAR_MONTH_BRAND]: Temporal.PlainYearMonth;\n  [MONTH_DAY_BRAND]: Temporal.PlainMonthDay;\n\n  // ZonedDateTime\n  [INSTANT]: Temporal.ZonedDateTime;\n  [TIME_ZONE]: Temporal.ZonedDateTime;\n\n  // Duration\n  [YEARS]: Temporal.Duration;\n  [MONTHS]: Temporal.Duration;\n  [WEEKS]: Temporal.Duration;\n  [DAYS]: Temporal.Duration;\n  [HOURS]: Temporal.Duration;\n  [MINUTES]: Temporal.Duration;\n  [SECONDS]: Temporal.Duration;\n  [MILLISECONDS]: Temporal.Duration;\n  [MICROSECONDS]: Temporal.Duration;\n  [NANOSECONDS]: Temporal.Duration;\n\n  // Calendar\n  [CALENDAR_ID]: Temporal.Calendar;\n}\n\ntype SlotKey = keyof SlotsToTypes;\n\nconst globalSlots = new WeakMap<Slots[keyof Slots]['usedBy'], Record<keyof Slots, Slots[keyof Slots]['value']>>();\n\nfunction _GetSlots(container: Slots[keyof Slots]['usedBy']) {\n  return globalSlots.get(container);\n}\n\nconst GetSlotsSymbol = Symbol.for('@@Temporal__GetSlots');\n\n// expose GetSlots to avoid dual package hazards\n(globalThis as any)[GetSlotsSymbol] ||= _GetSlots;\n\nconst GetSlots = (globalThis as any)[GetSlotsSymbol] as typeof _GetSlots;\n\nfunction _CreateSlots(container: Slots[keyof Slots]['usedBy']): void {\n  globalSlots.set(container, Object.create(null));\n}\n\nconst CreateSlotsSymbol = Symbol.for('@@Temporal__CreateSlots');\n\n// expose CreateSlots to avoid dual package hazards\n(globalThis as any)[CreateSlotsSymbol] ||= _CreateSlots;\n\nexport const CreateSlots = (globalThis as any)[CreateSlotsSymbol] as typeof _CreateSlots;\n\n// TODO: is there a better way than 9 overloads to make HasSlot into a type\n// guard that takes a variable number of parameters?\nexport function HasSlot<ID1 extends SlotKey>(container: unknown, id1: ID1): container is Slots[ID1]['usedBy'];\nexport function HasSlot<ID1 extends SlotKey, ID2 extends SlotKey>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2\n): container is Slots[ID1]['usedBy'] | Slots[ID2]['usedBy'];\nexport function HasSlot<ID1 extends SlotKey, ID2 extends SlotKey, ID3 extends SlotKey>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3\n): container is Slots[ID1]['usedBy'] | Slots[ID2]['usedBy'] | Slots[ID3]['usedBy'];\nexport function HasSlot<ID1 extends SlotKey, ID2 extends SlotKey, ID3 extends SlotKey, ID4 extends SlotKey>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4\n): container is Slots[ID1 | ID2 | ID3 | ID4]['usedBy'];\nexport function HasSlot<\n  ID1 extends SlotKey,\n  ID2 extends SlotKey,\n  ID3 extends SlotKey,\n  ID4 extends SlotKey,\n  ID5 extends SlotKey\n>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4,\n  id5: ID5\n): container is Slots[ID1 | ID2 | ID3 | ID4 | ID5]['usedBy'];\nexport function HasSlot<\n  ID1 extends SlotKey,\n  ID2 extends SlotKey,\n  ID3 extends SlotKey,\n  ID4 extends SlotKey,\n  ID5 extends SlotKey,\n  ID6 extends SlotKey\n>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4,\n  id5: ID5,\n  id6: ID6\n): container is Slots[ID1 | ID2 | ID3 | ID4 | ID5 | ID6]['usedBy'];\nexport function HasSlot<\n  ID1 extends SlotKey,\n  ID2 extends SlotKey,\n  ID3 extends SlotKey,\n  ID4 extends SlotKey,\n  ID5 extends SlotKey,\n  ID6 extends SlotKey,\n  ID7 extends SlotKey\n>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4,\n  id5: ID5,\n  id6: ID6,\n  id7: ID7\n): container is Slots[ID1 | ID2 | ID3 | ID4 | ID5 | ID6 | ID7]['usedBy'];\nexport function HasSlot<\n  ID1 extends SlotKey,\n  ID2 extends SlotKey,\n  ID3 extends SlotKey,\n  ID4 extends SlotKey,\n  ID5 extends SlotKey,\n  ID6 extends SlotKey,\n  ID7 extends SlotKey,\n  ID8 extends SlotKey\n>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4,\n  id5: ID5,\n  id6: ID6,\n  id7: ID7,\n  id8: ID8\n): container is Slots[ID1 | ID2 | ID3 | ID4 | ID5 | ID6 | ID7 | ID8]['usedBy'];\nexport function HasSlot<\n  ID1 extends SlotKey,\n  ID2 extends SlotKey,\n  ID3 extends SlotKey,\n  ID4 extends SlotKey,\n  ID5 extends SlotKey,\n  ID6 extends SlotKey,\n  ID7 extends SlotKey,\n  ID8 extends SlotKey,\n  ID9 extends SlotKey\n>(\n  container: unknown,\n  id1: ID1,\n  id2: ID2,\n  id3: ID3,\n  id4: ID4,\n  id5: ID5,\n  id6: ID6,\n  id7: ID7,\n  id8: ID8,\n  id9: ID9\n): container is Slots[ID1 | ID2 | ID3 | ID4 | ID5 | ID6 | ID7 | ID8 | ID9]['usedBy'];\nexport function HasSlot(container: unknown, ...ids: (keyof Slots)[]): boolean {\n  if (!container || 'object' !== typeof container) return false;\n  const myslots = GetSlots(container as AnyTemporalType);\n  return !!myslots && ids.every((id) => id in myslots);\n}\nexport function GetSlot<KeyT extends keyof Slots>(\n  container: Slots[typeof id]['usedBy'],\n  id: KeyT\n): Slots[KeyT]['value'] {\n  const value = GetSlots(container)?.[id];\n  if (value === undefined) throw new TypeError(`Missing internal slot ${id}`);\n  return value;\n}\nexport function SetSlot<KeyT extends SlotKey>(\n  container: Slots[KeyT]['usedBy'],\n  id: KeyT,\n  value: Slots[KeyT]['value']\n): void {\n  const slots = GetSlots(container);\n\n  if (slots === undefined) throw new TypeError('Missing slots for the given container');\n\n  const existingSlot = slots[id];\n\n  if (existingSlot) throw new TypeError(`${id} already has set`);\n\n  slots[id] = value;\n}\n", "const tzComponent = /\\.[-A-Za-z_]|\\.\\.[-A-Za-z._]{1,12}|\\.[-A-Za-z_][-A-Za-z._]{0,12}|[A-Za-z_][-A-Za-z._]{0,13}/;\nconst offsetNoCapture = /(?:[+\\u2212-][0-2][0-9](?::?[0-5][0-9](?::?[0-5][0-9](?:[.,]\\d{1,9})?)?)?)/;\nexport const timeZoneID = new RegExp(\n  '(?:' +\n    [\n      `(?:${tzComponent.source})(?:\\\\/(?:${tzComponent.source}))*`,\n      'Etc/GMT(?:0|[-+]\\\\d{1,2})',\n      'GMT[-+]?0',\n      'EST5EDT',\n      'CST6CDT',\n      'MST7MDT',\n      'PST8PDT',\n      offsetNoCapture.source\n    ].join('|') +\n    ')'\n);\n\nconst yearpart = /(?:[+\\u2212-]\\d{6}|\\d{4})/;\nconst monthpart = /(?:0[1-9]|1[0-2])/;\nconst daypart = /(?:0[1-9]|[12]\\d|3[01])/;\nconst datesplit = new RegExp(\n  `(${yearpart.source})(?:-(${monthpart.source})-(${daypart.source})|(${monthpart.source})(${daypart.source}))`\n);\nconst timesplit = /(\\d{2})(?::(\\d{2})(?::(\\d{2})(?:[.,](\\d{1,9}))?)?|(\\d{2})(?:(\\d{2})(?:[.,](\\d{1,9}))?)?)?/;\nexport const offset = /([+\\u2212-])([01][0-9]|2[0-3])(?::?([0-5][0-9])(?::?([0-5][0-9])(?:[.,](\\d{1,9}))?)?)?/;\nconst offsetpart = new RegExp(`([zZ])|${offset.source}?`);\nexport const annotation = /\\[(!)?([a-z_][a-z0-9_-]*)=([A-Za-z0-9]+(?:-[A-Za-z0-9]+)*)\\]/g;\n\nexport const zoneddatetime = new RegExp(\n  [\n    `^${datesplit.source}`,\n    `(?:(?:T|\\\\s+)${timesplit.source}(?:${offsetpart.source})?)?`,\n    `(?:\\\\[!?(${timeZoneID.source})\\\\])?`,\n    `((?:${annotation.source})*)$`\n  ].join(''),\n  'i'\n);\n\nexport const time = new RegExp(\n  [\n    `^T?${timesplit.source}`,\n    `(?:${offsetpart.source})?`,\n    `(?:\\\\[!?${timeZoneID.source}\\\\])?`,\n    `((?:${annotation.source})*)$`\n  ].join(''),\n  'i'\n);\n\n// The short forms of YearMonth and MonthDay are only for the ISO calendar, but\n// annotations are still allowed, and will throw if the calendar annotation is\n// not ISO.\n// Non-ISO calendar YearMonth and MonthDay have to parse as a Temporal.PlainDate,\n// with the reference fields.\n// YYYYMM forbidden by ISO 8601 because ambiguous with YYMMDD, but allowed by\n// RFC 3339 and we don't allow 2-digit years, so we allow it.\n// Not ambiguous with HHMMSS because that requires a 'T' prefix\n// UTC offsets are not allowed, because they are not allowed with any date-only\n// format; also, YYYY-MM-UU is ambiguous with YYYY-MM-DD\nexport const yearmonth = new RegExp(\n  `^(${yearpart.source})-?(${monthpart.source})(?:\\\\[!?${timeZoneID.source}\\\\])?((?:${annotation.source})*)$`\n);\nexport const monthday = new RegExp(\n  `^(?:--)?(${monthpart.source})-?(${daypart.source})(?:\\\\[!?${timeZoneID.source}\\\\])?((?:${annotation.source})*)$`\n);\n\nconst fraction = /(\\d+)(?:[.,](\\d{1,9}))?/;\n\nconst durationDate = /(?:(\\d+)Y)?(?:(\\d+)M)?(?:(\\d+)W)?(?:(\\d+)D)?/;\nconst durationTime = new RegExp(`(?:${fraction.source}H)?(?:${fraction.source}M)?(?:${fraction.source}S)?`);\nexport const duration = new RegExp(`^([+\\u2212-])?P${durationDate.source}(?:T(?!$)${durationTime.source})?$`, 'i');\n", "const ArrayIncludes = Array.prototype.includes;\nconst ArrayPrototypePush = Array.prototype.push;\nconst IntlDateTimeFormat = globalThis.Intl.DateTimeFormat;\nconst MathMin = Math.min;\nconst MathMax = Math.max;\nconst MathAbs = Math.abs;\nconst MathFloor = Math.floor;\nconst MathSign = Math.sign;\nconst MathTrunc = Math.trunc;\nconst NumberIsNaN = Number.isNaN;\nconst NumberIsFinite = Number.isFinite;\nconst NumberCtor = Number;\nconst StringCtor = String;\nconst NumberMaxSafeInteger = Number.MAX_SAFE_INTEGER;\nconst ObjectCreate = Object.create;\nconst ObjectDefineProperty = Object.defineProperty;\nconst ObjectGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nconst ReflectApply = Reflect.apply;\nconst ReflectOwnKeys = Reflect.ownKeys;\n\nimport { DEBUG } from './debug';\nimport JSBI from 'jsbi';\n\nimport type { Temporal } from '..';\nimport type {\n  AnyTemporalLikeType,\n  UnitSmallerThanOrEqualTo,\n  CalendarProtocolParams,\n  TimeZoneProtocolParams,\n  InstantParams,\n  PlainMonthDayParams,\n  ZonedDateTimeParams,\n  CalendarParams,\n  TimeZoneParams,\n  PlainDateParams,\n  PlainTimeParams,\n  DurationParams,\n  PlainDateTimeParams,\n  PlainYearMonthParams,\n  PrimitiveFieldsOf,\n  BuiltinCalendarId,\n  Keys,\n  AnyTemporalKey,\n  CalendarSlot,\n  TimeZoneSlot\n} from './internaltypes';\nimport { GetIntrinsic } from './intrinsicclass';\nimport {\n  CreateSlots,\n  GetSlot,\n  HasSlot,\n  SetSlot,\n  EPOCHNANOSECONDS,\n  TIMEZONE_ID,\n  CALENDAR_ID,\n  INSTANT,\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  DATE_BRAND,\n  YEAR_MONTH_BRAND,\n  MONTH_DAY_BRAND,\n  TIME_ZONE,\n  CALENDAR,\n  YEARS,\n  MONTHS,\n  WEEKS,\n  DAYS,\n  HOURS,\n  MINUTES,\n  SECONDS,\n  MILLISECONDS,\n  MICROSECONDS,\n  NANOSECONDS\n} from './slots';\n\nexport const ZERO = JSBI.BigInt(0);\nconst ONE = JSBI.BigInt(1);\nconst SIXTY = JSBI.BigInt(60);\nconst TWENTY_FOUR = JSBI.BigInt(24);\nexport const THOUSAND = JSBI.BigInt(1e3);\nexport const MILLION = JSBI.BigInt(1e6);\nexport const BILLION = JSBI.BigInt(1e9);\nconst NEGATIVE_ONE = JSBI.BigInt(-1);\nconst HOUR_SECONDS = 3600;\nexport const HOUR_NANOS = JSBI.multiply(JSBI.BigInt(HOUR_SECONDS), BILLION);\nconst MINUTE_NANOS = JSBI.multiply(SIXTY, BILLION);\nconst DAY_NANOS = JSBI.multiply(HOUR_NANOS, TWENTY_FOUR);\nconst NS_MIN = JSBI.multiply(JSBI.BigInt(-86400), JSBI.BigInt(1e17));\nconst NS_MAX = JSBI.multiply(JSBI.BigInt(86400), JSBI.BigInt(1e17));\nconst YEAR_MIN = -271821;\nconst YEAR_MAX = 275760;\nconst BEFORE_FIRST_OFFSET_TRANSITION = JSBI.multiply(JSBI.BigInt(-388152), JSBI.BigInt(1e13)); // 1847-01-01T00:00:00Z\nconst ABOUT_TEN_YEARS_NANOS = JSBI.multiply(DAY_NANOS, JSBI.BigInt(366 * 10));\nconst ABOUT_ONE_YEAR_NANOS = JSBI.multiply(DAY_NANOS, JSBI.BigInt(366 * 1));\nconst TWO_WEEKS_NANOS = JSBI.multiply(DAY_NANOS, JSBI.BigInt(2 * 7));\n\nconst BUILTIN_CALENDAR_IDS = [\n  'iso8601',\n  'hebrew',\n  'islamic',\n  'islamic-umalqura',\n  'islamic-tbla',\n  'islamic-civil',\n  'islamic-rgsa',\n  'islamicc',\n  'persian',\n  'ethiopic',\n  'ethioaa',\n  'coptic',\n  'chinese',\n  'dangi',\n  'roc',\n  'indian',\n  'buddhist',\n  'japanese',\n  'gregory'\n];\n\n/* eslint-disable @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function */\n/**\n * uncheckedAssertNarrowedType forces TypeScript to change the type of the argument to the one given in\n * the type parameter. This should only be used to help TS understand when variables change types,\n * but TS can't or won't infer this automatically. They should be used sparingly, because\n * if used incorrectly can lead to difficult-to-diagnose problems.\n * */\nexport function uncheckedAssertNarrowedType<T = unknown>(\n  arg: unknown,\n  justification: string\n): asserts arg is T extends typeof arg ? T : never {}\n/* eslint-enable */\n\ntype ArrayElement<ArrayType> = ArrayType extends readonly (infer ElementType)[] ? ElementType : never;\ntype ArrayWithNewKeys<T, Keys> = Array<ArrayElement<T> | Keys>;\n\n/**\n * In debug builds, this function verifies that the given argument \"exists\" (is not\n * null or undefined). This function becomes a no-op in the final bundles distributed via NPM.\n * @param arg\n */\nexport function assertExists<A>(arg: A): asserts arg is NonNullable<A> {\n  if (DEBUG) {\n    if (arg != null) {\n      throw new Error('Expected arg to be set.');\n    }\n  }\n}\n\nfunction isZero(value: JSBI): boolean {\n  return JSBI.equal(value, ZERO);\n}\n\ntype Stringless<T> = Exclude<T, string>;\n\nfunction GetMethod<T extends { [s in M]?: (...args: any[]) => unknown }, M extends string & keyof T>(\n  obj: T,\n  methodName: M\n): T[M];\nfunction GetMethod<\n  T extends string | { [s in M]?: (...args: any[]) => unknown },\n  M extends string & keyof Stringless<T>\n>(obj: T, methodName: M): Stringless<T>[M] | undefined;\nfunction GetMethod<\n  T extends string | { [s in M]?: undefined | ((...args: any[]) => unknown) },\n  M extends string & keyof T\n>(obj: T, methodName: M): T[M] | undefined {\n  const result = obj[methodName];\n  if (result === undefined) return undefined;\n  if (DEBUG) {\n    if (typeof result !== 'function') throw new TypeError(`'${methodName}' must be a function`);\n  }\n  return result;\n}\n\nexport function Call<T, A extends readonly any[], R>(\n  target: (this: T, ...args: A) => R,\n  thisArgument: T,\n  argumentsList: Readonly<A>\n): R {\n  const args = arguments.length > 2 ? argumentsList : [];\n  if (DEBUG) {\n    if (!Array.isArray(argumentsList)) {\n      throw new TypeError('Assertion failed: optional `argumentsList`, if provided, must be an array');\n    }\n  }\n  return ReflectApply(target, thisArgument, args);\n}\n\n// For unknown values, this narrows the result to a Record. But for union types\n// like `Temporal.DurationLike | string`, it'll strip the primitive types while\n// leaving the object type(s) unchanged.\nexport function IsObject<T>(\n  value: T\n): value is Exclude<T, string | null | undefined | number | bigint | symbol | boolean>;\nexport function IsObject(value: unknown): value is Record<string | number | symbol, unknown> {\n  return (typeof value === 'object' && value !== null) || typeof value === 'function';\n}\n\nexport function ToNumber(value: unknown): number {\n  // ES 2022's es-abstract made minor changes to ToNumber, but polyfilling these\n  // changes adds zero benefit to Temporal and brings in a lot of extra code. So\n  // we'll leave ToNumber as-is.\n  // See https://github.com/ljharb/es-abstract/blob/main/2022/ToNumber.js\n  if (typeof value === 'bigint') throw new TypeError('Cannot convert BigInt to number');\n  return NumberCtor(value);\n}\n\nfunction ToIntegerOrInfinity(value: unknown) {\n  const number = ToNumber(value);\n  if (NumberIsNaN(number) || number === 0) {\n    return 0;\n  }\n  if (!NumberIsFinite(number)) {\n    return number;\n  }\n  const integer = MathFloor(MathAbs(number));\n  if (integer === 0) {\n    return 0;\n  }\n  return MathSign(number) * integer;\n}\n\nfunction IsIntegralNumber(argument: unknown) {\n  if (typeof argument !== 'number' || NumberIsNaN(argument) || !NumberIsFinite(argument)) {\n    return false;\n  }\n  const absValue = MathAbs(argument);\n  return MathFloor(absValue) === absValue;\n}\n\nexport function ToString(value: unknown): string {\n  if (typeof value === 'symbol') {\n    throw new TypeError('Cannot convert a Symbol value to a String');\n  }\n  return StringCtor(value);\n}\n\nexport function ToIntegerWithTruncation(value: unknown): number {\n  const number = ToNumber(value);\n  if (number === 0) return 0;\n  if (NumberIsNaN(number) || !NumberIsFinite(number)) {\n    throw new RangeError('invalid number value');\n  }\n  const integer = MathTrunc(number);\n  if (integer === 0) return 0; // (value) in spec text; converts -0 to 0\n  return integer;\n}\n\nfunction ToPositiveIntegerWithTruncation(valueParam: unknown, property?: string): number {\n  const integer = ToIntegerWithTruncation(valueParam);\n  if (integer <= 0) {\n    if (property !== undefined) {\n      throw new RangeError(`property '${property}' cannot be a a number less than one`);\n    }\n    throw new RangeError('Cannot convert a number less than one to a positive integer');\n  }\n  return integer;\n}\n\nexport function ToIntegerIfIntegral(valueParam: unknown): number {\n  const number = ToNumber(valueParam);\n  if (!NumberIsFinite(number)) throw new RangeError('infinity is out of range');\n  if (!IsIntegralNumber(number)) throw new RangeError(`unsupported fractional value ${valueParam}`);\n  if (number === 0) return 0; // (value) in spec text; converts -0 to 0\n  return number;\n}\n\nfunction divmod(x: JSBI, y: JSBI): { quotient: JSBI; remainder: JSBI } {\n  const quotient = JSBI.divide(x, y);\n  const remainder = JSBI.remainder(x, y);\n  return { quotient, remainder };\n}\n\nfunction isNegativeJSBI(value: JSBI): boolean {\n  return JSBI.lessThan(value, ZERO);\n}\n\nfunction signJSBI(value: JSBI): 1 | 0 | -1 {\n  if (isZero(value)) return 0;\n  if (isNegativeJSBI(value)) return -1;\n  return 1;\n}\nfunction abs(x: JSBI): JSBI {\n  if (JSBI.lessThan(x, ZERO)) return JSBI.multiply(x, NEGATIVE_ONE);\n  return x;\n}\n\ntype BuiltinCastFunction = (v: unknown) => string | number;\nconst BUILTIN_CASTS = new Map<AnyTemporalKey, BuiltinCastFunction>([\n  ['year', ToIntegerWithTruncation],\n  ['month', ToPositiveIntegerWithTruncation],\n  ['monthCode', ToString],\n  ['day', ToPositiveIntegerWithTruncation],\n  ['hour', ToIntegerWithTruncation],\n  ['minute', ToIntegerWithTruncation],\n  ['second', ToIntegerWithTruncation],\n  ['millisecond', ToIntegerWithTruncation],\n  ['microsecond', ToIntegerWithTruncation],\n  ['nanosecond', ToIntegerWithTruncation],\n  ['years', ToIntegerIfIntegral],\n  ['months', ToIntegerIfIntegral],\n  ['weeks', ToIntegerIfIntegral],\n  ['days', ToIntegerIfIntegral],\n  ['hours', ToIntegerIfIntegral],\n  ['minutes', ToIntegerIfIntegral],\n  ['seconds', ToIntegerIfIntegral],\n  ['milliseconds', ToIntegerIfIntegral],\n  ['microseconds', ToIntegerIfIntegral],\n  ['nanoseconds', ToIntegerIfIntegral],\n  ['era', ToString],\n  ['eraYear', ToIntegerOrInfinity],\n  ['offset', ToString]\n]);\n\nconst BUILTIN_DEFAULTS = new Map([\n  ['hour', 0],\n  ['minute', 0],\n  ['second', 0],\n  ['millisecond', 0],\n  ['microsecond', 0],\n  ['nanosecond', 0]\n]);\n\n// each item is [plural, singular, category]\nconst SINGULAR_PLURAL_UNITS = [\n  ['years', 'year', 'date'],\n  ['months', 'month', 'date'],\n  ['weeks', 'week', 'date'],\n  ['days', 'day', 'date'],\n  ['hours', 'hour', 'time'],\n  ['minutes', 'minute', 'time'],\n  ['seconds', 'second', 'time'],\n  ['milliseconds', 'millisecond', 'time'],\n  ['microseconds', 'microsecond', 'time'],\n  ['nanoseconds', 'nanosecond', 'time']\n] as const;\nconst SINGULAR_FOR = new Map(SINGULAR_PLURAL_UNITS.map((e) => [e[0], e[1]] as const));\nconst PLURAL_FOR = new Map(SINGULAR_PLURAL_UNITS.map(([p, s]) => [s, p]));\nconst UNITS_DESCENDING = SINGULAR_PLURAL_UNITS.map(([, s]) => s);\n\nconst DURATION_FIELDS = Array.from(SINGULAR_FOR.keys()).sort();\n\nimport * as PARSE from './regex';\n\nconst IntlDateTimeFormatEnUsCache = new Map<string, Intl.DateTimeFormat>();\n\nfunction getIntlDateTimeFormatEnUsForTimeZone(timeZoneIdentifier: string) {\n  let instance = IntlDateTimeFormatEnUsCache.get(timeZoneIdentifier);\n  if (instance === undefined) {\n    instance = new IntlDateTimeFormat('en-us', {\n      timeZone: StringCtor(timeZoneIdentifier),\n      hour12: false,\n      era: 'short',\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric',\n      second: 'numeric'\n    });\n    IntlDateTimeFormatEnUsCache.set(timeZoneIdentifier, instance);\n  }\n  return instance;\n}\n\nexport function ToObject<T>(value: T): T extends Record<string, unknown> ? T : object {\n  if (typeof value === 'undefined' || value === null) {\n    throw new TypeError(`Expected object not ${value}`);\n  }\n  return Object(value);\n}\n\n// Adapted from https://github.com/ljharb/es-abstract/blob/main/2022/CopyDataProperties.js\n// but simplified (e.g. removed assertions) for this polyfill to reduce bundle size.\nexport function CopyDataProperties<K extends string | symbol, T extends Record<K, unknown>>(\n  target: T,\n  source: T | undefined,\n  excludedKeys: K[],\n  excludedValues?: unknown[]\n) {\n  if (typeof source === 'undefined' || source === null) return;\n\n  const keys = ReflectOwnKeys(source) as (keyof T)[];\n  for (const nextKey of keys) {\n    if (excludedKeys.some((e) => Object.is(e, nextKey))) continue;\n    if (Object.prototype.propertyIsEnumerable.call(source, nextKey)) {\n      const propValue = source[nextKey];\n      if (excludedValues && excludedValues.some((e) => Object.is(e, propValue))) continue;\n\n      target[nextKey] = propValue;\n    }\n  }\n}\n\nexport function IsTemporalInstant(item: unknown): item is Temporal.Instant {\n  return HasSlot(item, EPOCHNANOSECONDS) && !HasSlot(item, TIME_ZONE, CALENDAR);\n}\n\nexport function IsTemporalTimeZone(item: unknown): item is Temporal.TimeZone {\n  return HasSlot(item, TIMEZONE_ID);\n}\nexport function IsTemporalCalendar(item: unknown): item is Temporal.Calendar {\n  return HasSlot(item, CALENDAR_ID);\n}\nexport function IsTemporalDuration(item: unknown): item is Temporal.Duration {\n  return HasSlot(item, YEARS, MONTHS, DAYS, HOURS, MINUTES, SECONDS, MILLISECONDS, MICROSECONDS, NANOSECONDS);\n}\nexport function IsTemporalDate(item: unknown): item is Temporal.PlainDate {\n  return HasSlot(item, DATE_BRAND);\n}\nexport function IsTemporalTime(item: unknown): item is Temporal.PlainTime {\n  return (\n    HasSlot(item, ISO_HOUR, ISO_MINUTE, ISO_SECOND, ISO_MILLISECOND, ISO_MICROSECOND, ISO_NANOSECOND) &&\n    !HasSlot(item, ISO_YEAR, ISO_MONTH, ISO_DAY)\n  );\n}\nexport function IsTemporalDateTime(item: unknown): item is Temporal.PlainDateTime {\n  return HasSlot(\n    item,\n    ISO_YEAR,\n    ISO_MONTH,\n    ISO_DAY,\n    ISO_HOUR,\n    ISO_MINUTE,\n    ISO_SECOND,\n    ISO_MILLISECOND,\n    ISO_MICROSECOND,\n    ISO_NANOSECOND\n  );\n}\nexport function IsTemporalYearMonth(item: unknown): item is Temporal.PlainYearMonth {\n  return HasSlot(item, YEAR_MONTH_BRAND);\n}\nexport function IsTemporalMonthDay(item: unknown): item is Temporal.PlainMonthDay {\n  return HasSlot(item, MONTH_DAY_BRAND);\n}\nexport function IsTemporalZonedDateTime(item: unknown): item is Temporal.ZonedDateTime {\n  return HasSlot(item, EPOCHNANOSECONDS, TIME_ZONE, CALENDAR);\n}\nexport function RejectTemporalLikeObject(item: AnyTemporalLikeType) {\n  if (HasSlot(item, CALENDAR) || HasSlot(item, TIME_ZONE)) {\n    throw new TypeError('with() does not support a calendar or timeZone property');\n  }\n  if (IsTemporalTime(item)) {\n    throw new TypeError('with() does not accept Temporal.PlainTime, use withPlainTime() instead');\n  }\n  if ((item as { calendar: unknown }).calendar !== undefined) {\n    throw new TypeError('with() does not support a calendar property');\n  }\n  if ((item as { timeZone: unknown }).timeZone !== undefined) {\n    throw new TypeError('with() does not support a timeZone property');\n  }\n}\nfunction ParseTemporalTimeZone(stringIdent: string) {\n  const { ianaName, offset, z } = ParseTemporalTimeZoneString(stringIdent);\n  if (ianaName) return GetCanonicalTimeZoneIdentifier(ianaName);\n  if (z) return 'UTC';\n  // if !ianaName && !z then offset must be present\n  assertExists(offset);\n  const offsetNs = ParseTimeZoneOffsetString(offset);\n  return FormatTimeZoneOffsetString(offsetNs);\n}\n\nfunction MaybeFormatCalendarAnnotation(\n  calendar: CalendarSlot,\n  showCalendar: Temporal.ShowCalendarOption['calendarName']\n): string {\n  if (showCalendar === 'never') return '';\n  return FormatCalendarAnnotation(ToTemporalCalendarIdentifier(calendar), showCalendar);\n}\n\nfunction FormatCalendarAnnotation(id: string, showCalendar: Temporal.ShowCalendarOption['calendarName']) {\n  if (showCalendar === 'never') return '';\n  if (showCalendar === 'auto' && id === 'iso8601') return '';\n  const flag = showCalendar === 'critical' ? '!' : '';\n  return `[${flag}u-ca=${id}]`;\n}\n\nfunction ParseISODateTime(isoString: string) {\n  // ZDT is the superset of fields for every other Temporal type\n  const match = PARSE.zoneddatetime.exec(isoString);\n  if (!match) throw new RangeError(`invalid ISO 8601 string: ${isoString}`);\n  let yearString = match[1];\n  if (yearString[0] === '\\u2212') yearString = `-${yearString.slice(1)}`;\n  if (yearString === '-000000') throw new RangeError(`invalid ISO 8601 string: ${isoString}`);\n  const year = ToIntegerOrInfinity(yearString);\n  const month = ToIntegerOrInfinity(match[2] || match[4]);\n  const day = ToIntegerOrInfinity(match[3] || match[5]);\n  const hour = ToIntegerOrInfinity(match[6]);\n  const hasTime = match[6] !== undefined;\n  const minute = ToIntegerOrInfinity(match[7] || match[10]);\n  let second = ToIntegerOrInfinity(match[8] || match[11]);\n  if (second === 60) second = 59;\n  const fraction = (match[9] || match[12]) + '000000000';\n  const millisecond = ToIntegerOrInfinity(fraction.slice(0, 3));\n  const microsecond = ToIntegerOrInfinity(fraction.slice(3, 6));\n  const nanosecond = ToIntegerOrInfinity(fraction.slice(6, 9));\n  let offset;\n  let z = false;\n  if (match[13]) {\n    offset = undefined;\n    z = true;\n  } else if (match[14] && match[15]) {\n    const offsetSign = match[14] === '-' || match[14] === '\\u2212' ? '-' : '+';\n    const offsetHours = match[15] || '00';\n    const offsetMinutes = match[16] || '00';\n    const offsetSeconds = match[17] || '00';\n    let offsetFraction = match[18] || '0';\n    offset = `${offsetSign}${offsetHours}:${offsetMinutes}`;\n    if (+offsetFraction) {\n      while (offsetFraction.endsWith('0')) offsetFraction = offsetFraction.slice(0, -1);\n      offset += `:${offsetSeconds}.${offsetFraction}`;\n    } else if (+offsetSeconds) {\n      offset += `:${offsetSeconds}`;\n    }\n    if (offset === '-00:00') offset = '+00:00';\n  }\n  const ianaName = match[19];\n  const annotations = match[20];\n  let calendar;\n  for (const [, critical, key, value] of annotations.matchAll(PARSE.annotation)) {\n    if (key === 'u-ca') {\n      if (calendar === undefined) calendar = value;\n    } else if (critical === '!') {\n      throw new RangeError(`Unrecognized annotation: !${key}=${value}`);\n    }\n  }\n  RejectDateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n  return {\n    year,\n    month,\n    day,\n    hasTime,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond,\n    ianaName,\n    offset,\n    z,\n    calendar\n  };\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalInstantString(isoString: string) {\n  const result = ParseISODateTime(isoString);\n  if (!result.z && !result.offset) throw new RangeError('Temporal.Instant requires a time zone offset');\n  return result;\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalZonedDateTimeString(isoString: string) {\n  const result = ParseISODateTime(isoString);\n  if (!result.ianaName) throw new RangeError('Temporal.ZonedDateTime requires a time zone ID in brackets');\n  return result;\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalDateTimeString(isoString: string) {\n  return ParseISODateTime(isoString);\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalDateString(isoString: string) {\n  return ParseISODateTime(isoString);\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalTimeString(isoString: string) {\n  const match = PARSE.time.exec(isoString);\n  let hour, minute, second, millisecond, microsecond, nanosecond, annotations;\n  if (match) {\n    hour = ToIntegerOrInfinity(match[1]);\n    minute = ToIntegerOrInfinity(match[2] || match[5]);\n    second = ToIntegerOrInfinity(match[3] || match[6]);\n    if (second === 60) second = 59;\n    const fraction = (match[4] || match[7]) + '000000000';\n    millisecond = ToIntegerOrInfinity(fraction.slice(0, 3));\n    microsecond = ToIntegerOrInfinity(fraction.slice(3, 6));\n    nanosecond = ToIntegerOrInfinity(fraction.slice(6, 9));\n    annotations = match[14];\n    for (const [, critical, key, value] of annotations.matchAll(PARSE.annotation)) {\n      if (key !== 'u-ca' && critical === '!') {\n        throw new RangeError(`Unrecognized annotation: !${key}=${value}`);\n      }\n    }\n    if (match[8]) throw new RangeError('Z designator not supported for PlainTime');\n  } else {\n    let z, hasTime;\n    ({ hasTime, hour, minute, second, millisecond, microsecond, nanosecond, z } = ParseISODateTime(isoString));\n    if (!hasTime) throw new RangeError(`time is missing in string: ${isoString}`);\n    if (z) throw new RangeError('Z designator not supported for PlainTime');\n  }\n  // if it's a date-time string, OK\n  if (/[tT ][0-9][0-9]/.test(isoString)) {\n    return { hour, minute, second, millisecond, microsecond, nanosecond };\n  }\n  try {\n    const { month, day } = ParseTemporalMonthDayString(isoString);\n    RejectISODate(1972, month, day);\n  } catch {\n    try {\n      const { year, month } = ParseTemporalYearMonthString(isoString);\n      RejectISODate(year, month, 1);\n    } catch {\n      return { hour, minute, second, millisecond, microsecond, nanosecond };\n    }\n  }\n  throw new RangeError(`invalid ISO 8601 time-only string ${isoString}; may need a T prefix`);\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalYearMonthString(isoString: string) {\n  const match = PARSE.yearmonth.exec(isoString);\n  let year, month, calendar, referenceISODay;\n  if (match) {\n    let yearString = match[1];\n    if (yearString[0] === '\\u2212') yearString = `-${yearString.slice(1)}`;\n    if (yearString === '-000000') throw new RangeError(`invalid ISO 8601 string: ${isoString}`);\n    year = ToIntegerOrInfinity(yearString);\n    month = ToIntegerOrInfinity(match[2]);\n    const annotations = match[3];\n    for (const [, critical, key, value] of annotations.matchAll(PARSE.annotation)) {\n      if (key === 'u-ca') {\n        if (calendar === undefined) calendar = value;\n      } else if (critical === '!') {\n        throw new RangeError(`Unrecognized annotation: !${key}=${value}`);\n      }\n    }\n    if (calendar !== undefined && calendar !== 'iso8601') {\n      throw new RangeError('YYYY-MM format is only valid with iso8601 calendar');\n    }\n  } else {\n    let z;\n    ({ year, month, calendar, day: referenceISODay, z } = ParseISODateTime(isoString));\n    if (z) throw new RangeError('Z designator not supported for PlainYearMonth');\n  }\n  return { year, month, calendar, referenceISODay };\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalMonthDayString(isoString: string) {\n  const match = PARSE.monthday.exec(isoString);\n  let month, day, calendar, referenceISOYear;\n  if (match) {\n    month = ToIntegerOrInfinity(match[1]);\n    day = ToIntegerOrInfinity(match[2]);\n    const annotations = match[3];\n    for (const [, critical, key, value] of annotations.matchAll(PARSE.annotation)) {\n      if (key === 'u-ca') {\n        if (calendar === undefined) calendar = value;\n      } else if (critical === '!') {\n        throw new RangeError(`Unrecognized annotation: !${key}=${value}`);\n      }\n    }\n    if (calendar !== undefined && calendar !== 'iso8601') {\n      throw new RangeError('MM-DD format is only valid with iso8601 calendar');\n    }\n  } else {\n    let z;\n    ({ month, day, calendar, year: referenceISOYear, z } = ParseISODateTime(isoString));\n    if (z) throw new RangeError('Z designator not supported for PlainMonthDay');\n  }\n  return { month, day, calendar, referenceISOYear };\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalTimeZoneString(stringIdent: string): Partial<{\n  ianaName: string | undefined;\n  offset: string | undefined;\n  z: boolean | undefined;\n}> {\n  const bareID = new RegExp(`^${PARSE.timeZoneID.source}$`, 'i');\n  if (bareID.test(stringIdent)) return { ianaName: stringIdent };\n  try {\n    // Try parsing ISO string instead\n    const result = ParseISODateTime(stringIdent);\n    if (result.z || result.offset || result.ianaName) {\n      return result;\n    }\n  } catch {\n    // fall through\n  }\n  throw new RangeError(`Invalid time zone: ${stringIdent}`);\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalDurationString(isoString: string) {\n  const match = PARSE.duration.exec(isoString);\n  if (!match) throw new RangeError(`invalid duration: ${isoString}`);\n  if (match.slice(2).every((element) => element === undefined)) {\n    throw new RangeError(`invalid duration: ${isoString}`);\n  }\n  const sign = match[1] === '-' || match[1] === '\\u2212' ? -1 : 1;\n  const years = match[2] === undefined ? 0 : ToIntegerWithTruncation(match[2]) * sign;\n  const months = match[3] === undefined ? 0 : ToIntegerWithTruncation(match[3]) * sign;\n  const weeks = match[4] === undefined ? 0 : ToIntegerWithTruncation(match[4]) * sign;\n  const days = match[5] === undefined ? 0 : ToIntegerWithTruncation(match[5]) * sign;\n  const hours = match[6] === undefined ? 0 : ToIntegerWithTruncation(match[6]) * sign;\n  const fHours = match[7];\n  const minutesStr = match[8];\n  const fMinutes = match[9];\n  const secondsStr = match[10];\n  const fSeconds = match[11];\n  let minutes = 0;\n  let seconds = 0;\n  // fractional hours, minutes, or seconds, expressed in whole nanoseconds:\n  let excessNanoseconds = 0;\n\n  if (fHours !== undefined) {\n    if (minutesStr ?? fMinutes ?? secondsStr ?? fSeconds ?? false) {\n      throw new RangeError('only the smallest unit can be fractional');\n    }\n    excessNanoseconds = ToIntegerOrInfinity((fHours + '000000000').slice(0, 9)) * 3600 * sign;\n  } else {\n    minutes = minutesStr === undefined ? 0 : ToIntegerWithTruncation(minutesStr) * sign;\n    if (fMinutes !== undefined) {\n      if (secondsStr ?? fSeconds ?? false) {\n        throw new RangeError('only the smallest unit can be fractional');\n      }\n      excessNanoseconds = ToIntegerOrInfinity((fMinutes + '000000000').slice(0, 9)) * 60 * sign;\n    } else {\n      seconds = secondsStr === undefined ? 0 : ToIntegerWithTruncation(secondsStr) * sign;\n      if (fSeconds !== undefined) {\n        excessNanoseconds = ToIntegerOrInfinity((fSeconds + '000000000').slice(0, 9)) * sign;\n      }\n    }\n  }\n\n  const nanoseconds = excessNanoseconds % 1000;\n  const microseconds = MathTrunc(excessNanoseconds / 1000) % 1000;\n  const milliseconds = MathTrunc(excessNanoseconds / 1e6) % 1000;\n  seconds += MathTrunc(excessNanoseconds / 1e9) % 60;\n  minutes += MathTrunc(excessNanoseconds / 6e10);\n\n  RejectDuration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\n// ts-prune-ignore-next TODO: remove if test/validStrings is converted to TS.\nexport function ParseTemporalInstant(isoString: string) {\n  let { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, offset, z } =\n    ParseTemporalInstantString(isoString);\n\n  if (!z && !offset) throw new RangeError('Temporal.Instant requires a time zone offset');\n  // At least one of z or offset is defined, but TS doesn't seem to understand\n  // that we only use offset if z is not defined (and thus offset must be defined).\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-unnecessary-type-assertion\n  const offsetNs = z ? 0 : ParseTimeZoneOffsetString(offset!);\n  ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = BalanceISODateTime(\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond - offsetNs\n  ));\n\n  const epochNs = GetUTCEpochNanoseconds(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n  if (epochNs === null) throw new RangeError('DateTime outside of supported range');\n  return epochNs;\n}\n\nexport function RegulateISODate(\n  yearParam: number,\n  monthParam: number,\n  dayParam: number,\n  overflow: Temporal.ArithmeticOptions['overflow']\n) {\n  let year = yearParam;\n  let month = monthParam;\n  let day = dayParam;\n  switch (overflow) {\n    case 'reject':\n      RejectISODate(year, month, day);\n      break;\n    case 'constrain':\n      ({ year, month, day } = ConstrainISODate(year, month, day));\n      break;\n  }\n  return { year, month, day };\n}\n\nexport function RegulateTime(\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number,\n  overflow: Temporal.ArithmeticOptions['overflow']\n) {\n  let hour = hourParam;\n  let minute = minuteParam;\n  let second = secondParam;\n  let millisecond = millisecondParam;\n  let microsecond = microsecondParam;\n  let nanosecond = nanosecondParam;\n\n  switch (overflow) {\n    case 'reject':\n      RejectTime(hour, minute, second, millisecond, microsecond, nanosecond);\n      break;\n    case 'constrain':\n      ({ hour, minute, second, millisecond, microsecond, nanosecond } = ConstrainTime(\n        hour,\n        minute,\n        second,\n        millisecond,\n        microsecond,\n        nanosecond\n      ));\n      break;\n  }\n  return { hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nexport function RegulateISOYearMonth(\n  yearParam: number,\n  monthParam: number,\n  overflow: Temporal.ArithmeticOptions['overflow']\n) {\n  let year = yearParam;\n  let month = monthParam;\n  const referenceISODay = 1;\n  switch (overflow) {\n    case 'reject':\n      RejectISODate(year, month, referenceISODay);\n      break;\n    case 'constrain':\n      ({ year, month } = ConstrainISODate(year, month));\n      break;\n  }\n  return { year, month };\n}\n\nfunction ToTemporalDurationRecord(item: Temporal.DurationLike | string) {\n  if (!IsObject(item)) {\n    return ParseTemporalDurationString(ToString(item));\n  }\n  if (IsTemporalDuration(item)) {\n    return {\n      years: GetSlot(item, YEARS),\n      months: GetSlot(item, MONTHS),\n      weeks: GetSlot(item, WEEKS),\n      days: GetSlot(item, DAYS),\n      hours: GetSlot(item, HOURS),\n      minutes: GetSlot(item, MINUTES),\n      seconds: GetSlot(item, SECONDS),\n      milliseconds: GetSlot(item, MILLISECONDS),\n      microseconds: GetSlot(item, MICROSECONDS),\n      nanoseconds: GetSlot(item, NANOSECONDS)\n    };\n  }\n  const result = {\n    years: 0,\n    months: 0,\n    weeks: 0,\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0,\n    milliseconds: 0,\n    microseconds: 0,\n    nanoseconds: 0\n  };\n  let partial = ToTemporalPartialDurationRecord(item);\n  for (const property of DURATION_FIELDS) {\n    const value = partial[property];\n    if (value !== undefined) {\n      result[property] = value;\n    }\n  }\n  let { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = result;\n  RejectDuration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nfunction ToTemporalPartialDurationRecord(temporalDurationLike: Temporal.DurationLike | string) {\n  if (!IsObject(temporalDurationLike)) {\n    throw new TypeError('invalid duration-like');\n  }\n  const result: Record<typeof DURATION_FIELDS[number], number | undefined> = {\n    years: undefined,\n    months: undefined,\n    weeks: undefined,\n    days: undefined,\n    hours: undefined,\n    minutes: undefined,\n    seconds: undefined,\n    milliseconds: undefined,\n    microseconds: undefined,\n    nanoseconds: undefined\n  };\n  let any = false;\n  for (const property of DURATION_FIELDS) {\n    const value = temporalDurationLike[property];\n    if (value !== undefined) {\n      any = true;\n      result[property] = ToIntegerIfIntegral(value);\n    }\n  }\n  if (!any) {\n    throw new TypeError('invalid duration-like');\n  }\n  return result;\n}\n\nfunction ToLimitedTemporalDuration(\n  item: Temporal.DurationLike | string,\n  disallowedProperties: (keyof Temporal.DurationLike)[]\n) {\n  let record = ToTemporalDurationRecord(item);\n  for (const property of disallowedProperties) {\n    if (record[property] !== 0) {\n      throw new RangeError(\n        `Duration field ${property} not supported by Temporal.Instant. Try Temporal.ZonedDateTime instead.`\n      );\n    }\n  }\n  return record;\n}\n\nexport function ToTemporalOverflow(options: Temporal.AssignmentOptions | undefined) {\n  if (options === undefined) return 'constrain';\n  return GetOption(options, 'overflow', ['constrain', 'reject'], 'constrain');\n}\n\nexport function ToTemporalDisambiguation(options: Temporal.ToInstantOptions | undefined) {\n  if (options === undefined) return 'compatible';\n  return GetOption(options, 'disambiguation', ['compatible', 'earlier', 'later', 'reject'], 'compatible');\n}\n\nexport function ToTemporalRoundingMode(\n  options: { roundingMode?: Temporal.RoundingMode },\n  fallback: Temporal.RoundingMode\n) {\n  return GetOption(\n    options,\n    'roundingMode',\n    ['ceil', 'floor', 'expand', 'trunc', 'halfCeil', 'halfFloor', 'halfExpand', 'halfTrunc', 'halfEven'],\n    fallback\n  );\n}\n\nfunction NegateTemporalRoundingMode(roundingMode: Temporal.RoundingMode) {\n  switch (roundingMode) {\n    case 'ceil':\n      return 'floor';\n    case 'floor':\n      return 'ceil';\n    case 'halfCeil':\n      return 'halfFloor';\n    case 'halfFloor':\n      return 'halfCeil';\n    default:\n      return roundingMode;\n  }\n}\n\nexport function ToTemporalOffset(\n  options: Temporal.OffsetDisambiguationOptions | undefined,\n  fallback: Required<Temporal.OffsetDisambiguationOptions>['offset']\n) {\n  if (options === undefined) return fallback;\n  return GetOption(options, 'offset', ['prefer', 'use', 'ignore', 'reject'], fallback);\n}\n\nexport function ToCalendarNameOption(options: Temporal.ShowCalendarOption) {\n  return GetOption(options, 'calendarName', ['auto', 'always', 'never', 'critical'], 'auto');\n}\n\nexport function ToTimeZoneNameOption(options: Temporal.ZonedDateTimeToStringOptions) {\n  return GetOption(options, 'timeZoneName', ['auto', 'never', 'critical'], 'auto');\n}\n\nexport function ToShowOffsetOption(options: Temporal.ZonedDateTimeToStringOptions) {\n  return GetOption(options, 'offset', ['auto', 'never'], 'auto');\n}\n\nexport function ToTemporalRoundingIncrement(options: { roundingIncrement?: number }) {\n  let increment = options.roundingIncrement;\n  if (increment === undefined) return 1;\n  increment = ToNumber(increment);\n  if (!NumberIsFinite(increment)) {\n    throw new RangeError('roundingIncrement must be finite');\n  }\n  const integerIncrement = MathTrunc(increment);\n  if (integerIncrement < 1 || integerIncrement > 1e9) {\n    throw new RangeError(`roundingIncrement must be at least 1 and at most 1e9, not ${increment}`);\n  }\n  return integerIncrement;\n}\nexport function ValidateTemporalRoundingIncrement(increment: number, dividend: number, inclusive: boolean) {\n  const maximum = inclusive ? dividend : dividend - 1;\n  if (increment > maximum) {\n    throw new RangeError(`roundingIncrement must be at least 1 and less than ${maximum}, not ${increment}`);\n  }\n  if (dividend % increment !== 0) {\n    throw new RangeError(`Rounding increment must divide evenly into ${dividend}`);\n  }\n}\n\nexport function ToFractionalSecondDigits(\n  normalizedOptions: Temporal.ToStringPrecisionOptions\n): Temporal.ToStringPrecisionOptions['fractionalSecondDigits'] {\n  const digitsValue = normalizedOptions.fractionalSecondDigits;\n  if (digitsValue === undefined) return 'auto';\n  if (typeof digitsValue !== 'number') {\n    if (ToString(digitsValue) !== 'auto') {\n      throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${digitsValue}`);\n    }\n    return 'auto';\n  }\n  const digitCount = MathFloor(digitsValue);\n  if (!NumberIsFinite(digitCount) || digitCount < 0 || digitCount > 9) {\n    throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${digitsValue}`);\n  }\n  return digitCount as Exclude<Temporal.ToStringPrecisionOptions['fractionalSecondDigits'], 'auto'>;\n}\n\nexport function ToSecondsStringPrecisionRecord(\n  smallestUnit: Temporal.ToStringPrecisionOptions['smallestUnit'],\n  precision: Temporal.ToStringPrecisionOptions['fractionalSecondDigits']\n): {\n  precision: Temporal.ToStringPrecisionOptions['fractionalSecondDigits'] | 'minute';\n  unit: UnitSmallerThanOrEqualTo<'minute'>;\n  increment: number;\n} {\n  switch (smallestUnit) {\n    case 'minute':\n      return { precision: 'minute', unit: 'minute', increment: 1 };\n    case 'second':\n      return { precision: 0, unit: 'second', increment: 1 };\n    case 'millisecond':\n      return { precision: 3, unit: 'millisecond', increment: 1 };\n    case 'microsecond':\n      return { precision: 6, unit: 'microsecond', increment: 1 };\n    case 'nanosecond':\n      return { precision: 9, unit: 'nanosecond', increment: 1 };\n    default: // fall through if option not given\n  }\n  switch (precision) {\n    case 'auto':\n      return { precision, unit: 'nanosecond', increment: 1 };\n    case 0:\n      return { precision, unit: 'second', increment: 1 };\n    case 1:\n    case 2:\n    case 3:\n      return { precision, unit: 'millisecond', increment: 10 ** (3 - precision) };\n    case 4:\n    case 5:\n    case 6:\n      return { precision, unit: 'microsecond', increment: 10 ** (6 - precision) };\n    case 7:\n    case 8:\n    case 9:\n      return { precision, unit: 'nanosecond', increment: 10 ** (9 - precision) };\n    default:\n      throw new RangeError(`fractionalSecondDigits must be 'auto' or 0 through 9, not ${precision}`);\n  }\n}\n\nexport const REQUIRED = Symbol('~required~');\n\ninterface TemporalUnitOptionsBag {\n  smallestUnit?: Temporal.PluralUnit<Temporal.DateTimeUnit> | Temporal.DateTimeUnit;\n  largestUnit?: Temporal.PluralUnit<Temporal.DateTimeUnit> | Temporal.DateTimeUnit | 'auto';\n  unit?: Temporal.PluralUnit<Temporal.DateTimeUnit> | Temporal.DateTimeUnit;\n}\ntype UnitTypeMapping = {\n  date: Temporal.DateUnit;\n  time: Temporal.TimeUnit;\n  datetime: Temporal.DateTimeUnit;\n};\n// This type specifies the allowed defaults for each unit key type.\ntype AllowedGetTemporalUnitDefaultValues = {\n  smallestUnit: undefined;\n  largestUnit: 'auto' | undefined;\n  unit: undefined;\n};\n\nexport function GetTemporalUnit<\n  U extends keyof TemporalUnitOptionsBag,\n  T extends keyof UnitTypeMapping,\n  D extends typeof REQUIRED | UnitTypeMapping[T] | AllowedGetTemporalUnitDefaultValues[U],\n  R extends Exclude<D, typeof REQUIRED> | UnitTypeMapping[T]\n>(options: TemporalUnitOptionsBag, key: U, unitGroup: T, requiredOrDefault: D): R;\nexport function GetTemporalUnit<\n  U extends keyof TemporalUnitOptionsBag,\n  T extends keyof UnitTypeMapping,\n  D extends typeof REQUIRED | UnitTypeMapping[T] | AllowedGetTemporalUnitDefaultValues[U],\n  E extends 'auto' | Temporal.DateTimeUnit,\n  R extends UnitTypeMapping[T] | Exclude<D, typeof REQUIRED> | E\n>(options: TemporalUnitOptionsBag, key: U, unitGroup: T, requiredOrDefault: D, extraValues: ReadonlyArray<E>): R;\n// This signature of the function is NOT used in type-checking, so restricting\n// the default value via generic binding like the other overloads isn't\n// necessary.\nexport function GetTemporalUnit<\n  T extends keyof UnitTypeMapping,\n  D extends typeof REQUIRED | UnitTypeMapping[T] | 'auto' | undefined,\n  E extends 'auto' | Temporal.DateTimeUnit,\n  R extends UnitTypeMapping[T] | Exclude<D, typeof REQUIRED> | E\n>(\n  options: TemporalUnitOptionsBag,\n  key: keyof typeof options,\n  unitGroup: T,\n  requiredOrDefault: D,\n  extraValues: ReadonlyArray<E> | never[] = []\n): R {\n  const allowedSingular: Array<Temporal.DateTimeUnit | 'auto'> = [];\n  for (const [, singular, category] of SINGULAR_PLURAL_UNITS) {\n    if (unitGroup === 'datetime' || unitGroup === category) {\n      allowedSingular.push(singular);\n    }\n  }\n  allowedSingular.push(...extraValues);\n  let defaultVal: typeof REQUIRED | Temporal.DateTimeUnit | 'auto' | undefined = requiredOrDefault;\n  if (defaultVal === REQUIRED) {\n    defaultVal = undefined;\n  } else if (defaultVal !== undefined) {\n    allowedSingular.push(defaultVal);\n  }\n  const allowedValues: Array<Temporal.DateTimeUnit | Temporal.PluralUnit<Temporal.DateTimeUnit> | 'auto'> = [\n    ...allowedSingular\n  ];\n  for (const singular of allowedSingular) {\n    const plural = PLURAL_FOR.get(singular as Parameters<typeof PLURAL_FOR.get>[0]);\n    if (plural !== undefined) allowedValues.push(plural);\n  }\n  let retval = GetOption(options, key, allowedValues, defaultVal);\n  if (retval === undefined && requiredOrDefault === REQUIRED) {\n    throw new RangeError(`${key} is required`);\n  }\n  // Coerce any plural units into their singular form\n  if (SINGULAR_FOR.has(retval as Temporal.PluralUnit<Temporal.DateTimeUnit>)) {\n    // We just has-checked this, but tsc doesn't understand that.\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return SINGULAR_FOR.get(retval as Temporal.PluralUnit<Temporal.DateTimeUnit>)! as R;\n  }\n  return retval as R;\n}\n\nexport function ToRelativeTemporalObject(options: {\n  relativeTo?:\n    | Temporal.ZonedDateTime\n    | Temporal.PlainDateTime\n    | Temporal.ZonedDateTimeLike\n    | Temporal.PlainDateTimeLike\n    | string\n    | undefined;\n}): Temporal.ZonedDateTime | Temporal.PlainDate | undefined {\n  const relativeTo = options.relativeTo;\n  if (relativeTo === undefined) return relativeTo;\n\n  let offsetBehaviour: OffsetBehaviour = 'option';\n  let matchMinutes = false;\n  let year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar, timeZone, offset;\n  if (IsObject(relativeTo)) {\n    if (IsTemporalZonedDateTime(relativeTo) || IsTemporalDate(relativeTo)) return relativeTo;\n    if (IsTemporalDateTime(relativeTo)) return TemporalDateTimeToDate(relativeTo);\n    calendar = GetTemporalCalendarSlotValueWithISODefault(relativeTo);\n    const fieldNames = CalendarFields(calendar, [\n      'day',\n      'hour',\n      'microsecond',\n      'millisecond',\n      'minute',\n      'month',\n      'monthCode',\n      'nanosecond',\n      'second',\n      'year'\n    ] as const);\n    type FieldNamesWithTimeZoneAndOffset = ArrayWithNewKeys<typeof fieldNames, 'timeZone' | 'offset'>;\n    (fieldNames as FieldNamesWithTimeZoneAndOffset).push('timeZone', 'offset');\n    const fields = PrepareTemporalFields(relativeTo, fieldNames, []);\n    const dateOptions = ObjectCreate(null) as Temporal.AssignmentOptions;\n    dateOptions.overflow = 'constrain';\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = InterpretTemporalDateTimeFields(\n      calendar,\n      fields,\n      dateOptions\n    ));\n    offset = fields.offset;\n    if (offset === undefined) offsetBehaviour = 'wall';\n    timeZone = fields.timeZone;\n    if (timeZone !== undefined) timeZone = ToTemporalTimeZoneSlotValue(timeZone);\n  } else {\n    let ianaName, z;\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar, ianaName, offset, z } =\n      ParseISODateTime(ToString(relativeTo)));\n    if (ianaName) {\n      timeZone = ToTemporalTimeZoneSlotValue(ianaName);\n      if (z) {\n        offsetBehaviour = 'exact';\n      } else if (!offset) {\n        offsetBehaviour = 'wall';\n      }\n      matchMinutes = true;\n    } else if (z) {\n      throw new RangeError(\n        'Z designator not supported for PlainDate relativeTo; either remove the Z or add a bracketed time zone'\n      );\n    }\n    if (!calendar) calendar = 'iso8601';\n    if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n    calendar = ASCIILowercase(calendar);\n  }\n  if (timeZone === undefined) return CreateTemporalDate(year, month, day, calendar);\n  // If offset is missing here, then offsetBehavior will never be be 'option'.\n  assertExists(offset);\n  const offsetNs = offsetBehaviour === 'option' ? ParseTimeZoneOffsetString(offset) : 0;\n  const epochNanoseconds = InterpretISODateTimeOffset(\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond,\n    offsetBehaviour,\n    offsetNs,\n    timeZone,\n    'compatible',\n    'reject',\n    matchMinutes\n  );\n  return CreateTemporalZonedDateTime(epochNanoseconds, timeZone, calendar);\n}\n\nexport function DefaultTemporalLargestUnit(\n  years: number,\n  months: number,\n  weeks: number,\n  days: number,\n  hours: number,\n  minutes: number,\n  seconds: number,\n  milliseconds: number,\n  microseconds: number,\n  nanoseconds: number\n): Temporal.DateTimeUnit {\n  for (const [prop, v] of [\n    ['years', years],\n    ['months', months],\n    ['weeks', weeks],\n    ['days', days],\n    ['hours', hours],\n    ['minutes', minutes],\n    ['seconds', seconds],\n    ['milliseconds', milliseconds],\n    ['microseconds', microseconds],\n    ['nanoseconds', nanoseconds]\n  ] as const) {\n    if (v !== 0) {\n      // All the above keys are definitely in SINGULAR_FOR\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      return SINGULAR_FOR.get(prop)!;\n    }\n  }\n  return 'nanosecond';\n}\n\nexport function LargerOfTwoTemporalUnits<T1 extends Temporal.DateTimeUnit, T2 extends Temporal.DateTimeUnit>(\n  unit1: T1,\n  unit2: T2\n) {\n  if (UNITS_DESCENDING.indexOf(unit1) > UNITS_DESCENDING.indexOf(unit2)) return unit2;\n  return unit1;\n}\n\ntype FieldCompleteness = 'complete' | 'partial';\ninterface FieldPrepareOptions {\n  emptySourceErrorMessage: string;\n}\n\n// Returns all potential owners from all Temporal Like-types for a given union\n// of keys in K.\n// e.g.\n// Owner<'nanosecond'> => PlainDateTimeLike | ZonedDateTimeLike | PlainDateTimeLike | ZonedDateTimeLike\n// Owner<'nanoseconds'> => Duration (the only type with plural keys)\ntype Owner<K extends AnyTemporalKey> =\n  // Conditional typing maps over all of the types given in AnyTemporalLikeType\n  // union\n  K extends unknown ? OwnerOf<K, AnyTemporalLikeType> : 'ThisShouldNeverHappen';\n\n// Returns T iff T has K as all of the key(s) (even if those keys are optional\n// in T), never otherwise. This is a private type for use only in the Owner type\n// above.\ntype OwnerOf<K extends AnyTemporalKey, T> =\n  // Distribute the union before passing to Required\n  // Without distributing, this is\n  // Required<ZonedDateTimeLike | DurationLike> extends Record\n  // vs (with distribution)\n  // Required<ZonedDateTimeLike> extends Record<....> | Required<DurationLike> extends Record<....>\n  T extends unknown\n    ? // All the keys in the Like-types are optional, so in order for them to\n      // 'extend Record<K,...>', where K indicates the required fields, we pass T\n      // through Required to make all the keys non-optional.\n      // Note this doesn't work the other way around: using Partial<Record<K, ..>>\n      // will always be extended by any object (as all the keys are optional).\n      Required<T> extends Record<K, unknown>\n      ? T\n      : // never is the 'identity' type for unions - nothing will be added or\n        // removed from the union.\n        never\n    : 'ThisShouldNeverHappen';\n\ntype Prop<T, K> = T extends unknown ? (K extends keyof T ? T[K] : undefined) : 'ThisShouldNeverHappen';\n\n// Resolve copies the keys and values of a given object type so that TS will\n// stop using type names in error messages / autocomplete. Generally, those\n// names can be more useful, but sometimes having the primitive object shape is\n// significantly easier to reason about (e.g. deeply-nested types).\n// Resolve is an identity function for function types.\ntype Resolve<T> =\n  // Re-mapping doesn't work very well for functions, so exclude them\n  T extends (...args: never[]) => unknown\n    ? T\n    : // Re-map all the keys in T to the same value. This forces TS into no longer\n      // using type aliases, etc.\n      { [K in keyof T]: T[K] };\n\ntype FieldObjectFromOwners<OwnerT, FieldKeys extends AnyTemporalKey> = Resolve<\n  // The resulting object type contains:\n  // - All keys in FieldKeys, which are required properties and their values\n  //   don't include undefined.\n  // - All the other keys in OwnerT that aren't in FieldKeys, which are optional\n  //   properties and their value types explicitly include undefined.\n  {\n    -readonly [k in FieldKeys]: Exclude<Prop<OwnerT, k>, undefined>;\n  } & {\n    -readonly [k in Exclude<Keys<OwnerT>, FieldKeys>]?: Prop<OwnerT, k> | undefined;\n  }\n>;\n\ntype PrepareTemporalFieldsReturn<\n  FieldKeys extends AnyTemporalKey,\n  RequiredFieldsOpt extends ReadonlyArray<FieldKeys> | FieldCompleteness,\n  OwnerT extends Owner<FieldKeys>\n> = RequiredFieldsOpt extends 'partial' ? Partial<OwnerT> : FieldObjectFromOwners<OwnerT, FieldKeys>;\nexport function PrepareTemporalFields<\n  FieldKeys extends AnyTemporalKey,\n  // Constrains the Required keys to be a subset of the given field keys\n  // This could have been written directly into the parameter type, but that\n  // causes an unintended effect where the required fields are added to the list\n  // of field keys, even if that key isn't present in 'fields'.\n  // RequiredFieldKeys extends FieldKeys,\n  RequiredFields extends ReadonlyArray<FieldKeys> | FieldCompleteness\n>(\n  bag: Partial<Record<FieldKeys, unknown>>,\n  fields: Array<FieldKeys>,\n  requiredFields: RequiredFields,\n  { emptySourceErrorMessage }: FieldPrepareOptions = { emptySourceErrorMessage: 'no supported properties found' }\n): PrepareTemporalFieldsReturn<FieldKeys, RequiredFields, Owner<FieldKeys>> {\n  const result: Partial<Record<AnyTemporalKey, unknown>> = ObjectCreate(null);\n  let any = false;\n  fields.sort();\n  for (const property of fields) {\n    let value = bag[property];\n    if (value !== undefined) {\n      any = true;\n      if (BUILTIN_CASTS.has(property)) {\n        // We just has-checked this map access, so there will definitely be a\n        // value.\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        value = BUILTIN_CASTS.get(property)!(value);\n      }\n      result[property] = value;\n    } else if (requiredFields !== 'partial') {\n      // TODO: using .call in this way is not correctly type-checked by tsc.\n      // We might need a type-safe Call wrapper?\n      if (ArrayIncludes.call(requiredFields, property)) {\n        throw new TypeError(`required property '${property}' missing or undefined`);\n      }\n      value = BUILTIN_DEFAULTS.get(property);\n      result[property] = value;\n    }\n  }\n  if (requiredFields === 'partial' && !any) {\n    throw new TypeError(emptySourceErrorMessage);\n  }\n  return result as unknown as PrepareTemporalFieldsReturn<FieldKeys, RequiredFields, Owner<FieldKeys>>;\n}\n\ninterface TimeRecord {\n  hour?: number;\n  minute?: number;\n  second?: number;\n  microsecond?: number;\n  millisecond?: number;\n  nanosecond?: number;\n}\nexport function ToTemporalTimeRecord(bag: Partial<Record<keyof TimeRecord, string | number>>): Required<TimeRecord>;\nexport function ToTemporalTimeRecord(\n  bag: Partial<Record<keyof TimeRecord, string | number | undefined>>,\n  completeness: 'partial'\n): Partial<TimeRecord>;\nexport function ToTemporalTimeRecord(\n  bag: Partial<Record<keyof TimeRecord, string | number>>,\n  completeness: 'complete'\n): Required<TimeRecord>;\nexport function ToTemporalTimeRecord(\n  bag: Partial<Record<keyof TimeRecord, string | number | undefined>>,\n  completeness: FieldCompleteness = 'complete'\n): Partial<TimeRecord> {\n  // NOTE: Field order is sorted to make the sort in PrepareTemporalFields more efficient.\n  const fields: (keyof TimeRecord)[] = ['hour', 'microsecond', 'millisecond', 'minute', 'nanosecond', 'second'];\n  const partial = PrepareTemporalFields(bag, fields, 'partial', { emptySourceErrorMessage: 'invalid time-like' });\n  const result: Partial<TimeRecord> = {};\n  for (const field of fields) {\n    const valueDesc = ObjectGetOwnPropertyDescriptor(partial, field);\n    if (valueDesc !== undefined) {\n      result[field] = valueDesc.value;\n    } else if (completeness === 'complete') {\n      result[field] = 0;\n    }\n  }\n  return result;\n}\n\nexport function ToTemporalDate(\n  itemParam: PlainDateParams['from'][0],\n  options?: PlainDateParams['from'][1]\n): Temporal.PlainDate {\n  let item = itemParam;\n  if (IsObject(item)) {\n    if (IsTemporalDate(item)) return item;\n    if (IsTemporalZonedDateTime(item)) {\n      ToTemporalOverflow(options); // validate and ignore\n      item = GetPlainDateTimeFor(GetSlot(item, TIME_ZONE), GetSlot(item, INSTANT), GetSlot(item, CALENDAR));\n    }\n    if (IsTemporalDateTime(item)) {\n      ToTemporalOverflow(options); // validate and ignore\n      return CreateTemporalDate(\n        GetSlot(item, ISO_YEAR),\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, ISO_DAY),\n        GetSlot(item, CALENDAR)\n      );\n    }\n    const calendar = GetTemporalCalendarSlotValueWithISODefault(item);\n    const fieldNames = CalendarFields(calendar, ['day', 'month', 'monthCode', 'year'] as const);\n    const fields = PrepareTemporalFields(item, fieldNames, []);\n    return CalendarDateFromFields(calendar, fields, options);\n  }\n  ToTemporalOverflow(options); // validate and ignore\n  let { year, month, day, calendar, z } = ParseTemporalDateString(ToString(item));\n  if (z) throw new RangeError('Z designator not supported for PlainDate');\n  if (!calendar) calendar = 'iso8601';\n  if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n  calendar = ASCIILowercase(calendar);\n  return CreateTemporalDate(year, month, day, calendar);\n}\n\nexport function InterpretTemporalDateTimeFields(\n  calendar: CalendarSlot,\n  fields: PrimitiveFieldsOf<Temporal.PlainDateTimeLike> & Parameters<typeof CalendarDateFromFields>[1],\n  options?: Temporal.AssignmentOptions\n) {\n  let { hour, minute, second, millisecond, microsecond, nanosecond } = ToTemporalTimeRecord(fields);\n  const overflow = ToTemporalOverflow(options);\n  const date = CalendarDateFromFields(calendar, fields, options);\n  const year = GetSlot(date, ISO_YEAR);\n  const month = GetSlot(date, ISO_MONTH);\n  const day = GetSlot(date, ISO_DAY);\n  ({ hour, minute, second, millisecond, microsecond, nanosecond } = RegulateTime(\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond,\n    overflow\n  ));\n  return { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nexport function ToTemporalDateTime(item: PlainDateTimeParams['from'][0], options?: PlainDateTimeParams['from'][1]) {\n  let year: number,\n    month: number,\n    day: number,\n    hour: number,\n    minute: number,\n    second: number,\n    millisecond: number,\n    microsecond: number,\n    nanosecond: number,\n    calendar;\n  if (IsObject(item)) {\n    if (IsTemporalDateTime(item)) return item;\n    if (IsTemporalZonedDateTime(item)) {\n      ToTemporalOverflow(options); // validate and ignore\n      return GetPlainDateTimeFor(GetSlot(item, TIME_ZONE), GetSlot(item, INSTANT), GetSlot(item, CALENDAR));\n    }\n    if (IsTemporalDate(item)) {\n      ToTemporalOverflow(options); // validate and ignore\n      return CreateTemporalDateTime(\n        GetSlot(item, ISO_YEAR),\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, ISO_DAY),\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        GetSlot(item, CALENDAR)\n      );\n    }\n\n    calendar = GetTemporalCalendarSlotValueWithISODefault(item);\n    const fieldNames = CalendarFields(calendar, [\n      'day',\n      'hour',\n      'microsecond',\n      'millisecond',\n      'minute',\n      'month',\n      'monthCode',\n      'nanosecond',\n      'second',\n      'year'\n    ] as const);\n    const fields = PrepareTemporalFields(item, fieldNames, []);\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = InterpretTemporalDateTimeFields(\n      calendar,\n      fields,\n      options\n    ));\n  } else {\n    ToTemporalOverflow(options); // validate and ignore\n    let z;\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar, z } =\n      ParseTemporalDateTimeString(ToString(item)));\n    if (z) throw new RangeError('Z designator not supported for PlainDateTime');\n    RejectDateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n    if (!calendar) calendar = 'iso8601';\n    if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n    calendar = ASCIILowercase(calendar);\n  }\n  return CreateTemporalDateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar);\n}\n\nexport function ToTemporalDuration(item: DurationParams['from'][0]) {\n  if (IsTemporalDuration(item)) return item;\n  let { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n    ToTemporalDurationRecord(item);\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  return new TemporalDuration(\n    years,\n    months,\n    weeks,\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds\n  );\n}\n\nexport function ToTemporalInstant(item: InstantParams['from'][0]) {\n  if (IsTemporalInstant(item)) return item;\n  if (IsTemporalZonedDateTime(item)) {\n    const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n    return new TemporalInstant(GetSlot(item, EPOCHNANOSECONDS));\n  }\n  const ns = ParseTemporalInstant(ToString(item));\n  const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n  return new TemporalInstant(ns);\n}\n\nexport function ToTemporalMonthDay(\n  itemParam: PlainMonthDayParams['from'][0],\n  options?: PlainMonthDayParams['from'][1]\n) {\n  let item = itemParam;\n  if (IsObject(item)) {\n    if (IsTemporalMonthDay(item)) return item;\n    let calendar: CalendarSlot, calendarAbsent: boolean;\n    if (HasSlot(item, CALENDAR)) {\n      calendar = GetSlot(item, CALENDAR);\n      calendarAbsent = false;\n    } else {\n      let calendarFromItem = item.calendar;\n      calendarAbsent = calendarFromItem === undefined;\n      if (calendarFromItem === undefined) calendarFromItem = 'iso8601';\n      calendar = ToTemporalCalendarSlotValue(calendarFromItem);\n    }\n    // HasSlot above adjusts the type of 'item' to include\n    // TypesWithCalendarUnits, which causes type-inference failures below.\n    // This is probably indicative of problems with HasSlot's typing.\n    const fieldNames = CalendarFields(calendar, ['day', 'month', 'monthCode', 'year'] as const);\n    const fields = PrepareTemporalFields(item, fieldNames, []);\n    // Callers who omit the calendar are not writing calendar-independent\n    // code. In that case, `monthCode`/`year` can be omitted; `month` and\n    // `day` are sufficient. Add a `year` to satisfy calendar validation.\n    if (calendarAbsent && fields.month !== undefined && fields.monthCode === undefined && fields.year === undefined) {\n      fields.year = 1972;\n    }\n    return CalendarMonthDayFromFields(calendar, fields, options);\n  }\n\n  ToTemporalOverflow(options); // validate and ignore\n  let { month, day, referenceISOYear, calendar } = ParseTemporalMonthDayString(ToString(item));\n  if (calendar === undefined) calendar = 'iso8601';\n  if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n  calendar = ASCIILowercase(calendar);\n\n  if (referenceISOYear === undefined) {\n    RejectISODate(1972, month, day);\n    return CreateTemporalMonthDay(month, day, calendar);\n  }\n  const result = CreateTemporalMonthDay(month, day, calendar, referenceISOYear);\n  return CalendarMonthDayFromFields(calendar, result);\n}\n\nexport function ToTemporalTime(\n  itemParam: PlainTimeParams['from'][0],\n  overflow: NonNullable<PlainTimeParams['from'][1]>['overflow'] = 'constrain'\n) {\n  let item = itemParam;\n  let hour, minute, second, millisecond, microsecond, nanosecond;\n  if (IsObject(item)) {\n    if (IsTemporalTime(item)) return item;\n    if (IsTemporalZonedDateTime(item)) {\n      item = GetPlainDateTimeFor(GetSlot(item, TIME_ZONE), GetSlot(item, INSTANT), GetSlot(item, CALENDAR));\n    }\n    if (IsTemporalDateTime(item)) {\n      const TemporalPlainTime = GetIntrinsic('%Temporal.PlainTime%');\n      return new TemporalPlainTime(\n        GetSlot(item, ISO_HOUR),\n        GetSlot(item, ISO_MINUTE),\n        GetSlot(item, ISO_SECOND),\n        GetSlot(item, ISO_MILLISECOND),\n        GetSlot(item, ISO_MICROSECOND),\n        GetSlot(item, ISO_NANOSECOND)\n      );\n    }\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = ToTemporalTimeRecord(item));\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = RegulateTime(\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      overflow\n    ));\n  } else {\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = ParseTemporalTimeString(ToString(item)));\n    RejectTime(hour, minute, second, millisecond, microsecond, nanosecond);\n  }\n  const TemporalPlainTime = GetIntrinsic('%Temporal.PlainTime%');\n  return new TemporalPlainTime(hour, minute, second, millisecond, microsecond, nanosecond);\n}\n\nexport function ToTemporalYearMonth(\n  item: PlainYearMonthParams['from'][0],\n  options?: PlainYearMonthParams['from'][1]\n): Temporal.PlainYearMonth {\n  if (IsObject(item)) {\n    if (IsTemporalYearMonth(item)) return item;\n    const calendar = GetTemporalCalendarSlotValueWithISODefault(item);\n    const fieldNames = CalendarFields(calendar, ['month', 'monthCode', 'year'] as const);\n    const fields = PrepareTemporalFields(item, fieldNames, []);\n    return CalendarYearMonthFromFields(calendar, fields, options);\n  }\n\n  ToTemporalOverflow(options); // validate and ignore\n  let { year, month, referenceISODay, calendar } = ParseTemporalYearMonthString(ToString(item));\n  if (calendar === undefined) calendar = 'iso8601';\n  if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n  calendar = ASCIILowercase(calendar);\n\n  if (referenceISODay === undefined) {\n    RejectISODate(year, month, 1);\n    return CreateTemporalYearMonth(year, month, calendar);\n  }\n  const result = CreateTemporalYearMonth(year, month, calendar, referenceISODay);\n  return CalendarYearMonthFromFields(calendar, result);\n}\n\ntype OffsetBehaviour = 'wall' | 'exact' | 'option';\n\nexport function InterpretISODateTimeOffset(\n  year: number,\n  month: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number,\n  offsetBehaviour: OffsetBehaviour,\n  offsetNs: number,\n  timeZone: string | Temporal.TimeZoneProtocol,\n  disambiguation: NonNullable<Temporal.ToInstantOptions['disambiguation']>,\n  offsetOpt: Temporal.OffsetDisambiguationOptions['offset'],\n  matchMinute: boolean\n) {\n  const DateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n  const dt = new DateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n\n  if (offsetBehaviour === 'wall' || offsetOpt === 'ignore') {\n    // Simple case: ISO string without a TZ offset (or caller wants to ignore\n    // the offset), so just convert DateTime to Instant in the given time zone\n    const instant = GetInstantFor(timeZone, dt, disambiguation);\n    return GetSlot(instant, EPOCHNANOSECONDS);\n  }\n\n  // The caller wants the offset to always win ('use') OR the caller is OK\n  // with the offset winning ('prefer' or 'reject') as long as it's valid\n  // for this timezone and date/time.\n  if (offsetBehaviour === 'exact' || offsetOpt === 'use') {\n    // Calculate the instant for the input's date/time and offset\n    const epochNs = GetUTCEpochNanoseconds(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond\n    );\n    if (epochNs === null) throw new RangeError('ZonedDateTime outside of supported range');\n    return JSBI.subtract(epochNs, JSBI.BigInt(offsetNs));\n  }\n\n  // \"prefer\" or \"reject\"\n  const possibleInstants = GetPossibleInstantsFor(timeZone, dt);\n  for (const candidate of possibleInstants) {\n    const candidateOffset = GetOffsetNanosecondsFor(timeZone, candidate);\n    const roundedCandidateOffset = JSBI.toNumber(\n      RoundNumberToIncrement(JSBI.BigInt(candidateOffset), MINUTE_NANOS, 'halfExpand')\n    );\n    if (candidateOffset === offsetNs || (matchMinute && roundedCandidateOffset === offsetNs)) {\n      return GetSlot(candidate, EPOCHNANOSECONDS);\n    }\n  }\n\n  // the user-provided offset doesn't match any instants for this time\n  // zone and date/time.\n  if (offsetOpt === 'reject') {\n    const offsetStr = FormatTimeZoneOffsetString(offsetNs);\n    const timeZoneString = IsTemporalTimeZone(timeZone) ? GetSlot(timeZone, TIMEZONE_ID) : 'time zone';\n    // The tsc emit for this line rewrites to invoke the PlainDateTime's valueOf method, NOT\n    // toString (which is invoked by Node when using template literals directly).\n    // See https://github.com/microsoft/TypeScript/issues/39744 for the proposed fix in tsc emit\n    throw new RangeError(`Offset ${offsetStr} is invalid for ${dt.toString()} in ${timeZoneString}`);\n  }\n  // fall through: offsetOpt === 'prefer', but the offset doesn't match\n  // so fall back to use the time zone instead.\n  const instant = DisambiguatePossibleInstants(possibleInstants, timeZone, dt, disambiguation);\n  return GetSlot(instant, EPOCHNANOSECONDS);\n}\n\nexport function ToTemporalZonedDateTime(\n  item: ZonedDateTimeParams['from'][0],\n  options?: ZonedDateTimeParams['from'][1]\n) {\n  let year: number,\n    month: number,\n    day: number,\n    hour: number,\n    minute: number,\n    second: number,\n    millisecond: number,\n    microsecond: number,\n    nanosecond: number,\n    timeZone,\n    offset: string | undefined,\n    calendar: string | Temporal.CalendarProtocol | undefined;\n  let disambiguation: NonNullable<Temporal.ToInstantOptions['disambiguation']>;\n  let offsetOpt: NonNullable<Temporal.OffsetDisambiguationOptions['offset']>;\n  let matchMinute = false;\n  let offsetBehaviour: OffsetBehaviour = 'option';\n  if (IsObject(item)) {\n    if (IsTemporalZonedDateTime(item)) return item;\n    calendar = GetTemporalCalendarSlotValueWithISODefault(item);\n    const fieldNames: (keyof Temporal.ZonedDateTimeLike)[] = CalendarFields(calendar, [\n      'day',\n      'hour',\n      'microsecond',\n      'millisecond',\n      'minute',\n      'month',\n      'monthCode',\n      'nanosecond',\n      'second',\n      'year'\n    ] as const);\n    fieldNames.push('timeZone', 'offset');\n    const fields = PrepareTemporalFields(item, fieldNames, ['timeZone']);\n    timeZone = ToTemporalTimeZoneSlotValue(fields.timeZone);\n    offset = fields.offset;\n    if (offset === undefined) {\n      offsetBehaviour = 'wall';\n    }\n    disambiguation = ToTemporalDisambiguation(options);\n    offsetOpt = ToTemporalOffset(options, 'reject');\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = InterpretTemporalDateTimeFields(\n      calendar,\n      fields,\n      options\n    ));\n  } else {\n    let ianaName, z;\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, ianaName, offset, z, calendar } =\n      ParseTemporalZonedDateTimeString(ToString(item)));\n    timeZone = ToTemporalTimeZoneSlotValue(ianaName);\n    if (z) {\n      offsetBehaviour = 'exact';\n    } else if (!offset) {\n      offsetBehaviour = 'wall';\n    }\n    if (!calendar) calendar = 'iso8601';\n    if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n    calendar = ASCIILowercase(calendar);\n    matchMinute = true; // ISO strings may specify offset with less precision\n    disambiguation = ToTemporalDisambiguation(options);\n    offsetOpt = ToTemporalOffset(options, 'reject');\n    ToTemporalOverflow(options); // validate and ignore\n  }\n  let offsetNs = 0;\n  // The code above guarantees that if offsetBehaviour === 'option', then\n  // `offset` is not undefined.\n  if (offsetBehaviour === 'option') offsetNs = ParseTimeZoneOffsetString(offset as string);\n  const epochNanoseconds = InterpretISODateTimeOffset(\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond,\n    offsetBehaviour,\n    offsetNs,\n    timeZone,\n    disambiguation,\n    offsetOpt,\n    matchMinute\n  );\n  return CreateTemporalZonedDateTime(epochNanoseconds, timeZone, calendar);\n}\n\nexport function CreateTemporalDateSlots(\n  result: Temporal.PlainDate,\n  isoYear: number,\n  isoMonth: number,\n  isoDay: number,\n  calendar: CalendarSlot\n) {\n  RejectISODate(isoYear, isoMonth, isoDay);\n  RejectDateRange(isoYear, isoMonth, isoDay);\n\n  CreateSlots(result);\n  SetSlot(result, ISO_YEAR, isoYear);\n  SetSlot(result, ISO_MONTH, isoMonth);\n  SetSlot(result, ISO_DAY, isoDay);\n  SetSlot(result, CALENDAR, calendar);\n  SetSlot(result, DATE_BRAND, true);\n\n  if (DEBUG) {\n    ObjectDefineProperty(result, '_repr_', {\n      value: `${result[Symbol.toStringTag]} <${TemporalDateToString(result)}>`,\n      writable: false,\n      enumerable: false,\n      configurable: false\n    });\n  }\n}\n\nexport function CreateTemporalDate(\n  isoYear: number,\n  isoMonth: number,\n  isoDay: number,\n  calendar: CalendarSlot = 'iso8601'\n) {\n  const TemporalPlainDate = GetIntrinsic('%Temporal.PlainDate%');\n  const result = ObjectCreate(TemporalPlainDate.prototype);\n  CreateTemporalDateSlots(result, isoYear, isoMonth, isoDay, calendar);\n  return result;\n}\n\nexport function CreateTemporalDateTimeSlots(\n  result: Temporal.PlainDateTime,\n  isoYear: number,\n  isoMonth: number,\n  isoDay: number,\n  h: number,\n  min: number,\n  s: number,\n  ms: number,\n  s: number,\n  ns: number,\n  calendar: CalendarSlot\n) {\n  RejectDateTime(isoYear, isoMonth, isoDay, h, min, s, ms, s, ns);\n  RejectDateTimeRange(isoYear, isoMonth, isoDay, h, min, s, ms, s, ns);\n\n  CreateSlots(result);\n  SetSlot(result, ISO_YEAR, isoYear);\n  SetSlot(result, ISO_MONTH, isoMonth);\n  SetSlot(result, ISO_DAY, isoDay);\n  SetSlot(result, ISO_HOUR, h);\n  SetSlot(result, ISO_MINUTE, min);\n  SetSlot(result, ISO_SECOND, s);\n  SetSlot(result, ISO_MILLISECOND, ms);\n  SetSlot(result, ISO_MICROSECOND, s);\n  SetSlot(result, ISO_NANOSECOND, ns);\n  SetSlot(result, CALENDAR, calendar);\n\n  if (DEBUG) {\n    Object.defineProperty(result, '_repr_', {\n      value: `${result[Symbol.toStringTag]} <${TemporalDateTimeToString(result, 'auto')}>`,\n      writable: false,\n      enumerable: false,\n      configurable: false\n    });\n  }\n}\n\nexport function CreateTemporalDateTime(\n  isoYear: number,\n  isoMonth: number,\n  isoDay: number,\n  h: number,\n  min: number,\n  s: number,\n  ms: number,\n  s: number,\n  ns: number,\n  calendar: CalendarSlot = 'iso8601'\n) {\n  const TemporalPlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n  const result = ObjectCreate(TemporalPlainDateTime.prototype);\n  CreateTemporalDateTimeSlots(result, isoYear, isoMonth, isoDay, h, min, s, ms, s, ns, calendar);\n  return result as Temporal.PlainDateTime;\n}\n\nexport function CreateTemporalMonthDaySlots(\n  result: Temporal.PlainMonthDay,\n  isoMonth: number,\n  isoDay: number,\n  calendar: CalendarSlot,\n  referenceISOYear: number\n) {\n  RejectISODate(referenceISOYear, isoMonth, isoDay);\n  RejectDateRange(referenceISOYear, isoMonth, isoDay);\n\n  CreateSlots(result);\n  SetSlot(result, ISO_MONTH, isoMonth);\n  SetSlot(result, ISO_DAY, isoDay);\n  SetSlot(result, ISO_YEAR, referenceISOYear);\n  SetSlot(result, CALENDAR, calendar);\n  SetSlot(result, MONTH_DAY_BRAND, true);\n\n  if (DEBUG) {\n    Object.defineProperty(result, '_repr_', {\n      value: `${result[Symbol.toStringTag]} <${TemporalMonthDayToString(result)}>`,\n      writable: false,\n      enumerable: false,\n      configurable: false\n    });\n  }\n}\n\nexport function CreateTemporalMonthDay(\n  isoMonth: number,\n  isoDay: number,\n  calendar: CalendarSlot = 'iso8601',\n  referenceISOYear = 1972\n) {\n  const TemporalPlainMonthDay = GetIntrinsic('%Temporal.PlainMonthDay%');\n  const result = ObjectCreate(TemporalPlainMonthDay.prototype);\n  CreateTemporalMonthDaySlots(result, isoMonth, isoDay, calendar, referenceISOYear);\n  return result;\n}\n\nexport function CreateTemporalYearMonthSlots(\n  result: Temporal.PlainYearMonth,\n  isoYear: number,\n  isoMonth: number,\n  calendar: CalendarSlot,\n  referenceISODay: number\n) {\n  RejectISODate(isoYear, isoMonth, referenceISODay);\n  RejectYearMonthRange(isoYear, isoMonth);\n\n  CreateSlots(result);\n  SetSlot(result, ISO_YEAR, isoYear);\n  SetSlot(result, ISO_MONTH, isoMonth);\n  SetSlot(result, ISO_DAY, referenceISODay);\n  SetSlot(result, CALENDAR, calendar);\n  SetSlot(result, YEAR_MONTH_BRAND, true);\n\n  if (DEBUG) {\n    Object.defineProperty(result, '_repr_', {\n      value: `${result[Symbol.toStringTag]} <${TemporalYearMonthToString(result)}>`,\n      writable: false,\n      enumerable: false,\n      configurable: false\n    });\n  }\n}\n\nexport function CreateTemporalYearMonth(\n  isoYear: number,\n  isoMonth: number,\n  calendar: CalendarSlot = 'iso8601',\n  referenceISODay = 1\n) {\n  const TemporalPlainYearMonth = GetIntrinsic('%Temporal.PlainYearMonth%');\n  const result = ObjectCreate(TemporalPlainYearMonth.prototype);\n  CreateTemporalYearMonthSlots(result, isoYear, isoMonth, calendar, referenceISODay);\n  return result;\n}\n\nexport function CreateTemporalZonedDateTimeSlots(\n  result: Temporal.ZonedDateTime,\n  epochNanoseconds: JSBI,\n  timeZone: string | Temporal.TimeZoneProtocol,\n  calendar: CalendarSlot\n) {\n  ValidateEpochNanoseconds(epochNanoseconds);\n\n  CreateSlots(result);\n  SetSlot(result, EPOCHNANOSECONDS, epochNanoseconds);\n  SetSlot(result, TIME_ZONE, timeZone);\n  SetSlot(result, CALENDAR, calendar);\n\n  const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n  const instant = new TemporalInstant(GetSlot(result, EPOCHNANOSECONDS));\n  SetSlot(result, INSTANT, instant);\n\n  if (DEBUG) {\n    Object.defineProperty(result, '_repr_', {\n      value: `${result[Symbol.toStringTag]} <${TemporalZonedDateTimeToString(result, 'auto')}>`,\n      writable: false,\n      enumerable: false,\n      configurable: false\n    });\n  }\n}\n\nexport function CreateTemporalZonedDateTime(\n  epochNanoseconds: JSBI,\n  timeZone: string | Temporal.TimeZoneProtocol,\n  calendar: CalendarSlot = 'iso8601'\n) {\n  const TemporalZonedDateTime = GetIntrinsic('%Temporal.ZonedDateTime%');\n  const result = ObjectCreate(TemporalZonedDateTime.prototype);\n  CreateTemporalZonedDateTimeSlots(result, epochNanoseconds, timeZone, calendar);\n  return result;\n}\n\n// TODO: should (can?) we make this generic so the field names are checked\n// against the type that the calendar is a property of?\nexport function CalendarFields<K extends AnyTemporalKey>(calendar: CalendarSlot, fieldNamesParam: ReadonlyArray<K>) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.fields%'), calendarObj, [fieldNamesParam]) as K[];\n  }\n  const fields = GetMethod(calendar, 'fields');\n  const fieldNames = Call(fields, calendar, [fieldNamesParam]);\n  const result: K[] = [];\n  for (const name of fieldNames) {\n    if (typeof name !== 'string') throw new TypeError('bad return from calendar.fields()');\n    ArrayPrototypePush.call(result, name);\n  }\n  return result;\n}\n\nexport function CalendarMergeFields<Base extends Record<string, unknown>, ToAdd extends Record<string, unknown>>(\n  calendar: CalendarSlot,\n  fields: Base,\n  additionalFields: ToAdd\n) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.mergeFields%'), calendarObj, [\n      fields,\n      additionalFields\n    ]) as Base & ToAdd;\n  }\n  const mergeFields = GetMethod(calendar, 'mergeFields');\n  const result = Call(mergeFields, calendar, [fields, additionalFields]);\n  if (!IsObject(result)) throw new TypeError('bad return from calendar.mergeFields()');\n  return result as Base & ToAdd;\n}\n\nexport function CalendarDateAdd(\n  calendar: CalendarSlot,\n  date: CalendarProtocolParams['dateAdd'][0],\n  duration: CalendarProtocolParams['dateAdd'][1],\n  options: CalendarProtocolParams['dateAdd'][2],\n  dateAddParam?: Temporal.CalendarProtocol['dateAdd'] | undefined\n) {\n  let dateAdd = dateAddParam;\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.dateAdd%'), calendarObj, [date, duration, options]);\n  }\n  if (dateAdd === undefined) {\n    dateAdd = GetMethod(calendar, 'dateAdd');\n  }\n  const result = ReflectApply(dateAdd, calendar, [date, duration, options]);\n  if (!IsTemporalDate(result)) throw new TypeError('invalid result');\n  return result;\n}\n\nfunction CalendarDateUntil(\n  calendar: CalendarSlot,\n  date: CalendarProtocolParams['dateUntil'][0],\n  otherDate: CalendarProtocolParams['dateUntil'][1],\n  options: CalendarProtocolParams['dateUntil'][2],\n  dateUntilParam?: Temporal.CalendarProtocol['dateUntil'] | undefined\n) {\n  let dateUntil = dateUntilParam;\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.dateUntil%'), calendarObj, [date, otherDate, options]);\n  }\n  if (dateUntil === undefined) {\n    dateUntil = GetMethod(calendar, 'dateUntil');\n  }\n  const result = ReflectApply(dateUntil, calendar, [date, otherDate, options]);\n  if (!IsTemporalDuration(result)) throw new TypeError('invalid result');\n  return result;\n}\n\nexport function CalendarYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['year'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.year%'), calendarObj, [dateLike]);\n  }\n  const year = GetMethod(calendar, 'year');\n  let result = Call(year, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar year result must be an integer');\n  }\n  if (!IsIntegralNumber(result)) {\n    throw new RangeError('calendar year result must be an integer');\n  }\n  return result;\n}\n\nexport function CalendarMonth(calendar: CalendarSlot, dateLike: CalendarProtocolParams['month'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.month%'), calendarObj, [dateLike]);\n  }\n  const month = GetMethod(calendar, 'month');\n  let result = Call(month, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar month result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar month result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarMonthCode(calendar: CalendarSlot, dateLike: CalendarProtocolParams['monthCode'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.monthCode%'), calendarObj, [dateLike]);\n  }\n  const monthCode = GetMethod(calendar, 'monthCode');\n  let result = Call(monthCode, calendar, [dateLike]);\n  if (typeof result !== 'string') {\n    throw new TypeError('calendar monthCode result must be a string');\n  }\n  return result;\n}\n\nexport function CalendarDay(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.day%'), calendarObj, [dateLike]);\n  }\n  const day = GetMethod(calendar, 'day');\n  const result = Call(day, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar day result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar day result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarEra(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.era%'), calendarObj, [dateLike]);\n  }\n  const era = GetMethod(calendar, 'era');\n  let result = Call(era, calendar, [dateLike]);\n  if (result === undefined) {\n    return result;\n  }\n  if (typeof result !== 'string') {\n    throw new TypeError('calendar era result must be a string or undefined');\n  }\n  return result;\n}\n\nexport function CalendarEraYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.eraYear%'), calendarObj, [dateLike]);\n  }\n  const eraYear = GetMethod(calendar, 'eraYear');\n  let result = Call(eraYear, calendar, [dateLike]);\n  if (result === undefined) {\n    return result;\n  }\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar eraYear result must be an integer or undefined');\n  }\n  if (!IsIntegralNumber(result)) {\n    throw new RangeError('calendar eraYear result must be an integer or undefined');\n  }\n  return result;\n}\n\nexport function CalendarDayOfWeek(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.dayOfWeek%'), calendarObj, [dateLike]);\n  }\n  const dayOfWeek = GetMethod(calendar, 'dayOfWeek');\n  const result = Call(dayOfWeek, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar dayOfWeek result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar dayOfWeek result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarDayOfYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.dayOfYear%'), calendarObj, [dateLike]);\n  }\n  const dayOfYear = GetMethod(calendar, 'dayOfYear');\n  const result = Call(dayOfYear, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar dayOfYear result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar dayOfYear result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarWeekOfYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.weekOfYear%'), calendarObj, [dateLike]);\n  }\n  const weekOfYear = GetMethod(calendar, 'weekOfYear');\n  const result = Call(weekOfYear, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar weekOfYear result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar weekOfYear result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarYearOfWeek(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.yearOfWeek%'), calendarObj, [dateLike]);\n  }\n  const yearOfWeek = GetMethod(calendar, 'yearOfWeek');\n  const result = Call(yearOfWeek, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar yearOfWeek result must be an integer');\n  }\n  if (!IsIntegralNumber(result)) {\n    throw new RangeError('calendar yearOfWeek result must be an integer');\n  }\n  return result;\n}\n\nexport function CalendarDaysInWeek(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.daysInWeek%'), calendarObj, [dateLike]);\n  }\n  const daysInWeek = GetMethod(calendar, 'daysInWeek');\n  const result = Call(daysInWeek, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar daysInWeek result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar daysInWeek result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarDaysInMonth(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.daysInMonth%'), calendarObj, [dateLike]);\n  }\n  const daysInMonth = GetMethod(calendar, 'daysInMonth');\n  const result = Call(daysInMonth, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar daysInMonth result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar daysInMonth result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarDaysInYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.daysInYear%'), calendarObj, [dateLike]);\n  }\n  const daysInYear = GetMethod(calendar, 'daysInYear');\n  const result = Call(daysInYear, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar daysInYear result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar daysInYear result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarMonthsInYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.monthsInYear%'), calendarObj, [dateLike]);\n  }\n  const monthsInYear = GetMethod(calendar, 'monthsInYear');\n  const result = Call(monthsInYear, calendar, [dateLike]);\n  if (typeof result !== 'number') {\n    throw new TypeError('calendar monthsInYear result must be a positive integer');\n  }\n  if (!IsIntegralNumber(result) || result < 1) {\n    throw new RangeError('calendar monthsInYear result must be a positive integer');\n  }\n  return result;\n}\n\nexport function CalendarInLeapYear(calendar: CalendarSlot, dateLike: CalendarProtocolParams['era'][0]) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.inLeapYear%'), calendarObj, [dateLike]);\n  }\n  const inLeapYear = GetMethod(calendar, 'inLeapYear');\n  const result = Call(inLeapYear, calendar, [dateLike]);\n  if (typeof result !== 'boolean') {\n    throw new TypeError('calendar inLeapYear result must be a boolean');\n  }\n  return result;\n}\n\ntype MaybeCalendarProtocol = Partial<Omit<Temporal.CalendarProtocol, 'toString' | 'toJSON'>>;\nfunction ObjectImplementsTemporalCalendarProtocol(object: MaybeCalendarProtocol) {\n  if (IsTemporalCalendar(object)) return true;\n  return (\n    'dateAdd' in object &&\n    'dateFromFields' in object &&\n    'dateUntil' in object &&\n    'day' in object &&\n    'dayOfWeek' in object &&\n    'dayOfYear' in object &&\n    'daysInMonth' in object &&\n    'daysInWeek' in object &&\n    'daysInYear' in object &&\n    'fields' in object &&\n    'id' in object &&\n    'inLeapYear' in object &&\n    'mergeFields' in object &&\n    'month' in object &&\n    'monthCode' in object &&\n    'monthDayFromFields' in object &&\n    'monthsInYear' in object &&\n    'weekOfYear' in object &&\n    'year' in object &&\n    'yearMonthFromFields' in object &&\n    'yearOfWeek' in object\n  );\n}\n\nexport function ToTemporalCalendarSlotValue(calendarLike: string): string;\nexport function ToTemporalCalendarSlotValue(calendarLike: Temporal.CalendarProtocol): Temporal.CalendarProtocol;\nexport function ToTemporalCalendarSlotValue(calendarLike: Temporal.CalendarLike): string | Temporal.CalendarProtocol;\nexport function ToTemporalCalendarSlotValue(calendarLike: CalendarParams['from'][0]) {\n  if (IsObject(calendarLike)) {\n    if (HasSlot(calendarLike, CALENDAR)) return GetSlot(calendarLike, CALENDAR);\n    if (!ObjectImplementsTemporalCalendarProtocol(calendarLike)) {\n      throw new TypeError('expected a Temporal.Calendar or object implementing the Temporal.Calendar protocol');\n    }\n    return calendarLike;\n  }\n  const identifier = ToString(calendarLike);\n  if (IsBuiltinCalendar(identifier)) return ASCIILowercase(identifier);\n  let calendar;\n  try {\n    ({ calendar } = ParseISODateTime(identifier));\n  } catch {\n    try {\n      ({ calendar } = ParseTemporalYearMonthString(identifier));\n    } catch {\n      ({ calendar } = ParseTemporalMonthDayString(identifier));\n    }\n  }\n  if (!calendar) calendar = 'iso8601';\n  if (!IsBuiltinCalendar(calendar)) throw new RangeError(`invalid calendar identifier ${calendar}`);\n  return ASCIILowercase(calendar);\n}\n\nfunction GetTemporalCalendarSlotValueWithISODefault(item: { calendar?: Temporal.CalendarLike }): CalendarSlot {\n  if (HasSlot(item, CALENDAR)) return GetSlot(item, CALENDAR);\n  const { calendar } = item;\n  if (calendar === undefined) return 'iso8601';\n  return ToTemporalCalendarSlotValue(calendar);\n}\n\nexport function ToTemporalCalendarIdentifier(slotValue: CalendarSlot) {\n  if (typeof slotValue === 'string') return slotValue;\n  const result = slotValue.id;\n  if (typeof result !== 'string') throw new TypeError('calendar.id should be a string');\n  return result;\n}\n\nexport function ToTemporalCalendarObject(slotValue: CalendarSlot) {\n  if (IsObject(slotValue)) return slotValue;\n  const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n  return new TemporalCalendar(slotValue);\n}\n\nexport function CalendarEquals(one: CalendarSlot, two: CalendarSlot) {\n  if (one === two) return true;\n  const cal1 = ToTemporalCalendarIdentifier(one);\n  const cal2 = ToTemporalCalendarIdentifier(two);\n  return cal1 === cal2;\n}\n\n// This operation is not in the spec, it implements the following:\n// \"If ? CalendarEquals(one, two) is false, throw a RangeError exception.\"\n// This is so that we can build an informative error message without\n// re-getting the .id properties.\nfunction ThrowIfCalendarsNotEqual(one: CalendarSlot, two: CalendarSlot, errorMessageAction: string) {\n  if (one === two) return;\n  const cal1 = ToTemporalCalendarIdentifier(one);\n  const cal2 = ToTemporalCalendarIdentifier(two);\n  if (cal1 !== cal2) {\n    throw new RangeError(`cannot ${errorMessageAction} of ${cal1} and ${cal2} calendars`);\n  }\n}\n\nexport function ConsolidateCalendars(one: CalendarSlot, two: CalendarSlot) {\n  if (one === two) return two;\n  const sOne = ToTemporalCalendarIdentifier(one);\n  const sTwo = ToTemporalCalendarIdentifier(two);\n  if (sOne === sTwo || sOne === 'iso8601') {\n    return two;\n  } else if (sTwo === 'iso8601') {\n    return one;\n  } else {\n    throw new RangeError('irreconcilable calendars');\n  }\n}\n\nexport function CalendarDateFromFields(\n  calendar: CalendarSlot,\n  fields: CalendarProtocolParams['dateFromFields'][0],\n  options?: Partial<CalendarProtocolParams['dateFromFields'][1]>,\n  dateFromFieldsParam?: Temporal.CalendarProtocol['dateFromFields']\n) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.dateFromFields%'), calendarObj, [fields, options]);\n  }\n  const dateFromFields = dateFromFieldsParam ?? GetMethod(calendar, 'dateFromFields');\n  const result = Call(dateFromFields, calendar, [fields, options]);\n  if (!IsTemporalDate(result)) throw new TypeError('invalid result');\n  return result;\n}\n\nexport function CalendarYearMonthFromFields(\n  calendar: CalendarSlot,\n  fields: CalendarProtocolParams['yearMonthFromFields'][0],\n  options?: CalendarProtocolParams['yearMonthFromFields'][1]\n) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.yearMonthFromFields%'), calendarObj, [fields, options]);\n  }\n  const yearMonthFromFields = GetMethod(calendar, 'yearMonthFromFields');\n  let result = Call(yearMonthFromFields, calendar, [fields, options]);\n  if (!IsTemporalYearMonth(result)) throw new TypeError('invalid result');\n  return result;\n}\n\nexport function CalendarMonthDayFromFields(\n  calendar: CalendarSlot,\n  fields: CalendarProtocolParams['monthDayFromFields'][0],\n  options?: CalendarProtocolParams['monthDayFromFields'][1]\n) {\n  if (typeof calendar === 'string') {\n    const TemporalCalendar = GetIntrinsic('%Temporal.Calendar%');\n    const calendarObj = new TemporalCalendar(calendar);\n    return Call(GetIntrinsic('%Temporal.Calendar.prototype.monthDayFromFields%'), calendarObj, [fields, options]);\n  }\n  const monthDayFromFields = GetMethod(calendar, 'monthDayFromFields');\n  let result = Call(monthDayFromFields, calendar, [fields, options]);\n  if (!IsTemporalMonthDay(result)) throw new TypeError('invalid result');\n  return result;\n}\n\ntype MaybeTimeZoneProtocol = Partial<\n  Pick<Temporal.TimeZoneProtocol, 'getOffsetNanosecondsFor' | 'getPossibleInstantsFor'>\n>;\nfunction ObjectImplementsTemporalTimeZoneProtocol(object: MaybeTimeZoneProtocol) {\n  if (IsTemporalTimeZone(object)) return true;\n  return 'getOffsetNanosecondsFor' in object && 'getPossibleInstantsFor' in object && 'id' in object;\n}\n\nexport function ToTemporalTimeZoneSlotValue(temporalTimeZoneLike: string): string;\nexport function ToTemporalTimeZoneSlotValue(temporalTimeZoneLike: Temporal.TimeZoneProtocol): Temporal.TimeZoneProtocol;\nexport function ToTemporalTimeZoneSlotValue(\n  temporalTimeZoneLike: Temporal.TimeZoneLike\n): string | Temporal.TimeZoneProtocol;\nexport function ToTemporalTimeZoneSlotValue(temporalTimeZoneLike: TimeZoneParams['from'][0]) {\n  if (IsObject(temporalTimeZoneLike)) {\n    if (IsTemporalZonedDateTime(temporalTimeZoneLike)) return GetSlot(temporalTimeZoneLike, TIME_ZONE);\n    if (!ObjectImplementsTemporalTimeZoneProtocol(temporalTimeZoneLike)) {\n      throw new TypeError('expected a Temporal.TimeZone or object implementing the Temporal.TimeZone protocol');\n    }\n    return temporalTimeZoneLike;\n  }\n  const identifier = ToString(temporalTimeZoneLike);\n  return ParseTemporalTimeZone(identifier);\n}\n\nexport function ToTemporalTimeZoneIdentifier(slotValue: TimeZoneSlot) {\n  if (typeof slotValue === 'string') return slotValue;\n  const result = slotValue.id;\n  if (typeof result !== 'string') throw new TypeError('timeZone.id should be a string');\n  return result;\n}\n\nexport function ToTemporalTimeZoneObject(slotValue: TimeZoneSlot) {\n  if (IsObject(slotValue)) return slotValue;\n  const TemporalTimeZone = GetIntrinsic('%Temporal.TimeZone%');\n  return new TemporalTimeZone(slotValue);\n}\n\nexport function TimeZoneEquals(one: string | Temporal.TimeZoneProtocol, two: string | Temporal.TimeZoneProtocol) {\n  if (one === two) return true;\n  const tz1 = ToTemporalTimeZoneIdentifier(one);\n  const tz2 = ToTemporalTimeZoneIdentifier(two);\n  return tz1 === tz2;\n}\n\nexport function TemporalDateTimeToDate(dateTime: Temporal.PlainDateTime) {\n  return CreateTemporalDate(\n    GetSlot(dateTime, ISO_YEAR),\n    GetSlot(dateTime, ISO_MONTH),\n    GetSlot(dateTime, ISO_DAY),\n    GetSlot(dateTime, CALENDAR)\n  );\n}\n\nexport function TemporalDateTimeToTime(dateTime: Temporal.PlainDateTime) {\n  const Time = GetIntrinsic('%Temporal.PlainTime%');\n  return new Time(\n    GetSlot(dateTime, ISO_HOUR),\n    GetSlot(dateTime, ISO_MINUTE),\n    GetSlot(dateTime, ISO_SECOND),\n    GetSlot(dateTime, ISO_MILLISECOND),\n    GetSlot(dateTime, ISO_MICROSECOND),\n    GetSlot(dateTime, ISO_NANOSECOND)\n  );\n}\n\nexport function GetOffsetNanosecondsFor(\n  timeZone: string | Temporal.TimeZoneProtocol,\n  instant: TimeZoneProtocolParams['getOffsetNanosecondsFor'][0],\n  getOffsetNanosecondsForParam?: Temporal.TimeZoneProtocol['getOffsetNanosecondsFor']\n) {\n  if (typeof timeZone === 'string') {\n    const TemporalTimeZone = GetIntrinsic('%Temporal.TimeZone%');\n    const timeZoneObject = new TemporalTimeZone(timeZone);\n    return Call(GetIntrinsic('%Temporal.TimeZone.prototype.getOffsetNanosecondsFor%'), timeZoneObject, [instant]);\n  }\n  const getOffsetNanosecondsFor = getOffsetNanosecondsForParam ?? GetMethod(timeZone, 'getOffsetNanosecondsFor');\n  const offsetNs = Call(getOffsetNanosecondsFor, timeZone, [instant]);\n  if (typeof offsetNs !== 'number') {\n    throw new TypeError('bad return from getOffsetNanosecondsFor');\n  }\n  if (!IsIntegralNumber(offsetNs) || MathAbs(offsetNs) >= 86400e9) {\n    throw new RangeError('out-of-range return from getOffsetNanosecondsFor');\n  }\n  return offsetNs;\n}\n\nexport function GetOffsetStringFor(timeZone: string | Temporal.TimeZoneProtocol, instant: Temporal.Instant) {\n  const offsetNs = GetOffsetNanosecondsFor(timeZone, instant);\n  return FormatTimeZoneOffsetString(offsetNs);\n}\n\nexport function GetPlainDateTimeFor(\n  timeZone: string | Temporal.TimeZoneProtocol,\n  instant: Temporal.Instant,\n  calendar: CalendarSlot\n) {\n  const ns = GetSlot(instant, EPOCHNANOSECONDS);\n  const offsetNs = GetOffsetNanosecondsFor(timeZone, instant);\n  let { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = GetISOPartsFromEpoch(ns);\n  ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = BalanceISODateTime(\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond + offsetNs\n  ));\n  return CreateTemporalDateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar);\n}\n\nexport function GetInstantFor(\n  timeZone: string | Temporal.TimeZoneProtocol,\n  dateTime: Temporal.PlainDateTime,\n  disambiguation: NonNullable<Temporal.ToInstantOptions['disambiguation']>\n) {\n  const possibleInstants = GetPossibleInstantsFor(timeZone, dateTime);\n  return DisambiguatePossibleInstants(possibleInstants, timeZone, dateTime, disambiguation);\n}\n\nfunction DisambiguatePossibleInstants(\n  possibleInstants: Temporal.Instant[],\n  timeZone: string | Temporal.TimeZoneProtocol,\n  dateTime: Temporal.PlainDateTime,\n  disambiguation: NonNullable<Temporal.ToInstantOptions['disambiguation']>\n) {\n  const Instant = GetIntrinsic('%Temporal.Instant%');\n  const numInstants = possibleInstants.length;\n\n  if (numInstants === 1) return possibleInstants[0];\n  if (numInstants) {\n    switch (disambiguation) {\n      case 'compatible':\n      // fall through because 'compatible' means 'earlier' for \"fall back\" transitions\n      case 'earlier':\n        return possibleInstants[0];\n      case 'later':\n        return possibleInstants[numInstants - 1];\n      case 'reject': {\n        throw new RangeError('multiple instants found');\n      }\n    }\n  }\n\n  const year = GetSlot(dateTime, ISO_YEAR);\n  const month = GetSlot(dateTime, ISO_MONTH);\n  const day = GetSlot(dateTime, ISO_DAY);\n  const hour = GetSlot(dateTime, ISO_HOUR);\n  const minute = GetSlot(dateTime, ISO_MINUTE);\n  const second = GetSlot(dateTime, ISO_SECOND);\n  const millisecond = GetSlot(dateTime, ISO_MILLISECOND);\n  const microsecond = GetSlot(dateTime, ISO_MICROSECOND);\n  const nanosecond = GetSlot(dateTime, ISO_NANOSECOND);\n  const utcns = GetUTCEpochNanoseconds(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n  if (utcns === null) throw new RangeError('DateTime outside of supported range');\n  const dayBefore = new Instant(JSBI.subtract(utcns, DAY_NANOS));\n  const dayAfter = new Instant(JSBI.add(utcns, DAY_NANOS));\n  const offsetBefore = GetOffsetNanosecondsFor(timeZone, dayBefore);\n  const offsetAfter = GetOffsetNanosecondsFor(timeZone, dayAfter);\n  const nanoseconds = offsetAfter - offsetBefore;\n  switch (disambiguation) {\n    case 'earlier': {\n      const calendar = GetSlot(dateTime, CALENDAR);\n      const PlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n      const earlier = AddDateTime(\n        year,\n        month,\n        day,\n        hour,\n        minute,\n        second,\n        millisecond,\n        microsecond,\n        nanosecond,\n        calendar,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        -nanoseconds,\n        undefined\n      );\n      const earlierPlainDateTime = new PlainDateTime(\n        earlier.year,\n        earlier.month,\n        earlier.day,\n        earlier.hour,\n        earlier.minute,\n        earlier.second,\n        earlier.millisecond,\n        earlier.microsecond,\n        earlier.nanosecond,\n        calendar\n      );\n      return GetPossibleInstantsFor(timeZone, earlierPlainDateTime)[0];\n    }\n    case 'compatible':\n    // fall through because 'compatible' means 'later' for \"spring forward\" transitions\n    case 'later': {\n      const calendar = GetSlot(dateTime, CALENDAR);\n      const PlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n      const later = AddDateTime(\n        year,\n        month,\n        day,\n        hour,\n        minute,\n        second,\n        millisecond,\n        microsecond,\n        nanosecond,\n        calendar,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        nanoseconds,\n        undefined\n      );\n      const laterPlainDateTime = new PlainDateTime(\n        later.year,\n        later.month,\n        later.day,\n        later.hour,\n        later.minute,\n        later.second,\n        later.millisecond,\n        later.microsecond,\n        later.nanosecond,\n        calendar\n      );\n      const possible = GetPossibleInstantsFor(timeZone, laterPlainDateTime);\n      return possible[possible.length - 1];\n    }\n    case 'reject': {\n      throw new RangeError('no such instant found');\n    }\n  }\n}\n\nfunction GetPossibleInstantsFor(\n  timeZone: string | Temporal.TimeZoneProtocol,\n  dateTime: TimeZoneProtocolParams['getPossibleInstantsFor'][0],\n  getPossibleInstantsForParam?: Temporal.TimeZoneProtocol['getPossibleInstantsFor']\n) {\n  if (typeof timeZone === 'string') {\n    const TemporalTimeZone = GetIntrinsic('%Temporal.TimeZone%');\n    const timeZoneObject = new TemporalTimeZone(timeZone);\n    return Call(GetIntrinsic('%Temporal.TimeZone.prototype.getPossibleInstantsFor%'), timeZoneObject, [dateTime]);\n  }\n  const getPossibleInstantsFor = getPossibleInstantsForParam ?? GetMethod(timeZone, 'getPossibleInstantsFor');\n  const possibleInstants = Call(getPossibleInstantsFor, timeZone, [dateTime]);\n  const result: Temporal.Instant[] = [];\n  for (const instant of possibleInstants) {\n    if (!IsTemporalInstant(instant)) {\n      throw new TypeError('bad return from getPossibleInstantsFor');\n    }\n    ArrayPrototypePush.call(result, instant);\n  }\n  return result;\n}\n\nexport function ISOYearString(year: number) {\n  let yearString;\n  if (year < 0 || year > 9999) {\n    const sign = year < 0 ? '-' : '+';\n    const yearNumber = MathAbs(year);\n    yearString = sign + `000000${yearNumber}`.slice(-6);\n  } else {\n    yearString = `0000${year}`.slice(-4);\n  }\n  return yearString;\n}\n\nexport function ISODateTimePartString(part: number) {\n  return `00${part}`.slice(-2);\n}\nexport function FormatSecondsStringPart(\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number,\n  precision: ReturnType<typeof ToSecondsStringPrecisionRecord>['precision']\n) {\n  if (precision === 'minute') return '';\n\n  const secs = `:${ISODateTimePartString(second)}`;\n  let fractionNumber = millisecond * 1e6 + microsecond * 1e3 + nanosecond;\n  let fraction: string;\n\n  if (precision === 'auto') {\n    if (fractionNumber === 0) return secs;\n    fraction = `${fractionNumber}`.padStart(9, '0');\n    while (fraction[fraction.length - 1] === '0') fraction = fraction.slice(0, -1);\n  } else {\n    if (precision === 0) return secs;\n    fraction = `${fractionNumber}`.padStart(9, '0').slice(0, precision);\n  }\n  return `${secs}.${fraction}`;\n}\n\nexport function TemporalInstantToString(\n  instant: Temporal.Instant,\n  timeZone: string | Temporal.TimeZoneProtocol | undefined,\n  precision: ReturnType<typeof ToSecondsStringPrecisionRecord>['precision']\n) {\n  let outputTimeZone = timeZone;\n  if (outputTimeZone === undefined) outputTimeZone = 'UTC';\n  const dateTime = GetPlainDateTimeFor(outputTimeZone, instant, 'iso8601');\n  const year = ISOYearString(GetSlot(dateTime, ISO_YEAR));\n  const month = ISODateTimePartString(GetSlot(dateTime, ISO_MONTH));\n  const day = ISODateTimePartString(GetSlot(dateTime, ISO_DAY));\n  const hour = ISODateTimePartString(GetSlot(dateTime, ISO_HOUR));\n  const minute = ISODateTimePartString(GetSlot(dateTime, ISO_MINUTE));\n  const seconds = FormatSecondsStringPart(\n    GetSlot(dateTime, ISO_SECOND),\n    GetSlot(dateTime, ISO_MILLISECOND),\n    GetSlot(dateTime, ISO_MICROSECOND),\n    GetSlot(dateTime, ISO_NANOSECOND),\n    precision\n  );\n  let timeZoneString = 'Z';\n  if (timeZone !== undefined) {\n    const offsetNs = GetOffsetNanosecondsFor(outputTimeZone, instant);\n    timeZoneString = FormatISOTimeZoneOffsetString(offsetNs);\n  }\n  return `${year}-${month}-${day}T${hour}:${minute}${seconds}${timeZoneString}`;\n}\n\ninterface ToStringOptions {\n  unit: ReturnType<typeof ToSecondsStringPrecisionRecord>['unit'];\n  increment: number;\n  roundingMode: ReturnType<typeof ToTemporalRoundingMode>;\n}\n\nexport function TemporalDurationToString(\n  duration: Temporal.Duration,\n  precision: Temporal.ToStringPrecisionOptions['fractionalSecondDigits'] = 'auto',\n  options: ToStringOptions | undefined = undefined\n) {\n  function formatNumber(num: number) {\n    if (num <= NumberMaxSafeInteger) return num.toString(10);\n    return JSBI.BigInt(num).toString(10);\n  }\n\n  const years = GetSlot(duration, YEARS);\n  const months = GetSlot(duration, MONTHS);\n  const weeks = GetSlot(duration, WEEKS);\n  const days = GetSlot(duration, DAYS);\n  const hours = GetSlot(duration, HOURS);\n  const minutes = GetSlot(duration, MINUTES);\n  let seconds = GetSlot(duration, SECONDS);\n  let ms = GetSlot(duration, MILLISECONDS);\n  let s = GetSlot(duration, MICROSECONDS);\n  let ns = GetSlot(duration, NANOSECONDS);\n  const sign = DurationSign(years, months, weeks, days, hours, minutes, seconds, ms, s, ns);\n\n  if (options) {\n    const { unit, increment, roundingMode } = options;\n    ({\n      seconds,\n      milliseconds: ms,\n      microseconds: s,\n      nanoseconds: ns\n    } = RoundDuration(0, 0, 0, 0, 0, 0, seconds, ms, s, ns, increment, unit, roundingMode));\n  }\n\n  const dateParts: string[] = [];\n  if (years) dateParts.push(`${formatNumber(MathAbs(years))}Y`);\n  if (months) dateParts.push(`${formatNumber(MathAbs(months))}M`);\n  if (weeks) dateParts.push(`${formatNumber(MathAbs(weeks))}W`);\n  if (days) dateParts.push(`${formatNumber(MathAbs(days))}D`);\n\n  const timeParts: string[] = [];\n  if (hours) timeParts.push(`${formatNumber(MathAbs(hours))}H`);\n  if (minutes) timeParts.push(`${formatNumber(MathAbs(minutes))}M`);\n\n  const secondParts: string[] = [];\n  let total = TotalDurationNanoseconds(0, 0, 0, seconds, ms, s, ns, 0);\n  let nsBigInt: JSBI, sBigInt: JSBI, msBigInt: JSBI, secondsBigInt: JSBI;\n  ({ quotient: total, remainder: nsBigInt } = divmod(total, THOUSAND));\n  ({ quotient: total, remainder: sBigInt } = divmod(total, THOUSAND));\n  ({ quotient: secondsBigInt, remainder: msBigInt } = divmod(total, THOUSAND));\n  const fraction =\n    MathAbs(JSBI.toNumber(msBigInt)) * 1e6 + MathAbs(JSBI.toNumber(sBigInt)) * 1e3 + MathAbs(JSBI.toNumber(nsBigInt));\n  let decimalPart;\n  if (precision === 'auto') {\n    if (fraction !== 0) {\n      decimalPart = `${fraction}`.padStart(9, '0');\n      while (decimalPart[decimalPart.length - 1] === '0') {\n        decimalPart = decimalPart.slice(0, -1);\n      }\n    }\n  } else if (precision !== 0) {\n    decimalPart = `${fraction}`.padStart(9, '0').slice(0, precision);\n  }\n  if (decimalPart) secondParts.unshift('.', decimalPart);\n  if (!JSBI.equal(secondsBigInt, ZERO) || secondParts.length || precision !== 'auto') {\n    secondParts.unshift(abs(secondsBigInt).toString());\n  }\n  if (secondParts.length) timeParts.push(`${secondParts.join('')}S`);\n  if (timeParts.length) timeParts.unshift('T');\n  if (!dateParts.length && !timeParts.length) return 'PT0S';\n  return `${sign < 0 ? '-' : ''}P${dateParts.join('')}${timeParts.join('')}`;\n}\n\nexport function TemporalDateToString(\n  date: Temporal.PlainDate,\n  showCalendar: Temporal.ShowCalendarOption['calendarName'] = 'auto'\n) {\n  const year = ISOYearString(GetSlot(date, ISO_YEAR));\n  const month = ISODateTimePartString(GetSlot(date, ISO_MONTH));\n  const day = ISODateTimePartString(GetSlot(date, ISO_DAY));\n  const calendar = MaybeFormatCalendarAnnotation(GetSlot(date, CALENDAR), showCalendar);\n  return `${year}-${month}-${day}${calendar}`;\n}\n\nexport function TemporalDateTimeToString(\n  dateTime: Temporal.PlainDateTime,\n  precision: ReturnType<typeof ToSecondsStringPrecisionRecord>['precision'],\n  showCalendar: ReturnType<typeof ToCalendarNameOption> = 'auto',\n  options: ToStringOptions | undefined = undefined\n) {\n  let year = GetSlot(dateTime, ISO_YEAR);\n  let month = GetSlot(dateTime, ISO_MONTH);\n  let day = GetSlot(dateTime, ISO_DAY);\n  let hour = GetSlot(dateTime, ISO_HOUR);\n  let minute = GetSlot(dateTime, ISO_MINUTE);\n  let second = GetSlot(dateTime, ISO_SECOND);\n  let millisecond = GetSlot(dateTime, ISO_MILLISECOND);\n  let microsecond = GetSlot(dateTime, ISO_MICROSECOND);\n  let nanosecond = GetSlot(dateTime, ISO_NANOSECOND);\n\n  if (options) {\n    const { unit, increment, roundingMode } = options;\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = RoundISODateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      increment,\n      unit,\n      roundingMode\n    ));\n  }\n\n  const yearString = ISOYearString(year);\n  const monthString = ISODateTimePartString(month);\n  const dayString = ISODateTimePartString(day);\n  const hourString = ISODateTimePartString(hour);\n  const minuteString = ISODateTimePartString(minute);\n  const secondsString = FormatSecondsStringPart(second, millisecond, microsecond, nanosecond, precision);\n  const calendar = MaybeFormatCalendarAnnotation(GetSlot(dateTime, CALENDAR), showCalendar);\n  return `${yearString}-${monthString}-${dayString}T${hourString}:${minuteString}${secondsString}${calendar}`;\n}\n\nexport function TemporalMonthDayToString(\n  monthDay: Temporal.PlainMonthDay,\n  showCalendar: Temporal.ShowCalendarOption['calendarName'] = 'auto'\n) {\n  const month = ISODateTimePartString(GetSlot(monthDay, ISO_MONTH));\n  const day = ISODateTimePartString(GetSlot(monthDay, ISO_DAY));\n  let resultString = `${month}-${day}`;\n  const calendar = GetSlot(monthDay, CALENDAR);\n  const calendarID = ToTemporalCalendarIdentifier(calendar);\n  if (showCalendar === 'always' || showCalendar === 'critical' || calendarID !== 'iso8601') {\n    const year = ISOYearString(GetSlot(monthDay, ISO_YEAR));\n    resultString = `${year}-${resultString}`;\n  }\n  const calendarString = FormatCalendarAnnotation(calendarID, showCalendar);\n  if (calendarString) resultString += calendarString;\n  return resultString;\n}\n\nexport function TemporalYearMonthToString(\n  yearMonth: Temporal.PlainYearMonth,\n  showCalendar: Temporal.ShowCalendarOption['calendarName'] = 'auto'\n) {\n  const year = ISOYearString(GetSlot(yearMonth, ISO_YEAR));\n  const month = ISODateTimePartString(GetSlot(yearMonth, ISO_MONTH));\n  let resultString = `${year}-${month}`;\n  const calendar = GetSlot(yearMonth, CALENDAR);\n  const calendarID = ToTemporalCalendarIdentifier(calendar);\n  if (showCalendar === 'always' || showCalendar === 'critical' || calendarID !== 'iso8601') {\n    const day = ISODateTimePartString(GetSlot(yearMonth, ISO_DAY));\n    resultString += `-${day}`;\n  }\n  const calendarString = FormatCalendarAnnotation(calendarID, showCalendar);\n  if (calendarString) resultString += calendarString;\n  return resultString;\n}\n\nexport function TemporalZonedDateTimeToString(\n  zdt: Temporal.ZonedDateTime,\n  precision: ReturnType<typeof ToSecondsStringPrecisionRecord>['precision'],\n  showCalendar: ReturnType<typeof ToCalendarNameOption> = 'auto',\n  showTimeZone: ReturnType<typeof ToTimeZoneNameOption> = 'auto',\n  showOffset: ReturnType<typeof ToShowOffsetOption> = 'auto',\n  options: ToStringOptions | undefined = undefined\n) {\n  let instant = GetSlot(zdt, INSTANT);\n\n  if (options) {\n    const { unit, increment, roundingMode } = options;\n    const ns = RoundInstant(GetSlot(zdt, EPOCHNANOSECONDS), increment, unit, roundingMode);\n    const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n    instant = new TemporalInstant(ns);\n  }\n\n  const tz = GetSlot(zdt, TIME_ZONE);\n  const dateTime = GetPlainDateTimeFor(tz, instant, 'iso8601');\n\n  const year = ISOYearString(GetSlot(dateTime, ISO_YEAR));\n  const month = ISODateTimePartString(GetSlot(dateTime, ISO_MONTH));\n  const day = ISODateTimePartString(GetSlot(dateTime, ISO_DAY));\n  const hour = ISODateTimePartString(GetSlot(dateTime, ISO_HOUR));\n  const minute = ISODateTimePartString(GetSlot(dateTime, ISO_MINUTE));\n  const seconds = FormatSecondsStringPart(\n    GetSlot(dateTime, ISO_SECOND),\n    GetSlot(dateTime, ISO_MILLISECOND),\n    GetSlot(dateTime, ISO_MICROSECOND),\n    GetSlot(dateTime, ISO_NANOSECOND),\n    precision\n  );\n  let result = `${year}-${month}-${day}T${hour}:${minute}${seconds}`;\n  if (showOffset !== 'never') {\n    const offsetNs = GetOffsetNanosecondsFor(tz, instant);\n    result += FormatISOTimeZoneOffsetString(offsetNs);\n  }\n  if (showTimeZone !== 'never') {\n    const identifier = ToTemporalTimeZoneIdentifier(tz);\n    const flag = showTimeZone === 'critical' ? '!' : '';\n    result += `[${flag}${identifier}]`;\n  }\n  result += MaybeFormatCalendarAnnotation(GetSlot(zdt, CALENDAR), showCalendar);\n  return result;\n}\n\nexport function IsTimeZoneOffsetString(string: string) {\n  return OFFSET.test(StringCtor(string));\n}\n\nexport function ParseTimeZoneOffsetString(string: string): number {\n  const match = OFFSET.exec(StringCtor(string));\n  if (!match) {\n    throw new RangeError(`invalid time zone offset: ${string}`);\n  }\n  const sign = match[1] === '-' || match[1] === '\\u2212' ? -1 : +1;\n  const hours = +match[2];\n  const minutes = +(match[3] || 0);\n  const seconds = +(match[4] || 0);\n  const nanoseconds = +((match[5] || 0) + '000000000').slice(0, 9);\n  return sign * (((hours * 60 + minutes) * 60 + seconds) * 1e9 + nanoseconds);\n}\n\nexport function GetCanonicalTimeZoneIdentifier(timeZoneIdentifier: string): string {\n  if (IsTimeZoneOffsetString(timeZoneIdentifier)) {\n    const offsetNs = ParseTimeZoneOffsetString(timeZoneIdentifier);\n    return FormatTimeZoneOffsetString(offsetNs);\n  }\n  const formatter = getIntlDateTimeFormatEnUsForTimeZone(StringCtor(timeZoneIdentifier));\n  return formatter.resolvedOptions().timeZone;\n}\n\nexport function GetNamedTimeZoneOffsetNanoseconds(id: string, epochNanoseconds: JSBI) {\n  const { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } =\n    GetNamedTimeZoneDateTimeParts(id, epochNanoseconds);\n\n  // The pattern of leap years in the ISO 8601 calendar repeats every 400\n  // years. To avoid overflowing at the edges of the range, we reduce the year\n  // to the remainder after dividing by 400, and then add back all the\n  // nanoseconds from the multiples of 400 years at the end.\n  const reducedYear = year % 400;\n  const yearCycles = (year - reducedYear) / 400;\n  const nsIn400YearCycle = JSBI.multiply(JSBI.BigInt(400 * 365 + 97), DAY_NANOS);\n\n  const reducedUTC = GetUTCEpochNanoseconds(\n    reducedYear,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond\n  );\n  assertExists(reducedUTC);\n  const utc = JSBI.add(reducedUTC, JSBI.multiply(nsIn400YearCycle, JSBI.BigInt(yearCycles)));\n  return JSBI.toNumber(JSBI.subtract(utc, epochNanoseconds));\n}\n\nfunction FormatTimeZoneOffsetString(offsetNanosecondsParam: number): string {\n  const sign = offsetNanosecondsParam < 0 ? '-' : '+';\n  const offsetNanoseconds = MathAbs(offsetNanosecondsParam);\n  const nanoseconds = offsetNanoseconds % 1e9;\n  const seconds = MathFloor(offsetNanoseconds / 1e9) % 60;\n  const minutes = MathFloor(offsetNanoseconds / 60e9) % 60;\n  const hours = MathFloor(offsetNanoseconds / 3600e9);\n\n  const hourString = ISODateTimePartString(hours);\n  const minuteString = ISODateTimePartString(minutes);\n  const secondString = ISODateTimePartString(seconds);\n  let post = '';\n  if (nanoseconds) {\n    let fraction = `${nanoseconds}`.padStart(9, '0');\n    while (fraction[fraction.length - 1] === '0') fraction = fraction.slice(0, -1);\n    post = `:${secondString}.${fraction}`;\n  } else if (seconds) {\n    post = `:${secondString}`;\n  }\n  return `${sign}${hourString}:${minuteString}${post}`;\n}\n\nfunction FormatISOTimeZoneOffsetString(offsetNanosecondsParam: number): string {\n  let offsetNanoseconds = JSBI.toNumber(\n    RoundNumberToIncrement(JSBI.BigInt(offsetNanosecondsParam), MINUTE_NANOS, 'halfExpand')\n  );\n  const sign = offsetNanoseconds < 0 ? '-' : '+';\n  offsetNanoseconds = MathAbs(offsetNanoseconds);\n  const minutes = (offsetNanoseconds / 60e9) % 60;\n  const hours = MathFloor(offsetNanoseconds / 3600e9);\n\n  const hourString = ISODateTimePartString(hours);\n  const minuteString = ISODateTimePartString(minutes);\n  return `${sign}${hourString}:${minuteString}`;\n}\nexport function GetUTCEpochNanoseconds(\n  year: number,\n  month: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number\n) {\n  // Note: Date.UTC() interprets one and two-digit years as being in the\n  // 20th century, so don't use it\n  const legacyDate = new Date();\n  legacyDate.setUTCHours(hour, minute, second, millisecond);\n  legacyDate.setUTCFullYear(year, month - 1, day);\n  const ms = legacyDate.getTime();\n  if (NumberIsNaN(ms)) return null;\n  let ns = JSBI.multiply(JSBI.BigInt(ms), MILLION);\n  ns = JSBI.add(ns, JSBI.multiply(JSBI.BigInt(microsecond), THOUSAND));\n  ns = JSBI.add(ns, JSBI.BigInt(nanosecond));\n  if (JSBI.lessThan(ns, NS_MIN) || JSBI.greaterThan(ns, NS_MAX)) return null;\n  return ns;\n}\n\nfunction GetISOPartsFromEpoch(epochNanoseconds: JSBI) {\n  const { quotient, remainder } = divmod(epochNanoseconds, MILLION);\n  let epochMilliseconds = JSBI.toNumber(quotient);\n  let nanos = JSBI.toNumber(remainder);\n  if (nanos < 0) {\n    nanos += 1e6;\n    epochMilliseconds -= 1;\n  }\n  const microsecond = MathFloor(nanos / 1e3) % 1e3;\n  const nanosecond = nanos % 1e3;\n\n  const item = new Date(epochMilliseconds);\n  const year = item.getUTCFullYear();\n  const month = item.getUTCMonth() + 1;\n  const day = item.getUTCDate();\n  const hour = item.getUTCHours();\n  const minute = item.getUTCMinutes();\n  const second = item.getUTCSeconds();\n  const millisecond = item.getUTCMilliseconds();\n\n  return { epochMilliseconds, year, month, day, hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\n// ts-prune-ignore-next TODO: remove this after tests are converted to TS\nexport function GetNamedTimeZoneDateTimeParts(id: string, epochNanoseconds: JSBI) {\n  const { epochMilliseconds, millisecond, microsecond, nanosecond } = GetISOPartsFromEpoch(epochNanoseconds);\n  const { year, month, day, hour, minute, second } = GetFormatterParts(id, epochMilliseconds);\n  return BalanceISODateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n}\n\nfunction maxJSBI(one: JSBI, two: JSBI) {\n  return JSBI.lessThan(one, two) ? two : one;\n}\n\n/**\n * Our best guess at how far in advance new rules will be put into the TZDB for\n * future offset transitions. We'll pick 10 years but can always revise it if\n * we find that countries are being unusually proactive in their announcing\n * of offset changes.\n */\nfunction afterLatestPossibleTzdbRuleChange() {\n  return JSBI.add(SystemUTCEpochNanoSeconds(), ABOUT_TEN_YEARS_NANOS);\n}\n\nexport function GetNamedTimeZoneNextTransition(id: string, epochNanoseconds: JSBI): JSBI | null {\n  if (JSBI.lessThan(epochNanoseconds, BEFORE_FIRST_OFFSET_TRANSITION)) {\n    return GetNamedTimeZoneNextTransition(id, BEFORE_FIRST_OFFSET_TRANSITION);\n  }\n  // Decide how far in the future after `epochNanoseconds` we'll look for an\n  // offset change. There are two cases:\n  // 1. If it's a past date (or a date in the near future) then it's possible\n  //    that the time zone may have newly added DST in the next few years. So\n  //    we'll have to look from the provided time until a few years after the\n  //    current system time. (Changes to DST policy are usually announced a few\n  //    years in the future.) Note that the first DST anywhere started in 1847,\n  //    so we'll start checks in 1847 instead of wasting cycles on years where\n  //    there will never be transitions.\n  // 2. If it's a future date beyond the next few years, then we'll just assume\n  //    that the latest DST policy in TZDB will still be in effect.  In this\n  //    case, we only need to look one year in the future to see if there are\n  //    any DST transitions.  We actually only need to look 9-10 months because\n  //    DST has two transitions per year, but we'll use a year just to be safe.\n  const oneYearLater = JSBI.add(epochNanoseconds, ABOUT_ONE_YEAR_NANOS);\n  const uppercap = maxJSBI(afterLatestPossibleTzdbRuleChange(), oneYearLater);\n  // The first transition (in any timezone) recorded in the TZDB was in 1847, so\n  // start there if an earlier date is supplied.\n  let leftNanos = maxJSBI(BEFORE_FIRST_OFFSET_TRANSITION, epochNanoseconds);\n  const leftOffsetNs = GetNamedTimeZoneOffsetNanoseconds(id, leftNanos);\n  let rightNanos = leftNanos;\n  let rightOffsetNs = leftOffsetNs;\n  while (leftOffsetNs === rightOffsetNs && JSBI.lessThan(JSBI.BigInt(leftNanos), uppercap)) {\n    rightNanos = JSBI.add(leftNanos, TWO_WEEKS_NANOS);\n    if (JSBI.greaterThan(rightNanos, NS_MAX)) return null;\n    rightOffsetNs = GetNamedTimeZoneOffsetNanoseconds(id, rightNanos);\n    if (leftOffsetNs === rightOffsetNs) {\n      leftNanos = rightNanos;\n    }\n  }\n  if (leftOffsetNs === rightOffsetNs) return null;\n  const result = bisect(\n    (epochNs: JSBI) => GetNamedTimeZoneOffsetNanoseconds(id, epochNs),\n    leftNanos,\n    rightNanos,\n    leftOffsetNs,\n    rightOffsetNs\n  );\n  return result;\n}\n\nexport function GetNamedTimeZonePreviousTransition(id: string, epochNanoseconds: JSBI): JSBI | null {\n  // If a time zone uses DST (at the time of `epochNanoseconds`), then we only\n  // have to look back one year to find a transition. But if it doesn't use DST,\n  // then we need to look all the way back to 1847 (the earliest rule in the\n  // TZDB) to see if it had other offset transitions in the past. Looping back\n  // from a far-future date to 1847 is very slow (minutes of 100% CPU!), and is\n  // also unnecessary because DST rules aren't put into the TZDB more than a few\n  // years in the future because the political changes in time zones happen with\n  // only a few years' warning. Therefore, if a far-future date is provided,\n  // then we'll run the check in two parts:\n  // 1. First, we'll look back for up to one year to see if the latest TZDB\n  //    rules have DST.\n  // 2. If not, then we'll \"fast-reverse\" back to a few years later than the\n  //    current system time, and then look back to 1847. This reduces the\n  //    worst-case loop from 273K years to 175 years, for a ~1500x improvement\n  //    in worst-case perf.\n  const afterLatestRule = afterLatestPossibleTzdbRuleChange();\n  const isFarFuture = JSBI.greaterThan(epochNanoseconds, afterLatestRule);\n  const lowercap = isFarFuture ? JSBI.subtract(epochNanoseconds, ABOUT_ONE_YEAR_NANOS) : BEFORE_FIRST_OFFSET_TRANSITION;\n\n  // TODO: proposal-temporal polyfill has different code for very similar\n  // optimizations as above, as well as in GetNamedTimeZonePreviousTransition.\n  // We should figure out if we should change one polyfill to match the other.\n\n  // We assume most time zones either have regular DST rules that extend\n  // indefinitely into the future, or they have no DST transitions between now\n  // and next year. Africa/Casablanca and Africa/El_Aaiun are unique cases\n  // that fit neither of these. Their irregular DST transitions are\n  // precomputed until 2087 in the current time zone database, so requesting\n  // the previous transition for an instant far in the future may take an\n  // extremely long time as it loops backward 2 weeks at a time.\n  if (id === 'Africa/Casablanca' || id === 'Africa/El_Aaiun') {\n    const lastPrecomputed = GetSlot(ToTemporalInstant('2088-01-01T00Z'), EPOCHNANOSECONDS);\n    if (JSBI.lessThan(lastPrecomputed, epochNanoseconds)) {\n      return GetNamedTimeZonePreviousTransition(id, lastPrecomputed);\n    }\n  }\n\n  let rightNanos = JSBI.subtract(epochNanoseconds, ONE);\n  if (JSBI.lessThan(rightNanos, BEFORE_FIRST_OFFSET_TRANSITION)) return null;\n  const rightOffsetNs = GetNamedTimeZoneOffsetNanoseconds(id, rightNanos);\n  let leftNanos = rightNanos;\n  let leftOffsetNs = rightOffsetNs;\n  while (rightOffsetNs === leftOffsetNs && JSBI.greaterThan(rightNanos, lowercap)) {\n    leftNanos = JSBI.subtract(rightNanos, TWO_WEEKS_NANOS);\n    if (JSBI.lessThan(leftNanos, BEFORE_FIRST_OFFSET_TRANSITION)) return null;\n    leftOffsetNs = GetNamedTimeZoneOffsetNanoseconds(id, leftNanos);\n    if (rightOffsetNs === leftOffsetNs) {\n      rightNanos = leftNanos;\n    }\n  }\n  if (rightOffsetNs === leftOffsetNs) {\n    if (isFarFuture) {\n      // There was no DST after looking back one year, which means that the most\n      // recent TZDB rules don't have any recurring transitions. To check for\n      // transitions in older rules, back up to a few years after the current\n      // date and then look all the way back to 1847. Note that we move back one\n      // day from the latest possible rule so that when the recursion runs it\n      // won't consider the new time to be \"far future\" because the system clock\n      // has advanced in the meantime.\n      const newTimeToCheck = JSBI.subtract(afterLatestRule, DAY_NANOS);\n      return GetNamedTimeZonePreviousTransition(id, newTimeToCheck);\n    }\n    return null;\n  }\n  const result = bisect(\n    (epochNs: JSBI) => GetNamedTimeZoneOffsetNanoseconds(id, epochNs),\n    leftNanos,\n    rightNanos,\n    leftOffsetNs,\n    rightOffsetNs\n  );\n  return result;\n}\n\n// ts-prune-ignore-next TODO: remove this after tests are converted to TS\nexport function parseFromEnUsFormat(datetime: string) {\n  const parts = datetime.split(/[^\\w]+/);\n\n  if (parts.length !== 7) {\n    throw new RangeError(`expected 7 parts in \"${datetime}`);\n  }\n\n  const month = +parts[0];\n  const day = +parts[1];\n  let year = +parts[2];\n  const era = parts[3].toUpperCase();\n  if (era === 'B' || era === 'BC') {\n    year = -year + 1;\n  } else if (era !== 'A' && era !== 'AD') {\n    throw new RangeError(`Unknown era ${era} in \"${datetime}`);\n  }\n  let hour = +parts[4];\n  if (hour === 24) {\n    // bugs.chromium.org/p/chromium/issues/detail?id=1045791\n    hour = 0;\n  }\n  const minute = +parts[5];\n  const second = +parts[6];\n\n  if (\n    !NumberIsFinite(year) ||\n    !NumberIsFinite(month) ||\n    !NumberIsFinite(day) ||\n    !NumberIsFinite(hour) ||\n    !NumberIsFinite(minute) ||\n    !NumberIsFinite(second)\n  ) {\n    throw new RangeError(`Invalid number in \"${datetime}`);\n  }\n\n  return { year, month, day, hour, minute, second };\n}\n\n// ts-prune-ignore-next TODO: remove this after tests are converted to TS\nexport function GetFormatterParts(timeZone: string, epochMilliseconds: number) {\n  const formatter = getIntlDateTimeFormatEnUsForTimeZone(timeZone);\n  // Using `format` instead of `formatToParts` for compatibility with older clients\n  const datetime = formatter.format(new Date(epochMilliseconds));\n  return parseFromEnUsFormat(datetime);\n}\n\nexport function GetNamedTimeZoneEpochNanoseconds(\n  id: string,\n  year: number,\n  month: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number\n) {\n  const ns = GetUTCEpochNanoseconds(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond);\n  if (ns === null) throw new RangeError('DateTime outside of supported range');\n  let nsEarlier = JSBI.subtract(ns, DAY_NANOS);\n  if (JSBI.lessThan(nsEarlier, NS_MIN)) nsEarlier = ns;\n  let nsLater = JSBI.add(ns, DAY_NANOS);\n  if (JSBI.greaterThan(nsLater, NS_MAX)) nsLater = ns;\n  const earliest = GetNamedTimeZoneOffsetNanoseconds(id, nsEarlier);\n  const latest = GetNamedTimeZoneOffsetNanoseconds(id, nsLater);\n  const found = earliest === latest ? [earliest] : [earliest, latest];\n  return found\n    .map((offsetNanoseconds) => {\n      const epochNanoseconds = JSBI.subtract(ns, JSBI.BigInt(offsetNanoseconds));\n      const parts = GetNamedTimeZoneDateTimeParts(id, epochNanoseconds);\n      if (\n        year !== parts.year ||\n        month !== parts.month ||\n        day !== parts.day ||\n        hour !== parts.hour ||\n        minute !== parts.minute ||\n        second !== parts.second ||\n        millisecond !== parts.millisecond ||\n        microsecond !== parts.microsecond ||\n        nanosecond !== parts.nanosecond\n      ) {\n        return undefined;\n      }\n      return epochNanoseconds;\n    })\n    .filter((x) => x !== undefined) as JSBI[];\n}\n\nexport function LeapYear(year: number) {\n  if (undefined === year) return false;\n  const isDiv4 = year % 4 === 0;\n  const isDiv100 = year % 100 === 0;\n  const isDiv400 = year % 400 === 0;\n  return isDiv4 && (!isDiv100 || isDiv400);\n}\n\nexport function ISODaysInMonth(year: number, month: number) {\n  const DoM = {\n    standard: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    leapyear: [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n  };\n  return DoM[LeapYear(year) ? 'leapyear' : 'standard'][month - 1];\n}\n\nexport function DayOfWeek(year: number, month: number, day: number) {\n  const m = month + (month < 3 ? 10 : -2);\n  const Y = year - (month < 3 ? 1 : 0);\n\n  const c = MathFloor(Y / 100);\n  const y = Y - c * 100;\n  const d = day;\n\n  const pD = d;\n  const pM = MathFloor(2.6 * m - 0.2);\n  const pY = y + MathFloor(y / 4);\n  const pC = MathFloor(c / 4) - 2 * c;\n\n  const dow = (pD + pM + pY + pC) % 7;\n\n  return dow + (dow <= 0 ? 7 : 0);\n}\n\nexport function DayOfYear(year: number, month: number, day: number) {\n  let days = day;\n  for (let m = month - 1; m > 0; m--) {\n    days += ISODaysInMonth(year, m);\n  }\n  return days;\n}\n\nexport function WeekOfYear(year: number, month: number, day: number) {\n  const doy = DayOfYear(year, month, day);\n  const dow = DayOfWeek(year, month, day) || 7;\n  const doj = DayOfWeek(year, 1, 1);\n\n  const week = MathFloor((doy - dow + 10) / 7);\n\n  if (week < 1) {\n    if (doj === 5 || (doj === 6 && LeapYear(year - 1))) {\n      return { week: 53, year: year - 1 };\n    } else {\n      return { week: 52, year: year - 1 };\n    }\n  }\n  if (week === 53) {\n    if ((LeapYear(year) ? 366 : 365) - doy < 4 - dow) {\n      return { week: 1, year: year + 1 };\n    }\n  }\n\n  return { week, year };\n}\n\nexport function DurationSign(\n  y: number,\n  mon: number,\n  w: number,\n  d: number,\n  h: number,\n  min: number,\n  s: number,\n  ms: number,\n  s: number,\n  ns: number\n) {\n  for (const prop of [y, mon, w, d, h, min, s, ms, s, ns]) {\n    if (prop !== 0) return prop < 0 ? -1 : 1;\n  }\n  return 0;\n}\n\nfunction BalanceISOYearMonth(yearParam: number, monthParam: number) {\n  let year = yearParam;\n  let month = monthParam;\n  if (!NumberIsFinite(year) || !NumberIsFinite(month)) throw new RangeError('infinity is out of range');\n  month -= 1;\n  year += MathFloor(month / 12);\n  month %= 12;\n  if (month < 0) month += 12;\n  month += 1;\n  return { year, month };\n}\n\nfunction BalanceISODate(yearParam: number, monthParam: number, dayParam: number) {\n  let year = yearParam;\n  let month = monthParam;\n  let day = dayParam;\n  if (!NumberIsFinite(day)) throw new RangeError('infinity is out of range');\n  ({ year, month } = BalanceISOYearMonth(year, month));\n\n  // The pattern of leap years in the ISO 8601 calendar repeats every 400\n  // years. So if we have more than 400 years in days, there's no need to\n  // convert days to a year 400 times. We can convert a multiple of 400 all at\n  // once.\n  const daysIn400YearCycle = 400 * 365 + 97;\n  if (MathAbs(day) > daysIn400YearCycle) {\n    const nCycles = MathTrunc(day / daysIn400YearCycle);\n    year += 400 * nCycles;\n    day -= nCycles * daysIn400YearCycle;\n  }\n\n  let daysInYear = 0;\n  let testYear = month > 2 ? year : year - 1;\n  while (((daysInYear = LeapYear(testYear) ? 366 : 365), day < -daysInYear)) {\n    year -= 1;\n    testYear -= 1;\n    day += daysInYear;\n  }\n  testYear += 1;\n  while (((daysInYear = LeapYear(testYear) ? 366 : 365), day > daysInYear)) {\n    year += 1;\n    testYear += 1;\n    day -= daysInYear;\n  }\n\n  while (day < 1) {\n    ({ year, month } = BalanceISOYearMonth(year, month - 1));\n    day += ISODaysInMonth(year, month);\n  }\n  while (day > ISODaysInMonth(year, month)) {\n    day -= ISODaysInMonth(year, month);\n    ({ year, month } = BalanceISOYearMonth(year, month + 1));\n  }\n\n  return { year, month, day };\n}\n\nfunction BalanceISODateTime(\n  yearParam: number,\n  monthParam: number,\n  dayParam: number,\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number\n) {\n  const { deltaDays, hour, minute, second, millisecond, microsecond, nanosecond } = BalanceTime(\n    hourParam,\n    minuteParam,\n    secondParam,\n    millisecondParam,\n    microsecondParam,\n    nanosecondParam\n  );\n  const { year, month, day } = BalanceISODate(yearParam, monthParam, dayParam + deltaDays);\n  return { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nfunction BalanceTime(\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number\n) {\n  let hour = JSBI.BigInt(hourParam);\n  let minute = JSBI.BigInt(minuteParam);\n  let second = JSBI.BigInt(secondParam);\n  let millisecond = JSBI.BigInt(millisecondParam);\n  let microsecond = JSBI.BigInt(microsecondParam);\n  let nanosecond = JSBI.BigInt(nanosecondParam);\n  let quotient;\n\n  ({ quotient, remainder: nanosecond } = NonNegativeBigIntDivmod(nanosecond, THOUSAND));\n  microsecond = JSBI.add(microsecond, quotient);\n\n  ({ quotient, remainder: microsecond } = NonNegativeBigIntDivmod(microsecond, THOUSAND));\n  millisecond = JSBI.add(millisecond, quotient);\n\n  ({ quotient, remainder: millisecond } = NonNegativeBigIntDivmod(millisecond, THOUSAND));\n  second = JSBI.add(second, quotient);\n\n  ({ quotient, remainder: second } = NonNegativeBigIntDivmod(second, SIXTY));\n  minute = JSBI.add(minute, quotient);\n\n  ({ quotient, remainder: minute } = NonNegativeBigIntDivmod(minute, SIXTY));\n  hour = JSBI.add(hour, quotient);\n\n  ({ quotient, remainder: hour } = NonNegativeBigIntDivmod(hour, TWENTY_FOUR));\n\n  return {\n    deltaDays: JSBI.toNumber(quotient),\n    hour: JSBI.toNumber(hour),\n    minute: JSBI.toNumber(minute),\n    second: JSBI.toNumber(second),\n    millisecond: JSBI.toNumber(millisecond),\n    microsecond: JSBI.toNumber(microsecond),\n    nanosecond: JSBI.toNumber(nanosecond)\n  };\n}\n\nexport function TotalDurationNanoseconds(\n  daysParam: number,\n  hoursParam: number | JSBI,\n  minutesParam: number | JSBI,\n  secondsParam: number | JSBI,\n  millisecondsParam: number | JSBI,\n  microsecondsParam: number | JSBI,\n  nanosecondsParam: number | JSBI,\n  offsetShift: number\n) {\n  const days: JSBI = JSBI.BigInt(daysParam);\n  let nanoseconds: JSBI = JSBI.BigInt(nanosecondsParam);\n  if (daysParam !== 0) nanoseconds = JSBI.subtract(JSBI.BigInt(nanosecondsParam), JSBI.BigInt(offsetShift));\n  const hours = JSBI.add(JSBI.BigInt(hoursParam), JSBI.multiply(days, JSBI.BigInt(24)));\n  const minutes = JSBI.add(JSBI.BigInt(minutesParam), JSBI.multiply(hours, SIXTY));\n  const seconds = JSBI.add(JSBI.BigInt(secondsParam), JSBI.multiply(minutes, SIXTY));\n  const milliseconds = JSBI.add(JSBI.BigInt(millisecondsParam), JSBI.multiply(seconds, THOUSAND));\n  const microseconds = JSBI.add(JSBI.BigInt(microsecondsParam), JSBI.multiply(milliseconds, THOUSAND));\n  return JSBI.add(JSBI.BigInt(nanoseconds), JSBI.multiply(microseconds, THOUSAND));\n}\n\nfunction NanosecondsToDays(nanosecondsParam: JSBI, relativeTo: ReturnType<typeof ToRelativeTemporalObject>) {\n  const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n  const sign = MathSign(JSBI.toNumber(nanosecondsParam));\n  let nanoseconds = JSBI.BigInt(nanosecondsParam);\n  let dayLengthNs = 86400e9;\n  if (sign === 0) return { days: 0, nanoseconds: ZERO, dayLengthNs };\n  if (!IsTemporalZonedDateTime(relativeTo)) {\n    let days: JSBI;\n    ({ quotient: days, remainder: nanoseconds } = divmod(nanoseconds, JSBI.BigInt(dayLengthNs)));\n    return { days: JSBI.toNumber(days), nanoseconds, dayLengthNs };\n  }\n\n  const startNs = GetSlot(relativeTo, EPOCHNANOSECONDS);\n  const start = GetSlot(relativeTo, INSTANT);\n  const endNs = JSBI.add(startNs, nanoseconds);\n  const end = new TemporalInstant(endNs);\n  const timeZone = GetSlot(relativeTo, TIME_ZONE);\n  const calendar = GetSlot(relativeTo, CALENDAR);\n\n  // Find the difference in days only.\n  const dtStart = GetPlainDateTimeFor(timeZone, start, calendar);\n  const dtEnd = GetPlainDateTimeFor(timeZone, end, calendar);\n  let { days: daysNumber } = DifferenceISODateTime(\n    GetSlot(dtStart, ISO_YEAR),\n    GetSlot(dtStart, ISO_MONTH),\n    GetSlot(dtStart, ISO_DAY),\n    GetSlot(dtStart, ISO_HOUR),\n    GetSlot(dtStart, ISO_MINUTE),\n    GetSlot(dtStart, ISO_SECOND),\n    GetSlot(dtStart, ISO_MILLISECOND),\n    GetSlot(dtStart, ISO_MICROSECOND),\n    GetSlot(dtStart, ISO_NANOSECOND),\n    GetSlot(dtEnd, ISO_YEAR),\n    GetSlot(dtEnd, ISO_MONTH),\n    GetSlot(dtEnd, ISO_DAY),\n    GetSlot(dtEnd, ISO_HOUR),\n    GetSlot(dtEnd, ISO_MINUTE),\n    GetSlot(dtEnd, ISO_SECOND),\n    GetSlot(dtEnd, ISO_MILLISECOND),\n    GetSlot(dtEnd, ISO_MICROSECOND),\n    GetSlot(dtEnd, ISO_NANOSECOND),\n    calendar,\n    'day',\n    ObjectCreate(null) as Temporal.DifferenceOptions<Temporal.DateTimeUnit>\n  );\n  let intermediateNs = AddZonedDateTime(start, timeZone, calendar, 0, 0, 0, daysNumber, 0, 0, 0, 0, 0, 0);\n  // may disambiguate\n\n  // If clock time after addition was in the middle of a skipped period, the\n  // endpoint was disambiguated to a later clock time. So it's possible that\n  // the resulting disambiguated result is later than endNs. If so, then back\n  // up one day and try again. Repeat if necessary (some transitions are\n  // > 24 hours) until either there's zero days left or the date duration is\n  // back inside the period where it belongs. Note that this case only can\n  // happen for positive durations because the only direction that\n  // `disambiguation: 'compatible'` can change clock time is forwards.\n  let daysBigInt = JSBI.BigInt(daysNumber);\n  if (sign === 1) {\n    while (JSBI.greaterThan(daysBigInt, ZERO) && JSBI.greaterThan(intermediateNs, endNs)) {\n      daysBigInt = JSBI.subtract(daysBigInt, ONE);\n      intermediateNs = AddZonedDateTime(\n        start,\n        timeZone,\n        calendar,\n        0,\n        0,\n        0,\n        JSBI.toNumber(daysBigInt),\n        0,\n        0,\n        0,\n        0,\n        0,\n        0\n      );\n      // may do disambiguation\n    }\n  }\n  nanoseconds = JSBI.subtract(endNs, intermediateNs);\n\n  let isOverflow = false;\n  let relativeInstant = new TemporalInstant(intermediateNs);\n  do {\n    // calculate length of the next day (day that contains the time remainder)\n    const oneDayFartherNs = AddZonedDateTime(relativeInstant, timeZone, calendar, 0, 0, 0, sign, 0, 0, 0, 0, 0, 0);\n    const relativeNs = GetSlot(relativeInstant, EPOCHNANOSECONDS);\n    dayLengthNs = JSBI.toNumber(JSBI.subtract(oneDayFartherNs, relativeNs));\n    isOverflow = JSBI.greaterThanOrEqual(\n      JSBI.multiply(JSBI.subtract(nanoseconds, JSBI.BigInt(dayLengthNs)), JSBI.BigInt(sign)),\n      ZERO\n    );\n    if (isOverflow) {\n      nanoseconds = JSBI.subtract(nanoseconds, JSBI.BigInt(dayLengthNs));\n      relativeInstant = new TemporalInstant(oneDayFartherNs);\n      daysBigInt = JSBI.add(daysBigInt, JSBI.BigInt(sign));\n    }\n  } while (isOverflow);\n  if (!isZero(daysBigInt) && signJSBI(daysBigInt) !== sign) {\n    throw new RangeError('Time zone or calendar converted nanoseconds into a number of days with the opposite sign');\n  }\n  if (!isZero(nanoseconds) && signJSBI(nanoseconds) !== sign) {\n    if (isNegativeJSBI(nanoseconds) && sign === 1) {\n      throw new Error('assert not reached');\n    }\n    throw new RangeError('Time zone or calendar ended up with a remainder of nanoseconds with the opposite sign');\n  }\n  if (JSBI.greaterThanOrEqual(abs(nanoseconds), abs(JSBI.BigInt(dayLengthNs)))) {\n    throw new Error('assert not reached');\n  }\n  return { days: JSBI.toNumber(daysBigInt), nanoseconds, dayLengthNs: MathAbs(dayLengthNs) };\n}\n\nexport function BalanceDuration(\n  daysParam: number,\n  hoursParam: number | JSBI,\n  minutesParam: number | JSBI,\n  secondsParam: number | JSBI,\n  millisecondsParam: number | JSBI,\n  microsecondsParam: number | JSBI,\n  nanosecondsParam: number | JSBI,\n  largestUnit: Temporal.DateTimeUnit,\n  relativeTo: ReturnType<typeof ToRelativeTemporalObject> = undefined\n) {\n  let result = BalancePossiblyInfiniteDuration(\n    daysParam,\n    hoursParam,\n    minutesParam,\n    secondsParam,\n    millisecondsParam,\n    microsecondsParam,\n    nanosecondsParam,\n    largestUnit,\n    relativeTo\n  );\n  if (result === 'positive overflow' || result === 'negative overflow') {\n    throw new RangeError('Duration out of range');\n  } else {\n    return result;\n  }\n}\n\nexport function BalancePossiblyInfiniteDuration(\n  daysParam: number,\n  hoursParam: number | JSBI,\n  minutesParam: number | JSBI,\n  secondsParam: number | JSBI,\n  millisecondsParam: number | JSBI,\n  microsecondsParam: number | JSBI,\n  nanosecondsParam: number | JSBI,\n  largestUnit: Temporal.DateTimeUnit,\n  relativeTo: ReturnType<typeof ToRelativeTemporalObject> = undefined\n) {\n  let days = daysParam;\n  let nanosecondsBigInt: JSBI,\n    microsecondsBigInt: JSBI,\n    millisecondsBigInt: JSBI,\n    secondsBigInt: JSBI,\n    minutesBigInt: JSBI,\n    hoursBigInt: JSBI;\n  if (IsTemporalZonedDateTime(relativeTo)) {\n    const endNs = AddZonedDateTime(\n      GetSlot(relativeTo, INSTANT),\n      GetSlot(relativeTo, TIME_ZONE),\n      GetSlot(relativeTo, CALENDAR),\n      0,\n      0,\n      0,\n      days,\n      hoursParam,\n      minutesParam,\n      secondsParam,\n      millisecondsParam,\n      microsecondsParam,\n      nanosecondsParam\n    );\n    const startNs = GetSlot(relativeTo, EPOCHNANOSECONDS);\n    nanosecondsBigInt = JSBI.subtract(endNs, startNs);\n  } else {\n    nanosecondsBigInt = TotalDurationNanoseconds(\n      days,\n      hoursParam,\n      minutesParam,\n      secondsParam,\n      millisecondsParam,\n      microsecondsParam,\n      nanosecondsParam,\n      0\n    );\n  }\n  if (largestUnit === 'year' || largestUnit === 'month' || largestUnit === 'week' || largestUnit === 'day') {\n    ({ days, nanoseconds: nanosecondsBigInt } = NanosecondsToDays(nanosecondsBigInt, relativeTo));\n  } else {\n    days = 0;\n  }\n\n  const sign = JSBI.lessThan(nanosecondsBigInt, ZERO) ? -1 : 1;\n  nanosecondsBigInt = abs(nanosecondsBigInt);\n  microsecondsBigInt = millisecondsBigInt = secondsBigInt = minutesBigInt = hoursBigInt = ZERO;\n\n  switch (largestUnit) {\n    case 'year':\n    case 'month':\n    case 'week':\n    case 'day':\n    case 'hour':\n      ({ quotient: microsecondsBigInt, remainder: nanosecondsBigInt } = divmod(nanosecondsBigInt, THOUSAND));\n      ({ quotient: millisecondsBigInt, remainder: microsecondsBigInt } = divmod(microsecondsBigInt, THOUSAND));\n      ({ quotient: secondsBigInt, remainder: millisecondsBigInt } = divmod(millisecondsBigInt, THOUSAND));\n      ({ quotient: minutesBigInt, remainder: secondsBigInt } = divmod(secondsBigInt, SIXTY));\n      ({ quotient: hoursBigInt, remainder: minutesBigInt } = divmod(minutesBigInt, SIXTY));\n      break;\n    case 'minute':\n      ({ quotient: microsecondsBigInt, remainder: nanosecondsBigInt } = divmod(nanosecondsBigInt, THOUSAND));\n      ({ quotient: millisecondsBigInt, remainder: microsecondsBigInt } = divmod(microsecondsBigInt, THOUSAND));\n      ({ quotient: secondsBigInt, remainder: millisecondsBigInt } = divmod(millisecondsBigInt, THOUSAND));\n      ({ quotient: minutesBigInt, remainder: secondsBigInt } = divmod(secondsBigInt, SIXTY));\n      break;\n    case 'second':\n      ({ quotient: microsecondsBigInt, remainder: nanosecondsBigInt } = divmod(nanosecondsBigInt, THOUSAND));\n      ({ quotient: millisecondsBigInt, remainder: microsecondsBigInt } = divmod(microsecondsBigInt, THOUSAND));\n      ({ quotient: secondsBigInt, remainder: millisecondsBigInt } = divmod(millisecondsBigInt, THOUSAND));\n      break;\n    case 'millisecond':\n      ({ quotient: microsecondsBigInt, remainder: nanosecondsBigInt } = divmod(nanosecondsBigInt, THOUSAND));\n      ({ quotient: millisecondsBigInt, remainder: microsecondsBigInt } = divmod(microsecondsBigInt, THOUSAND));\n      break;\n    case 'microsecond':\n      ({ quotient: microsecondsBigInt, remainder: nanosecondsBigInt } = divmod(nanosecondsBigInt, THOUSAND));\n      break;\n    case 'nanosecond':\n      break;\n    default:\n      throw new Error('assert not reached');\n  }\n\n  const hours = JSBI.toNumber(hoursBigInt) * sign;\n  const minutes = JSBI.toNumber(minutesBigInt) * sign;\n  const seconds = JSBI.toNumber(secondsBigInt) * sign;\n  const milliseconds = JSBI.toNumber(millisecondsBigInt) * sign;\n  const microseconds = JSBI.toNumber(microsecondsBigInt) * sign;\n  const nanoseconds = JSBI.toNumber(nanosecondsBigInt) * sign;\n\n  for (const prop of [days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds]) {\n    if (!NumberIsFinite(prop)) {\n      if (sign === 1) {\n        return 'positive overflow' as const;\n      } else {\n        return 'negative overflow' as const;\n      }\n    }\n  }\n\n  return { days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nexport function UnbalanceDurationRelative(\n  yearsParam: number,\n  monthsParam: number,\n  weeksParam: number,\n  daysParam: number,\n  largestUnit: Temporal.DateTimeUnit,\n  relativeToParam: ReturnType<typeof ToRelativeTemporalObject>\n): {\n  years: number;\n  months: number;\n  weeks: number;\n  days: number;\n} {\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  const sign = DurationSign(yearsParam, monthsParam, weeksParam, daysParam, 0, 0, 0, 0, 0, 0);\n  if (sign === 0) return { years: yearsParam, months: monthsParam, weeks: weeksParam, days: daysParam };\n  const signBI = JSBI.BigInt(sign);\n\n  let years = JSBI.BigInt(yearsParam);\n  let months = JSBI.BigInt(monthsParam);\n  let weeks = JSBI.BigInt(weeksParam);\n  let days = JSBI.BigInt(daysParam);\n\n  let calendar;\n  let relativeTo: Temporal.PlainDate | undefined;\n  if (relativeToParam) {\n    relativeTo = ToTemporalDate(relativeToParam);\n    calendar = GetSlot(relativeTo, CALENDAR);\n  }\n\n  const oneYear = new TemporalDuration(sign);\n  const oneMonth = new TemporalDuration(0, sign);\n  const oneWeek = new TemporalDuration(0, 0, sign);\n\n  switch (largestUnit) {\n    case 'year':\n      // no-op\n      break;\n    case 'month':\n      {\n        if (!calendar) throw new RangeError('a starting point is required for months balancing');\n        assertExists(relativeTo);\n        // balance years down to months\n        let dateAdd, dateUntil;\n        if (typeof calendar !== 'string') {\n          dateAdd = GetMethod(calendar, 'dateAdd');\n          dateUntil = GetMethod(calendar, 'dateUntil');\n        }\n        while (!isZero(years)) {\n          const newRelativeTo = CalendarDateAdd(calendar, relativeTo, oneYear, undefined, dateAdd);\n          const untilOptions = ObjectCreate(null) as Temporal.DifferenceOptions<typeof largestUnit>;\n          untilOptions.largestUnit = 'month';\n          const untilResult = CalendarDateUntil(calendar, relativeTo, newRelativeTo, untilOptions, dateUntil);\n          const oneYearMonths = JSBI.BigInt(GetSlot(untilResult, MONTHS));\n          relativeTo = newRelativeTo;\n          months = JSBI.add(months, oneYearMonths);\n          years = JSBI.subtract(years, signBI);\n        }\n      }\n      break;\n    case 'week': {\n      if (!calendar) throw new RangeError('a starting point is required for weeks balancing');\n      assertExists(relativeTo);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      // balance years down to days\n      while (!isZero(years)) {\n        let oneYearDays;\n        ({ relativeTo, days: oneYearDays } = MoveRelativeDate(calendar, relativeTo, oneYear, dateAdd));\n        days = JSBI.add(days, JSBI.BigInt(oneYearDays));\n        years = JSBI.subtract(years, signBI);\n      }\n\n      // balance months down to days\n      while (!isZero(months)) {\n        let oneMonthDays;\n        ({ relativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n        days = JSBI.add(days, JSBI.BigInt(oneMonthDays));\n        months = JSBI.subtract(months, signBI);\n      }\n      break;\n    }\n    default: {\n      // balance years down to days\n      if (isZero(years) && isZero(months) && isZero(weeks)) break;\n      if (!calendar) throw new RangeError('a starting point is required for balancing calendar units');\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      while (!isZero(years)) {\n        assertExists(relativeTo);\n        let oneYearDays;\n        ({ relativeTo, days: oneYearDays } = MoveRelativeDate(calendar, relativeTo, oneYear, dateAdd));\n        days = JSBI.add(days, JSBI.BigInt(oneYearDays));\n        years = JSBI.subtract(years, signBI);\n      }\n\n      // balance months down to days\n      while (!isZero(months)) {\n        assertExists(relativeTo);\n        let oneMonthDays;\n        ({ relativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n        days = JSBI.add(days, JSBI.BigInt(oneMonthDays));\n        months = JSBI.subtract(months, signBI);\n      }\n\n      // balance weeks down to days\n      while (!isZero(weeks)) {\n        assertExists(relativeTo);\n        let oneWeekDays;\n        ({ relativeTo, days: oneWeekDays } = MoveRelativeDate(calendar, relativeTo, oneWeek, dateAdd));\n        days = JSBI.add(days, JSBI.BigInt(oneWeekDays));\n        weeks = JSBI.subtract(weeks, signBI);\n      }\n      break;\n    }\n  }\n\n  return {\n    years: JSBI.toNumber(years),\n    months: JSBI.toNumber(months),\n    weeks: JSBI.toNumber(weeks),\n    days: JSBI.toNumber(days)\n  };\n}\n\nexport function BalanceDurationRelative(\n  yearsParam: number,\n  monthsParam: number,\n  weeksParam: number,\n  daysParam: number,\n  largestUnit: Temporal.DateTimeUnit,\n  relativeToParam: ReturnType<typeof ToRelativeTemporalObject>\n): {\n  years: number;\n  months: number;\n  weeks: number;\n  days: number;\n} {\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  const sign = DurationSign(yearsParam, monthsParam, weeksParam, daysParam, 0, 0, 0, 0, 0, 0);\n  if (sign === 0) return { years: yearsParam, months: monthsParam, weeks: weeksParam, days: daysParam };\n  const signBI = JSBI.BigInt(sign);\n\n  let years = JSBI.BigInt(yearsParam);\n  let months = JSBI.BigInt(monthsParam);\n  let weeks = JSBI.BigInt(weeksParam);\n  let days = JSBI.BigInt(daysParam);\n\n  let calendar;\n  let relativeTo: Temporal.PlainDate | undefined;\n  if (relativeToParam) {\n    relativeTo = ToTemporalDate(relativeToParam);\n    calendar = GetSlot(relativeTo, CALENDAR);\n  }\n\n  const oneYear = new TemporalDuration(sign);\n  const oneMonth = new TemporalDuration(0, sign);\n  const oneWeek = new TemporalDuration(0, 0, sign);\n\n  switch (largestUnit) {\n    case 'year': {\n      if (!calendar) throw new RangeError('a starting point is required for years balancing');\n      assertExists(relativeTo);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      // balance days up to years\n      let newRelativeTo, oneYearDays;\n      ({ relativeTo: newRelativeTo, days: oneYearDays } = MoveRelativeDate(calendar, relativeTo, oneYear, dateAdd));\n      while (JSBI.greaterThanOrEqual(abs(days), JSBI.BigInt(MathAbs(oneYearDays)))) {\n        days = JSBI.subtract(days, JSBI.BigInt(oneYearDays));\n        years = JSBI.add(years, signBI);\n        relativeTo = newRelativeTo;\n        ({ relativeTo: newRelativeTo, days: oneYearDays } = MoveRelativeDate(calendar, relativeTo, oneYear, dateAdd));\n      }\n\n      // balance days up to months\n      let oneMonthDays;\n      ({ relativeTo: newRelativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      while (JSBI.greaterThanOrEqual(abs(days), JSBI.BigInt(MathAbs(oneMonthDays)))) {\n        days = JSBI.subtract(days, JSBI.BigInt(oneMonthDays));\n        months = JSBI.add(months, signBI);\n        relativeTo = newRelativeTo;\n        ({ relativeTo: newRelativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      }\n\n      // balance months up to years\n      newRelativeTo = CalendarDateAdd(calendar, relativeTo, oneYear, undefined, dateAdd);\n      const dateUntil = typeof calendar !== 'string' ? GetMethod(calendar, 'dateUntil') : undefined;\n      const untilOptions = ObjectCreate(null) as Temporal.DifferenceOptions<'month'>;\n      untilOptions.largestUnit = 'month';\n      let untilResult = CalendarDateUntil(calendar, relativeTo, newRelativeTo, untilOptions, dateUntil);\n      let oneYearMonths = GetSlot(untilResult, MONTHS);\n      while (JSBI.greaterThanOrEqual(abs(months), JSBI.BigInt(MathAbs(oneYearMonths)))) {\n        months = JSBI.subtract(months, JSBI.BigInt(oneYearMonths));\n        years = JSBI.add(years, signBI);\n        relativeTo = newRelativeTo;\n        newRelativeTo = CalendarDateAdd(calendar, relativeTo, oneYear, undefined, dateAdd);\n        const untilOptions = ObjectCreate(null) as Temporal.DifferenceOptions<'month'>;\n        untilOptions.largestUnit = 'month';\n        untilResult = CalendarDateUntil(calendar, relativeTo, newRelativeTo, untilOptions, dateUntil);\n        oneYearMonths = GetSlot(untilResult, MONTHS);\n      }\n      break;\n    }\n    case 'month': {\n      if (!calendar) throw new RangeError('a starting point is required for months balancing');\n      assertExists(relativeTo);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      // balance days up to months\n      let newRelativeTo, oneMonthDays;\n      ({ relativeTo: newRelativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      while (JSBI.greaterThanOrEqual(abs(days), JSBI.BigInt(MathAbs(oneMonthDays)))) {\n        days = JSBI.subtract(days, JSBI.BigInt(oneMonthDays));\n        months = JSBI.add(months, signBI);\n        relativeTo = newRelativeTo;\n        ({ relativeTo: newRelativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      }\n      break;\n    }\n    case 'week': {\n      if (!calendar) throw new RangeError('a starting point is required for weeks balancing');\n      assertExists(relativeTo);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      // balance days up to weeks\n      let newRelativeTo, oneWeekDays;\n      ({ relativeTo: newRelativeTo, days: oneWeekDays } = MoveRelativeDate(calendar, relativeTo, oneWeek, dateAdd));\n      while (JSBI.greaterThanOrEqual(abs(days), JSBI.BigInt(MathAbs(oneWeekDays)))) {\n        days = JSBI.subtract(days, JSBI.BigInt(oneWeekDays));\n        weeks = JSBI.add(weeks, signBI);\n        relativeTo = newRelativeTo;\n        ({ relativeTo: newRelativeTo, days: oneWeekDays } = MoveRelativeDate(calendar, relativeTo, oneWeek, dateAdd));\n      }\n      break;\n    }\n    default:\n      // no-op\n      break;\n  }\n\n  return {\n    years: JSBI.toNumber(years),\n    months: JSBI.toNumber(months),\n    weeks: JSBI.toNumber(weeks),\n    days: JSBI.toNumber(days)\n  };\n}\n\nexport function CalculateOffsetShift(\n  relativeTo: ReturnType<typeof ToRelativeTemporalObject>,\n  y: number,\n  mon: number,\n  w: number,\n  d: number\n) {\n  if (IsTemporalZonedDateTime(relativeTo)) {\n    const instant = GetSlot(relativeTo, INSTANT);\n    const timeZone = GetSlot(relativeTo, TIME_ZONE);\n    const calendar = GetSlot(relativeTo, CALENDAR);\n    const offsetBefore = GetOffsetNanosecondsFor(timeZone, instant);\n    const after = AddZonedDateTime(instant, timeZone, calendar, y, mon, w, d, 0, 0, 0, 0, 0, 0);\n    const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n    const instantAfter = new TemporalInstant(after);\n    const offsetAfter = GetOffsetNanosecondsFor(timeZone, instantAfter);\n    return offsetAfter - offsetBefore;\n  }\n  return 0;\n}\n\nexport function CreateNegatedTemporalDuration(duration: Temporal.Duration) {\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  return new TemporalDuration(\n    -GetSlot(duration, YEARS),\n    -GetSlot(duration, MONTHS),\n    -GetSlot(duration, WEEKS),\n    -GetSlot(duration, DAYS),\n    -GetSlot(duration, HOURS),\n    -GetSlot(duration, MINUTES),\n    -GetSlot(duration, SECONDS),\n    -GetSlot(duration, MILLISECONDS),\n    -GetSlot(duration, MICROSECONDS),\n    -GetSlot(duration, NANOSECONDS)\n  );\n}\n\nexport function ConstrainToRange(value: number | undefined, min: number, max: number) {\n  // Math.Max accepts undefined values and returns NaN. Undefined values are\n  // used for optional params in the method below.\n  return MathMin(max, MathMax(min, value as number));\n}\nfunction ConstrainISODate(year: number, monthParam: number, dayParam?: number) {\n  const month = ConstrainToRange(monthParam, 1, 12);\n  const day = ConstrainToRange(dayParam, 1, ISODaysInMonth(year, month));\n  return { year, month, day };\n}\n\nfunction ConstrainTime(\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number\n) {\n  const hour = ConstrainToRange(hourParam, 0, 23);\n  const minute = ConstrainToRange(minuteParam, 0, 59);\n  const second = ConstrainToRange(secondParam, 0, 59);\n  const millisecond = ConstrainToRange(millisecondParam, 0, 999);\n  const microsecond = ConstrainToRange(microsecondParam, 0, 999);\n  const nanosecond = ConstrainToRange(nanosecondParam, 0, 999);\n  return { hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nexport function RejectToRange(value: number, min: number, max: number) {\n  if (value < min || value > max) throw new RangeError(`value out of range: ${min} <= ${value} <= ${max}`);\n}\n\nfunction RejectISODate(year: number, month: number, day: number) {\n  RejectToRange(month, 1, 12);\n  RejectToRange(day, 1, ISODaysInMonth(year, month));\n}\n\nfunction RejectDateRange(year: number, month: number, day: number) {\n  // Noon avoids trouble at edges of DateTime range (excludes midnight)\n  RejectDateTimeRange(year, month, day, 12, 0, 0, 0, 0, 0);\n}\n\nexport function RejectTime(\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number\n) {\n  RejectToRange(hour, 0, 23);\n  RejectToRange(minute, 0, 59);\n  RejectToRange(second, 0, 59);\n  RejectToRange(millisecond, 0, 999);\n  RejectToRange(microsecond, 0, 999);\n  RejectToRange(nanosecond, 0, 999);\n}\n\nfunction RejectDateTime(\n  year: number,\n  month: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number\n) {\n  RejectISODate(year, month, day);\n  RejectTime(hour, minute, second, millisecond, microsecond, nanosecond);\n}\n\nfunction RejectDateTimeRange(\n  year: number,\n  month: number,\n  day: number,\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number\n) {\n  RejectToRange(year, YEAR_MIN, YEAR_MAX);\n  // Reject any DateTime 24 hours or more outside the Instant range\n  if (\n    (year === YEAR_MIN &&\n      null ==\n        GetUTCEpochNanoseconds(year, month, day + 1, hour, minute, second, millisecond, microsecond, nanosecond - 1)) ||\n    (year === YEAR_MAX &&\n      null ==\n        GetUTCEpochNanoseconds(year, month, day - 1, hour, minute, second, millisecond, microsecond, nanosecond + 1))\n  ) {\n    throw new RangeError('DateTime outside of supported range');\n  }\n}\n\nexport function ValidateEpochNanoseconds(epochNanoseconds: JSBI) {\n  if (JSBI.lessThan(epochNanoseconds, NS_MIN) || JSBI.greaterThan(epochNanoseconds, NS_MAX)) {\n    throw new RangeError('Instant outside of supported range');\n  }\n}\n\nfunction RejectYearMonthRange(year: number, month: number) {\n  RejectToRange(year, YEAR_MIN, YEAR_MAX);\n  if (year === YEAR_MIN) {\n    RejectToRange(month, 4, 12);\n  } else if (year === YEAR_MAX) {\n    RejectToRange(month, 1, 9);\n  }\n}\n\nexport function RejectDuration(\n  y: number,\n  mon: number,\n  w: number,\n  d: number,\n  h: number,\n  min: number,\n  s: number,\n  ms: number,\n  s: number,\n  ns: number\n) {\n  const sign = DurationSign(y, mon, w, d, h, min, s, ms, s, ns);\n  for (const prop of [y, mon, w, d, h, min, s, ms, s, ns]) {\n    if (!NumberIsFinite(prop)) throw new RangeError('infinite values not allowed as duration fields');\n    const propSign = MathSign(prop);\n    if (propSign !== 0 && propSign !== sign) throw new RangeError('mixed-sign values not allowed as duration fields');\n  }\n}\n\nexport function DifferenceISODate<Allowed extends Temporal.DateTimeUnit>(\n  y1: number,\n  m1: number,\n  d1: number,\n  y2: number,\n  m2: number,\n  d2: number,\n  largestUnit: Allowed\n) {\n  switch (largestUnit) {\n    case 'year':\n    case 'month': {\n      const sign = -CompareISODate(y1, m1, d1, y2, m2, d2);\n      if (sign === 0) return { years: 0, months: 0, weeks: 0, days: 0 };\n\n      const start = { year: y1, month: m1, day: d1 };\n      const end = { year: y2, month: m2, day: d2 };\n\n      let years = end.year - start.year;\n      let mid = AddISODate(y1, m1, d1, years, 0, 0, 0, 'constrain');\n      let midSign = -CompareISODate(mid.year, mid.month, mid.day, y2, m2, d2);\n      if (midSign === 0) {\n        return largestUnit === 'year'\n          ? { years, months: 0, weeks: 0, days: 0 }\n          : { years: 0, months: years * 12, weeks: 0, days: 0 };\n      }\n      let months = end.month - start.month;\n      if (midSign !== sign) {\n        years -= sign;\n        months += sign * 12;\n      }\n      mid = AddISODate(y1, m1, d1, years, months, 0, 0, 'constrain');\n      midSign = -CompareISODate(mid.year, mid.month, mid.day, y2, m2, d2);\n      if (midSign === 0) {\n        return largestUnit === 'year'\n          ? { years, months, weeks: 0, days: 0 }\n          : { years: 0, months: months + years * 12, weeks: 0, days: 0 };\n      }\n      if (midSign !== sign) {\n        // The end date is later in the month than mid date (or earlier for\n        // negative durations). Back up one month.\n        months -= sign;\n        if (months === -sign) {\n          years -= sign;\n          months = 11 * sign;\n        }\n        mid = AddISODate(y1, m1, d1, years, months, 0, 0, 'constrain');\n      }\n\n      let days = 0;\n      // If we get here, months and years are correct (no overflow), and `mid`\n      // is within the range from `start` to `end`. To count the days between\n      // `mid` and `end`, there are 3 cases:\n      // 1) same month: use simple subtraction\n      // 2) end is previous month from intermediate (negative duration)\n      // 3) end is next month from intermediate (positive duration)\n      if (mid.month === end.month) {\n        // 1) same month: use simple subtraction\n        days = end.day - mid.day;\n      } else if (sign < 0) {\n        // 2) end is previous month from intermediate (negative duration)\n        // Example: intermediate: Feb 1, end: Jan 30, DaysInMonth = 31, days = -2\n        days = -mid.day - (ISODaysInMonth(end.year, end.month) - end.day);\n      } else {\n        // 3) end is next month from intermediate (positive duration)\n        // Example: intermediate: Jan 29, end: Feb 1, DaysInMonth = 31, days = 3\n        days = end.day + (ISODaysInMonth(mid.year, mid.month) - mid.day);\n      }\n\n      if (largestUnit === 'month') {\n        months += years * 12;\n        years = 0;\n      }\n      return { years, months, weeks: 0, days };\n    }\n    case 'week':\n    case 'day': {\n      let larger, smaller, sign;\n      if (CompareISODate(y1, m1, d1, y2, m2, d2) < 0) {\n        smaller = { year: y1, month: m1, day: d1 };\n        larger = { year: y2, month: m2, day: d2 };\n        sign = 1;\n      } else {\n        smaller = { year: y2, month: m2, day: d2 };\n        larger = { year: y1, month: m1, day: d1 };\n        sign = -1;\n      }\n      let days = DayOfYear(larger.year, larger.month, larger.day) - DayOfYear(smaller.year, smaller.month, smaller.day);\n      for (let year = smaller.year; year < larger.year; ++year) {\n        days += LeapYear(year) ? 366 : 365;\n      }\n      let weeks = 0;\n      if (largestUnit === 'week') {\n        weeks = MathFloor(days / 7);\n        days %= 7;\n      }\n      weeks *= sign;\n      days *= sign;\n      return { years: 0, months: 0, weeks, days };\n    }\n    default:\n      throw new Error('assert not reached');\n  }\n}\n\nfunction DifferenceTime(\n  h1: number,\n  min1: number,\n  s1: number,\n  ms1: number,\n  s1: number,\n  ns1: number,\n  h2: number,\n  min2: number,\n  s2: number,\n  ms2: number,\n  s2: number,\n  ns2: number\n) {\n  let hours = h2 - h1;\n  let minutes = min2 - min1;\n  let seconds = s2 - s1;\n  let milliseconds = ms2 - ms1;\n  let microseconds = s2 - s1;\n  let nanoseconds = ns2 - ns1;\n\n  const sign = DurationSign(0, 0, 0, 0, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  hours *= sign;\n  minutes *= sign;\n  seconds *= sign;\n  milliseconds *= sign;\n  microseconds *= sign;\n  nanoseconds *= sign;\n\n  let deltaDays = 0;\n  ({\n    deltaDays,\n    hour: hours,\n    minute: minutes,\n    second: seconds,\n    millisecond: milliseconds,\n    microsecond: microseconds,\n    nanosecond: nanoseconds\n  } = BalanceTime(hours, minutes, seconds, milliseconds, microseconds, nanoseconds));\n\n  if (deltaDays != 0) throw new Error('assertion failure in DifferenceTime: _bt_.[[Days]] should be 0');\n  hours *= sign;\n  minutes *= sign;\n  seconds *= sign;\n  milliseconds *= sign;\n  microseconds *= sign;\n  nanoseconds *= sign;\n\n  return { hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nfunction DifferenceInstant(\n  ns1: JSBI,\n  ns2: JSBI,\n  increment: number,\n  smallestUnit: keyof typeof nsPerTimeUnit,\n  largestUnit: keyof typeof nsPerTimeUnit,\n  roundingMode: Temporal.RoundingMode\n) {\n  const diff = JSBI.subtract(ns2, ns1);\n\n  let hours = 0;\n  let minutes = 0;\n  let nanoseconds = JSBI.toNumber(JSBI.remainder(diff, THOUSAND));\n  let microseconds = JSBI.toNumber(JSBI.remainder(JSBI.divide(diff, THOUSAND), THOUSAND));\n  let milliseconds = JSBI.toNumber(JSBI.remainder(JSBI.divide(diff, MILLION), THOUSAND));\n  let seconds = JSBI.toNumber(JSBI.divide(diff, BILLION));\n\n  ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = RoundDuration(\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    increment,\n    smallestUnit,\n    roundingMode\n  ));\n  return BalanceDuration(0, hours, minutes, seconds, milliseconds, microseconds, nanoseconds, largestUnit);\n}\n\nfunction DifferenceISODateTime(\n  y1Param: number,\n  mon1Param: number,\n  d1Param: number,\n  h1: number,\n  min1: number,\n  s1: number,\n  ms1: number,\n  s1: number,\n  ns1: number,\n  y2: number,\n  mon2: number,\n  d2: number,\n  h2: number,\n  min2: number,\n  s2: number,\n  ms2: number,\n  s2: number,\n  ns2: number,\n  calendar: CalendarSlot,\n  largestUnit: Temporal.DateTimeUnit,\n  options: Temporal.DifferenceOptions<Temporal.DateTimeUnit> | undefined\n) {\n  let y1 = y1Param;\n  let mon1 = mon1Param;\n  let d1 = d1Param;\n\n  let { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = DifferenceTime(\n    h1,\n    min1,\n    s1,\n    ms1,\n    s1,\n    ns1,\n    h2,\n    min2,\n    s2,\n    ms2,\n    s2,\n    ns2\n  );\n\n  const timeSign = DurationSign(0, 0, 0, 0, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  const dateSign = CompareISODate(y2, mon2, d2, y1, mon1, d1);\n  if (dateSign === -timeSign) {\n    ({ year: y1, month: mon1, day: d1 } = BalanceISODate(y1, mon1, d1 - timeSign));\n    ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n      -timeSign,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds,\n      largestUnit\n    ));\n  }\n\n  const date1 = CreateTemporalDate(y1, mon1, d1, calendar);\n  const date2 = CreateTemporalDate(y2, mon2, d2, calendar);\n  const dateLargestUnit = LargerOfTwoTemporalUnits('day', largestUnit);\n  const untilOptions = CopyOptions(options);\n  untilOptions.largestUnit = dateLargestUnit;\n  // TODO untilOptions doesn't want to compile as it seems that smallestUnit is not clamped?\n  // Type 'SmallestUnit<DateTimeUnit> | undefined' is not assignable to type\n  //      'SmallestUnit<\"year\" | \"month\" | \"day\" | \"week\"> | undefined'.\n  // Type '\"hour\"' is not assignable to type\n  //      'SmallestUnit<\"year\" | \"month\" | \"day\" | \"week\"> | undefined'.ts(2345)\n  let { years, months, weeks, days } = CalendarDateUntil(calendar, date1, date2, untilOptions as any);\n  // Signs of date part and time part may not agree; balance them together\n  ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    largestUnit\n  ));\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nfunction DifferenceZonedDateTime(\n  ns1: JSBI,\n  ns2: JSBI,\n  timeZone: string | Temporal.TimeZoneProtocol,\n  calendar: CalendarSlot,\n  largestUnit: Temporal.DateTimeUnit,\n  options: Temporal.DifferenceOptions<Temporal.DateTimeUnit>\n) {\n  const nsDiff = JSBI.subtract(ns2, ns1);\n  if (JSBI.equal(nsDiff, ZERO)) {\n    return {\n      years: 0,\n      months: 0,\n      weeks: 0,\n      days: 0,\n      hours: 0,\n      minutes: 0,\n      seconds: 0,\n      milliseconds: 0,\n      microseconds: 0,\n      nanoseconds: 0\n    };\n  }\n\n  // Find the difference in dates only.\n  const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n  const start = new TemporalInstant(ns1);\n  const end = new TemporalInstant(ns2);\n  const dtStart = GetPlainDateTimeFor(timeZone, start, calendar);\n  const dtEnd = GetPlainDateTimeFor(timeZone, end, calendar);\n  let { years, months, weeks, days } = DifferenceISODateTime(\n    GetSlot(dtStart, ISO_YEAR),\n    GetSlot(dtStart, ISO_MONTH),\n    GetSlot(dtStart, ISO_DAY),\n    GetSlot(dtStart, ISO_HOUR),\n    GetSlot(dtStart, ISO_MINUTE),\n    GetSlot(dtStart, ISO_SECOND),\n    GetSlot(dtStart, ISO_MILLISECOND),\n    GetSlot(dtStart, ISO_MICROSECOND),\n    GetSlot(dtStart, ISO_NANOSECOND),\n    GetSlot(dtEnd, ISO_YEAR),\n    GetSlot(dtEnd, ISO_MONTH),\n    GetSlot(dtEnd, ISO_DAY),\n    GetSlot(dtEnd, ISO_HOUR),\n    GetSlot(dtEnd, ISO_MINUTE),\n    GetSlot(dtEnd, ISO_SECOND),\n    GetSlot(dtEnd, ISO_MILLISECOND),\n    GetSlot(dtEnd, ISO_MICROSECOND),\n    GetSlot(dtEnd, ISO_NANOSECOND),\n    calendar,\n    largestUnit,\n    options\n  );\n  const intermediateNs = AddZonedDateTime(start, timeZone, calendar, years, months, weeks, 0, 0, 0, 0, 0, 0, 0);\n  // may disambiguate\n  let timeRemainderNs = JSBI.subtract(ns2, intermediateNs);\n  const intermediate = CreateTemporalZonedDateTime(intermediateNs, timeZone, calendar);\n  ({ nanoseconds: timeRemainderNs, days } = NanosecondsToDays(timeRemainderNs, intermediate));\n\n  // Finally, merge the date and time durations and return the merged result.\n  const { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    JSBI.toNumber(timeRemainderNs),\n    'hour'\n  );\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\ntype DifferenceOperation = 'since' | 'until';\n\nfunction GetDifferenceSettings<T extends Temporal.DateTimeUnit>(\n  op: DifferenceOperation,\n  options: Temporal.DifferenceOptions<T>,\n  group: 'datetime' | 'date' | 'time',\n  disallowed: (Temporal.DateTimeUnit | 'auto')[],\n  fallbackSmallest: T,\n  smallestLargestDefaultUnit: T\n) {\n  const ALLOWED_UNITS = SINGULAR_PLURAL_UNITS.reduce((allowed, unitInfo) => {\n    const p = unitInfo[0];\n    const s = unitInfo[1];\n    const c = unitInfo[2];\n    if ((group === 'datetime' || c === group) && !disallowed.includes(s)) {\n      allowed.push(s, p);\n    }\n    return allowed;\n  }, [] as (Temporal.DateTimeUnit | Temporal.PluralUnit<Temporal.DateTimeUnit>)[]);\n\n  let largestUnit = GetTemporalUnit(options, 'largestUnit', group, 'auto');\n  if (disallowed.includes(largestUnit)) {\n    throw new RangeError(`largestUnit must be one of ${ALLOWED_UNITS.join(', ')}, not ${largestUnit}`);\n  }\n\n  const roundingIncrement = ToTemporalRoundingIncrement(options);\n\n  let roundingMode = ToTemporalRoundingMode(options, 'trunc');\n  if (op === 'since') roundingMode = NegateTemporalRoundingMode(roundingMode);\n\n  const smallestUnit = GetTemporalUnit(options, 'smallestUnit', group, fallbackSmallest);\n  if (disallowed.includes(smallestUnit)) {\n    throw new RangeError(`smallestUnit must be one of ${ALLOWED_UNITS.join(', ')}, not ${smallestUnit}`);\n  }\n\n  const defaultLargestUnit = LargerOfTwoTemporalUnits(smallestLargestDefaultUnit, smallestUnit);\n  if (largestUnit === 'auto') largestUnit = defaultLargestUnit;\n  if (LargerOfTwoTemporalUnits(largestUnit, smallestUnit) !== largestUnit) {\n    throw new RangeError(`largestUnit ${largestUnit} cannot be smaller than smallestUnit ${smallestUnit}`);\n  }\n  const MAX_DIFFERENCE_INCREMENTS: { [k in Temporal.DateTimeUnit]?: number } = {\n    hour: 24,\n    minute: 60,\n    second: 60,\n    millisecond: 1000,\n    microsecond: 1000,\n    nanosecond: 1000\n  };\n  const maximum = MAX_DIFFERENCE_INCREMENTS[smallestUnit];\n  if (maximum !== undefined) ValidateTemporalRoundingIncrement(roundingIncrement, maximum, false);\n\n  return { largestUnit: largestUnit as T, roundingIncrement, roundingMode, smallestUnit: smallestUnit as T };\n}\n\nexport function DifferenceTemporalInstant(\n  operation: DifferenceOperation,\n  instant: Temporal.Instant,\n  otherParam: InstantParams['until'][0],\n  options: InstantParams['until'][1] | undefined\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalInstant(otherParam);\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'time', [], 'nanosecond', 'second');\n\n  const onens = GetSlot(instant, EPOCHNANOSECONDS);\n  const twons = GetSlot(other, EPOCHNANOSECONDS);\n  let { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = DifferenceInstant(\n    onens,\n    twons,\n    settings.roundingIncrement,\n    settings.smallestUnit,\n    settings.largestUnit,\n    settings.roundingMode\n  );\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(\n    0,\n    0,\n    0,\n    0,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n}\n\nexport function DifferenceTemporalPlainDate(\n  operation: DifferenceOperation,\n  plainDate: Temporal.PlainDate,\n  otherParam: PlainDateParams['until'][0],\n  options: PlainDateParams['until'][1]\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalDate(otherParam);\n  const calendar = GetSlot(plainDate, CALENDAR);\n  const otherCalendar = GetSlot(other, CALENDAR);\n  ThrowIfCalendarsNotEqual(calendar, otherCalendar, 'compute difference between dates');\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'date', [], 'day', 'day');\n  resolvedOptions.largestUnit = settings.largestUnit;\n\n  let { years, months, weeks, days } = CalendarDateUntil(calendar, plainDate, other, resolvedOptions);\n\n  if (settings.smallestUnit !== 'day' || settings.roundingIncrement !== 1) {\n    ({ years, months, weeks, days } = RoundDuration(\n      years,\n      months,\n      weeks,\n      days,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      settings.roundingIncrement,\n      settings.smallestUnit,\n      settings.roundingMode,\n      plainDate\n    ));\n  }\n\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(sign * years, sign * months, sign * weeks, sign * days, 0, 0, 0, 0, 0, 0);\n}\n\nexport function DifferenceTemporalPlainDateTime(\n  operation: DifferenceOperation,\n  plainDateTime: Temporal.PlainDateTime,\n  otherParam: PlainDateTimeParams['until'][0],\n  options: PlainDateTimeParams['until'][1]\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalDateTime(otherParam);\n  const calendar = GetSlot(plainDateTime, CALENDAR);\n  const otherCalendar = GetSlot(other, CALENDAR);\n  ThrowIfCalendarsNotEqual(calendar, otherCalendar, 'compute difference between dates');\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'datetime', [], 'nanosecond', 'day');\n\n  let { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n    DifferenceISODateTime(\n      GetSlot(plainDateTime, ISO_YEAR),\n      GetSlot(plainDateTime, ISO_MONTH),\n      GetSlot(plainDateTime, ISO_DAY),\n      GetSlot(plainDateTime, ISO_HOUR),\n      GetSlot(plainDateTime, ISO_MINUTE),\n      GetSlot(plainDateTime, ISO_SECOND),\n      GetSlot(plainDateTime, ISO_MILLISECOND),\n      GetSlot(plainDateTime, ISO_MICROSECOND),\n      GetSlot(plainDateTime, ISO_NANOSECOND),\n      GetSlot(other, ISO_YEAR),\n      GetSlot(other, ISO_MONTH),\n      GetSlot(other, ISO_DAY),\n      GetSlot(other, ISO_HOUR),\n      GetSlot(other, ISO_MINUTE),\n      GetSlot(other, ISO_SECOND),\n      GetSlot(other, ISO_MILLISECOND),\n      GetSlot(other, ISO_MICROSECOND),\n      GetSlot(other, ISO_NANOSECOND),\n      calendar,\n      settings.largestUnit,\n      resolvedOptions\n    );\n\n  const relativeTo = TemporalDateTimeToDate(plainDateTime);\n  ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = RoundDuration(\n    years,\n    months,\n    weeks,\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    settings.roundingIncrement,\n    settings.smallestUnit,\n    settings.roundingMode,\n    relativeTo\n  ));\n  ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    settings.largestUnit\n  ));\n\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(\n    sign * years,\n    sign * months,\n    sign * weeks,\n    sign * days,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n}\n\nexport function DifferenceTemporalPlainTime(\n  operation: DifferenceOperation,\n  plainTime: Temporal.PlainTime,\n  otherParam: PlainTimeParams['until'][0],\n  options: PlainTimeParams['until'][1]\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalTime(otherParam);\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'time', [], 'nanosecond', 'hour');\n\n  let { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = DifferenceTime(\n    GetSlot(plainTime, ISO_HOUR),\n    GetSlot(plainTime, ISO_MINUTE),\n    GetSlot(plainTime, ISO_SECOND),\n    GetSlot(plainTime, ISO_MILLISECOND),\n    GetSlot(plainTime, ISO_MICROSECOND),\n    GetSlot(plainTime, ISO_NANOSECOND),\n    GetSlot(other, ISO_HOUR),\n    GetSlot(other, ISO_MINUTE),\n    GetSlot(other, ISO_SECOND),\n    GetSlot(other, ISO_MILLISECOND),\n    GetSlot(other, ISO_MICROSECOND),\n    GetSlot(other, ISO_NANOSECOND)\n  );\n  ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = RoundDuration(\n    0,\n    0,\n    0,\n    0,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    settings.roundingIncrement,\n    settings.smallestUnit,\n    settings.roundingMode\n  ));\n  ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n    0,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    settings.largestUnit\n  ));\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(\n    0,\n    0,\n    0,\n    0,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n}\n\nexport function DifferenceTemporalPlainYearMonth(\n  operation: DifferenceOperation,\n  yearMonth: Temporal.PlainYearMonth,\n  otherParam: PlainYearMonthParams['until'][0],\n  options: PlainYearMonthParams['until'][1]\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalYearMonth(otherParam);\n  const calendar = GetSlot(yearMonth, CALENDAR);\n  const otherCalendar = GetSlot(other, CALENDAR);\n  ThrowIfCalendarsNotEqual(calendar, otherCalendar, 'compute difference between months');\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'date', ['week', 'day'], 'month', 'year');\n  resolvedOptions.largestUnit = settings.largestUnit;\n\n  const fieldNames = CalendarFields(calendar, ['monthCode', 'year']) as AnyTemporalKey[];\n  const thisFields = PrepareTemporalFields(yearMonth, fieldNames, []);\n  thisFields.day = 1;\n  const thisDate = CalendarDateFromFields(calendar, thisFields);\n  const otherFields = PrepareTemporalFields(other, fieldNames, []);\n  otherFields.day = 1;\n  const otherDate = CalendarDateFromFields(calendar, otherFields);\n\n  let { years, months } = CalendarDateUntil(calendar, thisDate, otherDate, resolvedOptions);\n\n  if (settings.smallestUnit !== 'month' || settings.roundingIncrement !== 1) {\n    ({ years, months } = RoundDuration(\n      years,\n      months,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      settings.roundingIncrement,\n      settings.smallestUnit,\n      settings.roundingMode,\n      thisDate\n    ));\n  }\n\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(sign * years, sign * months, 0, 0, 0, 0, 0, 0, 0, 0);\n}\n\nexport function DifferenceTemporalZonedDateTime(\n  operation: DifferenceOperation,\n  zonedDateTime: Temporal.ZonedDateTime,\n  otherParam: ZonedDateTimeParams['until'][0],\n  options: ZonedDateTimeParams['until'][1]\n): Temporal.Duration {\n  const sign = operation === 'since' ? -1 : 1;\n  const other = ToTemporalZonedDateTime(otherParam);\n  const calendar = GetSlot(zonedDateTime, CALENDAR);\n  const otherCalendar = GetSlot(other, CALENDAR);\n  ThrowIfCalendarsNotEqual(calendar, otherCalendar, 'compute difference between dates');\n\n  const resolvedOptions = CopyOptions(options);\n  const settings = GetDifferenceSettings(operation, resolvedOptions, 'datetime', [], 'nanosecond', 'hour');\n  resolvedOptions.largestUnit = settings.largestUnit;\n\n  const ns1 = GetSlot(zonedDateTime, EPOCHNANOSECONDS);\n  const ns2 = GetSlot(other, EPOCHNANOSECONDS);\n  let years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds;\n  if (\n    settings.largestUnit !== 'year' &&\n    settings.largestUnit !== 'month' &&\n    settings.largestUnit !== 'week' &&\n    settings.largestUnit !== 'day'\n  ) {\n    // The user is only asking for a time difference, so return difference of instants.\n    years = 0;\n    months = 0;\n    weeks = 0;\n    days = 0;\n    ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = DifferenceInstant(\n      ns1,\n      ns2,\n      settings.roundingIncrement,\n      settings.smallestUnit as Temporal.TimeUnit,\n      settings.largestUnit as Temporal.TimeUnit,\n      settings.roundingMode\n    ));\n  } else {\n    const timeZone = GetSlot(zonedDateTime, TIME_ZONE);\n    if (!TimeZoneEquals(timeZone, GetSlot(other, TIME_ZONE))) {\n      throw new RangeError(\n        \"When calculating difference between time zones, largestUnit must be 'hours' \" +\n          'or smaller because day lengths can vary between time zones due to DST or time zone offset changes.'\n      );\n    }\n    ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n      DifferenceZonedDateTime(ns1, ns2, timeZone, calendar, settings.largestUnit, resolvedOptions));\n    ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = RoundDuration(\n      years,\n      months,\n      weeks,\n      days,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds,\n      settings.roundingIncrement,\n      settings.smallestUnit,\n      settings.roundingMode,\n      zonedDateTime\n    ));\n    ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n      AdjustRoundedDurationDays(\n        years,\n        months,\n        weeks,\n        days,\n        hours,\n        minutes,\n        seconds,\n        milliseconds,\n        microseconds,\n        nanoseconds,\n        settings.roundingIncrement,\n        settings.smallestUnit,\n        settings.roundingMode,\n        zonedDateTime\n      ));\n  }\n\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(\n    sign * years,\n    sign * months,\n    sign * weeks,\n    sign * days,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n}\n\nexport function AddISODate(\n  yearParam: number,\n  monthParam: number,\n  dayParam: number,\n  yearsParam: number,\n  monthsParam: number,\n  weeksParam: number,\n  daysParam: number,\n  overflow: Temporal.ArithmeticOptions['overflow']\n) {\n  let year = yearParam;\n  let month = monthParam;\n  let day = dayParam;\n  let years = yearsParam;\n  let months = monthsParam;\n  let weeks = weeksParam;\n  let days = daysParam;\n\n  year += years;\n  month += months;\n  ({ year, month } = BalanceISOYearMonth(year, month));\n  ({ year, month, day } = RegulateISODate(year, month, day, overflow));\n  days += 7 * weeks;\n  day += days;\n  ({ year, month, day } = BalanceISODate(year, month, day));\n  return { year, month, day };\n}\n\nfunction AddTime(\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number,\n  hours: number,\n  minutes: number,\n  seconds: number,\n  milliseconds: number,\n  microseconds: number,\n  nanoseconds: number\n) {\n  let hour = hourParam;\n  let minute = minuteParam;\n  let second = secondParam;\n  let millisecond = millisecondParam;\n  let microsecond = microsecondParam;\n  let nanosecond = nanosecondParam;\n\n  hour += hours;\n  minute += minutes;\n  second += seconds;\n  millisecond += milliseconds;\n  microsecond += microseconds;\n  nanosecond += nanoseconds;\n  let deltaDays = 0;\n  ({ deltaDays, hour, minute, second, millisecond, microsecond, nanosecond } = BalanceTime(\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond\n  ));\n  return { deltaDays, hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nfunction AddDuration(\n  y1: number,\n  mon1: number,\n  w1: number,\n  d1: number,\n  h1: number,\n  min1: number,\n  s1: number,\n  ms1: number,\n  s1: number,\n  ns1: number,\n  y2: number,\n  mon2: number,\n  w2: number,\n  d2: number,\n  h2: number,\n  min2: number,\n  s2: number,\n  ms2: number,\n  s2: number,\n  ns2: number,\n  relativeTo: ReturnType<typeof ToRelativeTemporalObject>\n) {\n  const largestUnit1 = DefaultTemporalLargestUnit(y1, mon1, w1, d1, h1, min1, s1, ms1, s1, ns1);\n  const largestUnit2 = DefaultTemporalLargestUnit(y2, mon2, w2, d2, h2, min2, s2, ms2, s2, ns2);\n  const largestUnit = LargerOfTwoTemporalUnits(largestUnit1, largestUnit2);\n\n  let years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds;\n  if (!relativeTo) {\n    if (largestUnit === 'year' || largestUnit === 'month' || largestUnit === 'week') {\n      throw new RangeError('relativeTo is required for years, months, or weeks arithmetic');\n    }\n    years = months = weeks = 0;\n    ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n      d1 + d2,\n      JSBI.add(JSBI.BigInt(h1), JSBI.BigInt(h2)),\n      JSBI.add(JSBI.BigInt(min1), JSBI.BigInt(min2)),\n      JSBI.add(JSBI.BigInt(s1), JSBI.BigInt(s2)),\n      JSBI.add(JSBI.BigInt(ms1), JSBI.BigInt(ms2)),\n      JSBI.add(JSBI.BigInt(s1), JSBI.BigInt(s2)),\n      JSBI.add(JSBI.BigInt(ns1), JSBI.BigInt(ns2)),\n      largestUnit\n    ));\n  } else if (IsTemporalDate(relativeTo)) {\n    const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n    const calendar = GetSlot(relativeTo, CALENDAR);\n\n    const dateDuration1 = new TemporalDuration(y1, mon1, w1, d1, 0, 0, 0, 0, 0, 0);\n    const dateDuration2 = new TemporalDuration(y2, mon2, w2, d2, 0, 0, 0, 0, 0, 0);\n    const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n    const intermediate = CalendarDateAdd(calendar, relativeTo, dateDuration1, undefined, dateAdd);\n    const end = CalendarDateAdd(calendar, intermediate, dateDuration2, undefined, dateAdd);\n\n    const dateLargestUnit = LargerOfTwoTemporalUnits('day', largestUnit) as Temporal.DateUnit;\n    const differenceOptions = ObjectCreate(null) as Temporal.DifferenceOptions<Temporal.DateUnit>;\n    differenceOptions.largestUnit = dateLargestUnit;\n    ({ years, months, weeks, days } = CalendarDateUntil(calendar, relativeTo, end, differenceOptions));\n    // Signs of date part and time part may not agree; balance them together\n    ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n      days,\n      JSBI.add(JSBI.BigInt(h1), JSBI.BigInt(h2)),\n      JSBI.add(JSBI.BigInt(min1), JSBI.BigInt(min2)),\n      JSBI.add(JSBI.BigInt(s1), JSBI.BigInt(s2)),\n      JSBI.add(JSBI.BigInt(ms1), JSBI.BigInt(ms2)),\n      JSBI.add(JSBI.BigInt(s1), JSBI.BigInt(s2)),\n      JSBI.add(JSBI.BigInt(ns1), JSBI.BigInt(ns2)),\n      largestUnit\n    ));\n  } else {\n    // relativeTo is a ZonedDateTime\n    const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n    const timeZone = GetSlot(relativeTo, TIME_ZONE);\n    const calendar = GetSlot(relativeTo, CALENDAR);\n    const intermediateNs = AddZonedDateTime(\n      GetSlot(relativeTo, INSTANT),\n      timeZone,\n      calendar,\n      y1,\n      mon1,\n      w1,\n      d1,\n      h1,\n      min1,\n      s1,\n      ms1,\n      s1,\n      ns1\n    );\n    const endNs = AddZonedDateTime(\n      new TemporalInstant(intermediateNs),\n      timeZone,\n      calendar,\n      y2,\n      mon2,\n      w2,\n      d2,\n      h2,\n      min2,\n      s2,\n      ms2,\n      s2,\n      ns2\n    );\n    if (largestUnit !== 'year' && largestUnit !== 'month' && largestUnit !== 'week' && largestUnit !== 'day') {\n      // The user is only asking for a time difference, so return difference of instants.\n      years = 0;\n      months = 0;\n      weeks = 0;\n      days = 0;\n      ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = DifferenceInstant(\n        GetSlot(relativeTo, EPOCHNANOSECONDS),\n        endNs,\n        1,\n        'nanosecond',\n        largestUnit,\n        'halfExpand'\n      ));\n    } else {\n      ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n        DifferenceZonedDateTime(\n          GetSlot(relativeTo, EPOCHNANOSECONDS),\n          endNs,\n          timeZone,\n          calendar,\n          largestUnit,\n          ObjectCreate(null) as Temporal.DifferenceOptions<Temporal.DateTimeUnit>\n        ));\n    }\n  }\n\n  RejectDuration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nfunction AddInstant(\n  epochNanoseconds: JSBI,\n  h: number | JSBI,\n  min: number | JSBI,\n  s: number | JSBI,\n  ms: number | JSBI,\n  s: number | JSBI,\n  ns: number | JSBI\n) {\n  let sum = ZERO;\n  sum = JSBI.add(sum, JSBI.BigInt(ns));\n  sum = JSBI.add(sum, JSBI.multiply(JSBI.BigInt(s), THOUSAND));\n  sum = JSBI.add(sum, JSBI.multiply(JSBI.BigInt(ms), MILLION));\n  sum = JSBI.add(sum, JSBI.multiply(JSBI.BigInt(s), BILLION));\n  sum = JSBI.add(sum, JSBI.multiply(JSBI.BigInt(min), JSBI.BigInt(60 * 1e9)));\n  sum = JSBI.add(sum, JSBI.multiply(JSBI.BigInt(h), JSBI.BigInt(60 * 60 * 1e9)));\n\n  const result = JSBI.add(epochNanoseconds, sum);\n  ValidateEpochNanoseconds(result);\n  return result;\n}\n\nfunction AddDateTime(\n  year: number,\n  month: number,\n  day: number,\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number,\n  calendar: CalendarSlot,\n  years: number,\n  months: number,\n  weeks: number,\n  daysParam: number,\n  hours: number,\n  minutes: number,\n  seconds: number,\n  milliseconds: number,\n  microseconds: number,\n  nanoseconds: number,\n  options?: Temporal.ArithmeticOptions\n) {\n  let days = daysParam;\n  // Add the time part\n  let { deltaDays, hour, minute, second, millisecond, microsecond, nanosecond } = AddTime(\n    hourParam,\n    minuteParam,\n    secondParam,\n    millisecondParam,\n    microsecondParam,\n    nanosecondParam,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds\n  );\n  days += deltaDays;\n\n  // Delegate the date part addition to the calendar\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  const datePart = CreateTemporalDate(year, month, day, calendar);\n  const dateDuration = new TemporalDuration(years, months, weeks, days, 0, 0, 0, 0, 0, 0);\n  const addedDate = CalendarDateAdd(calendar, datePart, dateDuration, options);\n\n  return {\n    year: GetSlot(addedDate, ISO_YEAR),\n    month: GetSlot(addedDate, ISO_MONTH),\n    day: GetSlot(addedDate, ISO_DAY),\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond\n  };\n}\n\nexport function AddZonedDateTime(\n  instant: Temporal.Instant,\n  timeZone: string | Temporal.TimeZoneProtocol,\n  calendar: CalendarSlot,\n  years: number,\n  months: number,\n  weeks: number,\n  days: number,\n  h: number | JSBI,\n  min: number | JSBI,\n  s: number | JSBI,\n  ms: number | JSBI,\n  s: number | JSBI,\n  ns: number | JSBI,\n  options?: Temporal.ArithmeticOptions\n) {\n  // If only time is to be added, then use Instant math. It's not OK to fall\n  // through to the date/time code below because compatible disambiguation in\n  // the PlainDateTime=>Instant conversion will change the offset of any\n  // ZonedDateTime in the repeated clock time after a backwards transition.\n  // When adding/subtracting time units and not dates, this disambiguation is\n  // not expected and so is avoided below via a fast path for time-only\n  // arithmetic.\n  // BTW, this behavior is similar in spirit to offset: 'prefer' in `with`.\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  if (DurationSign(years, months, weeks, days, 0, 0, 0, 0, 0, 0) === 0) {\n    return AddInstant(GetSlot(instant, EPOCHNANOSECONDS), h, min, s, ms, s, ns);\n  }\n\n  // RFC 5545 requires the date portion to be added in calendar days and the\n  // time portion to be added in exact time.\n  const dt = GetPlainDateTimeFor(timeZone, instant, calendar);\n  const datePart = CreateTemporalDate(GetSlot(dt, ISO_YEAR), GetSlot(dt, ISO_MONTH), GetSlot(dt, ISO_DAY), calendar);\n  const dateDuration = new TemporalDuration(years, months, weeks, days, 0, 0, 0, 0, 0, 0);\n  const addedDate = CalendarDateAdd(calendar, datePart, dateDuration, options);\n  const dtIntermediate = CreateTemporalDateTime(\n    GetSlot(addedDate, ISO_YEAR),\n    GetSlot(addedDate, ISO_MONTH),\n    GetSlot(addedDate, ISO_DAY),\n    GetSlot(dt, ISO_HOUR),\n    GetSlot(dt, ISO_MINUTE),\n    GetSlot(dt, ISO_SECOND),\n    GetSlot(dt, ISO_MILLISECOND),\n    GetSlot(dt, ISO_MICROSECOND),\n    GetSlot(dt, ISO_NANOSECOND),\n    calendar\n  );\n\n  // Note that 'compatible' is used below because this disambiguation behavior\n  // is required by RFC 5545.\n  const instantIntermediate = GetInstantFor(timeZone, dtIntermediate, 'compatible');\n  return AddInstant(GetSlot(instantIntermediate, EPOCHNANOSECONDS), h, min, s, ms, s, ns);\n}\n\ntype AddSubtractOperation = 'add' | 'subtract';\n\nexport function AddDurationToOrSubtractDurationFromDuration(\n  operation: AddSubtractOperation,\n  duration: Temporal.Duration,\n  other: DurationParams['add'][0],\n  optionsParam: DurationParams['add'][1]\n): Temporal.Duration {\n  const sign = operation === 'subtract' ? -1 : 1;\n  let { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n    ToTemporalDurationRecord(other);\n  const options = GetOptionsObject(optionsParam);\n  const relativeTo = ToRelativeTemporalObject(options);\n  ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = AddDuration(\n    GetSlot(duration, YEARS),\n    GetSlot(duration, MONTHS),\n    GetSlot(duration, WEEKS),\n    GetSlot(duration, DAYS),\n    GetSlot(duration, HOURS),\n    GetSlot(duration, MINUTES),\n    GetSlot(duration, SECONDS),\n    GetSlot(duration, MILLISECONDS),\n    GetSlot(duration, MICROSECONDS),\n    GetSlot(duration, NANOSECONDS),\n    sign * years,\n    sign * months,\n    sign * weeks,\n    sign * days,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds,\n    relativeTo\n  ));\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  return new Duration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n}\n\nexport function AddDurationToOrSubtractDurationFromInstant(\n  operation: AddSubtractOperation,\n  instant: Temporal.Instant,\n  durationLike: InstantParams['add'][0]\n): Temporal.Instant {\n  const sign = operation === 'subtract' ? -1 : 1;\n  const { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = ToLimitedTemporalDuration(durationLike, [\n    'years',\n    'months',\n    'weeks',\n    'days'\n  ]);\n  const ns = AddInstant(\n    GetSlot(instant, EPOCHNANOSECONDS),\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n  const Instant = GetIntrinsic('%Temporal.Instant%');\n  return new Instant(ns);\n}\n\nexport function AddDurationToOrSubtractDurationFromPlainDateTime(\n  operation: AddSubtractOperation,\n  dateTime: Temporal.PlainDateTime,\n  durationLike: PlainDateTimeParams['add'][0],\n  optionsParam: PlainDateTimeParams['add'][1]\n): Temporal.PlainDateTime {\n  const sign = operation === 'subtract' ? -1 : 1;\n  const { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n    ToTemporalDurationRecord(durationLike);\n  const options = GetOptionsObject(optionsParam);\n  const calendar = GetSlot(dateTime, CALENDAR);\n  const { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = AddDateTime(\n    GetSlot(dateTime, ISO_YEAR),\n    GetSlot(dateTime, ISO_MONTH),\n    GetSlot(dateTime, ISO_DAY),\n    GetSlot(dateTime, ISO_HOUR),\n    GetSlot(dateTime, ISO_MINUTE),\n    GetSlot(dateTime, ISO_SECOND),\n    GetSlot(dateTime, ISO_MILLISECOND),\n    GetSlot(dateTime, ISO_MICROSECOND),\n    GetSlot(dateTime, ISO_NANOSECOND),\n    calendar,\n    sign * years,\n    sign * months,\n    sign * weeks,\n    sign * days,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds,\n    options\n  );\n  return CreateTemporalDateTime(year, month, day, hour, minute, second, millisecond, microsecond, nanosecond, calendar);\n}\n\nexport function AddDurationToOrSubtractDurationFromPlainTime(\n  operation: AddSubtractOperation,\n  temporalTime: Temporal.PlainTime,\n  durationLike: PlainTimeParams['add'][0]\n): Temporal.PlainTime {\n  const sign = operation === 'subtract' ? -1 : 1;\n  const { hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = ToTemporalDurationRecord(durationLike);\n  let { hour, minute, second, millisecond, microsecond, nanosecond } = AddTime(\n    GetSlot(temporalTime, ISO_HOUR),\n    GetSlot(temporalTime, ISO_MINUTE),\n    GetSlot(temporalTime, ISO_SECOND),\n    GetSlot(temporalTime, ISO_MILLISECOND),\n    GetSlot(temporalTime, ISO_MICROSECOND),\n    GetSlot(temporalTime, ISO_NANOSECOND),\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds\n  );\n  ({ hour, minute, second, millisecond, microsecond, nanosecond } = RegulateTime(\n    hour,\n    minute,\n    second,\n    millisecond,\n    microsecond,\n    nanosecond,\n    'reject'\n  ));\n  const PlainTime = GetIntrinsic('%Temporal.PlainTime%');\n  return new PlainTime(hour, minute, second, millisecond, microsecond, nanosecond);\n}\n\nexport function AddDurationToOrSubtractDurationFromPlainYearMonth(\n  operation: AddSubtractOperation,\n  yearMonth: Temporal.PlainYearMonth,\n  durationLike: PlainYearMonthParams['add'][0],\n  optionsParam: PlainYearMonthParams['add'][1]\n): Temporal.PlainYearMonth {\n  let duration = ToTemporalDurationRecord(durationLike);\n  if (operation === 'subtract') {\n    duration = {\n      years: -duration.years,\n      months: -duration.months,\n      weeks: -duration.weeks,\n      days: -duration.days,\n      hours: -duration.hours,\n      minutes: -duration.minutes,\n      seconds: -duration.seconds,\n      milliseconds: -duration.milliseconds,\n      microseconds: -duration.microseconds,\n      nanoseconds: -duration.nanoseconds\n    };\n  }\n  let { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = duration;\n  ({ days } = BalanceDuration(days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds, 'day'));\n\n  const options = GetOptionsObject(optionsParam);\n\n  const calendar = GetSlot(yearMonth, CALENDAR);\n  const fieldNames = CalendarFields(calendar, ['monthCode', 'year'] as const);\n  const fields = PrepareTemporalFields(yearMonth, fieldNames, []);\n  const fieldsCopy = ObjectCreate(null);\n  CopyDataProperties(fieldsCopy, fields, []);\n  fields.day = 1;\n  // PrepareTemporalFields returns a type where 'day' is potentially undefined,\n  // but TS doesn't narrow the type as a result of the assignment above.\n  uncheckedAssertNarrowedType<typeof fields & { day: number }>(fields, '`day` is guaranteed to be non-undefined');\n  let startDate = CalendarDateFromFields(calendar, fields);\n  const sign = DurationSign(years, months, weeks, days, 0, 0, 0, 0, 0, 0);\n  const dateAdd = GetMethod(calendar, 'dateAdd');\n  const Duration = GetIntrinsic('%Temporal.Duration%');\n  if (sign < 0) {\n    const oneMonthDuration = new Duration(0, 1, 0, 0, 0, 0, 0, 0, 0, 0);\n    const nextMonth = CalendarDateAdd(calendar, startDate, oneMonthDuration, undefined, dateAdd);\n    const minusDayDuration = new Duration(0, 0, 0, -1, 0, 0, 0, 0, 0, 0);\n    const endOfMonth = CalendarDateAdd(calendar, nextMonth, minusDayDuration, undefined, dateAdd);\n    fieldsCopy.day = CalendarDay(calendar, endOfMonth);\n    startDate = CalendarDateFromFields(calendar, fieldsCopy);\n  }\n  const durationToAdd = new Duration(years, months, weeks, days, 0, 0, 0, 0, 0, 0);\n  const optionsCopy = CopyOptions(options);\n  const addedDate = CalendarDateAdd(calendar, startDate, durationToAdd, options, dateAdd);\n  const addedDateFields = PrepareTemporalFields(addedDate, fieldNames, []);\n\n  return CalendarYearMonthFromFields(calendar, addedDateFields, optionsCopy);\n}\n\nexport function AddDurationToOrSubtractDurationFromZonedDateTime(\n  operation: AddSubtractOperation,\n  zonedDateTime: Temporal.ZonedDateTime,\n  durationLike: ZonedDateTimeParams['add'][0],\n  optionsParam: ZonedDateTimeParams['add'][1]\n): Temporal.ZonedDateTime {\n  const sign = operation === 'subtract' ? -1 : 1;\n  const { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n    ToTemporalDurationRecord(durationLike);\n  const options = GetOptionsObject(optionsParam);\n  const timeZone = GetSlot(zonedDateTime, TIME_ZONE);\n  const calendar = GetSlot(zonedDateTime, CALENDAR);\n  const epochNanoseconds = AddZonedDateTime(\n    GetSlot(zonedDateTime, INSTANT),\n    timeZone,\n    calendar,\n    sign * years,\n    sign * months,\n    sign * weeks,\n    sign * days,\n    sign * hours,\n    sign * minutes,\n    sign * seconds,\n    sign * milliseconds,\n    sign * microseconds,\n    sign * nanoseconds,\n    options\n  );\n  return CreateTemporalZonedDateTime(epochNanoseconds, timeZone, calendar);\n}\n\nfunction RoundNumberToIncrement(quantity: JSBI, increment: JSBI, mode: Temporal.RoundingMode) {\n  if (JSBI.equal(increment, ONE)) return quantity;\n  let { quotient, remainder } = divmod(quantity, increment);\n  if (JSBI.equal(remainder, ZERO)) return quantity;\n  const sign = JSBI.lessThan(remainder, ZERO) ? -1 : 1;\n  const tiebreaker = abs(JSBI.multiply(remainder, JSBI.BigInt(2)));\n  const tie = JSBI.equal(tiebreaker, increment);\n  const expandIsNearer = JSBI.greaterThan(tiebreaker, increment);\n  switch (mode) {\n    case 'ceil':\n      if (sign > 0) quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      break;\n    case 'floor':\n      if (sign < 0) quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      break;\n    case 'expand':\n      // always expand if there is a remainder\n      quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      break;\n    case 'trunc':\n      // no change needed, because divmod is a truncation\n      break;\n    case 'halfCeil':\n      if (expandIsNearer || (tie && sign > 0)) {\n        quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      }\n      break;\n    case 'halfFloor':\n      if (expandIsNearer || (tie && sign < 0)) {\n        quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      }\n      break;\n    case 'halfExpand':\n      // \"half up away from zero\"\n      if (expandIsNearer || tie) {\n        quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      }\n      break;\n    case 'halfTrunc':\n      if (expandIsNearer) {\n        quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      }\n      break;\n    case 'halfEven':\n      if (expandIsNearer || (tie && JSBI.toNumber(JSBI.remainder(abs(quotient), JSBI.BigInt(2))) === 1)) {\n        quotient = JSBI.add(quotient, JSBI.BigInt(sign));\n      }\n      break;\n  }\n  return JSBI.multiply(quotient, increment);\n}\n\nexport function RoundInstant(\n  epochNs: JSBI,\n  increment: number,\n  unit: keyof typeof nsPerTimeUnit,\n  roundingMode: Temporal.RoundingMode\n) {\n  let { remainder } = NonNegativeBigIntDivmod(epochNs, DAY_NANOS);\n  const wholeDays = JSBI.subtract(epochNs, remainder);\n  const roundedRemainder = RoundNumberToIncrement(\n    remainder,\n    JSBI.BigInt(nsPerTimeUnit[unit] * increment),\n    roundingMode\n  );\n  return JSBI.add(wholeDays, roundedRemainder);\n}\n\nexport function RoundISODateTime(\n  yearParam: number,\n  monthParam: number,\n  dayParam: number,\n  hourParam: number,\n  minuteParam: number,\n  secondParam: number,\n  millisecondParam: number,\n  microsecondParam: number,\n  nanosecondParam: number,\n  increment: number,\n  unit: UnitSmallerThanOrEqualTo<'day'>,\n  roundingMode: Temporal.RoundingMode,\n  dayLengthNs = 86400e9\n) {\n  const { deltaDays, hour, minute, second, millisecond, microsecond, nanosecond } = RoundTime(\n    hourParam,\n    minuteParam,\n    secondParam,\n    millisecondParam,\n    microsecondParam,\n    nanosecondParam,\n    increment,\n    unit,\n    roundingMode,\n    dayLengthNs\n  );\n  const { year, month, day } = BalanceISODate(yearParam, monthParam, dayParam + deltaDays);\n  return { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond };\n}\n\nexport function RoundTime(\n  hour: number,\n  minute: number,\n  second: number,\n  millisecond: number,\n  microsecond: number,\n  nanosecond: number,\n  increment: number,\n  unit: keyof typeof nsPerTimeUnit | 'day',\n  roundingMode: Temporal.RoundingMode,\n  dayLengthNs = 86400e9\n) {\n  let quantity = ZERO;\n  switch (unit) {\n    case 'day':\n    case 'hour':\n      quantity = JSBI.BigInt(hour);\n    // fall through\n    case 'minute':\n      quantity = JSBI.add(JSBI.multiply(quantity, SIXTY), JSBI.BigInt(minute));\n    // fall through\n    case 'second':\n      quantity = JSBI.add(JSBI.multiply(quantity, SIXTY), JSBI.BigInt(second));\n    // fall through\n    case 'millisecond':\n      quantity = JSBI.add(JSBI.multiply(quantity, THOUSAND), JSBI.BigInt(millisecond));\n    // fall through\n    case 'microsecond':\n      quantity = JSBI.add(JSBI.multiply(quantity, THOUSAND), JSBI.BigInt(microsecond));\n    // fall through\n    case 'nanosecond':\n      quantity = JSBI.add(JSBI.multiply(quantity, THOUSAND), JSBI.BigInt(nanosecond));\n  }\n  const nsPerUnit = unit === 'day' ? dayLengthNs : nsPerTimeUnit[unit];\n  const rounded = RoundNumberToIncrement(quantity, JSBI.BigInt(nsPerUnit * increment), roundingMode);\n  const result = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(nsPerUnit)));\n  switch (unit) {\n    case 'day':\n      return { deltaDays: result, hour: 0, minute: 0, second: 0, millisecond: 0, microsecond: 0, nanosecond: 0 };\n    case 'hour':\n      return BalanceTime(result, 0, 0, 0, 0, 0);\n    case 'minute':\n      return BalanceTime(hour, result, 0, 0, 0, 0);\n    case 'second':\n      return BalanceTime(hour, minute, result, 0, 0, 0);\n    case 'millisecond':\n      return BalanceTime(hour, minute, second, result, 0, 0);\n    case 'microsecond':\n      return BalanceTime(hour, minute, second, millisecond, result, 0);\n    case 'nanosecond':\n      return BalanceTime(hour, minute, second, millisecond, microsecond, result);\n    default:\n      throw new Error(`Invalid unit ${unit}`);\n  }\n}\n\nfunction DaysUntil(\n  earlier: Temporal.PlainDate | Temporal.PlainDateTime | Temporal.ZonedDateTime,\n  later: Temporal.PlainDate | Temporal.PlainDateTime | Temporal.ZonedDateTime\n) {\n  return DifferenceISODate(\n    GetSlot(earlier, ISO_YEAR),\n    GetSlot(earlier, ISO_MONTH),\n    GetSlot(earlier, ISO_DAY),\n    GetSlot(later, ISO_YEAR),\n    GetSlot(later, ISO_MONTH),\n    GetSlot(later, ISO_DAY),\n    'day'\n  ).days;\n}\n\nfunction MoveRelativeDate(\n  calendar: CalendarSlot,\n  relativeToParam: NonNullable<ReturnType<typeof ToRelativeTemporalObject>>,\n  duration: Temporal.Duration,\n  dateAdd: Temporal.CalendarProtocol['dateAdd'] | undefined\n) {\n  const later = CalendarDateAdd(calendar, relativeToParam, duration, undefined, dateAdd);\n  const days = DaysUntil(relativeToParam, later);\n  return { relativeTo: later, days };\n}\n\nexport function MoveRelativeZonedDateTime(\n  relativeTo: Temporal.ZonedDateTime,\n  years: number,\n  months: number,\n  weeks: number,\n  days: number\n) {\n  const timeZone = GetSlot(relativeTo, TIME_ZONE);\n  const calendar = GetSlot(relativeTo, CALENDAR);\n  const intermediateNs = AddZonedDateTime(\n    GetSlot(relativeTo, INSTANT),\n    timeZone,\n    calendar,\n    years,\n    months,\n    weeks,\n    days,\n    0,\n    0,\n    0,\n    0,\n    0,\n    0\n  );\n  return CreateTemporalZonedDateTime(intermediateNs, timeZone, calendar);\n}\n\nexport function AdjustRoundedDurationDays(\n  yearsParam: number,\n  monthsParam: number,\n  weeksParam: number,\n  daysParam: number,\n  hoursParam: number,\n  minutesParam: number,\n  secondsParam: number,\n  millisecondsParam: number,\n  microsecondsParam: number,\n  nanosecondsParam: number,\n  increment: number,\n  unit: Temporal.DateTimeUnit,\n  roundingMode: Temporal.RoundingMode,\n  relativeTo: ReturnType<typeof ToRelativeTemporalObject>\n) {\n  let years = yearsParam;\n  let months = monthsParam;\n  let weeks = weeksParam;\n  let days = daysParam;\n  let hours = hoursParam;\n  let minutes = minutesParam;\n  let seconds = secondsParam;\n  let milliseconds = millisecondsParam;\n  let microseconds = microsecondsParam;\n  let nanoseconds = nanosecondsParam;\n  if (\n    !IsTemporalZonedDateTime(relativeTo) ||\n    unit === 'year' ||\n    unit === 'month' ||\n    unit === 'week' ||\n    unit === 'day' ||\n    (unit === 'nanosecond' && increment === 1)\n  ) {\n    return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n  }\n\n  // There's one more round of rounding possible: if relativeTo is a\n  // ZonedDateTime, the time units could have rounded up into enough hours\n  // to exceed the day length. If this happens, grow the date part by a\n  // single day and re-run exact time rounding on the smaller remainder. DO\n  // NOT RECURSE, because once the extra hours are sucked up into the date\n  // duration, there's no way for another full day to come from the next\n  // round of rounding. And if it were possible (e.g. contrived calendar\n  // with 30-minute-long \"days\") then it'd risk an infinite loop.\n  let timeRemainderNs = TotalDurationNanoseconds(\n    0,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds,\n    0\n  );\n  const direction = MathSign(JSBI.toNumber(timeRemainderNs));\n\n  const timeZone = GetSlot(relativeTo, TIME_ZONE);\n  const calendar = GetSlot(relativeTo, CALENDAR);\n  const dayStart = AddZonedDateTime(\n    GetSlot(relativeTo, INSTANT),\n    timeZone,\n    calendar,\n    years,\n    months,\n    weeks,\n    days,\n    0,\n    0,\n    0,\n    0,\n    0,\n    0\n  );\n  const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n  const dayEnd = AddZonedDateTime(\n    new TemporalInstant(dayStart),\n    timeZone,\n    calendar,\n    0,\n    0,\n    0,\n    direction,\n    0,\n    0,\n    0,\n    0,\n    0,\n    0\n  );\n  const dayLengthNs = JSBI.subtract(dayEnd, dayStart);\n\n  if (\n    JSBI.greaterThanOrEqual(JSBI.multiply(JSBI.subtract(timeRemainderNs, dayLengthNs), JSBI.BigInt(direction)), ZERO)\n  ) {\n    ({ years, months, weeks, days } = AddDuration(\n      years,\n      months,\n      weeks,\n      days,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      direction,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      relativeTo\n    ));\n    timeRemainderNs = RoundInstant(JSBI.subtract(timeRemainderNs, dayLengthNs), increment, unit, roundingMode);\n    ({ hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = BalanceDuration(\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      JSBI.toNumber(timeRemainderNs),\n      'hour'\n    ));\n  }\n  return { years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds };\n}\n\nexport function RoundDuration(\n  yearsParam: number,\n  monthsParam: number,\n  weeksParam: number,\n  daysParam: number,\n  hoursParam: number,\n  minutesParam: number,\n  secondsParam: number,\n  millisecondsParam: number,\n  microsecondsParam: number,\n  nanosecondsParam: number,\n  increment: number,\n  unit: Temporal.DateTimeUnit,\n  roundingMode: Temporal.RoundingMode,\n  relativeToParam: ReturnType<typeof ToRelativeTemporalObject> = undefined\n) {\n  let years = yearsParam;\n  let months = monthsParam;\n  let weeks = weeksParam;\n  let days = daysParam;\n  let hours = hoursParam;\n  let minutes = minutesParam;\n  let seconds = secondsParam;\n  let milliseconds = millisecondsParam;\n  let microseconds = microsecondsParam;\n  let nanoseconds = JSBI.BigInt(nanosecondsParam);\n  const TemporalDuration = GetIntrinsic('%Temporal.Duration%');\n  let calendar, zdtRelative;\n  // A cast is used below because relativeTo will be either PlainDate or\n  // undefined for the rest of this long method (after any ZDT=>PlainDate\n  // conversion below), and TS isn't smart enough to know that the type has\n  // changed. See https://github.com/microsoft/TypeScript/issues/27706.\n  let relativeTo = relativeToParam as Temporal.PlainDate | undefined;\n  if (relativeTo) {\n    if (IsTemporalZonedDateTime(relativeTo)) {\n      zdtRelative = relativeTo;\n      relativeTo = ToTemporalDate(relativeTo);\n    } else if (!IsTemporalDate(relativeTo)) {\n      throw new TypeError('starting point must be PlainDate or ZonedDateTime');\n    }\n    calendar = GetSlot(relativeTo, CALENDAR);\n  }\n\n  // First convert time units up to days, if rounding to days or higher units.\n  // If rounding relative to a ZonedDateTime, then some days may not be 24h.\n  // TS doesn't know that `dayLengthNs` is only used if the unit is day or\n  // larger. We'll cast away `undefined` when it's used lower down below.\n  let dayLengthNs: JSBI | undefined;\n  if (unit === 'year' || unit === 'month' || unit === 'week' || unit === 'day') {\n    nanoseconds = TotalDurationNanoseconds(0, hours, minutes, seconds, milliseconds, microseconds, nanosecondsParam, 0);\n    let intermediate;\n    if (zdtRelative) {\n      intermediate = MoveRelativeZonedDateTime(zdtRelative, years, months, weeks, days);\n    }\n    let deltaDays;\n    let dayLength: number;\n    ({ days: deltaDays, nanoseconds, dayLengthNs: dayLength } = NanosecondsToDays(nanoseconds, intermediate));\n    dayLengthNs = JSBI.BigInt(dayLength);\n    days += deltaDays;\n    hours = minutes = seconds = milliseconds = microseconds = 0;\n  }\n\n  let total: number;\n  switch (unit) {\n    case 'year': {\n      if (!calendar) throw new RangeError('A starting point is required for years rounding');\n      assertExists(relativeTo);\n\n      // convert months and weeks to days by calculating difference(\n      // relativeTo + years, relativeTo + { years, months, weeks })\n      const yearsDuration = new TemporalDuration(years);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      const yearsLater = CalendarDateAdd(calendar, relativeTo, yearsDuration, undefined, dateAdd);\n      const yearsMonthsWeeks = new TemporalDuration(years, months, weeks);\n      const yearsMonthsWeeksLater = CalendarDateAdd(calendar, relativeTo, yearsMonthsWeeks, undefined, dateAdd);\n      const monthsWeeksInDays = DaysUntil(yearsLater, yearsMonthsWeeksLater);\n      relativeTo = yearsLater;\n      days += monthsWeeksInDays;\n\n      const wholeDays = new TemporalDuration(0, 0, 0, days);\n      const wholeDaysLater = CalendarDateAdd(calendar, relativeTo, wholeDays, undefined, dateAdd);\n      const untilOptions = ObjectCreate(null) as Temporal.DifferenceOptions<typeof unit>;\n      untilOptions.largestUnit = 'year';\n      const yearsPassed = CalendarDateUntil(calendar, relativeTo, wholeDaysLater, untilOptions).years;\n      years += yearsPassed;\n      const oldRelativeTo = relativeTo;\n      const yearsPassedDuration = new TemporalDuration(yearsPassed);\n      relativeTo = CalendarDateAdd(calendar, relativeTo, yearsPassedDuration, undefined, dateAdd);\n      const daysPassed = DaysUntil(oldRelativeTo, relativeTo);\n      days -= daysPassed;\n      const oneYear = new TemporalDuration(days < 0 ? -1 : 1);\n      let { days: oneYearDays } = MoveRelativeDate(calendar, relativeTo, oneYear, dateAdd);\n\n      // Note that `nanoseconds` below (here and in similar code for months,\n      // weeks, and days further below) isn't actually nanoseconds for the\n      // full date range.  Instead, it's a BigInt representation of total\n      // days multiplied by the number of nanoseconds in the last day of\n      // the duration. This lets us do days-or-larger rounding using BigInt\n      // math which reduces precision loss.\n      oneYearDays = MathAbs(oneYearDays);\n      // dayLengthNs is never undefined if unit is `day` or larger.\n      assertExists(dayLengthNs);\n      const divisor = JSBI.multiply(JSBI.BigInt(oneYearDays), dayLengthNs);\n      nanoseconds = JSBI.add(\n        JSBI.add(JSBI.multiply(divisor, JSBI.BigInt(years)), JSBI.multiply(JSBI.BigInt(days), dayLengthNs)),\n        nanoseconds\n      );\n      const rounded = RoundNumberToIncrement(nanoseconds, JSBI.multiply(divisor, JSBI.BigInt(increment)), roundingMode);\n      total = BigIntDivideToNumber(nanoseconds, divisor);\n      years = JSBI.toNumber(JSBI.divide(rounded, divisor));\n      nanoseconds = ZERO;\n      months = weeks = days = 0;\n      break;\n    }\n    case 'month': {\n      if (!calendar) throw new RangeError('A starting point is required for months rounding');\n      assertExists(relativeTo);\n\n      // convert weeks to days by calculating difference(relativeTo +\n      //   { years, months }, relativeTo + { years, months, weeks })\n      const yearsMonths = new TemporalDuration(years, months);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      const yearsMonthsLater = CalendarDateAdd(calendar, relativeTo, yearsMonths, undefined, dateAdd);\n      const yearsMonthsWeeks = new TemporalDuration(years, months, weeks);\n      const yearsMonthsWeeksLater = CalendarDateAdd(calendar, relativeTo, yearsMonthsWeeks, undefined, dateAdd);\n      const weeksInDays = DaysUntil(yearsMonthsLater, yearsMonthsWeeksLater);\n      relativeTo = yearsMonthsLater;\n      days += weeksInDays;\n\n      // Months may be different lengths of days depending on the calendar,\n      // convert days to months in a loop as described above under 'years'.\n      const sign = MathSign(days);\n      const oneMonth = new TemporalDuration(0, days < 0 ? -1 : 1);\n      let oneMonthDays: number;\n      ({ relativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      while (MathAbs(days) >= MathAbs(oneMonthDays)) {\n        months += sign;\n        days -= oneMonthDays;\n        ({ relativeTo, days: oneMonthDays } = MoveRelativeDate(calendar, relativeTo, oneMonth, dateAdd));\n      }\n      oneMonthDays = MathAbs(oneMonthDays);\n      // dayLengthNs is never undefined if unit is `day` or larger.\n      assertExists(dayLengthNs);\n      const divisor = JSBI.multiply(JSBI.BigInt(oneMonthDays), dayLengthNs);\n      nanoseconds = JSBI.add(\n        JSBI.add(JSBI.multiply(divisor, JSBI.BigInt(months)), JSBI.multiply(JSBI.BigInt(days), dayLengthNs)),\n        nanoseconds\n      );\n      const rounded = RoundNumberToIncrement(nanoseconds, JSBI.multiply(divisor, JSBI.BigInt(increment)), roundingMode);\n      total = BigIntDivideToNumber(nanoseconds, divisor);\n      months = JSBI.toNumber(JSBI.divide(rounded, divisor));\n      nanoseconds = ZERO;\n      weeks = days = 0;\n      break;\n    }\n    case 'week': {\n      if (!calendar) throw new RangeError('A starting point is required for weeks rounding');\n      assertExists(relativeTo);\n\n      // Weeks may be different lengths of days depending on the calendar,\n      // convert days to weeks in a loop as described above under 'years'.\n      const sign = MathSign(days);\n      const oneWeek = new TemporalDuration(0, 0, days < 0 ? -1 : 1);\n      const dateAdd = typeof calendar !== 'string' ? GetMethod(calendar, 'dateAdd') : undefined;\n      let oneWeekDays;\n      ({ relativeTo, days: oneWeekDays } = MoveRelativeDate(calendar, relativeTo, oneWeek, dateAdd));\n      while (MathAbs(days) >= MathAbs(oneWeekDays)) {\n        weeks += sign;\n        days -= oneWeekDays;\n        ({ relativeTo, days: oneWeekDays } = MoveRelativeDate(calendar, relativeTo, oneWeek, dateAdd));\n      }\n      oneWeekDays = MathAbs(oneWeekDays);\n      // dayLengthNs is never undefined if unit is `day` or larger.\n      assertExists(dayLengthNs);\n      const divisor = JSBI.multiply(JSBI.BigInt(oneWeekDays), dayLengthNs);\n      nanoseconds = JSBI.add(\n        JSBI.add(JSBI.multiply(divisor, JSBI.BigInt(weeks)), JSBI.multiply(JSBI.BigInt(days), dayLengthNs)),\n        nanoseconds\n      );\n      const rounded = RoundNumberToIncrement(nanoseconds, JSBI.multiply(divisor, JSBI.BigInt(increment)), roundingMode);\n      total = BigIntDivideToNumber(nanoseconds, divisor);\n      weeks = JSBI.toNumber(JSBI.divide(rounded, divisor));\n      nanoseconds = ZERO;\n      days = 0;\n      break;\n    }\n    case 'day': {\n      // dayLengthNs is never undefined if unit is `day` or larger.\n      assertExists(dayLengthNs);\n      const divisor = dayLengthNs;\n      nanoseconds = JSBI.add(JSBI.multiply(divisor, JSBI.BigInt(days)), nanoseconds);\n      const rounded = RoundNumberToIncrement(nanoseconds, JSBI.multiply(divisor, JSBI.BigInt(increment)), roundingMode);\n      total = BigIntDivideToNumber(nanoseconds, divisor);\n      days = JSBI.toNumber(JSBI.divide(rounded, divisor));\n      nanoseconds = ZERO;\n      break;\n    }\n    case 'hour': {\n      const divisor = 3600e9;\n      let allNanoseconds = JSBI.multiply(JSBI.BigInt(hours), JSBI.BigInt(3600e9));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(minutes), JSBI.BigInt(60e9)));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(seconds), BILLION));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(milliseconds), MILLION));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(microseconds), THOUSAND));\n      allNanoseconds = JSBI.add(allNanoseconds, nanoseconds);\n      total = BigIntDivideToNumber(allNanoseconds, JSBI.BigInt(divisor));\n      const rounded = RoundNumberToIncrement(allNanoseconds, JSBI.BigInt(divisor * increment), roundingMode);\n      hours = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(divisor)));\n      nanoseconds = ZERO;\n      minutes = seconds = milliseconds = microseconds = 0;\n      break;\n    }\n    case 'minute': {\n      const divisor = 60e9;\n      let allNanoseconds = JSBI.multiply(JSBI.BigInt(minutes), JSBI.BigInt(60e9));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(seconds), BILLION));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(milliseconds), MILLION));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(microseconds), THOUSAND));\n      allNanoseconds = JSBI.add(allNanoseconds, nanoseconds);\n      total = BigIntDivideToNumber(allNanoseconds, JSBI.BigInt(divisor));\n      const rounded = RoundNumberToIncrement(allNanoseconds, JSBI.BigInt(divisor * increment), roundingMode);\n      minutes = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(divisor)));\n      nanoseconds = ZERO;\n      seconds = milliseconds = microseconds = 0;\n      break;\n    }\n    case 'second': {\n      const divisor = 1e9;\n      let allNanoseconds = JSBI.multiply(JSBI.BigInt(seconds), BILLION);\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(milliseconds), MILLION));\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(microseconds), THOUSAND));\n      allNanoseconds = JSBI.add(allNanoseconds, nanoseconds);\n      total = BigIntDivideToNumber(allNanoseconds, JSBI.BigInt(divisor));\n      const rounded = RoundNumberToIncrement(allNanoseconds, JSBI.BigInt(divisor * increment), roundingMode);\n      seconds = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(divisor)));\n      nanoseconds = ZERO;\n      milliseconds = microseconds = 0;\n      break;\n    }\n    case 'millisecond': {\n      const divisor = 1e6;\n      let allNanoseconds = JSBI.multiply(JSBI.BigInt(milliseconds), MILLION);\n      allNanoseconds = JSBI.add(allNanoseconds, JSBI.multiply(JSBI.BigInt(microseconds), THOUSAND));\n      allNanoseconds = JSBI.add(allNanoseconds, nanoseconds);\n      total = BigIntDivideToNumber(allNanoseconds, JSBI.BigInt(divisor));\n      const rounded = RoundNumberToIncrement(allNanoseconds, JSBI.BigInt(divisor * increment), roundingMode);\n      milliseconds = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(divisor)));\n      nanoseconds = ZERO;\n      microseconds = 0;\n      break;\n    }\n    case 'microsecond': {\n      const divisor = 1e3;\n      let allNanoseconds = JSBI.multiply(JSBI.BigInt(microseconds), THOUSAND);\n      allNanoseconds = JSBI.add(allNanoseconds, nanoseconds);\n      total = BigIntDivideToNumber(allNanoseconds, JSBI.BigInt(divisor));\n      const rounded = RoundNumberToIncrement(allNanoseconds, JSBI.BigInt(divisor * increment), roundingMode);\n      microseconds = JSBI.toNumber(JSBI.divide(rounded, JSBI.BigInt(divisor)));\n      nanoseconds = ZERO;\n      break;\n    }\n    case 'nanosecond': {\n      total = JSBI.toNumber(nanoseconds);\n      nanoseconds = RoundNumberToIncrement(JSBI.BigInt(nanoseconds), JSBI.BigInt(increment), roundingMode);\n      break;\n    }\n  }\n  return {\n    years,\n    months,\n    weeks,\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds,\n    microseconds,\n    nanoseconds: JSBI.toNumber(nanoseconds),\n    total\n  };\n}\n\nexport function CompareISODate(y1: number, m1: number, d1: number, y2: number, m2: number, d2: number) {\n  for (const [x, y] of [\n    [y1, y2],\n    [m1, m2],\n    [d1, d2]\n  ]) {\n    if (x !== y) return ComparisonResult(x - y);\n  }\n  return 0;\n}\n\n// Not abstract operations from the spec\n\nfunction NonNegativeBigIntDivmod(x: JSBI, y: JSBI) {\n  let { quotient, remainder } = divmod(x, y);\n  if (JSBI.lessThan(remainder, ZERO)) {\n    quotient = JSBI.subtract(quotient, ONE);\n    remainder = JSBI.add(remainder, y);\n  }\n  return { quotient, remainder };\n}\n\nexport function BigIntFloorDiv(left: JSBI, right: JSBI) {\n  const { quotient, remainder } = divmod(left, right);\n  if (!isZero(remainder) && !isNegativeJSBI(left) != !isNegativeJSBI(right)) {\n    return JSBI.subtract(quotient, ONE);\n  }\n  return quotient;\n}\n\n/** Divide two JSBIs, and return the result as a Number, including the remainder. */\nexport function BigIntDivideToNumber(dividend: JSBI, divisor: JSBI) {\n  const { quotient, remainder } = divmod(dividend, divisor);\n  const result = JSBI.toNumber(quotient) + JSBI.toNumber(remainder) / JSBI.toNumber(divisor);\n  return result;\n}\n\n// Defaults to native bigint, or something \"native bigint-like\".\n// For users of Temporal that are running in environments without native BigInt,\n// the only guarantee we should give is that the returned object's toString will\n// return a string containing an accurate base 10 value of this bigint. This\n// form factor should correctly interop with other bigint compat libraries\n// easily.\ntype ExternalBigInt = bigint;\n\nexport function ToBigIntExternal(arg: unknown): ExternalBigInt {\n  const jsbiBI = ToBigInt(arg);\n  if (typeof (globalThis as any).BigInt !== 'undefined') return (globalThis as any).BigInt(jsbiBI.toString(10));\n  return jsbiBI as unknown as ExternalBigInt;\n}\n\nexport function ToBigInt(arg: unknown): JSBI {\n  let prim = arg;\n  if (typeof arg === 'object') {\n    const toPrimFn = (arg as { [Symbol.toPrimitive]: unknown })[Symbol.toPrimitive];\n    if (toPrimFn && typeof toPrimFn === 'function') {\n      prim = ReflectApply(toPrimFn, arg, ['number']);\n    }\n  }\n\n  // The AO ToBigInt throws on numbers because it does not allow implicit\n  // conversion between number and bigint (unlike the bigint constructor).\n  if (typeof prim === 'number') {\n    throw new TypeError('cannot convert number to bigint');\n  }\n  if (typeof prim === 'bigint') {\n    // JSBI doesn't know anything about the bigint type, and intentionally\n    // assumes it doesn't exist. Passing one to the BigInt function will throw\n    // an error.\n    return JSBI.BigInt(prim.toString(10));\n  }\n  // JSBI will properly coerce types into a BigInt the same as the native BigInt\n  // constructor will, with the exception of native bigint which is handled\n  // above.\n  // As of 2023-04-07, the only runtime type that neither of those can handle is\n  // 'symbol', and both native bigint and the JSBI.BigInt function will throw an\n  // error if they are given a Symbol.\n  return JSBI.BigInt(prim as string | boolean | object);\n}\n\n// Note: This method returns values with bogus nanoseconds based on the previous iteration's\n// milliseconds. That way there is a guarantee that the full nanoseconds are always going to be\n// increasing at least and that the microsecond and nanosecond fields are likely to be non-zero.\nexport const SystemUTCEpochNanoSeconds: () => JSBI = (() => {\n  let ns = JSBI.BigInt(Date.now() % 1e6);\n  return () => {\n    const ms = JSBI.BigInt(Date.now());\n    const result = JSBI.add(JSBI.multiply(ms, MILLION), ns);\n    ns = JSBI.remainder(ms, MILLION);\n    if (JSBI.greaterThan(result, NS_MAX)) return NS_MAX;\n    if (JSBI.lessThan(result, NS_MIN)) return NS_MIN;\n    return result;\n  };\n})();\n\nexport function DefaultTimeZone() {\n  return new IntlDateTimeFormat().resolvedOptions().timeZone;\n}\n\nexport function ComparisonResult(value: number) {\n  return value < 0 ? -1 : value > 0 ? 1 : (value as 0);\n}\n\nexport function GetOptionsObject<T>(options: T) {\n  if (options === undefined) return ObjectCreate(null) as NonNullable<T>;\n  if (IsObject(options) && options !== null) return options;\n  throw new TypeError(`Options parameter must be an object, not ${options === null ? 'null' : `${typeof options}`}`);\n}\n\nexport function CreateOnePropObject<K extends string, V>(propName: K, propValue: V): { [k in K]: V } {\n  const o = ObjectCreate(null);\n  o[propName] = propValue;\n  return o;\n}\n\nfunction CopyOptions<T extends { [s in K]?: unknown }, K extends string & keyof T>(options: T | undefined) {\n  const optionsCopy = ObjectCreate(null) as T;\n  CopyDataProperties(optionsCopy, GetOptionsObject(options), []);\n  return optionsCopy;\n}\n\ntype StringlyTypedKeys<T> = Exclude<keyof T, symbol | number>;\nfunction GetOption<P extends StringlyTypedKeys<O>, O extends Partial<Record<P, unknown>>>(\n  options: O,\n  property: P,\n  allowedValues: ReadonlyArray<O[P]>,\n  fallback: undefined\n): O[P];\nfunction GetOption<\n  P extends StringlyTypedKeys<O>,\n  O extends Partial<Record<P, unknown>>,\n  Fallback extends Required<O>[P] | undefined\n>(\n  options: O,\n  property: P,\n  allowedValues: ReadonlyArray<O[P]>,\n  fallback: Fallback\n): Fallback extends undefined ? O[P] | undefined : Required<O>[P];\nfunction GetOption<\n  P extends StringlyTypedKeys<O>,\n  O extends Partial<Record<P, unknown>>,\n  Fallback extends Required<O>[P] | undefined\n>(\n  options: O,\n  property: P,\n  allowedValues: ReadonlyArray<O[P]>,\n  fallback: O[P]\n): Fallback extends undefined ? O[P] | undefined : Required<O>[P] {\n  let value = options[property];\n  if (value !== undefined) {\n    value = ToString(value) as O[P];\n    if (!allowedValues.includes(value)) {\n      throw new RangeError(`${property} must be one of ${allowedValues.join(', ')}, not ${value}`);\n    }\n    return value;\n  }\n  return fallback;\n}\n\nexport function IsBuiltinCalendar(id: string): id is BuiltinCalendarId {\n  return BUILTIN_CALENDAR_IDS.includes(ASCIILowercase(id));\n}\n\nexport function ASCIILowercase<T extends string>(str: T): T {\n  // The spec defines this operation distinct from String.prototype.lowercase,\n  // so we'll follow the spec here. Note that nasty security issues that can\n  // happen for some use cases if you're comparing case-modified non-ASCII\n  // values. For example, Turkish's \"I\" character was the source of a security\n  // issue involving \"file://\" URLs. See\n  // https://haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx/.\n  return str.replace(/[A-Z]/g, (l) => {\n    const code = l.charCodeAt(0);\n    return String.fromCharCode(code + 0x20);\n  }) as T;\n}\n\nconst OFFSET = new RegExp(`^${PARSE.offset.source}$`);\n\nfunction bisect(\n  getState: (epochNs: JSBI) => number,\n  leftParam: JSBI,\n  rightParam: JSBI,\n  lstateParam: number = getState(leftParam),\n  rstateParam: number = getState(rightParam)\n) {\n  // This doesn't make much sense - why do these get converted unnecessarily?\n  let left = JSBI.BigInt(leftParam);\n  let right = JSBI.BigInt(rightParam);\n  let lstate = lstateParam;\n  let rstate = rstateParam;\n  while (JSBI.greaterThan(JSBI.subtract(right, left), ONE)) {\n    const middle = JSBI.divide(JSBI.add(left, right), JSBI.BigInt(2));\n    const mstate = getState(middle);\n    if (mstate === lstate) {\n      left = middle;\n      lstate = mstate;\n    } else if (mstate === rstate) {\n      right = middle;\n      rstate = mstate;\n    } else {\n      throw new Error(`invalid state in bisection ${lstate} - ${mstate} - ${rstate}`);\n    }\n  }\n  return right;\n}\n\nconst nsPerTimeUnit = {\n  hour: 3600e9,\n  minute: 60e9,\n  second: 1e9,\n  millisecond: 1e6,\n  microsecond: 1e3,\n  nanosecond: 1\n};\n", "import * as ES from './ecmascript';\nimport { GetIntrinsic } from './intrinsicclass';\nimport {\n  GetSlot,\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  CALENDAR\n} from './slots';\nimport type { Temporal, Intl } from '..';\nimport type { DateTimeFormatParams as Params, DateTimeFormatReturn as Return } from './internaltypes';\n\nconst DATE = Symbol('date');\nconst YM = Symbol('ym');\nconst MD = Symbol('md');\nconst TIME = Symbol('time');\nconst DATETIME = Symbol('datetime');\nconst INST = Symbol('instant');\nconst ORIGINAL = Symbol('original');\nconst TZ_RESOLVED = Symbol('timezone');\nconst CAL_ID = Symbol('calendar-id');\nconst LOCALE = Symbol('locale');\nconst OPTIONS = Symbol('options');\n\nconst descriptor = <T extends (...args: any[]) => any>(value: T) => {\n  return {\n    value,\n    enumerable: true,\n    writable: false,\n    configurable: true\n  };\n};\n\nconst IntlDateTimeFormat = globalThis.Intl.DateTimeFormat;\nconst ObjectAssign = Object.assign;\nconst ObjectHasOwnProperty = Object.prototype.hasOwnProperty;\nconst ReflectApply = Reflect.apply;\n\ninterface CustomFormatters {\n  [DATE]: typeof dateAmend | globalThis.Intl.DateTimeFormat;\n  [YM]: typeof yearMonthAmend | typeof globalThis.Intl.DateTimeFormat;\n  [MD]: typeof monthDayAmend | typeof globalThis.Intl.DateTimeFormat;\n  [TIME]: typeof timeAmend | typeof globalThis.Intl.DateTimeFormat;\n  [DATETIME]: typeof datetimeAmend | typeof globalThis.Intl.DateTimeFormat;\n  [INST]: typeof instantAmend | typeof globalThis.Intl.DateTimeFormat;\n}\n\ninterface PrivateProps extends CustomFormatters {\n  [ORIGINAL]: globalThis.Intl.DateTimeFormat;\n  [TZ_RESOLVED]: string | Temporal.TimeZoneProtocol;\n  [CAL_ID]: globalThis.Intl.ResolvedDateTimeFormatOptions['calendar'];\n  [LOCALE]: globalThis.Intl.ResolvedDateTimeFormatOptions['locale'];\n  [OPTIONS]: Intl.DateTimeFormatOptions;\n}\n\ntype OptionsAmenderFunction = (options: Intl.DateTimeFormatOptions) => globalThis.Intl.DateTimeFormatOptions;\ntype FormatterOrAmender = globalThis.Intl.DateTimeFormat | OptionsAmenderFunction;\n\n// Construction of built-in Intl.DateTimeFormat objects is sloooooow,\n// so we'll only create those instances when we need them.\n// See https://bugs.chromium.org/p/v8/issues/detail?id=6528\nfunction getPropLazy<T extends PrivateProps, P extends keyof CustomFormatters>(\n  obj: T,\n  prop: P\n): globalThis.Intl.DateTimeFormat {\n  let val = obj[prop] as FormatterOrAmender;\n  if (typeof val === 'function') {\n    // If we get here, `val` is an \"amender function\". It will take the user's\n    // options and transform them into suitable options to be passed into the\n    // built-in (non-polyfill) Intl.DateTimeFormat constructor. These options\n    // will vary depending on the Temporal type, so that's why we store separate\n    // formatters in separate props on the polyfill's DateTimeFormat instances.\n    // The efficiency happens because we don't create an (expensive) formatter\n    // until the user calls toLocaleString for that Temporal type.\n    val = new IntlDateTimeFormat(obj[LOCALE], val(obj[OPTIONS]));\n    // TODO: can this be typed more cleanly?\n    (obj[prop] as globalThis.Intl.DateTimeFormat) = val;\n  }\n  return val;\n}\n\ntype DateTimeFormatImpl = Intl.DateTimeFormat & PrivateProps;\n\nfunction DateTimeFormatImpl(\n  this: Intl.DateTimeFormat & PrivateProps,\n  locale: Params['constructor'][0] = undefined,\n  optionsParam: Params['constructor'][1] = {}\n) {\n  if (!(this instanceof DateTimeFormatImpl)) {\n    type Construct = new (\n      locale: Params['constructor'][0],\n      optionsParam: Params['constructor'][1]\n    ) => Intl.DateTimeFormat;\n    return new (DateTimeFormatImpl as unknown as Construct)(locale, optionsParam);\n  }\n  const hasOptions = typeof optionsParam !== 'undefined';\n  const options = hasOptions ? ObjectAssign({}, optionsParam) : {};\n  // TODO: remove type assertion after Temporal types land in TS lib types\n  const original = new IntlDateTimeFormat(locale, options as globalThis.Intl.DateTimeFormatOptions);\n  const ro = original.resolvedOptions();\n\n  // DateTimeFormat instances are very expensive to create. Therefore, they will\n  // be lazily created only when needed, using the locale and options provided.\n  // But it's possible for callers to mutate those inputs before lazy creation\n  // happens. For this reason, we clone the inputs instead of caching the\n  // original objects. To avoid the complexity of deep cloning any inputs that\n  // are themselves objects (e.g. the locales array, or options property values\n  // that will be coerced to strings), we rely on `resolvedOptions()` to do the\n  // coercion and cloning for us. Unfortunately, we can't just use the resolved\n  // options as-is because our options-amending logic adds additional fields if\n  // the user doesn't supply any unit fields like year, month, day, hour, etc.\n  // Therefore, we limit the properties in the clone to properties that were\n  // present in the original input.\n  if (hasOptions) {\n    const clonedResolved = ObjectAssign({}, ro);\n    for (const prop in clonedResolved) {\n      if (!ReflectApply(ObjectHasOwnProperty, options, [prop])) {\n        delete clonedResolved[prop as keyof typeof clonedResolved];\n      }\n    }\n    this[OPTIONS] = clonedResolved as Intl.DateTimeFormatOptions;\n  } else {\n    this[OPTIONS] = options;\n  }\n\n  this[LOCALE] = ro.locale;\n  this[ORIGINAL] = original;\n  this[TZ_RESOLVED] = ro.timeZone;\n  this[CAL_ID] = ro.calendar;\n  this[DATE] = dateAmend;\n  this[YM] = yearMonthAmend;\n  this[MD] = monthDayAmend;\n  this[TIME] = timeAmend;\n  this[DATETIME] = datetimeAmend;\n  this[INST] = instantAmend;\n  return undefined; // TODO: I couldn't satisfy TS without adding this. Is there another way?\n}\n\nObject.defineProperty(DateTimeFormatImpl, 'name', {\n  writable: true,\n  value: 'DateTimeFormat'\n});\n\nDateTimeFormatImpl.supportedLocalesOf = function (\n  locales: Params['supportedLocalesOf'][0],\n  options: Params['supportedLocalesOf'][1]\n) {\n  return IntlDateTimeFormat.supportedLocalesOf(locales, options as globalThis.Intl.DateTimeFormatOptions);\n};\n\nconst propertyDescriptors: Partial<Record<keyof Intl.DateTimeFormat, PropertyDescriptor>> = {\n  resolvedOptions: descriptor(resolvedOptions),\n  format: descriptor(format),\n  formatRange: descriptor(formatRange)\n};\n\nif ('formatToParts' in IntlDateTimeFormat.prototype) {\n  propertyDescriptors.formatToParts = descriptor(formatToParts);\n}\n\nif ('formatRangeToParts' in IntlDateTimeFormat.prototype) {\n  propertyDescriptors.formatRangeToParts = descriptor(formatRangeToParts);\n}\n\nDateTimeFormatImpl.prototype = Object.create(IntlDateTimeFormat.prototype, propertyDescriptors);\n\n// Ensure that the prototype isn't writeable.\nObject.defineProperty(DateTimeFormatImpl, 'prototype', {\n  writable: false,\n  enumerable: false,\n  configurable: false\n});\n\nexport const DateTimeFormat = DateTimeFormatImpl as unknown as typeof Intl.DateTimeFormat;\n\nfunction resolvedOptions(this: DateTimeFormatImpl): Return['resolvedOptions'] {\n  return this[ORIGINAL].resolvedOptions();\n}\n\n// TODO: investigate why there's a rest parameter here. Does this function really need to accept extra params?\n// And if so, why doesn't formatRange also accept extra params?\nfunction format<P extends readonly unknown[]>(\n  this: DateTimeFormatImpl,\n  datetime: Params['format'][0],\n  ...rest: P\n): Return['format'] {\n  let { instant, formatter } = extractOverrides(datetime, this);\n  if (instant && formatter) {\n    return formatter.format(instant.epochMilliseconds);\n  }\n  // Support spreading additional args for future expansion of this Intl method\n  type AllowExtraParams = (datetime: Parameters<Intl.DateTimeFormat['format']>[0], ...rest: P) => Return['format'];\n  return (this[ORIGINAL].format as unknown as AllowExtraParams)(datetime, ...rest);\n}\n\nfunction formatToParts<P extends readonly unknown[]>(\n  this: DateTimeFormatImpl,\n  datetime: Params['formatToParts'][0],\n  ...rest: P\n): Return['formatToParts'] {\n  let { instant, formatter } = extractOverrides(datetime, this);\n  if (instant && formatter) {\n    return formatter.formatToParts(instant.epochMilliseconds);\n  }\n  // Support spreading additional args for future expansion of this Intl method\n  type AllowExtraParams = (\n    datetime: Parameters<Intl.DateTimeFormat['formatToParts']>[0],\n    ...rest: P\n  ) => Return['formatToParts'];\n  return (this[ORIGINAL].formatToParts as unknown as AllowExtraParams)(datetime, ...rest);\n}\n\nfunction formatRange(this: DateTimeFormatImpl, a: Params['formatRange'][0], b: Params['formatRange'][1]) {\n  if (isTemporalObject(a) || isTemporalObject(b)) {\n    if (!sameTemporalType(a, b)) {\n      throw new TypeError('Intl.DateTimeFormat.formatRange accepts two values of the same type');\n    }\n    const { instant: aa, formatter: aformatter } = extractOverrides(a as unknown as TypesWithToLocaleString, this);\n    const { instant: bb, formatter: bformatter } = extractOverrides(b as unknown as TypesWithToLocaleString, this);\n    if (aa && bb && aformatter && bformatter && aformatter === bformatter) {\n      // TODO: Remove type assertion after this method lands in TS lib types\n      return (aformatter as Intl.DateTimeFormat).formatRange(aa.epochMilliseconds, bb.epochMilliseconds);\n    }\n  }\n  // TODO: Remove type assertion after this method lands in TS lib types\n  return (this[ORIGINAL] as Intl.DateTimeFormat).formatRange(a, b);\n}\n\nfunction formatRangeToParts(\n  this: DateTimeFormatImpl,\n  a: Params['formatRangeToParts'][0],\n  b: Params['formatRangeToParts'][1]\n) {\n  if (isTemporalObject(a) || isTemporalObject(b)) {\n    if (!sameTemporalType(a, b)) {\n      throw new TypeError('Intl.DateTimeFormat.formatRangeToParts accepts two values of the same type');\n    }\n    const { instant: aa, formatter: aformatter } = extractOverrides(a, this);\n    const { instant: bb, formatter: bformatter } = extractOverrides(b, this);\n    if (aa && bb && aformatter && bformatter && aformatter === bformatter) {\n      // TODO: Remove type assertion after this method lands in TS lib types\n      return (aformatter as Intl.DateTimeFormat).formatRangeToParts(aa.epochMilliseconds, bb.epochMilliseconds);\n    }\n  }\n  // TODO: Remove type assertion after this method lands in TS lib types\n  return (this[ORIGINAL] as Intl.DateTimeFormat).formatRangeToParts(a, b);\n}\n\n// \"false\" is a signal to delete this option\ntype MaybeFalseOptions = {\n  [K in keyof Intl.DateTimeFormatOptions]?: Intl.DateTimeFormatOptions[K] | false;\n};\n\nfunction amend(optionsParam: Intl.DateTimeFormatOptions = {}, amended: MaybeFalseOptions = {}) {\n  const options = ObjectAssign({}, optionsParam);\n  for (const opt of [\n    'year',\n    'month',\n    'day',\n    'hour',\n    'minute',\n    'second',\n    'weekday',\n    'dayPeriod',\n    'timeZoneName',\n    'dateStyle',\n    'timeStyle'\n  ] as const) {\n    // TODO: can this be typed more cleanly?\n    type OptionMaybeFalse = typeof options[typeof opt] | false;\n    (options[opt] as OptionMaybeFalse) = opt in amended ? amended[opt] : options[opt];\n    if ((options[opt] as OptionMaybeFalse) === false || options[opt] === undefined) delete options[opt];\n  }\n  return options as globalThis.Intl.DateTimeFormatOptions;\n}\n\ntype OptionsType<T extends TypesWithToLocaleString> = NonNullable<Parameters<T['toLocaleString']>[1]>;\n\nfunction timeAmend(optionsParam: OptionsType<Temporal.PlainTime>) {\n  let options = amend(optionsParam, {\n    year: false,\n    month: false,\n    day: false,\n    weekday: false,\n    timeZoneName: false,\n    dateStyle: false\n  });\n  if (!hasTimeOptions(options)) {\n    options = ObjectAssign({}, options, {\n      hour: 'numeric',\n      minute: 'numeric',\n      second: 'numeric'\n    });\n  }\n  return options;\n}\n\nfunction yearMonthAmend(optionsParam: OptionsType<Temporal.PlainYearMonth>) {\n  let options = amend(optionsParam, {\n    day: false,\n    hour: false,\n    minute: false,\n    second: false,\n    weekday: false,\n    dayPeriod: false,\n    timeZoneName: false,\n    dateStyle: false,\n    timeStyle: false\n  });\n  if (!('year' in options || 'month' in options)) {\n    options = ObjectAssign(options, { year: 'numeric', month: 'numeric' });\n  }\n  return options;\n}\n\nfunction monthDayAmend(optionsParam: OptionsType<Temporal.PlainMonthDay>) {\n  let options = amend(optionsParam, {\n    year: false,\n    hour: false,\n    minute: false,\n    second: false,\n    weekday: false,\n    dayPeriod: false,\n    timeZoneName: false,\n    dateStyle: false,\n    timeStyle: false\n  });\n  if (!('month' in options || 'day' in options)) {\n    options = ObjectAssign({}, options, { month: 'numeric', day: 'numeric' });\n  }\n  return options;\n}\n\nfunction dateAmend(optionsParam: OptionsType<Temporal.PlainDate>) {\n  let options = amend(optionsParam, {\n    hour: false,\n    minute: false,\n    second: false,\n    dayPeriod: false,\n    timeZoneName: false,\n    timeStyle: false\n  });\n  if (!hasDateOptions(options)) {\n    options = ObjectAssign({}, options, {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric'\n    });\n  }\n  return options;\n}\n\nfunction datetimeAmend(optionsParam: OptionsType<Temporal.PlainDateTime>) {\n  let options = amend(optionsParam, { timeZoneName: false });\n  if (!hasTimeOptions(options) && !hasDateOptions(options)) {\n    options = ObjectAssign({}, options, {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric',\n      second: 'numeric'\n    });\n  }\n  return options;\n}\n\nfunction instantAmend(optionsParam: OptionsType<Temporal.Instant>) {\n  let options = optionsParam;\n  if (!hasTimeOptions(options) && !hasDateOptions(options)) {\n    options = ObjectAssign({}, options, {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n      hour: 'numeric',\n      minute: 'numeric',\n      second: 'numeric'\n    });\n  }\n  return options;\n}\n\nfunction hasDateOptions(options: OptionsType<TypesWithToLocaleString>) {\n  return 'year' in options || 'month' in options || 'day' in options || 'weekday' in options || 'dateStyle' in options;\n}\n\nfunction hasTimeOptions(options: OptionsType<TypesWithToLocaleString>) {\n  return (\n    'hour' in options || 'minute' in options || 'second' in options || 'timeStyle' in options || 'dayPeriod' in options\n  );\n}\n\nfunction isTemporalObject(\n  obj: unknown\n): obj is\n  | Temporal.PlainDate\n  | Temporal.PlainTime\n  | Temporal.PlainDateTime\n  | Temporal.ZonedDateTime\n  | Temporal.PlainYearMonth\n  | Temporal.PlainMonthDay\n  | Temporal.Instant {\n  return (\n    ES.IsTemporalDate(obj) ||\n    ES.IsTemporalTime(obj) ||\n    ES.IsTemporalDateTime(obj) ||\n    ES.IsTemporalZonedDateTime(obj) ||\n    ES.IsTemporalYearMonth(obj) ||\n    ES.IsTemporalMonthDay(obj) ||\n    ES.IsTemporalInstant(obj)\n  );\n}\n\nfunction sameTemporalType(x: unknown, y: unknown) {\n  if (!isTemporalObject(x) || !isTemporalObject(y)) return false;\n  if (ES.IsTemporalTime(x) && !ES.IsTemporalTime(y)) return false;\n  if (ES.IsTemporalDate(x) && !ES.IsTemporalDate(y)) return false;\n  if (ES.IsTemporalDateTime(x) && !ES.IsTemporalDateTime(y)) return false;\n  if (ES.IsTemporalZonedDateTime(x) && !ES.IsTemporalZonedDateTime(y)) return false;\n  if (ES.IsTemporalYearMonth(x) && !ES.IsTemporalYearMonth(y)) return false;\n  if (ES.IsTemporalMonthDay(x) && !ES.IsTemporalMonthDay(y)) return false;\n  if (ES.IsTemporalInstant(x) && !ES.IsTemporalInstant(y)) return false;\n  return true;\n}\n\ntype TypesWithToLocaleString =\n  | Temporal.PlainDateTime\n  | Temporal.PlainDate\n  | Temporal.PlainTime\n  | Temporal.PlainYearMonth\n  | Temporal.PlainMonthDay\n  | Temporal.ZonedDateTime\n  | Temporal.Instant;\n\nfunction extractOverrides(temporalObj: Params['format'][0], main: DateTimeFormatImpl) {\n  const DateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n\n  if (ES.IsTemporalTime(temporalObj)) {\n    const hour = GetSlot(temporalObj, ISO_HOUR);\n    const minute = GetSlot(temporalObj, ISO_MINUTE);\n    const second = GetSlot(temporalObj, ISO_SECOND);\n    const millisecond = GetSlot(temporalObj, ISO_MILLISECOND);\n    const microsecond = GetSlot(temporalObj, ISO_MICROSECOND);\n    const nanosecond = GetSlot(temporalObj, ISO_NANOSECOND);\n    const datetime = new DateTime(1970, 1, 1, hour, minute, second, millisecond, microsecond, nanosecond, main[CAL_ID]);\n    return {\n      instant: ES.GetInstantFor(main[TZ_RESOLVED], datetime, 'compatible'),\n      formatter: getPropLazy(main, TIME)\n    };\n  }\n\n  if (ES.IsTemporalYearMonth(temporalObj)) {\n    const isoYear = GetSlot(temporalObj, ISO_YEAR);\n    const isoMonth = GetSlot(temporalObj, ISO_MONTH);\n    const referenceISODay = GetSlot(temporalObj, ISO_DAY);\n    const calendar = ES.ToTemporalCalendarIdentifier(GetSlot(temporalObj, CALENDAR));\n    if (calendar !== main[CAL_ID]) {\n      throw new RangeError(\n        `cannot format PlainYearMonth with calendar ${calendar} in locale with calendar ${main[CAL_ID]}`\n      );\n    }\n    const datetime = new DateTime(isoYear, isoMonth, referenceISODay, 12, 0, 0, 0, 0, 0, calendar);\n    return {\n      instant: ES.GetInstantFor(main[TZ_RESOLVED], datetime, 'compatible'),\n      formatter: getPropLazy(main, YM)\n    };\n  }\n\n  if (ES.IsTemporalMonthDay(temporalObj)) {\n    const referenceISOYear = GetSlot(temporalObj, ISO_YEAR);\n    const isoMonth = GetSlot(temporalObj, ISO_MONTH);\n    const isoDay = GetSlot(temporalObj, ISO_DAY);\n    const calendar = ES.ToTemporalCalendarIdentifier(GetSlot(temporalObj, CALENDAR));\n    if (calendar !== main[CAL_ID]) {\n      throw new RangeError(\n        `cannot format PlainMonthDay with calendar ${calendar} in locale with calendar ${main[CAL_ID]}`\n      );\n    }\n    const datetime = new DateTime(referenceISOYear, isoMonth, isoDay, 12, 0, 0, 0, 0, 0, calendar);\n    return {\n      instant: ES.GetInstantFor(main[TZ_RESOLVED], datetime, 'compatible'),\n      formatter: getPropLazy(main, MD)\n    };\n  }\n\n  if (ES.IsTemporalDate(temporalObj)) {\n    const isoYear = GetSlot(temporalObj, ISO_YEAR);\n    const isoMonth = GetSlot(temporalObj, ISO_MONTH);\n    const isoDay = GetSlot(temporalObj, ISO_DAY);\n    const calendar = ES.ToTemporalCalendarIdentifier(GetSlot(temporalObj, CALENDAR));\n    if (calendar !== 'iso8601' && calendar !== main[CAL_ID]) {\n      throw new RangeError(`cannot format PlainDate with calendar ${calendar} in locale with calendar ${main[CAL_ID]}`);\n    }\n    const datetime = new DateTime(isoYear, isoMonth, isoDay, 12, 0, 0, 0, 0, 0, main[CAL_ID]);\n    return {\n      instant: ES.GetInstantFor(main[TZ_RESOLVED], datetime, 'compatible'),\n      formatter: getPropLazy(main, DATE)\n    };\n  }\n\n  if (ES.IsTemporalDateTime(temporalObj)) {\n    const isoYear = GetSlot(temporalObj, ISO_YEAR);\n    const isoMonth = GetSlot(temporalObj, ISO_MONTH);\n    const isoDay = GetSlot(temporalObj, ISO_DAY);\n    const hour = GetSlot(temporalObj, ISO_HOUR);\n    const minute = GetSlot(temporalObj, ISO_MINUTE);\n    const second = GetSlot(temporalObj, ISO_SECOND);\n    const millisecond = GetSlot(temporalObj, ISO_MILLISECOND);\n    const microsecond = GetSlot(temporalObj, ISO_MICROSECOND);\n    const nanosecond = GetSlot(temporalObj, ISO_NANOSECOND);\n    const calendar = ES.ToTemporalCalendarIdentifier(GetSlot(temporalObj, CALENDAR));\n    if (calendar !== 'iso8601' && calendar !== main[CAL_ID]) {\n      throw new RangeError(\n        `cannot format PlainDateTime with calendar ${calendar} in locale with calendar ${main[CAL_ID]}`\n      );\n    }\n    let datetime = temporalObj;\n    if (calendar === 'iso8601') {\n      datetime = new DateTime(\n        isoYear,\n        isoMonth,\n        isoDay,\n        hour,\n        minute,\n        second,\n        millisecond,\n        microsecond,\n        nanosecond,\n        main[CAL_ID]\n      );\n    }\n    return {\n      instant: ES.GetInstantFor(main[TZ_RESOLVED], datetime, 'compatible'),\n      formatter: getPropLazy(main, DATETIME)\n    };\n  }\n\n  if (ES.IsTemporalZonedDateTime(temporalObj)) {\n    throw new TypeError(\n      'Temporal.ZonedDateTime not supported in DateTimeFormat methods. Use toLocaleString() instead.'\n    );\n  }\n\n  if (ES.IsTemporalInstant(temporalObj)) {\n    return {\n      instant: temporalObj,\n      formatter: getPropLazy(main, INST)\n    };\n  }\n\n  return {};\n}\n", "import { DEBUG } from './debug';\nimport * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\nimport { EPOCHNANOSECONDS, CreateSlots, GetSlot, SetSlot } from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { InstantParams as Params, InstantReturn as Return } from './internaltypes';\n\nimport JSBI from 'jsbi';\nimport { BILLION, MILLION, THOUSAND } from './ecmascript';\n\nexport class Instant implements Temporal.Instant {\n  constructor(epochNanoseconds: bigint | JSBI) {\n    // Note: if the argument is not passed, ToBigInt(undefined) will throw. This check exists only\n    //       to improve the error message.\n    if (arguments.length < 1) {\n      throw new TypeError('missing argument: epochNanoseconds is required');\n    }\n\n    const ns = ES.ToBigInt(epochNanoseconds);\n    ES.ValidateEpochNanoseconds(ns);\n    CreateSlots(this);\n    SetSlot(this, EPOCHNANOSECONDS, ns);\n\n    if (DEBUG) {\n      const repr = ES.TemporalInstantToString(this, undefined, 'auto');\n      Object.defineProperty(this, '_repr_', {\n        value: `${this[Symbol.toStringTag]} <${repr}>`,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n    }\n  }\n\n  get epochSeconds(): Return['epochSeconds'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const value = GetSlot(this, EPOCHNANOSECONDS);\n    return JSBI.toNumber(ES.BigIntFloorDiv(value, BILLION));\n  }\n  get epochMilliseconds(): Return['epochMilliseconds'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const value = JSBI.BigInt(GetSlot(this, EPOCHNANOSECONDS));\n    return JSBI.toNumber(ES.BigIntFloorDiv(value, MILLION));\n  }\n  get epochMicroseconds(): Return['epochMicroseconds'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const value = JSBI.BigInt(GetSlot(this, EPOCHNANOSECONDS));\n    return ES.ToBigIntExternal(ES.BigIntFloorDiv(value, THOUSAND));\n  }\n  get epochNanoseconds(): Return['epochNanoseconds'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.ToBigIntExternal(JSBI.BigInt(GetSlot(this, EPOCHNANOSECONDS)));\n  }\n\n  add(temporalDurationLike: Params['add'][0]): Return['add'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromInstant('add', this, temporalDurationLike);\n  }\n  subtract(temporalDurationLike: Params['subtract'][0]): Return['subtract'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromInstant('subtract', this, temporalDurationLike);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalInstant('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalInstant('since', this, other, options);\n  }\n  round(roundToParam: Params['round'][0]): Return['round'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    if (roundToParam === undefined) throw new TypeError('options parameter is required');\n    const roundTo =\n      typeof roundToParam === 'string'\n        ? (ES.CreateOnePropObject('smallestUnit', roundToParam) as Exclude<typeof roundToParam, string>)\n        : ES.GetOptionsObject(roundToParam);\n    const roundingIncrement = ES.ToTemporalRoundingIncrement(roundTo);\n    const roundingMode = ES.ToTemporalRoundingMode(roundTo, 'halfExpand');\n    const smallestUnit = ES.GetTemporalUnit(roundTo, 'smallestUnit', 'time', ES.REQUIRED);\n    const maximumIncrements = {\n      hour: 24,\n      minute: 1440,\n      second: 86400,\n      millisecond: 86400e3,\n      microsecond: 86400e6,\n      nanosecond: 86400e9\n    };\n    ES.ValidateTemporalRoundingIncrement(roundingIncrement, maximumIncrements[smallestUnit], true);\n    const ns = GetSlot(this, EPOCHNANOSECONDS);\n    const roundedNs = ES.RoundInstant(ns, roundingIncrement, smallestUnit, roundingMode);\n    return new Instant(roundedNs);\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalInstant(otherParam);\n    const one = GetSlot(this, EPOCHNANOSECONDS);\n    const two = GetSlot(other, EPOCHNANOSECONDS);\n    return JSBI.equal(JSBI.BigInt(one), JSBI.BigInt(two));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const digits = ES.ToFractionalSecondDigits(options);\n    const roundingMode = ES.ToTemporalRoundingMode(options, 'trunc');\n    const smallestUnit = ES.GetTemporalUnit(options, 'smallestUnit', 'time', undefined);\n    if (smallestUnit === 'hour') throw new RangeError('smallestUnit must be a time unit other than \"hour\"');\n    let timeZone = options.timeZone;\n    if (timeZone !== undefined) timeZone = ES.ToTemporalTimeZoneSlotValue(timeZone);\n    const { precision, unit, increment } = ES.ToSecondsStringPrecisionRecord(smallestUnit, digits);\n    const ns = GetSlot(this, EPOCHNANOSECONDS);\n    const roundedNs = ES.RoundInstant(ns, increment, unit, roundingMode);\n    const roundedInstant = new Instant(roundedNs);\n    return ES.TemporalInstantToString(roundedInstant, timeZone as Temporal.TimeZoneProtocol, precision);\n  }\n  toJSON(): string {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalInstantToString(this, undefined, 'auto');\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.Instant');\n  }\n  toZonedDateTime(item: Params['toZonedDateTime'][0]): Return['toZonedDateTime'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(item)) {\n      throw new TypeError('invalid argument in toZonedDateTime');\n    }\n    const calendarLike = item.calendar;\n    if (calendarLike === undefined) {\n      throw new TypeError('missing calendar property in toZonedDateTime');\n    }\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarLike);\n    const temporalTimeZoneLike = item.timeZone;\n    if (temporalTimeZoneLike === undefined) {\n      throw new TypeError('missing timeZone property in toZonedDateTime');\n    }\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(temporalTimeZoneLike);\n    return ES.CreateTemporalZonedDateTime(GetSlot(this, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  toZonedDateTimeISO(timeZoneParam: Params['toZonedDateTimeISO'][0]): Return['toZonedDateTimeISO'] {\n    if (!ES.IsTemporalInstant(this)) throw new TypeError('invalid receiver');\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(timeZoneParam);\n    return ES.CreateTemporalZonedDateTime(GetSlot(this, EPOCHNANOSECONDS), timeZone, 'iso8601');\n  }\n\n  static fromEpochSeconds(epochSecondsParam: Params['fromEpochSeconds'][0]): Return['fromEpochSeconds'] {\n    const epochSeconds = ES.ToNumber(epochSecondsParam);\n    const epochNanoseconds = JSBI.multiply(JSBI.BigInt(epochSeconds), BILLION);\n    ES.ValidateEpochNanoseconds(epochNanoseconds);\n    return new Instant(epochNanoseconds);\n  }\n  static fromEpochMilliseconds(\n    epochMillisecondsParam: Params['fromEpochMilliseconds'][0]\n  ): Return['fromEpochMilliseconds'] {\n    const epochMilliseconds = ES.ToNumber(epochMillisecondsParam);\n    const epochNanoseconds = JSBI.multiply(JSBI.BigInt(epochMilliseconds), MILLION);\n    ES.ValidateEpochNanoseconds(epochNanoseconds);\n    return new Instant(epochNanoseconds);\n  }\n  static fromEpochMicroseconds(\n    epochMicrosecondsParam: Params['fromEpochMicroseconds'][0]\n  ): Return['fromEpochMicroseconds'] {\n    const epochMicroseconds = ES.ToBigInt(epochMicrosecondsParam);\n    const epochNanoseconds = JSBI.multiply(epochMicroseconds, THOUSAND);\n    ES.ValidateEpochNanoseconds(epochNanoseconds);\n    return new Instant(epochNanoseconds);\n  }\n  static fromEpochNanoseconds(\n    epochNanosecondsParam: Params['fromEpochNanoseconds'][0]\n  ): Return['fromEpochNanoseconds'] {\n    const epochNanoseconds = ES.ToBigInt(epochNanosecondsParam);\n    ES.ValidateEpochNanoseconds(epochNanoseconds);\n    return new Instant(epochNanoseconds);\n  }\n  static from(item: Params['from'][0]): Return['from'] {\n    if (ES.IsTemporalInstant(item)) {\n      return new Instant(GetSlot(item, EPOCHNANOSECONDS));\n    }\n    return ES.ToTemporalInstant(item);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalInstant(oneParam);\n    const two = ES.ToTemporalInstant(twoParam);\n    const oneNs = GetSlot(one, EPOCHNANOSECONDS);\n    const twoNs = GetSlot(two, EPOCHNANOSECONDS);\n    if (JSBI.lessThan(oneNs, twoNs)) return -1;\n    if (JSBI.greaterThan(oneNs, twoNs)) return 1;\n    return 0;\n  }\n  [Symbol.toStringTag]!: 'Temporal.Instant';\n}\n\nMakeIntrinsicClass(Instant, 'Temporal.Instant');\n", "import { DEBUG } from './debug';\nimport * as ES from './ecmascript';\nimport { GetIntrinsic, MakeIntrinsicClass, DefineIntrinsic } from './intrinsicclass';\nimport {\n  CALENDAR_ID,\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  YEARS,\n  MONTHS,\n  WEEKS,\n  DAYS,\n  HOURS,\n  MINUTES,\n  SECONDS,\n  MILLISECONDS,\n  MICROSECONDS,\n  NANOSECONDS,\n  CreateSlots,\n  GetSlot,\n  HasSlot,\n  SetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport type {\n  BuiltinCalendarId,\n  CalendarParams as Params,\n  CalendarReturn as Return,\n  AnyTemporalKey,\n  CalendarSlot\n} from './internaltypes';\n\nconst ArrayIncludes = Array.prototype.includes;\nconst ArrayPrototypePush = Array.prototype.push;\nconst IntlDateTimeFormat = globalThis.Intl.DateTimeFormat;\nconst ArraySort = Array.prototype.sort;\nconst MathAbs = Math.abs;\nconst MathFloor = Math.floor;\nconst ObjectCreate = Object.create;\nconst ObjectEntries = Object.entries;\nconst OriginalSet = Set;\nconst ReflectOwnKeys = Reflect.ownKeys;\nconst SetPrototypeAdd = Set.prototype.add;\nconst SetPrototypeValues = Set.prototype.values;\n\n/**\n * Shape of internal implementation of each built-in calendar. Note that\n * parameter types are simpler than CalendarProtocol because the `Calendar`\n * class performs validation and parameter normalization before handing control\n * over to CalendarImpl.\n *\n * There are two instances of this interface: one for the ISO calendar and\n * another that handles logic that's the same across all non-ISO calendars. The\n * latter is cloned for each non-ISO calendar at the end of this file.\n */\ninterface CalendarImpl {\n  year(date: Temporal.PlainDate | Temporal.PlainYearMonth): number;\n  month(date: Temporal.PlainDate | Temporal.PlainYearMonth | Temporal.PlainMonthDay): number;\n  monthCode(date: Temporal.PlainDate | Temporal.PlainYearMonth | Temporal.PlainMonthDay): string;\n  day(date: Temporal.PlainDate | Temporal.PlainMonthDay): number;\n  era(date: Temporal.PlainDate | Temporal.PlainYearMonth): string | undefined;\n  eraYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): number | undefined;\n  dayOfWeek(date: Temporal.PlainDate): number;\n  dayOfYear(date: Temporal.PlainDate): number;\n  weekOfYear(date: Temporal.PlainDate): number;\n  yearOfWeek(date: Temporal.PlainDate): number;\n  daysInWeek(date: Temporal.PlainDate): number;\n  daysInMonth(date: Temporal.PlainDate | Temporal.PlainYearMonth): number;\n  daysInYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): number;\n  monthsInYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): number;\n  inLeapYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): boolean;\n  dateFromFields(\n    fields: Params['dateFromFields'][0],\n    options: NonNullable<Params['dateFromFields'][1]>,\n    calendar: string\n  ): Temporal.PlainDate;\n  yearMonthFromFields(\n    fields: Params['yearMonthFromFields'][0],\n    options: NonNullable<Params['yearMonthFromFields'][1]>,\n    calendar: string\n  ): Temporal.PlainYearMonth;\n  monthDayFromFields(\n    fields: Params['monthDayFromFields'][0],\n    options: NonNullable<Params['monthDayFromFields'][1]>,\n    calendar: string\n  ): Temporal.PlainMonthDay;\n  dateAdd(\n    date: Temporal.PlainDate,\n    years: number,\n    months: number,\n    weeks: number,\n    days: number,\n    overflow: Overflow,\n    calendar: string\n  ): Temporal.PlainDate;\n  dateUntil(\n    one: Temporal.PlainDate,\n    two: Temporal.PlainDate,\n    largestUnit: 'year' | 'month' | 'week' | 'day'\n  ): { years: number; months: number; weeks: number; days: number };\n  fields(fields: string[]): string[];\n  fieldKeysToIgnore(keys: string[]): string[];\n}\n\ntype CalendarImplementations = {\n  [k in BuiltinCalendarId]: CalendarImpl;\n};\n\n/**\n * Implementations for each calendar.\n * Registration for each of these calendars happens throughout this file. The ISO and non-ISO calendars are registered\n * separately - look for 'iso8601' for the ISO calendar registration, and all non-ISO calendar registrations happens\n * at the bottom of the file.\n */\nconst impl: CalendarImplementations = {} as unknown as CalendarImplementations;\n\n/**\n * Thin wrapper around the implementation of each built-in calendar. This\n * class's methods follow a similar pattern:\n * 1. Validate parameters\n * 2. Fill in default options (for methods where options are present)\n * 3. Simplify and/or normalize parameters. For example, some methods accept\n *    PlainDate, PlainDateTime, ZonedDateTime, etc. and these are normalized to\n *    PlainDate.\n * 4. Look up the ID of the built-in calendar\n * 5. Fetch the implementation object for that ID.\n * 6. Call the corresponding method in the implementation object.\n */\nexport class Calendar implements Temporal.Calendar {\n  constructor(idParam: Params['constructor'][0]) {\n    // Note: if the argument is not passed, IsBuiltinCalendar(\"undefined\") will fail. This check\n    //       exists only to improve the error message.\n    if (arguments.length < 1) {\n      throw new RangeError('missing argument: id is required');\n    }\n\n    const id = ES.ToString(idParam);\n    if (!ES.IsBuiltinCalendar(id)) throw new RangeError(`invalid calendar identifier ${id}`);\n    CreateSlots(this);\n    SetSlot(this, CALENDAR_ID, ES.ASCIILowercase(id));\n\n    if (DEBUG) {\n      Object.defineProperty(this, '_repr_', {\n        value: `${this[Symbol.toStringTag]} <${id}>`,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n    }\n  }\n  get id(): Return['id'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, CALENDAR_ID);\n  }\n  dateFromFields(\n    fields: Params['dateFromFields'][0],\n    optionsParam: Params['dateFromFields'][1] = undefined\n  ): Return['dateFromFields'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(fields)) throw new TypeError('invalid fields');\n    const options = ES.GetOptionsObject(optionsParam);\n    const id = GetSlot(this, CALENDAR_ID);\n    return impl[id].dateFromFields(fields, options, id);\n  }\n  yearMonthFromFields(\n    fields: Params['yearMonthFromFields'][0],\n    optionsParam: Params['yearMonthFromFields'][1] = undefined\n  ): Return['yearMonthFromFields'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(fields)) throw new TypeError('invalid fields');\n    const options = ES.GetOptionsObject(optionsParam);\n    const id = GetSlot(this, CALENDAR_ID);\n    return impl[id].yearMonthFromFields(fields, options, id);\n  }\n  monthDayFromFields(\n    fields: Params['monthDayFromFields'][0],\n    optionsParam: Params['monthDayFromFields'][1] = undefined\n  ): Return['monthDayFromFields'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(fields)) throw new TypeError('invalid fields');\n    const options = ES.GetOptionsObject(optionsParam);\n    const id = GetSlot(this, CALENDAR_ID);\n    return impl[id].monthDayFromFields(fields, options, id);\n  }\n  fields(fields: Params['fields'][0]): Return['fields'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const fieldsArray = [] as string[];\n    const allowed = new Set([\n      'year',\n      'month',\n      'monthCode',\n      'day',\n      'hour',\n      'minute',\n      'second',\n      'millisecond',\n      'microsecond',\n      'nanosecond'\n    ]);\n    for (const name of fields) {\n      if (typeof name !== 'string') throw new TypeError('invalid fields');\n      if (!allowed.has(name)) throw new RangeError(`invalid field name ${name}`);\n      allowed.delete(name);\n      ArrayPrototypePush.call(fieldsArray, name);\n    }\n    return impl[GetSlot(this, CALENDAR_ID)].fields(fieldsArray);\n  }\n  mergeFields(\n    fieldsParam: Params['mergeFields'][0],\n    additionalFieldsParam: Params['mergeFields'][1]\n  ): Return['mergeFields'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const fields = ES.ToObject(fieldsParam);\n    const fieldsCopy = ObjectCreate(null);\n    ES.CopyDataProperties(fieldsCopy, fields, [], [undefined]);\n    const additionalFields = ES.ToObject(additionalFieldsParam);\n    const additionalFieldsCopy = ObjectCreate(null);\n    ES.CopyDataProperties(additionalFieldsCopy, additionalFields, [], [undefined]);\n    const additionalKeys = ReflectOwnKeys(additionalFieldsCopy) as (keyof typeof additionalFields)[];\n    const overriddenKeys = impl[GetSlot(this, CALENDAR_ID)].fieldKeysToIgnore(additionalKeys);\n    const merged = ObjectCreate(null);\n    const fieldsKeys = ReflectOwnKeys(fieldsCopy);\n    for (const key of fieldsKeys) {\n      let propValue = undefined;\n      if (ES.Call(ArrayIncludes, overriddenKeys, [key])) propValue = additionalFieldsCopy[key];\n      else propValue = fieldsCopy[key];\n      if (propValue !== undefined) merged[key] = propValue;\n    }\n    ES.CopyDataProperties(merged, additionalFieldsCopy, []);\n    return merged;\n  }\n  dateAdd(\n    dateParam: Params['dateAdd'][0],\n    durationParam: Params['dateAdd'][1],\n    optionsParam: Params['dateAdd'][2] = undefined\n  ): Return['dateAdd'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    const duration = ES.ToTemporalDuration(durationParam);\n    const options = ES.GetOptionsObject(optionsParam);\n    const overflow = ES.ToTemporalOverflow(options);\n    const { days } = ES.BalanceDuration(\n      GetSlot(duration, DAYS),\n      GetSlot(duration, HOURS),\n      GetSlot(duration, MINUTES),\n      GetSlot(duration, SECONDS),\n      GetSlot(duration, MILLISECONDS),\n      GetSlot(duration, MICROSECONDS),\n      GetSlot(duration, NANOSECONDS),\n      'day'\n    );\n    const id = GetSlot(this, CALENDAR_ID);\n    return impl[id].dateAdd(\n      date,\n      GetSlot(duration, YEARS),\n      GetSlot(duration, MONTHS),\n      GetSlot(duration, WEEKS),\n      days,\n      overflow,\n      id\n    );\n  }\n  dateUntil(\n    oneParam: Params['dateUntil'][0],\n    twoParam: Params['dateUntil'][1],\n    optionsParam: Params['dateUntil'][2] = undefined\n  ): Return['dateUntil'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const one = ES.ToTemporalDate(oneParam);\n    const two = ES.ToTemporalDate(twoParam);\n    const options = ES.GetOptionsObject(optionsParam);\n    let largestUnit = ES.GetTemporalUnit(options, 'largestUnit', 'date', 'auto');\n    if (largestUnit === 'auto') largestUnit = 'day';\n    const { years, months, weeks, days } = impl[GetSlot(this, CALENDAR_ID)].dateUntil(one, two, largestUnit);\n    const Duration = GetIntrinsic('%Temporal.Duration%');\n    return new Duration(years, months, weeks, days, 0, 0, 0, 0, 0, 0);\n  }\n  year(dateParam: Params['year'][0]): Return['year'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].year(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  month(dateParam: Params['month'][0]): Return['month'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (ES.IsTemporalMonthDay(date)) throw new TypeError('use monthCode on PlainMonthDay instead');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].month(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  monthCode(dateParam: Params['monthCode'][0]): Return['monthCode'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date) && !ES.IsTemporalMonthDay(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].monthCode(\n      date as Temporal.PlainDate | Temporal.PlainMonthDay | Temporal.PlainYearMonth\n    );\n  }\n  day(dateParam: Params['day'][0]): Return['day'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalMonthDay(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].day(date as Temporal.PlainDate | Temporal.PlainMonthDay);\n  }\n  era(dateParam: Params['era'][0]): Return['era'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].era(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  eraYear(dateParam: Params['eraYear'][0]): Return['eraYear'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].eraYear(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  dayOfWeek(dateParam: Params['dayOfWeek'][0]): Return['dayOfWeek'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    return impl[GetSlot(this, CALENDAR_ID)].dayOfWeek(date);\n  }\n  dayOfYear(dateParam: Params['dayOfYear'][0]): Return['dayOfYear'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    return impl[GetSlot(this, CALENDAR_ID)].dayOfYear(date);\n  }\n  weekOfYear(dateParam: Params['weekOfYear'][0]): Return['weekOfYear'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    return impl[GetSlot(this, CALENDAR_ID)].weekOfYear(date);\n  }\n  yearOfWeek(dateParam: Params['yearOfWeek'][0]): Return['yearOfWeek'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    return impl[GetSlot(this, CALENDAR_ID)].yearOfWeek(date);\n  }\n  daysInWeek(dateParam: Params['daysInWeek'][0]): Return['daysInWeek'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    const date = ES.ToTemporalDate(dateParam);\n    return impl[GetSlot(this, CALENDAR_ID)].daysInWeek(date);\n  }\n  daysInMonth(dateParam: Params['daysInMonth'][0]): Return['daysInMonth'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].daysInMonth(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  daysInYear(dateParam: Params['daysInYear'][0]): Return['daysInYear'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].daysInYear(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  monthsInYear(dateParam: Params['monthsInYear'][0]): Return['monthsInYear'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].monthsInYear(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  inLeapYear(dateParam: Params['inLeapYear'][0]): Return['inLeapYear'] {\n    let date = dateParam;\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsTemporalYearMonth(date)) date = ES.ToTemporalDate(date);\n    return impl[GetSlot(this, CALENDAR_ID)].inLeapYear(date as Temporal.PlainDate | Temporal.PlainYearMonth);\n  }\n  toString(): string {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, CALENDAR_ID);\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalCalendar(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, CALENDAR_ID);\n  }\n  static from(item: Params['from'][0]): Return['from'] {\n    const calendarSlotValue = ES.ToTemporalCalendarSlotValue(item);\n    return ES.ToTemporalCalendarObject(calendarSlotValue);\n  }\n  [Symbol.toStringTag]!: 'Temporal.Calendar';\n}\n\nMakeIntrinsicClass(Calendar, 'Temporal.Calendar');\nDefineIntrinsic('Temporal.Calendar.from', Calendar.from);\nDefineIntrinsic('Temporal.Calendar.prototype.dateAdd', Calendar.prototype.dateAdd);\nDefineIntrinsic('Temporal.Calendar.prototype.dateFromFields', Calendar.prototype.dateFromFields);\nDefineIntrinsic('Temporal.Calendar.prototype.dateUntil', Calendar.prototype.dateUntil);\nDefineIntrinsic('Temporal.Calendar.prototype.day', Calendar.prototype.day);\nDefineIntrinsic('Temporal.Calendar.prototype.dayOfWeek', Calendar.prototype.dayOfWeek);\nDefineIntrinsic('Temporal.Calendar.prototype.dayOfYear', Calendar.prototype.dayOfYear);\nDefineIntrinsic('Temporal.Calendar.prototype.daysInMonth', Calendar.prototype.daysInMonth);\nDefineIntrinsic('Temporal.Calendar.prototype.daysInWeek', Calendar.prototype.daysInWeek);\nDefineIntrinsic('Temporal.Calendar.prototype.daysInYear', Calendar.prototype.daysInYear);\nDefineIntrinsic('Temporal.Calendar.prototype.era', Calendar.prototype.era);\nDefineIntrinsic('Temporal.Calendar.prototype.eraYear', Calendar.prototype.eraYear);\nDefineIntrinsic('Temporal.Calendar.prototype.fields', Calendar.prototype.fields);\nDefineIntrinsic('Temporal.Calendar.prototype.inLeapYear', Calendar.prototype.inLeapYear);\nDefineIntrinsic('Temporal.Calendar.prototype.mergeFields', Calendar.prototype.mergeFields);\nDefineIntrinsic('Temporal.Calendar.prototype.month', Calendar.prototype.month);\nDefineIntrinsic('Temporal.Calendar.prototype.monthCode', Calendar.prototype.monthCode);\nDefineIntrinsic('Temporal.Calendar.prototype.monthDayFromFields', Calendar.prototype.monthDayFromFields);\nDefineIntrinsic('Temporal.Calendar.prototype.monthsInYear', Calendar.prototype.monthsInYear);\nDefineIntrinsic('Temporal.Calendar.prototype.weekOfYear', Calendar.prototype.weekOfYear);\nDefineIntrinsic('Temporal.Calendar.prototype.year', Calendar.prototype.year);\nDefineIntrinsic('Temporal.Calendar.prototype.yearMonthFromFields', Calendar.prototype.yearMonthFromFields);\nDefineIntrinsic('Temporal.Calendar.prototype.yearOfWeek', Calendar.prototype.yearOfWeek);\n\n/**\n * Implementation for the ISO 8601 calendar. This is the only calendar that's\n * guaranteed to be supported by all ECMAScript implementations, including those\n * without Intl (ECMA-402) support.\n */\nimpl['iso8601'] = {\n  dateFromFields(fieldsParam, options, calendarSlotValue) {\n    let fields = ES.PrepareTemporalFields(fieldsParam, ['day', 'month', 'monthCode', 'year'], ['year', 'day']);\n    const overflow = ES.ToTemporalOverflow(options);\n    fields = resolveNonLunisolarMonth(fields);\n    let { year, month, day } = fields;\n    ({ year, month, day } = ES.RegulateISODate(year, month, day, overflow));\n    return ES.CreateTemporalDate(year, month, day, calendarSlotValue);\n  },\n  yearMonthFromFields(fieldsParam, options, calendarSlotValue) {\n    let fields = ES.PrepareTemporalFields(fieldsParam, ['month', 'monthCode', 'year'], ['year']);\n    const overflow = ES.ToTemporalOverflow(options);\n    fields = resolveNonLunisolarMonth(fields);\n    let { year, month } = fields;\n    ({ year, month } = ES.RegulateISOYearMonth(year, month, overflow));\n    return ES.CreateTemporalYearMonth(year, month, calendarSlotValue, /* referenceISODay = */ 1);\n  },\n  monthDayFromFields(fieldsParam, options, calendarSlotValue) {\n    let fields = ES.PrepareTemporalFields(fieldsParam, ['day', 'month', 'monthCode', 'year'], ['day']);\n    const overflow = ES.ToTemporalOverflow(options);\n    if (fields.month !== undefined && fields.year === undefined && fields.monthCode === undefined) {\n      throw new TypeError('either year or monthCode required with month');\n    }\n    const useYear = fields.monthCode === undefined;\n    const referenceISOYear = 1972;\n    fields = resolveNonLunisolarMonth(fields);\n    let { month, day, year } = fields;\n    ({ month, day } = ES.RegulateISODate(useYear ? year : referenceISOYear, month, day, overflow));\n    return ES.CreateTemporalMonthDay(month, day, calendarSlotValue, referenceISOYear);\n  },\n  fields(fields) {\n    return fields;\n  },\n  fieldKeysToIgnore(keys) {\n    const result = new OriginalSet();\n    for (let ix = 0; ix < keys.length; ix++) {\n      const key = keys[ix];\n      ES.Call(SetPrototypeAdd, result, [key]);\n      if (key === 'month') {\n        ES.Call(SetPrototypeAdd, result, ['monthCode']);\n      } else if (key === 'monthCode') {\n        ES.Call(SetPrototypeAdd, result, ['month']);\n      }\n    }\n    return [...ES.Call(SetPrototypeValues, result, [])];\n  },\n  dateAdd(date, years, months, weeks, days, overflow, calendarSlotValue) {\n    let year = GetSlot(date, ISO_YEAR);\n    let month = GetSlot(date, ISO_MONTH);\n    let day = GetSlot(date, ISO_DAY);\n    ({ year, month, day } = ES.AddISODate(year, month, day, years, months, weeks, days, overflow));\n    return ES.CreateTemporalDate(year, month, day, calendarSlotValue);\n  },\n  dateUntil(one, two, largestUnit) {\n    return ES.DifferenceISODate(\n      GetSlot(one, ISO_YEAR),\n      GetSlot(one, ISO_MONTH),\n      GetSlot(one, ISO_DAY),\n      GetSlot(two, ISO_YEAR),\n      GetSlot(two, ISO_MONTH),\n      GetSlot(two, ISO_DAY),\n      largestUnit\n    );\n  },\n  year(date) {\n    return GetSlot(date, ISO_YEAR);\n  },\n  era() {\n    return undefined;\n  },\n  eraYear() {\n    return undefined;\n  },\n  month(date) {\n    return GetSlot(date, ISO_MONTH);\n  },\n  monthCode(date) {\n    return buildMonthCode(GetSlot(date, ISO_MONTH));\n  },\n  day(date) {\n    return GetSlot(date, ISO_DAY);\n  },\n  dayOfWeek(date) {\n    return ES.DayOfWeek(GetSlot(date, ISO_YEAR), GetSlot(date, ISO_MONTH), GetSlot(date, ISO_DAY));\n  },\n  dayOfYear(date) {\n    return ES.DayOfYear(GetSlot(date, ISO_YEAR), GetSlot(date, ISO_MONTH), GetSlot(date, ISO_DAY));\n  },\n  weekOfYear(date) {\n    return ES.WeekOfYear(GetSlot(date, ISO_YEAR), GetSlot(date, ISO_MONTH), GetSlot(date, ISO_DAY)).week;\n  },\n  yearOfWeek(date) {\n    return ES.WeekOfYear(GetSlot(date, ISO_YEAR), GetSlot(date, ISO_MONTH), GetSlot(date, ISO_DAY)).year;\n  },\n  daysInWeek() {\n    return 7;\n  },\n  daysInMonth(date) {\n    return ES.ISODaysInMonth(GetSlot(date, ISO_YEAR), GetSlot(date, ISO_MONTH));\n  },\n  daysInYear(dateParam) {\n    let date = dateParam;\n    if (!HasSlot(date, ISO_YEAR)) date = ES.ToTemporalDate(date);\n    return ES.LeapYear(GetSlot(date, ISO_YEAR)) ? 366 : 365;\n  },\n  monthsInYear() {\n    return 12;\n  },\n  inLeapYear(dateParam) {\n    let date = dateParam;\n    if (!HasSlot(date, ISO_YEAR)) date = ES.ToTemporalDate(date);\n    return ES.LeapYear(GetSlot(date, ISO_YEAR));\n  }\n};\n\n// Note: Built-in calendars other than iso8601 are not part of the Temporal\n// proposal for ECMA-262. These calendars will be standardized as part of\n// ECMA-402. Code below here includes an implementation of these calendars to\n// validate the Temporal API and to get feedback. However, native non-ISO\n// calendar behavior is at least somewhat implementation-defined, so may not\n// match this polyfill's output exactly.\n//\n// Some ES implementations don't include ECMA-402. For this reason, it's helpful\n// to ensure a clean separation between the ISO calendar implementation which is\n// a part of ECMA-262 and the non-ISO calendar implementation which requires\n// ECMA-402.\n//\n// To ensure this separation, the implementation is split. A `CalendarImpl`\n// interface defines the common operations between both ISO and non-ISO\n// calendars.\n\n/**\n * This type is passed through from Calendar#dateFromFields().\n * `monthExtra` is additional information used internally to identify lunisolar leap months.\n */\ntype CalendarDateFields = Params['dateFromFields'][0] & { monthExtra?: string };\n\n/**\n * This is a \"fully populated\" calendar date record. It's only lacking\n * `era`/`eraYear` (which may not be present in all calendars) and `monthExtra`\n * which is only used in some cases.\n */\ntype FullCalendarDate = {\n  era?: string;\n  eraYear?: number;\n  year: number;\n  month: number;\n  monthCode: string;\n  day: number;\n  monthExtra?: string;\n};\n\n// The types below are various subsets of calendar dates\ntype CalendarYMD = { year: number; month: number; day: number };\ntype CalendarYM = { year: number; month: number };\ntype CalendarYearOnly = { year: number };\ntype EraAndEraYear = { era: string; eraYear: number };\n\n/** Record representing YMD of an ISO calendar date */\ntype IsoYMD = { year: number; month: number; day: number };\n\ntype Overflow = NonNullable<Temporal.AssignmentOptions['overflow']>;\n\nfunction monthCodeNumberPart(monthCode: string) {\n  if (!monthCode.startsWith('M')) {\n    throw new RangeError(`Invalid month code: ${monthCode}.  Month codes must start with M.`);\n  }\n  const month = +monthCode.slice(1);\n  if (isNaN(month)) throw new RangeError(`Invalid month code: ${monthCode}`);\n  return month;\n}\n\nfunction buildMonthCode(month: number | string, leap = false) {\n  return `M${month.toString().padStart(2, '0')}${leap ? 'L' : ''}`;\n}\n\n/**\n * Safely merge a month, monthCode pair into an integer month.\n * If both are present, make sure they match.\n * This logic doesn't work for lunisolar calendars!\n * */\nfunction resolveNonLunisolarMonth<T extends { monthCode?: string; month?: number }>(\n  calendarDate: T,\n  overflow: Overflow | undefined = undefined,\n  monthsPerYear = 12\n) {\n  let { month, monthCode } = calendarDate;\n  if (monthCode === undefined) {\n    if (month === undefined) throw new TypeError('Either month or monthCode are required');\n    // The ISO calendar uses the default (undefined) value because it does\n    // constrain/reject after this method returns. Non-ISO calendars, however,\n    // rely on this function to constrain/reject out-of-range `month` values.\n    if (overflow === 'reject') ES.RejectToRange(month, 1, monthsPerYear);\n    if (overflow === 'constrain') month = ES.ConstrainToRange(month, 1, monthsPerYear);\n    monthCode = buildMonthCode(month);\n  } else {\n    const numberPart = monthCodeNumberPart(monthCode);\n    if (month !== undefined && month !== numberPart) {\n      throw new RangeError(`monthCode ${monthCode} and month ${month} must match if both are present`);\n    }\n    if (monthCode !== buildMonthCode(numberPart)) {\n      throw new RangeError(`Invalid month code: ${monthCode}`);\n    }\n    month = numberPart;\n    if (month < 1 || month > monthsPerYear) throw new RangeError(`Invalid monthCode: ${monthCode}`);\n  }\n  return { ...calendarDate, month, monthCode };\n}\n\ntype CachedTypes = Temporal.PlainYearMonth | Temporal.PlainDate | Temporal.PlainMonthDay;\n\n/**\n * This prototype implementation of non-ISO calendars makes many repeated calls\n * to Intl APIs which may be slow (e.g. >0.2ms). This trivial cache will speed\n * up these repeat accesses. Each cache instance is associated (via a WeakMap)\n * to a specific Temporal object, which speeds up multiple calendar calls on the\n * same Temporal object instance.  No invalidation or pruning is necessary\n * because each object's cache is thrown away when the object is GC-ed.\n */\nclass OneObjectCache {\n  map = new Map();\n  calls = 0;\n  now: number;\n  hits = 0;\n  misses = 0;\n  constructor(cacheToClone?: OneObjectCache) {\n    this.now = globalThis.performance ? globalThis.performance.now() : Date.now();\n    if (cacheToClone !== undefined) {\n      let i = 0;\n      for (const entry of cacheToClone.map.entries()) {\n        if (++i > OneObjectCache.MAX_CACHE_ENTRIES) break;\n        this.map.set(...entry);\n      }\n    }\n  }\n  get(key: string) {\n    const result = this.map.get(key);\n    if (result) {\n      this.hits++;\n      this.report();\n    }\n    this.calls++;\n    return result;\n  }\n  set(key: string, value: unknown) {\n    this.map.set(key, value);\n    this.misses++;\n    this.report();\n  }\n  report() {\n    /*\n    if (this.calls === 0) return;\n    const ms = (globalThis.performance ? globalThis.performance.now() : Date.now()) - this.now;\n    const hitRate = ((100 * this.hits) / this.calls).toFixed(0);\n    console.log(`${this.calls} calls in ${ms.toFixed(2)}ms. Hits: ${this.hits} (${hitRate}%). Misses: ${this.misses}.`);\n    */\n  }\n  setObject(obj: CachedTypes) {\n    if (OneObjectCache.objectMap.get(obj)) throw new RangeError('object already cached');\n    OneObjectCache.objectMap.set(obj, this);\n    this.report();\n  }\n\n  static objectMap = new WeakMap();\n  static MAX_CACHE_ENTRIES = 1000;\n\n  /**\n   * Returns a WeakMap-backed cache that's used to store expensive results\n   * that are associated with a particular Temporal object instance.\n   *\n   * @param obj - object to associate with the cache\n   */\n  static getCacheForObject(obj: CachedTypes) {\n    let cache = OneObjectCache.objectMap.get(obj);\n    if (!cache) {\n      cache = new OneObjectCache();\n      OneObjectCache.objectMap.set(obj, cache);\n    }\n    return cache;\n  }\n}\n\nfunction toUtcIsoDateString({ isoYear, isoMonth, isoDay }: { isoYear: number; isoMonth: number; isoDay: number }) {\n  const yearString = ES.ISOYearString(isoYear);\n  const monthString = ES.ISODateTimePartString(isoMonth);\n  const dayString = ES.ISODateTimePartString(isoDay);\n  return `${yearString}-${monthString}-${dayString}T00:00Z`;\n}\n\nfunction simpleDateDiff(one: CalendarYMD, two: CalendarYMD) {\n  return {\n    years: one.year - two.year,\n    months: one.month - two.month,\n    days: one.day - two.day\n  };\n}\n\n/**\n * Implementation helper that's common to all non-ISO calendars\n */\nabstract class HelperBase {\n  abstract id: BuiltinCalendarId;\n  abstract monthsInYear(calendarDate: CalendarYearOnly, cache?: OneObjectCache): number;\n  abstract maximumMonthLength(calendarDate?: CalendarYM): number;\n  abstract minimumMonthLength(calendarDate?: CalendarYM): number;\n  abstract estimateIsoDate(calendarDate: CalendarYMD): IsoYMD;\n  abstract inLeapYear(calendarDate: CalendarYearOnly, cache?: OneObjectCache): boolean;\n  abstract calendarType: 'solar' | 'lunar' | 'lunisolar';\n  reviseIntlEra?<T extends Partial<EraAndEraYear>>(calendarDate: T, isoDate: IsoYMD): T;\n  constantEra?: string;\n  checkIcuBugs?(isoDate: IsoYMD): void;\n  private formatter?: globalThis.Intl.DateTimeFormat;\n  getFormatter() {\n    // `new Intl.DateTimeFormat()` is amazingly slow and chews up RAM. Per\n    // https://bugs.chromium.org/p/v8/issues/detail?id=6528#c4, we cache one\n    // DateTimeFormat instance per calendar. Caching is lazy so we only pay for\n    // calendars that are used. Note that the nonIsoHelperBase object is spread\n    // into each each calendar's implementation before any cache is created, so\n    // each calendar gets its own separate cached formatter.\n    if (typeof this.formatter === 'undefined') {\n      this.formatter = new IntlDateTimeFormat(`en-US-u-ca-${this.id}`, {\n        day: 'numeric',\n        month: 'numeric',\n        year: 'numeric',\n        era: this.eraLength,\n        timeZone: 'UTC'\n      });\n    }\n    return this.formatter;\n  }\n  isoToCalendarDate(isoDate: IsoYMD, cache: OneObjectCache): FullCalendarDate {\n    const { year: isoYear, month: isoMonth, day: isoDay } = isoDate;\n    const key = JSON.stringify({ func: 'isoToCalendarDate', isoYear, isoMonth, isoDay, id: this.id });\n    const cached = cache.get(key);\n    if (cached) return cached;\n\n    const dateTimeFormat = this.getFormatter();\n    let parts, isoString;\n    try {\n      isoString = toUtcIsoDateString({ isoYear, isoMonth, isoDay });\n      parts = dateTimeFormat.formatToParts(new Date(isoString));\n    } catch (e: unknown) {\n      throw new RangeError(`Invalid ISO date: ${JSON.stringify({ isoYear, isoMonth, isoDay })}`);\n    }\n    const result: Partial<FullCalendarDate> = {};\n    for (let { type, value } of parts) {\n      if (type === 'year') result.eraYear = +value;\n      // TODO: remove this type annotation when `relatedYear` gets into TS lib types\n      if (type === ('relatedYear' as Intl.DateTimeFormatPartTypes)) result.eraYear = +value;\n      if (type === 'month') {\n        const matches = /^([0-9]*)(.*?)$/.exec(value);\n        if (!matches || matches.length != 3 || (!matches[1] && !matches[2])) {\n          throw new RangeError(`Unexpected month: ${value}`);\n        }\n        // If the month has no numeric part (should only see this for the Hebrew\n        // calendar with newer FF / Chromium versions; see\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1751833) then set a\n        // placeholder month index of `1` and rely on the derived class to\n        // calculate the correct month index from the month name stored in\n        // `monthExtra`.\n        result.month = matches[1] ? +matches[1] : 1;\n        if (result.month < 1) {\n          throw new RangeError(\n            `Invalid month ${value} from ${isoString}[u-ca-${this.id}]` +\n              ' (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10527)'\n          );\n        }\n        if (result.month > 13) {\n          throw new RangeError(\n            `Invalid month ${value} from ${isoString}[u-ca-${this.id}]` +\n              ' (probably due to https://bugs.chromium.org/p/v8/issues/detail?id=10529)'\n          );\n        }\n\n        // The ICU formats for the Hebrew calendar no longer support a numeric\n        // month format. So we'll rely on the derived class to interpret it.\n        // `monthExtra` is also used on the Chinese calendar to handle a suffix\n        // \"bis\" indicating a leap month.\n        if (matches[2]) result.monthExtra = matches[2];\n      }\n      if (type === 'day') result.day = +value;\n      if (this.hasEra && type === 'era' && value != null && value !== '') {\n        // The convention for Temporal era values is lowercase, so following\n        // that convention in this prototype. Punctuation is removed, accented\n        // letters are normalized, and spaces are replaced with dashes.\n        // E.g.: \"ERA0\" => \"era0\", \"Before R.O.C.\" => \"before-roc\", \"En\" => \"eno\"\n        // The call to normalize() and the replacement regex deals with era\n        // names that contain non-ASCII characters like Japanese eras. Also\n        // ignore extra content in parentheses like JPN era date ranges.\n        value = value.split(' (')[0];\n        result.era = value\n          .normalize('NFD')\n          .replace(/[^-0-9 \\p{L}]/gu, '')\n          .replace(' ', '-')\n          .toLowerCase();\n      }\n    }\n    if (result.eraYear === undefined) {\n      // Node 12 has outdated ICU data that lacks the `relatedYear` field in the\n      // output of Intl.DateTimeFormat.formatToParts.\n      throw new RangeError(\n        `Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`\n      );\n    }\n    // Translate eras that may be handled differently by Temporal vs. by Intl\n    // (e.g. Japanese pre-Meiji eras). See https://github.com/tc39/proposal-temporal/issues/526.\n    if (this.reviseIntlEra) {\n      const { era, eraYear } = this.reviseIntlEra(result, isoDate);\n      result.era = era;\n      result.eraYear = eraYear;\n    }\n    if (this.checkIcuBugs) this.checkIcuBugs(isoDate);\n\n    const calendarDate = this.adjustCalendarDate(result, cache, 'constrain', true);\n    if (calendarDate.year === undefined) throw new RangeError(`Missing year converting ${JSON.stringify(isoDate)}`);\n    if (calendarDate.month === undefined) throw new RangeError(`Missing month converting ${JSON.stringify(isoDate)}`);\n    if (calendarDate.day === undefined) throw new RangeError(`Missing day converting ${JSON.stringify(isoDate)}`);\n    cache.set(key, calendarDate);\n    // Also cache the reverse mapping\n    ['constrain', 'reject'].forEach((overflow) => {\n      const keyReverse = JSON.stringify({\n        func: 'calendarToIsoDate',\n        year: calendarDate.year,\n        month: calendarDate.month,\n        day: calendarDate.day,\n        overflow,\n        id: this.id\n      });\n      cache.set(keyReverse, isoDate);\n    });\n    return calendarDate;\n  }\n  validateCalendarDate(calendarDate: Partial<FullCalendarDate>): asserts calendarDate is FullCalendarDate {\n    const { era, month, year, day, eraYear, monthCode, monthExtra } = calendarDate;\n    // When there's a suffix (e.g. \"5bis\" for a leap month in Chinese calendar)\n    // the derived class must deal with it.\n    if (monthExtra !== undefined) throw new RangeError('Unexpected `monthExtra` value');\n    if (year === undefined && eraYear === undefined) throw new TypeError('year or eraYear is required');\n    if (month === undefined && monthCode === undefined) throw new TypeError('month or monthCode is required');\n    if (day === undefined) throw new RangeError('Missing day');\n    if (monthCode !== undefined) {\n      if (typeof monthCode !== 'string') {\n        throw new RangeError(`monthCode must be a string, not ${typeof monthCode}`);\n      }\n      if (!/^M([01]?\\d)(L?)$/.test(monthCode)) throw new RangeError(`Invalid monthCode: ${monthCode}`);\n    }\n    if (this.constantEra) {\n      if (era !== undefined && era !== this.constantEra) {\n        throw new RangeError(`era must be ${this.constantEra}, not ${era}`);\n      }\n      if (eraYear !== undefined && year !== undefined && eraYear !== year) {\n        throw new RangeError(`eraYear ${eraYear} does not match year ${year}`);\n      }\n    }\n    if (this.hasEra) {\n      if ((calendarDate['era'] === undefined) !== (calendarDate['eraYear'] === undefined)) {\n        throw new RangeError(\"properties 'era' and 'eraYear' must be provided together\");\n      }\n    }\n  }\n  /**\n   * Allows derived calendars to add additional fields and/or to make\n   * adjustments e.g. to set the era based on the date or to revise the month\n   * number in lunisolar calendars per\n   * https://github.com/tc39/proposal-temporal/issues/1203.\n   *\n   * The base implementation fills in missing values by assuming the simplest\n   * possible calendar:\n   * - no eras or a constant era defined in `.constantEra`\n   * - non-lunisolar calendar (no leap months)\n   * */\n  adjustCalendarDate(\n    calendarDateParam: Partial<FullCalendarDate>,\n    cache: OneObjectCache | undefined = undefined,\n    overflow: Overflow = 'constrain',\n    // This param is only used by derived classes\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    fromLegacyDate = false\n  ): FullCalendarDate {\n    if (this.calendarType === 'lunisolar') throw new RangeError('Override required for lunisolar calendars');\n    let calendarDate = calendarDateParam;\n    this.validateCalendarDate(calendarDate);\n    // For calendars that always use the same era, set it here so that derived\n    // calendars won't need to implement this method simply to set the era.\n    if (this.constantEra) {\n      // year and eraYear always match when there's only one possible era\n      const { year, eraYear } = calendarDate;\n      calendarDate = {\n        ...calendarDate,\n        era: this.constantEra,\n        year: year !== undefined ? year : eraYear,\n        eraYear: eraYear !== undefined ? eraYear : year\n      };\n    }\n\n    const largestMonth = this.monthsInYear(calendarDate as CalendarYearOnly, cache);\n    let { month, monthCode } = calendarDate;\n\n    ({ month, monthCode } = resolveNonLunisolarMonth(calendarDate, overflow, largestMonth));\n    return { ...(calendarDate as typeof calendarDate & CalendarYMD), month, monthCode };\n  }\n  regulateMonthDayNaive(calendarDate: FullCalendarDate, overflow: Overflow, cache: OneObjectCache): FullCalendarDate {\n    const largestMonth = this.monthsInYear(calendarDate, cache);\n    let { month, day } = calendarDate;\n    if (overflow === 'reject') {\n      ES.RejectToRange(month, 1, largestMonth);\n      ES.RejectToRange(day, 1, this.maximumMonthLength(calendarDate));\n    } else {\n      month = ES.ConstrainToRange(month, 1, largestMonth);\n      day = ES.ConstrainToRange(day, 1, this.maximumMonthLength({ ...calendarDate, month }));\n    }\n    return { ...calendarDate, month, day };\n  }\n  calendarToIsoDate(dateParam: CalendarDateFields, overflow: Overflow = 'constrain', cache: OneObjectCache): IsoYMD {\n    const originalDate = dateParam as Partial<FullCalendarDate>;\n    // First, normalize the calendar date to ensure that (year, month, day)\n    // are all present, converting monthCode and eraYear if needed.\n    let date = this.adjustCalendarDate(dateParam, cache, overflow, false);\n\n    // Fix obviously out-of-bounds values. Values that are valid generally, but\n    // not in this particular year, may not be caught here for some calendars.\n    // If so, these will be handled lower below.\n    date = this.regulateMonthDayNaive(date, overflow, cache);\n\n    const { year, month, day } = date;\n    const key = JSON.stringify({ func: 'calendarToIsoDate', year, month, day, overflow, id: this.id });\n    let cached = cache.get(key);\n    if (cached) return cached;\n    // If YMD are present in the input but the input has been constrained\n    // already, then cache both the original value and the constrained value.\n    let keyOriginal;\n    if (\n      originalDate.year !== undefined &&\n      originalDate.month !== undefined &&\n      originalDate.day !== undefined &&\n      (originalDate.year !== date.year || originalDate.month !== date.month || originalDate.day !== date.day)\n    ) {\n      keyOriginal = JSON.stringify({\n        func: 'calendarToIsoDate',\n        year: originalDate.year,\n        month: originalDate.month,\n        day: originalDate.day,\n        overflow,\n        id: this.id\n      });\n      cached = cache.get(keyOriginal);\n      if (cached) return cached;\n    }\n\n    // First, try to roughly guess the result\n    let isoEstimate = this.estimateIsoDate({ year, month, day });\n    const calculateSameMonthResult = (diffDays: number) => {\n      // If the estimate is in the same year & month as the target, then we can\n      // calculate the result exactly and short-circuit any additional logic.\n      // This optimization assumes that months are continuous. It would break if\n      // a calendar skipped days, like the Julian->Gregorian switchover. But the\n      // only ICU calendars that currently skip days (japanese/roc/buddhist) is\n      // a bug (https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)\n      // that's currently detected by `checkIcuBugs()` which will throw. So\n      // this optimization should be safe for all ICU calendars.\n      let testIsoEstimate = this.addDaysIso(isoEstimate, diffDays);\n      if (date.day > this.minimumMonthLength(date)) {\n        // There's a chance that the calendar date is out of range. Throw or\n        // constrain if so.\n        let testCalendarDate = this.isoToCalendarDate(testIsoEstimate, cache);\n        while (testCalendarDate.month !== month || testCalendarDate.year !== year) {\n          if (overflow === 'reject') {\n            throw new RangeError(`day ${day} does not exist in month ${month} of year ${year}`);\n          }\n          // Back up a day at a time until we're not hanging over the month end\n          testIsoEstimate = this.addDaysIso(testIsoEstimate, -1);\n          testCalendarDate = this.isoToCalendarDate(testIsoEstimate, cache);\n        }\n      }\n      return testIsoEstimate;\n    };\n    let sign = 0;\n    let roundtripEstimate = this.isoToCalendarDate(isoEstimate, cache);\n    let diff = simpleDateDiff(date, roundtripEstimate);\n    if (diff.years !== 0 || diff.months !== 0 || diff.days !== 0) {\n      const diffTotalDaysEstimate = diff.years * 365 + diff.months * 30 + diff.days;\n      isoEstimate = this.addDaysIso(isoEstimate, diffTotalDaysEstimate);\n      roundtripEstimate = this.isoToCalendarDate(isoEstimate, cache);\n      diff = simpleDateDiff(date, roundtripEstimate);\n      if (diff.years === 0 && diff.months === 0) {\n        isoEstimate = calculateSameMonthResult(diff.days);\n      } else {\n        sign = this.compareCalendarDates(date, roundtripEstimate);\n      }\n    }\n    // If the initial guess is not in the same month, then then bisect the\n    // distance to the target, starting with 8 days per step.\n    let increment = 8;\n    while (sign) {\n      isoEstimate = this.addDaysIso(isoEstimate, sign * increment);\n      const oldRoundtripEstimate = roundtripEstimate;\n      roundtripEstimate = this.isoToCalendarDate(isoEstimate, cache);\n      const oldSign = sign;\n      sign = this.compareCalendarDates(date, roundtripEstimate);\n      if (sign) {\n        diff = simpleDateDiff(date, roundtripEstimate);\n        if (diff.years === 0 && diff.months === 0) {\n          isoEstimate = calculateSameMonthResult(diff.days);\n          // Signal the loop condition that there's a match.\n          sign = 0;\n        } else if (oldSign && sign !== oldSign) {\n          if (increment > 1) {\n            // If the estimate overshot the target, try again with a smaller increment\n            // in the reverse direction.\n            increment /= 2;\n          } else {\n            // Increment is 1, and neither the previous estimate nor the new\n            // estimate is correct. The only way that can happen is if the\n            // original date was an invalid value that will be constrained or\n            // rejected here.\n            if (overflow === 'reject') {\n              throw new RangeError(`Can't find ISO date from calendar date: ${JSON.stringify({ ...originalDate })}`);\n            } else {\n              // To constrain, pick the earliest value\n              const order = this.compareCalendarDates(roundtripEstimate, oldRoundtripEstimate);\n              // If current value is larger, then back up to the previous value.\n              if (order > 0) isoEstimate = this.addDaysIso(isoEstimate, -1);\n              sign = 0;\n            }\n          }\n        }\n      }\n    }\n    cache.set(key, isoEstimate);\n    if (keyOriginal) cache.set(keyOriginal, isoEstimate);\n    if (\n      date.year === undefined ||\n      date.month === undefined ||\n      date.day === undefined ||\n      date.monthCode === undefined ||\n      (this.hasEra && (date.era === undefined || date.eraYear === undefined))\n    ) {\n      throw new RangeError('Unexpected missing property');\n    }\n    return isoEstimate;\n  }\n  temporalToCalendarDate(\n    date: Temporal.PlainDate | Temporal.PlainMonthDay | Temporal.PlainYearMonth,\n    cache: OneObjectCache\n  ): FullCalendarDate {\n    const isoDate = { year: GetSlot(date, ISO_YEAR), month: GetSlot(date, ISO_MONTH), day: GetSlot(date, ISO_DAY) };\n    const result = this.isoToCalendarDate(isoDate, cache);\n    return result;\n  }\n  compareCalendarDates(date1Param: Partial<CalendarYMD>, date2Param: Partial<CalendarYMD>): 0 | 1 | -1 {\n    // `date1` and `date2` are already records. The calls below simply validate\n    // that all three required fields are present.\n    const date1 = ES.PrepareTemporalFields(date1Param, ['day', 'month', 'year'], ['day', 'month', 'year']);\n    const date2 = ES.PrepareTemporalFields(date2Param, ['day', 'month', 'year'], ['day', 'month', 'year']);\n    if (date1.year !== date2.year) return ES.ComparisonResult(date1.year - date2.year);\n    if (date1.month !== date2.month) return ES.ComparisonResult(date1.month - date2.month);\n    if (date1.day !== date2.day) return ES.ComparisonResult(date1.day - date2.day);\n    return 0;\n  }\n  /** Ensure that a calendar date actually exists. If not, return the closest earlier date. */\n  regulateDate(calendarDate: CalendarYMD, overflow: Overflow = 'constrain', cache: OneObjectCache): FullCalendarDate {\n    const isoDate = this.calendarToIsoDate(calendarDate, overflow, cache);\n    return this.isoToCalendarDate(isoDate, cache);\n  }\n  addDaysIso(isoDate: IsoYMD, days: number): IsoYMD {\n    const added = ES.AddISODate(isoDate.year, isoDate.month, isoDate.day, 0, 0, 0, days, 'constrain');\n    return added;\n  }\n  addDaysCalendar(calendarDate: CalendarYMD, days: number, cache: OneObjectCache): FullCalendarDate {\n    const isoDate = this.calendarToIsoDate(calendarDate, 'constrain', cache);\n    const addedIso = this.addDaysIso(isoDate, days);\n    const addedCalendar = this.isoToCalendarDate(addedIso, cache);\n    return addedCalendar;\n  }\n  addMonthsCalendar(\n    calendarDateParam: CalendarYMD,\n    months: number,\n    overflow: Overflow,\n    cache: OneObjectCache\n  ): CalendarYMD {\n    let calendarDate = calendarDateParam;\n    const { day } = calendarDate;\n    for (let i = 0, absMonths = MathAbs(months); i < absMonths; i++) {\n      const { month } = calendarDate;\n      const oldCalendarDate = calendarDate;\n      const days =\n        months < 0\n          ? -Math.max(day, this.daysInPreviousMonth(calendarDate, cache))\n          : this.daysInMonth(calendarDate, cache);\n      const isoDate = this.calendarToIsoDate(calendarDate, 'constrain', cache);\n      let addedIso = this.addDaysIso(isoDate, days);\n      calendarDate = this.isoToCalendarDate(addedIso, cache);\n\n      // Normally, we can advance one month by adding the number of days in the\n      // current month. However, if we're at the end of the current month and\n      // the next month has fewer days, then we rolled over to the after-next\n      // month. Below we detect this condition and back up until we're back in\n      // the desired month.\n      if (months > 0) {\n        const monthsInOldYear = this.monthsInYear(oldCalendarDate, cache);\n        while (calendarDate.month - 1 !== month % monthsInOldYear) {\n          addedIso = this.addDaysIso(addedIso, -1);\n          calendarDate = this.isoToCalendarDate(addedIso, cache);\n        }\n      }\n\n      if (calendarDate.day !== day) {\n        // try to retain the original day-of-month, if possible\n        calendarDate = this.regulateDate({ ...calendarDate, day }, 'constrain', cache);\n      }\n    }\n    if (overflow === 'reject' && calendarDate.day !== day) {\n      throw new RangeError(`Day ${day} does not exist in resulting calendar month`);\n    }\n    return calendarDate;\n  }\n  addCalendar(\n    calendarDate: CalendarYMD & { monthCode: string },\n    { years = 0, months = 0, weeks = 0, days = 0 },\n    overflow: Overflow,\n    cache: OneObjectCache\n  ): FullCalendarDate {\n    const { year, day, monthCode } = calendarDate;\n    const addedYears = this.adjustCalendarDate({ year: year + years, monthCode, day }, cache);\n    const addedMonths = this.addMonthsCalendar(addedYears, months, overflow, cache);\n    const initialDays = days + weeks * 7;\n    const addedDays = this.addDaysCalendar(addedMonths, initialDays, cache);\n    return addedDays;\n  }\n  untilCalendar(\n    calendarOne: FullCalendarDate,\n    calendarTwo: FullCalendarDate,\n    largestUnit: Temporal.DateUnit,\n    cache: OneObjectCache\n  ): { years: number; months: number; weeks: number; days: number } {\n    let days = 0;\n    let weeks = 0;\n    let months = 0;\n    let years = 0;\n    switch (largestUnit) {\n      case 'day':\n        days = this.calendarDaysUntil(calendarOne, calendarTwo, cache);\n        break;\n      case 'week': {\n        const totalDays = this.calendarDaysUntil(calendarOne, calendarTwo, cache);\n        days = totalDays % 7;\n        weeks = (totalDays - days) / 7;\n        break;\n      }\n      case 'month':\n      case 'year': {\n        const sign = this.compareCalendarDates(calendarTwo, calendarOne);\n        if (!sign) {\n          return { years: 0, months: 0, weeks: 0, days: 0 };\n        }\n        const diffYears = calendarTwo.year - calendarOne.year;\n        const diffDays = calendarTwo.day - calendarOne.day;\n        if (largestUnit === 'year' && diffYears) {\n          let diffInYearSign = 0;\n          if (calendarTwo.monthCode > calendarOne.monthCode) diffInYearSign = 1;\n          if (calendarTwo.monthCode < calendarOne.monthCode) diffInYearSign = -1;\n          if (!diffInYearSign) diffInYearSign = Math.sign(diffDays);\n          const isOneFurtherInYear = diffInYearSign * sign < 0;\n          years = isOneFurtherInYear ? diffYears - sign : diffYears;\n        }\n        const yearsAdded = years ? this.addCalendar(calendarOne, { years }, 'constrain', cache) : calendarOne;\n        // Now we have less than one year remaining. Add one month at a time\n        // until we go over the target, then back up one month and calculate\n        // remaining days and weeks.\n        let current;\n        let next: CalendarYMD = yearsAdded;\n        do {\n          months += sign;\n          current = next;\n          next = this.addMonthsCalendar(current, sign, 'constrain', cache);\n          if (next.day !== calendarOne.day) {\n            // In case the day was constrained down, try to un-constrain it\n            next = this.regulateDate({ ...next, day: calendarOne.day }, 'constrain', cache);\n          }\n        } while (this.compareCalendarDates(calendarTwo, next) * sign >= 0);\n        months -= sign; // correct for loop above which overshoots by 1\n        const remainingDays = this.calendarDaysUntil(current, calendarTwo, cache);\n        days = remainingDays;\n        break;\n      }\n    }\n    return { years, months, weeks, days };\n  }\n  daysInMonth(calendarDate: CalendarYMD, cache: OneObjectCache): number {\n    // Add enough days to roll over to the next month. One we're in the next\n    // month, we can calculate the length of the current month. NOTE: This\n    // algorithm assumes that months are continuous. It would break if a\n    // calendar skipped days, like the Julian->Gregorian switchover. But the\n    // only ICU calendars that currently skip days (japanese/roc/buddhist) is a\n    // bug (https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)\n    // that's currently detected by `checkIcuBugs()` which will throw. So this\n    // code should be safe for all ICU calendars.\n    const { day } = calendarDate;\n    const max = this.maximumMonthLength(calendarDate);\n    const min = this.minimumMonthLength(calendarDate);\n    // easiest case: we already know the month length if min and max are the same.\n    if (min === max) return min;\n\n    // Add enough days to get into the next month, without skipping it\n    const increment = day <= max - min ? max : min;\n    const isoDate = this.calendarToIsoDate(calendarDate, 'constrain', cache);\n    const addedIsoDate = this.addDaysIso(isoDate, increment);\n    const addedCalendarDate = this.isoToCalendarDate(addedIsoDate, cache);\n\n    // Now back up to the last day of the original month\n    const endOfMonthIso = this.addDaysIso(addedIsoDate, -addedCalendarDate.day);\n    const endOfMonthCalendar = this.isoToCalendarDate(endOfMonthIso, cache);\n    return endOfMonthCalendar.day;\n  }\n  daysInPreviousMonth(calendarDate: CalendarYMD, cache: OneObjectCache): number {\n    const { day, month, year } = calendarDate;\n\n    // Check to see if we already know the month length, and return it if so\n    const previousMonthYear = month > 1 ? year : year - 1;\n    let previousMonthDate = { year: previousMonthYear, month, day: 1 };\n    const previousMonth = month > 1 ? month - 1 : this.monthsInYear(previousMonthDate, cache);\n    previousMonthDate = { ...previousMonthDate, month: previousMonth };\n    const min = this.minimumMonthLength(previousMonthDate);\n    const max = this.maximumMonthLength(previousMonthDate);\n    if (min === max) return max;\n\n    const isoDate = this.calendarToIsoDate(calendarDate, 'constrain', cache);\n    const lastDayOfPreviousMonthIso = this.addDaysIso(isoDate, -day);\n    const lastDayOfPreviousMonthCalendar = this.isoToCalendarDate(lastDayOfPreviousMonthIso, cache);\n    return lastDayOfPreviousMonthCalendar.day;\n  }\n  startOfCalendarYear(calendarDate: CalendarYearOnly): CalendarYMD & { monthCode: string } {\n    return { year: calendarDate.year, month: 1, monthCode: 'M01', day: 1 };\n  }\n  startOfCalendarMonth(calendarDate: CalendarYM): CalendarYMD {\n    return { year: calendarDate.year, month: calendarDate.month, day: 1 };\n  }\n  calendarDaysUntil(calendarOne: CalendarYMD, calendarTwo: CalendarYMD, cache: OneObjectCache): number {\n    const oneIso = this.calendarToIsoDate(calendarOne, 'constrain', cache);\n    const twoIso = this.calendarToIsoDate(calendarTwo, 'constrain', cache);\n    return this.isoDaysUntil(oneIso, twoIso);\n  }\n  isoDaysUntil(oneIso: IsoYMD, twoIso: IsoYMD): number {\n    const duration = ES.DifferenceISODate(\n      oneIso.year,\n      oneIso.month,\n      oneIso.day,\n      twoIso.year,\n      twoIso.month,\n      twoIso.day,\n      'day'\n    );\n    return duration.days;\n  }\n  // The short era format works for all calendars except Japanese, which will\n  // override.\n  eraLength: Intl.DateTimeFormatOptions['era'] = 'short';\n  // All built-in calendars except Chinese/Dangi and Hebrew use an era\n  hasEra = true;\n  // See https://github.com/tc39/proposal-temporal/issues/1784\n  erasBeginMidYear = false;\n  monthDayFromFields(fields: FullCalendarDate, overflow: Overflow, cache: OneObjectCache): IsoYMD {\n    let { monthCode, day } = fields;\n    if (monthCode === undefined) {\n      let { year, era, eraYear } = fields;\n      if (year === undefined && (era === undefined || eraYear === undefined)) {\n        throw new TypeError('when `monthCode` is omitted, `year` (or `era` and `eraYear`) and `month` are required');\n      }\n      // Apply overflow behaviour to year/month/day, to get correct monthCode/day\n      ({ monthCode, day } = this.isoToCalendarDate(this.calendarToIsoDate(fields, overflow, cache), cache));\n    }\n\n    let isoYear, isoMonth, isoDay;\n    let closestCalendar, closestIso;\n    // Look backwards starting from one of the calendar years spanning ISO year\n    // 1972, up to 100 calendar years prior, to find a year that has this month\n    // and day. Normal months and days will match immediately, but for leap days\n    // and leap months we may have to look for a while.\n    const startDateIso = { year: 1972, month: 12, day: 31 };\n    const calendarOfStartDateIso = this.isoToCalendarDate(startDateIso, cache);\n    // Note: relies on lexicographical ordering of monthCodes\n    const calendarYear =\n      calendarOfStartDateIso.monthCode > monthCode ||\n      (calendarOfStartDateIso.monthCode === monthCode && calendarOfStartDateIso.day >= day)\n        ? calendarOfStartDateIso.year\n        : calendarOfStartDateIso.year - 1;\n    for (let i = 0; i < 100; i++) {\n      const testCalendarDate: FullCalendarDate = this.adjustCalendarDate(\n        { day, monthCode, year: calendarYear - i },\n        cache\n      );\n      const isoDate = this.calendarToIsoDate(testCalendarDate, 'constrain', cache);\n      const roundTripCalendarDate = this.isoToCalendarDate(isoDate, cache);\n      ({ year: isoYear, month: isoMonth, day: isoDay } = isoDate);\n      if (roundTripCalendarDate.monthCode === monthCode && roundTripCalendarDate.day === day) {\n        return { month: isoMonth, day: isoDay, year: isoYear };\n      } else if (overflow === 'constrain') {\n        // non-ISO constrain algorithm tries to find the closest date in a matching month\n        if (\n          closestCalendar === undefined ||\n          (roundTripCalendarDate.monthCode === closestCalendar.monthCode &&\n            roundTripCalendarDate.day > closestCalendar.day)\n        ) {\n          closestCalendar = roundTripCalendarDate;\n          closestIso = isoDate;\n        }\n      }\n    }\n    if (overflow === 'constrain' && closestIso !== undefined) return closestIso;\n    throw new RangeError(`No recent ${this.id} year with monthCode ${monthCode} and day ${day}`);\n  }\n}\n\ninterface HebrewMonthInfo {\n  [m: string]: (\n    | {\n        leap: undefined;\n        regular: number;\n      }\n    | {\n        leap: number;\n        regular: undefined;\n      }\n    | {\n        leap: number;\n        regular: number;\n      }\n  ) & {\n    monthCode: string;\n    days:\n      | number\n      | {\n          min: number;\n          max: number;\n        };\n  };\n}\n\nclass HebrewHelper extends HelperBase {\n  id = 'hebrew' as const;\n  calendarType = 'lunisolar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly) {\n    const { year } = calendarDate;\n    // FYI: In addition to adding a month in leap years, the Hebrew calendar\n    // also has per-year changes to the number of days of Heshvan and Kislev.\n    // Given that these can be calculated by counting the number of days in\n    // those months, I assume that these DO NOT need to be exposed as\n    // Hebrew-only prototype fields or methods.\n    return (7 * year + 1) % 19 < 7;\n  }\n  monthsInYear(calendarDate: CalendarYearOnly) {\n    return this.inLeapYear(calendarDate) ? 13 : 12;\n  }\n  minimumMonthLength(calendarDate: CalendarYM) {\n    return this.minMaxMonthLength(calendarDate, 'min');\n  }\n  maximumMonthLength(calendarDate: CalendarYM) {\n    return this.minMaxMonthLength(calendarDate, 'max');\n  }\n  minMaxMonthLength(calendarDate: CalendarYM, minOrMax: 'min' | 'max') {\n    const { month, year } = calendarDate;\n    const monthCode = this.getMonthCode(year, month);\n    const monthInfo = ObjectEntries(this.months).find((m) => m[1].monthCode === monthCode);\n    if (monthInfo === undefined) throw new RangeError(`unmatched Hebrew month: ${month}`);\n    const daysInMonth = monthInfo[1].days;\n    return typeof daysInMonth === 'number' ? daysInMonth : daysInMonth[minOrMax];\n  }\n  /** Take a guess at what ISO date a particular calendar date corresponds to */\n  estimateIsoDate(calendarDate: CalendarYMD) {\n    const { year } = calendarDate;\n    return { year: year - 3760, month: 1, day: 1 };\n  }\n  months: HebrewMonthInfo = {\n    Tishri: { leap: 1, regular: 1, monthCode: 'M01', days: 30 },\n    Heshvan: { leap: 2, regular: 2, monthCode: 'M02', days: { min: 29, max: 30 } },\n    Kislev: { leap: 3, regular: 3, monthCode: 'M03', days: { min: 29, max: 30 } },\n    Tevet: { leap: 4, regular: 4, monthCode: 'M04', days: 29 },\n    Shevat: { leap: 5, regular: 5, monthCode: 'M05', days: 30 },\n    Adar: { leap: undefined, regular: 6, monthCode: 'M06', days: 29 },\n    'Adar I': { leap: 6, regular: undefined, monthCode: 'M05L', days: 30 },\n    'Adar II': { leap: 7, regular: undefined, monthCode: 'M06', days: 29 },\n    Nisan: { leap: 8, regular: 7, monthCode: 'M07', days: 30 },\n    Iyar: { leap: 9, regular: 8, monthCode: 'M08', days: 29 },\n    Sivan: { leap: 10, regular: 9, monthCode: 'M09', days: 30 },\n    Tamuz: { leap: 11, regular: 10, monthCode: 'M10', days: 29 },\n    Av: { leap: 12, regular: 11, monthCode: 'M11', days: 30 },\n    Elul: { leap: 13, regular: 12, monthCode: 'M12', days: 29 }\n  };\n  getMonthCode(year: number, month: number) {\n    if (this.inLeapYear({ year })) {\n      return month === 6 ? buildMonthCode(5, true) : buildMonthCode(month < 6 ? month : month - 1);\n    } else {\n      return buildMonthCode(month);\n    }\n  }\n  override adjustCalendarDate(\n    calendarDate: Partial<FullCalendarDate>,\n    cache?: OneObjectCache,\n    overflow: Overflow = 'constrain',\n    fromLegacyDate = false\n  ): FullCalendarDate {\n    // The incoming type is actually CalendarDate (same as args to\n    // Calendar.dateFromParams) but TS isn't smart enough to follow all the\n    // reassignments below, so as an alternative to 10+ type casts, we'll lie\n    // here and claim that the type has `day` and `year` filled in already.\n    let { year, eraYear, month, monthCode, day, monthExtra } = calendarDate as Omit<\n      typeof calendarDate,\n      'year' | 'day'\n    > & { year: number; day: number };\n    if (year === undefined && eraYear !== undefined) year = eraYear;\n    if (eraYear === undefined && year !== undefined) eraYear = year;\n    if (fromLegacyDate) {\n      // In Pre Node-14 V8, DateTimeFormat.formatToParts `month: 'numeric'`\n      // output returns the numeric equivalent of `month` as a string, meaning\n      // that `'6'` in a leap year is Adar I, while `'6'` in a non-leap year\n      // means Adar. In this case, `month` will already be correct and no action\n      // is needed. However, in Node 14 and later formatToParts returns the name\n      // of the Hebrew month (e.g. \"Tevet\"), so we'll need to look up the\n      // correct `month` using the string name as a key.\n      if (monthExtra) {\n        const monthInfo = this.months[monthExtra];\n        if (!monthInfo) throw new RangeError(`Unrecognized month from formatToParts: ${monthExtra}`);\n        month = this.inLeapYear({ year }) ? monthInfo.leap : monthInfo.regular;\n      }\n      // Because we're getting data from legacy Date, then `month` will always be present\n      monthCode = this.getMonthCode(year, month as number);\n      const result = { year, month: month as number, day, era: undefined as string | undefined, eraYear, monthCode };\n      return result;\n    } else {\n      // When called without input coming from legacy Date output, simply ensure\n      // that all fields are present.\n      this.validateCalendarDate(calendarDate);\n      if (month === undefined) {\n        if ((monthCode as string).endsWith('L')) {\n          if (monthCode !== 'M05L') {\n            throw new RangeError(`Hebrew leap month must have monthCode M05L, not ${monthCode}`);\n          }\n          month = 6;\n          if (!this.inLeapYear({ year })) {\n            if (overflow === 'reject') {\n              throw new RangeError(`Hebrew monthCode M05L is invalid in year ${year} which is not a leap year`);\n            } else {\n              // constrain to same day of next month (Adar)\n              month = 6;\n              monthCode = 'M06';\n            }\n          }\n        } else {\n          month = monthCodeNumberPart(monthCode as string);\n          // if leap month is before this one, the month index is one more than the month code\n          if (this.inLeapYear({ year }) && month >= 6) month++;\n          const largestMonth = this.monthsInYear({ year });\n          if (month < 1 || month > largestMonth) throw new RangeError(`Invalid monthCode: ${monthCode}`);\n        }\n      } else {\n        if (overflow === 'reject') {\n          ES.RejectToRange(month, 1, this.monthsInYear({ year }));\n          ES.RejectToRange(day, 1, this.maximumMonthLength({ year, month }));\n        } else {\n          month = ES.ConstrainToRange(month, 1, this.monthsInYear({ year }));\n          day = ES.ConstrainToRange(day, 1, this.maximumMonthLength({ year, month }));\n        }\n        if (monthCode === undefined) {\n          monthCode = this.getMonthCode(year, month);\n        } else {\n          const calculatedMonthCode = this.getMonthCode(year, month);\n          if (calculatedMonthCode !== monthCode) {\n            throw new RangeError(`monthCode ${monthCode} doesn't correspond to month ${month} in Hebrew year ${year}`);\n          }\n        }\n      }\n      return { ...calendarDate, day, month, monthCode: monthCode as string, year, eraYear };\n    }\n  }\n  // All built-in calendars except Chinese/Dangi and Hebrew use an era\n  override hasEra = false;\n}\n\n/**\n * For Temporal purposes, the Islamic calendar is simple because it's always the\n * same 12 months in the same order.\n */\nabstract class IslamicBaseHelper extends HelperBase {\n  abstract override id: BuiltinCalendarId;\n  calendarType = 'lunar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly, cache: OneObjectCache) {\n    // In leap years, the 12th month has 30 days. In non-leap years: 29.\n    const days = this.daysInMonth({ year: calendarDate.year, month: 12, day: 1 }, cache);\n    return days === 30;\n  }\n  monthsInYear(/* calendarYear, cache */) {\n    return 12;\n  }\n  minimumMonthLength(/* calendarDate */) {\n    return 29;\n  }\n  maximumMonthLength(/* calendarDate */) {\n    return 30;\n  }\n  DAYS_PER_ISLAMIC_YEAR = 354 + 11 / 30;\n  DAYS_PER_ISO_YEAR = 365.2425;\n  override constantEra = 'ah';\n  estimateIsoDate(calendarDate: CalendarYMD) {\n    const { year } = this.adjustCalendarDate(calendarDate);\n    return { year: MathFloor((year * this.DAYS_PER_ISLAMIC_YEAR) / this.DAYS_PER_ISO_YEAR) + 622, month: 1, day: 1 };\n  }\n}\n\n// There are 6 Islamic calendars with the same implementation in this polyfill.\n// They vary only in their ID. They do emit different output from the underlying\n// Intl implementation, but our code for each of them is identical.\nclass IslamicHelper extends IslamicBaseHelper {\n  id = 'islamic' as const;\n}\nclass IslamicUmalquraHelper extends IslamicBaseHelper {\n  id = 'islamic-umalqura' as const;\n}\nclass IslamicTblaHelper extends IslamicBaseHelper {\n  id = 'islamic-tbla' as const;\n}\nclass IslamicCivilHelper extends IslamicBaseHelper {\n  id = 'islamic-civil' as const;\n}\nclass IslamicRgsaHelper extends IslamicBaseHelper {\n  id = 'islamic-rgsa' as const;\n}\nclass IslamicCcHelper extends IslamicBaseHelper {\n  id = 'islamicc' as const;\n}\n\nclass PersianHelper extends HelperBase {\n  id = 'persian' as const;\n  calendarType = 'solar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly, cache: OneObjectCache) {\n    // Same logic (count days in the last month) for Persian as for Islamic,\n    // even though Persian is solar and Islamic is lunar.\n    return IslamicHelper.prototype.inLeapYear.call(this, calendarDate, cache);\n  }\n  monthsInYear(/* calendarYear, cache */) {\n    return 12;\n  }\n  minimumMonthLength(calendarDate: CalendarYM) {\n    const { month } = calendarDate;\n    if (month === 12) return 29;\n    return month <= 6 ? 31 : 30;\n  }\n  maximumMonthLength(calendarDate: CalendarYM) {\n    const { month } = calendarDate;\n    if (month === 12) return 30;\n    return month <= 6 ? 31 : 30;\n  }\n  override constantEra = 'ap';\n  estimateIsoDate(calendarDate: CalendarYMD) {\n    const { year } = this.adjustCalendarDate(calendarDate);\n    return { year: year + 621, month: 1, day: 1 };\n  }\n}\n\ninterface IndianMonthInfo {\n  [month: number]: {\n    length: number;\n    month: number;\n    day: number;\n    leap?: {\n      length: number;\n      month: number;\n      day: number;\n    };\n    nextYear?: true | undefined;\n  };\n}\n\nclass IndianHelper extends HelperBase {\n  id = 'indian' as const;\n  calendarType = 'solar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly) {\n    // From https://en.wikipedia.org/wiki/Indian_national_calendar:\n    // Years are counted in the Saka era, which starts its year 0 in the year 78\n    // of the Common Era. To determine leap years, add 78 to the Saka year  if\n    // the result is a leap year in the Gregorian calendar, then the Saka year\n    // is a leap year as well.\n    return isGregorianLeapYear(calendarDate.year + 78);\n  }\n  monthsInYear(/* calendarYear, cache */) {\n    return 12;\n  }\n  minimumMonthLength(calendarDate: CalendarYM) {\n    return this.getMonthInfo(calendarDate).length;\n  }\n  maximumMonthLength(calendarDate: CalendarYM) {\n    return this.getMonthInfo(calendarDate).length;\n  }\n  override constantEra = 'saka';\n  // Indian months always start at the same well-known Gregorian month and\n  // day. So this conversion is easy and fast. See\n  // https://en.wikipedia.org/wiki/Indian_national_calendar\n  months: IndianMonthInfo = {\n    1: { length: 30, month: 3, day: 22, leap: { length: 31, month: 3, day: 21 } },\n    2: { length: 31, month: 4, day: 21 },\n    3: { length: 31, month: 5, day: 22 },\n    4: { length: 31, month: 6, day: 22 },\n    5: { length: 31, month: 7, day: 23 },\n    6: { length: 31, month: 8, day: 23 },\n    7: { length: 30, month: 9, day: 23 },\n    8: { length: 30, month: 10, day: 23 },\n    9: { length: 30, month: 11, day: 22 },\n    10: { length: 30, month: 12, day: 22 },\n    11: { length: 30, month: 1, nextYear: true, day: 21 },\n    12: { length: 30, month: 2, nextYear: true, day: 20 }\n  };\n  getMonthInfo(calendarDate: CalendarYM) {\n    const { month } = calendarDate;\n    let monthInfo = this.months[month];\n    if (monthInfo === undefined) throw new RangeError(`Invalid month: ${month}`);\n    if (this.inLeapYear(calendarDate) && monthInfo.leap) monthInfo = monthInfo.leap;\n    return monthInfo;\n  }\n  estimateIsoDate(calendarDateParam: CalendarYMD) {\n    // FYI, this \"estimate\" is always the exact ISO date, which makes the Indian\n    // calendar fast!\n    const calendarDate = this.adjustCalendarDate(calendarDateParam);\n    const monthInfo = this.getMonthInfo(calendarDate);\n    const isoYear = calendarDate.year + 78 + (monthInfo.nextYear ? 1 : 0);\n    const isoMonth = monthInfo.month;\n    const isoDay = monthInfo.day;\n    const isoDate = ES.AddISODate(isoYear, isoMonth, isoDay, 0, 0, 0, calendarDate.day - 1, 'constrain');\n    return isoDate;\n  }\n  // https://bugs.chromium.org/p/v8/issues/detail?id=10529 causes Intl's Indian\n  // calendar output to fail for all dates before 0001-01-01 ISO.  For example,\n  // in Node 12 0000-01-01 is calculated as 6146/12/-583 instead of 10/11/-79 as\n  // expected.\n  vulnerableToBceBug =\n    new Date('0000-01-01T00:00Z').toLocaleDateString('en-US-u-ca-indian', { timeZone: 'UTC' }) !== '10/11/-79 Saka';\n  override checkIcuBugs(isoDate: IsoYMD) {\n    if (this.vulnerableToBceBug && isoDate.year < 1) {\n      throw new RangeError(\n        `calendar '${this.id}' is broken for ISO dates before 0001-01-01` +\n          ' (see https://bugs.chromium.org/p/v8/issues/detail?id=10529)'\n      );\n    }\n  }\n}\n\n/**\n * Era metadata defined for each calendar.\n * TODO: instead of optional properties, this should really have rules\n * encoded in the type, e.g. isoEpoch is required unless reverseOf is present.\n *  */\ninterface InputEra {\n  /** name of the era */\n  name: string;\n\n  /**\n   * Signed calendar year where this era begins.Will be\n   * 1 (or 0 for zero-based eras) for the anchor era assuming that `year`\n   * numbering starts at the beginning of the anchor era, which is true\n   * for all ICU calendars except Japanese. If an era starts mid-year\n   * then a calendar month and day are included. Otherwise\n   * `{ month: 1, day: 1 }` is assumed.\n   */\n  anchorEpoch?: CalendarYearOnly | CalendarYMD;\n\n  /** ISO date of the first day of this era */\n  isoEpoch?: { year: number; month: number; day: number };\n\n  /**\n   * If present, then this era counts years backwards like BC\n   * and this property points to the forward era. This must be\n   * the last (oldest) era in the array.\n   * */\n  reverseOf?: string;\n\n  /**\n   * If true, the era's years are 0-based. If omitted or false,\n   * then the era's years are 1-based.\n   * */\n  hasYearZero?: boolean;\n\n  /**\n   * Override if this era is the anchor. Not normally used because\n   * anchor eras are inferred.\n   * */\n  isAnchor?: boolean;\n}\n/**\n * Transformation of the `InputEra` type with all fields filled in by\n * `adjustEras()`\n * */\ninterface Era {\n  /** name of the era */\n  name: string;\n\n  /**\n   * alternate name of the era used in old versions of ICU data\n   * format is `era{n}` where n is the zero-based index of the era\n   * with the oldest era being 0.\n   * */\n  genericName: string;\n\n  /**\n   * Signed calendar year where this era begins. Will be 1 (or 0 for zero-based\n   * eras) for the anchor era assuming that `year` numbering starts at the\n   * beginning of the anchor era, which is true for all ICU calendars except\n   * Japanese. For input, the month and day are optional. If an era starts\n   * mid-year then a calendar month and day are included.\n   * Otherwise `{ month: 1, day: 1 }` is assumed.\n   */\n  anchorEpoch: CalendarYMD;\n\n  /** ISO date of the first day of this era */\n  isoEpoch: IsoYMD;\n\n  /**\n   * If present, then this era counts years backwards like BC\n   * and this property points to the forward era. This must be\n   * the last (oldest) era in the array.\n   * */\n  reverseOf?: Era;\n\n  /**\n   * If true, the era's years are 0-based. If omitted or false,\n   * then the era's years are 1-based.\n   * */\n  hasYearZero?: boolean;\n\n  /**\n   * Override if this era is the anchor. Not normally used because\n   * anchor eras are inferred.\n   * */\n  isAnchor?: boolean;\n}\n\n/**\n * This function adds additional metadata that makes it easier to work with\n * eras. Note that it mutates and normalizes the original era objects, which is\n * OK because this is non-observable, internal-only metadata.\n *\n * The result is an array of eras with the shape defined above.\n * */\nfunction adjustEras(erasParam: InputEra[]): { eras: Era[]; anchorEra: Era } {\n  let eras: (InputEra | Era)[] = erasParam;\n  if (eras.length === 0) {\n    throw new RangeError('Invalid era data: eras are required');\n  }\n  if (eras.length === 1 && eras[0].reverseOf) {\n    throw new RangeError('Invalid era data: anchor era cannot count years backwards');\n  }\n  if (eras.length === 1 && !eras[0].name) {\n    throw new RangeError('Invalid era data: at least one named era is required');\n  }\n  if (eras.filter((e) => e.reverseOf != null).length > 1) {\n    throw new RangeError('Invalid era data: only one era can count years backwards');\n  }\n\n  // Find the \"anchor era\" which is the era used for (era-less) `year`. Reversed\n  // eras can never be anchors. The era without an `anchorEpoch` property is the\n  // anchor.\n  let anchorEra: Era | InputEra | undefined;\n  eras.forEach((e) => {\n    if (e.isAnchor || (!e.anchorEpoch && !e.reverseOf)) {\n      if (anchorEra) throw new RangeError('Invalid era data: cannot have multiple anchor eras');\n      anchorEra = e;\n      e.anchorEpoch = { year: e.hasYearZero ? 0 : 1 };\n    } else if (!e.name) {\n      throw new RangeError('If era name is blank, it must be the anchor era');\n    }\n  });\n\n  // If the era name is undefined, then it's an anchor that doesn't interact\n  // with eras at all. For example, Japanese `year` is always the same as ISO\n  // `year`.  So this \"era\" is the anchor era but isn't used for era matching.\n  // Strip it from the list that's returned.\n  eras = eras.filter((e) => e.name);\n\n  eras.forEach((e) => {\n    // Some eras are mirror images of another era e.g. B.C. is the reverse of A.D.\n    // Replace the string-valued \"reverseOf\" property with the actual era object\n    // that's reversed.\n    const { reverseOf } = e;\n    if (reverseOf) {\n      const reversedEra = eras.find((era) => era.name === reverseOf);\n      if (reversedEra === undefined) throw new RangeError(`Invalid era data: unmatched reverseOf era: ${reverseOf}`);\n      e.reverseOf = reversedEra as Era;\n      e.anchorEpoch = reversedEra.anchorEpoch;\n      e.isoEpoch = reversedEra.isoEpoch;\n    }\n    type YMD = {\n      year: number;\n      month: number;\n      day: number;\n    };\n    if ((e.anchorEpoch as YMD).month === undefined) (e.anchorEpoch as YMD).month = 1;\n    if ((e.anchorEpoch as YMD).day === undefined) (e.anchorEpoch as YMD).day = 1;\n  });\n\n  // Ensure that the latest epoch is first in the array. This lets us try to\n  // match eras in index order, with the last era getting the remaining older\n  // years. Any reverse-signed era must be at the end.\n  ArraySort.call(eras, (e1, e2) => {\n    if (e1.reverseOf) return 1;\n    if (e2.reverseOf) return -1;\n    if (!e1.isoEpoch || !e2.isoEpoch) throw new RangeError('Invalid era data: missing ISO epoch');\n    return e2.isoEpoch.year - e1.isoEpoch.year;\n  });\n\n  // If there's a reversed era, then the one before it must be the era that's\n  // being reversed.\n  const lastEraReversed = eras[eras.length - 1].reverseOf;\n  if (lastEraReversed) {\n    if (lastEraReversed !== eras[eras.length - 2]) throw new RangeError('Invalid era data: invalid reverse-sign era');\n  }\n\n  // Finally, add a \"genericName\" property in the format \"era{n} where `n` is\n  // zero-based index, with the oldest era being zero. This format is used by\n  // older versions of ICU data.\n  eras.forEach((e, i) => {\n    (e as Era).genericName = `era${eras.length - 1 - i}`;\n  });\n\n  return { eras: eras as Era[], anchorEra: (anchorEra || eras[0]) as Era };\n}\n\nfunction isGregorianLeapYear(year: number) {\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n/** Base for all Gregorian-like calendars. */\nabstract class GregorianBaseHelper extends HelperBase {\n  id: BuiltinCalendarId;\n  eras: Era[];\n  anchorEra: Era;\n\n  constructor(id: BuiltinCalendarId, originalEras: InputEra[]) {\n    super();\n    this.id = id;\n    const { eras, anchorEra } = adjustEras(originalEras);\n    this.anchorEra = anchorEra;\n    this.eras = eras;\n  }\n  calendarType = 'solar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly) {\n    // Calendars that don't override this method use the same months and leap\n    // years as Gregorian. Once we know the ISO year corresponding to the\n    // calendar year, we'll know if it's a leap year or not.\n    const { year } = this.estimateIsoDate({ month: 1, day: 1, year: calendarDate.year });\n    return isGregorianLeapYear(year);\n  }\n  monthsInYear(/* calendarDate */) {\n    return 12;\n  }\n  minimumMonthLength(calendarDate: CalendarYM): number {\n    const { month } = calendarDate;\n    if (month === 2) return this.inLeapYear(calendarDate) ? 29 : 28;\n    return [4, 6, 9, 11].indexOf(month) >= 0 ? 30 : 31;\n  }\n  maximumMonthLength(calendarDate: CalendarYM): number {\n    return this.minimumMonthLength(calendarDate);\n  }\n  /** Fill in missing parts of the (year, era, eraYear) tuple */\n  completeEraYear(calendarDate: Partial<FullCalendarDate>) {\n    const checkField = (name: keyof FullCalendarDate, value: string | number | undefined) => {\n      const currentValue = calendarDate[name];\n      if (currentValue != null && currentValue != value) {\n        throw new RangeError(`Input ${name} ${currentValue} doesn't match calculated value ${value}`);\n      }\n    };\n    const eraFromYear = (year: number) => {\n      let eraYear;\n      const adjustedCalendarDate = { ...calendarDate, year };\n      const matchingEra = this.eras.find((e, i) => {\n        if (i === this.eras.length - 1) {\n          if (e.reverseOf) {\n            // This is a reverse-sign era (like BCE) which must be the oldest\n            // era. Count years backwards.\n            if (year > 0) throw new RangeError(`Signed year ${year} is invalid for era ${e.name}`);\n            eraYear = e.anchorEpoch.year - year;\n            return true;\n          }\n          // last era always gets all \"leftover\" (older than epoch) years,\n          // so no need for a comparison like below.\n          eraYear = year - e.anchorEpoch.year + (e.hasYearZero ? 0 : 1);\n          return true;\n        }\n        const comparison = this.compareCalendarDates(adjustedCalendarDate, e.anchorEpoch);\n        if (comparison >= 0) {\n          eraYear = year - e.anchorEpoch.year + (e.hasYearZero ? 0 : 1);\n          return true;\n        }\n        return false;\n      });\n      if (!matchingEra) throw new RangeError(`Year ${year} was not matched by any era`);\n      return { eraYear: eraYear as unknown as number, era: matchingEra.name };\n    };\n\n    let { year, eraYear, era } = calendarDate;\n    if (year != null) {\n      ({ eraYear, era } = eraFromYear(year));\n      checkField('era', era);\n      checkField('eraYear', eraYear);\n    } else if (eraYear != null) {\n      const matchingEra =\n        era === undefined ? undefined : this.eras.find((e) => e.name === era || e.genericName === era);\n      if (!matchingEra) throw new RangeError(`Era ${era} (ISO year ${eraYear}) was not matched by any era`);\n      if (eraYear < 1 && matchingEra.reverseOf) {\n        throw new RangeError(`Years in ${era} era must be positive, not ${year}`);\n      }\n      if (matchingEra.reverseOf) {\n        year = matchingEra.anchorEpoch.year - eraYear;\n      } else {\n        year = eraYear + matchingEra.anchorEpoch.year - (matchingEra.hasYearZero ? 0 : 1);\n      }\n      checkField('year', year);\n      // We'll accept dates where the month/day is earlier than the start of\n      // the era or after its end as long as it's in the same year. If that\n      // happens, we'll adjust the era/eraYear pair to be the correct era for\n      // the `year`.\n      ({ eraYear, era } = eraFromYear(year));\n    } else {\n      throw new RangeError('Either `year` or `eraYear` and `era` are required');\n    }\n    return { ...calendarDate, year, eraYear, era };\n  }\n  override adjustCalendarDate(\n    calendarDateParam: Partial<FullCalendarDate>,\n    cache?: OneObjectCache,\n    overflow: Overflow = 'constrain'\n  ): FullCalendarDate {\n    let calendarDate = calendarDateParam;\n    // Because this is not a lunisolar calendar, it's safe to convert monthCode to a number\n    const { month, monthCode } = calendarDate;\n    if (month === undefined) calendarDate = { ...calendarDate, month: monthCodeNumberPart(monthCode as string) };\n    this.validateCalendarDate(calendarDate);\n    calendarDate = this.completeEraYear(calendarDate);\n    return super.adjustCalendarDate(calendarDate, cache, overflow);\n  }\n  estimateIsoDate(calendarDateParam: CalendarYMD) {\n    const calendarDate = this.adjustCalendarDate(calendarDateParam);\n    const { year, month, day } = calendarDate;\n    const { anchorEra } = this;\n    const isoYearEstimate = year + anchorEra.isoEpoch.year - (anchorEra.hasYearZero ? 0 : 1);\n    return ES.RegulateISODate(isoYearEstimate, month, day, 'constrain');\n  }\n  // Several calendars based on the Gregorian calendar use Julian dates (not\n  // proleptic Gregorian dates) before the Julian switchover in Oct 1582. See\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=1173158.\n  v8IsVulnerableToJulianBug = new Date('+001001-01-01T00:00Z')\n    .toLocaleDateString('en-US-u-ca-japanese', { timeZone: 'UTC' })\n    .startsWith('12');\n  calendarIsVulnerableToJulianBug = false;\n  override checkIcuBugs(isoDate: IsoYMD) {\n    if (this.calendarIsVulnerableToJulianBug && this.v8IsVulnerableToJulianBug) {\n      const beforeJulianSwitch = ES.CompareISODate(isoDate.year, isoDate.month, isoDate.day, 1582, 10, 15) < 0;\n      if (beforeJulianSwitch) {\n        throw new RangeError(\n          `calendar '${this.id}' is broken for ISO dates before 1582-10-15` +\n            ' (see https://bugs.chromium.org/p/chromium/issues/detail?id=1173158)'\n        );\n      }\n    }\n  }\n}\n\nabstract class OrthodoxBaseHelper extends GregorianBaseHelper {\n  constructor(id: BuiltinCalendarId, originalEras: InputEra[]) {\n    super(id, originalEras);\n  }\n  override inLeapYear(calendarDate: CalendarYearOnly) {\n    // Leap years happen one year before the Julian leap year. Note that this\n    // calendar is based on the Julian calendar which has a leap year every 4\n    // years, unlike the Gregorian calendar which doesn't have leap years on\n    // years divisible by 100 except years divisible by 400.\n    //\n    // Note that we're assuming that leap years in before-epoch times match\n    // how leap years are defined now. This is probably not accurate but I'm\n    // not sure how better to do it.\n    const { year } = calendarDate;\n    return (year + 1) % 4 === 0;\n  }\n  override monthsInYear(/* calendarDate */) {\n    return 13;\n  }\n  override minimumMonthLength(calendarDate: CalendarYM) {\n    const { month } = calendarDate;\n    // Ethiopian/Coptic calendars have 12 30-day months and an extra 5-6 day 13th month.\n    if (month === 13) return this.inLeapYear(calendarDate) ? 6 : 5;\n    return 30;\n  }\n  override maximumMonthLength(calendarDate: CalendarYM) {\n    return this.minimumMonthLength(calendarDate);\n  }\n}\n\n// `coptic` and `ethiopic` calendars are very similar to `ethioaa` calendar,\n// with the following differences:\n// - Coptic uses BCE-like positive numbers for years before its epoch (the other\n//   two use negative year numbers before epoch)\n// - Coptic has a different epoch date\n// - Ethiopic has an additional second era that starts at the same date as the\n//   zero era of ethioaa.\nclass EthioaaHelper extends OrthodoxBaseHelper {\n  constructor() {\n    super('ethioaa', [{ name: 'era0', isoEpoch: { year: -5492, month: 7, day: 17 } }]);\n  }\n}\nclass CopticHelper extends OrthodoxBaseHelper {\n  constructor() {\n    super('coptic', [\n      { name: 'era1', isoEpoch: { year: 284, month: 8, day: 29 } },\n      { name: 'era0', reverseOf: 'era1' }\n    ]);\n  }\n}\n\n// Anchor is currently the older era to match ethioaa, but should it be the newer era?\n// See https://github.com/tc39/ecma402/issues/534 for discussion.\nclass EthiopicHelper extends OrthodoxBaseHelper {\n  constructor() {\n    super('ethiopic', [\n      { name: 'era0', isoEpoch: { year: -5492, month: 7, day: 17 } },\n      { name: 'era1', isoEpoch: { year: 8, month: 8, day: 27 }, anchorEpoch: { year: 5501 } }\n    ]);\n  }\n}\n\nclass RocHelper extends GregorianBaseHelper {\n  constructor() {\n    super('roc', [\n      { name: 'minguo', isoEpoch: { year: 1912, month: 1, day: 1 } },\n      { name: 'before-roc', reverseOf: 'minguo' }\n    ]);\n  }\n  override calendarIsVulnerableToJulianBug = true;\n}\n\nclass BuddhistHelper extends GregorianBaseHelper {\n  constructor() {\n    super('buddhist', [{ name: 'be', hasYearZero: true, isoEpoch: { year: -543, month: 1, day: 1 } }]);\n  }\n  override calendarIsVulnerableToJulianBug = true;\n}\n\nclass GregoryHelper extends GregorianBaseHelper {\n  constructor() {\n    super('gregory', [\n      { name: 'ce', isoEpoch: { year: 1, month: 1, day: 1 } },\n      { name: 'bce', reverseOf: 'ce' }\n    ]);\n  }\n  override reviseIntlEra<T extends Partial<EraAndEraYear>>(calendarDate: T /*, isoDate: IsoDate*/): T {\n    let { era, eraYear } = calendarDate;\n    // Firefox 96 introduced a bug where the `'short'` format of the era\n    // option mistakenly returns the one-letter (narrow) format instead. The\n    // code below handles either the correct or Firefox-buggy format. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1752253\n    if (era === 'bc' || era === 'b') era = 'bce';\n    if (era === 'ad' || era === 'a') era = 'ce';\n    return { era, eraYear } as T;\n  }\n}\n\n// NOTE: Only the 5 modern eras (Meiji and later) are included. For dates\n// before Meiji 1, the `ce` and `bce` eras are used. Challenges with pre-Meiji\n// eras include:\n// - Start/end dates of older eras are not precisely defined, which is\n//   challenging given Temporal's need for precision\n// - Some era dates and/or names are disputed by historians\n// - As historical research proceeds, new eras are discovered and existing era\n//   dates are modified, leading to considerable churn which is not good for\n//   Temporal use.\n//  - The earliest era (in 645 CE) may not end up being the earliest depending\n//    on future historical scholarship\n//  - Before Meiji, Japan used a lunar (or lunisolar?) calendar but AFAIK\n//    that's not reflected in the ICU implementation.\n//\n// For more discussion: https://github.com/tc39/proposal-temporal/issues/526.\n//\n// Here's a full list of CLDR/ICU eras:\n// https://github.com/unicode-org/icu/blob/master/icu4c/source/data/locales/root.txt#L1582-L1818\n// https://github.com/unicode-org/cldr/blob/master/common/supplemental/supplementalData.xml#L4310-L4546\n//\n// NOTE: Japan started using the Gregorian calendar in 6 Meiji, replacing a\n// lunisolar calendar. So the day before January 1 of 6 Meiji (1873) was not\n// December 31, but December 2, of 5 Meiji (1872). The existing Ecma-402\n// Japanese calendar doesn't seem to take this into account, so neither do we:\n// > args = ['en-ca-u-ca-japanese', { era: 'short' }]\n// > new Date('1873-01-01T12:00').toLocaleString(...args)\n// '1 1, 6 Meiji, 12:00:00 PM'\n// > new Date('1872-12-31T12:00').toLocaleString(...args)\n// '12 31, 5 Meiji, 12:00:00 PM'\nclass JapaneseHelper extends GregorianBaseHelper {\n  constructor() {\n    super('japanese', [\n      // The Japanese calendar `year` is just the ISO year, because (unlike other\n      // ICU calendars) there's no obvious \"default era\", we use the ISO year.\n      { name: 'reiwa', isoEpoch: { year: 2019, month: 5, day: 1 }, anchorEpoch: { year: 2019, month: 5, day: 1 } },\n      { name: 'heisei', isoEpoch: { year: 1989, month: 1, day: 8 }, anchorEpoch: { year: 1989, month: 1, day: 8 } },\n      { name: 'showa', isoEpoch: { year: 1926, month: 12, day: 25 }, anchorEpoch: { year: 1926, month: 12, day: 25 } },\n      { name: 'taisho', isoEpoch: { year: 1912, month: 7, day: 30 }, anchorEpoch: { year: 1912, month: 7, day: 30 } },\n      { name: 'meiji', isoEpoch: { year: 1868, month: 9, day: 8 }, anchorEpoch: { year: 1868, month: 9, day: 8 } },\n      { name: 'ce', isoEpoch: { year: 1, month: 1, day: 1 } },\n      { name: 'bce', reverseOf: 'ce' }\n    ]);\n  }\n  override calendarIsVulnerableToJulianBug = true;\n\n  // The last 3 Japanese eras confusingly return only one character in the\n  // default \"short\" era, so need to use the long format.\n  override eraLength = 'long' as const;\n\n  override erasBeginMidYear = true;\n\n  override reviseIntlEra<T extends Partial<EraAndEraYear>>(calendarDate: T, isoDate: IsoYMD): T {\n    const { era, eraYear } = calendarDate;\n    const { year: isoYear } = isoDate;\n    if (this.eras.find((e) => e.name === era)) return { era, eraYear } as T;\n    return (isoYear < 1 ? { era: 'bce', eraYear: 1 - isoYear } : { era: 'ce', eraYear: isoYear }) as T;\n  }\n}\n\ninterface ChineseMonthInfo {\n  [key: string]: { monthIndex: number; daysInMonth: number };\n}\ninterface ChineseDraftMonthInfo {\n  [key: string]: { monthIndex: number; daysInMonth?: number };\n}\n\nabstract class ChineseBaseHelper extends HelperBase {\n  abstract override id: BuiltinCalendarId;\n  calendarType = 'lunisolar' as const;\n  inLeapYear(calendarDate: CalendarYearOnly, cache: OneObjectCache) {\n    const months = this.getMonthList(calendarDate.year, cache);\n    return ObjectEntries(months).length === 13;\n  }\n  monthsInYear(calendarDate: CalendarYearOnly, cache: OneObjectCache) {\n    return this.inLeapYear(calendarDate, cache) ? 13 : 12;\n  }\n  minimumMonthLength(/* calendarDate */) {\n    return 29;\n  }\n  maximumMonthLength(/* calendarDate */) {\n    return 30;\n  }\n  getMonthList(calendarYear: number, cache: OneObjectCache): ChineseMonthInfo {\n    if (calendarYear === undefined) {\n      throw new TypeError('Missing year');\n    }\n    const key = JSON.stringify({ func: 'getMonthList', calendarYear, id: this.id });\n    const cached = cache.get(key);\n    if (cached) return cached;\n    const dateTimeFormat = this.getFormatter();\n    const getCalendarDate = (isoYear: number, daysPastFeb1: number) => {\n      const isoStringFeb1 = toUtcIsoDateString({ isoYear, isoMonth: 2, isoDay: 1 });\n      const legacyDate = new Date(isoStringFeb1);\n      // Now add the requested number of days, which may wrap to the next month.\n      legacyDate.setUTCDate(daysPastFeb1 + 1);\n      const newYearGuess = dateTimeFormat.formatToParts(legacyDate);\n      const calendarMonthString = (newYearGuess.find((tv) => tv.type === 'month') as Intl.DateTimeFormatPart).value;\n      const calendarDay = +(newYearGuess.find((tv) => tv.type === 'day') as Intl.DateTimeFormatPart).value;\n      let calendarYearToVerify: globalThis.Intl.DateTimeFormatPart | number | undefined = newYearGuess.find(\n        (tv) => (tv.type as string) === 'relatedYear'\n      );\n      if (calendarYearToVerify !== undefined) {\n        calendarYearToVerify = +calendarYearToVerify.value;\n      } else {\n        // Node 12 has outdated ICU data that lacks the `relatedYear` field in the\n        // output of Intl.DateTimeFormat.formatToParts.\n        throw new RangeError(\n          `Intl.DateTimeFormat.formatToParts lacks relatedYear in ${this.id} calendar. Try Node 14+ or modern browsers.`\n        );\n      }\n      return { calendarMonthString, calendarDay, calendarYearToVerify };\n    };\n\n    // First, find a date close to Chinese New Year. Feb 17 will either be in\n    // the first month or near the end of the last month of the previous year.\n    let isoDaysDelta = 17;\n    let { calendarMonthString, calendarDay, calendarYearToVerify } = getCalendarDate(calendarYear, isoDaysDelta);\n\n    // If we didn't guess the first month correctly, add (almost in some months)\n    // a lunar month\n    if (calendarMonthString !== '1') {\n      isoDaysDelta += 29;\n      ({ calendarMonthString, calendarDay } = getCalendarDate(calendarYear, isoDaysDelta));\n    }\n\n    // Now back up to near the start of the first month, but not too near that\n    // off-by-one issues matter.\n    isoDaysDelta -= calendarDay - 5;\n    const result = {} as ChineseDraftMonthInfo;\n    let monthIndex = 1;\n    let oldCalendarDay: number | undefined;\n    let oldMonthString: string | undefined;\n    let done = false;\n    do {\n      ({ calendarMonthString, calendarDay, calendarYearToVerify } = getCalendarDate(calendarYear, isoDaysDelta));\n      if (oldCalendarDay) {\n        result[oldMonthString as string].daysInMonth = oldCalendarDay + 30 - calendarDay;\n      }\n      if (calendarYearToVerify !== calendarYear) {\n        done = true;\n      } else {\n        result[calendarMonthString] = { monthIndex: monthIndex++ };\n        // Move to the next month. Because months are sometimes 29 days, the day of the\n        // calendar month will move forward slowly but not enough to flip over to a new\n        // month before the loop ends at 12-13 months.\n        isoDaysDelta += 30;\n      }\n      oldCalendarDay = calendarDay;\n      oldMonthString = calendarMonthString;\n    } while (!done);\n    result[oldMonthString].daysInMonth = oldCalendarDay + 30 - calendarDay;\n\n    cache.set(key, result);\n    return result as ChineseMonthInfo;\n  }\n  estimateIsoDate(calendarDate: CalendarYMD) {\n    const { year, month } = calendarDate;\n    return { year, month: month >= 12 ? 12 : month + 1, day: 1 };\n  }\n  override adjustCalendarDate(\n    calendarDate: Partial<FullCalendarDate>,\n    cache: OneObjectCache,\n    overflow: Overflow = 'constrain',\n    fromLegacyDate = false\n  ): FullCalendarDate {\n    let { year, month, monthExtra, day, monthCode, eraYear } = calendarDate;\n    if (fromLegacyDate) {\n      // Legacy Date output returns a string that's an integer with an optional\n      // \"bis\" suffix used only by the Chinese/Dangi calendar to indicate a leap\n      // month. Below we'll normalize the output.\n      year = eraYear;\n      if (monthExtra && monthExtra !== 'bis') throw new RangeError(`Unexpected leap month suffix: ${monthExtra}`);\n      const monthCode = buildMonthCode(month as number, monthExtra !== undefined);\n      const monthString = `${month}${monthExtra || ''}`;\n      const months = this.getMonthList(year as number, cache);\n      const monthInfo = months[monthString];\n      if (monthInfo === undefined) throw new RangeError(`Unmatched month ${monthString} in Chinese year ${year}`);\n      month = monthInfo.monthIndex;\n      return { year: year as number, month, day: day as number, era: undefined, eraYear, monthCode };\n    } else {\n      // When called without input coming from legacy Date output,\n      // simply ensure that all fields are present.\n      this.validateCalendarDate(calendarDate);\n      if (year === undefined) year = eraYear;\n      if (eraYear === undefined) eraYear = year;\n      if (month === undefined) {\n        ES.assertExists(monthCode);\n        const months = this.getMonthList(year as number, cache);\n        let numberPart = monthCode.replace('L', 'bis').slice(1);\n        if (numberPart[0] === '0') numberPart = numberPart.slice(1);\n        let monthInfo = months[numberPart];\n        month = monthInfo && monthInfo.monthIndex;\n\n        // If this leap month isn't present in this year, constrain to the same\n        // day of the previous month.\n        if (month === undefined && monthCode.endsWith('L') && monthCode != 'M13L' && overflow === 'constrain') {\n          let withoutML = monthCode.slice(1, -1);\n          if (withoutML[0] === '0') withoutML = withoutML.slice(1);\n          monthInfo = months[withoutML];\n          if (monthInfo) {\n            month = monthInfo.monthIndex;\n            monthCode = buildMonthCode(withoutML);\n          }\n        }\n        if (month === undefined) {\n          throw new RangeError(`Unmatched month ${monthCode} in Chinese year ${year}`);\n        }\n      } else if (monthCode === undefined) {\n        const months = this.getMonthList(year as number, cache);\n        const monthEntries = ObjectEntries(months);\n        const largestMonth = monthEntries.length;\n        if (overflow === 'reject') {\n          ES.RejectToRange(month, 1, largestMonth);\n          ES.RejectToRange(day as number, 1, this.maximumMonthLength());\n        } else {\n          month = ES.ConstrainToRange(month, 1, largestMonth);\n          day = ES.ConstrainToRange(day, 1, this.maximumMonthLength());\n        }\n        const matchingMonthEntry = monthEntries.find(([, v]) => v.monthIndex === month);\n        if (matchingMonthEntry === undefined) {\n          throw new RangeError(`Invalid month ${month} in Chinese year ${year}`);\n        }\n        monthCode = buildMonthCode(\n          matchingMonthEntry[0].replace('bis', ''),\n          matchingMonthEntry[0].indexOf('bis') !== -1\n        );\n      } else {\n        // Both month and monthCode are present. Make sure they don't conflict.\n        const months = this.getMonthList(year as number, cache);\n        let numberPart = monthCode.replace('L', 'bis').slice(1);\n        if (numberPart[0] === '0') numberPart = numberPart.slice(1);\n        const monthInfo = months[numberPart];\n        if (!monthInfo) throw new RangeError(`Unmatched monthCode ${monthCode} in Chinese year ${year}`);\n        if (month !== monthInfo.monthIndex) {\n          throw new RangeError(`monthCode ${monthCode} doesn't correspond to month ${month} in Chinese year ${year}`);\n        }\n      }\n      return {\n        ...calendarDate,\n        year: year as number,\n        eraYear,\n        month,\n        monthCode: monthCode,\n        day: day as number\n      };\n    }\n  }\n  // All built-in calendars except Chinese/Dangi and Hebrew use an era\n  override hasEra = false;\n}\n\nclass ChineseHelper extends ChineseBaseHelper {\n  id = 'chinese' as const;\n}\n\n// Dangi (Korean) calendar has same implementation as Chinese\nclass DangiHelper extends ChineseBaseHelper {\n  id = 'dangi' as const;\n}\n\n/**\n * Common implementation of all non-ISO calendars.\n * Per-calendar id and logic live in `id` and `helper` properties attached later.\n * This split allowed an easy separation between code that was similar between\n * ISO and non-ISO implementations vs. code that was very different.\n */\nclass NonIsoCalendar implements CalendarImpl {\n  constructor(private readonly helper: HelperBase) {}\n  dateFromFields(\n    fieldsParam: Params['dateFromFields'][0],\n    options: NonNullable<Params['dateFromFields'][1]>,\n    calendarSlotValue: string\n  ): Temporal.PlainDate {\n    const cache = new OneObjectCache();\n    const fieldNames = this.fields(['day', 'month', 'monthCode', 'year']) as AnyTemporalKey[];\n    const fields = ES.PrepareTemporalFields(fieldsParam, fieldNames, []);\n    const overflow = ES.ToTemporalOverflow(options);\n    const { year, month, day } = this.helper.calendarToIsoDate(fields, overflow, cache);\n    const result = ES.CreateTemporalDate(year, month, day, calendarSlotValue);\n    cache.setObject(result);\n    return result;\n  }\n  yearMonthFromFields(\n    fieldsParam: Params['yearMonthFromFields'][0],\n    options: NonNullable<Params['yearMonthFromFields'][1]>,\n    calendarSlotValue: CalendarSlot\n  ): Temporal.PlainYearMonth {\n    const cache = new OneObjectCache();\n    const fieldNames = this.fields(['month', 'monthCode', 'year']) as AnyTemporalKey[];\n    const fields = ES.PrepareTemporalFields(fieldsParam, fieldNames, []);\n    const overflow = ES.ToTemporalOverflow(options);\n    const { year, month, day } = this.helper.calendarToIsoDate({ ...fields, day: 1 }, overflow, cache);\n    const result = ES.CreateTemporalYearMonth(year, month, calendarSlotValue, /* referenceISODay = */ day);\n    cache.setObject(result);\n    return result;\n  }\n  monthDayFromFields(\n    fieldsParam: Params['monthDayFromFields'][0],\n    options: NonNullable<Params['monthDayFromFields'][1]>,\n    calendarSlotValue: CalendarSlot\n  ): Temporal.PlainMonthDay {\n    const cache = new OneObjectCache();\n    // For lunisolar calendars, either `monthCode` or `year` must be provided\n    // because `month` is ambiguous without a year or a code.\n    const fieldNames = this.fields(['day', 'month', 'monthCode', 'year']) as AnyTemporalKey[];\n    const fields = ES.PrepareTemporalFields(fieldsParam, fieldNames, []);\n    const overflow = ES.ToTemporalOverflow(options);\n    const { year, month, day } = this.helper.monthDayFromFields(fields, overflow, cache);\n    // `year` is a reference year where this month/day exists in this calendar\n    const result = ES.CreateTemporalMonthDay(month, day, calendarSlotValue, /* referenceISOYear = */ year);\n    cache.setObject(result);\n    return result;\n  }\n  fields(fieldsParam: string[]): string[] {\n    let fields = fieldsParam;\n    if (ArrayIncludes.call(fields, 'year')) fields = [...fields, 'era', 'eraYear'];\n    return fields;\n  }\n  fieldKeysToIgnore(\n    keys: Exclude<keyof Temporal.PlainDateLike, 'calendar'>[]\n  ): Exclude<keyof Temporal.PlainDateLike, 'calendar'>[] {\n    const result = new OriginalSet();\n    for (let ix = 0; ix < keys.length; ix++) {\n      const key = keys[ix];\n      ES.Call(SetPrototypeAdd, result, [key]);\n      switch (key) {\n        case 'era':\n          ES.Call(SetPrototypeAdd, result, ['eraYear']);\n          ES.Call(SetPrototypeAdd, result, ['year']);\n          break;\n        case 'eraYear':\n          ES.Call(SetPrototypeAdd, result, ['era']);\n          ES.Call(SetPrototypeAdd, result, ['year']);\n          break;\n        case 'year':\n          ES.Call(SetPrototypeAdd, result, ['era']);\n          ES.Call(SetPrototypeAdd, result, ['eraYear']);\n          break;\n        case 'month':\n          ES.Call(SetPrototypeAdd, result, ['monthCode']);\n          // See https://github.com/tc39/proposal-temporal/issues/1784\n          if (this.helper.erasBeginMidYear) {\n            ES.Call(SetPrototypeAdd, result, ['era']);\n            ES.Call(SetPrototypeAdd, result, ['eraYear']);\n          }\n          break;\n        case 'monthCode':\n          ES.Call(SetPrototypeAdd, result, ['month']);\n          if (this.helper.erasBeginMidYear) {\n            ES.Call(SetPrototypeAdd, result, ['era']);\n            ES.Call(SetPrototypeAdd, result, ['eraYear']);\n          }\n          break;\n        case 'day':\n          if (this.helper.erasBeginMidYear) {\n            ES.Call(SetPrototypeAdd, result, ['era']);\n            ES.Call(SetPrototypeAdd, result, ['eraYear']);\n          }\n          break;\n      }\n    }\n    return [...ES.Call(SetPrototypeValues, result, [])];\n  }\n  dateAdd(\n    date: Temporal.PlainDate,\n    years: number,\n    months: number,\n    weeks: number,\n    days: number,\n    overflow: Overflow,\n    calendarSlotValue: CalendarSlot\n  ): Temporal.PlainDate {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    const added = this.helper.addCalendar(calendarDate, { years, months, weeks, days }, overflow, cache);\n    const isoAdded = this.helper.calendarToIsoDate(added, 'constrain', cache);\n    const { year, month, day } = isoAdded;\n    const newTemporalObject = ES.CreateTemporalDate(year, month, day, calendarSlotValue);\n    // The new object's cache starts with the cache of the old object\n    const newCache = new OneObjectCache(cache);\n    newCache.setObject(newTemporalObject);\n    return newTemporalObject;\n  }\n  dateUntil(one: Temporal.PlainDate, two: Temporal.PlainDate, largestUnit: Temporal.DateUnit) {\n    const cacheOne = OneObjectCache.getCacheForObject(one);\n    const cacheTwo = OneObjectCache.getCacheForObject(two);\n    const calendarOne = this.helper.temporalToCalendarDate(one, cacheOne);\n    const calendarTwo = this.helper.temporalToCalendarDate(two, cacheTwo);\n    const result = this.helper.untilCalendar(calendarOne, calendarTwo, largestUnit, cacheOne);\n    return result;\n  }\n  year(date: Temporal.PlainDate | Temporal.PlainYearMonth): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.year;\n  }\n  month(date: Temporal.PlainDate | Temporal.PlainYearMonth | Temporal.PlainMonthDay): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.month;\n  }\n  day(date: Temporal.PlainDate | Temporal.PlainMonthDay): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.day;\n  }\n  era(date: Temporal.PlainDate | Temporal.PlainYearMonth): string | undefined {\n    if (!this.helper.hasEra) return undefined;\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.era;\n  }\n  eraYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): number | undefined {\n    if (!this.helper.hasEra) return undefined;\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.eraYear;\n  }\n  monthCode(date: Temporal.PlainDate | Temporal.PlainYearMonth | Temporal.PlainMonthDay): string {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    return calendarDate.monthCode;\n  }\n  dayOfWeek(date: Temporal.PlainDate): number {\n    return impl['iso8601'].dayOfWeek(date);\n  }\n  dayOfYear(date: Temporal.PlainDate): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.isoToCalendarDate(date, cache);\n    const startOfYear = this.helper.startOfCalendarYear(calendarDate);\n    const diffDays = this.helper.calendarDaysUntil(startOfYear, calendarDate, cache);\n    return diffDays + 1;\n  }\n  weekOfYear(date: Temporal.PlainDate): number {\n    return impl['iso8601'].weekOfYear(date);\n  }\n  yearOfWeek(date: Temporal.PlainDate): number {\n    return impl['iso8601'].yearOfWeek(date);\n  }\n  daysInWeek(date: Temporal.PlainDate): number {\n    return impl['iso8601'].daysInWeek(date);\n  }\n  daysInMonth(date: Temporal.PlainDate | Temporal.PlainYearMonth): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n\n    // Easy case: if the helper knows the length without any heavy calculation.\n    const max = this.helper.maximumMonthLength(calendarDate);\n    const min = this.helper.minimumMonthLength(calendarDate);\n    if (max === min) return max;\n\n    // The harder case is where months vary every year, e.g. islamic calendars.\n    // Find the answer by calculating the difference in days between the first\n    // day of the current month and the first day of the next month.\n    const startOfMonthCalendar = this.helper.startOfCalendarMonth(calendarDate);\n    const startOfNextMonthCalendar = this.helper.addMonthsCalendar(startOfMonthCalendar, 1, 'constrain', cache);\n    const result = this.helper.calendarDaysUntil(startOfMonthCalendar, startOfNextMonthCalendar, cache);\n    return result;\n  }\n  daysInYear(dateParam: Temporal.PlainDate | Temporal.PlainYearMonth): number {\n    let date = dateParam;\n    if (!HasSlot(date, ISO_YEAR)) date = ES.ToTemporalDate(date);\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    const startOfYearCalendar = this.helper.startOfCalendarYear(calendarDate);\n    const startOfNextYearCalendar = this.helper.addCalendar(startOfYearCalendar, { years: 1 }, 'constrain', cache);\n    const result = this.helper.calendarDaysUntil(startOfYearCalendar, startOfNextYearCalendar, cache);\n    return result;\n  }\n  monthsInYear(date: Temporal.PlainDate | Temporal.PlainYearMonth): number {\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    const result = this.helper.monthsInYear(calendarDate, cache);\n    return result;\n  }\n  inLeapYear(dateParam: Temporal.PlainDate | Temporal.PlainYearMonth): boolean {\n    let date = dateParam;\n    if (!HasSlot(date, ISO_YEAR)) date = ES.ToTemporalDate(date);\n    const cache = OneObjectCache.getCacheForObject(date);\n    const calendarDate = this.helper.temporalToCalendarDate(date, cache);\n    const result = this.helper.inLeapYear(calendarDate, cache);\n    return result;\n  }\n}\n\nfor (const Helper of [\n  HebrewHelper,\n  PersianHelper,\n  EthiopicHelper,\n  EthioaaHelper,\n  CopticHelper,\n  ChineseHelper,\n  DangiHelper,\n  RocHelper,\n  IndianHelper,\n  BuddhistHelper,\n  GregoryHelper,\n  JapaneseHelper,\n  IslamicHelper,\n  IslamicUmalquraHelper,\n  IslamicTblaHelper,\n  IslamicCivilHelper,\n  IslamicRgsaHelper,\n  IslamicCcHelper\n]) {\n  const helper = new Helper();\n  // Construct a new NonIsoCalendar instance with the given Helper implementation that contains\n  // per-calendar logic.\n  impl[helper.id] = new NonIsoCalendar(helper);\n}\n", "import * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\nimport {\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  CALENDAR,\n  EPOCHNANOSECONDS,\n  GetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { PlainDateParams as Params, PlainDateReturn as Return } from './internaltypes';\n\nexport class PlainDate implements Temporal.PlainDate {\n  constructor(\n    isoYearParam: Params['constructor'][0],\n    isoMonthParam: Params['constructor'][1],\n    isoDayParam: Params['constructor'][2],\n    calendarParam: Params['constructor'][3] = 'iso8601'\n  ) {\n    const isoYear = ES.ToIntegerWithTruncation(isoYearParam);\n    const isoMonth = ES.ToIntegerWithTruncation(isoMonthParam);\n    const isoDay = ES.ToIntegerWithTruncation(isoDayParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n\n    ES.CreateTemporalDateSlots(this, isoYear, isoMonth, isoDay, calendar);\n  }\n  get calendarId(): Return['calendarId'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n  }\n  get era(): Return['era'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEra(GetSlot(this, CALENDAR), this);\n  }\n  get eraYear(): Return['eraYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEraYear(GetSlot(this, CALENDAR), this);\n  }\n  get year(): Return['year'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYear(GetSlot(this, CALENDAR), this);\n  }\n  get month(): Return['month'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonth(GetSlot(this, CALENDAR), this);\n  }\n  get monthCode(): Return['monthCode'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthCode(GetSlot(this, CALENDAR), this);\n  }\n  get day(): Return['day'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDay(GetSlot(this, CALENDAR), this);\n  }\n  get dayOfWeek(): Return['dayOfWeek'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfWeek(GetSlot(this, CALENDAR), this);\n  }\n  get dayOfYear(): Return['dayOfYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfYear(GetSlot(this, CALENDAR), this);\n  }\n  get weekOfYear(): Return['weekOfYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarWeekOfYear(GetSlot(this, CALENDAR), this);\n  }\n  get yearOfWeek(): Return['weekOfYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYearOfWeek(GetSlot(this, CALENDAR), this);\n  }\n  get daysInWeek(): Return['daysInWeek'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInWeek(GetSlot(this, CALENDAR), this);\n  }\n  get daysInMonth(): Return['daysInMonth'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInMonth(GetSlot(this, CALENDAR), this);\n  }\n  get daysInYear(): Return['daysInYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInYear(GetSlot(this, CALENDAR), this);\n  }\n  get monthsInYear(): Return['monthsInYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthsInYear(GetSlot(this, CALENDAR), this);\n  }\n  get inLeapYear(): Return['inLeapYear'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarInLeapYear(GetSlot(this, CALENDAR), this);\n  }\n  with(temporalDateLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalDateLike)) {\n      throw new TypeError('invalid argument');\n    }\n    ES.RejectTemporalLikeObject(temporalDateLike);\n    const options = ES.GetOptionsObject(optionsParam);\n\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['day', 'month', 'monthCode', 'year'] as const);\n    let fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    const partialDate = ES.PrepareTemporalFields(temporalDateLike, fieldNames, 'partial');\n    fields = ES.CalendarMergeFields(calendar, fields, partialDate);\n    fields = ES.PrepareTemporalFields(fields, fieldNames, []);\n\n    return ES.CalendarDateFromFields(calendar, fields, options);\n  }\n  withCalendar(calendarParam: Params['withCalendar'][0]): Return['withCalendar'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    return new PlainDate(GetSlot(this, ISO_YEAR), GetSlot(this, ISO_MONTH), GetSlot(this, ISO_DAY), calendar);\n  }\n  add(temporalDurationLike: Params['add'][0], optionsParam: Params['add'][1] = undefined): Return['add'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n\n    const duration = ES.ToTemporalDuration(temporalDurationLike);\n    const options = ES.GetOptionsObject(optionsParam);\n\n    return ES.CalendarDateAdd(GetSlot(this, CALENDAR), this, duration, options);\n  }\n  subtract(\n    temporalDurationLike: Params['subtract'][0],\n    optionsParam: Params['subtract'][1] = undefined\n  ): Return['subtract'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n\n    const duration = ES.CreateNegatedTemporalDuration(ES.ToTemporalDuration(temporalDurationLike));\n    const options = ES.GetOptionsObject(optionsParam);\n\n    return ES.CalendarDateAdd(GetSlot(this, CALENDAR), this, duration, options);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainDate('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainDate('since', this, other, options);\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalDate(otherParam);\n    for (const slot of [ISO_YEAR, ISO_MONTH, ISO_DAY]) {\n      const val1 = GetSlot(this, slot);\n      const val2 = GetSlot(other, slot);\n      if (val1 !== val2) return false;\n    }\n    return ES.CalendarEquals(GetSlot(this, CALENDAR), GetSlot(other, CALENDAR));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const showCalendar = ES.ToCalendarNameOption(options);\n    return ES.TemporalDateToString(this, showCalendar);\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateToString(this);\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.PlainDate');\n  }\n  toPlainDateTime(temporalTimeParam: Params['toPlainDateTime'][0] = undefined): Return['toPlainDateTime'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const year = GetSlot(this, ISO_YEAR);\n    const month = GetSlot(this, ISO_MONTH);\n    const day = GetSlot(this, ISO_DAY);\n    const calendar = GetSlot(this, CALENDAR);\n\n    if (temporalTimeParam === undefined) return ES.CreateTemporalDateTime(year, month, day, 0, 0, 0, 0, 0, 0, calendar);\n\n    const temporalTime = ES.ToTemporalTime(temporalTimeParam);\n    const hour = GetSlot(temporalTime, ISO_HOUR);\n    const minute = GetSlot(temporalTime, ISO_MINUTE);\n    const second = GetSlot(temporalTime, ISO_SECOND);\n    const millisecond = GetSlot(temporalTime, ISO_MILLISECOND);\n    const microsecond = GetSlot(temporalTime, ISO_MICROSECOND);\n    const nanosecond = GetSlot(temporalTime, ISO_NANOSECOND);\n\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  toZonedDateTime(item: Params['toZonedDateTime'][0]): Return['toZonedDateTime'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n\n    type TimeZoneAndPlainTimeProps = Exclude<typeof item, string | Temporal.TimeZoneProtocol>;\n    let timeZone: Temporal.TimeZoneLike, temporalTime: TimeZoneAndPlainTimeProps['plainTime'];\n    if (ES.IsObject(item)) {\n      if (ES.IsTemporalTimeZone(item)) {\n        timeZone = item;\n      } else {\n        const timeZoneLike = (item as TimeZoneAndPlainTimeProps).timeZone;\n        if (timeZoneLike === undefined) {\n          ES.uncheckedAssertNarrowedType<Temporal.TimeZoneProtocol>(\n            item,\n            \"if no timeZone property, then assume it's a custom time zone object\"\n          );\n          timeZone = ES.ToTemporalTimeZoneSlotValue(item);\n        } else {\n          timeZone = ES.ToTemporalTimeZoneSlotValue(timeZoneLike);\n          ES.uncheckedAssertNarrowedType<TimeZoneAndPlainTimeProps>(\n            item,\n            \"it's a property bag with a timeZone and optional plainTime\"\n          );\n          temporalTime = item.plainTime;\n        }\n      }\n    } else {\n      timeZone = ES.ToTemporalTimeZoneSlotValue(item);\n    }\n\n    const year = GetSlot(this, ISO_YEAR);\n    const month = GetSlot(this, ISO_MONTH);\n    const day = GetSlot(this, ISO_DAY);\n    const calendar = GetSlot(this, CALENDAR);\n\n    let hour = 0,\n      minute = 0,\n      second = 0,\n      millisecond = 0,\n      microsecond = 0,\n      nanosecond = 0;\n    if (temporalTime !== undefined) {\n      temporalTime = ES.ToTemporalTime(temporalTime);\n      ES.uncheckedAssertNarrowedType<Temporal.PlainTime>(\n        temporalTime,\n        'ToTemporalTime above always returns a PlainTime'\n      );\n      hour = GetSlot(temporalTime, ISO_HOUR);\n      minute = GetSlot(temporalTime, ISO_MINUTE);\n      second = GetSlot(temporalTime, ISO_SECOND);\n      millisecond = GetSlot(temporalTime, ISO_MILLISECOND);\n      microsecond = GetSlot(temporalTime, ISO_MICROSECOND);\n      nanosecond = GetSlot(temporalTime, ISO_NANOSECOND);\n    }\n\n    const dt = ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n    const instant = ES.GetInstantFor(timeZone, dt, 'compatible');\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  toPlainYearMonth(): Return['toPlainYearMonth'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['monthCode', 'year'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarYearMonthFromFields(calendar, fields);\n  }\n  toPlainMonthDay(): Return['toPlainMonthDay'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['day', 'monthCode'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarMonthDayFromFields(calendar, fields);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return {\n      calendar: GetSlot(this, CALENDAR),\n      isoDay: GetSlot(this, ISO_DAY),\n      isoMonth: GetSlot(this, ISO_MONTH),\n      isoYear: GetSlot(this, ISO_YEAR)\n    };\n  }\n  getCalendar(): Return['getCalendar'] {\n    if (!ES.IsTemporalDate(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarObject(GetSlot(this, CALENDAR));\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    if (ES.IsTemporalDate(item)) {\n      ES.ToTemporalOverflow(options); // validate and ignore\n      return ES.CreateTemporalDate(\n        GetSlot(item, ISO_YEAR),\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, ISO_DAY),\n        GetSlot(item, CALENDAR)\n      );\n    }\n    return ES.ToTemporalDate(item, options);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalDate(oneParam);\n    const two = ES.ToTemporalDate(twoParam);\n    return ES.CompareISODate(\n      GetSlot(one, ISO_YEAR),\n      GetSlot(one, ISO_MONTH),\n      GetSlot(one, ISO_DAY),\n      GetSlot(two, ISO_YEAR),\n      GetSlot(two, ISO_MONTH),\n      GetSlot(two, ISO_DAY)\n    );\n  }\n  [Symbol.toStringTag]!: 'Temporal.PlainDate';\n}\n\nMakeIntrinsicClass(PlainDate, 'Temporal.PlainDate');\n", "import * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\n\nimport {\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  CALENDAR,\n  EPOCHNANOSECONDS,\n  GetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { PlainDateTimeParams as Params, PlainDateTimeReturn as Return } from './internaltypes';\n\nexport class PlainDateTime implements Temporal.PlainDateTime {\n  constructor(\n    isoYearParam: Params['constructor'][0],\n    isoMonthParam: Params['constructor'][1],\n    isoDayParam: Params['constructor'][2],\n    hourParam: Params['constructor'][3] = 0,\n    minuteParam: Params['constructor'][4] = 0,\n    secondParam: Params['constructor'][5] = 0,\n    millisecondParam: Params['constructor'][6] = 0,\n    microsecondParam: Params['constructor'][7] = 0,\n    nanosecondParam: Params['constructor'][8] = 0,\n    calendarParam: Params['constructor'][9] = 'iso8601'\n  ) {\n    const isoYear = ES.ToIntegerWithTruncation(isoYearParam);\n    const isoMonth = ES.ToIntegerWithTruncation(isoMonthParam);\n    const isoDay = ES.ToIntegerWithTruncation(isoDayParam);\n    const hour = hourParam === undefined ? 0 : ES.ToIntegerWithTruncation(hourParam);\n    const minute = minuteParam === undefined ? 0 : ES.ToIntegerWithTruncation(minuteParam);\n    const second = secondParam === undefined ? 0 : ES.ToIntegerWithTruncation(secondParam);\n    const millisecond = millisecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(millisecondParam);\n    const microsecond = microsecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(microsecondParam);\n    const nanosecond = nanosecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(nanosecondParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n\n    ES.CreateTemporalDateTimeSlots(\n      this,\n      isoYear,\n      isoMonth,\n      isoDay,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  get calendarId(): Return['calendarId'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n  }\n  get year(): Return['year'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYear(GetSlot(this, CALENDAR), this);\n  }\n  get month(): Return['month'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonth(GetSlot(this, CALENDAR), this);\n  }\n  get monthCode(): Return['monthCode'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthCode(GetSlot(this, CALENDAR), this);\n  }\n  get day(): Return['day'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDay(GetSlot(this, CALENDAR), this);\n  }\n  get hour(): Return['hour'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_HOUR);\n  }\n  get minute(): Return['minute'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MINUTE);\n  }\n  get second(): Return['second'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_SECOND);\n  }\n  get millisecond(): Return['millisecond'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MILLISECOND);\n  }\n  get microsecond(): Return['microsecond'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MICROSECOND);\n  }\n  get nanosecond(): Return['nanosecond'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_NANOSECOND);\n  }\n  get era(): Return['era'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEra(GetSlot(this, CALENDAR), this);\n  }\n  get eraYear(): Return['eraYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEraYear(GetSlot(this, CALENDAR), this);\n  }\n  get dayOfWeek(): Return['dayOfWeek'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfWeek(GetSlot(this, CALENDAR), this);\n  }\n  get dayOfYear(): Return['dayOfYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfYear(GetSlot(this, CALENDAR), this);\n  }\n  get weekOfYear(): Return['weekOfYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarWeekOfYear(GetSlot(this, CALENDAR), this);\n  }\n  get yearOfWeek(): Return['yearOfWeek'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYearOfWeek(GetSlot(this, CALENDAR), this);\n  }\n  get daysInWeek(): Return['daysInWeek'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInWeek(GetSlot(this, CALENDAR), this);\n  }\n  get daysInYear(): Return['daysInYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInYear(GetSlot(this, CALENDAR), this);\n  }\n  get daysInMonth(): Return['daysInMonth'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInMonth(GetSlot(this, CALENDAR), this);\n  }\n  get monthsInYear(): Return['monthsInYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthsInYear(GetSlot(this, CALENDAR), this);\n  }\n  get inLeapYear(): Return['inLeapYear'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarInLeapYear(GetSlot(this, CALENDAR), this);\n  }\n  with(temporalDateTimeLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalDateTimeLike)) {\n      throw new TypeError('invalid argument');\n    }\n    ES.RejectTemporalLikeObject(temporalDateTimeLike);\n\n    const options = ES.GetOptionsObject(optionsParam);\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, [\n      'day',\n      'hour',\n      'microsecond',\n      'millisecond',\n      'minute',\n      'month',\n      'monthCode',\n      'nanosecond',\n      'second',\n      'year'\n    ] as const);\n    let fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    const partialDateTime = ES.PrepareTemporalFields(temporalDateTimeLike, fieldNames, 'partial');\n    fields = ES.CalendarMergeFields(calendar, fields, partialDateTime);\n    fields = ES.PrepareTemporalFields(fields, fieldNames, []);\n    const { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } =\n      ES.InterpretTemporalDateTimeFields(calendar, fields, options);\n\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  withPlainTime(temporalTimeParam: Params['withPlainTime'][0] = undefined): Return['withPlainTime'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const year = GetSlot(this, ISO_YEAR);\n    const month = GetSlot(this, ISO_MONTH);\n    const day = GetSlot(this, ISO_DAY);\n    const calendar = GetSlot(this, CALENDAR);\n\n    if (temporalTimeParam === undefined) return ES.CreateTemporalDateTime(year, month, day, 0, 0, 0, 0, 0, 0, calendar);\n\n    const temporalTime = ES.ToTemporalTime(temporalTimeParam);\n    const hour = GetSlot(temporalTime, ISO_HOUR);\n    const minute = GetSlot(temporalTime, ISO_MINUTE);\n    const second = GetSlot(temporalTime, ISO_SECOND);\n    const millisecond = GetSlot(temporalTime, ISO_MILLISECOND);\n    const microsecond = GetSlot(temporalTime, ISO_MICROSECOND);\n    const nanosecond = GetSlot(temporalTime, ISO_NANOSECOND);\n\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  withPlainDate(temporalDateParam: Params['withPlainDate'][0]): Return['withPlainDate'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n\n    const temporalDate = ES.ToTemporalDate(temporalDateParam);\n    const year = GetSlot(temporalDate, ISO_YEAR);\n    const month = GetSlot(temporalDate, ISO_MONTH);\n    const day = GetSlot(temporalDate, ISO_DAY);\n    let calendar = GetSlot(temporalDate, CALENDAR);\n\n    const hour = GetSlot(this, ISO_HOUR);\n    const minute = GetSlot(this, ISO_MINUTE);\n    const second = GetSlot(this, ISO_SECOND);\n    const millisecond = GetSlot(this, ISO_MILLISECOND);\n    const microsecond = GetSlot(this, ISO_MICROSECOND);\n    const nanosecond = GetSlot(this, ISO_NANOSECOND);\n\n    calendar = ES.ConsolidateCalendars(GetSlot(this, CALENDAR), calendar);\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  withCalendar(calendarParam: Params['withCalendar'][0]): Return['withCalendar'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    return new PlainDateTime(\n      GetSlot(this, ISO_YEAR),\n      GetSlot(this, ISO_MONTH),\n      GetSlot(this, ISO_DAY),\n      GetSlot(this, ISO_HOUR),\n      GetSlot(this, ISO_MINUTE),\n      GetSlot(this, ISO_SECOND),\n      GetSlot(this, ISO_MILLISECOND),\n      GetSlot(this, ISO_MICROSECOND),\n      GetSlot(this, ISO_NANOSECOND),\n      calendar\n    );\n  }\n  add(temporalDurationLike: Params['add'][0], options: Params['add'][1] = undefined): Return['add'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainDateTime('add', this, temporalDurationLike, options);\n  }\n  subtract(\n    temporalDurationLike: Params['subtract'][0],\n    options: Params['subtract'][1] = undefined\n  ): Return['subtract'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainDateTime('subtract', this, temporalDurationLike, options);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainDateTime('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainDateTime('since', this, other, options);\n  }\n  round(roundToParam: Params['round'][0]): Return['round'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    if (roundToParam === undefined) throw new TypeError('options parameter is required');\n    const roundTo =\n      typeof roundToParam === 'string'\n        ? (ES.CreateOnePropObject('smallestUnit', roundToParam) as Exclude<typeof roundToParam, string>)\n        : ES.GetOptionsObject(roundToParam);\n    const roundingIncrement = ES.ToTemporalRoundingIncrement(roundTo);\n    const roundingMode = ES.ToTemporalRoundingMode(roundTo, 'halfExpand');\n    const smallestUnit = ES.GetTemporalUnit(roundTo, 'smallestUnit', 'time', ES.REQUIRED, ['day']);\n    const maximumIncrements = {\n      day: 1,\n      hour: 24,\n      minute: 60,\n      second: 60,\n      millisecond: 1000,\n      microsecond: 1000,\n      nanosecond: 1000\n    };\n    const maximum = maximumIncrements[smallestUnit];\n    const inclusive = maximum === 1;\n    ES.ValidateTemporalRoundingIncrement(roundingIncrement, maximum, inclusive);\n\n    let year = GetSlot(this, ISO_YEAR);\n    let month = GetSlot(this, ISO_MONTH);\n    let day = GetSlot(this, ISO_DAY);\n    let hour = GetSlot(this, ISO_HOUR);\n    let minute = GetSlot(this, ISO_MINUTE);\n    let second = GetSlot(this, ISO_SECOND);\n    let millisecond = GetSlot(this, ISO_MILLISECOND);\n    let microsecond = GetSlot(this, ISO_MICROSECOND);\n    let nanosecond = GetSlot(this, ISO_NANOSECOND);\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = ES.RoundISODateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      roundingIncrement,\n      smallestUnit,\n      roundingMode\n    ));\n\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      GetSlot(this, CALENDAR)\n    );\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalDateTime(otherParam);\n    for (const slot of [\n      ISO_YEAR,\n      ISO_MONTH,\n      ISO_DAY,\n      ISO_HOUR,\n      ISO_MINUTE,\n      ISO_SECOND,\n      ISO_MILLISECOND,\n      ISO_MICROSECOND,\n      ISO_NANOSECOND\n    ]) {\n      const val1 = GetSlot(this, slot);\n      const val2 = GetSlot(other, slot);\n      if (val1 !== val2) return false;\n    }\n    return ES.CalendarEquals(GetSlot(this, CALENDAR), GetSlot(other, CALENDAR));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const showCalendar = ES.ToCalendarNameOption(options);\n    const digits = ES.ToFractionalSecondDigits(options);\n    const roundingMode = ES.ToTemporalRoundingMode(options, 'trunc');\n    const smallestUnit = ES.GetTemporalUnit(options, 'smallestUnit', 'time', undefined);\n    if (smallestUnit === 'hour') throw new RangeError('smallestUnit must be a time unit other than \"hour\"');\n    const { precision, unit, increment } = ES.ToSecondsStringPrecisionRecord(smallestUnit, digits);\n    return ES.TemporalDateTimeToString(this, precision, showCalendar, { unit, increment, roundingMode });\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateTimeToString(this, 'auto');\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.PlainDateTime');\n  }\n\n  toZonedDateTime(\n    temporalTimeZoneLike: Params['toZonedDateTime'][0],\n    optionsParam: Params['toZonedDateTime'][1] = undefined\n  ): Return['toZonedDateTime'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(temporalTimeZoneLike);\n    const options = ES.GetOptionsObject(optionsParam);\n    const disambiguation = ES.ToTemporalDisambiguation(options);\n    const instant = ES.GetInstantFor(timeZone, this, disambiguation);\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, GetSlot(this, CALENDAR));\n  }\n  toPlainDate(): Return['toPlainDate'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateTimeToDate(this);\n  }\n  toPlainYearMonth(): Return['toPlainYearMonth'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['monthCode', 'year'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarYearMonthFromFields(calendar, fields);\n  }\n  toPlainMonthDay(): Return['toPlainMonthDay'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['day', 'monthCode'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarMonthDayFromFields(calendar, fields);\n  }\n  toPlainTime(): Return['toPlainTime'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateTimeToTime(this);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return {\n      calendar: GetSlot(this, CALENDAR),\n      isoDay: GetSlot(this, ISO_DAY),\n      isoHour: GetSlot(this, ISO_HOUR),\n      isoMicrosecond: GetSlot(this, ISO_MICROSECOND),\n      isoMillisecond: GetSlot(this, ISO_MILLISECOND),\n      isoMinute: GetSlot(this, ISO_MINUTE),\n      isoMonth: GetSlot(this, ISO_MONTH),\n      isoNanosecond: GetSlot(this, ISO_NANOSECOND),\n      isoSecond: GetSlot(this, ISO_SECOND),\n      isoYear: GetSlot(this, ISO_YEAR)\n    };\n  }\n  getCalendar(): Return['getCalendar'] {\n    if (!ES.IsTemporalDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarObject(GetSlot(this, CALENDAR));\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    if (ES.IsTemporalDateTime(item)) {\n      ES.ToTemporalOverflow(options); // validate and ignore\n      return ES.CreateTemporalDateTime(\n        GetSlot(item, ISO_YEAR),\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, ISO_DAY),\n        GetSlot(item, ISO_HOUR),\n        GetSlot(item, ISO_MINUTE),\n        GetSlot(item, ISO_SECOND),\n        GetSlot(item, ISO_MILLISECOND),\n        GetSlot(item, ISO_MICROSECOND),\n        GetSlot(item, ISO_NANOSECOND),\n        GetSlot(item, CALENDAR)\n      );\n    }\n    return ES.ToTemporalDateTime(item, options);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalDateTime(oneParam);\n    const two = ES.ToTemporalDateTime(twoParam);\n    for (const slot of [\n      ISO_YEAR,\n      ISO_MONTH,\n      ISO_DAY,\n      ISO_HOUR,\n      ISO_MINUTE,\n      ISO_SECOND,\n      ISO_MILLISECOND,\n      ISO_MICROSECOND,\n      ISO_NANOSECOND\n    ] as const) {\n      const val1 = GetSlot(one, slot);\n      const val2 = GetSlot(two, slot);\n      if (val1 !== val2) return ES.ComparisonResult(val1 - val2);\n    }\n    return 0;\n  }\n  [Symbol.toStringTag]!: 'Temporal.PlainDateTime';\n}\n\nMakeIntrinsicClass(PlainDateTime, 'Temporal.PlainDateTime');\n", "import { DEBUG } from './debug';\nimport * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\nimport {\n  YEARS,\n  MONTHS,\n  WEEKS,\n  DAYS,\n  HOURS,\n  MINUTES,\n  SECONDS,\n  MILLISECONDS,\n  MICROSECONDS,\n  NANOSECONDS,\n  CreateSlots,\n  GetSlot,\n  SetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport type { DurationParams as Params, DurationReturn as Return } from './internaltypes';\nimport JSBI from 'jsbi';\n\nexport class Duration implements Temporal.Duration {\n  constructor(\n    yearsParam: Params['constructor'][0] = 0,\n    monthsParam: Params['constructor'][1] = 0,\n    weeksParam: Params['constructor'][2] = 0,\n    daysParam: Params['constructor'][3] = 0,\n    hoursParam: Params['constructor'][4] = 0,\n    minutesParam: Params['constructor'][5] = 0,\n    secondsParam: Params['constructor'][6] = 0,\n    millisecondsParam: Params['constructor'][7] = 0,\n    microsecondsParam: Params['constructor'][8] = 0,\n    nanosecondsParam: Params['constructor'][9] = 0\n  ) {\n    const years = yearsParam === undefined ? 0 : ES.ToIntegerIfIntegral(yearsParam);\n    const months = monthsParam === undefined ? 0 : ES.ToIntegerIfIntegral(monthsParam);\n    const weeks = weeksParam === undefined ? 0 : ES.ToIntegerIfIntegral(weeksParam);\n    const days = daysParam === undefined ? 0 : ES.ToIntegerIfIntegral(daysParam);\n    const hours = hoursParam === undefined ? 0 : ES.ToIntegerIfIntegral(hoursParam);\n    const minutes = minutesParam === undefined ? 0 : ES.ToIntegerIfIntegral(minutesParam);\n    const seconds = secondsParam === undefined ? 0 : ES.ToIntegerIfIntegral(secondsParam);\n    const milliseconds = millisecondsParam === undefined ? 0 : ES.ToIntegerIfIntegral(millisecondsParam);\n    const microseconds = microsecondsParam === undefined ? 0 : ES.ToIntegerIfIntegral(microsecondsParam);\n    const nanoseconds = nanosecondsParam === undefined ? 0 : ES.ToIntegerIfIntegral(nanosecondsParam);\n\n    ES.RejectDuration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n\n    CreateSlots(this);\n    SetSlot(this, YEARS, years);\n    SetSlot(this, MONTHS, months);\n    SetSlot(this, WEEKS, weeks);\n    SetSlot(this, DAYS, days);\n    SetSlot(this, HOURS, hours);\n    SetSlot(this, MINUTES, minutes);\n    SetSlot(this, SECONDS, seconds);\n    SetSlot(this, MILLISECONDS, milliseconds);\n    SetSlot(this, MICROSECONDS, microseconds);\n    SetSlot(this, NANOSECONDS, nanoseconds);\n\n    if (DEBUG) {\n      Object.defineProperty(this, '_repr_', {\n        value: `${this[Symbol.toStringTag]} <${ES.TemporalDurationToString(this)}>`,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n    }\n  }\n  get years(): Return['years'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, YEARS);\n  }\n  get months(): Return['months'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, MONTHS);\n  }\n  get weeks(): Return['weeks'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, WEEKS);\n  }\n  get days(): Return['days'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, DAYS);\n  }\n  get hours(): Return['hours'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, HOURS);\n  }\n  get minutes(): Return['minutes'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, MINUTES);\n  }\n  get seconds(): Return['seconds'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, SECONDS);\n  }\n  get milliseconds(): Return['milliseconds'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, MILLISECONDS);\n  }\n  get microseconds(): Return['microseconds'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, MICROSECONDS);\n  }\n  get nanoseconds(): Return['nanoseconds'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, NANOSECONDS);\n  }\n  get sign(): Return['sign'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return ES.DurationSign(\n      GetSlot(this, YEARS),\n      GetSlot(this, MONTHS),\n      GetSlot(this, WEEKS),\n      GetSlot(this, DAYS),\n      GetSlot(this, HOURS),\n      GetSlot(this, MINUTES),\n      GetSlot(this, SECONDS),\n      GetSlot(this, MILLISECONDS),\n      GetSlot(this, MICROSECONDS),\n      GetSlot(this, NANOSECONDS)\n    );\n  }\n  get blank(): Return['blank'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return (\n      ES.DurationSign(\n        GetSlot(this, YEARS),\n        GetSlot(this, MONTHS),\n        GetSlot(this, WEEKS),\n        GetSlot(this, DAYS),\n        GetSlot(this, HOURS),\n        GetSlot(this, MINUTES),\n        GetSlot(this, SECONDS),\n        GetSlot(this, MILLISECONDS),\n        GetSlot(this, MICROSECONDS),\n        GetSlot(this, NANOSECONDS)\n      ) === 0\n    );\n  }\n  with(durationLike: Params['with'][0]): Return['with'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    const partialDuration = ES.PrepareTemporalFields(\n      durationLike,\n      // NOTE: Field order here is important.\n      [\n        'days',\n        'hours',\n        'microseconds',\n        'milliseconds',\n        'minutes',\n        'months',\n        'nanoseconds',\n        'seconds',\n        'weeks',\n        'years'\n      ],\n      'partial'\n    );\n    const {\n      years = GetSlot(this, YEARS),\n      months = GetSlot(this, MONTHS),\n      weeks = GetSlot(this, WEEKS),\n      days = GetSlot(this, DAYS),\n      hours = GetSlot(this, HOURS),\n      minutes = GetSlot(this, MINUTES),\n      seconds = GetSlot(this, SECONDS),\n      milliseconds = GetSlot(this, MILLISECONDS),\n      microseconds = GetSlot(this, MICROSECONDS),\n      nanoseconds = GetSlot(this, NANOSECONDS)\n    } = partialDuration;\n    return new Duration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  }\n  negated(): Return['negated'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return ES.CreateNegatedTemporalDuration(this);\n  }\n  abs(): Return['abs'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return new Duration(\n      Math.abs(GetSlot(this, YEARS)),\n      Math.abs(GetSlot(this, MONTHS)),\n      Math.abs(GetSlot(this, WEEKS)),\n      Math.abs(GetSlot(this, DAYS)),\n      Math.abs(GetSlot(this, HOURS)),\n      Math.abs(GetSlot(this, MINUTES)),\n      Math.abs(GetSlot(this, SECONDS)),\n      Math.abs(GetSlot(this, MILLISECONDS)),\n      Math.abs(GetSlot(this, MICROSECONDS)),\n      Math.abs(GetSlot(this, NANOSECONDS))\n    );\n  }\n  add(other: Params['add'][0], options: Params['add'][1] = undefined): Return['add'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromDuration('add', this, other, options);\n  }\n  subtract(other: Params['subtract'][0], options: Params['subtract'][1] = undefined): Return['subtract'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromDuration('subtract', this, other, options);\n  }\n  round(roundToParam: Params['round'][0]): Return['round'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    if (roundToParam === undefined) throw new TypeError('options parameter is required');\n    let years = GetSlot(this, YEARS);\n    let months = GetSlot(this, MONTHS);\n    let weeks = GetSlot(this, WEEKS);\n    let days = GetSlot(this, DAYS);\n    let hours = GetSlot(this, HOURS);\n    let minutes = GetSlot(this, MINUTES);\n    let seconds = GetSlot(this, SECONDS);\n    let milliseconds = GetSlot(this, MILLISECONDS);\n    let microseconds = GetSlot(this, MICROSECONDS);\n    let nanoseconds = GetSlot(this, NANOSECONDS);\n\n    let defaultLargestUnit = ES.DefaultTemporalLargestUnit(\n      years,\n      months,\n      weeks,\n      days,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds\n    );\n    const roundTo =\n      typeof roundToParam === 'string'\n        ? (ES.CreateOnePropObject('smallestUnit', roundToParam) as Exclude<typeof roundToParam, string>)\n        : ES.GetOptionsObject(roundToParam);\n\n    let largestUnit = ES.GetTemporalUnit(roundTo, 'largestUnit', 'datetime', undefined, ['auto']);\n    let relativeTo = ES.ToRelativeTemporalObject(roundTo);\n    const roundingIncrement = ES.ToTemporalRoundingIncrement(roundTo);\n    const roundingMode = ES.ToTemporalRoundingMode(roundTo, 'halfExpand');\n    let smallestUnit = ES.GetTemporalUnit(roundTo, 'smallestUnit', 'datetime', undefined);\n\n    let smallestUnitPresent = true;\n    if (!smallestUnit) {\n      smallestUnitPresent = false;\n      smallestUnit = 'nanosecond';\n    }\n    defaultLargestUnit = ES.LargerOfTwoTemporalUnits(defaultLargestUnit, smallestUnit);\n    let largestUnitPresent = true;\n    if (!largestUnit) {\n      largestUnitPresent = false;\n      largestUnit = defaultLargestUnit;\n    }\n    if (largestUnit === 'auto') largestUnit = defaultLargestUnit;\n    if (!smallestUnitPresent && !largestUnitPresent) {\n      throw new RangeError('at least one of smallestUnit or largestUnit is required');\n    }\n    if (ES.LargerOfTwoTemporalUnits(largestUnit, smallestUnit) !== largestUnit) {\n      throw new RangeError(`largestUnit ${largestUnit} cannot be smaller than smallestUnit ${smallestUnit}`);\n    }\n\n    const maximumIncrements = {\n      hour: 24,\n      minute: 60,\n      second: 60,\n      millisecond: 1000,\n      microsecond: 1000,\n      nanosecond: 1000\n    } as { [k in Temporal.DateTimeUnit]?: number };\n    const maximum = maximumIncrements[smallestUnit];\n    if (maximum !== undefined) ES.ValidateTemporalRoundingIncrement(roundingIncrement, maximum, false);\n\n    ({ years, months, weeks, days } = ES.UnbalanceDurationRelative(\n      years,\n      months,\n      weeks,\n      days,\n      largestUnit,\n      relativeTo\n    ));\n    ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n      ES.RoundDuration(\n        years,\n        months,\n        weeks,\n        days,\n        hours,\n        minutes,\n        seconds,\n        milliseconds,\n        microseconds,\n        nanoseconds,\n        roundingIncrement,\n        smallestUnit,\n        roundingMode,\n        relativeTo\n      ));\n    ({ years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } =\n      ES.AdjustRoundedDurationDays(\n        years,\n        months,\n        weeks,\n        days,\n        hours,\n        minutes,\n        seconds,\n        milliseconds,\n        microseconds,\n        nanoseconds,\n        roundingIncrement,\n        smallestUnit,\n        roundingMode,\n        relativeTo\n      ));\n    ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = ES.BalanceDuration(\n      days,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds,\n      largestUnit,\n      relativeTo\n    ));\n    ({ years, months, weeks, days } = ES.BalanceDurationRelative(years, months, weeks, days, largestUnit, relativeTo));\n\n    return new Duration(years, months, weeks, days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds);\n  }\n  total(optionsParam: Params['total'][0]): Return['total'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    let years = GetSlot(this, YEARS);\n    let months = GetSlot(this, MONTHS);\n    let weeks = GetSlot(this, WEEKS);\n    let days = GetSlot(this, DAYS);\n    let hours = GetSlot(this, HOURS);\n    let minutes = GetSlot(this, MINUTES);\n    let seconds = GetSlot(this, SECONDS);\n    let milliseconds = GetSlot(this, MILLISECONDS);\n    let microseconds = GetSlot(this, MICROSECONDS);\n    let nanoseconds = GetSlot(this, NANOSECONDS);\n\n    if (optionsParam === undefined) throw new TypeError('options argument is required');\n    const options =\n      typeof optionsParam === 'string'\n        ? (ES.CreateOnePropObject('unit', optionsParam) as Exclude<typeof optionsParam, string>)\n        : ES.GetOptionsObject(optionsParam);\n    const relativeTo = ES.ToRelativeTemporalObject(options);\n    const unit = ES.GetTemporalUnit(options, 'unit', 'datetime', ES.REQUIRED);\n\n    // Convert larger units down to days\n    ({ years, months, weeks, days } = ES.UnbalanceDurationRelative(years, months, weeks, days, unit, relativeTo));\n    // If the unit we're totalling is smaller than `days`, convert days down to that unit.\n    let intermediate;\n    if (ES.IsTemporalZonedDateTime(relativeTo)) {\n      intermediate = ES.MoveRelativeZonedDateTime(relativeTo, years, months, weeks, 0);\n    }\n    let balanceResult = ES.BalancePossiblyInfiniteDuration(\n      days,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds,\n      unit,\n      intermediate\n    );\n    if (balanceResult === 'positive overflow') {\n      return Infinity;\n    } else if (balanceResult === 'negative overflow') {\n      return -Infinity;\n    }\n    ({ days, hours, minutes, seconds, milliseconds, microseconds, nanoseconds } = balanceResult);\n    // Finally, truncate to the correct unit and calculate remainder\n    const { total } = ES.RoundDuration(\n      years,\n      months,\n      weeks,\n      days,\n      hours,\n      minutes,\n      seconds,\n      milliseconds,\n      microseconds,\n      nanoseconds,\n      1,\n      unit,\n      'trunc',\n      relativeTo\n    );\n    return total;\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const digits = ES.ToFractionalSecondDigits(options);\n    const roundingMode = ES.ToTemporalRoundingMode(options, 'trunc');\n    const smallestUnit = ES.GetTemporalUnit(options, 'smallestUnit', 'time', undefined);\n    if (smallestUnit === 'hour' || smallestUnit === 'minute') {\n      throw new RangeError('smallestUnit must be a time unit other than \"hours\" or \"minutes\"');\n    }\n    const { precision, unit, increment } = ES.ToSecondsStringPrecisionRecord(smallestUnit, digits);\n    ES.uncheckedAssertNarrowedType<Exclude<typeof precision, 'minute'>>(\n      precision,\n      'Precision cannot be \"minute\" because of RangeError above'\n    );\n    return ES.TemporalDurationToString(this, precision, { unit, increment, roundingMode });\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDurationToString(this);\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalDuration(this)) throw new TypeError('invalid receiver');\n    if (typeof Intl !== 'undefined' && typeof (Intl as any).DurationFormat !== 'undefined') {\n      return new (Intl as any).DurationFormat(locales, options).format(this);\n    }\n    console.warn('Temporal.Duration.prototype.toLocaleString() requires Intl.DurationFormat.');\n    return ES.TemporalDurationToString(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() to compare Temporal.Duration');\n  }\n  static from(item: Params['from'][0]): Return['from'] {\n    if (ES.IsTemporalDuration(item)) {\n      return new Duration(\n        GetSlot(item, YEARS),\n        GetSlot(item, MONTHS),\n        GetSlot(item, WEEKS),\n        GetSlot(item, DAYS),\n        GetSlot(item, HOURS),\n        GetSlot(item, MINUTES),\n        GetSlot(item, SECONDS),\n        GetSlot(item, MILLISECONDS),\n        GetSlot(item, MICROSECONDS),\n        GetSlot(item, NANOSECONDS)\n      );\n    }\n    return ES.ToTemporalDuration(item);\n  }\n  static compare(\n    oneParam: Params['compare'][0],\n    twoParam: Params['compare'][1],\n    optionsParam: Params['compare'][2] = undefined\n  ) {\n    const one = ES.ToTemporalDuration(oneParam);\n    const two = ES.ToTemporalDuration(twoParam);\n    const options = ES.GetOptionsObject(optionsParam);\n    const relativeTo = ES.ToRelativeTemporalObject(options);\n    const y1 = GetSlot(one, YEARS);\n    const mon1 = GetSlot(one, MONTHS);\n    const w1 = GetSlot(one, WEEKS);\n    let d1 = GetSlot(one, DAYS);\n    const h1 = GetSlot(one, HOURS);\n    const min1 = GetSlot(one, MINUTES);\n    const s1 = GetSlot(one, SECONDS);\n    const ms1 = GetSlot(one, MILLISECONDS);\n    const s1 = GetSlot(one, MICROSECONDS);\n    let ns1 = GetSlot(one, NANOSECONDS);\n    const y2 = GetSlot(two, YEARS);\n    const mon2 = GetSlot(two, MONTHS);\n    const w2 = GetSlot(two, WEEKS);\n    let d2 = GetSlot(two, DAYS);\n    const h2 = GetSlot(two, HOURS);\n    const min2 = GetSlot(two, MINUTES);\n    const s2 = GetSlot(two, SECONDS);\n    const ms2 = GetSlot(two, MILLISECONDS);\n    const s2 = GetSlot(two, MICROSECONDS);\n    let ns2 = GetSlot(two, NANOSECONDS);\n    const shift1 = ES.CalculateOffsetShift(relativeTo, y1, mon1, w1, d1);\n    const shift2 = ES.CalculateOffsetShift(relativeTo, y2, mon2, w2, d2);\n    if (y1 !== 0 || y2 !== 0 || mon1 !== 0 || mon2 !== 0 || w1 !== 0 || w2 !== 0) {\n      ({ days: d1 } = ES.UnbalanceDurationRelative(y1, mon1, w1, d1, 'day', relativeTo));\n      ({ days: d2 } = ES.UnbalanceDurationRelative(y2, mon2, w2, d2, 'day', relativeTo));\n    }\n    const totalNs1 = ES.TotalDurationNanoseconds(d1, h1, min1, s1, ms1, s1, ns1, shift1);\n    const totalNs2 = ES.TotalDurationNanoseconds(d2, h2, min2, s2, ms2, s2, ns2, shift2);\n    return ES.ComparisonResult(JSBI.toNumber(JSBI.subtract(totalNs1, totalNs2)));\n  }\n  [Symbol.toStringTag]!: 'Temporal.Duration';\n}\n\nMakeIntrinsicClass(Duration, 'Temporal.Duration');\n", "import * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\nimport { ISO_MONTH, ISO_DAY, ISO_YEAR, CALENDAR, GetSlot } from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { PlainMonthDayParams as Params, PlainMonthDayReturn as Return } from './internaltypes';\n\nconst ObjectCreate = Object.create;\n\nexport class PlainMonthDay implements Temporal.PlainMonthDay {\n  constructor(\n    isoMonthParam: Params['constructor'][0],\n    isoDayParam: Params['constructor'][0],\n    calendarParam: string | Temporal.CalendarProtocol = 'iso8601',\n    referenceISOYearParam = 1972\n  ) {\n    const isoMonth = ES.ToIntegerWithTruncation(isoMonthParam);\n    const isoDay = ES.ToIntegerWithTruncation(isoDayParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    const referenceISOYear = ES.ToIntegerWithTruncation(referenceISOYearParam);\n\n    ES.CreateTemporalMonthDaySlots(this, isoMonth, isoDay, calendar, referenceISOYear);\n  }\n\n  get monthCode(): Return['monthCode'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthCode(GetSlot(this, CALENDAR), this);\n  }\n  get day(): Return['day'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDay(GetSlot(this, CALENDAR), this);\n  }\n  get calendarId(): Return['calendarId'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n  }\n\n  with(temporalMonthDayLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalMonthDayLike)) {\n      throw new TypeError('invalid argument');\n    }\n    ES.RejectTemporalLikeObject(temporalMonthDayLike);\n    const options = ES.GetOptionsObject(optionsParam);\n\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['day', 'month', 'monthCode', 'year'] as const);\n    let fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    const partialMonthDay = ES.PrepareTemporalFields(temporalMonthDayLike, fieldNames, 'partial');\n    fields = ES.CalendarMergeFields(calendar, fields, partialMonthDay);\n    fields = ES.PrepareTemporalFields(fields, fieldNames, []);\n\n    return ES.CalendarMonthDayFromFields(calendar, fields, options);\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalMonthDay(otherParam);\n    for (const slot of [ISO_MONTH, ISO_DAY, ISO_YEAR]) {\n      const val1 = GetSlot(this, slot);\n      const val2 = GetSlot(other, slot);\n      if (val1 !== val2) return false;\n    }\n    return ES.CalendarEquals(GetSlot(this, CALENDAR), GetSlot(other, CALENDAR));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const showCalendar = ES.ToCalendarNameOption(options);\n    return ES.TemporalMonthDayToString(this, showCalendar);\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalMonthDayToString(this);\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use equals() to compare Temporal.PlainMonthDay');\n  }\n  toPlainDate(item: Params['toPlainDate'][0]): Return['toPlainDate'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(item)) throw new TypeError('argument should be an object');\n    const calendar = GetSlot(this, CALENDAR);\n\n    const receiverFieldNames = ES.CalendarFields(calendar, ['day', 'monthCode'] as const);\n    const fields = ES.PrepareTemporalFields(this, receiverFieldNames, []);\n\n    const inputFieldNames = ES.CalendarFields(calendar, ['year'] as const);\n    const inputFields = ES.PrepareTemporalFields(item, inputFieldNames, []);\n    let mergedFields = ES.CalendarMergeFields(calendar, fields, inputFields);\n\n    // TODO: Use MergeLists abstract operation.\n    const mergedFieldNames = [...new Set([...receiverFieldNames, ...inputFieldNames])];\n    mergedFields = ES.PrepareTemporalFields(mergedFields, mergedFieldNames, []);\n    const options = ObjectCreate(null);\n    options.overflow = 'reject';\n    return ES.CalendarDateFromFields(calendar, mergedFields, options);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return {\n      calendar: GetSlot(this, CALENDAR),\n      isoDay: GetSlot(this, ISO_DAY),\n      isoMonth: GetSlot(this, ISO_MONTH),\n      isoYear: GetSlot(this, ISO_YEAR)\n    };\n  }\n  getCalendar(): Return['getCalendar'] {\n    if (!ES.IsTemporalMonthDay(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarObject(GetSlot(this, CALENDAR));\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    if (ES.IsTemporalMonthDay(item)) {\n      ES.ToTemporalOverflow(options); // validate and ignore\n      return ES.CreateTemporalMonthDay(\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, ISO_DAY),\n        GetSlot(item, CALENDAR),\n        GetSlot(item, ISO_YEAR)\n      );\n    }\n    return ES.ToTemporalMonthDay(item, options);\n  }\n  [Symbol.toStringTag]!: 'Temporal.PlainMonthDay';\n}\n\nMakeIntrinsicClass(PlainMonthDay, 'Temporal.PlainMonthDay');\n", "import * as ES from './ecmascript';\nimport { GetIntrinsic } from './intrinsicclass';\nimport type { Temporal } from '..';\n\nconst instant: typeof Temporal.Now['instant'] = () => {\n  const Instant = GetIntrinsic('%Temporal.Instant%');\n  return new Instant(ES.SystemUTCEpochNanoSeconds());\n};\nconst plainDateTime: typeof Temporal.Now['plainDateTime'] = (\n  calendarLike,\n  temporalTimeZoneLike = ES.DefaultTimeZone()\n) => {\n  const tZ = ES.ToTemporalTimeZoneSlotValue(temporalTimeZoneLike);\n  const calendar = ES.ToTemporalCalendarSlotValue(calendarLike);\n  const inst = instant();\n  return ES.GetPlainDateTimeFor(tZ, inst, calendar);\n};\nconst plainDateTimeISO: typeof Temporal.Now['plainDateTimeISO'] = (temporalTimeZoneLike = ES.DefaultTimeZone()) => {\n  const tZ = ES.ToTemporalTimeZoneSlotValue(temporalTimeZoneLike);\n  const inst = instant();\n  return ES.GetPlainDateTimeFor(tZ, inst, 'iso8601');\n};\nconst zonedDateTime: typeof Temporal.Now['zonedDateTime'] = (\n  calendarLike,\n  temporalTimeZoneLike = ES.DefaultTimeZone()\n) => {\n  const tZ = ES.ToTemporalTimeZoneSlotValue(temporalTimeZoneLike);\n  const calendar = ES.ToTemporalCalendarSlotValue(calendarLike);\n  return ES.CreateTemporalZonedDateTime(ES.SystemUTCEpochNanoSeconds(), tZ, calendar);\n};\nconst zonedDateTimeISO: typeof Temporal.Now['zonedDateTimeISO'] = (temporalTimeZoneLike = ES.DefaultTimeZone()) => {\n  return zonedDateTime('iso8601', temporalTimeZoneLike);\n};\nconst plainDate: typeof Temporal.Now['plainDate'] = (calendarLike, temporalTimeZoneLike = ES.DefaultTimeZone()) => {\n  return ES.TemporalDateTimeToDate(plainDateTime(calendarLike, temporalTimeZoneLike));\n};\nconst plainDateISO: typeof Temporal.Now['plainDateISO'] = (temporalTimeZoneLike = ES.DefaultTimeZone()) => {\n  return ES.TemporalDateTimeToDate(plainDateTimeISO(temporalTimeZoneLike));\n};\nconst plainTimeISO: typeof Temporal.Now['plainTimeISO'] = (temporalTimeZoneLike = ES.DefaultTimeZone()) => {\n  return ES.TemporalDateTimeToTime(plainDateTimeISO(temporalTimeZoneLike));\n};\nconst timeZoneId: typeof Temporal.Now['timeZoneId'] = () => {\n  return ES.DefaultTimeZone();\n};\n\nexport const Now: typeof Temporal.Now = {\n  instant,\n  plainDateTime,\n  plainDateTimeISO,\n  plainDate,\n  plainDateISO,\n  plainTimeISO,\n  timeZoneId,\n  zonedDateTime,\n  zonedDateTimeISO,\n  [Symbol.toStringTag]: 'Temporal.Now'\n};\nObject.defineProperty(Now, Symbol.toStringTag, {\n  value: 'Temporal.Now',\n  writable: false,\n  enumerable: false,\n  configurable: true\n});\n", "import { DEBUG } from './debug';\nimport * as ES from './ecmascript';\nimport { GetIntrinsic, MakeIntrinsicClass } from './intrinsicclass';\n\nimport {\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  CALENDAR,\n  EPOCHNANOSECONDS,\n  CreateSlots,\n  GetSlot,\n  SetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { PlainTimeParams as Params, PlainTimeReturn as Return } from './internaltypes';\n\nconst ObjectAssign = Object.assign;\n\ntype TemporalTimeToStringOptions = {\n  unit: ReturnType<typeof ES.ToSecondsStringPrecisionRecord>['unit'];\n  increment: ReturnType<typeof ES.ToSecondsStringPrecisionRecord>['increment'];\n  roundingMode: Temporal.RoundingMode;\n};\n\nfunction TemporalTimeToString(\n  time: Temporal.PlainTime,\n  precision: ReturnType<typeof ES.ToSecondsStringPrecisionRecord>['precision'],\n  options: TemporalTimeToStringOptions | undefined = undefined\n) {\n  let hour = GetSlot(time, ISO_HOUR);\n  let minute = GetSlot(time, ISO_MINUTE);\n  let second = GetSlot(time, ISO_SECOND);\n  let millisecond = GetSlot(time, ISO_MILLISECOND);\n  let microsecond = GetSlot(time, ISO_MICROSECOND);\n  let nanosecond = GetSlot(time, ISO_NANOSECOND);\n\n  if (options) {\n    const { unit, increment, roundingMode } = options;\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = ES.RoundTime(\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      increment,\n      unit,\n      roundingMode\n    ));\n  }\n\n  const hourString = ES.ISODateTimePartString(hour);\n  const minuteString = ES.ISODateTimePartString(minute);\n  const seconds = ES.FormatSecondsStringPart(second, millisecond, microsecond, nanosecond, precision);\n  return `${hourString}:${minuteString}${seconds}`;\n}\n\nexport class PlainTime implements Temporal.PlainTime {\n  constructor(\n    isoHourParam = 0,\n    isoMinuteParam = 0,\n    isoSecondParam = 0,\n    isoMillisecondParam = 0,\n    isoMicrosecondParam = 0,\n    isoNanosecondParam = 0\n  ) {\n    const isoHour = isoHourParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoHourParam);\n    const isoMinute = isoMinuteParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoMinuteParam);\n    const isoSecond = isoSecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoSecondParam);\n    const isoMillisecond = isoMillisecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoMillisecondParam);\n    const isoMicrosecond = isoMicrosecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoMicrosecondParam);\n    const isoNanosecond = isoNanosecondParam === undefined ? 0 : ES.ToIntegerWithTruncation(isoNanosecondParam);\n\n    ES.RejectTime(isoHour, isoMinute, isoSecond, isoMillisecond, isoMicrosecond, isoNanosecond);\n    CreateSlots(this);\n    SetSlot(this, ISO_HOUR, isoHour);\n    SetSlot(this, ISO_MINUTE, isoMinute);\n    SetSlot(this, ISO_SECOND, isoSecond);\n    SetSlot(this, ISO_MILLISECOND, isoMillisecond);\n    SetSlot(this, ISO_MICROSECOND, isoMicrosecond);\n    SetSlot(this, ISO_NANOSECOND, isoNanosecond);\n\n    if (DEBUG) {\n      Object.defineProperty(this, '_repr_', {\n        value: `${this[Symbol.toStringTag]} <${TemporalTimeToString(this, 'auto')}>`,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n    }\n  }\n\n  get hour(): Return['hour'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_HOUR);\n  }\n  get minute(): Return['minute'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MINUTE);\n  }\n  get second(): Return['second'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_SECOND);\n  }\n  get millisecond(): Return['millisecond'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MILLISECOND);\n  }\n  get microsecond(): Return['microsecond'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_MICROSECOND);\n  }\n  get nanosecond(): Return['nanosecond'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, ISO_NANOSECOND);\n  }\n\n  with(temporalTimeLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalTimeLike)) {\n      throw new TypeError('invalid argument');\n    }\n    ES.RejectTemporalLikeObject(temporalTimeLike);\n    const options = ES.GetOptionsObject(optionsParam);\n    const overflow = ES.ToTemporalOverflow(options);\n\n    const partialTime = ES.ToTemporalTimeRecord(temporalTimeLike, 'partial');\n\n    const fields = ES.ToTemporalTimeRecord(this);\n    let { hour, minute, second, millisecond, microsecond, nanosecond } = ObjectAssign(fields, partialTime);\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = ES.RegulateTime(\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      overflow\n    ));\n    return new PlainTime(hour, minute, second, millisecond, microsecond, nanosecond);\n  }\n  add(temporalDurationLike: Params['add'][0]): Return['add'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainTime('add', this, temporalDurationLike);\n  }\n  subtract(temporalDurationLike: Params['subtract'][0]): Return['subtract'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainTime('subtract', this, temporalDurationLike);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainTime('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainTime('since', this, other, options);\n  }\n  round(roundToParam: Params['round'][0]): Return['round'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    if (roundToParam === undefined) throw new TypeError('options parameter is required');\n    const roundTo =\n      typeof roundToParam === 'string'\n        ? (ES.CreateOnePropObject('smallestUnit', roundToParam) as Exclude<typeof roundToParam, string>)\n        : ES.GetOptionsObject(roundToParam);\n    const roundingIncrement = ES.ToTemporalRoundingIncrement(roundTo);\n    const roundingMode = ES.ToTemporalRoundingMode(roundTo, 'halfExpand');\n    const smallestUnit = ES.GetTemporalUnit(roundTo, 'smallestUnit', 'time', ES.REQUIRED);\n    const MAX_INCREMENTS = {\n      hour: 24,\n      minute: 60,\n      second: 60,\n      millisecond: 1000,\n      microsecond: 1000,\n      nanosecond: 1000\n    };\n    ES.ValidateTemporalRoundingIncrement(roundingIncrement, MAX_INCREMENTS[smallestUnit], false);\n\n    let hour = GetSlot(this, ISO_HOUR);\n    let minute = GetSlot(this, ISO_MINUTE);\n    let second = GetSlot(this, ISO_SECOND);\n    let millisecond = GetSlot(this, ISO_MILLISECOND);\n    let microsecond = GetSlot(this, ISO_MICROSECOND);\n    let nanosecond = GetSlot(this, ISO_NANOSECOND);\n    ({ hour, minute, second, millisecond, microsecond, nanosecond } = ES.RoundTime(\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      roundingIncrement,\n      smallestUnit,\n      roundingMode\n    ));\n\n    return new PlainTime(hour, minute, second, millisecond, microsecond, nanosecond);\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalTime(otherParam);\n    for (const slot of [ISO_HOUR, ISO_MINUTE, ISO_SECOND, ISO_MILLISECOND, ISO_MICROSECOND, ISO_NANOSECOND]) {\n      const val1 = GetSlot(this, slot);\n      const val2 = GetSlot(other, slot);\n      if (val1 !== val2) return false;\n    }\n    return true;\n  }\n\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const digits = ES.ToFractionalSecondDigits(options);\n    const roundingMode = ES.ToTemporalRoundingMode(options, 'trunc');\n    const smallestUnit = ES.GetTemporalUnit(options, 'smallestUnit', 'time', undefined);\n    if (smallestUnit === 'hour') throw new RangeError('smallestUnit must be a time unit other than \"hour\"');\n    const { precision, unit, increment } = ES.ToSecondsStringPrecisionRecord(smallestUnit, digits);\n    return TemporalTimeToString(this, precision, { unit, increment, roundingMode });\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return TemporalTimeToString(this, 'auto');\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.PlainTime');\n  }\n\n  toPlainDateTime(temporalDateParam: Params['toPlainDateTime'][0]): Return['toPlainDateTime'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n\n    const temporalDate = ES.ToTemporalDate(temporalDateParam);\n    const year = GetSlot(temporalDate, ISO_YEAR);\n    const month = GetSlot(temporalDate, ISO_MONTH);\n    const day = GetSlot(temporalDate, ISO_DAY);\n    const calendar = GetSlot(temporalDate, CALENDAR);\n\n    const hour = GetSlot(this, ISO_HOUR);\n    const minute = GetSlot(this, ISO_MINUTE);\n    const second = GetSlot(this, ISO_SECOND);\n    const millisecond = GetSlot(this, ISO_MILLISECOND);\n    const microsecond = GetSlot(this, ISO_MICROSECOND);\n    const nanosecond = GetSlot(this, ISO_NANOSECOND);\n\n    return ES.CreateTemporalDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n  }\n  toZonedDateTime(item: Params['toZonedDateTime'][0]): Return['toZonedDateTime'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n\n    if (!ES.IsObject(item)) {\n      throw new TypeError('invalid argument');\n    }\n\n    const dateLike = item.plainDate;\n    if (dateLike === undefined) {\n      throw new TypeError('missing date property');\n    }\n    const temporalDate = ES.ToTemporalDate(dateLike);\n\n    const timeZoneLike = item.timeZone;\n    if (timeZoneLike === undefined) {\n      throw new TypeError('missing timeZone property');\n    }\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(timeZoneLike);\n\n    const year = GetSlot(temporalDate, ISO_YEAR);\n    const month = GetSlot(temporalDate, ISO_MONTH);\n    const day = GetSlot(temporalDate, ISO_DAY);\n    const calendar = GetSlot(temporalDate, CALENDAR);\n    const hour = GetSlot(this, ISO_HOUR);\n    const minute = GetSlot(this, ISO_MINUTE);\n    const second = GetSlot(this, ISO_SECOND);\n    const millisecond = GetSlot(this, ISO_MILLISECOND);\n    const microsecond = GetSlot(this, ISO_MICROSECOND);\n    const nanosecond = GetSlot(this, ISO_NANOSECOND);\n\n    const PlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const dt = new PlainDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n    const instant = ES.GetInstantFor(timeZone, dt, 'compatible');\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalTime(this)) throw new TypeError('invalid receiver');\n    return {\n      isoHour: GetSlot(this, ISO_HOUR),\n      isoMicrosecond: GetSlot(this, ISO_MICROSECOND),\n      isoMillisecond: GetSlot(this, ISO_MILLISECOND),\n      isoMinute: GetSlot(this, ISO_MINUTE),\n      isoNanosecond: GetSlot(this, ISO_NANOSECOND),\n      isoSecond: GetSlot(this, ISO_SECOND)\n    };\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    const overflow = ES.ToTemporalOverflow(options);\n    if (ES.IsTemporalTime(item)) {\n      return new PlainTime(\n        GetSlot(item, ISO_HOUR),\n        GetSlot(item, ISO_MINUTE),\n        GetSlot(item, ISO_SECOND),\n        GetSlot(item, ISO_MILLISECOND),\n        GetSlot(item, ISO_MICROSECOND),\n        GetSlot(item, ISO_NANOSECOND)\n      );\n    }\n    return ES.ToTemporalTime(item, overflow);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalTime(oneParam);\n    const two = ES.ToTemporalTime(twoParam);\n    for (const slot of [ISO_HOUR, ISO_MINUTE, ISO_SECOND, ISO_MILLISECOND, ISO_MICROSECOND, ISO_NANOSECOND] as const) {\n      const val1 = GetSlot(one, slot);\n      const val2 = GetSlot(two, slot);\n      if (val1 !== val2) return ES.ComparisonResult(val1 - val2);\n    }\n    return 0;\n  }\n  [Symbol.toStringTag]!: 'Temporal.PlainTime';\n}\n\nMakeIntrinsicClass(PlainTime, 'Temporal.PlainTime');\n", "import { DEBUG } from './debug';\nimport * as ES from './ecmascript';\nimport { DefineIntrinsic, GetIntrinsic, MakeIntrinsicClass } from './intrinsicclass';\nimport {\n  TIMEZONE_ID,\n  EPOCHNANOSECONDS,\n  ISO_YEAR,\n  ISO_MONTH,\n  ISO_DAY,\n  ISO_HOUR,\n  ISO_MINUTE,\n  ISO_SECOND,\n  ISO_MILLISECOND,\n  ISO_MICROSECOND,\n  ISO_NANOSECOND,\n  CreateSlots,\n  GetSlot,\n  SetSlot\n} from './slots';\nimport JSBI from 'jsbi';\nimport type { Temporal } from '..';\nimport type { TimeZoneParams as Params, TimeZoneReturn as Return } from './internaltypes';\n\nexport class TimeZone implements Temporal.TimeZone {\n  constructor(timeZoneIdentifierParam: string) {\n    // Note: if the argument is not passed, GetCanonicalTimeZoneIdentifier(undefined) will throw.\n    //       This check exists only to improve the error message.\n    if (arguments.length < 1) {\n      throw new RangeError('missing argument: identifier is required');\n    }\n\n    const timeZoneIdentifier = ES.GetCanonicalTimeZoneIdentifier(timeZoneIdentifierParam);\n    CreateSlots(this);\n    SetSlot(this, TIMEZONE_ID, timeZoneIdentifier);\n\n    if (DEBUG) {\n      Object.defineProperty(this, '_repr_', {\n        value: `${this[Symbol.toStringTag]} <${timeZoneIdentifier}>`,\n        writable: false,\n        enumerable: false,\n        configurable: false\n      });\n    }\n  }\n  get id(): Return['id'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, TIMEZONE_ID);\n  }\n  getOffsetNanosecondsFor(instantParam: Params['getOffsetNanosecondsFor'][0]): Return['getOffsetNanosecondsFor'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const instant = ES.ToTemporalInstant(instantParam);\n    const id = GetSlot(this, TIMEZONE_ID);\n\n    if (ES.IsTimeZoneOffsetString(id)) {\n      return ES.ParseTimeZoneOffsetString(id);\n    }\n\n    return ES.GetNamedTimeZoneOffsetNanoseconds(id, GetSlot(instant, EPOCHNANOSECONDS));\n  }\n  getOffsetStringFor(instantParam: Params['getOffsetStringFor'][0]): Return['getOffsetStringFor'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const instant = ES.ToTemporalInstant(instantParam);\n    return ES.GetOffsetStringFor(this, instant);\n  }\n  getPlainDateTimeFor(\n    instantParam: Params['getPlainDateTimeFor'][0],\n    calendarParam: Params['getPlainDateTimeFor'][1] = 'iso8601'\n  ): Return['getPlainDateTimeFor'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const instant = ES.ToTemporalInstant(instantParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    return ES.GetPlainDateTimeFor(this, instant, calendar);\n  }\n  getInstantFor(\n    dateTimeParam: Params['getInstantFor'][0],\n    optionsParam: Params['getInstantFor'][1] = undefined\n  ): Return['getInstantFor'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const dateTime = ES.ToTemporalDateTime(dateTimeParam);\n    const options = ES.GetOptionsObject(optionsParam);\n    const disambiguation = ES.ToTemporalDisambiguation(options);\n    return ES.GetInstantFor(this, dateTime, disambiguation);\n  }\n  getPossibleInstantsFor(dateTimeParam: Params['getPossibleInstantsFor'][0]): Return['getPossibleInstantsFor'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const dateTime = ES.ToTemporalDateTime(dateTimeParam);\n    const Instant = GetIntrinsic('%Temporal.Instant%');\n    const id = GetSlot(this, TIMEZONE_ID);\n\n    if (ES.IsTimeZoneOffsetString(id)) {\n      const epochNs = ES.GetUTCEpochNanoseconds(\n        GetSlot(dateTime, ISO_YEAR),\n        GetSlot(dateTime, ISO_MONTH),\n        GetSlot(dateTime, ISO_DAY),\n        GetSlot(dateTime, ISO_HOUR),\n        GetSlot(dateTime, ISO_MINUTE),\n        GetSlot(dateTime, ISO_SECOND),\n        GetSlot(dateTime, ISO_MILLISECOND),\n        GetSlot(dateTime, ISO_MICROSECOND),\n        GetSlot(dateTime, ISO_NANOSECOND)\n      );\n      if (epochNs === null) throw new RangeError('DateTime outside of supported range');\n      const offsetNs = ES.ParseTimeZoneOffsetString(id);\n      return [new Instant(JSBI.subtract(epochNs, JSBI.BigInt(offsetNs)))];\n    }\n\n    const possibleEpochNs = ES.GetNamedTimeZoneEpochNanoseconds(\n      id,\n      GetSlot(dateTime, ISO_YEAR),\n      GetSlot(dateTime, ISO_MONTH),\n      GetSlot(dateTime, ISO_DAY),\n      GetSlot(dateTime, ISO_HOUR),\n      GetSlot(dateTime, ISO_MINUTE),\n      GetSlot(dateTime, ISO_SECOND),\n      GetSlot(dateTime, ISO_MILLISECOND),\n      GetSlot(dateTime, ISO_MICROSECOND),\n      GetSlot(dateTime, ISO_NANOSECOND)\n    );\n    return possibleEpochNs.map((ns) => new Instant(ns));\n  }\n  getNextTransition(startingPointParam: Params['getNextTransition'][0]): Return['getNextTransition'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const startingPoint = ES.ToTemporalInstant(startingPointParam);\n    const id = GetSlot(this, TIMEZONE_ID);\n\n    // Offset time zones or UTC have no transitions\n    if (ES.IsTimeZoneOffsetString(id) || id === 'UTC') {\n      return null;\n    }\n\n    let epochNanoseconds: JSBI | null = GetSlot(startingPoint, EPOCHNANOSECONDS);\n    const Instant = GetIntrinsic('%Temporal.Instant%');\n    epochNanoseconds = ES.GetNamedTimeZoneNextTransition(id, epochNanoseconds);\n    return epochNanoseconds === null ? null : new Instant(epochNanoseconds);\n  }\n  getPreviousTransition(startingPointParam: Params['getPreviousTransition'][0]): Return['getPreviousTransition'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    const startingPoint = ES.ToTemporalInstant(startingPointParam);\n    const id = GetSlot(this, TIMEZONE_ID);\n\n    // Offset time zones or UTC have no transitions\n    if (ES.IsTimeZoneOffsetString(id) || id === 'UTC') {\n      return null;\n    }\n\n    let epochNanoseconds: JSBI | null = GetSlot(startingPoint, EPOCHNANOSECONDS);\n    const Instant = GetIntrinsic('%Temporal.Instant%');\n    epochNanoseconds = ES.GetNamedTimeZonePreviousTransition(id, epochNanoseconds);\n    return epochNanoseconds === null ? null : new Instant(epochNanoseconds);\n  }\n  toString(): string {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, TIMEZONE_ID);\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalTimeZone(this)) throw new TypeError('invalid receiver');\n    return GetSlot(this, TIMEZONE_ID);\n  }\n  static from(item: Params['from'][0]): Return['from'] {\n    const timeZoneSlotValue = ES.ToTemporalTimeZoneSlotValue(item);\n    return ES.ToTemporalTimeZoneObject(timeZoneSlotValue);\n  }\n  [Symbol.toStringTag]!: 'Temporal.TimeZone';\n}\n\nMakeIntrinsicClass(TimeZone, 'Temporal.TimeZone');\nDefineIntrinsic('Temporal.TimeZone.prototype.getOffsetNanosecondsFor', TimeZone.prototype.getOffsetNanosecondsFor);\nDefineIntrinsic('Temporal.TimeZone.prototype.getPossibleInstantsFor', TimeZone.prototype.getPossibleInstantsFor);\n", "import * as ES from './ecmascript';\nimport { MakeIntrinsicClass } from './intrinsicclass';\nimport { ISO_YEAR, ISO_MONTH, ISO_DAY, CALENDAR, GetSlot } from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { PlainYearMonthParams as Params, PlainYearMonthReturn as Return } from './internaltypes';\n\nconst ObjectCreate = Object.create;\n\nexport class PlainYearMonth implements Temporal.PlainYearMonth {\n  constructor(\n    isoYearParam: Params['constructor'][0],\n    isoMonthParam: Params['constructor'][1],\n    calendarParam: Params['constructor'][2] = 'iso8601',\n    referenceISODayParam: Params['constructor'][3] = 1\n  ) {\n    const isoYear = ES.ToIntegerWithTruncation(isoYearParam);\n    const isoMonth = ES.ToIntegerWithTruncation(isoMonthParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    const referenceISODay = ES.ToIntegerWithTruncation(referenceISODayParam);\n\n    ES.CreateTemporalYearMonthSlots(this, isoYear, isoMonth, calendar, referenceISODay);\n  }\n  get year(): Return['year'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYear(GetSlot(this, CALENDAR), this);\n  }\n  get month(): Return['month'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonth(GetSlot(this, CALENDAR), this);\n  }\n  get monthCode(): Return['monthCode'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthCode(GetSlot(this, CALENDAR), this);\n  }\n  get calendarId(): Return['calendarId'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n  }\n  get era(): Return['era'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEra(GetSlot(this, CALENDAR), this);\n  }\n  get eraYear(): Return['eraYear'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEraYear(GetSlot(this, CALENDAR), this);\n  }\n  get daysInMonth(): Return['daysInMonth'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInMonth(GetSlot(this, CALENDAR), this);\n  }\n  get daysInYear(): Return['daysInYear'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInYear(GetSlot(this, CALENDAR), this);\n  }\n  get monthsInYear(): Return['monthsInYear'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthsInYear(GetSlot(this, CALENDAR), this);\n  }\n  get inLeapYear(): Return['inLeapYear'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarInLeapYear(GetSlot(this, CALENDAR), this);\n  }\n  with(temporalYearMonthLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalYearMonthLike)) {\n      throw new TypeError('invalid argument');\n    }\n    ES.RejectTemporalLikeObject(temporalYearMonthLike);\n    const options = ES.GetOptionsObject(optionsParam);\n\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['month', 'monthCode', 'year'] as const);\n    let fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    const partialYearMonth = ES.PrepareTemporalFields(temporalYearMonthLike, fieldNames, 'partial');\n    fields = ES.CalendarMergeFields(calendar, fields, partialYearMonth);\n    fields = ES.PrepareTemporalFields(fields, fieldNames, []);\n\n    return ES.CalendarYearMonthFromFields(calendar, fields, options);\n  }\n  add(temporalDurationLike: Params['add'][0], options: Params['add'][1] = undefined): Return['add'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainYearMonth('add', this, temporalDurationLike, options);\n  }\n  subtract(\n    temporalDurationLike: Params['subtract'][0],\n    options: Params['subtract'][1] = undefined\n  ): Return['subtract'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromPlainYearMonth('subtract', this, temporalDurationLike, options);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainYearMonth('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalPlainYearMonth('since', this, other, options);\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalYearMonth(otherParam);\n    for (const slot of [ISO_YEAR, ISO_MONTH, ISO_DAY]) {\n      const val1 = GetSlot(this, slot);\n      const val2 = GetSlot(other, slot);\n      if (val1 !== val2) return false;\n    }\n    return ES.CalendarEquals(GetSlot(this, CALENDAR), GetSlot(other, CALENDAR));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const showCalendar = ES.ToCalendarNameOption(options);\n    return ES.TemporalYearMonthToString(this, showCalendar);\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalYearMonthToString(this);\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    options: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return new DateTimeFormat(locales, options).format(this);\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.PlainYearMonth');\n  }\n  toPlainDate(item: Params['toPlainDate'][0]): Return['toPlainDate'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(item)) throw new TypeError('argument should be an object');\n    const calendar = GetSlot(this, CALENDAR);\n\n    const receiverFieldNames = ES.CalendarFields(calendar, ['monthCode', 'year'] as const);\n    const fields = ES.PrepareTemporalFields(this, receiverFieldNames, []);\n\n    const inputFieldNames = ES.CalendarFields(calendar, ['day'] as const);\n    const inputFields = ES.PrepareTemporalFields(item, inputFieldNames, []);\n    let mergedFields = ES.CalendarMergeFields(calendar, fields, inputFields);\n\n    // TODO: Use MergeLists abstract operation.\n    const mergedFieldNames = [...new Set([...receiverFieldNames, ...inputFieldNames])];\n    mergedFields = ES.PrepareTemporalFields(mergedFields, mergedFieldNames, []);\n    const options = ObjectCreate(null);\n    options.overflow = 'reject';\n    return ES.CalendarDateFromFields(calendar, mergedFields, options);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return {\n      calendar: GetSlot(this, CALENDAR),\n      isoDay: GetSlot(this, ISO_DAY),\n      isoMonth: GetSlot(this, ISO_MONTH),\n      isoYear: GetSlot(this, ISO_YEAR)\n    };\n  }\n  getCalendar(): Return['getCalendar'] {\n    if (!ES.IsTemporalYearMonth(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarObject(GetSlot(this, CALENDAR));\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    if (ES.IsTemporalYearMonth(item)) {\n      ES.ToTemporalOverflow(options); // validate and ignore\n      return ES.CreateTemporalYearMonth(\n        GetSlot(item, ISO_YEAR),\n        GetSlot(item, ISO_MONTH),\n        GetSlot(item, CALENDAR),\n        GetSlot(item, ISO_DAY)\n      );\n    }\n    return ES.ToTemporalYearMonth(item, options);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalYearMonth(oneParam);\n    const two = ES.ToTemporalYearMonth(twoParam);\n    return ES.CompareISODate(\n      GetSlot(one, ISO_YEAR),\n      GetSlot(one, ISO_MONTH),\n      GetSlot(one, ISO_DAY),\n      GetSlot(two, ISO_YEAR),\n      GetSlot(two, ISO_MONTH),\n      GetSlot(two, ISO_DAY)\n    );\n  }\n  [Symbol.toStringTag]!: 'Temporal.PlainYearMonth';\n}\n\nMakeIntrinsicClass(PlainYearMonth, 'Temporal.PlainYearMonth');\n", "import * as ES from './ecmascript';\nimport { GetIntrinsic, MakeIntrinsicClass } from './intrinsicclass';\nimport {\n  CALENDAR,\n  EPOCHNANOSECONDS,\n  ISO_HOUR,\n  INSTANT,\n  ISO_DAY,\n  ISO_MONTH,\n  ISO_YEAR,\n  ISO_MICROSECOND,\n  ISO_MILLISECOND,\n  ISO_MINUTE,\n  ISO_NANOSECOND,\n  ISO_SECOND,\n  TIME_ZONE,\n  GetSlot\n} from './slots';\nimport type { Temporal } from '..';\nimport { DateTimeFormat } from './intl';\nimport type { ZonedDateTimeParams as Params, ZonedDateTimeReturn as Return } from './internaltypes';\n\nimport JSBI from 'jsbi';\nimport { BILLION, MILLION, THOUSAND, ZERO, HOUR_NANOS } from './ecmascript';\n\nconst customResolvedOptions = DateTimeFormat.prototype.resolvedOptions as Intl.DateTimeFormat['resolvedOptions'];\nconst ObjectCreate = Object.create;\n\nexport class ZonedDateTime implements Temporal.ZonedDateTime {\n  constructor(\n    epochNanosecondsParam: bigint | JSBI,\n    timeZoneParam: string | Temporal.TimeZoneProtocol,\n    calendarParam: string | Temporal.CalendarProtocol = 'iso8601'\n  ) {\n    // Note: if the argument is not passed, ToBigInt(undefined) will throw. This check exists only\n    //       to improve the error message.\n    //       ToTemporalTimeZoneSlotValue(undefined) has a clear enough message.\n    if (arguments.length < 1) {\n      throw new TypeError('missing argument: epochNanoseconds is required');\n    }\n    const epochNanoseconds = ES.ToBigInt(epochNanosecondsParam);\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(timeZoneParam);\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n\n    ES.CreateTemporalZonedDateTimeSlots(this, epochNanoseconds, timeZone, calendar);\n  }\n  get calendarId(): Return['calendarId'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n  }\n  get timeZoneId(): Return['timeZoneId'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalTimeZoneIdentifier(GetSlot(this, TIME_ZONE));\n  }\n  get year(): Return['year'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get month(): Return['month'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonth(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get monthCode(): Return['monthCode'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthCode(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get day(): Return['day'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDay(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get hour(): Return['hour'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_HOUR);\n  }\n  get minute(): Return['minute'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_MINUTE);\n  }\n  get second(): Return['second'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_SECOND);\n  }\n  get millisecond(): Return['millisecond'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_MILLISECOND);\n  }\n  get microsecond(): Return['microsecond'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_MICROSECOND);\n  }\n  get nanosecond(): Return['nanosecond'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return GetSlot(dateTime(this), ISO_NANOSECOND);\n  }\n  get era(): Return['era'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEra(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get eraYear(): Return['eraYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarEraYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get epochSeconds(): Return['epochSeconds'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const value = GetSlot(this, EPOCHNANOSECONDS);\n    return JSBI.toNumber(ES.BigIntFloorDiv(value, BILLION));\n  }\n  get epochMilliseconds(): Return['epochMilliseconds'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const value = GetSlot(this, EPOCHNANOSECONDS);\n    return JSBI.toNumber(ES.BigIntFloorDiv(value, MILLION));\n  }\n  get epochMicroseconds(): Return['epochMicroseconds'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const value = GetSlot(this, EPOCHNANOSECONDS);\n    return ES.ToBigIntExternal(ES.BigIntFloorDiv(value, THOUSAND));\n  }\n  get epochNanoseconds(): Return['epochNanoseconds'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToBigIntExternal(GetSlot(this, EPOCHNANOSECONDS));\n  }\n  get dayOfWeek(): Return['dayOfWeek'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfWeek(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get dayOfYear(): Return['dayOfYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDayOfYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get weekOfYear(): Return['weekOfYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarWeekOfYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get yearOfWeek(): Return['yearOfWeek'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarYearOfWeek(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get hoursInDay(): Return['hoursInDay'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const dt = dateTime(this);\n    const DateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const year = GetSlot(dt, ISO_YEAR);\n    const month = GetSlot(dt, ISO_MONTH);\n    const day = GetSlot(dt, ISO_DAY);\n    const today = new DateTime(year, month, day, 0, 0, 0, 0, 0, 0);\n    const tomorrowFields = ES.AddISODate(year, month, day, 0, 0, 0, 1, 'reject');\n    const tomorrow = new DateTime(tomorrowFields.year, tomorrowFields.month, tomorrowFields.day, 0, 0, 0, 0, 0, 0);\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const todayNs = GetSlot(ES.GetInstantFor(timeZone, today, 'compatible'), EPOCHNANOSECONDS);\n    const tomorrowNs = GetSlot(ES.GetInstantFor(timeZone, tomorrow, 'compatible'), EPOCHNANOSECONDS);\n    const diffNs = JSBI.subtract(tomorrowNs, todayNs);\n    return ES.BigIntDivideToNumber(diffNs, HOUR_NANOS);\n  }\n  get daysInWeek(): Return['daysInWeek'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInWeek(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get daysInMonth(): Return['daysInMonth'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInMonth(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get daysInYear(): Return['daysInYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarDaysInYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get monthsInYear(): Return['monthsInYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarMonthsInYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get inLeapYear(): Return['inLeapYear'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.CalendarInLeapYear(GetSlot(this, CALENDAR), dateTime(this));\n  }\n  get offset(): Return['offset'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.GetOffsetStringFor(GetSlot(this, TIME_ZONE), GetSlot(this, INSTANT));\n  }\n  get offsetNanoseconds(): Return['offsetNanoseconds'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.GetOffsetNanosecondsFor(GetSlot(this, TIME_ZONE), GetSlot(this, INSTANT));\n  }\n  with(temporalZonedDateTimeLike: Params['with'][0], optionsParam: Params['with'][1] = undefined): Return['with'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    if (!ES.IsObject(temporalZonedDateTimeLike)) {\n      throw new TypeError('invalid zoned-date-time-like');\n    }\n    ES.RejectTemporalLikeObject(temporalZonedDateTimeLike);\n    const options = ES.GetOptionsObject(optionsParam);\n\n    const calendar = GetSlot(this, CALENDAR);\n    let fieldNames: (keyof Temporal.ZonedDateTimeLike)[] = ES.CalendarFields(calendar, [\n      'day',\n      'hour',\n      'microsecond',\n      'millisecond',\n      'minute',\n      'month',\n      'monthCode',\n      'nanosecond',\n      'second',\n      'year'\n    ] as const);\n    fieldNames.push('offset');\n    let fields = ES.PrepareTemporalFields(this, fieldNames, ['offset']);\n    const partialZonedDateTime = ES.PrepareTemporalFields(temporalZonedDateTimeLike, fieldNames, 'partial');\n    fields = ES.CalendarMergeFields(calendar, fields, partialZonedDateTime);\n    fields = ES.PrepareTemporalFields(fields, fieldNames, ['offset']);\n\n    const disambiguation = ES.ToTemporalDisambiguation(options);\n    const offset = ES.ToTemporalOffset(options, 'prefer');\n\n    let { year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } =\n      ES.InterpretTemporalDateTimeFields(calendar, fields, options);\n    const offsetNs = ES.ParseTimeZoneOffsetString(fields.offset);\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const epochNanoseconds = ES.InterpretISODateTimeOffset(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      'option',\n      offsetNs,\n      timeZone,\n      disambiguation,\n      offset,\n      /* matchMinute = */ false\n    );\n\n    return ES.CreateTemporalZonedDateTime(epochNanoseconds, timeZone, calendar);\n  }\n  withPlainDate(temporalDateParam: Params['withPlainDate'][0]): Return['withPlainDate'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n\n    const temporalDate = ES.ToTemporalDate(temporalDateParam);\n\n    const year = GetSlot(temporalDate, ISO_YEAR);\n    const month = GetSlot(temporalDate, ISO_MONTH);\n    const day = GetSlot(temporalDate, ISO_DAY);\n    let calendar = GetSlot(temporalDate, CALENDAR);\n    const thisDt = dateTime(this);\n    const hour = GetSlot(thisDt, ISO_HOUR);\n    const minute = GetSlot(thisDt, ISO_MINUTE);\n    const second = GetSlot(thisDt, ISO_SECOND);\n    const millisecond = GetSlot(thisDt, ISO_MILLISECOND);\n    const microsecond = GetSlot(thisDt, ISO_MICROSECOND);\n    const nanosecond = GetSlot(thisDt, ISO_NANOSECOND);\n\n    calendar = ES.ConsolidateCalendars(GetSlot(this, CALENDAR), calendar);\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const PlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const dt = new PlainDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n    const instant = ES.GetInstantFor(timeZone, dt, 'compatible');\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  withPlainTime(temporalTimeParam: Params['withPlainTime'][0] = undefined): Return['withPlainTime'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n\n    const PlainTime = GetIntrinsic('%Temporal.PlainTime%');\n    const temporalTime = temporalTimeParam === undefined ? new PlainTime() : ES.ToTemporalTime(temporalTimeParam);\n\n    const thisDt = dateTime(this);\n    const year = GetSlot(thisDt, ISO_YEAR);\n    const month = GetSlot(thisDt, ISO_MONTH);\n    const day = GetSlot(thisDt, ISO_DAY);\n    const calendar = GetSlot(this, CALENDAR);\n    const hour = GetSlot(temporalTime, ISO_HOUR);\n    const minute = GetSlot(temporalTime, ISO_MINUTE);\n    const second = GetSlot(temporalTime, ISO_SECOND);\n    const millisecond = GetSlot(temporalTime, ISO_MILLISECOND);\n    const microsecond = GetSlot(temporalTime, ISO_MICROSECOND);\n    const nanosecond = GetSlot(temporalTime, ISO_NANOSECOND);\n\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const PlainDateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const dt = new PlainDateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      calendar\n    );\n    const instant = ES.GetInstantFor(timeZone, dt, 'compatible');\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  withTimeZone(timeZoneParam: Params['withTimeZone'][0]): Return['withTimeZone'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const timeZone = ES.ToTemporalTimeZoneSlotValue(timeZoneParam);\n    return ES.CreateTemporalZonedDateTime(GetSlot(this, EPOCHNANOSECONDS), timeZone, GetSlot(this, CALENDAR));\n  }\n  withCalendar(calendarParam: Params['withCalendar'][0]): Return['withCalendar'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = ES.ToTemporalCalendarSlotValue(calendarParam);\n    return ES.CreateTemporalZonedDateTime(GetSlot(this, EPOCHNANOSECONDS), GetSlot(this, TIME_ZONE), calendar);\n  }\n  add(temporalDurationLike: Params['add'][0], options: Params['add'][1] = undefined): Return['add'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromZonedDateTime('add', this, temporalDurationLike, options);\n  }\n  subtract(\n    temporalDurationLike: Params['subtract'][0],\n    options: Params['subtract'][1] = undefined\n  ): Return['subtract'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.AddDurationToOrSubtractDurationFromZonedDateTime('subtract', this, temporalDurationLike, options);\n  }\n  until(other: Params['until'][0], options: Params['until'][1] = undefined): Return['until'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalZonedDateTime('until', this, other, options);\n  }\n  since(other: Params['since'][0], options: Params['since'][1] = undefined): Return['since'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.DifferenceTemporalZonedDateTime('since', this, other, options);\n  }\n  round(roundToParam: Params['round'][0]): Return['round'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    if (roundToParam === undefined) throw new TypeError('options parameter is required');\n    const roundTo =\n      typeof roundToParam === 'string'\n        ? (ES.CreateOnePropObject('smallestUnit', roundToParam) as Exclude<typeof roundToParam, string>)\n        : ES.GetOptionsObject(roundToParam);\n    const roundingIncrement = ES.ToTemporalRoundingIncrement(roundTo);\n    const roundingMode = ES.ToTemporalRoundingMode(roundTo, 'halfExpand');\n    const smallestUnit = ES.GetTemporalUnit(roundTo, 'smallestUnit', 'time', ES.REQUIRED, ['day']);\n    const maximumIncrements = {\n      day: 1,\n      hour: 24,\n      minute: 60,\n      second: 60,\n      millisecond: 1000,\n      microsecond: 1000,\n      nanosecond: 1000\n    };\n    const maximum = maximumIncrements[smallestUnit];\n    const inclusive = maximum === 1;\n    ES.ValidateTemporalRoundingIncrement(roundingIncrement, maximum, inclusive);\n\n    // first, round the underlying DateTime fields\n    const dt = dateTime(this);\n    let year = GetSlot(dt, ISO_YEAR);\n    let month = GetSlot(dt, ISO_MONTH);\n    let day = GetSlot(dt, ISO_DAY);\n    let hour = GetSlot(dt, ISO_HOUR);\n    let minute = GetSlot(dt, ISO_MINUTE);\n    let second = GetSlot(dt, ISO_SECOND);\n    let millisecond = GetSlot(dt, ISO_MILLISECOND);\n    let microsecond = GetSlot(dt, ISO_MICROSECOND);\n    let nanosecond = GetSlot(dt, ISO_NANOSECOND);\n\n    const DateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const calendar = GetSlot(this, CALENDAR);\n    const dtStart = new DateTime(GetSlot(dt, ISO_YEAR), GetSlot(dt, ISO_MONTH), GetSlot(dt, ISO_DAY), 0, 0, 0, 0, 0, 0);\n    const instantStart = ES.GetInstantFor(timeZone, dtStart, 'compatible');\n    const endNs = ES.AddZonedDateTime(instantStart, timeZone, calendar, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0);\n    const dayLengthNs = JSBI.subtract(endNs, JSBI.BigInt(GetSlot(instantStart, EPOCHNANOSECONDS)));\n    if (JSBI.lessThanOrEqual(dayLengthNs, ZERO)) {\n      throw new RangeError('cannot round a ZonedDateTime in a calendar with zero or negative length days');\n    }\n    ({ year, month, day, hour, minute, second, millisecond, microsecond, nanosecond } = ES.RoundISODateTime(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      roundingIncrement,\n      smallestUnit,\n      roundingMode,\n      // Days are guaranteed to be shorter than Number.MAX_SAFE_INTEGER\n      // (which can hold up to 104 days in nanoseconds)\n      JSBI.toNumber(dayLengthNs)\n    ));\n\n    // Now reset all DateTime fields but leave the TimeZone. The offset will\n    // also be retained if the new date/time values are still OK with the old\n    // offset. Otherwise the offset will be changed to be compatible with the\n    // new date/time values. If DST disambiguation is required, the `compatible`\n    // disambiguation algorithm will be used.\n    const offsetNs = ES.GetOffsetNanosecondsFor(timeZone, GetSlot(this, INSTANT));\n    const epochNanoseconds = ES.InterpretISODateTimeOffset(\n      year,\n      month,\n      day,\n      hour,\n      minute,\n      second,\n      millisecond,\n      microsecond,\n      nanosecond,\n      'option',\n      offsetNs,\n      timeZone,\n      'compatible',\n      'prefer',\n      /* matchMinute = */ false\n    );\n\n    return ES.CreateTemporalZonedDateTime(epochNanoseconds, timeZone, GetSlot(this, CALENDAR));\n  }\n  equals(otherParam: Params['equals'][0]): Return['equals'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const other = ES.ToTemporalZonedDateTime(otherParam);\n    const one = GetSlot(this, EPOCHNANOSECONDS);\n    const two = GetSlot(other, EPOCHNANOSECONDS);\n    if (!JSBI.equal(JSBI.BigInt(one), JSBI.BigInt(two))) return false;\n    if (!ES.TimeZoneEquals(GetSlot(this, TIME_ZONE), GetSlot(other, TIME_ZONE))) return false;\n    return ES.CalendarEquals(GetSlot(this, CALENDAR), GetSlot(other, CALENDAR));\n  }\n  toString(optionsParam: Params['toString'][0] = undefined): string {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n    const showCalendar = ES.ToCalendarNameOption(options);\n    const digits = ES.ToFractionalSecondDigits(options);\n    const showOffset = ES.ToShowOffsetOption(options);\n    const roundingMode = ES.ToTemporalRoundingMode(options, 'trunc');\n    const smallestUnit = ES.GetTemporalUnit(options, 'smallestUnit', 'time', undefined);\n    if (smallestUnit === 'hour') throw new RangeError('smallestUnit must be a time unit other than \"hour\"');\n    const showTimeZone = ES.ToTimeZoneNameOption(options);\n    const { precision, unit, increment } = ES.ToSecondsStringPrecisionRecord(smallestUnit, digits);\n    return ES.TemporalZonedDateTimeToString(this, precision, showCalendar, showTimeZone, showOffset, {\n      unit,\n      increment,\n      roundingMode\n    });\n  }\n  toLocaleString(\n    locales: Params['toLocaleString'][0] = undefined,\n    optionsParam: Params['toLocaleString'][1] = undefined\n  ): string {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const options = ES.GetOptionsObject(optionsParam);\n\n    const optionsCopy = ObjectCreate(null);\n    // This is not quite per specification, but this polyfill's DateTimeFormat\n    // already doesn't match the InitializeDateTimeFormat operation, and the\n    // access order might change anyway;\n    // see https://github.com/tc39/ecma402/issues/747\n    ES.CopyDataProperties(optionsCopy, options, ['timeZone']);\n\n    if (options.timeZone !== undefined) {\n      throw new TypeError('ZonedDateTime toLocaleString does not accept a timeZone option');\n    }\n\n    if (\n      optionsCopy.year === undefined &&\n      optionsCopy.month === undefined &&\n      optionsCopy.day === undefined &&\n      optionsCopy.weekday === undefined &&\n      optionsCopy.dateStyle === undefined &&\n      optionsCopy.hour === undefined &&\n      optionsCopy.minute === undefined &&\n      optionsCopy.second === undefined &&\n      optionsCopy.timeStyle === undefined &&\n      optionsCopy.dayPeriod === undefined &&\n      optionsCopy.timeZoneName === undefined\n    ) {\n      optionsCopy.timeZoneName = 'short';\n      // The rest of the defaults will be filled in by formatting the Instant\n    }\n\n    let timeZone = ES.ToTemporalTimeZoneIdentifier(GetSlot(this, TIME_ZONE));\n    if (ES.IsTimeZoneOffsetString(timeZone)) {\n      // Note: https://github.com/tc39/ecma402/issues/683 will remove this\n      throw new RangeError('toLocaleString does not support offset string time zones');\n    }\n    timeZone = ES.GetCanonicalTimeZoneIdentifier(timeZone);\n    optionsCopy.timeZone = timeZone;\n\n    const formatter = new DateTimeFormat(locales, optionsCopy);\n\n    const localeCalendarIdentifier = ES.Call(customResolvedOptions, formatter, []).calendar;\n    const calendarIdentifier = ES.ToTemporalCalendarIdentifier(GetSlot(this, CALENDAR));\n    if (\n      calendarIdentifier !== 'iso8601' &&\n      localeCalendarIdentifier !== 'iso8601' &&\n      localeCalendarIdentifier !== calendarIdentifier\n    ) {\n      throw new RangeError(\n        `cannot format ZonedDateTime with calendar ${calendarIdentifier}` +\n          ` in locale with calendar ${localeCalendarIdentifier}`\n      );\n    }\n\n    return formatter.format(GetSlot(this, INSTANT));\n  }\n  toJSON(): Return['toJSON'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalZonedDateTimeToString(this, 'auto');\n  }\n  valueOf(): never {\n    throw new TypeError('use compare() or equals() to compare Temporal.ZonedDateTime');\n  }\n  startOfDay(): Return['startOfDay'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const dt = dateTime(this);\n    const DateTime = GetIntrinsic('%Temporal.PlainDateTime%');\n    const calendar = GetSlot(this, CALENDAR);\n    const dtStart = new DateTime(\n      GetSlot(dt, ISO_YEAR),\n      GetSlot(dt, ISO_MONTH),\n      GetSlot(dt, ISO_DAY),\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      calendar\n    );\n    const timeZone = GetSlot(this, TIME_ZONE);\n    const instant = ES.GetInstantFor(timeZone, dtStart, 'compatible');\n    return ES.CreateTemporalZonedDateTime(GetSlot(instant, EPOCHNANOSECONDS), timeZone, calendar);\n  }\n  toInstant(): Return['toInstant'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const TemporalInstant = GetIntrinsic('%Temporal.Instant%');\n    return new TemporalInstant(GetSlot(this, EPOCHNANOSECONDS));\n  }\n  toPlainDate(): Return['toPlainDate'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateTimeToDate(dateTime(this));\n  }\n  toPlainTime(): Return['toPlainTime'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.TemporalDateTimeToTime(dateTime(this));\n  }\n  toPlainDateTime(): Return['toPlainDateTime'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return dateTime(this);\n  }\n  toPlainYearMonth(): Return['toPlainYearMonth'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['monthCode', 'year'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarYearMonthFromFields(calendar, fields);\n  }\n  toPlainMonthDay(): Return['toPlainMonthDay'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const calendar = GetSlot(this, CALENDAR);\n    const fieldNames = ES.CalendarFields(calendar, ['day', 'monthCode'] as const);\n    const fields = ES.PrepareTemporalFields(this, fieldNames, []);\n    return ES.CalendarMonthDayFromFields(calendar, fields);\n  }\n  getISOFields(): Return['getISOFields'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    const dt = dateTime(this);\n    const tz = GetSlot(this, TIME_ZONE);\n    return {\n      calendar: GetSlot(this, CALENDAR),\n      isoDay: GetSlot(dt, ISO_DAY),\n      isoHour: GetSlot(dt, ISO_HOUR),\n      isoMicrosecond: GetSlot(dt, ISO_MICROSECOND),\n      isoMillisecond: GetSlot(dt, ISO_MILLISECOND),\n      isoMinute: GetSlot(dt, ISO_MINUTE),\n      isoMonth: GetSlot(dt, ISO_MONTH),\n      isoNanosecond: GetSlot(dt, ISO_NANOSECOND),\n      isoSecond: GetSlot(dt, ISO_SECOND),\n      isoYear: GetSlot(dt, ISO_YEAR),\n      offset: ES.GetOffsetStringFor(tz, GetSlot(this, INSTANT)),\n      timeZone: tz\n    };\n  }\n  getCalendar(): Return['getCalendar'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalCalendarObject(GetSlot(this, CALENDAR));\n  }\n  getTimeZone(): Return['getTimeZone'] {\n    if (!ES.IsTemporalZonedDateTime(this)) throw new TypeError('invalid receiver');\n    return ES.ToTemporalTimeZoneObject(GetSlot(this, TIME_ZONE));\n  }\n\n  static from(item: Params['from'][0], optionsParam: Params['from'][1] = undefined): Return['from'] {\n    const options = ES.GetOptionsObject(optionsParam);\n    if (ES.IsTemporalZonedDateTime(item)) {\n      ES.ToTemporalDisambiguation(options); // validate and ignore\n      ES.ToTemporalOffset(options, 'reject');\n      ES.ToTemporalOverflow(options);\n      return ES.CreateTemporalZonedDateTime(\n        GetSlot(item, EPOCHNANOSECONDS),\n        GetSlot(item, TIME_ZONE),\n        GetSlot(item, CALENDAR)\n      );\n    }\n    return ES.ToTemporalZonedDateTime(item, options);\n  }\n  static compare(oneParam: Params['compare'][0], twoParam: Params['compare'][1]): Return['compare'] {\n    const one = ES.ToTemporalZonedDateTime(oneParam);\n    const two = ES.ToTemporalZonedDateTime(twoParam);\n    const ns1 = GetSlot(one, EPOCHNANOSECONDS);\n    const ns2 = GetSlot(two, EPOCHNANOSECONDS);\n    if (JSBI.lessThan(JSBI.BigInt(ns1), JSBI.BigInt(ns2))) return -1;\n    if (JSBI.greaterThan(JSBI.BigInt(ns1), JSBI.BigInt(ns2))) return 1;\n    return 0;\n  }\n  [Symbol.toStringTag]!: 'Temporal.ZonedDateTime';\n}\n\nMakeIntrinsicClass(ZonedDateTime, 'Temporal.ZonedDateTime');\n\nfunction dateTime(zdt: Temporal.ZonedDateTime) {\n  return ES.GetPlainDateTimeFor(GetSlot(zdt, TIME_ZONE), GetSlot(zdt, INSTANT), GetSlot(zdt, CALENDAR));\n}\n", "import { Instant } from './instant';\n\nimport JSBI from 'jsbi';\nimport { MILLION } from './ecmascript';\n\nexport function toTemporalInstant(this: Date) {\n  // Observable access to valueOf is not correct here, but unavoidable\n  const epochNanoseconds = JSBI.multiply(JSBI.BigInt(+this), MILLION);\n  return new Instant(epochNanoseconds);\n}\n", "// This entry point treats Temporal as a library, and does not polyfill it onto\n// the global object.\n// This is in order to avoid breaking the web in the future, if the polyfill\n// gains wide adoption before the API is finalized. We do not want checks such\n// as `if (typeof Temporal === 'undefined')` in the wild, until browsers start\n// shipping the finalized API.\n\nimport * as Temporal from './temporal';\nimport * as Intl from './intl';\nimport { toTemporalInstant } from './legacydate';\n\n// Work around https://github.com/babel/babel/issues/2025.\nconst types = [\n  Temporal.Instant,\n  Temporal.Calendar,\n  Temporal.PlainDate,\n  Temporal.PlainDateTime,\n  Temporal.Duration,\n  Temporal.PlainMonthDay,\n  // Temporal.Now, // plain object (not a constructor), so no `prototype`\n  Temporal.PlainTime,\n  Temporal.TimeZone,\n  Temporal.PlainYearMonth,\n  Temporal.ZonedDateTime\n];\nfor (const type of types) {\n  const descriptor = Object.getOwnPropertyDescriptor(type, 'prototype') as PropertyDescriptor;\n  if (descriptor.configurable || descriptor.enumerable || descriptor.writable) {\n    descriptor.configurable = false;\n    descriptor.enumerable = false;\n    descriptor.writable = false;\n    Object.defineProperty(type, 'prototype', descriptor);\n  }\n}\n\nexport { Temporal, Intl, toTemporalInstant };\n", "import { Hasher, Value, Options } from './types/types';\nimport { compact, NodeObject } from 'jsonld';\nimport { Merkletree, Hash, Proof } from '@iden3/js-merkletree';\nimport { RDFDataset } from './rdf-dataset';\nimport { DEFAULT_HASHER } from './poseidon';\nimport { addEntriesToMerkleTree, getMerkleTreeInitParam } from './merkle-tree';\nimport { RDFEntry } from './rdf-entry';\nimport { Path } from './path';\nimport { MtValue } from './mt-value';\nimport { convertAnyToString, convertStringToXsdValue } from './utils';\nimport { getDocumentLoader, getHasher } from './options';\n\nexport class Merklizer {\n  constructor(\n    public readonly srcDoc: string | null = null,\n    public readonly mt: Merkletree | null = null,\n    public readonly hasher: Hasher = DEFAULT_HASHER,\n    public readonly entries: Map<string, RDFEntry> = new Map(),\n    public compacted: NodeObject | null = null\n  ) {\n    if (!mt) {\n      const { db, writable, maxLevels } = getMerkleTreeInitParam();\n      this.mt = new Merkletree(db, writable, maxLevels);\n    }\n  }\n\n  async proof(p: Path): Promise<{ proof: Proof; value?: MtValue }> {\n    const kHash = await p.mtEntry();\n    const { proof } = await this.mt.generateProof(kHash);\n\n    if (proof.existence) {\n      if (!this.entries.has(kHash.toString())) {\n        throw new Error('error: [assertion] no entry found while existence is true');\n      }\n      const entry = this.entries.get(kHash.toString());\n\n      const value = new MtValue(entry.value, this.hasher);\n      return { proof, value };\n    }\n\n    return { proof };\n  }\n\n  mkValue(val: Value): MtValue {\n    return new MtValue(val, this.hasher);\n  }\n\n  async resolveDocPath(path: string): Promise<Path> {\n    const realPath = await Path.fromDocument(null, this.srcDoc, path);\n    realPath.hasher = this.hasher;\n    return realPath;\n  }\n\n  private async entry(path: Path): Promise<RDFEntry> {\n    const key = await path.mtEntry();\n    const e = this.entries.get(key.toString());\n    if (!e) {\n      throw new Error('entry not found');\n    }\n\n    return e;\n  }\n\n  // JSONLDType returns the JSON-LD type of the given path. If there is no literal\n  // by this path, it returns an error.\n  async jsonLDType(path: Path): Promise<string> {\n    const entry = await this.entry(path);\n    return entry.dataType;\n  }\n\n  async root(): Promise<Hash> {\n    return this.mt.root();\n  }\n\n  rawValue(path: Path): Value {\n    let parts = path.parts;\n    let obj: unknown = this.compacted;\n    const traversedParts: string[] = [];\n    const currentPath = (): string => traversedParts.join(' / ');\n\n    while (parts.length > 0) {\n      const p = parts[0];\n      if (typeof p === 'string') {\n        traversedParts.push(p);\n        obj = obj[p] ?? obj['@graph'][p];\n        if (!obj) {\n          throw new Error('value not found');\n        }\n      } else if (typeof p === 'number') {\n        traversedParts.push(p.toString());\n        obj = this.rvExtractArrayIdx(obj, p);\n      } else {\n        throw new Error(`unexpected type of path ${currentPath()}`);\n      }\n      parts = parts.slice(1);\n    }\n\n    if (typeof obj['@value'] !== 'undefined') {\n      return obj['@value'];\n    }\n\n    return obj as Value;\n  }\n\n  private rvExtractArrayIdx(obj: unknown, idx: number): unknown {\n    const isArray = Array.isArray(obj);\n    if (!isArray) {\n      throw new Error('expected array');\n    }\n    if (idx < 0 || idx >= obj.length) {\n      throw new Error('index is out of range');\n    }\n    return obj[idx];\n  }\n\n  static async merklizeJSONLD(docStr: string, opts?: Options): Promise<Merklizer> {\n    const hasher = getHasher(opts);\n    const mz = new Merklizer(docStr, null, hasher);\n    const doc = JSON.parse(mz.srcDoc);\n    const documentLoader = getDocumentLoader(opts);\n    const dataset = await RDFDataset.fromDocument(doc, documentLoader);\n    const entries = await RDFEntry.fromDataSet(dataset, hasher);\n\n    for (const e of entries) {\n      const k = await e.getKeyMtEntry();\n      mz.entries.set(k.toString(), e);\n    }\n\n    await addEntriesToMerkleTree(mz.mt, entries);\n\n    mz.compacted = await compact(\n      doc,\n      {},\n      { documentLoader, base: null, compactArrays: true, compactToRelative: true }\n    );\n\n    return mz;\n  }\n\n  static async hashValue(dataType: string, value: unknown): Promise<bigint> {\n    return this.hashValueWithHasher(DEFAULT_HASHER, dataType, value);\n  }\n\n  private static async hashValueWithHasher(\n    h: Hasher,\n    dataType: string,\n    value: unknown\n  ): Promise<bigint> {\n    const valueStr = convertAnyToString(value, dataType);\n\n    const xsdValue = convertStringToXsdValue(dataType, valueStr);\n\n    return await MtValue.mkValueMtEntry(h, xsdValue);\n  }\n}\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic \u2013 if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n", null, null, null, null, null, null, null, null, null, null, "export {};\n//# sourceMappingURL=hash.js.map", "export {};\n//# sourceMappingURL=node.js.map", "export {};\n//# sourceMappingURL=bytes.js.map", "export {};\n//# sourceMappingURL=storage.js.map", "export {};\n//# sourceMappingURL=merkletree.js.map", "import { MerklizationConstants } from './constants';\nimport { Quad, Parser } from 'n3';\nimport { canonize, JsonLdDocument } from 'jsonld';\nimport { DocumentLoader } from '../loaders/jsonld-loader';\nimport { DatasetIdx } from './dataset-idx';\nimport { getGraphName } from './utils';\nimport { RefTp } from './ref-tp';\nimport { NodeType } from './types/types';\nimport { getDocumentLoader } from './options';\n\nexport class RDFDataset {\n  constructor(public readonly graphs: Map<string, Quad[]> = new Map()) {}\n  // assert consistency of dataset and validate that only\n  // quads we support contains in dataset.\n  static assertDatasetConsistency = (ds: RDFDataset): void => {\n    for (const [graph, quads] of ds.graphs) {\n      for (const q of quads) {\n        if (!graph) {\n          throw new Error('empty graph name');\n        }\n        if (graph === MerklizationConstants.DEFAULT_GRAPH_NODE_NAME && q.graph.id) {\n          throw new Error('graph should be nil for @default graph');\n        }\n        if (!q.graph.id && graph !== MerklizationConstants.DEFAULT_GRAPH_NODE_NAME) {\n          throw new Error('graph should not be nil for non-@default graph');\n        }\n      }\n    }\n  };\n\n  static async fromDocument(\n    doc: JsonLdDocument,\n    documentLoader: DocumentLoader = getDocumentLoader()\n  ): Promise<RDFDataset> {\n    const normalizedData = await canonize(doc, {\n      format: MerklizationConstants.QUADS_FORMAT,\n      documentLoader\n    });\n    const parser = new Parser({ format: MerklizationConstants.QUADS_FORMAT });\n\n    const quads: Quad[] = parser.parse(normalizedData);\n    const ds = new RDFDataset();\n    for (const q of quads) {\n      const graphName =\n        q.graph.termType === MerklizationConstants.DEFAULT_GRAPH_TERM_TYPE\n          ? MerklizationConstants.DEFAULT_GRAPH_NODE_NAME\n          : q.graph.value;\n      const graphQuads = ds.graphs.get(graphName) ?? [];\n      graphQuads.push(q);\n      ds.graphs.set(graphName, graphQuads);\n    }\n\n    return ds;\n  }\n\n  static getQuad(ds: RDFDataset, idx: DatasetIdx): Quad {\n    const quads = ds.graphs.get(idx.graphName);\n    if (!quads) {\n      throw MerklizationConstants.ERRORS.GRAPH_NOT_FOUND;\n    }\n    if (idx.idx >= quads.length) {\n      throw MerklizationConstants.ERRORS.QUAD_NOT_FOUND;\n    }\n    return quads[idx.idx];\n  }\n\n  static iterGraphsOrdered(ds: RDFDataset, callback: (graphName: string, quads: Quad[]) => void) {\n    const graphNames: string[] = [];\n    for (const graphName of ds.graphs.keys()) {\n      graphNames.push(graphName);\n    }\n    graphNames.sort((a, b) => a.localeCompare(b));\n\n    for (const graphName of graphNames) {\n      const quads = ds.graphs.get(graphName);\n\n      callback(graphName, quads);\n    }\n  }\n\n  static findParent(ds: RDFDataset, q: Quad): DatasetIdx | undefined {\n    const parent = RDFDataset.findParentInsideGraph(ds, q);\n    if (parent) {\n      return parent;\n    }\n\n    return RDFDataset.findGraphParent(ds, q);\n  }\n\n  static findParentInsideGraph(ds: RDFDataset, q: Quad): DatasetIdx | undefined {\n    const graphName = getGraphName(q);\n    let result: DatasetIdx | undefined;\n    const quads = ds.graphs.get(graphName);\n    if (!quads) {\n      return undefined;\n    }\n\n    const qKey = RefTp.getRefFromQuad(q.subject);\n    if (qKey.tp === NodeType.Undefined) {\n      return undefined;\n    }\n    let found = false;\n    // var result datasetIdx\n    for (let idx = 0; idx < quads.length; idx++) {\n      const quad = quads[idx];\n      if (quad.equals(q)) {\n        continue;\n      }\n\n      const objKey = RefTp.getRefFromQuad(quad.object);\n      if (objKey.tp === NodeType.Undefined) {\n        continue;\n      }\n\n      if (qKey?.tp === objKey?.tp && qKey?.val === objKey?.val) {\n        if (found) {\n          throw MerklizationConstants.ERRORS.MULTIPLE_PARENTS_FOUND;\n        }\n        found = true;\n        result = new DatasetIdx(graphName, idx);\n      }\n    }\n    return result;\n  }\n\n  static findGraphParent(ds: RDFDataset, q: Quad): DatasetIdx | undefined {\n    if (!q.graph) {\n      return undefined;\n    }\n\n    const qKey = RefTp.getRefFromQuad(q.graph);\n    if (qKey.tp === NodeType.Undefined) {\n      return undefined;\n    }\n    if (qKey.tp !== NodeType.BlankNode) {\n      throw new Error('graph parent can only be a blank node');\n    }\n\n    let found = false;\n    let result: DatasetIdx;\n    for (const [graphName, quads] of ds.graphs) {\n      for (let idx = 0; idx < quads.length; idx++) {\n        const quad = quads[idx];\n\n        if (quad.equals(q)) {\n          continue;\n        }\n\n        const objKey = RefTp.getRefFromQuad(quad.object);\n        if (objKey.tp === NodeType.Undefined) {\n          continue;\n        }\n\n        if (qKey.toString() == objKey.toString()) {\n          if (found) {\n            throw MerklizationConstants.ERRORS.MULTIPLE_PARENTS_FOUND;\n          }\n          found = true;\n          result = new DatasetIdx(graphName, idx);\n        }\n      }\n    }\n\n    if (found) {\n      return result;\n    } else {\n      throw MerklizationConstants.ERRORS.PARENT_NOT_FOUND;\n    }\n  }\n}\n", "import Lexer from './N3Lexer';\nimport Parser from './N3Parser';\nimport Writer from './N3Writer';\nimport Store from './N3Store';\nimport StreamParser from './N3StreamParser';\nimport StreamWriter from './N3StreamWriter';\nimport * as Util from './N3Util';\n\nimport {\n  default as DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n} from './N3DataFactory';\n\n// Named exports\nexport {\n  Lexer,\n  Parser,\n  Writer,\n  Store,\n  StreamParser,\n  StreamWriter,\n  Util,\n\n  DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n};\n\n// Export all named exports as a default object for backward compatibility\nexport default {\n  Lexer,\n  Parser,\n  Writer,\n  Store,\n  StreamParser,\n  StreamWriter,\n  Util,\n\n  DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n};\n", "// **N3Lexer** tokenizes N3 documents.\nimport namespaces from './IRIs';\nimport queueMicrotask from 'queue-microtask';\n\nconst { xsd } = namespaces;\n\n// Regular expression and replacement string to escape N3 strings\nconst escapeSequence = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{8})|\\\\([^])/g;\nconst escapeReplacements = {\n  '\\\\': '\\\\', \"'\": \"'\", '\"': '\"',\n  'n': '\\n', 'r': '\\r', 't': '\\t', 'f': '\\f', 'b': '\\b',\n  '_': '_', '~': '~', '.': '.', '-': '-', '!': '!', '$': '$', '&': '&',\n  '(': '(', ')': ')', '*': '*', '+': '+', ',': ',', ';': ';', '=': '=',\n  '/': '/', '?': '?', '#': '#', '@': '@', '%': '%',\n};\nconst illegalIriChars = /[\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]/;\n\nconst lineModeRegExps = {\n  _iri: true,\n  _unescapedIri: true,\n  _simpleQuotedString: true,\n  _langcode: true,\n  _blank: true,\n  _newline: true,\n  _comment: true,\n  _whitespace: true,\n  _endOfFile: true,\n};\nconst invalidRegExp = /$0^/;\n\n// ## Constructor\nexport default class N3Lexer {\n  constructor(options) {\n    // ## Regular expressions\n    // It's slightly faster to have these as properties than as in-scope variables\n    this._iri = /^<((?:[^ <>{}\\\\]|\\\\[uU])+)>[ \\t]*/; // IRI with escape sequences; needs sanity check after unescaping\n    this._unescapedIri = /^<([^\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]*)>[ \\t]*/; // IRI without escape sequences; no unescaping\n    this._simpleQuotedString = /^\"([^\"\\\\\\r\\n]*)\"(?=[^\"])/; // string without escape sequences\n    this._simpleApostropheString = /^'([^'\\\\\\r\\n]*)'(?=[^'])/;\n    this._langcode = /^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\\-])/i;\n    this._prefix = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:(?=[#\\s<])/;\n    this._prefixed = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:((?:(?:[0-:A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])(?:(?:[\\.\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])*(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~]))?)?)(?:[ \\t]+|(?=\\.?[,;!\\^\\s#()\\[\\]\\{\\}\"'<>]))/;\n    this._variable = /^\\?(?:(?:[A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?=[.,;!\\^\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._blank = /^_:((?:[0-9A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?:[ \\t]+|(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<>]))/;\n    this._number = /^[\\-+]?(?:(\\d+\\.\\d*|\\.?\\d+)[eE][\\-+]?|\\d*(\\.)?)\\d+(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._boolean = /^(?:true|false)(?=[.,;\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._keyword = /^@[a-z]+(?=[\\s#<:])/i;\n    this._sparqlKeyword = /^(?:PREFIX|BASE|GRAPH)(?=[\\s#<])/i;\n    this._shortPredicates = /^a(?=[\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._newline = /^[ \\t]*(?:#[^\\n\\r]*)?(?:\\r\\n|\\n|\\r)[ \\t]*/;\n    this._comment = /#([^\\n\\r]*)/;\n    this._whitespace = /^[ \\t]+/;\n    this._endOfFile = /^(?:#[^\\n\\r]*)?$/;\n    options = options || {};\n\n    // In line mode (N-Triples or N-Quads), only simple features may be parsed\n    if (this._lineMode = !!options.lineMode) {\n      this._n3Mode = false;\n      // Don't tokenize special literals\n      for (const key in this) {\n        if (!(key in lineModeRegExps) && this[key] instanceof RegExp)\n          this[key] = invalidRegExp;\n      }\n    }\n    // When not in line mode, enable N3 functionality by default\n    else {\n      this._n3Mode = options.n3 !== false;\n    }\n    // Don't output comment tokens by default\n    this._comments = !!options.comments;\n    // Cache the last tested closing position of long literals\n    this._literalClosingPos = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_tokenizeToEnd` tokenizes as for as possible, emitting tokens through the callback\n  _tokenizeToEnd(callback, inputFinished) {\n    // Continue parsing as far as possible; the loop will return eventually\n    let input = this._input;\n    let currentLineLength = input.length;\n    while (true) {\n      // Count and skip whitespace lines\n      let whiteSpaceMatch, comment;\n      while (whiteSpaceMatch = this._newline.exec(input)) {\n        // Try to find a comment\n        if (this._comments && (comment = this._comment.exec(whiteSpaceMatch[0])))\n          emitToken('comment', comment[1], '', this._line, whiteSpaceMatch[0].length);\n        // Advance the input\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n        currentLineLength = input.length;\n        this._line++;\n      }\n      // Skip whitespace on current line\n      if (!whiteSpaceMatch && (whiteSpaceMatch = this._whitespace.exec(input)))\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n\n      // Stop for now if we're at the end\n      if (this._endOfFile.test(input)) {\n        // If the input is finished, emit EOF\n        if (inputFinished) {\n          // Try to find a final comment\n          if (this._comments && (comment = this._comment.exec(input)))\n            emitToken('comment', comment[1], '', this._line, input.length);\n          input = null;\n          emitToken('eof', '', '', this._line, 0);\n        }\n        return this._input = input;\n      }\n\n      // Look for specific token types based on the first character\n      const line = this._line, firstChar = input[0];\n      let type = '', value = '', prefix = '',\n          match = null, matchLength = 0, inconclusive = false;\n      switch (firstChar) {\n      case '^':\n        // We need at least 3 tokens lookahead to distinguish ^^<IRI> and ^^pre:fixed\n        if (input.length < 3)\n          break;\n        // Try to match a type\n        else if (input[1] === '^') {\n          this._previousMarker = '^^';\n          // Move to type IRI or prefixed name\n          input = input.substr(2);\n          if (input[0] !== '<') {\n            inconclusive = true;\n            break;\n          }\n        }\n        // If no type, it must be a path expression\n        else {\n          if (this._n3Mode) {\n            matchLength = 1;\n            type = '^';\n          }\n          break;\n        }\n        // Fall through in case the type is an IRI\n      case '<':\n        // Try to find a full IRI without escape sequences\n        if (match = this._unescapedIri.exec(input))\n          type = 'IRI', value = match[1];\n        // Try to find a full IRI with escape sequences\n        else if (match = this._iri.exec(input)) {\n          value = this._unescape(match[1]);\n          if (value === null || illegalIriChars.test(value))\n            return reportSyntaxError(this);\n          type = 'IRI';\n        }\n        // Try to find a nested triple\n        else if (input.length > 1 && input[1] === '<')\n          type = '<<', matchLength = 2;\n        // Try to find a backwards implication arrow\n        else if (this._n3Mode && input.length > 1 && input[1] === '=')\n          type = 'inverse', matchLength = 2, value = '>';\n        break;\n\n      case '>':\n        if (input.length > 1 && input[1] === '>')\n          type = '>>', matchLength = 2;\n        break;\n\n      case '_':\n        // Try to find a blank node. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a blank node.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if ((match = this._blank.exec(input)) ||\n            inputFinished && (match = this._blank.exec(`${input} `)))\n          type = 'blank', prefix = '_', value = match[1];\n        break;\n\n      case '\"':\n        // Try to find a literal without escape sequences\n        if (match = this._simpleQuotedString.exec(input))\n          value = match[1];\n        // Try to find a literal wrapped in three pairs of quotes\n        else {\n          ({ value, matchLength } = this._parseLiteral(input));\n          if (value === null)\n            return reportSyntaxError(this);\n        }\n        if (match !== null || matchLength !== 0) {\n          type = 'literal';\n          this._literalClosingPos = 0;\n        }\n        break;\n\n      case \"'\":\n        if (!this._lineMode) {\n          // Try to find a literal without escape sequences\n          if (match = this._simpleApostropheString.exec(input))\n            value = match[1];\n          // Try to find a literal wrapped in three pairs of quotes\n          else {\n            ({ value, matchLength } = this._parseLiteral(input));\n            if (value === null)\n              return reportSyntaxError(this);\n          }\n          if (match !== null || matchLength !== 0) {\n            type = 'literal';\n            this._literalClosingPos = 0;\n          }\n        }\n        break;\n\n      case '?':\n        // Try to find a variable\n        if (this._n3Mode && (match = this._variable.exec(input)))\n          type = 'var', value = match[0];\n        break;\n\n      case '@':\n        // Try to find a language code\n        if (this._previousMarker === 'literal' && (match = this._langcode.exec(input)))\n          type = 'langcode', value = match[1];\n        // Try to find a keyword\n        else if (match = this._keyword.exec(input))\n          type = match[0];\n        break;\n\n      case '.':\n        // Try to find a dot as punctuation\n        if (input.length === 1 ? inputFinished : (input[1] < '0' || input[1] > '9')) {\n          type = '.';\n          matchLength = 1;\n          break;\n        }\n        // Fall through to numerical case (could be a decimal dot)\n\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n      case '+':\n      case '-':\n        // Try to find a number. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a number.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if (match = this._number.exec(input) ||\n            inputFinished && (match = this._number.exec(`${input} `))) {\n          type = 'literal', value = match[0];\n          prefix = (typeof match[1] === 'string' ? xsd.double :\n                    (typeof match[2] === 'string' ? xsd.decimal : xsd.integer));\n        }\n        break;\n\n      case 'B':\n      case 'b':\n      case 'p':\n      case 'P':\n      case 'G':\n      case 'g':\n        // Try to find a SPARQL-style keyword\n        if (match = this._sparqlKeyword.exec(input))\n          type = match[0].toUpperCase();\n        else\n          inconclusive = true;\n        break;\n\n      case 'f':\n      case 't':\n        // Try to match a boolean\n        if (match = this._boolean.exec(input))\n          type = 'literal', value = match[0], prefix = xsd.boolean;\n        else\n          inconclusive = true;\n        break;\n\n      case 'a':\n        // Try to find an abbreviated predicate\n        if (match = this._shortPredicates.exec(input))\n          type = 'abbreviation', value = 'a';\n        else\n          inconclusive = true;\n        break;\n\n      case '=':\n        // Try to find an implication arrow or equals sign\n        if (this._n3Mode && input.length > 1) {\n          type = 'abbreviation';\n          if (input[1] !== '>')\n            matchLength = 1, value = '=';\n          else\n            matchLength = 2, value = '>';\n        }\n        break;\n\n      case '!':\n        if (!this._n3Mode)\n          break;\n      case ',':\n      case ';':\n      case '[':\n      case ']':\n      case '(':\n      case ')':\n      case '}':\n        if (!this._lineMode) {\n          matchLength = 1;\n          type = firstChar;\n        }\n        break;\n      case '{':\n        // We need at least 2 tokens lookahead to distinguish \"{|\" and \"{ \"\n        if (!this._lineMode && input.length >= 2) {\n          // Try to find a quoted triple annotation start\n          if (input[1] === '|')\n            type = '{|', matchLength = 2;\n          else\n            type = firstChar, matchLength = 1;\n        }\n        break;\n      case '|':\n        // We need 2 tokens lookahead to parse \"|}\"\n        // Try to find a quoted triple annotation end\n        if (input.length >= 2 && input[1] === '}')\n          type = '|}', matchLength = 2;\n        break;\n\n      default:\n        inconclusive = true;\n      }\n\n      // Some first characters do not allow an immediate decision, so inspect more\n      if (inconclusive) {\n        // Try to find a prefix\n        if ((this._previousMarker === '@prefix' || this._previousMarker === 'PREFIX') &&\n            (match = this._prefix.exec(input)))\n          type = 'prefix', value = match[1] || '';\n        // Try to find a prefixed name. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a prefixed name.\n        // Therefore, try inserting a space if we're at the end of the input.\n        else if ((match = this._prefixed.exec(input)) ||\n                 inputFinished && (match = this._prefixed.exec(`${input} `)))\n          type = 'prefixed', prefix = match[1] || '', value = this._unescape(match[2]);\n      }\n\n      // A type token is special: it can only be emitted after an IRI or prefixed name is read\n      if (this._previousMarker === '^^') {\n        switch (type) {\n        case 'prefixed': type = 'type';    break;\n        case 'IRI':      type = 'typeIRI'; break;\n        default:         type = '';\n        }\n      }\n\n      // What if nothing of the above was found?\n      if (!type) {\n        // We could be in streaming mode, and then we just wait for more input to arrive.\n        // Otherwise, a syntax error has occurred in the input.\n        // One exception: error on an unaccounted linebreak (= not inside a triple-quoted literal).\n        if (inputFinished || (!/^'''|^\"\"\"/.test(input) && /\\n|\\r/.test(input)))\n          return reportSyntaxError(this);\n        else\n          return this._input = input;\n      }\n\n      // Emit the parsed token\n      const length = matchLength || match[0].length;\n      const token = emitToken(type, value, prefix, line, length);\n      this.previousToken = token;\n      this._previousMarker = type;\n\n      // Advance to next part to tokenize\n      input = input.substr(length, input.length);\n    }\n\n    // Emits the token through the callback\n    function emitToken(type, value, prefix, line, length) {\n      const start = input ? currentLineLength - input.length : currentLineLength;\n      const end = start + length;\n      const token = { type, value, prefix, line, start, end };\n      callback(null, token);\n      return token;\n    }\n    // Signals the syntax error through the callback\n    function reportSyntaxError(self) { callback(self._syntaxError(/^\\S*/.exec(input)[0])); }\n  }\n\n  // ### `_unescape` replaces N3 escape codes by their corresponding characters\n  _unescape(item) {\n    let invalid = false;\n    const replaced = item.replace(escapeSequence, (sequence, unicode4, unicode8, escapedChar) => {\n      // 4-digit unicode character\n      if (typeof unicode4 === 'string')\n        return String.fromCharCode(Number.parseInt(unicode4, 16));\n      // 8-digit unicode character\n      if (typeof unicode8 === 'string') {\n        let charCode = Number.parseInt(unicode8, 16);\n        return charCode <= 0xFFFF ? String.fromCharCode(Number.parseInt(unicode8, 16)) :\n          String.fromCharCode(0xD800 + ((charCode -= 0x10000) >> 10), 0xDC00 + (charCode & 0x3FF));\n      }\n      // fixed escape sequence\n      if (escapedChar in escapeReplacements)\n        return escapeReplacements[escapedChar];\n      // invalid escape sequence\n      invalid = true;\n      return '';\n    });\n    return invalid ? null : replaced;\n  }\n\n  // ### `_parseLiteral` parses a literal into an unescaped value\n  _parseLiteral(input) {\n    // Ensure we have enough lookahead to identify triple-quoted strings\n    if (input.length >= 3) {\n      // Identify the opening quote(s)\n      const opening = input.match(/^(?:\"\"\"|\"|'''|'|)/)[0];\n      const openingLength = opening.length;\n\n      // Find the next candidate closing quotes\n      let closingPos = Math.max(this._literalClosingPos, openingLength);\n      while ((closingPos = input.indexOf(opening, closingPos)) > 0) {\n        // Count backslashes right before the closing quotes\n        let backslashCount = 0;\n        while (input[closingPos - backslashCount - 1] === '\\\\')\n          backslashCount++;\n\n        // An even number of backslashes (in particular 0)\n        // means these are actual, non-escaped closing quotes\n        if (backslashCount % 2 === 0) {\n          // Extract and unescape the value\n          const raw = input.substring(openingLength, closingPos);\n          const lines = raw.split(/\\r\\n|\\r|\\n/).length - 1;\n          const matchLength = closingPos + openingLength;\n          // Only triple-quoted strings can be multi-line\n          if (openingLength === 1 && lines !== 0 ||\n              openingLength === 3 && this._lineMode)\n            break;\n          this._line += lines;\n          return { value: this._unescape(raw), matchLength };\n        }\n        closingPos++;\n      }\n      this._literalClosingPos = input.length - openingLength + 1;\n    }\n    return { value: '', matchLength: 0 };\n  }\n\n  // ### `_syntaxError` creates a syntax error for the given issue\n  _syntaxError(issue) {\n    this._input = null;\n    const err = new Error(`Unexpected \"${issue}\" on line ${this._line}.`);\n    err.context = {\n      token: undefined,\n      line: this._line,\n      previousToken: this.previousToken,\n    };\n    return err;\n  }\n\n  // ### Strips off any starting UTF BOM mark.\n  _readStartingBom(input) {\n    return input.startsWith('\\ufeff') ? input.substr(1) : input;\n  }\n\n  // ## Public methods\n\n  // ### `tokenize` starts the transformation of an N3 document into an array of tokens.\n  // The input can be a string or a stream.\n  tokenize(input, callback) {\n    this._line = 1;\n\n    // If the input is a string, continuously emit tokens through the callback until the end\n    if (typeof input === 'string') {\n      this._input = this._readStartingBom(input);\n      // If a callback was passed, asynchronously call it\n      if (typeof callback === 'function')\n        queueMicrotask(() => this._tokenizeToEnd(callback, true));\n      // If no callback was passed, tokenize synchronously and return\n      else {\n        const tokens = [];\n        let error;\n        this._tokenizeToEnd((e, t) => e ? (error = e) : tokens.push(t), true);\n        if (error) throw error;\n        return tokens;\n      }\n    }\n    // Otherwise, the input must be a stream\n    else {\n      this._pendingBuffer = null;\n      if (typeof input.setEncoding === 'function')\n        input.setEncoding('utf8');\n      // Adds the data chunk to the buffer and parses as far as possible\n      input.on('data', data => {\n        if (this._input !== null && data.length !== 0) {\n          // Prepend any previous pending writes\n          if (this._pendingBuffer) {\n            data = Buffer.concat([this._pendingBuffer, data]);\n            this._pendingBuffer = null;\n          }\n          // Hold if the buffer ends in an incomplete unicode sequence\n          if (data[data.length - 1] & 0x80) {\n            this._pendingBuffer = data;\n          }\n          // Otherwise, tokenize as far as possible\n          else {\n            // Only read a BOM at the start\n            if (typeof this._input === 'undefined')\n              this._input = this._readStartingBom(typeof data === 'string' ? data : data.toString());\n            else\n              this._input += data;\n            this._tokenizeToEnd(callback, false);\n          }\n        }\n      });\n      // Parses until the end\n      input.on('end', () => {\n        if (typeof this._input === 'string')\n          this._tokenizeToEnd(callback, true);\n      });\n      input.on('error', callback);\n    }\n  }\n}\n", "const RDF  = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    XSD  = 'http://www.w3.org/2001/XMLSchema#',\n    SWAP = 'http://www.w3.org/2000/10/swap/';\n\nexport default {\n  xsd: {\n    decimal: `${XSD}decimal`,\n    boolean: `${XSD}boolean`,\n    double:  `${XSD}double`,\n    integer: `${XSD}integer`,\n    string:  `${XSD}string`,\n  },\n  rdf: {\n    type:       `${RDF}type`,\n    nil:        `${RDF}nil`,\n    first:      `${RDF}first`,\n    rest:       `${RDF}rest`,\n    langString: `${RDF}langString`,\n  },\n  owl: {\n    sameAs: 'http://www.w3.org/2002/07/owl#sameAs',\n  },\n  r: {\n    forSome: `${SWAP}reify#forSome`,\n    forAll:  `${SWAP}reify#forAll`,\n  },\n  log: {\n    implies: `${SWAP}log#implies`,\n  },\n};\n", "// **N3Parser** parses N3 documents.\nimport N3Lexer from './N3Lexer';\nimport N3DataFactory from './N3DataFactory';\nimport namespaces from './IRIs';\n\nlet blankNodePrefix = 0;\n\n// ## Constructor\nexport default class N3Parser {\n  constructor(options) {\n    this._contextStack = [];\n    this._graph = null;\n\n    // Set the document IRI\n    options = options || {};\n    this._setBase(options.baseIRI);\n    options.factory && initDataFactory(this, options.factory);\n\n    // Set supported features depending on the format\n    const format = (typeof options.format === 'string') ?\n                 options.format.match(/\\w*$/)[0].toLowerCase() : '',\n        isTurtle = /turtle/.test(format), isTriG = /trig/.test(format),\n        isNTriples = /triple/.test(format), isNQuads = /quad/.test(format),\n        isN3 = this._n3Mode = /n3/.test(format),\n        isLineMode = isNTriples || isNQuads;\n    if (!(this._supportsNamedGraphs = !(isTurtle || isN3)))\n      this._readPredicateOrNamedGraph = this._readPredicate;\n    // Support triples in other graphs\n    this._supportsQuads = !(isTurtle || isTriG || isNTriples || isN3);\n    // Support nesting of triples\n    this._supportsRDFStar = format === '' || /star|\\*$/.test(format);\n    // Disable relative IRIs in N-Triples or N-Quads mode\n    if (isLineMode)\n      this._resolveRelativeIRI = iri => { return null; };\n    this._blankNodePrefix = typeof options.blankNodePrefix !== 'string' ? '' :\n                              options.blankNodePrefix.replace(/^(?!_:)/, '_:');\n    this._lexer = options.lexer || new N3Lexer({ lineMode: isLineMode, n3: isN3 });\n    // Disable explicit quantifiers by default\n    this._explicitQuantifiers = !!options.explicitQuantifiers;\n  }\n\n  // ## Static class methods\n\n  // ### `_resetBlankNodePrefix` restarts blank node prefix identification\n  static _resetBlankNodePrefix() {\n    blankNodePrefix = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_setBase` sets the base IRI to resolve relative IRIs\n  _setBase(baseIRI) {\n    if (!baseIRI) {\n      this._base = '';\n      this._basePath = '';\n    }\n    else {\n      // Remove fragment if present\n      const fragmentPos = baseIRI.indexOf('#');\n      if (fragmentPos >= 0)\n        baseIRI = baseIRI.substr(0, fragmentPos);\n      // Set base IRI and its components\n      this._base = baseIRI;\n      this._basePath   = baseIRI.indexOf('/') < 0 ? baseIRI :\n                         baseIRI.replace(/[^\\/?]*(?:\\?.*)?$/, '');\n      baseIRI = baseIRI.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\\/\\/[^\\/]*)?/i);\n      this._baseRoot   = baseIRI[0];\n      this._baseScheme = baseIRI[1];\n    }\n  }\n\n  // ### `_saveContext` stores the current parsing context\n  // when entering a new scope (list, blank node, formula)\n  _saveContext(type, graph, subject, predicate, object) {\n    const n3Mode = this._n3Mode;\n    this._contextStack.push({\n      type,\n      subject, predicate, object, graph,\n      inverse: n3Mode ? this._inversePredicate : false,\n      blankPrefix: n3Mode ? this._prefixes._ : '',\n      quantified: n3Mode ? this._quantified : null,\n    });\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      // Every new scope resets the predicate direction\n      this._inversePredicate = false;\n      // In N3, blank nodes are scoped to a formula\n      // (using a dot as separator, as a blank node label cannot start with it)\n      this._prefixes._ = (this._graph ? `${this._graph.value}.` : '.');\n      // Quantifiers are scoped to a formula\n      this._quantified = Object.create(this._quantified);\n    }\n  }\n\n  // ### `_restoreContext` restores the parent context\n  // when leaving a scope (list, blank node, formula)\n  _restoreContext(type, token) {\n    // Obtain the previous context\n    const context = this._contextStack.pop();\n    if (!context || context.type !== type)\n      return this._error(`Unexpected ${token.type}`, token);\n\n    // Restore the quad of the previous context\n    this._subject   = context.subject;\n    this._predicate = context.predicate;\n    this._object    = context.object;\n    this._graph     = context.graph;\n\n    // Restore N3 context settings\n    if (this._n3Mode) {\n      this._inversePredicate = context.inverse;\n      this._prefixes._ = context.blankPrefix;\n      this._quantified = context.quantified;\n    }\n  }\n\n  // ### `_readInTopContext` reads a token when in the top context\n  _readInTopContext(token) {\n    switch (token.type) {\n    // If an EOF token arrives in the top context, signal that we're done\n    case 'eof':\n      if (this._graph !== null)\n        return this._error('Unclosed graph', token);\n      delete this._prefixes._;\n      return this._callback(null, null, this._prefixes);\n    // It could be a prefix declaration\n    case 'PREFIX':\n      this._sparqlStyle = true;\n    case '@prefix':\n      return this._readPrefix;\n    // It could be a base declaration\n    case 'BASE':\n      this._sparqlStyle = true;\n    case '@base':\n      return this._readBaseIRI;\n    // It could be a graph\n    case '{':\n      if (this._supportsNamedGraphs) {\n        this._graph = '';\n        this._subject = null;\n        return this._readSubject;\n      }\n    case 'GRAPH':\n      if (this._supportsNamedGraphs)\n        return this._readNamedGraphLabel;\n    // Otherwise, the next token must be a subject\n    default:\n      return this._readSubject(token);\n    }\n  }\n\n  // ### `_readEntity` reads an IRI, prefixed name, blank node, or variable\n  _readEntity(token, quantifier) {\n    let value;\n    switch (token.type) {\n    // Read a relative or absolute IRI\n    case 'IRI':\n    case 'typeIRI':\n      const iri = this._resolveIRI(token.value);\n      if (iri === null)\n        return this._error('Invalid IRI', token);\n      value = this._namedNode(iri);\n      break;\n    // Read a prefixed name\n    case 'type':\n    case 'prefixed':\n      const prefix = this._prefixes[token.prefix];\n      if (prefix === undefined)\n        return this._error(`Undefined prefix \"${token.prefix}:\"`, token);\n      value = this._namedNode(prefix + token.value);\n      break;\n    // Read a blank node\n    case 'blank':\n      value = this._blankNode(this._prefixes[token.prefix] + token.value);\n      break;\n    // Read a variable\n    case 'var':\n      value = this._variable(token.value.substr(1));\n      break;\n    // Everything else is not an entity\n    default:\n      return this._error(`Expected entity but got ${token.type}`, token);\n    }\n    // In N3 mode, replace the entity if it is quantified\n    if (!quantifier && this._n3Mode && (value.id in this._quantified))\n      value = this._quantified[value.id];\n    return value;\n  }\n\n  // ### `_readSubject` reads a quad's subject\n  _readSubject(token) {\n    this._predicate = null;\n    switch (token.type) {\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph,\n                        this._subject = this._blankNode(), null, null);\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this.RDF_NIL, null, null);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph,\n                        this._graph = this._blankNode(), null, null);\n      return this._readSubject;\n    case '}':\n       // No subject; the graph in which we are reading is closed instead\n      return this._readPunctuation(token);\n    case '@forSome':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forSome\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORSOME;\n      this._quantifier = this._blankNode;\n      return this._readQuantifierList;\n    case '@forAll':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forAll\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORALL;\n      this._quantifier = this._variable;\n      return this._readQuantifierList;\n    case 'literal':\n      if (!this._n3Mode)\n        return this._error('Unexpected literal', token);\n\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._completeSubjectLiteral;\n      }\n      else\n        this._subject = this._literal(token.value, this._namedNode(token.prefix));\n\n      break;\n    case '<<':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      this._saveContext('<<', this._graph, null, null, null);\n      this._graph = null;\n      return this._readSubject;\n    default:\n      // Read the subject entity\n      if ((this._subject = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the subject might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._readPredicateOrNamedGraph);\n    }\n\n    // The next token must be a predicate,\n    // or, if the subject was actually a graph IRI, a named graph\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // ### `_readPredicate` reads a quad's predicate\n  _readPredicate(token) {\n    const type = token.type;\n    switch (type) {\n    case 'inverse':\n      this._inversePredicate = true;\n    case 'abbreviation':\n      this._predicate = this.ABBREVIATIONS[token.value];\n      break;\n    case '.':\n    case ']':\n    case '}':\n      // Expected predicate didn't come, must have been trailing semicolon\n      if (this._predicate === null)\n        return this._error(`Unexpected ${type}`, token);\n      this._subject = null;\n      return type === ']' ? this._readBlankNodeTail(token) : this._readPunctuation(token);\n    case ';':\n      // Additional semicolons can be safely ignored\n      return this._predicate !== null ? this._readPredicate :\n             this._error('Expected predicate but got ;', token);\n    case '[':\n      if (this._n3Mode) {\n        // Start a new quad with a new blank node as subject\n        this._saveContext('blank', this._graph, this._subject,\n                          this._subject = this._blankNode(), null);\n        return this._readBlankNodeHead;\n      }\n    case 'blank':\n      if (!this._n3Mode)\n        return this._error('Disallowed blank node as predicate', token);\n    default:\n      if ((this._predicate = this._readEntity(token)) === undefined)\n        return;\n    }\n    // The next token must be an object\n    return this._readObject;\n  }\n\n  // ### `_readObject` reads a quad's object\n  _readObject(token) {\n    switch (token.type) {\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._readDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else\n        this._object = this._literal(token.value, this._namedNode(token.prefix));\n      break;\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph, this._subject, this._predicate,\n                        this._subject = this._blankNode());\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this._subject, this._predicate, this.RDF_NIL);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    case '<<':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      this._saveContext('<<', this._graph, this._subject, this._predicate, null);\n      this._graph = null;\n      return this._readSubject;\n    default:\n      // Read the object entity\n      if ((this._object = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the object might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._getContextEndReader());\n    }\n    return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateOrNamedGraph` reads a quad's predicate, or a named graph\n  _readPredicateOrNamedGraph(token) {\n    return token.type === '{' ? this._readGraph(token) : this._readPredicate(token);\n  }\n\n  // ### `_readGraph` reads a graph\n  _readGraph(token) {\n    if (token.type !== '{')\n      return this._error(`Expected graph but got ${token.type}`, token);\n    // The \"subject\" we read is actually the GRAPH's label\n    this._graph = this._subject, this._subject = null;\n    return this._readSubject;\n  }\n\n  // ### `_readBlankNodeHead` reads the head of a blank node\n  _readBlankNodeHead(token) {\n    if (token.type === ']') {\n      this._subject = null;\n      return this._readBlankNodeTail(token);\n    }\n    else {\n      this._predicate = null;\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readBlankNodeTail` reads the end of a blank node\n  _readBlankNodeTail(token) {\n    if (token.type !== ']')\n      return this._readBlankNodePunctuation(token);\n\n    // Store blank node quad\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this blank node\n    const empty = this._predicate === null;\n    this._restoreContext('blank', token);\n    // If the blank node was the object, restore previous context and read punctuation\n    if (this._object !== null)\n      return this._getContextEndReader();\n    // If the blank node was the predicate, continue reading the object\n    else if (this._predicate !== null)\n      return this._readObject;\n    // If the blank node was the subject, continue reading the predicate\n    else\n      // If the blank node was empty, it could be a named graph label\n      return empty ? this._readPredicateOrNamedGraph : this._readPredicateAfterBlank;\n  }\n\n  // ### `_readPredicateAfterBlank` reads a predicate after an anonymous blank node\n  _readPredicateAfterBlank(token) {\n    switch (token.type) {\n    case '.':\n    case '}':\n      // No predicate is coming if the triple is terminated here\n      this._subject = null;\n      return this._readPunctuation(token);\n    default:\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readListItem` reads items from a list\n  _readListItem(token) {\n    let item = null,                      // The item of the list\n        list = null,                      // The list itself\n        next = this._readListItem;        // The next function to execute\n    const previousList = this._subject,   // The previous list that contains this list\n        stack = this._contextStack,       // The stack of parent contexts\n        parent = stack[stack.length - 1]; // The parent containing the current list\n\n    switch (token.type) {\n    case '[':\n      // Stack the current list quad and start a new quad with a blank node as subject\n      this._saveContext('blank', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST,\n                        this._subject = item = this._blankNode());\n      next = this._readBlankNodeHead;\n      break;\n    case '(':\n      // Stack the current list quad and start a new list\n      this._saveContext('list', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST, this.RDF_NIL);\n      this._subject = null;\n      break;\n    case ')':\n      // Closing the list; restore the parent context\n      this._restoreContext('list', token);\n      // If this list is contained within a parent list, return the membership quad here.\n      // This will be `<parent list element> rdf:first <this list>.`.\n      if (stack.length !== 0 && stack[stack.length - 1].type === 'list')\n        this._emit(this._subject, this._predicate, this._object, this._graph);\n      // Was this list the parent's subject?\n      if (this._predicate === null) {\n        // The next token is the predicate\n        next = this._readPredicate;\n        // No list tail if this was an empty list\n        if (this._subject === this.RDF_NIL)\n          return next;\n      }\n      // The list was in the parent context's object\n      else {\n        next = this._getContextEndReader();\n        // No list tail if this was an empty list\n        if (this._object === this.RDF_NIL)\n          return next;\n      }\n      // Close the list by making the head nil\n      list = this.RDF_NIL;\n      break;\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        next = this._readListItemDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else {\n        item = this._literal(token.value, this._namedNode(token.prefix));\n        next = this._getContextEndReader();\n      }\n      break;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    default:\n      if ((item = this._readEntity(token)) === undefined)\n        return;\n    }\n\n     // Create a new blank node if no item head was assigned yet\n    if (list === null)\n      this._subject = list = this._blankNode();\n\n    // Is this the first element of the list?\n    if (previousList === null) {\n      // This list is either the subject or the object of its parent\n      if (parent.predicate === null)\n        parent.subject = list;\n      else\n        parent.object = list;\n    }\n    else {\n      // Continue the previous list with the current list\n      this._emit(previousList, this.RDF_REST, list, this._graph);\n    }\n    // If an item was read, add it to the list\n    if (item !== null) {\n      // In N3 mode, the item might be a path\n      if (this._n3Mode && (token.type === 'IRI' || token.type === 'prefixed')) {\n        // Create a new context to add the item's path\n        this._saveContext('item', this._graph, list, this.RDF_FIRST, item);\n        this._subject = item, this._predicate = null;\n        // _readPath will restore the context and output the item\n        return this._getPathReader(this._readListItem);\n      }\n      // Output the item\n      this._emit(list, this.RDF_FIRST, item, this._graph);\n    }\n    return next;\n  }\n\n  // ### `_readDataTypeOrLang` reads an _optional_ datatype or language\n  _readDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, false);\n  }\n\n\n  // ### `_readListItemDataTypeOrLang` reads an _optional_ datatype or language in a list\n  _readListItemDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, true);\n  }\n\n  // ### `_completeLiteral` completes a literal with an optional datatype or language\n  _completeLiteral(token) {\n    // Create a simple string literal by default\n    let literal = this._literal(this._literalValue);\n\n    switch (token.type) {\n    // Create a datatyped literal\n    case 'type':\n    case 'typeIRI':\n      const datatype = this._readEntity(token);\n      if (datatype === undefined) return; // No datatype means an error occurred\n      literal = this._literal(this._literalValue, datatype);\n      token = null;\n      break;\n    // Create a language-tagged string\n    case 'langcode':\n      literal = this._literal(this._literalValue, token.value);\n      token = null;\n      break;\n    }\n\n    return { token, literal };\n  }\n\n  // Completes a literal in subject position\n  _completeSubjectLiteral(token) {\n    this._subject = this._completeLiteral(token).literal;\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // Completes a literal in object position\n  _completeObjectLiteral(token, listItem) {\n    const completed = this._completeLiteral(token);\n    if (!completed)\n      return;\n    this._object = completed.literal;\n\n    // If this literal was part of a list, write the item\n    // (we could also check the context stack, but passing in a flag is faster)\n    if (listItem)\n      this._emit(this._subject, this.RDF_FIRST, this._object, this._graph);\n    // If the token was consumed, continue with the rest of the input\n    if (completed.token === null)\n      return this._getContextEndReader();\n    // Otherwise, consume the token now\n    else {\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(completed.token);\n    }\n  }\n\n  // ### `_readFormulaTail` reads the end of a formula\n  _readFormulaTail(token) {\n    if (token.type !== '}')\n      return this._readPunctuation(token);\n\n    // Store the last quad of the formula\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this formula\n    this._restoreContext('formula', token);\n    // If the formula was the subject, continue reading the predicate.\n    // If the formula was the object, read punctuation.\n    return this._object === null ? this._readPredicate : this._getContextEndReader();\n  }\n\n  // ### `_readPunctuation` reads punctuation between quads or quad parts\n  _readPunctuation(token) {\n    let next, graph = this._graph;\n    const subject = this._subject, inversePredicate = this._inversePredicate;\n    switch (token.type) {\n    // A closing brace ends a graph\n    case '}':\n      if (this._graph === null)\n        return this._error('Unexpected graph closing', token);\n      if (this._n3Mode)\n        return this._readFormulaTail(token);\n      this._graph = null;\n    // A dot just ends the statement, without sharing anything with the next\n    case '.':\n      this._subject = null;\n      next = this._contextStack.length ? this._readSubject : this._readInTopContext;\n      if (inversePredicate) this._inversePredicate = false;\n      break;\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    // {| means that the current triple is annotated with predicate-object pairs.\n    case '{|':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      // Continue using the last triple as quoted triple subject for the predicate-object pairs.\n      const predicate = this._predicate, object = this._object;\n      this._subject = this._quad(subject, predicate, object, this.DEFAULTGRAPH);\n      next = this._readPredicate;\n      break;\n    // |} means that the current quoted triple in annotation syntax is finalized.\n    case '|}':\n      if (this._subject.termType !== 'Quad')\n        return this._error('Unexpected asserted triple closing', token);\n      this._subject = null;\n      next = this._readPunctuation;\n      break;\n    default:\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (graph = this._readEntity(token)) !== undefined) {\n        next = this._readQuadPunctuation;\n        break;\n      }\n      return this._error(`Expected punctuation to follow \"${this._object.id}\"`, token);\n    }\n    // A quad has been completed now, so return it\n    if (subject !== null) {\n      const predicate = this._predicate, object = this._object;\n      if (!inversePredicate)\n        this._emit(subject, predicate, object,  graph);\n      else\n        this._emit(object,  predicate, subject, graph);\n    }\n    return next;\n  }\n\n    // ### `_readBlankNodePunctuation` reads punctuation in a blank node\n  _readBlankNodePunctuation(token) {\n    let next;\n    switch (token.type) {\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      return this._error(`Expected punctuation to follow \"${this._object.id}\"`, token);\n    }\n    // A quad has been completed now, so return it\n    this._emit(this._subject, this._predicate, this._object, this._graph);\n    return next;\n  }\n\n  // ### `_readQuadPunctuation` reads punctuation after a quad\n  _readQuadPunctuation(token) {\n    if (token.type !== '.')\n      return this._error('Expected dot to follow quad', token);\n    return this._readInTopContext;\n  }\n\n  // ### `_readPrefix` reads the prefix of a prefix declaration\n  _readPrefix(token) {\n    if (token.type !== 'prefix')\n      return this._error('Expected prefix to follow @prefix', token);\n    this._prefix = token.value;\n    return this._readPrefixIRI;\n  }\n\n  // ### `_readPrefixIRI` reads the IRI of a prefix declaration\n  _readPrefixIRI(token) {\n    if (token.type !== 'IRI')\n      return this._error(`Expected IRI to follow prefix \"${this._prefix}:\"`, token);\n    const prefixNode = this._readEntity(token);\n    this._prefixes[this._prefix] = prefixNode.value;\n    this._prefixCallback(this._prefix, prefixNode);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readBaseIRI` reads the IRI of a base declaration\n  _readBaseIRI(token) {\n    const iri = token.type === 'IRI' && this._resolveIRI(token.value);\n    if (!iri)\n      return this._error('Expected valid IRI to follow base declaration', token);\n    this._setBase(iri);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readNamedGraphLabel` reads the label of a named graph\n  _readNamedGraphLabel(token) {\n    switch (token.type) {\n    case 'IRI':\n    case 'blank':\n    case 'prefixed':\n      return this._readSubject(token), this._readGraph;\n    case '[':\n      return this._readNamedGraphBlankLabel;\n    default:\n      return this._error('Invalid graph label', token);\n    }\n  }\n\n  // ### `_readNamedGraphLabel` reads a blank node label of a named graph\n  _readNamedGraphBlankLabel(token) {\n    if (token.type !== ']')\n      return this._error('Invalid graph label', token);\n    this._subject = this._blankNode();\n    return this._readGraph;\n  }\n\n  // ### `_readDeclarationPunctuation` reads the punctuation of a declaration\n  _readDeclarationPunctuation(token) {\n    // SPARQL-style declarations don't have punctuation\n    if (this._sparqlStyle) {\n      this._sparqlStyle = false;\n      return this._readInTopContext(token);\n    }\n\n    if (token.type !== '.')\n      return this._error('Expected declaration to end with a dot', token);\n    return this._readInTopContext;\n  }\n\n  // Reads a list of quantified symbols from a @forSome or @forAll statement\n  _readQuantifierList(token) {\n    let entity;\n    switch (token.type) {\n    case 'IRI':\n    case 'prefixed':\n      if ((entity = this._readEntity(token, true)) !== undefined)\n        break;\n    default:\n      return this._error(`Unexpected ${token.type}`, token);\n    }\n    // Without explicit quantifiers, map entities to a quantified entity\n    if (!this._explicitQuantifiers)\n      this._quantified[entity.id] = this._quantifier(this._blankNode().value);\n    // With explicit quantifiers, output the reified quantifier\n    else {\n      // If this is the first item, start a new quantifier list\n      if (this._subject === null)\n        this._emit(this._graph || this.DEFAULTGRAPH, this._predicate,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Otherwise, continue the previous list\n      else\n        this._emit(this._subject, this.RDF_REST,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Output the list item\n      this._emit(this._subject, this.RDF_FIRST, entity, this.QUANTIFIERS_GRAPH);\n    }\n    return this._readQuantifierPunctuation;\n  }\n\n  // Reads punctuation from a @forSome or @forAll statement\n  _readQuantifierPunctuation(token) {\n    // Read more quantifiers\n    if (token.type === ',')\n      return this._readQuantifierList;\n    // End of the quantifier list\n    else {\n      // With explicit quantifiers, close the quantifier list\n      if (this._explicitQuantifiers) {\n        this._emit(this._subject, this.RDF_REST, this.RDF_NIL, this.QUANTIFIERS_GRAPH);\n        this._subject = null;\n      }\n      // Read a dot\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(token);\n    }\n  }\n\n  // ### `_getPathReader` reads a potential path and then resumes with the given function\n  _getPathReader(afterPath) {\n    this._afterPath = afterPath;\n    return this._readPath;\n  }\n\n  // ### `_readPath` reads a potential path\n  _readPath(token) {\n    switch (token.type) {\n    // Forward path\n    case '!': return this._readForwardPath;\n    // Backward path\n    case '^': return this._readBackwardPath;\n    // Not a path; resume reading where we left off\n    default:\n      const stack = this._contextStack, parent = stack.length && stack[stack.length - 1];\n      // If we were reading a list item, we still need to output it\n      if (parent && parent.type === 'item') {\n        // The list item is the remaining subejct after reading the path\n        const item = this._subject;\n        // Switch back to the context of the list\n        this._restoreContext('item', token);\n        // Output the list item\n        this._emit(this._subject, this.RDF_FIRST, item, this._graph);\n      }\n      return this._afterPath(token);\n    }\n  }\n\n  // ### `_readForwardPath` reads a '!' path\n  _readForwardPath(token) {\n    let subject, predicate;\n    const object = this._blankNode();\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's object\n    if (this._predicate === null)\n      subject = this._subject, this._subject = object;\n    // If we were reading an object, replace the subject by the path's object\n    else\n      subject = this._object,  this._object  = object;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readBackwardPath` reads a '^' path\n  _readBackwardPath(token) {\n    const subject = this._blankNode();\n    let predicate, object;\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's subject\n    if (this._predicate === null)\n      object = this._subject, this._subject = subject;\n    // If we were reading an object, replace the subject by the path's subject\n    else\n      object = this._object,  this._object  = subject;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readRDFStarTailOrGraph` reads the graph of a nested RDF* quad or the end of a nested RDF* triple\n  _readRDFStarTailOrGraph(token) {\n    if (token.type !== '>>') {\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (this._graph = this._readEntity(token)) !== undefined)\n        return this._readRDFStarTail;\n      return this._error(`Expected >> to follow \"${this._object.id}\"`, token);\n    }\n    return this._readRDFStarTail(token);\n  }\n\n  // ### `_readRDFStarTail` reads the end of a nested RDF* triple\n  _readRDFStarTail(token) {\n    if (token.type !== '>>')\n      return this._error(`Expected >> but got ${token.type}`, token);\n    // Read the quad and restore the previous context\n    const quad = this._quad(this._subject, this._predicate, this._object,\n      this._graph || this.DEFAULTGRAPH);\n    this._restoreContext('<<', token);\n    // If the triple was the subject, continue by reading the predicate.\n    if (this._subject === null) {\n      this._subject = quad;\n      return this._readPredicate;\n    }\n    // If the triple was the object, read context end.\n    else {\n      this._object = quad;\n      return this._getContextEndReader();\n    }\n  }\n\n  // ### `_getContextEndReader` gets the next reader function at the end of a context\n  _getContextEndReader() {\n    const contextStack = this._contextStack;\n    if (!contextStack.length)\n      return this._readPunctuation;\n\n    switch (contextStack[contextStack.length - 1].type) {\n    case 'blank':\n      return this._readBlankNodeTail;\n    case 'list':\n      return this._readListItem;\n    case 'formula':\n      return this._readFormulaTail;\n    case '<<':\n      return this._readRDFStarTailOrGraph;\n    }\n  }\n\n  // ### `_emit` sends a quad through the callback\n  _emit(subject, predicate, object, graph) {\n    this._callback(null, this._quad(subject, predicate, object, graph || this.DEFAULTGRAPH));\n  }\n\n  // ### `_error` emits an error message through the callback\n  _error(message, token) {\n    const err = new Error(`${message} on line ${token.line}.`);\n    err.context = {\n      token: token,\n      line: token.line,\n      previousToken: this._lexer.previousToken,\n    };\n    this._callback(err);\n    this._callback = noop;\n  }\n\n  // ### `_resolveIRI` resolves an IRI against the base path\n  _resolveIRI(iri) {\n    return /^[a-z][a-z0-9+.-]*:/i.test(iri) ? iri : this._resolveRelativeIRI(iri);\n  }\n\n  // ### `_resolveRelativeIRI` resolves an IRI against the base path,\n  // assuming that a base path has been set and that the IRI is indeed relative\n  _resolveRelativeIRI(iri) {\n    // An empty relative IRI indicates the base IRI\n    if (!iri.length)\n      return this._base;\n    // Decide resolving strategy based in the first character\n    switch (iri[0]) {\n    // Resolve relative fragment IRIs against the base IRI\n    case '#': return this._base + iri;\n    // Resolve relative query string IRIs by replacing the query string\n    case '?': return this._base.replace(/(?:\\?.*)?$/, iri);\n    // Resolve root-relative IRIs at the root of the base IRI\n    case '/':\n      // Resolve scheme-relative IRIs to the scheme\n      return (iri[1] === '/' ? this._baseScheme : this._baseRoot) + this._removeDotSegments(iri);\n    // Resolve all other IRIs at the base IRI's path\n    default:\n      // Relative IRIs cannot contain a colon in the first path segment\n      return (/^[^/:]*:/.test(iri)) ? null : this._removeDotSegments(this._basePath + iri);\n    }\n  }\n\n  // ### `_removeDotSegments` resolves './' and '../' path segments in an IRI as per RFC3986\n  _removeDotSegments(iri) {\n    // Don't modify the IRI if it does not contain any dot segments\n    if (!/(^|\\/)\\.\\.?($|[/#?])/.test(iri))\n      return iri;\n\n    // Start with an imaginary slash before the IRI in order to resolve trailing './' and '../'\n    const length = iri.length;\n    let result = '', i = -1, pathStart = -1, segmentStart = 0, next = '/';\n\n    while (i < length) {\n      switch (next) {\n      // The path starts with the first slash after the authority\n      case ':':\n        if (pathStart < 0) {\n          // Skip two slashes before the authority\n          if (iri[++i] === '/' && iri[++i] === '/')\n            // Skip to slash after the authority\n            while ((pathStart = i + 1) < length && iri[pathStart] !== '/')\n              i = pathStart;\n        }\n        break;\n      // Don't modify a query string or fragment\n      case '?':\n      case '#':\n        i = length;\n        break;\n      // Handle '/.' or '/..' path segments\n      case '/':\n        if (iri[i + 1] === '.') {\n          next = iri[++i + 1];\n          switch (next) {\n          // Remove a '/.' segment\n          case '/':\n            result += iri.substring(segmentStart, i - 1);\n            segmentStart = i + 1;\n            break;\n          // Remove a trailing '/.' segment\n          case undefined:\n          case '?':\n          case '#':\n            return result + iri.substring(segmentStart, i) + iri.substr(i + 1);\n          // Remove a '/..' segment\n          case '.':\n            next = iri[++i + 1];\n            if (next === undefined || next === '/' || next === '?' || next === '#') {\n              result += iri.substring(segmentStart, i - 2);\n              // Try to remove the parent path from result\n              if ((segmentStart = result.lastIndexOf('/')) >= pathStart)\n                result = result.substr(0, segmentStart);\n              // Remove a trailing '/..' segment\n              if (next !== '/')\n                return `${result}/${iri.substr(i + 1)}`;\n              segmentStart = i + 1;\n            }\n          }\n        }\n      }\n      next = iri[++i];\n    }\n    return result + iri.substring(segmentStart);\n  }\n\n  // ## Public methods\n\n  // ### `parse` parses the N3 input and emits each parsed quad through the callback\n  parse(input, quadCallback, prefixCallback) {\n    // The read callback is the next function to be executed when a token arrives.\n    // We start reading in the top context.\n    this._readCallback = this._readInTopContext;\n    this._sparqlStyle = false;\n    this._prefixes = Object.create(null);\n    this._prefixes._ = this._blankNodePrefix ? this._blankNodePrefix.substr(2)\n                                             : `b${blankNodePrefix++}_`;\n    this._prefixCallback = prefixCallback || noop;\n    this._inversePredicate = false;\n    this._quantified = Object.create(null);\n\n    // Parse synchronously if no quad callback is given\n    if (!quadCallback) {\n      const quads = [];\n      let error;\n      this._callback = (e, t) => { e ? (error = e) : t && quads.push(t); };\n      this._lexer.tokenize(input).every(token => {\n        return this._readCallback = this._readCallback(token);\n      });\n      if (error) throw error;\n      return quads;\n    }\n\n    // Parse asynchronously otherwise, executing the read callback when a token arrives\n    this._callback = quadCallback;\n    this._lexer.tokenize(input, (error, token) => {\n      if (error !== null)\n        this._callback(error), this._callback = noop;\n      else if (this._readCallback)\n        this._readCallback = this._readCallback(token);\n    });\n  }\n}\n\n// The empty function\nfunction noop() {}\n\n// Initializes the parser with the given data factory\nfunction initDataFactory(parser, factory) {\n  // Set factory methods\n  const namedNode = factory.namedNode;\n  parser._namedNode   = namedNode;\n  parser._blankNode   = factory.blankNode;\n  parser._literal     = factory.literal;\n  parser._variable    = factory.variable;\n  parser._quad        = factory.quad;\n  parser.DEFAULTGRAPH = factory.defaultGraph();\n\n  // Set common named nodes\n  parser.RDF_FIRST  = namedNode(namespaces.rdf.first);\n  parser.RDF_REST   = namedNode(namespaces.rdf.rest);\n  parser.RDF_NIL    = namedNode(namespaces.rdf.nil);\n  parser.N3_FORALL  = namedNode(namespaces.r.forAll);\n  parser.N3_FORSOME = namedNode(namespaces.r.forSome);\n  parser.ABBREVIATIONS = {\n    'a': namedNode(namespaces.rdf.type),\n    '=': namedNode(namespaces.owl.sameAs),\n    '>': namedNode(namespaces.log.implies),\n  };\n  parser.QUANTIFIERS_GRAPH = namedNode('urn:n3:quantifiers');\n}\ninitDataFactory(N3Parser.prototype, N3DataFactory);\n", "// N3.js implementations of the RDF/JS core data types\n// See https://github.com/rdfjs/representation-task-force/blob/master/interface-spec.md\n\nimport namespaces from './IRIs';\nimport { isDefaultGraph } from './N3Util';\nconst { rdf, xsd } = namespaces;\n\n// eslint-disable-next-line prefer-const\nlet DEFAULTGRAPH;\nlet _blankNodeCounter = 0;\n\nconst escapedLiteral = /^\"(.*\".*)(?=\"[^\"]*$)/;\nconst quadId = /^<<(\"(?:\"\"|[^\"])*\"[^ ]*|[^ ]+) (\"(?:\"\"|[^\"])*\"[^ ]*|[^ ]+) (\"(?:\"\"|[^\"])*\"[^ ]*|[^ ]+) ?(\"(?:\"\"|[^\"])*\"[^ ]*|[^ ]+)?>>$/;\n\n// ## DataFactory singleton\nconst DataFactory = {\n  namedNode,\n  blankNode,\n  variable,\n  literal,\n  defaultGraph,\n  quad,\n  triple: quad,\n};\nexport default DataFactory;\n\n// ## Term constructor\nexport class Term {\n  constructor(id) {\n    this.id = id;\n  }\n\n  // ### The value of this term\n  get value() {\n    return this.id;\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Term)\n      return this.id === other.id;\n    // Otherwise, compare term type and value\n    return !!other && this.termType === other.termType &&\n                      this.value    === other.value;\n  }\n\n  // ### Implement hashCode for Immutable.js, since we implement `equals`\n  // https://immutable-js.com/docs/v4.0.0/ValueObject/#hashCode()\n  hashCode() {\n    return 0;\n  }\n\n  // ### Returns a plain object representation of this term\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n    };\n  }\n}\n\n\n// ## NamedNode constructor\nexport class NamedNode extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'NamedNode';\n  }\n}\n\n// ## Literal constructor\nexport class Literal extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'Literal';\n  }\n\n  // ### The text value of this literal\n  get value() {\n    return this.id.substring(1, this.id.lastIndexOf('\"'));\n  }\n\n  // ### The language of this literal\n  get language() {\n    // Find the last quotation mark (e.g., '\"abc\"@en-us')\n    const id = this.id;\n    let atPos = id.lastIndexOf('\"') + 1;\n    // If \"@\" it follows, return the remaining substring; empty otherwise\n    return atPos < id.length && id[atPos++] === '@' ? id.substr(atPos).toLowerCase() : '';\n  }\n\n  // ### The datatype IRI of this literal\n  get datatype() {\n    return new NamedNode(this.datatypeString);\n  }\n\n  // ### The datatype string of this literal\n  get datatypeString() {\n    // Find the last quotation mark (e.g., '\"abc\"^^http://ex.org/types#t')\n    const id = this.id, dtPos = id.lastIndexOf('\"') + 1;\n    const char = dtPos < id.length ? id[dtPos] : '';\n    // If \"^\" it follows, return the remaining substring\n    return char === '^' ? id.substr(dtPos + 2) :\n           // If \"@\" follows, return rdf:langString; xsd:string otherwise\n           (char !== '@' ? xsd.string : rdf.langString);\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both literals were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Literal)\n      return this.id === other.id;\n    // Otherwise, compare term type, value, language, and datatype\n    return !!other && !!other.datatype &&\n                      this.termType === other.termType &&\n                      this.value    === other.value    &&\n                      this.language === other.language &&\n                      this.datatype.value === other.datatype.value;\n  }\n\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n      language: this.language,\n      datatype: { termType: 'NamedNode', value: this.datatypeString },\n    };\n  }\n}\n\n// ## BlankNode constructor\nexport class BlankNode extends Term {\n  constructor(name) {\n    super(`_:${name}`);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'BlankNode';\n  }\n\n  // ### The name of this blank node\n  get value() {\n    return this.id.substr(2);\n  }\n}\n\nexport class Variable extends Term {\n  constructor(name) {\n    super(`?${name}`);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Variable';\n  }\n\n  // ### The name of this variable\n  get value() {\n    return this.id.substr(1);\n  }\n}\n\n// ## DefaultGraph constructor\nexport class DefaultGraph extends Term {\n  constructor() {\n    super('');\n    return DEFAULTGRAPH || this;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'DefaultGraph';\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through strict equality;\n    // otherwise, compare term types.\n    return (this === other) || (!!other && (this.termType === other.termType));\n  }\n}\n\n// ## DefaultGraph singleton\nDEFAULTGRAPH = new DefaultGraph();\n\n\n// ### Constructs a term from the given internal string ID\nexport function termFromId(id, factory) {\n  factory = factory || DataFactory;\n\n  // Falsy value or empty string indicate the default graph\n  if (!id)\n    return factory.defaultGraph();\n\n  // Identify the term type based on the first character\n  switch (id[0]) {\n  case '?':\n    return factory.variable(id.substr(1));\n  case '_':\n    return factory.blankNode(id.substr(2));\n  case '\"':\n    // Shortcut for internal literals\n    if (factory === DataFactory)\n      return new Literal(id);\n    // Literal without datatype or language\n    if (id[id.length - 1] === '\"')\n      return factory.literal(id.substr(1, id.length - 2));\n    // Literal with datatype or language\n    const endPos = id.lastIndexOf('\"', id.length - 1);\n    return factory.literal(id.substr(1, endPos - 1),\n            id[endPos + 1] === '@' ? id.substr(endPos + 2)\n                                   : factory.namedNode(id.substr(endPos + 3)));\n  case '<':\n    const components = quadId.exec(id);\n    return factory.quad(\n      termFromId(unescapeQuotes(components[1]), factory),\n      termFromId(unescapeQuotes(components[2]), factory),\n      termFromId(unescapeQuotes(components[3]), factory),\n      components[4] && termFromId(unescapeQuotes(components[4]), factory)\n    );\n  default:\n    return factory.namedNode(id);\n  }\n}\n\n// ### Constructs an internal string ID from the given term or ID string\nexport function termToId(term) {\n  if (typeof term === 'string')\n    return term;\n  if (term instanceof Term && term.termType !== 'Quad')\n    return term.id;\n  if (!term)\n    return DEFAULTGRAPH.id;\n\n  // Term instantiated with another library\n  switch (term.termType) {\n  case 'NamedNode':    return term.value;\n  case 'BlankNode':    return `_:${term.value}`;\n  case 'Variable':     return `?${term.value}`;\n  case 'DefaultGraph': return '';\n  case 'Literal':      return `\"${term.value}\"${\n    term.language ? `@${term.language}` :\n      (term.datatype && term.datatype.value !== xsd.string ? `^^${term.datatype.value}` : '')}`;\n  case 'Quad':\n    // To identify RDF* quad components, we escape quotes by doubling them.\n    // This avoids the overhead of backslash parsing of Turtle-like syntaxes.\n    return `<<${\n        escapeQuotes(termToId(term.subject))\n      } ${\n        escapeQuotes(termToId(term.predicate))\n      } ${\n        escapeQuotes(termToId(term.object))\n      }${\n        (isDefaultGraph(term.graph)) ? '' : ` ${termToId(term.graph)}`\n      }>>`;\n  default: throw new Error(`Unexpected termType: ${term.termType}`);\n  }\n}\n\n\n// ## Quad constructor\nexport class Quad extends Term {\n  constructor(subject, predicate, object, graph) {\n    super('');\n    this._subject   = subject;\n    this._predicate = predicate;\n    this._object    = object;\n    this._graph     = graph || DEFAULTGRAPH;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Quad';\n  }\n\n  get subject() {\n    return this._subject;\n  }\n\n  get predicate() {\n    return this._predicate;\n  }\n\n  get object() {\n    return this._object;\n  }\n\n  get graph() {\n    return this._graph;\n  }\n\n  // ### Returns a plain object representation of this quad\n  toJSON() {\n    return {\n      termType:  this.termType,\n      subject:   this._subject.toJSON(),\n      predicate: this._predicate.toJSON(),\n      object:    this._object.toJSON(),\n      graph:     this._graph.toJSON(),\n    };\n  }\n\n  // ### Returns whether this object represents the same quad as the other\n  equals(other) {\n    return !!other && this._subject.equals(other.subject)     &&\n                      this._predicate.equals(other.predicate) &&\n                      this._object.equals(other.object)       &&\n                      this._graph.equals(other.graph);\n  }\n}\nexport { Quad as Triple };\n\n// ### Escapes the quotes within the given literal\nexport function escapeQuotes(id) {\n  return id.replace(escapedLiteral, (_, quoted) => `\"${quoted.replace(/\"/g, '\"\"')}`);\n}\n\n// ### Unescapes the quotes within the given literal\nexport function unescapeQuotes(id) {\n  return id.replace(escapedLiteral, (_, quoted) => `\"${quoted.replace(/\"\"/g, '\"')}`);\n}\n\n// ### Creates an IRI\nfunction namedNode(iri) {\n  return new NamedNode(iri);\n}\n\n// ### Creates a blank node\nfunction blankNode(name) {\n  return new BlankNode(name || `n3-${_blankNodeCounter++}`);\n}\n\n// ### Creates a literal\nfunction literal(value, languageOrDataType) {\n  // Create a language-tagged string\n  if (typeof languageOrDataType === 'string')\n    return new Literal(`\"${value}\"@${languageOrDataType.toLowerCase()}`);\n\n  // Automatically determine datatype for booleans and numbers\n  let datatype = languageOrDataType ? languageOrDataType.value : '';\n  if (datatype === '') {\n    // Convert a boolean\n    if (typeof value === 'boolean')\n      datatype = xsd.boolean;\n    // Convert an integer or double\n    else if (typeof value === 'number') {\n      if (Number.isFinite(value))\n        datatype = Number.isInteger(value) ? xsd.integer : xsd.double;\n      else {\n        datatype = xsd.double;\n        if (!Number.isNaN(value))\n          value = value > 0 ? 'INF' : '-INF';\n      }\n    }\n  }\n\n  // Create a datatyped literal\n  return (datatype === '' || datatype === xsd.string) ?\n    new Literal(`\"${value}\"`) :\n    new Literal(`\"${value}\"^^${datatype}`);\n}\n\n// ### Creates a variable\nfunction variable(name) {\n  return new Variable(name);\n}\n\n// ### Returns the default graph\nfunction defaultGraph() {\n  return DEFAULTGRAPH;\n}\n\n// ### Creates a quad\nfunction quad(subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph);\n}\n", "export class DatasetIdx {\n  constructor(public readonly graphName: string, public readonly idx: number) {}\n\n  toString(): string {\n    return `${this.graphName}:${this.idx}`;\n  }\n}\n", "import { Quad } from 'n3';\nimport { MerklizationConstants } from './constants';\nimport { canonicalDouble, Value, XSDNS } from './types/types';\nimport { Temporal } from '@js-temporal/polyfill';\n\nexport function getGraphName(q: Quad): string {\n  if (!q.graph.value) {\n    return MerklizationConstants.DEFAULT_GRAPH_NODE_NAME;\n  }\n\n  if (q.graph.termType !== 'BlankNode') {\n    throw new Error('graph node is not of BlankNode type');\n  }\n\n  return q.graph.value;\n}\n\nexport const sortArr = <T>(arr: T[]): T[] => {\n  return arr.sort((a, b) => {\n    if (a < b) {\n      return -1;\n    }\n    if (a > b) {\n      return 1;\n    }\n    return 0;\n  });\n};\n\nexport const byteEncoder = new TextEncoder();\n\nexport const validateValue = (val: Value): void => {\n  switch (typeof val) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n      return;\n    case 'object':\n      if (val instanceof Temporal.Instant) {\n        return;\n      }\n  }\n\n  throw new Error(\n    `unexpected value type ${typeof val}, expected boolean | number | Temporal.Instant | string`\n  );\n};\n\nexport const convertStringToXsdValue = (dataType: string, valueStr: string): Value => {\n  let value: Value;\n  switch (dataType) {\n    case XSDNS.Boolean:\n      switch (valueStr) {\n        case 'false':\n        case '0':\n          value = false;\n          break;\n        case 'true':\n        case '1':\n          value = true;\n          break;\n        default:\n          throw new Error('incorrect boolean value');\n      }\n      break;\n    case XSDNS.Integer:\n    case XSDNS.NonNegativeInteger:\n    case XSDNS.NonPositiveInteger:\n    case XSDNS.NegativeInteger:\n    case XSDNS.PositiveInteger:\n      value = parseInt(valueStr);\n      if (isNaN(value) || value.toString() !== valueStr) {\n        throw new Error('incorrect integer value');\n      }\n      break;\n    case XSDNS.DateTime: {\n      if (isNaN(Date.parse(valueStr))) {\n        throw new Error(`error: error parsing time string ${valueStr}`);\n      }\n      const dateRegEx = /^\\d{4}-\\d{2}-\\d{2}$/;\n      if (dateRegEx.test(valueStr)) {\n        value = Temporal.Instant.from(new Date(valueStr).toISOString());\n      } else {\n        value = Temporal.Instant.from(valueStr);\n      }\n      break;\n    }\n    case XSDNS.Double:\n      value = canonicalDouble(parseFloat(valueStr));\n      break;\n    default:\n      value = valueStr;\n  }\n  return value;\n};\n\nexport const convertAnyToString = (v: unknown, datatype: string): string => {\n  const isDoubleType = datatype === XSDNS.Double;\n  switch (typeof v) {\n    case 'string':\n      return isDoubleType ? canonicalDouble(parseFloat(v)) : v;\n    case 'boolean':\n      return `${v}`;\n    case 'number': {\n      return isDoubleType ? canonicalDouble(v) : `${v}`;\n    }\n    default:\n      throw new Error('unsupported type');\n  }\n};\n", "import { Quad } from 'n3';\nimport { NodeType } from './types/types';\n\nexport class RefTp {\n  constructor(public readonly tp: NodeType, public readonly val: unknown) {}\n\n  toString(): string {\n    return JSON.stringify(this);\n  }\n\n  static getRefFromQuad(n: Quad): RefTp {\n    if (n.termType === NodeType.IRI) {\n      return new RefTp(NodeType.IRI, n.value);\n    }\n    if (n.termType === NodeType.BlankNode) {\n      return new RefTp(NodeType.BlankNode, n.value);\n    }\n    return new RefTp(NodeType.Undefined, '');\n  }\n}\n", "import { Hasher, Options } from './types/types';\nimport { DEFAULT_HASHER } from './poseidon';\nimport { getJsonLdDocLoader, DocumentLoader } from '../loaders/jsonld-loader';\n\nexport function getHasher(opts?: Options): Hasher {\n  return opts?.hasher ?? DEFAULT_HASHER;\n}\n\nexport function getDocumentLoader(opts?: Options): DocumentLoader {\n  const ipfsNodeURL = opts?.ipfsNodeURL ?? null;\n  const ipfsGatewayURL = opts?.ipfsGatewayURL ?? null;\n  return opts?.documentLoader ?? getJsonLdDocLoader(ipfsNodeURL, ipfsGatewayURL);\n}\n", "import { RemoteDocument, Url } from 'jsonld/jsonld-spec';\nimport http from 'http';\nimport { parseLinkHeader } from 'jsonld/lib/util';\nimport { LINK_HEADER_CONTEXT } from 'jsonld/lib/constants';\nimport JsonLdError from 'jsonld/lib/JsonLdError';\nimport { prependBase } from 'jsonld/lib/url';\n\n/**\n * Creates a built-in node document loader.\n *\n * @param options the options to use:\n *          [secure]: require all URLs to use HTTPS. (default: false)\n *          [strictSSL]: true to require SSL certificates to be valid,\n *            false not to. (default: true)\n *          [maxRedirects]: the maximum number of redirects to permit.\n *            (default: none)\n *          [headers]: an object (map) of headers which will be passed as\n *            request headers for the requested document. Accept is not\n *            allowed. (default: none).\n *          [httpAgent]: a Node.js `http.Agent` to use with 'http' requests.\n *            (default: none)\n *          [httpsAgent]: a Node.js `https.Agent` to use with 'https' requests.\n *            (default: An agent with rejectUnauthorized to the strictSSL\n *            value.ts)\n *\n * @return the node document loader.\n */\nexport class JsonLDLoader {\n  async loadDocument(url: string, redirects: string[] = []) {\n    const isHttp = url.startsWith('http:');\n    const isHttps = url.startsWith('https:');\n    if (!isHttp && !isHttps) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; only \"http\" and \"https\" URLs are ' + 'supported.',\n        'jsonld.InvalidUrl',\n        { code: 'loading document failed', url }\n      );\n    }\n\n    // TODO: disable cache until HTTP caching implemented\n    // let doc = null; //cache.get(url);\n    // if (doc !== null) {\n    //   return doc;\n    // }\n\n    let alternate = null;\n\n    const { res, body } = await _fetch({ url });\n    const doc = { contextUrl: null, documentUrl: url, document: body || null };\n\n    // handle error\n    const statusText = http.STATUS_CODES[res.status];\n    if (res.status >= 400) {\n      throw new JsonLdError(\n        `URL \"${url}\" could not be dereferenced: ${statusText}`,\n        'jsonld.InvalidUrl',\n        {\n          code: 'loading document failed',\n          url,\n          httpStatusCode: res.status\n        }\n      );\n    }\n    const link = res.headers.get('link');\n    let location = res.headers.get('location');\n    const contentType = res.headers.get('content-type');\n\n    // handle Link Header\n    if (link && contentType !== 'application/ld+json' && contentType !== 'application/json') {\n      // only 1 related link header permitted\n      const linkHeaders = parseLinkHeader(link);\n      const linkedContext = linkHeaders[LINK_HEADER_CONTEXT];\n      if (Array.isArray(linkedContext)) {\n        throw new JsonLdError(\n          'URL could not be dereferenced, it has more than one associated ' + 'HTTP Link Header.',\n          'jsonld.InvalidUrl',\n          { code: 'multiple context link headers', url }\n        );\n      }\n      if (linkedContext) {\n        doc.contextUrl = linkedContext.target;\n      }\n\n      // \"alternate\" link header is a redirect\n      alternate = linkHeaders.alternate;\n      if (\n        alternate &&\n        alternate['type'] == 'application/ld+json' &&\n        !(contentType || '').match(/^application\\/(\\w*\\+)?json$/)\n      ) {\n        location = prependBase(url, alternate['target']);\n      }\n    }\n\n    // handle redirect\n    if ((alternate || (res.status >= 300 && res.status < 400)) && location) {\n      if (redirects.length === -1) {\n        throw new JsonLdError(\n          'URL could not be dereferenced; there were too many redirects.',\n          'jsonld.TooManyRedirects',\n          {\n            code: 'loading document failed',\n            url,\n            httpStatusCode: res.status,\n            redirects\n          }\n        );\n      }\n      if (redirects.indexOf(url) !== -1) {\n        throw new JsonLdError(\n          'URL could not be dereferenced; infinite redirection was detected.',\n          'jsonld.InfiniteRedirectDetected',\n          {\n            code: 'recursive context inclusion',\n            url,\n            httpStatusCode: res.status,\n            redirects\n          }\n        );\n      }\n      redirects.push(url);\n      // location can be relative, turn into full url\n      const nextUrl = new URL(location, url).href;\n      return this.loadDocument(nextUrl, redirects);\n    }\n\n    // cache for each redirected URL\n    redirects.push(url);\n    // TODO: disable cache until HTTP caching implemented\n    /*\n    for(let i = 0; i < redirects.length; ++i) {\n      cache.set(\n        redirects[i],\n        {contextUrl: null, documentUrl: redirects[i], document: body});\n    }\n    */\n\n    return doc;\n  }\n}\n\nconst ipfsMethodCat = 'cat';\n\nexport function normalizeIPFSNodeURL(ipfsNodeURL: string, apiMethod: string): string {\n  const apiSuffix = '/api/v0';\n\n  while (ipfsNodeURL.endsWith('/')) {\n    ipfsNodeURL = ipfsNodeURL.slice(0, -1);\n  }\n\n  if (!ipfsNodeURL.endsWith(apiSuffix)) {\n    ipfsNodeURL += apiSuffix;\n  }\n\n  return ipfsNodeURL + '/' + apiMethod;\n}\n\nfunction trimRightSlash(url: string): string {\n  while (url.endsWith('/')) {\n    url = url.slice(0, -1);\n  }\n  return url;\n}\n\nfunction trimLeftSlash(url: string): string {\n  while (url.startsWith('/')) {\n    url = url.slice(1);\n  }\n  return url;\n}\n\nfunction buildIpfsGatewayURL(ipfsGatewayURL: string, documentURL: string): string {\n  return trimRightSlash(ipfsGatewayURL) + '/ipfs/' + trimLeftSlash(documentURL);\n}\n\nasync function loadIPFS(\n  url: string,\n  ipfsNodeURL: string,\n  ipfsGatewayURL: string\n): Promise<RemoteDocument> {\n  const documentURL = ipfsURLPrefix + url;\n\n  if (!ipfsNodeURL && !ipfsGatewayURL) {\n    throw new JsonLdError('IPFS is not configured', 'jsonld.IPFSNotConfigured', {\n      code: 'loading document failed',\n      url: documentURL\n    });\n  }\n\n  if (ipfsNodeURL !== null) {\n    return await loadFromIPFSNode(url, ipfsNodeURL);\n  } else {\n    return await loadFromIPFSGateway(url, ipfsGatewayURL);\n  }\n}\n\nasync function loadFromIPFSNode(url: string, ipfsNodeURL: string): Promise<RemoteDocument> {\n  const catRequestURL = new URL(normalizeIPFSNodeURL(ipfsNodeURL, ipfsMethodCat));\n  catRequestURL.searchParams.append('arg', url);\n\n  const { res, body } = await _fetch({ url: catRequestURL, method: 'POST' });\n\n  if (res.status != 200) {\n    let errorBody: string;\n    try {\n      errorBody = await res.text();\n    } catch (e) {\n      // eslint-disable-next-line no-console\n      console.warn(e);\n    }\n\n    throw new Error(`Error calling IPFS node: [${res.status}] ${res.statusText}\\n${errorBody}`);\n  }\n\n  return {\n    contextUrl: null,\n    document: body || null,\n    documentUrl: ipfsURLPrefix + url\n  };\n}\n\nasync function loadFromIPFSGateway(url: string, ipfsGatewayURL: string): Promise<RemoteDocument> {\n  const loader = new JsonLDLoader();\n  const document = await loader.loadDocument(buildIpfsGatewayURL(ipfsGatewayURL, url), []);\n  document.contextUrl = null;\n  document.documentUrl = ipfsURLPrefix + url;\n  return document;\n}\n\nasync function _fetch({ url, method }: { url: string | URL; method?: string }) {\n  const options = {};\n  if (typeof method !== 'undefined') {\n    options['method'] = method;\n  }\n  try {\n    url = new URL(url);\n    if (url.username && url.password) {\n      options['headers'] = {\n        ...(options['headers'] ?? {}),\n        authorization: `Basic ${btoa(url.username + ':' + url.password)}`\n      };\n      url = removeCredentialsFromURL(url);\n    }\n\n    const res = await fetch(url, options);\n    if (res.status >= 300 && res.status < 400) {\n      return { res, body: null };\n    }\n    const text = await res.text();\n    if (text && text.length > 0 && text.startsWith('{')) {\n      return { res, body: JSON.parse(text) };\n    }\n    return { res, body: text };\n  } catch (e) {\n    // HTTP errors have a response in them\n    // ky considers redirects HTTP errors\n    if (e.response) {\n      return { res: e.response, body: null };\n    }\n    throw new JsonLdError(\n      'URL could not be dereferenced, an error occurred.',\n      'jsonld.LoadDocumentError',\n      { code: 'loading document failed', url, cause: e }\n    );\n  }\n}\n\nfunction removeCredentialsFromURL(url: string | URL): string {\n  const urlObj = new URL(url);\n  urlObj.username = '';\n  urlObj.password = '';\n  return urlObj.href;\n}\nexport type DocumentLoader = (url: Url) => Promise<RemoteDocument>;\n\nconst ipfsURLPrefix = 'ipfs://';\n\nexport const getJsonLdDocLoader = (\n  ipfsNodeURL: string = null,\n  ipfsGatewayURL: string = null\n): DocumentLoader => {\n  return async (url: Url): Promise<RemoteDocument> => {\n    if (url.startsWith(ipfsURLPrefix)) {\n      const ipfsURL: string = url.slice(ipfsURLPrefix.length);\n      return await loadIPFS(ipfsURL, ipfsNodeURL, ipfsGatewayURL);\n    }\n\n    const loader = new JsonLDLoader();\n    return loader.loadDocument(url, []);\n  };\n};\n", "/*\nthis and http-lib folder\n\nThe MIT License\n\nCopyright (c) 2015 John Hiesey\n\nPermission is hereby granted, free of charge,\nto any person obtaining a copy of this software and\nassociated documentation files (the \"Software\"), to\ndeal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom\nthe Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice\nshall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR\nANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\nimport ClientRequest from './http-lib/request';\nimport {parse} from 'url';\n\nexport function request(opts, cb) {\n  if (typeof opts === 'string')\n    opts = parse(opts)\n\n\n  // Normally, the page is loaded from http or https, so not specifying a protocol\n  // will result in a (valid) protocol-relative url. However, this won't work if\n  // the protocol is something else, like 'file:'\n  var defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n  var protocol = opts.protocol || defaultProtocol\n  var host = opts.hostname || opts.host\n  var port = opts.port\n  var path = opts.path || '/'\n\n  // Necessary for IPv6 addresses\n  if (host && host.indexOf(':') !== -1)\n    host = '[' + host + ']'\n\n  // This may be a relative url. The browser should always be able to interpret it correctly.\n  opts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n  opts.method = (opts.method || 'GET').toUpperCase()\n  opts.headers = opts.headers || {}\n\n  // Also valid opts.auth, opts.mode\n\n  var req = new ClientRequest(opts)\n  if (cb)\n    req.on('response', cb)\n  return req\n}\n\nexport function get(opts, cb) {\n  var req = request(opts, cb)\n  req.end()\n  return req\n}\n\nexport function Agent() {}\nAgent.defaultMaxSockets = 4\n\nexport var METHODS = [\n  'CHECKOUT',\n  'CONNECT',\n  'COPY',\n  'DELETE',\n  'GET',\n  'HEAD',\n  'LOCK',\n  'M-SEARCH',\n  'MERGE',\n  'MKACTIVITY',\n  'MKCOL',\n  'MOVE',\n  'NOTIFY',\n  'OPTIONS',\n  'PATCH',\n  'POST',\n  'PROPFIND',\n  'PROPPATCH',\n  'PURGE',\n  'PUT',\n  'REPORT',\n  'SEARCH',\n  'SUBSCRIBE',\n  'TRACE',\n  'UNLOCK',\n  'UNSUBSCRIBE'\n]\nexport var STATUS_CODES = {\n  100: 'Continue',\n  101: 'Switching Protocols',\n  102: 'Processing', // RFC 2518, obsoleted by RFC 4918\n  200: 'OK',\n  201: 'Created',\n  202: 'Accepted',\n  203: 'Non-Authoritative Information',\n  204: 'No Content',\n  205: 'Reset Content',\n  206: 'Partial Content',\n  207: 'Multi-Status', // RFC 4918\n  300: 'Multiple Choices',\n  301: 'Moved Permanently',\n  302: 'Moved Temporarily',\n  303: 'See Other',\n  304: 'Not Modified',\n  305: 'Use Proxy',\n  307: 'Temporary Redirect',\n  400: 'Bad Request',\n  401: 'Unauthorized',\n  402: 'Payment Required',\n  403: 'Forbidden',\n  404: 'Not Found',\n  405: 'Method Not Allowed',\n  406: 'Not Acceptable',\n  407: 'Proxy Authentication Required',\n  408: 'Request Time-out',\n  409: 'Conflict',\n  410: 'Gone',\n  411: 'Length Required',\n  412: 'Precondition Failed',\n  413: 'Request Entity Too Large',\n  414: 'Request-URI Too Large',\n  415: 'Unsupported Media Type',\n  416: 'Requested Range Not Satisfiable',\n  417: 'Expectation Failed',\n  418: 'I\\'m a teapot', // RFC 2324\n  422: 'Unprocessable Entity', // RFC 4918\n  423: 'Locked', // RFC 4918\n  424: 'Failed Dependency', // RFC 4918\n  425: 'Unordered Collection', // RFC 4918\n  426: 'Upgrade Required', // RFC 2817\n  428: 'Precondition Required', // RFC 6585\n  429: 'Too Many Requests', // RFC 6585\n  431: 'Request Header Fields Too Large', // RFC 6585\n  500: 'Internal Server Error',\n  501: 'Not Implemented',\n  502: 'Bad Gateway',\n  503: 'Service Unavailable',\n  504: 'Gateway Time-out',\n  505: 'HTTP Version Not Supported',\n  506: 'Variant Also Negotiates', // RFC 2295\n  507: 'Insufficient Storage', // RFC 4918\n  509: 'Bandwidth Limit Exceeded',\n  510: 'Not Extended', // RFC 2774\n  511: 'Network Authentication Required' // RFC 6585\n};\n\nexport default {\n  request,\n  get,\n  Agent,\n  METHODS,\n  STATUS_CODES\n}\n", "import * as capability from './capability';\nimport {inherits} from 'util';\nimport {IncomingMessage, readyStates as rStates} from './response';\nimport {Writable} from 'stream';\nimport toArrayBuffer from './to-arraybuffer';\n\nfunction decideMode(preferBinary, useFetch) {\n  if (capability.hasFetch && useFetch) {\n    return 'fetch'\n  } else if (capability.mozchunkedarraybuffer) {\n    return 'moz-chunked-arraybuffer'\n  } else if (capability.msstream) {\n    return 'ms-stream'\n  } else if (capability.arraybuffer && preferBinary) {\n    return 'arraybuffer'\n  } else if (capability.vbArray && preferBinary) {\n    return 'text:vbarray'\n  } else {\n    return 'text'\n  }\n}\nexport default ClientRequest;\n\nfunction ClientRequest(opts) {\n  var self = this\n  Writable.call(self)\n\n  self._opts = opts\n  self._body = []\n  self._headers = {}\n  if (opts.auth)\n    self.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n  Object.keys(opts.headers).forEach(function(name) {\n    self.setHeader(name, opts.headers[name])\n  })\n\n  var preferBinary\n  var useFetch = true\n  if (opts.mode === 'disable-fetch') {\n    // If the use of XHR should be preferred and includes preserving the 'content-type' header\n    useFetch = false\n    preferBinary = true\n  } else if (opts.mode === 'prefer-streaming') {\n    // If streaming is a high priority but binary compatibility and\n    // the accuracy of the 'content-type' header aren't\n    preferBinary = false\n  } else if (opts.mode === 'allow-wrong-content-type') {\n    // If streaming is more important than preserving the 'content-type' header\n    preferBinary = !capability.overrideMimeType\n  } else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n    // Use binary if text streaming may corrupt data or the content-type header, or for speed\n    preferBinary = true\n  } else {\n    throw new Error('Invalid value for opts.mode')\n  }\n  self._mode = decideMode(preferBinary, useFetch)\n\n  self.on('finish', function() {\n    self._onFinish()\n  })\n}\n\ninherits(ClientRequest, Writable)\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n  'accept-charset',\n  'accept-encoding',\n  'access-control-request-headers',\n  'access-control-request-method',\n  'connection',\n  'content-length',\n  'cookie',\n  'cookie2',\n  'date',\n  'dnt',\n  'expect',\n  'host',\n  'keep-alive',\n  'origin',\n  'referer',\n  'te',\n  'trailer',\n  'transfer-encoding',\n  'upgrade',\n  'user-agent',\n  'via'\n]\nClientRequest.prototype.setHeader = function(name, value) {\n  var self = this\n  var lowerName = name.toLowerCase()\n    // This check is not necessary, but it prevents warnings from browsers about setting unsafe\n    // headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n    // http-browserify did it, so I will too.\n  if (unsafeHeaders.indexOf(lowerName) !== -1)\n    return\n\n  self._headers[lowerName] = {\n    name: name,\n    value: value\n  }\n}\n\nClientRequest.prototype.getHeader = function(name) {\n  var self = this\n  return self._headers[name.toLowerCase()].value\n}\n\nClientRequest.prototype.removeHeader = function(name) {\n  var self = this\n  delete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function() {\n  var self = this\n\n  if (self._destroyed)\n    return\n  var opts = self._opts\n\n  var headersObj = self._headers\n  var body\n  if (opts.method === 'POST' || opts.method === 'PUT' || opts.method === 'PATCH') {\n    if (capability.blobConstructor()) {\n      body = new global.Blob(self._body.map(function(buffer) {\n        return toArrayBuffer(buffer)\n      }), {\n        type: (headersObj['content-type'] || {}).value || ''\n      })\n    } else {\n      // get utf8 string\n      body = Buffer.concat(self._body).toString()\n    }\n  }\n\n  if (self._mode === 'fetch') {\n    var headers = Object.keys(headersObj).map(function(name) {\n      return [headersObj[name].name, headersObj[name].value]\n    })\n\n    global.fetch(self._opts.url, {\n      method: self._opts.method,\n      headers: headers,\n      body: body,\n      mode: 'cors',\n      credentials: opts.withCredentials ? 'include' : 'same-origin'\n    }).then(function(response) {\n      self._fetchResponse = response\n      self._connect()\n    }, function(reason) {\n      self.emit('error', reason)\n    })\n  } else {\n    var xhr = self._xhr = new global.XMLHttpRequest()\n    try {\n      xhr.open(self._opts.method, self._opts.url, true)\n    } catch (err) {\n      process.nextTick(function() {\n        self.emit('error', err)\n      })\n      return\n    }\n\n    // Can't set responseType on really old browsers\n    if ('responseType' in xhr)\n      xhr.responseType = self._mode.split(':')[0]\n\n    if ('withCredentials' in xhr)\n      xhr.withCredentials = !!opts.withCredentials\n\n    if (self._mode === 'text' && 'overrideMimeType' in xhr)\n      xhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n    Object.keys(headersObj).forEach(function(name) {\n      xhr.setRequestHeader(headersObj[name].name, headersObj[name].value)\n    })\n\n    self._response = null\n    xhr.onreadystatechange = function() {\n      switch (xhr.readyState) {\n      case rStates.LOADING:\n      case rStates.DONE:\n        self._onXHRProgress()\n        break\n      }\n    }\n      // Necessary for streaming in Firefox, since xhr.response is ONLY defined\n      // in onprogress, not in onreadystatechange with xhr.readyState = 3\n    if (self._mode === 'moz-chunked-arraybuffer') {\n      xhr.onprogress = function() {\n        self._onXHRProgress()\n      }\n    }\n\n    xhr.onerror = function() {\n      if (self._destroyed)\n        return\n      self.emit('error', new Error('XHR error'))\n    }\n\n    try {\n      xhr.send(body)\n    } catch (err) {\n      process.nextTick(function() {\n        self.emit('error', err)\n      })\n      return\n    }\n  }\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid(xhr) {\n  try {\n    var status = xhr.status\n    return (status !== null && status !== 0)\n  } catch (e) {\n    return false\n  }\n}\n\nClientRequest.prototype._onXHRProgress = function() {\n  var self = this\n\n  if (!statusValid(self._xhr) || self._destroyed)\n    return\n\n  if (!self._response)\n    self._connect()\n\n  self._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function() {\n  var self = this\n\n  if (self._destroyed)\n    return\n\n  self._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode)\n  self.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function(chunk, encoding, cb) {\n  var self = this\n\n  self._body.push(chunk)\n  cb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function() {\n  var self = this\n  self._destroyed = true\n  if (self._response)\n    self._response._destroyed = true\n  if (self._xhr)\n    self._xhr.abort()\n    // Currently, there isn't a way to truly abort a fetch.\n    // If you like bikeshedding, see https://github.com/whatwg/fetch/issues/27\n}\n\nClientRequest.prototype.end = function(data, encoding, cb) {\n  var self = this\n  if (typeof data === 'function') {\n    cb = data\n    data = undefined\n  }\n\n  Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function() {}\nClientRequest.prototype.setTimeout = function() {}\nClientRequest.prototype.setNoDelay = function() {}\nClientRequest.prototype.setSocketKeepAlive = function() {}\n", "export var hasFetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nvar _blobConstructor;\nexport function blobConstructor() {\n  if (typeof _blobConstructor !== 'undefined') {\n    return _blobConstructor;\n  }\n  try {\n    new global.Blob([new ArrayBuffer(1)])\n    _blobConstructor = true\n  } catch (e) {\n    _blobConstructor = false\n  }\n  return _blobConstructor\n}\nvar xhr;\n\nfunction checkTypeSupport(type) {\n  if (!xhr) {\n    xhr = new global.XMLHttpRequest()\n    // If location.host is empty, e.g. if this page/worker was loaded\n    // from a Blob, then use example.com to avoid an error\n    xhr.open('GET', global.location.host ? '/' : 'https://example.com')\n  }\n  try {\n    xhr.responseType = type\n    return xhr.responseType === type\n  } catch (e) {\n    return false\n  }\n\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\nexport var arraybuffer = haveArrayBuffer && checkTypeSupport('arraybuffer')\n  // These next two tests unavoidably show warnings in Chrome. Since fetch will always\n  // be used if it's available, just return false for these to avoid the warnings.\nexport var msstream = !hasFetch && haveSlice && checkTypeSupport('ms-stream')\nexport var mozchunkedarraybuffer = !hasFetch && haveArrayBuffer &&\n  checkTypeSupport('moz-chunked-arraybuffer')\nexport var overrideMimeType = isFunction(xhr.overrideMimeType)\nexport var vbArray = isFunction(global.VBArray)\n\nfunction isFunction(value) {\n  return typeof value === 'function'\n}\n\nxhr = null // Help gc\n", "import {overrideMimeType} from './capability';\nimport {inherits} from 'util';\nimport {Readable} from 'stream';\n\nvar rStates = {\n  UNSENT: 0,\n  OPENED: 1,\n  HEADERS_RECEIVED: 2,\n  LOADING: 3,\n  DONE: 4\n}\nexport {\n  rStates as readyStates\n};\nexport function IncomingMessage(xhr, response, mode) {\n  var self = this\n  Readable.call(self)\n\n  self._mode = mode\n  self.headers = {}\n  self.rawHeaders = []\n  self.trailers = {}\n  self.rawTrailers = []\n\n  // Fake the 'close' event, but only once 'end' fires\n  self.on('end', function() {\n    // The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n    process.nextTick(function() {\n      self.emit('close')\n    })\n  })\n  var read;\n  if (mode === 'fetch') {\n    self._fetchResponse = response\n\n    self.url = response.url\n    self.statusCode = response.status\n    self.statusMessage = response.statusText\n      // backwards compatible version of for (<item> of <iterable>):\n      // for (var <item>,_i,_it = <iterable>[Symbol.iterator](); <item> = (_i = _it.next()).value,!_i.done;)\n    for (var header, _i, _it = response.headers[Symbol.iterator](); header = (_i = _it.next()).value, !_i.done;) {\n      self.headers[header[0].toLowerCase()] = header[1]\n      self.rawHeaders.push(header[0], header[1])\n    }\n\n    // TODO: this doesn't respect backpressure. Once WritableStream is available, this can be fixed\n    var reader = response.body.getReader()\n\n    read = function () {\n      reader.read().then(function(result) {\n        if (self._destroyed)\n          return\n        if (result.done) {\n          self.push(null)\n          return\n        }\n        self.push(new Buffer(result.value))\n        read()\n      })\n    }\n    read()\n\n  } else {\n    self._xhr = xhr\n    self._pos = 0\n\n    self.url = xhr.responseURL\n    self.statusCode = xhr.status\n    self.statusMessage = xhr.statusText\n    var headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n    headers.forEach(function(header) {\n      var matches = header.match(/^([^:]+):\\s*(.*)/)\n      if (matches) {\n        var key = matches[1].toLowerCase()\n        if (key === 'set-cookie') {\n          if (self.headers[key] === undefined) {\n            self.headers[key] = []\n          }\n          self.headers[key].push(matches[2])\n        } else if (self.headers[key] !== undefined) {\n          self.headers[key] += ', ' + matches[2]\n        } else {\n          self.headers[key] = matches[2]\n        }\n        self.rawHeaders.push(matches[1], matches[2])\n      }\n    })\n\n    self._charset = 'x-user-defined'\n    if (!overrideMimeType) {\n      var mimeType = self.rawHeaders['mime-type']\n      if (mimeType) {\n        var charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n        if (charsetMatch) {\n          self._charset = charsetMatch[1].toLowerCase()\n        }\n      }\n      if (!self._charset)\n        self._charset = 'utf-8' // best guess\n    }\n  }\n}\n\ninherits(IncomingMessage, Readable)\n\nIncomingMessage.prototype._read = function() {}\n\nIncomingMessage.prototype._onXHRProgress = function() {\n  var self = this\n\n  var xhr = self._xhr\n\n  var response = null\n  switch (self._mode) {\n  case 'text:vbarray': // For IE9\n    if (xhr.readyState !== rStates.DONE)\n      break\n    try {\n      // This fails in IE8\n      response = new global.VBArray(xhr.responseBody).toArray()\n    } catch (e) {\n      // pass\n    }\n    if (response !== null) {\n      self.push(new Buffer(response))\n      break\n    }\n    // Falls through in IE8\n  case 'text':\n    try { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n      response = xhr.responseText\n    } catch (e) {\n      self._mode = 'text:vbarray'\n      break\n    }\n    if (response.length > self._pos) {\n      var newData = response.substr(self._pos)\n      if (self._charset === 'x-user-defined') {\n        var buffer = new Buffer(newData.length)\n        for (var i = 0; i < newData.length; i++)\n          buffer[i] = newData.charCodeAt(i) & 0xff\n\n        self.push(buffer)\n      } else {\n        self.push(newData, self._charset)\n      }\n      self._pos = response.length\n    }\n    break\n  case 'arraybuffer':\n    if (xhr.readyState !== rStates.DONE || !xhr.response)\n      break\n    response = xhr.response\n    self.push(new Buffer(new Uint8Array(response)))\n    break\n  case 'moz-chunked-arraybuffer': // take whole\n    response = xhr.response\n    if (xhr.readyState !== rStates.LOADING || !response)\n      break\n    self.push(new Buffer(new Uint8Array(response)))\n    break\n  case 'ms-stream':\n    response = xhr.response\n    if (xhr.readyState !== rStates.LOADING)\n      break\n    var reader = new global.MSStreamReader()\n    reader.onprogress = function() {\n      if (reader.result.byteLength > self._pos) {\n        self.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n        self._pos = reader.result.byteLength\n      }\n    }\n    reader.onload = function() {\n      self.push(null)\n    }\n      // reader.onerror = ??? // TODO: this\n    reader.readAsArrayBuffer(response)\n    break\n  }\n\n  // The ms-stream case handles end separately in reader.onload()\n  if (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n    self.push(null)\n  }\n}\n", "import EE from 'events';\nimport {inherits} from 'util';\n\nimport {Duplex} from './readable-stream/duplex.js';\nimport {Readable} from './readable-stream/readable.js';\nimport {Writable} from './readable-stream/writable.js';\nimport {Transform} from './readable-stream/transform.js';\nimport {PassThrough} from './readable-stream/passthrough.js';\ninherits(Stream, EE);\nStream.Readable = Readable;\nStream.Writable = Writable;\nStream.Duplex = Duplex;\nStream.Transform = Transform;\nStream.PassThrough = PassThrough;\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\nexport default Stream;\nexport {Readable,Writable,Duplex,Transform,PassThrough,Stream}\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n", "\nimport {inherits} from 'util';\nimport {nextTick} from 'process';\nimport {Readable} from './readable';\nimport {Writable} from './writable';\n\n\ninherits(Duplex, Readable);\n\nvar keys = Object.keys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\nexport default Duplex;\nexport function Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n", "'use strict';\n\n\nReadable.ReadableState = ReadableState;\nimport EventEmitter from 'events';\nimport {inherits, debuglog} from 'util';\nimport BufferList from './buffer-list';\nimport {StringDecoder} from 'string_decoder';\nimport {Duplex} from './duplex';\nimport {nextTick} from 'process';\n\nvar debug = debuglog('stream');\ninherits(Readable, EventEmitter);\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event])\n      emitter.on(event, fn);\n    else if (Array.isArray(emitter._events[event]))\n      emitter._events[event].unshift(fn);\n    else\n      emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\nfunction listenerCount (emitter, type) {\n  return emitter.listeners(type).length;\n}\nfunction ReadableState(options, stream) {\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nexport default Readable;\nexport function Readable(options) {\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options && typeof options.read === 'function') this._read = options.read;\n\n  EventEmitter.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n\n  if (!state.objectMode && typeof chunk === 'string') {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = Buffer.from(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var _e = new Error('stream.unshift() after end event');\n      stream.emit('error', _e);\n    } else {\n      var skipAdd;\n      if (state.decoder && !addToFront && !encoding) {\n        chunk = state.decoder.write(chunk);\n        skipAdd = !state.objectMode && chunk.length === 0;\n      }\n\n      if (!addToFront) state.reading = false;\n\n      // Don't add to the buffer if we've decoded to an empty string chunk and\n      // we're not in object mode\n      if (!skipAdd) {\n        // if we want the data now, just emit it.\n        if (state.flowing && state.length === 0 && !state.sync) {\n          stream.emit('data', chunk);\n          stream.read(0);\n        } else {\n          // update the buffer info.\n          state.length += state.objectMode ? 1 : chunk.length;\n          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n          if (state.needReadable) emitReadable(stream);\n        }\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false);\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted) nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (listenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && src.listeners('data').length) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var _i = 0; _i < len; _i++) {\n      dests[_i].emit('unpipe', this);\n    }return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1) return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = EventEmitter.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function (ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}\n", "import {Buffer} from 'buffer';\n\nexport default BufferList;\n\nfunction BufferList() {\n  this.head = null;\n  this.tail = null;\n  this.length = 0;\n}\n\nBufferList.prototype.push = function (v) {\n  var entry = { data: v, next: null };\n  if (this.length > 0) this.tail.next = entry;else this.head = entry;\n  this.tail = entry;\n  ++this.length;\n};\n\nBufferList.prototype.unshift = function (v) {\n  var entry = { data: v, next: this.head };\n  if (this.length === 0) this.tail = entry;\n  this.head = entry;\n  ++this.length;\n};\n\nBufferList.prototype.shift = function () {\n  if (this.length === 0) return;\n  var ret = this.head.data;\n  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n  --this.length;\n  return ret;\n};\n\nBufferList.prototype.clear = function () {\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nBufferList.prototype.join = function (s) {\n  if (this.length === 0) return '';\n  var p = this.head;\n  var ret = '' + p.data;\n  while (p = p.next) {\n    ret += s + p.data;\n  }return ret;\n};\n\nBufferList.prototype.concat = function (n) {\n  if (this.length === 0) return Buffer.alloc(0);\n  if (this.length === 1) return this.head.data;\n  var ret = Buffer.allocUnsafe(n >>> 0);\n  var p = this.head;\n  var i = 0;\n  while (p) {\n    p.data.copy(ret, i);\n    i += p.data.length;\n    p = p.next;\n  }\n  return ret;\n};\n", "// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n\nimport {inherits, deprecate} from 'util';\nimport {Buffer} from 'buffer';\nWritable.WritableState = WritableState;\nimport {EventEmitter} from 'events';\nimport {Duplex} from './duplex';\nimport {nextTick} from 'process';\ninherits(Writable, EventEmitter);\n\nfunction nop() {}\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\nfunction WritableState(options, stream) {\n  Object.defineProperty(this, 'buffer', {\n    get: deprecate(function () {\n      return this.getBuffer();\n    }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')\n  });\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function writableStateGetBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\nexport default Writable;\nexport function Writable(options) {\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n  }\n\n  EventEmitter.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  nextTick(cb, er);\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n  // Always throw error if a null is written\n  // if we are not in object mode then throw\n  // if it is not a buffer, string, or undefined.\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) nextTick(cb, er);else cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n        nextTick(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n        afterWrite(stream, state, finished, cb);\n      }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    while (entry) {\n      buffer[count] = entry;\n      entry = entry.next;\n      count += 1;\n    }\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else {\n      prefinish(stream, state);\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function (err) {\n    var entry = _this.entry;\n    _this.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = _this;\n    } else {\n      state.corkedRequestsFree = _this;\n    }\n  };\n}\n", "// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n\nimport {Duplex} from './duplex';\n\n\nimport {inherits} from 'util';\ninherits(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\nexport default Transform;\nexport function Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er) {\n      done(stream, er);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('Not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nfunction done(stream, er) {\n  if (er) return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}\n", "\nimport {Transform} from './transform';\n\nimport {inherits} from 'util';\ninherits(PassThrough, Transform);\nexport default PassThrough;\nexport function PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};\n", "// from https://github.com/jhiesey/to-arraybuffer/blob/6502d9850e70ba7935a7df4ad86b358fc216f9f0/index.js\n\n// MIT License\n// Copyright (c) 2016 John Hiesey\nimport {isBuffer} from 'buffer';\nexport default function (buf) {\n  // If the buffer is backed by a Uint8Array, a faster version will work\n  if (buf instanceof Uint8Array) {\n    // If the buffer isn't a subarray, return the underlying ArrayBuffer\n    if (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n      return buf.buffer\n    } else if (typeof buf.buffer.slice === 'function') {\n      // Otherwise we need to get a proper copy\n      return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n    }\n  }\n\n  if (isBuffer(buf)) {\n    // This is the slow version that will work with any Buffer\n    // implementation (even in old browsers)\n    var arrayCopy = new Uint8Array(buf.length)\n    var len = buf.length\n    for (var i = 0; i < len; i++) {\n      arrayCopy[i] = buf[i]\n    }\n    return arrayCopy.buffer\n  } else {\n    throw new Error('Argument must be a Buffer')\n  }\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\nimport {toASCII} from 'punycode';\nimport {isObject,isString,isNullOrUndefined,isNull} from 'util';\nimport {parse as qsParse,stringify as qsStringify} from 'querystring';\nexport {\n  urlParse as parse,\n  urlResolve as resolve,\n  urlResolveObject as resolveObject,\n  urlFormat as format\n};\nexport default {\n  parse: urlParse,\n  resolve: urlResolve,\n  resolveObject: urlResolveObject,\n  format: urlFormat,\n  Url: Url\n}\nexport function Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n  portPattern = /:[0-9]*$/,\n\n  // Special case for a simple path URL\n  simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n  // RFC 2396: characters reserved for delimiting URLs.\n  // We actually just auto-escape these.\n  delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n  // RFC 2396: characters not allowed for various reasons.\n  unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n  // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n  autoEscape = ['\\''].concat(unwise),\n  // Characters that are never ever allowed in a hostname.\n  // Note that any invalid chars are also handled, but these\n  // are the ones that are *expected* to be seen, so we fast-path\n  // them.\n  nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n  hostEndingChars = ['/', '?', '#'],\n  hostnameMaxLen = 255,\n  hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n  hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n  // protocols that can allow \"unsafe\" and \"unwise\" chars.\n  unsafeProtocol = {\n    'javascript': true,\n    'javascript:': true\n  },\n  // protocols that never have a hostname.\n  hostlessProtocol = {\n    'javascript': true,\n    'javascript:': true\n  },\n  // protocols that always contain a // bit.\n  slashedProtocol = {\n    'http': true,\n    'https': true,\n    'ftp': true,\n    'gopher': true,\n    'file': true,\n    'http:': true,\n    'https:': true,\n    'ftp:': true,\n    'gopher:': true,\n    'file:': true\n  };\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  return parse(this, url, parseQueryString, slashesDenoteHost);\n}\n\nfunction parse(self, url, parseQueryString, slashesDenoteHost) {\n  if (!isString(url)) {\n    throw new TypeError('Parameter \\'url\\' must be a string, not ' + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n    splitter =\n    (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n    uSplit = url.split(splitter),\n    slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      self.path = rest;\n      self.href = rest;\n      self.pathname = simplePath[1];\n      if (simplePath[2]) {\n        self.search = simplePath[2];\n        if (parseQueryString) {\n          self.query = qsParse(self.search.substr(1));\n        } else {\n          self.query = self.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        self.search = '';\n        self.query = {};\n      }\n      return self;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    self.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      self.slashes = true;\n    }\n  }\n  var i, hec, l, p;\n  if (!hostlessProtocol[proto] &&\n    (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (i = 0; i < hostEndingChars.length; i++) {\n      hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      self.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (i = 0; i < nonHostChars.length; i++) {\n      hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    self.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    parseHost(self);\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    self.hostname = self.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = self.hostname[0] === '[' &&\n      self.hostname[self.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = self.hostname.split(/\\./);\n      for (i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            self.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (self.hostname.length > hostnameMaxLen) {\n      self.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      self.hostname = self.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      self.hostname = toASCII(self.hostname);\n    }\n\n    p = self.port ? ':' + self.port : '';\n    var h = self.hostname || '';\n    self.host = h + p;\n    self.href += self.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      self.hostname = self.hostname.substr(1, self.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    self.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    self.search = rest.substr(qm);\n    self.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      self.query = qsParse(self.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    self.search = '';\n    self.query = {};\n  }\n  if (rest) self.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n    self.hostname && !self.pathname) {\n    self.pathname = '/';\n  }\n\n  //to support http.request\n  if (self.pathname || self.search) {\n    p = self.pathname || '';\n    var s = self.search || '';\n    self.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  self.href = format(self);\n  return self;\n}\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (isString(obj)) obj = parse({}, obj);\n  return format(obj);\n}\n\nfunction format(self) {\n  var auth = self.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = self.protocol || '',\n    pathname = self.pathname || '',\n    hash = self.hash || '',\n    host = false,\n    query = '';\n\n  if (self.host) {\n    host = auth + self.host;\n  } else if (self.hostname) {\n    host = auth + (self.hostname.indexOf(':') === -1 ?\n      self.hostname :\n      '[' + this.hostname + ']');\n    if (self.port) {\n      host += ':' + self.port;\n    }\n  }\n\n  if (self.query &&\n    isObject(self.query) &&\n    Object.keys(self.query).length) {\n    query = qsStringify(self.query);\n  }\n\n  var search = self.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (self.slashes ||\n    (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n}\n\nUrl.prototype.format = function() {\n  return format(this);\n}\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n      result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n  var relPath;\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n    isRelAbs = (\n      relative.host ||\n      relative.pathname && relative.pathname.charAt(0) === '/'\n    ),\n    mustEndAbs = (isRelAbs || isSourceAbs ||\n      (result.host && relative.pathname)),\n    removeAllDots = mustEndAbs,\n    srcPath = result.pathname && result.pathname.split('/') || [],\n    psychotic = result.protocol && !slashedProtocol[result.protocol];\n  relPath = relative.pathname && relative.pathname.split('/') || [];\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n  var authInHost;\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n      relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      authInHost = result.host && result.host.indexOf('@') > 0 ?\n        result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!isNull(result.pathname) || !isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n        (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n    (result.host || relative.host || srcPath.length > 1) &&\n    (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n    (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n    (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n      srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    authInHost = result.host && result.host.indexOf('@') > 0 ?\n      result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!isNull(result.pathname) || !isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n      (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  return parseHost(this);\n};\n\nfunction parseHost(self) {\n  var host = self.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      self.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) self.hostname = host;\n}\n", "/*! https://mths.be/punycode v1.4.1 by @mathias */\n\n\n/** Highest positive signed 32-bit float value */\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\x20-\\x7E]/; // unprintable ASCII chars + non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n  'overflow': 'Overflow: input needs wider integers to process',\n  'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n  'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n  throw new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n  var length = array.length;\n  var result = [];\n  while (length--) {\n    result[length] = fn(array[length]);\n  }\n  return result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n  var parts = string.split('@');\n  var result = '';\n  if (parts.length > 1) {\n    // In email addresses, only the domain name should be punycoded. Leave\n    // the local part (i.e. everything up to `@`) intact.\n    result = parts[0] + '@';\n    string = parts[1];\n  }\n  // Avoid `split(regex)` for IE8 compatibility. See #17.\n  string = string.replace(regexSeparators, '\\x2E');\n  var labels = string.split('.');\n  var encoded = map(labels, fn).join('.');\n  return result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n  var output = [],\n    counter = 0,\n    length = string.length,\n    value,\n    extra;\n  while (counter < length) {\n    value = string.charCodeAt(counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // high surrogate, and there is a next character\n      extra = string.charCodeAt(counter++);\n      if ((extra & 0xFC00) == 0xDC00) { // low surrogate\n        output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // unmatched surrogate; only append this code unit, in case the next\n        // code unit is the high surrogate of a surrogate pair\n        output.push(value);\n        counter--;\n      }\n    } else {\n      output.push(value);\n    }\n  }\n  return output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nfunction ucs2encode(array) {\n  return map(array, function(value) {\n    var output = '';\n    if (value > 0xFFFF) {\n      value -= 0x10000;\n      output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n      value = 0xDC00 | value & 0x3FF;\n    }\n    output += stringFromCharCode(value);\n    return output;\n  }).join('');\n}\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nfunction basicToDigit(codePoint) {\n  if (codePoint - 48 < 10) {\n    return codePoint - 22;\n  }\n  if (codePoint - 65 < 26) {\n    return codePoint - 65;\n  }\n  if (codePoint - 97 < 26) {\n    return codePoint - 97;\n  }\n  return base;\n}\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nfunction digitToBasic(digit, flag) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n}\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nfunction adapt(delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor(delta / damp) : delta >> 1;\n  delta += floor(delta / numPoints);\n  for ( /* no initialization */ ; delta > baseMinusTMin * tMax >> 1; k += base) {\n    delta = floor(delta / baseMinusTMin);\n  }\n  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n}\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nexport function decode(input) {\n  // Don't use UCS-2\n  var output = [],\n    inputLength = input.length,\n    out,\n    i = 0,\n    n = initialN,\n    bias = initialBias,\n    basic,\n    j,\n    index,\n    oldi,\n    w,\n    k,\n    digit,\n    t,\n    /** Cached calculation results */\n    baseMinusT;\n\n  // Handle the basic code points: let `basic` be the number of input code\n  // points before the last delimiter, or `0` if there is none, then copy\n  // the first basic code points to the output.\n\n  basic = input.lastIndexOf(delimiter);\n  if (basic < 0) {\n    basic = 0;\n  }\n\n  for (j = 0; j < basic; ++j) {\n    // if it's not a basic code point\n    if (input.charCodeAt(j) >= 0x80) {\n      error('not-basic');\n    }\n    output.push(input.charCodeAt(j));\n  }\n\n  // Main decoding loop: start just after the last delimiter if any basic code\n  // points were copied; start at the beginning otherwise.\n\n  for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */ ) {\n\n    // `index` is the index of the next character to be consumed.\n    // Decode a generalized variable-length integer into `delta`,\n    // which gets added to `i`. The overflow checking is easier\n    // if we increase `i` as we go, then subtract off its starting\n    // value at the end to obtain `delta`.\n    for (oldi = i, w = 1, k = base; /* no condition */ ; k += base) {\n\n      if (index >= inputLength) {\n        error('invalid-input');\n      }\n\n      digit = basicToDigit(input.charCodeAt(index++));\n\n      if (digit >= base || digit > floor((maxInt - i) / w)) {\n        error('overflow');\n      }\n\n      i += digit * w;\n      t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n      if (digit < t) {\n        break;\n      }\n\n      baseMinusT = base - t;\n      if (w > floor(maxInt / baseMinusT)) {\n        error('overflow');\n      }\n\n      w *= baseMinusT;\n\n    }\n\n    out = output.length + 1;\n    bias = adapt(i - oldi, out, oldi == 0);\n\n    // `i` was supposed to wrap around from `out` to `0`,\n    // incrementing `n` each time, so we'll fix that now:\n    if (floor(i / out) > maxInt - n) {\n      error('overflow');\n    }\n\n    n += floor(i / out);\n    i %= out;\n\n    // Insert `n` at position `i` of the output\n    output.splice(i++, 0, n);\n\n  }\n\n  return ucs2encode(output);\n}\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nexport function encode(input) {\n  var n,\n    delta,\n    handledCPCount,\n    basicLength,\n    bias,\n    j,\n    m,\n    q,\n    k,\n    t,\n    currentValue,\n    output = [],\n    /** `inputLength` will hold the number of code points in `input`. */\n    inputLength,\n    /** Cached calculation results */\n    handledCPCountPlusOne,\n    baseMinusT,\n    qMinusT;\n\n  // Convert the input in UCS-2 to Unicode\n  input = ucs2decode(input);\n\n  // Cache the length\n  inputLength = input.length;\n\n  // Initialize the state\n  n = initialN;\n  delta = 0;\n  bias = initialBias;\n\n  // Handle the basic code points\n  for (j = 0; j < inputLength; ++j) {\n    currentValue = input[j];\n    if (currentValue < 0x80) {\n      output.push(stringFromCharCode(currentValue));\n    }\n  }\n\n  handledCPCount = basicLength = output.length;\n\n  // `handledCPCount` is the number of code points that have been handled;\n  // `basicLength` is the number of basic code points.\n\n  // Finish the basic string - if it is not empty - with a delimiter\n  if (basicLength) {\n    output.push(delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n\n    // All non-basic code points < n have been handled already. Find the next\n    // larger one:\n    for (m = maxInt, j = 0; j < inputLength; ++j) {\n      currentValue = input[j];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n    // but guard against overflow\n    handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n      error('overflow');\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (j = 0; j < inputLength; ++j) {\n      currentValue = input[j];\n\n      if (currentValue < n && ++delta > maxInt) {\n        error('overflow');\n      }\n\n      if (currentValue == n) {\n        // Represent delta as a generalized variable-length integer\n        for (q = delta, k = base; /* no condition */ ; k += base) {\n          t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n          if (q < t) {\n            break;\n          }\n          qMinusT = q - t;\n          baseMinusT = base - t;\n          output.push(\n            stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n          );\n          q = floor(qMinusT / baseMinusT);\n        }\n\n        output.push(stringFromCharCode(digitToBasic(q, 0)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n        delta = 0;\n        ++handledCPCount;\n      }\n    }\n\n    ++delta;\n    ++n;\n\n  }\n  return output.join('');\n}\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nexport function toUnicode(input) {\n  return mapDomain(input, function(string) {\n    return regexPunycode.test(string) ?\n      decode(string.slice(4).toLowerCase()) :\n      string;\n  });\n}\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nexport function toASCII(input) {\n  return mapDomain(input, function(string) {\n    return regexNonASCII.test(string) ?\n      'xn--' + encode(string) :\n      string;\n  });\n}\nexport var version = '1.4.1';\n/**\n * An object of methods to convert from JavaScript's internal character\n * representation (UCS-2) to Unicode code points, and back.\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode\n * @type Object\n */\n\nexport var ucs2 = {\n  decode: ucs2decode,\n  encode: ucs2encode\n};\nexport default {\n  version: version,\n  ucs2: ucs2,\n  toASCII: toASCII,\n  toUnicode: toUnicode,\n  encode: encode,\n  decode: decode\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\nfunction stringifyPrimitive(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n}\n\nexport function stringify (obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\nexport function parse(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\nexport default {\n  encode: stringify,\n  stringify: stringify,\n  decode: parse,\n  parse: parse\n}\nexport {stringify as encode, parse as decode};\n", "import { InMemoryDB, str2Bytes, Merkletree } from '@iden3/js-merkletree';\nimport { RDFEntry } from './rdf-entry';\n\nexport const getMerkleTreeInitParam = (\n  prefix = '',\n  writable = true,\n  maxLevels = 40\n): {\n  db: InMemoryDB;\n  writable: boolean;\n  maxLevels: number;\n} => {\n  return {\n    db: new InMemoryDB(str2Bytes(prefix)),\n    writable,\n    maxLevels\n  };\n};\n\nexport const addEntriesToMerkleTree = async (\n  mt: Merkletree,\n  entries: RDFEntry[]\n): Promise<void> => {\n  for (const e of entries) {\n    const { k, v } = await e.getKeyValueMTEntry();\n    await mt.add(k, v);\n  }\n};\n", "import { Quad } from 'n3';\n/* eslint-disable no-case-declarations */\nimport { MerklizationConstants } from './constants';\nimport { Path } from './path';\nimport { Hasher, NodeType, Value } from './types/types';\nimport { MtValue } from './mt-value';\nimport { DEFAULT_HASHER } from './poseidon';\nimport { convertStringToXsdValue, validateValue } from './utils';\nimport { RDFDataset } from './rdf-dataset';\nimport { Relationship } from './relationship';\nimport { DatasetIdx } from './dataset-idx';\nimport { QuadArrKey } from './quad-arr-key';\nimport { Temporal } from '@js-temporal/polyfill';\n\nexport class RDFEntry {\n  constructor(\n    public key: Path,\n    public value: Value,\n    public dataType: string = '',\n    public hasher: Hasher = DEFAULT_HASHER\n  ) {\n    if (!key.parts.length) {\n      throw new Error('key length is zero');\n    }\n    validateValue(value);\n  }\n\n  getHasher(): Hasher {\n    return this.hasher;\n  }\n\n  getKeyMtEntry(): Promise<bigint> {\n    return this.key.mtEntry();\n  }\n\n  getValueMtEntry(): Promise<bigint> {\n    return MtValue.mkValueMtEntry(this.getHasher(), this.value);\n  }\n\n  async getKeyValueMTEntry(): Promise<{ k: bigint; v: bigint }> {\n    const k = await this.getKeyMtEntry();\n    const v = await this.getValueMtEntry();\n    return { k, v };\n  }\n\n  static newRDFEntry = (k: Path, v: Value) => {\n    const e = new RDFEntry(k, v);\n    switch (typeof v) {\n      case 'number':\n      case 'string':\n      case 'boolean':\n        e.value = v;\n        break;\n      default:\n        if (v instanceof Temporal.Instant) {\n          e.value = v;\n        } else {\n          throw new Error(`error: incorrect value type ${typeof v}`);\n        }\n    }\n    return e;\n  };\n\n  static async fromDataSet(ds: RDFDataset, hasher: Hasher = DEFAULT_HASHER): Promise<RDFEntry[]> {\n    RDFDataset.assertDatasetConsistency(ds);\n\n    const quads = ds.graphs.get(MerklizationConstants.DEFAULT_GRAPH_NODE_NAME);\n    if (!quads.length) {\n      throw new Error('@default graph not found in dataset');\n    }\n\n    const rs = await Relationship.newRelationship(ds, hasher);\n    const entries: RDFEntry[] = [];\n    const graphProcessor = (graphName: string, quads: Quad[]): void => {\n      const counts = QuadArrKey.countEntries(quads);\n      const seenCount = new Map<string, number>();\n      for (let quadIdx = 0; quadIdx < quads.length; quadIdx++) {\n        let dataType = '';\n        const q = quads[quadIdx];\n        const quadGraphIdx = new DatasetIdx(graphName, quadIdx);\n        const qKey = new QuadArrKey(q);\n        let value: Value;\n        const qo = q.object.termType;\n        const qoVal = q.object.value;\n\n        switch (qo) {\n          case NodeType.Literal:\n            dataType = q?.object?.datatype?.value;\n            value = convertStringToXsdValue(dataType, qoVal);\n\n            break;\n          case NodeType.IRI:\n            if (!qo) {\n              throw new Error('object IRI is nil');\n            }\n            value = qoVal;\n            break;\n          case NodeType.BlankNode:\n            const p = rs.children.get(qKey.toString());\n            if (p) {\n              // this node is a reference to known parent,\n              // skip it and do not put it into merkle tree because it\n              // will be used as parent for other nodes, but has\n              // no value to put itself.\n              continue;\n            }\n            throw new Error('BlankNode is not supported yet');\n          case 'Variable':\n            value = qoVal;\n            break;\n          default:\n            throw new Error(\"unexpected Quad's Object type\");\n        }\n\n        const count = counts.get(qKey.toString());\n        let idx: number;\n        switch (count) {\n          case 0:\n            throw new Error('[assertion] key not found in counts');\n          case 1:\n            // leave idx nil: only one element, do not consider it as an array\n            break;\n          default:\n            const key = qKey.toString();\n            idx = seenCount.get(key) ?? 0;\n            seenCount.set(key, idx + 1);\n        }\n\n        const path = rs.path(quadGraphIdx, ds, idx);\n        const e = new RDFEntry(path, value, dataType, hasher);\n        entries.push(e);\n      }\n    };\n\n    RDFDataset.iterGraphsOrdered(ds, graphProcessor);\n\n    return entries;\n  }\n}\n", "import { Hasher, NodeType } from './types/types';\nimport { Quad } from 'n3';\nimport { Path } from './path';\nimport { RefTp } from './ref-tp';\nimport { QuadArrKey } from './quad-arr-key';\nimport { RDFDataset } from './rdf-dataset';\nimport { DatasetIdx } from './dataset-idx';\nimport { DEFAULT_HASHER } from './poseidon';\n\nexport class Relationship {\n  constructor(\n    // string should be derived from instance of NodeID for the below maps\n    public parents: Map<string, DatasetIdx> = new Map(),\n    // map[qArrKey]map[refTp]int\n    public children: Map<string, Map<string, number>> = new Map(),\n    public hasher: Hasher = DEFAULT_HASHER\n  ) {}\n\n  static getIriValue(n: Quad): Quad {\n    if (n.predicate.termType === NodeType.IRI) {\n      return n.predicate.value;\n    }\n    throw new Error('type is not IRI');\n  }\n\n  path(dsIdx: DatasetIdx, ds: RDFDataset, idx: number): Path {\n    const k = new Path([], this.hasher);\n    if (typeof idx === 'number') {\n      k.append([idx]);\n    }\n    const n = RDFDataset.getQuad(ds, dsIdx);\n\n    const predicate = Relationship.getIriValue(n);\n    k.append([predicate]);\n\n    let nextKey = dsIdx;\n\n    for (;;) {\n      const parentIdx = this.parents.get(nextKey.toString());\n      if (!parentIdx) {\n        break;\n      }\n      const parent = RDFDataset.getQuad(ds, parentIdx);\n      const parentKey = new QuadArrKey(parent);\n      const childrenMap = this.children.get(parentKey.toString());\n\n      if (!childrenMap) {\n        throw new Error('parent mapping not found');\n      }\n\n      const childQuad = RDFDataset.getQuad(ds, nextKey);\n      const childRef = RefTp.getRefFromQuad(childQuad.subject);\n      const childIdx = childrenMap.get(childRef.toString());\n      if (typeof childIdx !== 'number') {\n        throw new Error('child not found in parents mapping');\n      }\n\n      const parentPredicate = Relationship.getIriValue(parent);\n\n      if (childrenMap.size === 1) {\n        k.append([parentPredicate]);\n      } else {\n        k.append([childIdx, parentPredicate]);\n      }\n      nextKey = parentIdx;\n    }\n    k.reverse();\n    return k;\n  }\n\n  static async newRelationship(ds: RDFDataset, hasher: Hasher): Promise<Relationship> {\n    const r = new Relationship(new Map(), new Map(), hasher);\n\n    RDFDataset.iterGraphsOrdered(ds, (graphName, quads) => {\n      for (let idx = 0; idx < quads.length; idx++) {\n        const q = quads[idx];\n        const parentIdx = RDFDataset.findParent(ds, q);\n        if (!parentIdx) {\n          continue;\n        }\n        const qIdx: DatasetIdx = new DatasetIdx(graphName, idx);\n        r.parents.set(qIdx.toString(), parentIdx);\n        const parentQuad = RDFDataset.getQuad(ds, parentIdx);\n        const qKey = new QuadArrKey(parentQuad);\n        //string here is json representation of RefTp interface\n        let childrenM: Map<string, number> = r.children.get(qKey.toString());\n        if (!childrenM) {\n          childrenM = new Map();\n          r.children.set(qKey.toString(), childrenM);\n        }\n\n        const childRef = RefTp.getRefFromQuad(q.subject);\n\n        const childExists = childrenM.get(childRef.toString());\n        if (typeof childExists !== 'number') {\n          const nextIdx = childrenM.size;\n          childrenM.set(childRef.toString(), nextIdx);\n        }\n      }\n    });\n\n    return r;\n  }\n}\n", "import { MerklizationConstants } from './constants';\nimport { Hasher, Options, Parts, ParsedCtx } from './types/types';\nimport { processContext, JsonLdDocument } from 'jsonld';\nimport { DEFAULT_HASHER } from './poseidon';\nimport { byteEncoder, sortArr } from './utils';\nimport { getDocumentLoader, getHasher } from './options';\n\nexport class Path {\n  constructor(public parts: Parts = [], public hasher: Hasher = DEFAULT_HASHER) {}\n\n  reverse(): Parts {\n    return this.parts.reverse();\n  }\n\n  append(p: Parts): void {\n    this.parts = [...this.parts, ...p];\n  }\n\n  prepend(p: Parts): void {\n    this.parts = [...p, ...this.parts];\n  }\n\n  async mtEntry(): Promise<bigint> {\n    const h = this.hasher ?? DEFAULT_HASHER;\n\n    const keyParts: bigint[] = new Array<bigint>(this.parts.length).fill(BigInt(0));\n\n    for (let i = 0; i < this.parts.length; i += 1) {\n      const p = this.parts[i];\n      if (typeof p === 'string') {\n        const b = byteEncoder.encode(p);\n        keyParts[i] = await h.hashBytes(b);\n      } else if (typeof p === 'number') {\n        keyParts[i] = BigInt(p);\n      } else {\n        throw new Error(`error: unexpected type ${typeof p}`);\n      }\n    }\n\n    return h.hash(keyParts);\n  }\n\n  async pathFromContext(docStr: string, path: string, opts?: Options): Promise<void> {\n    const doc = JSON.parse(docStr);\n    if (!doc['@context']) {\n      throw MerklizationConstants.ERRORS.CONTEXT_NOT_DEFINED;\n    }\n    const jsonldOpts = { documentLoader: getDocumentLoader(opts) };\n    const emptyCtx = await processContext(null, null, jsonldOpts);\n    let parsedCtx = await processContext(emptyCtx, doc, jsonldOpts);\n\n    const parts = path.split('.');\n\n    for (const i in parts) {\n      const p = parts[i];\n      if (MerklizationConstants.DIGITS_ONLY_REGEX.test(p)) {\n        this.parts.push(parseInt(p));\n      } else {\n        const m = parsedCtx.mappings.get(p);\n        if (typeof m !== 'object') {\n          throw MerklizationConstants.ERRORS.TERM_IS_NOT_DEFINED;\n        }\n\n        const id = m['@id'];\n        if (!id) {\n          throw MerklizationConstants.ERRORS.NO_ID_ATTR;\n        }\n\n        const nextCtx = m['@context'];\n        if (nextCtx) {\n          parsedCtx = await processContext(parsedCtx, m, jsonldOpts);\n        }\n        this.parts.push(id);\n      }\n    }\n  }\n\n  async typeFromContext(ctxStr: string, path: string, opts?: Options): Promise<string> {\n    const ctxObj = JSON.parse(ctxStr);\n\n    if (!('@context' in ctxObj)) {\n      throw MerklizationConstants.ERRORS.PARSED_CONTEXT_IS_NULL;\n    }\n\n    const jsonldOpts = { documentLoader: getDocumentLoader(opts) };\n    const emptyCtx = await processContext(null, null, jsonldOpts);\n    let parsedCtx = await processContext(emptyCtx, ctxObj, jsonldOpts);\n\n    const parts = path.split('.');\n\n    for (const i in parts) {\n      const p = parts[i];\n      const expP = expandType(parsedCtx, p);\n      if (expP.hasContext) {\n        parsedCtx = await processContext(parsedCtx, expP.typeDef, jsonldOpts);\n      }\n      this.parts.push(expP['@id']);\n    }\n\n    return Path.getTypeMapping(parsedCtx, parts[parts.length - 1]);\n  }\n\n  private static getTypeMapping(ctx: ParsedCtx, prop: string): string {\n    let rval = '';\n    const defaultT = ctx.mappings.get('@type');\n    if (defaultT) {\n      rval = defaultT as string;\n    }\n    const propDef = ctx.mappings.get(prop);\n    if (propDef && propDef['@type']) {\n      rval = propDef['@type'] as string;\n    }\n    return rval;\n  }\n\n  static newPath = (parts: Parts): Path => {\n    const p = new Path();\n    p.append(parts);\n    return p;\n  };\n\n  private static async pathFromDocument(\n    ldCTX: ParsedCtx | null,\n    doc: JsonLdDocument,\n    pathParts: string[],\n    acceptArray: boolean,\n    opts?: Options\n  ): Promise<Parts> {\n    if (pathParts.length === 0) {\n      return [];\n    }\n\n    const term = pathParts[0];\n    const newPathParts = pathParts.slice(1);\n    const jsonldOpts = { documentLoader: getDocumentLoader(opts) };\n\n    if (MerklizationConstants.DIGITS_ONLY_REGEX.test(term)) {\n      const num = parseInt(term);\n      const moreParts = await Path.pathFromDocument(ldCTX, doc, newPathParts, true, opts);\n\n      return [num, ...moreParts];\n    }\n\n    if (typeof doc !== 'object') {\n      throw new Error(`error: expected type object got ${typeof doc}`);\n    }\n\n    if (Array.isArray(doc)) {\n      if (!doc.length) {\n        throw new Error(\"error: can't generate path on zero-sized array\");\n      }\n      if (!acceptArray) {\n        throw MerklizationConstants.ERRORS.UNEXPECTED_ARR_ELEMENT;\n      }\n\n      return Path.pathFromDocument(ldCTX, doc[0], pathParts, false, opts);\n    }\n\n    if ('@context' in doc) {\n      if (ldCTX) {\n        ldCTX = await processContext(ldCTX, doc, jsonldOpts);\n      } else {\n        const emptyCtx = await processContext(null, null, jsonldOpts);\n        ldCTX = await processContext(emptyCtx, doc, jsonldOpts);\n      }\n    }\n\n    const elemKeys = sortArr(Object.keys(doc));\n    const typedScopedCtx = ldCTX;\n\n    for (const k in elemKeys) {\n      const key = elemKeys[k];\n      if (key !== '@type') {\n        const keyCtx = ldCTX.mappings.get(key);\n        if (typeof keyCtx !== 'object') {\n          continue;\n        }\n        if (keyCtx['@id'] !== '@type') {\n          continue;\n        }\n      }\n\n      let types: string[] = [];\n\n      if (Array.isArray(doc[key])) {\n        doc[key].forEach((e) => {\n          if (typeof e !== 'string') {\n            throw new Error(`error: @type value must be an array of strings: ${typeof e}`);\n          }\n          types.push(e as string);\n          types = sortArr(types);\n        });\n      } else if (typeof doc[key] === 'string') {\n        types.push(doc[key]);\n      } else {\n        throw new Error(`error: unexpected @type field type: ${typeof doc[key]}`);\n      }\n\n      for (const tt of types) {\n        const td = typedScopedCtx.mappings.get(tt);\n        if (typeof td === 'object' && '@context' in td) {\n          ldCTX = await processContext(ldCTX, td as JsonLdDocument, jsonldOpts);\n        }\n      }\n\n      break;\n    }\n\n    const expTerm = expandType(ldCTX, term);\n    if (expTerm.hasContext) {\n      if (ldCTX) {\n        ldCTX = await processContext(ldCTX, expTerm.typeDef, jsonldOpts);\n      } else {\n        const emptyCtx = await processContext(null, null, jsonldOpts);\n        ldCTX = await processContext(emptyCtx, expTerm.typeDef, jsonldOpts);\n      }\n    }\n    const moreParts = await Path.pathFromDocument(ldCTX, doc[term], newPathParts, true, opts);\n\n    return [expTerm['@id'], ...moreParts];\n  }\n\n  static async newPathFromCtx(docStr: string, path: string, opts?: Options): Promise<Path> {\n    const p = new Path([], getHasher(opts));\n    await p.pathFromContext(docStr, path, opts);\n    return p;\n  }\n\n  static getContextPathKey = async (\n    docStr: string,\n    ctxTyp: string,\n    fieldPath: string,\n    opts?: Options\n  ): Promise<Path> => {\n    if (ctxTyp === '') {\n      throw MerklizationConstants.ERRORS.CTX_TYP_IS_EMPTY;\n    }\n    if (fieldPath === '') {\n      throw MerklizationConstants.ERRORS.FIELD_PATH_IS_EMPTY;\n    }\n\n    const fullPath = await Path.newPathFromCtx(docStr, `${ctxTyp}.${fieldPath}`, opts);\n    const typePath = await Path.newPathFromCtx(docStr, ctxTyp, opts);\n    return new Path(fullPath.parts.slice(typePath.parts.length));\n  };\n\n  static async fromDocument(\n    ldCTX: ParsedCtx | null,\n    docStr: string,\n    path: string,\n    opts?: Options\n  ): Promise<Path> {\n    const doc = JSON.parse(docStr);\n    const pathParts = path.split('.');\n    if (pathParts.length === 0) {\n      throw MerklizationConstants.ERRORS.FIELD_PATH_IS_EMPTY;\n    }\n\n    const p = await Path.pathFromDocument(ldCTX, doc, pathParts, false, opts);\n    return new Path(p, getHasher(opts));\n  }\n\n  static async newTypeFromContext(\n    contextStr: string,\n    path: string,\n    opts?: Options\n  ): Promise<string> {\n    const p = new Path([], getHasher(opts));\n    return await p.typeFromContext(contextStr, path, opts);\n  }\n\n  static async getTypeIDFromContext(\n    ctxStr: string,\n    typeName: string,\n    opts?: Options\n  ): Promise<string> {\n    const ctxObj = JSON.parse(ctxStr);\n    const jsonldOpts = { documentLoader: getDocumentLoader(opts) };\n    const emptyCtx = await processContext(null, null, jsonldOpts);\n    const parsedCtx = await processContext(emptyCtx, ctxObj, jsonldOpts);\n    const typeDef = parsedCtx.mappings.get(typeName);\n\n    if (!typeDef) {\n      throw new Error(`looks like ${typeName} is not a type`);\n    }\n\n    const typeID = typeDef['@id'];\n    if (!typeID) {\n      throw new Error(`@id attribute is not found for type ${typeName}`);\n    }\n\n    // const typeIDStr = typeID.(string)\n    if (typeof typeID !== 'string') {\n      throw new Error(`@id attribute is not a string for type ${typeName}`);\n    }\n\n    return typeID;\n  }\n}\n\ninterface CtxTypeAttrs {\n  '@id': string;\n  hasContext: boolean;\n  typeDef: object;\n}\n\nfunction expandType(ctx: ParsedCtx, term: string): CtxTypeAttrs {\n  const m = ctx.mappings.get(term);\n  if (typeof m !== 'object') {\n    throw MerklizationConstants.ERRORS.TERM_IS_NOT_DEFINED;\n  }\n\n  const id = m['@id'];\n  if (!id) {\n    throw MerklizationConstants.ERRORS.NO_ID_ATTR;\n  }\n\n  if (typeof id !== 'string') {\n    throw new Error(`error: @id attr is not of type string: ${typeof id}`);\n  }\n\n  return {\n    '@id': id,\n    hasContext: '@context' in m,\n    typeDef: m\n  };\n}\n", "import { Quad } from 'n3';\nimport { getGraphName } from './utils';\nimport { RefTp } from './ref-tp';\nimport { NodeType } from './types/types';\n\nexport class QuadArrKey {\n  subject: RefTp;\n  predicate: unknown;\n  graph: string;\n\n  constructor(q: Quad) {\n    this.graph = getGraphName(q);\n    const s = q.subject;\n    switch (s.termType) {\n      case NodeType.IRI:\n        this.subject = { tp: NodeType.IRI, val: s.value };\n        break;\n      case NodeType.BlankNode:\n        this.subject = { tp: NodeType.BlankNode, val: s.value };\n        break;\n      default:\n        throw new Error('invalid subject type');\n    }\n\n    if (q.predicate.termType !== NodeType.IRI) {\n      throw new Error('invalid predicate type');\n    }\n    this.predicate = q.predicate.value;\n  }\n\n  toString(): string {\n    return JSON.stringify(this);\n  }\n\n  static countEntries = (nodes: Quad[]): Map<string, number> => {\n    const res: Map<string, number> = new Map();\n    for (const q of nodes) {\n      const key = new QuadArrKey(q);\n      let c = res.get(key.toString()) ?? 0;\n      res.set(key.toString(), ++c);\n    }\n    return res;\n  };\n}\n"],
  "mappings": "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",
  "names": ["defaultSetTimout", "defaultClearTimeout", "runTimeout", "fun", "cachedSetTimeout", "runClearTimeout", "marker", "cachedClearTimeout", "cleanUpNextTick", "draining", "currentQueue", "queue", "queueIndex", "drainQueue", "timeout", "len", "nextTick", "args", "i", "Item", "array", "noop", "binding", "name", "cwd", "chdir", "dir", "umask", "hrtime", "previousTimestamp", "clocktime", "performanceNow", "performance", "seconds", "nanoseconds", "uptime", "currentTime", "dif", "startTime", "title", "platform", "browser", "env", "argv", "version", "versions", "release", "config", "on", "addListener", "once", "off", "removeListener", "removeAllListeners", "emit", "process", "defines", "init_virtual_process_polyfill", "__esmMin", "key", "segs", "target", "seg", "init", "inited", "code", "i", "len", "lookup", "revLookup", "base64toByteArray", "b64", "j", "l", "tmp", "placeHolders", "arr", "Arr", "L", "tripletToBase64", "num", "encodeChunk", "uint8", "start", "end", "output", "base64fromByteArray", "extraBytes", "parts", "maxChunkLength", "len2", "kMaxLength", "Buffer", "createBuffer", "that", "length", "arg", "encodingOrOffset", "allocUnsafe", "from", "value", "fromArrayBuffer", "fromString", "fromObject", "assertSize", "size", "alloc", "fill", "encoding", "checked", "string", "byteLength", "actual", "fromArrayLike", "array", "byteOffset", "obj", "internalIsBuffer", "isnan", "b", "loweredCase", "utf8ToBytes", "base64ToBytes", "slowToString", "hexSlice", "utf8Slice", "asciiSlice", "latin1Slice", "base64Slice", "utf16leSlice", "swap", "n", "m", "bidirectionalIndexOf", "buffer", "val", "dir", "arrayIndexOf", "indexSize", "arrLength", "valLength", "read", "buf", "foundIndex", "found", "hexWrite", "offset", "remaining", "strLen", "parsed", "utf8Write", "blitBuffer", "asciiWrite", "asciiToBytes", "latin1Write", "base64Write", "ucs2Write", "utf16leToBytes", "res", "firstByte", "codePoint", "bytesPerSequence", "secondByte", "thirdByte", "fourthByte", "tempCodePoint", "decodeCodePointsArray", "codePoints", "MAX_ARGUMENTS_LENGTH", "ret", "out", "toHex", "bytes", "checkOffset", "ext", "checkInt", "max", "min", "objectWriteUInt16", "littleEndian", "objectWriteUInt32", "checkIEEE754", "writeFloat", "noAssert", "ieee754write", "writeDouble", "base64clean", "str", "stringtrim", "INVALID_BASE64_RE", "units", "leadSurrogate", "byteArray", "c", "hi", "lo", "src", "dst", "isBuffer", "isFastBuffer", "isSlowBuffer", "ieee754read", "isLE", "mLen", "nBytes", "e", "eLen", "eMax", "eBias", "nBits", "d", "s", "rt", "init_Buffer", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "a", "x", "y", "list", "pos", "target", "thisStart", "thisEnd", "thisCopy", "targetCopy", "newBuf", "sliceLen", "mul", "maxBytes", "limit", "sub", "targetStart", "init_buffer", "__esmMin", "init_Buffer", "events_exports", "__export", "EventEmitter", "events_default", "EventHandlers", "$getMaxListeners", "that", "emitNone", "handler", "isFn", "self", "len", "listeners", "arrayClone", "i", "emitOne", "arg1", "emitTwo", "arg2", "emitThree", "arg3", "emitMany", "args", "_addListener", "target", "type", "listener", "prepend", "m", "events", "existing", "w", "emitWarning", "e", "_onceWrap", "fired", "g", "listenerCount", "evlistener", "spliceOne", "list", "index", "k", "n", "arr", "copy", "unwrapListeners", "ret", "domain", "init_events", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "er", "needDomainExit", "doError", "err", "position", "originalListener", "keys", "key", "emitter", "require_events", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "polyfill", "k", "require_stream_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buffer_exports", "__export", "Buffer", "INSPECT_MAX_BYTES", "SlowBuffer", "isBuffer", "_kMaxLength", "init", "inited", "code", "i", "len", "lookup", "revLookup", "toByteArray", "b64", "j", "l", "tmp", "placeHolders", "arr", "Arr", "L", "tripletToBase64", "num", "encodeChunk", "uint8", "start", "end", "output", "fromByteArray", "extraBytes", "parts", "maxChunkLength", "len2", "read", "buffer", "offset", "isLE", "mLen", "nBytes", "e", "m", "eLen", "eMax", "eBias", "nBits", "d", "s", "write", "value", "c", "rt", "kMaxLength", "createBuffer", "that", "length", "arg", "encodingOrOffset", "allocUnsafe", "from", "fromArrayBuffer", "fromString", "fromObject", "assertSize", "size", "alloc", "fill", "encoding", "checked", "string", "byteLength", "actual", "fromArrayLike", "array", "byteOffset", "obj", "internalIsBuffer", "isnan", "isArray", "b", "loweredCase", "utf8ToBytes", "base64ToBytes", "slowToString", "hexSlice", "utf8Slice", "asciiSlice", "latin1Slice", "base64Slice", "utf16leSlice", "swap", "n", "bidirectionalIndexOf", "val", "dir", "arrayIndexOf", "indexSize", "arrLength", "valLength", "buf", "foundIndex", "found", "hexWrite", "remaining", "strLen", "parsed", "utf8Write", "blitBuffer", "asciiWrite", "asciiToBytes", "latin1Write", "base64Write", "ucs2Write", "utf16leToBytes", "res", "firstByte", "codePoint", "bytesPerSequence", "secondByte", "thirdByte", "fourthByte", "tempCodePoint", "decodeCodePointsArray", "codePoints", "MAX_ARGUMENTS_LENGTH", "ret", "out", "toHex", "bytes", "checkOffset", "ext", "checkInt", "max", "min", "objectWriteUInt16", "littleEndian", "objectWriteUInt32", "checkIEEE754", "writeFloat", "noAssert", "writeDouble", "base64clean", "str", "stringtrim", "INVALID_BASE64_RE", "units", "leadSurrogate", "byteArray", "hi", "lo", "src", "dst", "isFastBuffer", "isSlowBuffer", "toString", "init_buffer", "__esmMin", "init_virtual_process_polyfill", "a", "x", "y", "list", "pos", "target", "thisStart", "thisEnd", "thisCopy", "targetCopy", "newBuf", "sliceLen", "mul", "maxBytes", "limit", "sub", "targetStart", "require_buffer", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "polyfill", "k", "defaultSetTimout", "defaultClearTimeout", "runTimeout", "fun", "cachedSetTimeout", "runClearTimeout", "marker", "cachedClearTimeout", "cleanUpNextTick", "draining", "currentQueue", "queue", "queueIndex", "drainQueue", "timeout", "len", "nextTick", "args", "i", "Item", "array", "noop", "binding", "name", "cwd", "chdir", "dir", "umask", "hrtime", "previousTimestamp", "clocktime", "performanceNow", "performance", "seconds", "nanoseconds", "uptime", "currentTime", "dif", "startTime", "title", "platform", "browser", "env", "argv", "version", "versions", "release", "config", "on", "addListener", "once", "off", "removeListener", "removeAllListeners", "emit", "browser$1", "process_default", "init_process", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "inherits", "inherits_default", "init_inherits", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "ctor", "superCtor", "TempCtor", "util_exports", "__export", "_extend", "debuglog", "util_default", "deprecate", "format", "inherits_default", "inspect", "isArray", "isBoolean", "isBuffer", "isDate", "isError", "isFunction", "isNull", "isNullOrUndefined", "isNumber", "isObject", "isPrimitive", "isRegExp", "isString", "isSymbol", "isUndefined", "log", "f", "objects", "i", "args", "len", "str", "formatRegExp", "x", "fn", "msg", "process_default", "warned", "deprecated", "set", "debugEnviron", "debugs", "pid", "obj", "opts", "ctx", "stylizeNoColor", "stylizeWithColor", "formatValue", "styleType", "style", "arrayToHash", "array", "hash", "val", "idx", "value", "recurseTimes", "ret", "primitive", "formatPrimitive", "keys", "visibleKeys", "formatError", "name", "base", "braces", "n", "output", "formatArray", "key", "formatProperty", "reduceToSingleString", "simple", "l", "hasOwnProperty", "desc", "line", "numLinesEst", "length", "prev", "cur", "ar", "arg", "re", "objectToString", "d", "e", "maybeBuf", "Buffer", "o", "pad", "timestamp", "time", "months", "origin", "add", "prop", "init_util", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "init_process", "init_inherits", "require_util", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "polyfill", "k", "require_buffer_list", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "ownKeys", "object", "enumerableOnly", "keys", "symbols", "sym", "_objectSpread", "target", "i", "source", "key", "_defineProperty", "obj", "value", "_toPropertyKey", "_classCallCheck", "instance", "Constructor", "_defineProperties", "props", "descriptor", "_createClass", "protoProps", "staticProps", "arg", "_toPrimitive", "input", "hint", "prim", "res", "_require", "Buffer", "_require2", "inspect", "custom", "copyBuffer", "src", "offset", "BufferList", "v", "entry", "ret", "s", "p", "n", "hasStrings", "c", "str", "nb", "buf", "_", "options", "require_destroy", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "destroy", "err", "cb", "_this", "readableDestroyed", "writableDestroyed", "process", "emitErrorNT", "emitCloseNT", "emitErrorAndCloseNT", "self", "undestroy", "errorOrDestroy", "stream", "rState", "wState", "require_errors_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "_inheritsLoose", "subClass", "superClass", "codes", "createErrorType", "code", "message", "Base", "getMessage", "arg1", "arg2", "arg3", "NodeError", "_Base", "oneOf", "expected", "thing", "len", "i", "startsWith", "str", "search", "pos", "endsWith", "this_len", "includes", "start", "name", "value", "actual", "determiner", "msg", "type", "arg", "require_state", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "ERR_INVALID_OPT_VALUE", "highWaterMarkFrom", "options", "isDuplex", "duplexKey", "getHighWaterMark", "state", "hwm", "name", "require_inherits_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "ctor", "superCtor", "TempCtor", "require_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "deprecate", "fn", "msg", "config", "warned", "deprecated", "name", "val", "require_stream_writable", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Writable", "CorkedRequest", "state", "_this", "onCorkedFinish", "Duplex", "WritableState", "internalUtil", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "destroyImpl", "_require", "getHighWaterMark", "_require$codes", "ERR_INVALID_ARG_TYPE", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_MULTIPLE_CALLBACK", "ERR_STREAM_CANNOT_PIPE", "ERR_STREAM_DESTROYED", "ERR_STREAM_NULL_VALUES", "ERR_STREAM_WRITE_AFTER_END", "ERR_UNKNOWN_ENCODING", "errorOrDestroy", "nop", "options", "stream", "isDuplex", "noDecode", "er", "onwrite", "current", "out", "realHasInstance", "object", "writeAfterEnd", "cb", "process", "validChunk", "encoding", "ret", "isBuf", "writeOrBuffer", "clearBuffer", "decodeChunk", "newChunk", "len", "last", "doWrite", "writev", "onwriteError", "sync", "finishMaybe", "onwriteStateUpdate", "finished", "needFinish", "afterWrite", "onwriteDrain", "entry", "l", "buffer", "holder", "count", "allBuffers", "endWritable", "callFinal", "err", "prefinish", "need", "rState", "corkReq", "value", "require_stream_duplex", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "objectKeys", "obj", "keys", "key", "Duplex", "Readable", "Writable", "v", "method", "options", "onend", "process", "onEndNT", "self", "value", "require_safe_buffer", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buffer", "Buffer", "copyProps", "src", "dst", "key", "SafeBuffer", "arg", "encodingOrOffset", "length", "size", "fill", "encoding", "buf", "require_string_decoder", "__commonJSMin", "exports", "init_virtual_process_polyfill", "init_buffer", "Buffer", "isEncoding", "encoding", "_normalizeEncoding", "enc", "retried", "normalizeEncoding", "nenc", "StringDecoder", "nb", "utf16Text", "utf16End", "utf8FillLast", "base64Text", "base64End", "simpleWrite", "simpleEnd", "buf", "r", "i", "utf8End", "utf8Text", "utf8CheckByte", "byte", "utf8CheckIncomplete", "self", "j", "utf8CheckExtraBytes", "p", "total", "end", "c", "n", "require_end_of_stream", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "ERR_STREAM_PREMATURE_CLOSE", "once", "callback", "called", "_len", "args", "_key", "noop", "isRequest", "stream", "eos", "opts", "readable", "writable", "onlegacyfinish", "onfinish", "writableEnded", "readableEnded", "onend", "onerror", "err", "onclose", "onrequest", "require_async_iterator", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "_Object$setPrototypeO", "_defineProperty", "obj", "key", "value", "_toPropertyKey", "arg", "_toPrimitive", "input", "hint", "prim", "res", "finished", "kLastResolve", "kLastReject", "kError", "kEnded", "kLastPromise", "kHandlePromise", "kStream", "createIterResult", "done", "readAndResolve", "iter", "resolve", "data", "onReadable", "process", "wrapForNext", "lastPromise", "reject", "AsyncIteratorPrototype", "ReadableStreamAsyncIteratorPrototype", "_this", "error", "promise", "_this2", "err", "createReadableStreamAsyncIterator", "stream", "_Object$create", "iterator", "require_from_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_stream_readable", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Readable", "Duplex", "ReadableState", "EE", "EElistenerCount", "emitter", "type", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "debugUtil", "debug", "BufferList", "destroyImpl", "_require", "getHighWaterMark", "_require$codes", "ERR_INVALID_ARG_TYPE", "ERR_STREAM_PUSH_AFTER_EOF", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "StringDecoder", "createReadableStreamAsyncIterator", "from", "errorOrDestroy", "kProxyEvents", "prependListener", "event", "fn", "options", "stream", "isDuplex", "value", "err", "cb", "encoding", "state", "skipChunkCheck", "readableAddChunk", "addToFront", "onEofChunk", "er", "chunkInvalid", "addChunk", "maybeReadMore", "emitReadable", "enc", "decoder", "p", "content", "MAX_HWM", "computeNewHighWaterMark", "n", "howMuchToRead", "nOrig", "endReadable", "doRead", "ret", "fromList", "emitReadable_", "process", "flow", "maybeReadMore_", "len", "dest", "pipeOpts", "src", "doEnd", "endFn", "onend", "unpipe", "onunpipe", "readable", "unpipeInfo", "cleanup", "ondrain", "pipeOnDrain", "cleanedUp", "onclose", "onfinish", "onerror", "ondata", "indexOf", "dests", "i", "index", "ev", "res", "nReadingNextTick", "updateReadableListening", "self", "resume", "resume_", "_this", "paused", "method", "endReadableNT", "wState", "iterable", "opts", "xs", "x", "l", "require_stream_transform", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Transform", "_require$codes", "ERR_METHOD_NOT_IMPLEMENTED", "ERR_MULTIPLE_CALLBACK", "ERR_TRANSFORM_ALREADY_TRANSFORMING", "ERR_TRANSFORM_WITH_LENGTH_0", "Duplex", "afterTransform", "er", "data", "ts", "cb", "rs", "options", "prefinish", "_this", "done", "chunk", "encoding", "n", "err", "err2", "stream", "require_stream_passthrough", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "PassThrough", "Transform", "options", "chunk", "encoding", "cb", "require_pipeline", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "eos", "once", "callback", "called", "_require$codes", "ERR_MISSING_ARGS", "ERR_STREAM_DESTROYED", "noop", "err", "isRequest", "stream", "destroyer", "reading", "writing", "closed", "destroyed", "call", "fn", "pipe", "from", "to", "popCallback", "streams", "pipeline", "_len", "_key", "error", "destroys", "i", "require_readable_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_blake", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Transform", "engine", "options", "chunk", "encoding", "callback", "error", "err", "data", "Buffer", "digest", "require_api", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake", "engines", "getEngine", "algorithm", "options", "Engine", "require_blake", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake", "arr", "j", "data", "block", "offset", "i", "Buffer", "require_blake256", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake", "zo", "Buffer", "oo", "rot", "x", "n", "g", "v", "m", "i", "a", "b", "c", "d", "e", "sigma", "u256", "lo", "hi", "msglen", "buffer", "require_blake224", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake256", "zo", "Buffer", "oo", "buffer", "i", "require_blake512", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake", "zo", "Buffer", "oo", "rot", "v", "i", "j", "n", "hi", "lo", "g", "m", "a", "b", "c", "d", "e", "sigma", "u512", "len", "msglen", "buffer", "require_blake384", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Blake512", "zo", "Buffer", "oo", "buffer", "i", "require_lib", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_js", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_utils", "__commonJSMin", "exports", "init_virtual_process_polyfill", "init_buffer", "_a", "len", "b", "v", "i", "a", "require_build_int", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "n64", "_prefix", "prefix", "n32", "n8", "buildCopy", "f", "c", "i", "buildZero", "buildOne", "buildIsZero", "getCompCode", "n", "buildEq", "buildGte", "buildAdd", "buildSub", "buildMul", "loadX", "loadY", "mulij", "j", "X", "Y", "c0", "c1", "k", "buildSquare", "c0_old", "c1_old", "buildSquareOld", "_buildMul1", "_buildAdd1", "buildDiv", "Caux", "Raux", "C", "R", "pr1", "R1", "R2", "buildInverseMod", "aux1", "aux2", "aux3", "aux4", "aux5", "aux6", "mulBuff", "aux7", "require_build_timesscalar", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "fnName", "elementLen", "opAB", "opAA", "opCopy", "opInit", "f", "c", "aux", "innerLoop", "code", "i", "require_build_batchinverse", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildBatchInverse", "prefix", "n8", "f", "c", "AUX", "require_build_batchconvertion", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildBatchConvertion", "fnName", "internalFnName", "sizeIn", "sizeOut", "reverse", "f", "c", "require_build_batchop", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildBatchConvertion", "fnName", "internalFnName", "sizeIn", "sizeOut", "reverse", "f", "c", "require_bigint", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "compare", "a", "b", "square", "n", "isOdd", "isEven", "isNegative", "isPositive", "bitLength", "abs", "isUnit", "modInv", "t", "newT", "r", "newR", "q", "lastT", "lastR", "modPow", "exp", "mod", "base", "compareAbs", "isDivisibleBy", "isBasicPrime", "v", "prev", "millerRabinTest", "nPrev", "d", "i", "x", "next", "isPrime", "p", "bits", "logN", "require_build_f1m", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildInt", "utils", "buildExp", "buildBatchInverse", "buildBatchConvertion", "buildBatchOp", "bitLength", "modInv", "modPow", "isPrime", "isOdd", "square", "_q", "_prefix", "_intPrefix", "q", "n64", "n32", "n8", "prefix", "intPrefix", "pq", "pR2", "pOne", "pZero", "_minusOne", "_e", "pe", "_ePlusOne", "pePlusOne", "buildOne", "f", "c", "buildAdd", "buildSub", "buildNeg", "buildIsNegative", "AUX", "buildSign", "buildMReduct", "carries", "np32", "i", "j", "buildMul", "loadX", "loadY", "loadQ", "mulij", "X", "Y", "mulqm", "Q", "M", "c0", "c1", "k", "buildSquare", "c0_old", "c1_old", "buildSquareOld", "buildToMontgomery", "buildFromMontgomery", "pAux2", "buildInverse", "_nqr", "s2", "_t", "pt", "_nqrToT", "pNqrToT", "_tPlusOneOver2", "ptPlusOneOver2", "buildSqrt", "ONE", "C", "T", "R", "SQ", "B", "buildIsSquare", "buildLoad", "pAux", "buildTimesScalar", "buildIsOne", "require_build_f1", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildF1m", "bitLength", "_q", "_prefix", "_f1mPrefix", "_intPrefix", "q", "n64", "n8", "prefix", "intPrefix", "f1mPrefix", "pR2", "pq", "pePlusOne", "buildMul", "pAux1", "f", "c", "buildSquare", "buildInverse", "buildIsNegative", "require_build_f2m", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildExp", "buildBatchInverse", "utils", "mulNonResidueFn", "prefix", "f1mPrefix", "f1n8", "q", "buildAdd", "f", "c", "x0", "x1", "y0", "y1", "r0", "r1", "buildTimesScalar", "buildSub", "buildNeg", "buildConjugate", "buildIsNegative", "buildMul", "A", "B", "C", "D", "buildMul1", "y", "buildSquare", "AB", "APB", "APNB", "ABPNAB", "buildToMontgomery", "buildFromMontgomery", "buildCopy", "buildZero", "buildOne", "buildEq", "buildIsZero", "buildInverse", "t0", "t1", "t2", "t3", "buildSign", "buildIsOne", "buildSqrt", "e34", "e12", "a", "a1", "alpha", "a0", "pn1", "n1", "n1a", "n1b", "b", "buildIsSquare", "require_build_f3m", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildExp", "buildBatchInverse", "mulNonResidueFn", "prefix", "f1mPrefix", "f1n8", "buildAdd", "f", "c", "x0", "x1", "x2", "y0", "y1", "y2", "r0", "r1", "r2", "buildTimesScalar", "buildSub", "buildNeg", "buildIsNegative", "buildMul", "cd", "a", "b", "A", "C", "aA", "bB", "cC", "a_b", "A_B", "a_c", "A_C", "b_c", "B_C", "aA_bB", "aA_cC", "bB_cC", "AUX", "buildSquare", "B", "s0", "ab", "s1", "s2", "bc", "s3", "s4", "buildToMontgomery", "buildFromMontgomery", "buildCopy", "buildZero", "buildOne", "buildEq", "buildIsZero", "buildInverse", "t0", "t1", "t2", "t3", "t4", "t5", "c0", "c1", "c2", "t6", "buildSign", "buildIsOne", "require_build_timesscalarnaf", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "fnName", "elementLen", "opAB", "opAA", "opAmB", "opCopy", "opInit", "f", "c", "aux", "getBit", "IDX", "pushBit", "b", "require_build_multiexp", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "prefix", "fnName", "opAdd", "n8b", "n8g", "buildGetChunk", "f", "c", "buildMutiexpChunk", "buildMultiexp", "aux", "pTSizes", "buildReduceTable", "require_build_curve_jacobian_a0", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "buildTimesScalarNAF", "buildBatchConvertion", "buildMultiexp", "prefix", "prefixField", "pB", "n64", "n8", "buildIsZero", "f", "c", "buildIsZeroAffine", "buildCopy", "i", "buildCopyAffine", "buildZero", "buildZeroAffine", "buildEq", "x1", "y1", "z1", "x2", "y2", "z2", "Z1Z1", "Z2Z2", "U1", "U2", "Z1_cubed", "Z2_cubed", "S1", "S2", "buildEqMixed", "buildDouble", "x", "y", "z", "x3", "y3", "z3", "A", "B", "C", "D", "E", "F", "G", "eightC", "buildDoubleAffine", "XX", "YY", "YYYY", "S", "M", "eightYYYY", "buildEqAffine", "buildToMontgomery", "buildToMontgomeryAffine", "buildFromMontgomery", "buildFromMontgomeryAffine", "buildAdd", "H", "S2_minus_S1", "I", "J", "r", "r2", "V", "V2", "S1_J2", "buildAddMixed", "HH", "S2_minus_y1", "y1_J2", "buildAddAffine", "y2_minus_y1", "buildNeg", "buildNegAffine", "buildSub", "AUX", "buildSubMixed", "buildSubAffine", "buildNormalize", "Z_inv", "Z2_inv", "Z3_inv", "buildToAffine", "buildToJacobian", "buildBatchToAffine", "tmp", "buildReverseBytes", "buildLEMtoC", "buildLEMtoU", "pTmp", "tmpX", "tmpY", "buildUtoLEM", "buildCtoLEM", "buildInCurveAffine", "x3b", "buildInCurve", "aux", "require_build_fft", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "isOdd", "modInv", "modPow", "utils", "prefix", "gPrefix", "fPrefix", "opGtimesF", "n8f", "n8g", "q", "rem", "maxBits", "nr", "w", "n", "bytes", "R", "i", "m", "ROOTs", "i2", "bytesi2", "INV2", "shift", "bytesShiftToSmallM", "bytesSConst", "shiftToSmallM", "sConst", "SHIFT_TO_M", "SCONST", "rev", "x", "r", "rtable", "REVTABLE", "buildLog2", "f", "c", "buildFFT", "One", "buildIFFT", "buildRawFFT", "W", "T", "U", "buildFinalInverse", "buildReversePermutation", "buildRev", "buildFFTJoin", "buildFFTJoinExt", "buildFFTJoinExtInv", "buildPrepareLagrangeEvaluation", "buildFFTMix", "buildFFTFinal", "require_build_pol", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "prefix", "prefixField", "n8", "buildZero", "f", "c", "buildConstructLC", "aux", "require_build_qap", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "prefix", "prefixField", "n8", "buildBuildABC", "f", "c", "aux", "buildJoinABC", "buildBatchAdd", "require_build_applykey", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "fnName", "gPrefix", "frPrefix", "sizeGIn", "sizeGOut", "sizeF", "opGtimesF", "f", "c", "t", "require_build_bn128", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "utils", "buildF1m", "buildF1", "buildF2m", "buildF3m", "buildCurve", "buildFFT", "buildPol", "buildQAP", "buildApplyKey", "bitLength", "modInv", "isOdd", "isNegative", "_prefix", "prefix", "q", "r", "n64", "n8", "frsize", "f1size", "f2size", "ftsize", "pr", "f1mPrefix", "pG1b", "toMontgomery", "g1mPrefix", "f2mPrefix", "pG2b", "g2mPrefix", "buildGTimesFr", "fnName", "opMul", "f", "c", "AUX", "a", "G1gen", "pG1gen", "G1zero", "pG1zero", "G2gen", "pG2gen", "G2zero", "pG2zero", "pOneT", "pNonResidueF6", "pTwoInv", "pAltBn128Twist", "pTwistCoefB", "build_mulNR6", "f6mPrefix", "build_mulNR12", "ftmPrefix", "ateLoopBitBytes", "bits", "pAteLoopBitBytes", "isLoopNegative", "ateCoefSize", "ateNDblCoefs", "ateNCoefs", "acc", "b", "prePSize", "preQSize", "finalExpIsNegative", "finalExpZ", "naf", "n", "E", "res", "z", "buildPrepareG1", "buildPrepAddStep", "X2", "Y2", "X1", "Y1", "Z1", "ELL_0", "ELL_VW", "ELL_VV", "D", "F", "G", "H", "I", "J", "buildPrepDoubleStep", "A", "B", "C", "E2", "buildMulByQ", "x", "y", "x3", "y3", "z3", "MulByQX", "MulByQY", "buildPrepareG2", "QX", "pR", "R", "RX", "RY", "RZ", "cQX", "cQY", "pQ1", "Q1", "pQ2", "Q2", "Q2Y", "buildMulBy024Old", "x0", "x2", "x4", "z0", "pAUX12", "AUX12", "AUX12_0", "AUX12_2", "AUX12_4", "AUX12_6", "AUX12_8", "AUX12_10", "buildMulBy024", "z1", "z2", "z4", "z5", "t0", "t1", "t2", "s0", "T3", "T4", "D0", "D2", "D4", "S1", "buildMillerLoop", "preP_PX", "preP_PY", "pVW", "VW", "pVV", "VV", "buildFrobeniusMap", "F12", "F6", "i", "X", "Xc0", "Xc1", "Rc0", "Rc1", "coef", "mul2", "pCoef", "ac0", "ac1", "bc0", "bc1", "buildFinalExponentiationFirstChunk", "elt", "eltC0", "eltC1", "pA", "Ac0", "Ac1", "buildCyclotomicSquare", "x1", "x5", "r0", "r4", "r3", "r2", "r1", "r5", "t3", "t4", "t5", "tmp", "buildCyclotomicExp", "exponent", "exponentNafBytes", "pExponentNafBytes", "inverse", "buildFinalExponentiationLastChunk", "result", "K", "L", "M", "N", "O", "P", "Q", "S", "T", "U", "buildFinalExponentiation", "eltToFirstChunk", "buildFinalExponentiationOld", "pExponent", "pPreP", "pPreQ", "buildPairingEquation", "nPairings", "resT", "auxT", "buildPairing", "require_build_bls12381", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "utils", "buildF1m", "buildF1", "buildF2m", "buildF3m", "buildCurve", "buildFFT", "buildPol", "buildQAP", "buildApplyKey", "bitLength", "isOdd", "isNegative", "_prefix", "prefix", "q", "r", "n64q", "n8q", "f1size", "f2size", "ftsize", "n64r", "n8r", "frsize", "pr", "f1mPrefix", "pG1b", "toMontgomery", "g1mPrefix", "f2mPrefix", "pG2b", "g2mPrefix", "buildGTimesFr", "fnName", "opMul", "f", "c", "AUX", "a", "G1gen", "pG1gen", "G1zero", "pG1zero", "G2gen", "pG2gen", "G2zero", "pG2zero", "pOneT", "pBls12381Twist", "build_mulNR2", "x0c", "x0", "x1", "r0", "r1", "f6mPrefix", "build_mulNR6", "c0copy", "ftmPrefix", "ateLoopBitBytes", "bits", "pAteLoopBitBytes", "isLoopNegative", "ateCoefSize", "ateNDblCoefs", "ateNCoefs", "acc", "b", "prePSize", "preQSize", "finalExpIsNegative", "finalExpZ", "naf", "n", "E", "res", "z", "buildPrepareG1", "buildPrepDoubleStep", "Rx", "Ry", "Rz", "t0", "t3", "t6", "zsquared", "t1", "t2", "t4", "t5", "buildPrepAddStep", "Qx", "Qy", "t10", "t9", "ysquared", "ztsquared", "t7", "t8", "buildPrepareG2", "pR", "R", "base", "buildF6Mul1", "A_c0", "A_c1", "A_c2", "c1", "b_b", "Ac0_Ac1", "Ac1_Ac2", "buildF6Mul01", "c0", "a_a", "Ac0_Ac2", "buildF12Mul014", "c4", "aa", "bb", "o", "R_c0", "R_c1", "buildELL", "Px", "Py", "F", "coef0_0", "coef0_1", "coef1_0", "coef1_1", "coef2", "pc0", "c0_c0", "c0_c1", "pc1", "c1_c0", "c1_c1", "buildMillerLoop", "preP", "coefs", "buildFrobeniusMap", "F12", "F6", "i", "X", "Xc0", "Xc1", "Rc0", "Rc1", "coef", "mul2", "pCoef", "ac0", "ac1", "bc0", "bc1", "buildCyclotomicSquare", "x4", "x3", "x2", "x5", "r4", "r3", "r2", "r5", "tmp", "buildCyclotomicExp", "exponent", "isExpNegative", "exponentNafBytes", "pExponentNafBytes", "x", "inverse", "buildFinalExponentiation", "elt", "buildFinalExponentiationOld", "pExponent", "pPreP", "pPreQ", "buildPairingEquation", "nPairings", "resT", "auxT", "buildPairing", "buildInGroupG2", "WINV", "FROB2X", "FROB3Y", "wInv", "frob2X", "frob3Y", "px", "py", "aux", "x_winv", "y_winv", "pf2", "f2", "f2x", "f2x_c1", "f2x_c2", "f2y", "f2y_c1", "f2y_c2", "pf3", "f3", "f3x", "f3x_c1", "f3x_c2", "f3y", "f3y_c1", "f3y_c2", "f3z", "fInGroup", "c2", "aux2", "buildInGroupG1", "BETA", "BETA2", "Z2M1D3", "beta", "beta2", "z2m1d3", "psp", "sp", "spx", "spy", "ps2p", "s2p", "s2px", "s2py", "require_wasmcurves", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Math", "imul", "clz32", "JSBI", "abs", "max", "floor", "length", "sign", "i", "_", "a", "u", "setPrototypeOf", "prototype", "__kMaxLength", "RangeError", "g", "e", "c", "l", "result", "B", "digit", "t", "push", "toString", "join", "radix", "__toStringBasePowerOfTwo", "__toStringGeneric", "Error", "newLength", "last", "pop", "__clz30", "__digit", "multiplier", "summand", "mLow", "mHigh", "carry", "high", "d", "dLow", "dHigh", "pLow", "__imul", "pMid1", "pMid2", "pHigh", "v", "o", "__setDigit", "startIndex", "halfDigits", "sum", "__halfDigit", "__setHalfDigit", "subtrahend", "borrow", "current", "r0", "sub", "r15", "n", "D", "shift", "len", "__unsignedDigit", "value", "digitIndex", "previous", "updated", "arg", "Number", "isFinite", "__zero", "__isOneDigitInt", "__oneDigit", "__fromDouble", "__fromString", "SyntaxError", "_typeof", "constructor", "primitive", "__toPrimitive", "BigInt", "TypeError", "x", "xLength", "xMsd", "msdLeadingZeros", "xBitLength", "exponent", "currentDigit", "mantissaHigh", "r", "mantissaHighBitsUnset", "mantissaLow", "mantissaLowBitsUnset", "h", "b", "rounding", "__decideRounding", "signBit", "__kBitConversionInts", "__kBitConversionDouble", "__copy", "__absoluteSubOne", "__trim", "__absoluteAddOne", "y", "unaryMinus", "expValue", "__kMaxLengthBits", "neededDigits", "__initializeDigits", "msd", "runningSquare", "multiply", "resultLength", "__clzmsd", "__multiplyAccumulate", "__absoluteCompare", "quotient", "resultSign", "divisor", "__absoluteDivSmall", "__absoluteDivLarge", "remainderDigit", "__absoluteModSmall", "remainder", "__absoluteAdd", "__absoluteSub", "__rightShiftByAbsolute", "__leftShiftByAbsolute", "__compareToBigInt", "equal", "__absoluteAnd", "y1", "__absoluteOr", "__absoluteAndNot", "__absoluteXor", "neededLength", "topDigit", "compareDigit", "__truncateToNBits", "__truncateAndSubFromPowerOfTwo", "bitsInTopDigit", "__toNumeric", "__isBigInt", "add", "__compare", "EQ", "__equalToNumber", "dataview", "byteOffset", "littleEndian", "asIntN", "DataViewGetBigUint64", "getUint32", "low", "s", "DataViewSetBigUint64", "asUintN", "d1", "setUint32", "mantissaBitsUnset", "topUnconsumedBit", "mask", "rawExponent", "digits", "kMantissaHighTopBit", "msdTopBit", "remainingMantissaBits", "string", "cursor", "charCodeAt", "__isWhitespace", "chars", "bitsPerChar", "__kMaxBitsPerChar", "roundup", "__kBitsPerCharTableMultiplier", "bitsMin", "__kBitsPerCharTableShift", "limDigit", "limAlpha", "parts", "partsBits", "done", "part", "bits", "f", "p", "__fillFromParts", "charsSoFar", "S", "k", "m", "I", "digitsSoFar", "__inplaceMultiplyAdd", "bitsInDigit", "partBits", "charMask", "charsRequired", "Array", "pos", "availableBits", "newDigit", "__kConversionChars", "consumedBits", "isRecursiveCall", "bitLength", "maxBitsPerChar", "minBitsPerChar", "secondHalf", "secondHalfChars", "conqueror", "exponentiate", "input", "divisionResult", "firstHalf", "leftNegative", "bothNegative", "xSign", "__unequalSign", "__absoluteGreater", "__absoluteLess", "ySign", "yAbs", "xDigit", "__compareToDouble", "yBitLength", "compareMantissa", "op", "__comparisonResultToBool", "__compareToNumber", "inputLength", "__setDigitGrow", "yLength", "numPairs", "tmp", "tmpLength", "diff", "multiplicand", "accumulator", "accumulatorIndex", "m2Low", "m2High", "acc", "m1", "m1Low", "m1High", "rLow", "rMid1", "rMid2", "rHigh", "source", "factor", "rx", "ry", "upperHalf", "lowerHalf", "dividend", "wantQuotient", "wantRemainder", "__halfDigitLength", "n2", "q", "qhatv", "__clz15", "__specialLeftShift", "vn1", "halfDigitBuffer", "j", "qhat", "ujn", "rhat", "vn2", "ujn2", "__internalMultiplyAdd", "__inplaceSub", "__inplaceAdd", "__inplaceRightShift", "addDigit", "__toShiftAmount", "digitShift", "bitsShift", "grow", "__rightShiftByMaximum", "mustRoundDown", "obj", "hint", "Symbol", "toPrimitive", "exoticToPrim", "valueOf", "call", "drop", "min", "limit", "resultMsd", "msdBitsConsumed", "minuendMsd", "base", "ArrayBuffer", "Float64Array", "__kBitConversionBuffer", "Int32Array", "LN2", "log", "require_IdentifierIssuer", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "IdentifierIssuer", "prefix", "existing", "counter", "_existing", "old", "identifier", "require_setImmediate", "__commonJSMin", "exports", "init_virtual_process_polyfill", "init_buffer", "global", "undefined", "nextHandle", "tasksByHandle", "currentlyRunningATask", "doc", "registerImmediate", "setImmediate", "callback", "args", "i", "task", "clearImmediate", "handle", "run", "runIfPresent", "installNextTickImplementation", "process", "canUsePostMessage", "postMessageIsAsynchronous", "oldOnMessage", "installPostMessageImplementation", "messagePrefix", "onGlobalMessage", "event", "installMessageChannelImplementation", "channel", "installReadyStateChangeImplementation", "html", "script", "installSetTimeoutImplementation", "attachTo", "require_MessageDigest_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "crypto", "algorithm", "msg", "data", "buffer", "hex", "i", "require_Permuter", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "list", "i", "current", "dir", "rval", "k", "pos", "length", "element", "left", "swap", "require_NQuads", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "RDF", "RDF_LANGSTRING", "XSD_STRING", "TYPE_NAMED_NODE", "TYPE_BLANK_NODE", "TYPE_LITERAL", "TYPE_DEFAULT_GRAPH", "REGEX", "iri", "PN_CHARS_U", "PN_CHARS", "bnode", "plain", "datatype", "language", "literal", "ws", "wso", "subject", "property", "object", "graphName", "NQuads", "input", "dataset", "graphs", "lines", "lineNumber", "line", "match", "quad", "_unescape", "unique", "quads", "q", "_compareTriples", "s", "p", "o", "g", "nquad", "_escape", "termTypeMap", "triple", "componentName", "oldComponent", "newComponent", "t1", "t2", "_escapeRegex", "_unescapeRegex", "code", "u", "U", "require_URDNA2015", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "IdentifierIssuer", "MessageDigest", "Permuter", "NQuads", "createMessageDigest", "canonicalIdMap", "maxDeepIterations", "dataset", "quad", "hashToBlankNodes", "nonNormalized", "i", "id", "hashes", "nonUnique", "hash", "idList", "hashPathList", "issuer", "result", "_stringHashCompare", "oldIds", "normalized", "nQuad", "nquads", "info", "quads", "copy", "md", "nquad", "related", "position", "deepIterations", "hashToRelated", "chosenPath", "chosenIssuer", "permuter", "permutation", "issuerCopy", "path", "recursionList", "nextPermutation", "component", "entries", "resolve", "a", "b", "require_URGNA2012", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "MessageDigest", "URDNA2015", "id", "component", "key", "quad", "issuer", "hashToRelated", "quads", "i", "position", "related", "hash", "entries", "require_URDNA2015Sync", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "IdentifierIssuer", "MessageDigest", "Permuter", "NQuads", "createMessageDigest", "canonicalIdMap", "maxDeepIterations", "dataset", "quad", "hashToBlankNodes", "nonNormalized", "id", "hashes", "nonUnique", "hash", "idList", "hashPathList", "issuer", "result", "_stringHashCompare", "oldIds", "normalized", "nQuad", "nquads", "info", "quads", "copy", "md", "nquad", "related", "position", "deepIterations", "hashToRelated", "chosenPath", "chosenIssuer", "permuter", "permutation", "issuerCopy", "path", "recursionList", "nextPermutation", "component", "entries", "a", "b", "require_URGNA2012Sync", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "MessageDigest", "URDNA2015Sync", "id", "component", "key", "quad", "issuer", "hashToRelated", "quads", "position", "related", "hash", "entries", "require_rdf_canonize_native", "__commonJSMin", "init_virtual_process_polyfill", "init_buffer", "require_lib", "__commonJSMin", "exports", "init_virtual_process_polyfill", "init_buffer", "URDNA2015", "URGNA2012", "URDNA2015Sync", "URGNA2012Sync", "rdfCanonizeNative", "_inputToDataset", "input", "api", "options", "dataset", "resolve", "reject", "err", "canonical", "require_rdf_canonize", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_types", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "api", "v", "require_graphTypes", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "types", "api", "v", "key", "id", "require_JsonLdError", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "message", "name", "details", "require_util", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "graphTypes", "types", "IdentifierIssuer", "JsonLdError", "REGEX_BCP47", "REGEX_LINK_HEADERS", "REGEX_LINK_HEADER", "REGEX_LINK_HEADER_PARAMS", "REGEX_KEYWORD", "DEFAULTS", "api", "value", "rval", "i", "k", "v", "key", "headers", "h", "header", "entries", "match", "result", "params", "rel", "isFrame", "vv", "subject", "property", "val", "isList", "options", "hasValue", "values", "e", "input", "issuer", "_labelBlankNodes", "v1", "v2", "a", "b", "element", "keys", "ki", "require_constants", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "RDF", "XSD", "require_RequestQueue", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "loader", "self", "url", "promise", "require_url", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "types", "api", "str", "parser", "parsed", "o", "m", "i", "base", "iri", "rel", "transform", "path", "rval", "root", "baseSegments", "iriSegments", "last", "input", "output", "next", "done", "isAbsoluteRegex", "v", "require_xhr", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "parseLinkHeader", "buildHeaders", "LINK_HEADER_CONTEXT", "JsonLdError", "RequestQueue", "prependBase", "REGEX_LINK_HEADER", "secure", "headers", "xhr", "loader", "url", "req", "_get", "e", "doc", "alternate", "contentType", "linkHeader", "linkHeaders", "linkedContext", "resolve", "reject", "err", "k", "require_platform_browser", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "xhrLoader", "api", "jsonld", "require_iterator", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Yallist", "walker", "require_yallist", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Yallist", "Node", "list", "self", "item", "i", "l", "node", "next", "prev", "head", "tail", "push", "unshift", "res", "fn", "thisp", "walker", "n", "initial", "acc", "arr", "from", "to", "ret", "start", "deleteCount", "nodes", "insert", "p", "value", "inserted", "require_lru_cache", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "Yallist", "MAX", "LENGTH", "LENGTH_CALCULATOR", "ALLOW_STALE", "MAX_AGE", "DISPOSE", "NO_DISPOSE_ON_SET", "LRU_LIST", "CACHE", "UPDATE_AGE_ON_GET", "naiveLength", "LRUCache", "options", "max", "lc", "mL", "trim", "allowStale", "mA", "lC", "hit", "fn", "thisp", "walker", "prev", "forEachStep", "next", "k", "isStale", "h", "key", "value", "maxAge", "now", "len", "del", "item", "Entry", "get", "node", "arr", "l", "expiresAt", "self", "doUse", "diff", "length", "require_ResolvedContext", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "LRU", "MAX_ACTIVE_CONTEXTS", "document", "activeCtx", "processedCtx", "require_ContextResolver", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "_isArray", "_isObject", "_isString", "_asArray", "prependBase", "JsonLdError", "ResolvedContext", "MAX_CONTEXT_URLS", "sharedCache", "activeCtx", "context", "documentLoader", "base", "cycles", "allResolved", "ctx", "resolved", "_throwInvalidLocalContext", "key", "tagMap", "tag", "url", "remoteDoc", "_resolveContextUrls", "e", "i", "element", "term", "require_NQuads", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "require_events", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "JsonLdError", "_isArray", "_asArray", "api", "options", "eventHandler", "event", "_handle", "handlers", "doNext", "i", "handler", "_notSafeEventCodes", "next", "require_context", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "util", "JsonLdError", "_isArray", "_isObject", "_isString", "_isUndefined", "_isAbsoluteIri", "_isRelativeIri", "prependBase", "_handleEvent", "REGEX_BCP47", "REGEX_KEYWORD", "_asArray", "_compareShortestLeast", "INITIAL_CONTEXT_CACHE", "INITIAL_CONTEXT_CACHE_MAX_SIZE", "api", "activeCtx", "localCtx", "options", "propagate", "overrideProtected", "cycles", "events", "eventCaptureHandler", "event", "next", "originalOptions", "resolved", "rval", "resolvedContext", "ctx", "processed", "defined", "base", "value", "vocab", "_expandIri", "resolvedImport", "processedImport", "importCtx", "key", "keyCtx", "process", "url", "term", "validKeys", "keys", "k", "previousMapping", "simpleTerm", "mapping", "kw", "colon", "reverse", "id", "termDefined", "prefix", "suffix", "type", "container", "validContainers", "isValid", "hasSet", "c", "language", "direction", "nest", "_deepCompare", "relativeTo", "prependedResult", "cached", "initialContext", "_createInverseContext", "_cloneActiveContext", "_revertToPreviousContext", "inverse", "fastCurieMap", "irisToTerms", "defaultLanguage", "defaultDirection", "mappings", "terms", "ids", "iri", "entry", "isKeyword", "fastCurieEntry", "_addPreferredTerm", "_buildIriMap", "iriMap", "idx", "entries", "letter", "typeOrLanguageValue", "child", "version", "v", "x1", "x2", "x1Array", "i", "k1s", "k2s", "k1", "v1", "v2", "require_expand", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "JsonLdError", "_isArray", "_isObject", "_isEmptyObject", "_isString", "_isUndefined", "_isList", "_isValue", "_isGraph", "_isSubject", "_expandIri", "_getContextValue", "_isKeyword", "_processContext", "_processingMode", "_isAbsoluteIri", "REGEX_BCP47", "REGEX_KEYWORD", "_addValue", "_asArray", "_getValues", "_validateTypeValue", "_handleEvent", "api", "activeCtx", "activeProperty", "element", "options", "insideList", "insideIndex", "typeScopedContext", "_expandValue", "rval", "container", "i", "e", "expandedActiveProperty", "propertyScopedCtx", "keys", "mustRevert", "key", "expandedProperty", "typeKey", "value", "types", "type", "ctx", "_expandObject", "count", "validCount", "values", "v", "t", "_dropUnsafeObject", "code", "message", "expandedParent", "nests", "unexpandedValue", "isJsonType", "expandedValue", "ve", "vv", "includedResult", "language", "dir", "property", "reverseMap", "items", "ii", "item", "termCtx", "direction", "_expandLanguageMap", "asGraph", "indexKey", "propertyIndex", "_expandIndexMap", "isList", "nextActiveProperty", "nestedValues", "nv", "k", "languageMap", "expandedKey", "val", "isTypeIndex", "require_nodeMap", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "isKeyword", "graphTypes", "types", "util", "JsonLdError", "api", "input", "options", "issuer", "graphs", "graph", "name", "list", "node", "type", "_list", "subjects", "subject", "properties", "property", "referencedNode", "reverseMap", "reverseProperty", "items", "item", "itemName", "objects", "o", "id", "merged", "mergedNode", "value", "defaultGraph", "graphNames", "graphName", "nodeMap", "require_flatten", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "_isSubjectReference", "_createMergedNodeMap", "api", "input", "defaultGraph", "flattened", "keys", "ki", "node", "require_fromRdf", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "JsonLdError", "graphTypes", "types", "REGEX_BCP47", "_addValue", "_handleEvent", "RDF_LIST", "RDF_FIRST", "RDF_REST", "RDF_NIL", "RDF_TYPE", "RDF_JSON_LITERAL", "XSD_BOOLEAN", "XSD_DOUBLE", "XSD_INTEGER", "XSD_STRING", "api", "dataset", "options", "defaultGraph", "graphMap", "referencedOnce", "useRdfType", "useNativeTypes", "rdfDirection", "quad", "name", "nodeMap", "s", "p", "o", "node", "objectIsNode", "value", "_RDFToObject", "object", "graphObject", "nil", "usage", "property", "head", "list", "listNodes", "nodeKeyCount", "listNode", "result", "subjects", "subject", "graph", "graphSubjects", "graphSubject", "rval", "type", "e", "i", "language", "direction", "require_canonicalize", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "serialize", "object", "t", "cv", "ci", "comma", "value", "require_toRdf", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "createNodeMap", "isKeyword", "graphTypes", "jsonCanonicalize", "types", "util", "_handleEvent", "RDF_FIRST", "RDF_REST", "RDF_NIL", "RDF_TYPE", "RDF_JSON_LITERAL", "RDF_LANGSTRING", "XSD_BOOLEAN", "XSD_DOUBLE", "XSD_INTEGER", "XSD_STRING", "_isAbsoluteIri", "api", "input", "options", "issuer", "nodeMap", "dataset", "graphNames", "graphName", "graphTerm", "_graphToRDF", "graph", "ids", "id", "node", "properties", "property", "items", "item", "subject", "predicate", "key", "object", "_objectToRDF", "_listToRDF", "list", "rdfDirection", "first", "rest", "nil", "last", "result", "next", "value", "datatype", "_list", "require_frame", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "isKeyword", "graphTypes", "types", "util", "url", "JsonLdError", "_createNodeMap", "_mergeNodeMapGraphs", "api", "input", "frame", "options", "state", "issuer", "framed", "id", "_cleanupPreserve", "subjects", "parent", "property", "_validateFrame", "flags", "_getFrameFlag", "link", "matches", "_filterSubjects", "ids", "subject", "_addFrameOutput", "output", "_createsCircularReference", "_removeEmbed", "recurse", "subframe", "prop", "type", "o", "_createImplicitFrame", "list", "src", "oo", "_valueMatch", "next", "preserve", "reverseProp", "v", "idx", "key", "subjectToEmbed", "graph", "subjectStack", "i", "name", "flag", "rval", "_filterSubject", "wildcard", "matchesSome", "matchThis", "nodeValues", "isEmpty", "tt", "thisFrame", "hasDefault", "listValue", "nodeListValues", "lv", "_nodeMatch", "nv", "embeds", "embed", "useArray", "removeDependents", "value", "pattern", "nodeObject", "v1", "t1", "l1", "v2", "t2", "l2", "require_compact", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "JsonLdError", "_isArray", "_isObject", "_isString", "_isUndefined", "_isList", "_isValue", "_isGraph", "_isSimpleGraph", "_isSubjectReference", "_expandIri", "_getContextValue", "_isKeyword", "_processContext", "_processingMode", "_removeBase", "_prependBase", "REGEX_KEYWORD", "_addValue", "_asArray", "_compareShortestLeast", "api", "activeCtx", "activeProperty", "element", "options", "rval", "i", "compacted", "ctx", "linked", "insideReverse", "inputCtx", "propertyScopedCtx", "types", "typeContext", "type", "compactedType", "keys", "expandedProperty", "expandedValue", "compactedValue", "expandedIri", "alias", "isArray", "compactedProperty", "value", "useArray", "itemActiveProperty", "nestProperty", "nestResult", "_checkNestProperty", "expandedItem", "container", "isGraph", "isList", "inner", "compactedItem", "mapObject", "key", "indexKey", "containerKey", "others", "idKey", "typeKey", "iri", "relativeTo", "reverse", "base", "inverseCtx", "defaultLanguage", "containers", "typeOrLanguage", "typeOrLanguageValue", "list", "commonLanguage", "commonType", "item", "itemLanguage", "itemType", "lang", "dir", "term", "_selectTerm", "vocab", "suffix", "choice", "partialMatches", "iriMap", "maxPartialLength", "entry", "terms", "curie", "td", "_iri", "language", "direction", "preserveIndex", "keyCount", "isValueOnlyKey", "hasDefaultLanguage", "isValueString", "hasNullMapping", "prefs", "langDir", "el", "containerMap", "typeOrLanguageValueMap", "pref", "require_JsonLdProcessor", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "jsonld", "JsonLdProcessor", "input", "ctx", "require_jsonld", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "canonize", "platform", "util", "ContextResolver", "IdentifierIssuer", "JsonLdError", "LRU", "NQuads", "_expand", "_flatten", "_fromRDF", "_toRDF", "_frameMergedOrDefault", "_cleanupNull", "_isArray", "_isObject", "_isString", "_isSubjectReference", "_expandIri", "_getInitialContext", "_processContext", "_processingMode", "_compact", "_compactIri", "_createNodeMap", "_createMergedNodeMap", "_mergeNodeMaps", "_logEventHandler", "_logWarningEventHandler", "_safeEventHandler", "_setDefaultEventHandler", "_setupEventHandler", "_strictEventHandler", "_unhandledEventHandler", "wrapper", "jsonld", "_rdfParsers", "_resolvedContextCache", "input", "ctx", "options", "_setDefaults", "expanded", "activeCtx", "compacted", "tmp", "i", "hasContext", "graphAlias", "graph", "key", "toResolve", "contextsToProcess", "expandContext", "defaultBase", "remoteDoc", "localCtx", "flattened", "frame", "frameContext", "opts", "expandedFrame", "frameKeys", "framed", "parsedInput", "dataset", "format", "rdfParser", "parsedDataset", "docs", "doc", "mergeNodes", "issuer", "graphs", "_graphs", "graphName", "_nodeMap", "nodeMap", "defaultGraph", "keys", "ki", "node", "v", "url", "load", "e", "type", "contentType", "parser", "documentLoader", "defaults", "factory", "require_queue_microtask", "__commonJSMin", "exports", "module", "init_virtual_process_polyfill", "init_buffer", "promise", "cb", "err", "assertEncoding", "encoding", "isBufferEncoding", "StringDecoder", "utf16DetectIncompleteChar", "base64DetectIncompleteChar", "passThroughWrite", "Buffer", "buffer", "init_string_decoder", "__esmMin", "init_virtual_process_polyfill", "init_buffer", "charStr", "available", "charCode", "end", "size", "i", "c", "res", "cr", "buf", "enc", "src_exports", "__export", "MerklizationConstants", "Merklizer", "MtValue", "Path", "getDocumentLoader", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "canonicalDouble", "v", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "MerklizationConstants", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "import_blake_hash", "init_virtual_process_polyfill", "init_buffer", "Hex", "n", "src", "dst", "j", "i", "s", "c", "a", "b", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "scalar_exports", "__export", "abs", "add", "band", "bitLength", "bits", "bor", "bxor", "div", "e", "eq", "exp", "fromArray", "fromRprBE", "fromRprLE", "fromString", "geq", "gt", "isNegative", "isOdd", "isZero", "land", "leq", "lnot", "lor", "lt", "mod", "mul", "naf", "neg", "neq", "one", "pow", "shiftLeft", "shiftRight", "shl", "shr", "square", "sub", "toArray", "toLEBuff", "toNumber", "toRprBE", "toRprLE", "toString", "zero", "init_virtual_process_polyfill", "init_buffer", "hexLen", "s", "radix", "a", "acc", "i", "aS", "n", "E", "res", "z", "rem", "b", "buff", "o", "n8", "v", "l", "ch", "init_virtual_process_polyfill", "init_buffer", "_revTable", "i", "_revSlow", "idx", "bits", "res", "a", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "exp", "F", "base", "e", "isZero", "n", "bits", "res", "i", "init_virtual_process_polyfill", "init_buffer", "buildSqrt", "F", "eq", "mod", "alg5_tonelliShanks", "alg4_kong", "alg3_atkin", "alg2_shanks", "pm2mod4", "pow", "alg10_adj", "alg9_adj", "alg8_complex", "sub", "isOdd", "div", "c0", "c", "w", "a0", "v", "x", "b", "z", "b2k", "k", "i", "a", "a1", "n", "alfa", "x0", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "crypto_default", "getRandomBytes", "n", "array", "process", "i", "crypto_default", "init_virtual_process_polyfill", "init_buffer", "FFT", "G", "F", "opMulGF", "rem", "s", "nqr", "n", "i", "r", "nroots", "rootsi", "j", "p", "bits", "log2", "m", "__fft", "res", "twoinvm", "resn", "V", "PF", "pall", "offset", "step", "ndiv2", "p1", "p2", "out", "ZqField", "p", "bitLength", "e", "r", "buildSqrt", "FFT", "a", "b", "res", "nres", "base", "s", "aa", "bb", "t", "newt", "newr", "q", "exp", "nb", "n", "m", "c", "sq", "i", "j", "na", "nBytes", "getRandomBytes", "vs", "rng", "v", "buff", "o", "toRprLE", "toRprBE", "fromRprLE", "fromRprBE", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "import_wasmcurves", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "utils_exports", "__export", "array2buffer", "beBuff2int", "beInt2Buff", "bitReverse", "buffReverseBits", "buffer2array", "leBuff2int", "leInt2Buff", "log2", "stringifyBigInts", "stringifyFElements", "unstringifyBigInts", "unstringifyFElements", "init_virtual_process_polyfill", "init_buffer", "stringifyBigInts", "o", "fromRprLE", "res", "k", "unstringifyBigInts", "beBuff2int", "buff", "i", "offset", "buffV", "beInt2Buff", "n", "len", "r", "leBuff2int", "leInt2Buff", "bitLength", "stringifyFElements", "F", "unstringifyFElements", "_revTable", "_revSlow", "idx", "bits", "a", "bitReverse", "log2", "V", "buffReverseBits", "eSize", "tmp", "array2buffer", "arr", "sG", "buffer2array", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "thread", "self", "instance", "memory", "e", "data", "init", "res", "runTask", "code", "wasmModule", "alloc", "length", "u32", "currentPages", "requiredPages", "allocBuffer", "buffer", "p", "setBuffer", "getBuffer", "pointer", "u8", "task", "ctx", "oldAlloc", "i", "params", "j", "u32b", "init_virtual_process_polyfill", "init_buffer", "import_web_worker", "stringToBase64", "str", "process", "Buffer", "threadSource", "thread", "workerSource", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "import_wasmcurves", "init_virtual_process_polyfill", "init_buffer", "bls12381r", "e", "bn128r", "bls12381q", "bn128q", "Scalar", "scalar_exports", "utils", "utils_exports", "BabyJub", "F", "Scalar", "a", "b", "res", "beta", "gamma", "delta", "tau", "dtau", "base", "e", "rem", "exp", "P", "x2", "y2", "buff", "n", "sign", "x2h", "x", "ZqField", "babyJub", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "OPT", "utils", "poseidon_constants_opt_default", "N_ROUNDS_F", "N_ROUNDS_P", "SPONGE_INPUTS", "SPONGE_CHUNK_SIZE", "F", "ZqField", "Scalar", "pow5", "a", "Poseidon", "inputs", "t", "nRoundsF", "nRoundsP", "C", "S", "M", "P", "state", "i", "_", "acc", "j", "s0", "k", "msg", "frameSize", "dirty", "hash", "buff", "v", "idx", "frame", "poseidon", "init_virtual_process_polyfill", "init_buffer", "PoseidonHasher", "_hasher", "poseidon", "inp", "b", "MerklizationConstants", "DEFAULT_HASHER", "INTRINSICS", "MakeIntrinsicClass", "Class", "name", "Object", "defineProperty", "prototype", "Symbol", "toStringTag", "value", "writable", "enumerable", "configurable", "prop", "getOwnPropertyNames", "desc", "getOwnPropertyDescriptor", "DefineIntrinsic", "key", "Error", "GetIntrinsic", "intrinsic", "r", "o", "EPOCHNANOSECONDS", "TIMEZONE_ID", "ISO_YEAR", "ISO_MONTH", "ISO_DAY", "ISO_HOUR", "ISO_MINUTE", "ISO_SECOND", "ISO_MILLISECOND", "ISO_MICROSECOND", "ISO_NANOSECOND", "CALENDAR", "DATE_BRAND", "YEAR_MONTH_BRAND", "MONTH_DAY_BRAND", "INSTANT", "TIME_ZONE", "YEARS", "MONTHS", "WEEKS", "DAYS", "HOURS", "MINUTES", "SECONDS", "MILLISECONDS", "MICROSECONDS", "NANOSECONDS", "CALENDAR_ID", "globalSlots", "WeakMap", "GetSlotsSymbol", "for", "_a", "globalThis", "container", "get", "GetSlots", "CreateSlotsSymbol", "_b", "set", "create", "CreateSlots", "HasSlot", "ids", "myslots", "every", "id", "GetSlot", "TypeError", "SetSlot", "slots", "tzComponent", "timeZoneID", "RegExp", "source", "join", "yearpart", "monthpart", "daypart", "datesplit", "timesplit", "offset", "offsetpart", "annotation", "zoneddatetime", "time", "yearmonth", "monthday", "fraction", "durationTime", "duration", "ArrayIncludes", "Array", "includes", "ArrayPrototypePush", "push", "IntlDateTimeFormat", "Intl", "DateTimeFormat", "MathMin", "Math", "min", "MathMax", "max", "MathAbs", "abs", "MathFloor", "floor", "MathSign", "sign", "MathTrunc", "trunc", "NumberIsNaN", "Number", "isNaN", "NumberIsFinite", "isFinite", "NumberCtor", "StringCtor", "String", "NumberMaxSafeInteger", "MAX_SAFE_INTEGER", "ObjectCreate", "ObjectGetOwnPropertyDescriptor", "ReflectApply", "Reflect", "apply", "ReflectOwnKeys", "ownKeys", "ZERO", "JSBI", "BigInt", "ONE", "SIXTY", "TWENTY_FOUR", "THOUSAND", "MILLION", "BILLION", "NEGATIVE_ONE", "HOUR_NANOS", "multiply", "MINUTE_NANOS", "DAY_NANOS", "NS_MIN", "NS_MAX", "YEAR_MIN", "YEAR_MAX", "BEFORE_FIRST_OFFSET_TRANSITION", "ABOUT_TEN_YEARS_NANOS", "ABOUT_ONE_YEAR_NANOS", "TWO_WEEKS_NANOS", "BUILTIN_CALENDAR_IDS", "isZero", "equal", "GetMethod", "obj", "methodName", "result", "Call", "target", "thisArgument", "argumentsList", "args", "arguments", "length", "IsObject", "ToNumber", "ToIntegerOrInfinity", "number", "integer", "IsIntegralNumber", "argument", "absValue", "ToString", "ToIntegerWithTruncation", "RangeError", "ToPositiveIntegerWithTruncation", "valueParam", "property", "ToIntegerIfIntegral", "divmod", "x", "y", "quotient", "divide", "remainder", "isNegativeJSBI", "lessThan", "signJSBI", "BUILTIN_CASTS", "Map", "BUILTIN_DEFAULTS", "SINGULAR_PLURAL_UNITS", "SINGULAR_FOR", "map", "e", "PLURAL_FOR", "p", "s", "UNITS_DESCENDING", "DURATION_FIELDS", "from", "keys", "sort", "IntlDateTimeFormatEnUsCache", "getIntlDateTimeFormatEnUsForTimeZone", "timeZoneIdentifier", "instance", "timeZone", "hour12", "era", "year", "month", "day", "hour", "minute", "second", "ToObject", "CopyDataProperties", "excludedKeys", "excludedValues", "nextKey", "some", "is", "propertyIsEnumerable", "call", "propValue", "IsTemporalInstant", "item", "IsTemporalTimeZone", "IsTemporalCalendar", "IsTemporalDuration", "IsTemporalDate", "IsTemporalTime", "IsTemporalDateTime", "IsTemporalYearMonth", "IsTemporalMonthDay", "IsTemporalZonedDateTime", "RejectTemporalLikeObject", "calendar", "ParseTemporalTimeZone", "stringIdent", "ianaName", "z", "PARSE.timeZoneID", "test", "ParseISODateTime", "GetCanonicalTimeZoneIdentifier", "FormatTimeZoneOffsetString", "ParseTimeZoneOffsetString", "MaybeFormatCalendarAnnotation", "showCalendar", "FormatCalendarAnnotation", "ToTemporalCalendarIdentifier", "isoString", "match", "PARSE.zoneddatetime", "exec", "yearString", "slice", "hasTime", "millisecond", "microsecond", "nanosecond", "offsetSign", "offsetHours", "offsetMinutes", "offsetSeconds", "offsetFraction", "endsWith", "annotations", "critical", "matchAll", "PARSE.annotation", "RejectDateTime", "ParseTemporalYearMonthString", "PARSE.yearmonth", "referenceISODay", "ParseTemporalMonthDayString", "PARSE.monthday", "referenceISOYear", "ParseTemporalInstant", "offsetNs", "BalanceISODateTime", "epochNs", "GetUTCEpochNanoseconds", "RegulateISODate", "yearParam", "monthParam", "dayParam", "overflow", "RejectISODate", "ConstrainISODate", "RegulateTime", "hourParam", "minuteParam", "secondParam", "millisecondParam", "microsecondParam", "nanosecondParam", "RejectTime", "ConstrainToRange", "ToTemporalDurationRecord", "PARSE.duration", "element", "years", "months", "weeks", "days", "hours", "fHours", "minutesStr", "fMinutes", "secondsStr", "fSeconds", "minutes", "seconds", "excessNanoseconds", "nanoseconds", "microseconds", "milliseconds", "RejectDuration", "partial", "temporalDurationLike", "undefined", "any", "ToTemporalOverflow", "options", "GetOption", "ToTemporalDisambiguation", "ToTemporalRoundingMode", "fallback", "ToTemporalOffset", "ToCalendarNameOption", "ToTemporalRoundingIncrement", "increment", "roundingIncrement", "integerIncrement", "ValidateTemporalRoundingIncrement", "dividend", "inclusive", "maximum", "ToFractionalSecondDigits", "normalizedOptions", "digitsValue", "fractionalSecondDigits", "digitCount", "ToSecondsStringPrecisionRecord", "smallestUnit", "precision", "unit", "REQUIRED", "GetTemporalUnit", "unitGroup", "requiredOrDefault", "extraValues", "allowedSingular", "singular", "category", "defaultVal", "allowedValues", "plural", "retval", "has", "ToRelativeTemporalObject", "relativeTo", "offsetBehaviour", "matchMinutes", "TemporalDateTimeToDate", "GetTemporalCalendarSlotValueWithISODefault", "fieldNames", "CalendarFields", "fields", "PrepareTemporalFields", "dateOptions", "InterpretTemporalDateTimeFields", "ToTemporalTimeZoneSlotValue", "IsBuiltinCalendar", "ASCIILowercase", "CreateTemporalDate", "CreateTemporalZonedDateTime", "InterpretISODateTimeOffset", "DefaultTemporalLargestUnit", "v", "LargerOfTwoTemporalUnits", "unit1", "unit2", "indexOf", "bag", "requiredFields", "emptySourceErrorMessage", "ToTemporalTimeRecord", "completeness", "field", "valueDesc", "ToTemporalDate", "itemParam", "GetPlainDateTimeFor", "CalendarDateFromFields", "date", "ToTemporalDateTime", "CreateTemporalDateTime", "ToTemporalDuration", "ToTemporalInstant", "ns", "ToTemporalMonthDay", "calendarAbsent", "calendarFromItem", "ToTemporalCalendarSlotValue", "monthCode", "CalendarMonthDayFromFields", "CreateTemporalMonthDay", "ToTemporalTime", "PARSE.time", "ToTemporalYearMonth", "CalendarYearMonthFromFields", "CreateTemporalYearMonth", "disambiguation", "offsetOpt", "matchMinute", "dt", "GetInstantFor", "subtract", "possibleInstants", "GetPossibleInstantsFor", "candidate", "candidateOffset", "GetOffsetNanosecondsFor", "roundedCandidateOffset", "toNumber", "RoundNumberToIncrement", "offsetStr", "timeZoneString", "toString", "DisambiguatePossibleInstants", "ToTemporalZonedDateTime", "CreateTemporalDateSlots", "isoYear", "isoMonth", "isoDay", "RejectDateRange", "TemporalPlainDate", "CreateTemporalDateTimeSlots", "h", "ms", "I", "RejectDateTimeRange", "TemporalPlainDateTime", "CreateTemporalMonthDaySlots", "TemporalPlainMonthDay", "CreateTemporalYearMonthSlots", "RejectToRange", "TemporalPlainYearMonth", "CreateTemporalZonedDateTimeSlots", "epochNanoseconds", "ValidateEpochNanoseconds", "instant", "TemporalZonedDateTime", "fieldNamesParam", "calendarObj", "CalendarMergeFields", "additionalFields", "CalendarDateAdd", "dateAddParam", "dateAdd", "CalendarDateUntil", "otherDate", "dateUntilParam", "dateUntil", "CalendarYear", "dateLike", "CalendarMonth", "CalendarMonthCode", "CalendarDay", "CalendarEra", "CalendarEraYear", "CalendarDayOfWeek", "CalendarDayOfYear", "CalendarWeekOfYear", "CalendarYearOfWeek", "CalendarDaysInWeek", "CalendarDaysInMonth", "CalendarDaysInYear", "CalendarMonthsInYear", "CalendarInLeapYear", "calendarLike", "object", "identifier", "slotValue", "ToTemporalCalendarObject", "CalendarEquals", "one", "two", "ThrowIfCalendarsNotEqual", "errorMessageAction", "cal1", "cal2", "ConsolidateCalendars", "sOne", "sTwo", "dateFromFieldsParam", "temporalTimeZoneLike", "ToTemporalTimeZoneIdentifier", "ToTemporalTimeZoneObject", "TimeZoneEquals", "dateTime", "TemporalDateTimeToTime", "getOffsetNanosecondsForParam", "timeZoneObject", "GetOffsetStringFor", "GetISOPartsFromEpoch", "Instant", "numInstants", "utcns", "dayBefore", "dayAfter", "add", "offsetBefore", "PlainDateTime", "earlier", "AddDateTime", "later", "possible", "getPossibleInstantsForParam", "ISOYearString", "ISODateTimePartString", "part", "FormatSecondsStringPart", "secs", "fractionNumber", "padStart", "TemporalInstantToString", "outputTimeZone", "FormatISOTimeZoneOffsetString", "TemporalDurationToString", "formatNumber", "num", "DurationSign", "roundingMode", "RoundDuration", "dateParts", "timeParts", "secondParts", "nsBigInt", "S", "msBigInt", "secondsBigInt", "total", "TotalDurationNanoseconds", "decimalPart", "unshift", "TemporalDateToString", "TemporalDateTimeToString", "RoundISODateTime", "TemporalMonthDayToString", "monthDay", "resultString", "calendarID", "calendarString", "TemporalYearMonthToString", "yearMonth", "TemporalZonedDateTimeToString", "zdt", "showTimeZone", "showOffset", "RoundInstant", "tz", "IsTimeZoneOffsetString", "string", "OFFSET", "resolvedOptions", "GetNamedTimeZoneOffsetNanoseconds", "GetNamedTimeZoneDateTimeParts", "reducedYear", "yearCycles", "nsIn400YearCycle", "reducedUTC", "utc", "offsetNanosecondsParam", "offsetNanoseconds", "hourString", "minuteString", "secondString", "post", "legacyDate", "Date", "setUTCHours", "setUTCFullYear", "getTime", "greaterThan", "epochMilliseconds", "nanos", "getUTCFullYear", "getUTCMonth", "getUTCDate", "getUTCHours", "getUTCMinutes", "getUTCSeconds", "getUTCMilliseconds", "datetime", "format", "parts", "split", "toUpperCase", "maxJSBI", "afterLatestPossibleTzdbRuleChange", "SystemUTCEpochNanoSeconds", "GetNamedTimeZoneNextTransition", "oneYearLater", "uppercap", "leftNanos", "leftOffsetNs", "rightNanos", "rightOffsetNs", "bisect", "GetNamedTimeZonePreviousTransition", "afterLatestRule", "isFarFuture", "lowercap", "lastPrecomputed", "newTimeToCheck", "LeapYear", "ISODaysInMonth", "standard", "leapyear", "DayOfWeek", "m", "Y", "c", "dow", "DayOfYear", "WeekOfYear", "doy", "doj", "week", "mon", "w", "d", "l", "BalanceISOYearMonth", "BalanceISODate", "daysIn400YearCycle", "nCycles", "daysInYear", "testYear", "deltaDays", "BalanceTime", "NonNegativeBigIntDivmod", "daysParam", "hoursParam", "minutesParam", "secondsParam", "millisecondsParam", "microsecondsParam", "nanosecondsParam", "offsetShift", "NanosecondsToDays", "TemporalInstant", "dayLengthNs", "startNs", "start", "endNs", "end", "dtStart", "dtEnd", "daysNumber", "DifferenceISODateTime", "intermediateNs", "AddZonedDateTime", "daysBigInt", "isOverflow", "relativeInstant", "oneDayFartherNs", "relativeNs", "greaterThanOrEqual", "BalanceDuration", "largestUnit", "BalancePossiblyInfiniteDuration", "nanosecondsBigInt", "microsecondsBigInt", "millisecondsBigInt", "minutesBigInt", "hoursBigInt", "UnbalanceDurationRelative", "yearsParam", "monthsParam", "weeksParam", "relativeToParam", "TemporalDuration", "signBI", "oneYear", "oneMonth", "oneWeek", "newRelativeTo", "untilOptions", "untilResult", "oneYearMonths", "oneYearDays", "MoveRelativeDate", "oneMonthDays", "oneWeekDays", "CalculateOffsetShift", "after", "CreateNegatedTemporalDuration", "propSign", "DifferenceISODate", "y1", "m1", "d1", "y2", "m2", "d2", "CompareISODate", "mid", "AddISODate", "midSign", "larger", "smaller", "DifferenceTime", "h1", "min1", "s1", "ms1", "n", "ns1", "h2", "min2", "s2", "ms2", "ns2", "DifferenceInstant", "diff", "y1Param", "mon1Param", "d1Param", "mon2", "f", "mon1", "timeSign", "date1", "date2", "dateLargestUnit", "CopyOptions", "DifferenceZonedDateTime", "nsDiff", "timeRemainderNs", "intermediate", "GetDifferenceSettings", "op", "group", "disallowed", "fallbackSmallest", "smallestLargestDefaultUnit", "ALLOWED_UNITS", "reduce", "allowed", "unitInfo", "defaultLargestUnit", "DifferenceTemporalInstant", "operation", "otherParam", "other", "settings", "onens", "twons", "DifferenceTemporalPlainDate", "plainDate", "DifferenceTemporalPlainDateTime", "plainDateTime", "DifferenceTemporalPlainTime", "plainTime", "DifferenceTemporalPlainYearMonth", "thisFields", "thisDate", "otherFields", "DifferenceTemporalZonedDateTime", "zonedDateTime", "AdjustRoundedDurationDays", "AddTime", "AddDuration", "w1", "w2", "G", "dateDuration1", "dateDuration2", "differenceOptions", "AddInstant", "i", "sum", "addedDate", "dtIntermediate", "AddDurationToOrSubtractDurationFromDuration", "optionsParam", "GetOptionsObject", "AddDurationToOrSubtractDurationFromInstant", "durationLike", "disallowedProperties", "record", "AddDurationToOrSubtractDurationFromPlainDateTime", "AddDurationToOrSubtractDurationFromPlainTime", "temporalTime", "AddDurationToOrSubtractDurationFromPlainYearMonth", "fieldsCopy", "startDate", "Duration", "nextMonth", "endOfMonth", "durationToAdd", "optionsCopy", "AddDurationToOrSubtractDurationFromZonedDateTime", "quantity", "mode", "tiebreaker", "tie", "expandIsNearer", "wholeDays", "roundedRemainder", "nsPerTimeUnit", "RoundTime", "nsPerUnit", "rounded", "DaysUntil", "MoveRelativeZonedDateTime", "direction", "dayStart", "dayEnd", "zdtRelative", "dayLength", "yearsDuration", "yearsLater", "yearsMonthsWeeksLater", "wholeDaysLater", "yearsPassed", "oldRelativeTo", "divisor", "BigIntDivideToNumber", "yearsMonths", "yearsMonthsLater", "allNanoseconds", "ComparisonResult", "BigIntFloorDiv", "left", "right", "ToBigIntExternal", "arg", "jsbiBI", "ToBigInt", "prim", "toPrimFn", "toPrimitive", "now", "DefaultTimeZone", "CreateOnePropObject", "propName", "str", "replace", "code", "charCodeAt", "fromCharCode", "PARSE.offset", "getState", "leftParam", "rightParam", "lstateParam", "rstateParam", "lstate", "rstate", "middle", "mstate", "DATE", "YM", "MD", "TIME", "DATETIME", "INST", "ORIGINAL", "TZ_RESOLVED", "CAL_ID", "LOCALE", "OPTIONS", "descriptor", "ObjectAssign", "assign", "ObjectHasOwnProperty", "hasOwnProperty", "getPropLazy", "val", "DateTimeFormatImpl", "locale", "this", "hasOptions", "original", "ro", "clonedResolved", "dateAmend", "yearMonthAmend", "monthDayAmend", "timeAmend", "datetimeAmend", "instantAmend", "supportedLocalesOf", "locales", "propertyDescriptors", "rest", "formatter", "extractOverrides", "formatRange", "a", "b", "isTemporalObject", "sameTemporalType", "aa", "aformatter", "bb", "bformatter", "formatToParts", "formatRangeToParts", "amend", "amended", "opt", "weekday", "timeZoneName", "dateStyle", "hasTimeOptions", "dayPeriod", "timeStyle", "hasDateOptions", "ES.IsTemporalDate", "ES.IsTemporalTime", "ES.IsTemporalDateTime", "ES.IsTemporalZonedDateTime", "ES.IsTemporalYearMonth", "ES.IsTemporalMonthDay", "ES.IsTemporalInstant", "temporalObj", "main", "DateTime", "ES.GetInstantFor", "ES.ToTemporalCalendarIdentifier", "ut", "ht", "constructor", "ES.ToBigInt", "ES.ValidateEpochNanoseconds", "epochSeconds", "ES.BigIntFloorDiv", "epochMicroseconds", "ES.ToBigIntExternal", "ES.AddDurationToOrSubtractDurationFromInstant", "until", "ES.DifferenceTemporalInstant", "since", "round", "roundToParam", "roundTo", "ES.CreateOnePropObject", "ES.GetOptionsObject", "ES.ToTemporalRoundingIncrement", "ES.ToTemporalRoundingMode", "ES.GetTemporalUnit", "ES.REQUIRED", "ES.ValidateTemporalRoundingIncrement", "roundedNs", "ES.RoundInstant", "equals", "ES.ToTemporalInstant", "digits", "ES.ToFractionalSecondDigits", "ES.ToTemporalTimeZoneSlotValue", "ES.ToSecondsStringPrecisionRecord", "ES.TemporalInstantToString", "toJSON", "toLocaleString", "valueOf", "toZonedDateTime", "ES.IsObject", "ES.ToTemporalCalendarSlotValue", "ES.CreateTemporalZonedDateTime", "toZonedDateTimeISO", "timeZoneParam", "static", "epochSecondsParam", "ES.ToNumber", "epochMillisecondsParam", "epochMicrosecondsParam", "epochNanosecondsParam", "oneParam", "twoParam", "oneNs", "twoNs", "ArraySort", "ObjectEntries", "entries", "OriginalSet", "Set", "SetPrototypeAdd", "SetPrototypeValues", "values", "impl", "Calendar", "idParam", "ES.ToString", "ES.IsBuiltinCalendar", "ES.ASCIILowercase", "ES.IsTemporalCalendar", "dateFromFields", "yearMonthFromFields", "monthDayFromFields", "fieldsArray", "delete", "mergeFields", "fieldsParam", "additionalFieldsParam", "ES.ToObject", "ES.CopyDataProperties", "additionalFieldsCopy", "additionalKeys", "overriddenKeys", "fieldKeysToIgnore", "merged", "fieldsKeys", "ES.Call", "dateParam", "durationParam", "ES.ToTemporalDate", "ES.ToTemporalDuration", "ES.ToTemporalOverflow", "ES.BalanceDuration", "eraYear", "dayOfWeek", "dayOfYear", "weekOfYear", "yearOfWeek", "daysInWeek", "daysInMonth", "monthsInYear", "inLeapYear", "ES.ToTemporalCalendarObject", "monthCodeNumberPart", "startsWith", "buildMonthCode", "leap", "resolveNonLunisolarMonth", "calendarDate", "monthsPerYear", "ES.RejectToRange", "ES.ConstrainToRange", "numberPart", "calendarSlotValue", "ES.PrepareTemporalFields", "ES.RegulateISODate", "ES.CreateTemporalDate", "ES.CreateTemporalYearMonth", "useYear", "ES.CreateTemporalMonthDay", "ix", "ES.AddISODate", "ES.DifferenceISODate", "ES.DayOfWeek", "ES.DayOfYear", "ES.WeekOfYear", "ES.ISODaysInMonth", "ES.LeapYear", "OneObjectCache", "cacheToClone", "calls", "hits", "misses", "performance", "entry", "MAX_CACHE_ENTRIES", "report", "setObject", "objectMap", "cache", "toUtcIsoDateString", "ES.ISOYearString", "ES.ISODateTimePartString", "simpleDateDiff", "HelperBase", "eraLength", "hasEra", "erasBeginMidYear", "getFormatter", "isoToCalendarDate", "isoDate", "JSON", "stringify", "func", "cached", "dateTimeFormat", "type", "matches", "monthExtra", "normalize", "toLowerCase", "reviseIntlEra", "checkIcuBugs", "adjustCalendarDate", "forEach", "keyReverse", "validateCalendarDate", "constantEra", "calendarDateParam", "fromLegacyDate", "calendarType", "largestMonth", "regulateMonthDayNaive", "maximumMonthLength", "calendarToIsoDate", "originalDate", "keyOriginal", "isoEstimate", "estimateIsoDate", "calculateSameMonthResult", "diffDays", "testIsoEstimate", "addDaysIso", "minimumMonthLength", "testCalendarDate", "roundtripEstimate", "diffTotalDaysEstimate", "compareCalendarDates", "oldRoundtripEstimate", "oldSign", "temporalToCalendarDate", "date1Param", "date2Param", "ES.ComparisonResult", "regulateDate", "addDaysCalendar", "addedIso", "addMonthsCalendar", "absMonths", "oldCalendarDate", "daysInPreviousMonth", "monthsInOldYear", "addCalendar", "addedYears", "addedMonths", "initialDays", "untilCalendar", "calendarOne", "calendarTwo", "calendarDaysUntil", "totalDays", "diffYears", "diffInYearSign", "current", "next", "addedIsoDate", "addedCalendarDate", "endOfMonthIso", "previousMonthDate", "previousMonth", "lastDayOfPreviousMonthIso", "startOfCalendarYear", "startOfCalendarMonth", "oneIso", "twoIso", "isoDaysUntil", "closestCalendar", "closestIso", "calendarOfStartDateIso", "calendarYear", "roundTripCalendarDate", "HebrewHelper", "Tishri", "regular", "Heshvan", "Kislev", "Tevet", "Shevat", "Adar", "Nisan", "Iyar", "Sivan", "Tamuz", "Av", "Elul", "minMaxMonthLength", "minOrMax", "getMonthCode", "monthInfo", "find", "IslamicBaseHelper", "DAYS_PER_ISLAMIC_YEAR", "DAYS_PER_ISO_YEAR", "IslamicHelper", "IslamicUmalquraHelper", "IslamicTblaHelper", "IslamicCivilHelper", "IslamicRgsaHelper", "IslamicCcHelper", "PersianHelper", "IndianHelper", "nextYear", "vulnerableToBceBug", "toLocaleDateString", "isGregorianLeapYear", "getMonthInfo", "GregorianBaseHelper", "originalEras", "super", "v8IsVulnerableToJulianBug", "calendarIsVulnerableToJulianBug", "eras", "anchorEra", "erasParam", "reverseOf", "filter", "isAnchor", "anchorEpoch", "hasYearZero", "reversedEra", "isoEpoch", "e1", "e2", "lastEraReversed", "genericName", "completeEraYear", "checkField", "currentValue", "eraFromYear", "adjustedCalendarDate", "matchingEra", "ES.CompareISODate", "OrthodoxBaseHelper", "EthioaaHelper", "CopticHelper", "EthiopicHelper", "RocHelper", "BuddhistHelper", "GregoryHelper", "JapaneseHelper", "ChineseBaseHelper", "getMonthList", "getCalendarDate", "daysPastFeb1", "isoStringFeb1", "setUTCDate", "newYearGuess", "calendarMonthString", "tv", "calendarDay", "calendarYearToVerify", "isoDaysDelta", "oldCalendarDay", "oldMonthString", "monthIndex", "done", "monthString", "withoutML", "monthEntries", "matchingMonthEntry", "ChineseHelper", "DangiHelper", "NonIsoCalendar", "helper", "getCacheForObject", "added", "isoAdded", "newTemporalObject", "cacheOne", "cacheTwo", "startOfYear", "startOfMonthCalendar", "startOfNextMonthCalendar", "startOfYearCalendar", "startOfNextYearCalendar", "Helper", "PlainDate", "isoYearParam", "isoMonthParam", "isoDayParam", "calendarParam", "ES.CreateTemporalDateSlots", "ES.ToIntegerWithTruncation", "calendarId", "ES.CalendarEra", "ES.CalendarEraYear", "ES.CalendarYear", "ES.CalendarMonth", "ES.CalendarMonthCode", "ES.CalendarDay", "ES.CalendarDayOfWeek", "ES.CalendarDayOfYear", "ES.CalendarWeekOfYear", "ES.CalendarYearOfWeek", "ES.CalendarDaysInWeek", "ES.CalendarDaysInMonth", "ES.CalendarDaysInYear", "ES.CalendarMonthsInYear", "ES.CalendarInLeapYear", "with", "temporalDateLike", "ES.RejectTemporalLikeObject", "ES.CalendarFields", "ES.CalendarMergeFields", "ES.CalendarDateFromFields", "withCalendar", "ES.CalendarDateAdd", "ES.CreateNegatedTemporalDuration", "ES.DifferenceTemporalPlainDate", "slot", "ES.CalendarEquals", "ES.TemporalDateToString", "ES.ToCalendarNameOption", "toPlainDateTime", "temporalTimeParam", "ES.CreateTemporalDateTime", "ES.ToTemporalTime", "ES.IsTemporalTimeZone", "timeZoneLike", "toPlainYearMonth", "ES.CalendarYearMonthFromFields", "toPlainMonthDay", "ES.CalendarMonthDayFromFields", "getISOFields", "getCalendar", "ES.CreateTemporalDateTimeSlots", "temporalDateTimeLike", "ES.InterpretTemporalDateTimeFields", "withPlainTime", "withPlainDate", "temporalDateParam", "temporalDate", "ES.ConsolidateCalendars", "ES.AddDurationToOrSubtractDurationFromPlainDateTime", "ES.DifferenceTemporalPlainDateTime", "ES.RoundISODateTime", "ES.ToTemporalDateTime", "ES.TemporalDateTimeToString", "ES.ToTemporalDisambiguation", "toPlainDate", "ES.TemporalDateTimeToDate", "toPlainTime", "ES.TemporalDateTimeToTime", "isoHour", "isoMicrosecond", "isoMillisecond", "isoMinute", "isoNanosecond", "isoSecond", "val1", "val2", "ES.ToIntegerIfIntegral", "ES.RejectDuration", "ES.IsTemporalDuration", "ES.DurationSign", "blank", "partialDuration", "negated", "ES.AddDurationToOrSubtractDurationFromDuration", "ES.DefaultTemporalLargestUnit", "ES.ToRelativeTemporalObject", "smallestUnitPresent", "ES.LargerOfTwoTemporalUnits", "largestUnitPresent", "ES.UnbalanceDurationRelative", "ES.RoundDuration", "ES.AdjustRoundedDurationDays", "ES.MoveRelativeZonedDateTime", "balanceResult", "ES.BalancePossiblyInfiniteDuration", "Infinity", "ES.TemporalDurationToString", "DurationFormat", "console", "warn", "B", "shift1", "ES.CalculateOffsetShift", "shift2", "totalNs1", "ES.TotalDurationNanoseconds", "totalNs2", "PlainMonthDay", "referenceISOYearParam", "ES.CreateTemporalMonthDaySlots", "temporalMonthDayLike", "ES.ToTemporalMonthDay", "ES.TemporalMonthDayToString", "receiverFieldNames", "inputFieldNames", "mergedFields", "ES.SystemUTCEpochNanoSeconds", "ES.DefaultTimeZone", "tZ", "ES.GetPlainDateTimeFor", "plainDateTimeISO", "Now", "plainDateISO", "plainTimeISO", "timeZoneId", "zonedDateTimeISO", "TemporalTimeToString", "ES.RoundTime", "ES.FormatSecondsStringPart", "PlainTime", "isoHourParam", "isoMinuteParam", "isoSecondParam", "isoMillisecondParam", "isoMicrosecondParam", "isoNanosecondParam", "ES.RejectTime", "temporalTimeLike", "partialTime", "ES.ToTemporalTimeRecord", "ES.RegulateTime", "ES.AddDurationToOrSubtractDurationFromPlainTime", "ES.DifferenceTemporalPlainTime", "TimeZone", "timeZoneIdentifierParam", "ES.GetCanonicalTimeZoneIdentifier", "getOffsetNanosecondsFor", "instantParam", "ES.IsTimeZoneOffsetString", "ES.ParseTimeZoneOffsetString", "ES.GetNamedTimeZoneOffsetNanoseconds", "getOffsetStringFor", "ES.GetOffsetStringFor", "getPlainDateTimeFor", "getInstantFor", "dateTimeParam", "getPossibleInstantsFor", "ES.GetUTCEpochNanoseconds", "nsEarlier", "nsLater", "earliest", "latest", "getNextTransition", "startingPointParam", "startingPoint", "ES.GetNamedTimeZoneNextTransition", "getPreviousTransition", "ES.GetNamedTimeZonePreviousTransition", "ES.ToTemporalTimeZoneObject", "PlainYearMonth", "referenceISODayParam", "ES.CreateTemporalYearMonthSlots", "temporalYearMonthLike", "ES.AddDurationToOrSubtractDurationFromPlainYearMonth", "ES.DifferenceTemporalPlainYearMonth", "ES.ToTemporalYearMonth", "ES.TemporalYearMonthToString", "customResolvedOptions", "ZonedDateTime", "ES.CreateTemporalZonedDateTimeSlots", "ES.ToTemporalTimeZoneIdentifier", "hoursInDay", "today", "tomorrowFields", "tomorrow", "todayNs", "tomorrowNs", "ES.BigIntDivideToNumber", "ES.GetOffsetNanosecondsFor", "temporalZonedDateTimeLike", "ES.ToTemporalOffset", "ES.InterpretISODateTimeOffset", "thisDt", "withTimeZone", "ES.AddDurationToOrSubtractDurationFromZonedDateTime", "ES.DifferenceTemporalZonedDateTime", "instantStart", "ES.AddZonedDateTime", "lessThanOrEqual", "ES.ToTemporalZonedDateTime", "ES.TimeZoneEquals", "ES.TemporalZonedDateTimeToString", "localeCalendarIdentifier", "calendarIdentifier", "startOfDay", "toInstant", "getTimeZone", "Pt", "Et", "types", "Temporal.Instant", "Temporal.Calendar", "Temporal.PlainDate", "Temporal.PlainDateTime", "Temporal.Duration", "Temporal.PlainMonthDay", "Temporal.PlainTime", "Temporal.TimeZone", "Temporal.PlainYearMonth", "Temporal.ZonedDateTime", "type", "descriptor", "Object", "getOwnPropertyDescriptor", "configurable", "enumerable", "writable", "defineProperty", "bytesEncoder", "_MtValue", "value", "h", "DEFAULT_HASHER", "MerklizationConstants", "Pt", "v", "MtValue", "__publicField", "init_virtual_process_polyfill", "init_buffer", "import_jsonld", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "EMPTY_NODE_VALUE", "EMPTY_NODE_STRING", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "PROOF_FLAG_LEN", "NOT_EMPTIES_LEN", "init_virtual_process_polyfill", "init_buffer", "qString", "FIELD_SIZE", "MAX_NUM_IN_FIELD", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "checkBigIntInField", "bigNum", "FIELD_SIZE", "bytesEqual", "b1", "b2", "areEqual", "ele", "idx", "swapEndianness", "bytes", "tempBuffer", "tempBytes", "_", "bytes2BinaryString", "acc", "i", "testBit", "bitMap", "n", "testBitBigEndian", "setBitBigEndian", "hextable", "bytes2Hex", "u", "arr", "j", "v", "str2Bytes", "str", "_", "i", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "bigIntToUINT8Array", "bigNum", "n256", "bytes", "i", "newHashFromBigInt", "bigNum", "checkBigIntInField", "bytes", "bigIntToUINT8Array", "hash", "Hash", "init_virtual_process_polyfill", "init_buffer", "hashElems", "e", "hashBigInt", "poseidon", "newHashFromBigInt", "hashElemsKey", "k", "init_virtual_process_polyfill", "init_buffer", "elemBytesToBigInts", "es", "e", "checkEntryInField", "bigInts", "flag", "b", "checkBigIntInField", "init_virtual_process_polyfill", "init_buffer", "circomSiblingsFromSiblings", "siblings", "levels", "i", "ZERO_HASH", "init_virtual_process_polyfill", "init_buffer", "getPath", "numLevels", "k", "path", "idx", "testBit", "siblings2Bytes", "siblings", "siblingBytesBuff", "siblingBytes", "v", "i", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "leafKey", "k", "v", "hashElemsKey", "nodeValue", "type", "a", "b", "bytes", "kBytes", "bigIntToUINT8Array", "vBytes", "idx", "NodeLeaf", "k", "v", "_NodeLeaf_key", "__classPrivateFieldSet", "ZERO_HASH", "__classPrivateFieldGet", "leafKey", "nodeValue", "NodeMiddle", "cL", "cR", "_NodeMiddle_key", "hashElems", "NodeEmpty", "_NodeEmpty_key", "EMPTY_NODE_VALUE", "EMPTY_NODE_STRING", "init_virtual_process_polyfill", "init_buffer", "siblignsFroomProof", "proof", "sibIdx", "siblings", "i", "testBitBigEndian", "ZERO_HASH", "Hash", "_bytes", "bytes", "swapEndianness", "bytes2Hex", "hash", "bytesEqual", "bytes2BinaryString", "ZERO_HASH", "InMemoryDB", "_prefix", "_InMemoryDB_kvMap", "_InMemoryDB_currentRoot", "__classPrivateFieldSet", "ZERO_HASH", "k", "kBytes", "__classPrivateFieldGet", "n", "r", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "promisifyRequest", "request", "resolve", "reject", "createStore", "dbName", "storeName", "dbp", "txMode", "callback", "db", "defaultGetStoreFunc", "defaultGetStore", "get", "key", "customStore", "store", "set", "value", "IndexedDBStorage", "_prefix", "databaseName", "_IndexedDBStorage_currentRoot", "__classPrivateFieldSet", "ZERO_HASH", "bytes2Hex", "createStore", "k", "kBytes", "key", "obj", "get", "NodeEmpty", "cL", "Hash", "cR", "NodeMiddle", "v", "NodeLeaf", "n", "set", "__classPrivateFieldGet", "root", "r", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "ErrKeyNotFound", "ErrReachedMaxLevel", "ErrInvalidNodeFound", "ErrEntryIndexAlreadyExists", "ErrNotWritable", "init_virtual_process_polyfill", "init_buffer", "ErrNotFound", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "CircomVerifierProof", "_root", "ZERO_HASH", "_siblings", "_oldKey", "_oldValue", "_isOld0", "_key", "_value", "_fnc", "CircomProcessorProof", "_oldRoot", "_newRoot", "_newKey", "_newValue", "init_virtual_process_polyfill", "init_buffer", "Proof", "arrBuff", "NOT_EMPTIES_LEN", "bsLen", "PROOF_FLAG_LEN", "bs", "siblingBytes", "siblings2Bytes", "siblignsFroomProof", "Merkletree", "_db", "_writable", "_maxLevels", "_Merkletree_db", "_Merkletree_root", "_Merkletree_writable", "_Merkletree_maxLevel", "__classPrivateFieldSet", "__classPrivateFieldGet", "k", "v", "ErrNotWritable", "kHash", "newHashFromBigInt", "vHash", "newNodeLeaf", "NodeLeaf", "path", "getPath", "newRootKey", "n", "checkEntryInField", "hIndex", "hValue", "newLeaf", "oldLeaf", "lvl", "pathNewLeaf", "pathOldLeaf", "ErrReachedMaxLevel", "newNodeMiddle", "nextKey", "NodeMiddle", "Hash", "oldLeafKey", "newLeafKey", "key", "ErrNotFound", "nKey", "bytesEqual", "ErrEntryIndexAlreadyExists", "ErrInvalidNodeFound", "siblings", "i", "ErrKeyNotFound", "checkBigIntInField", "cp", "CircomProcessorProof", "circomSiblingsFromSiblings", "ZERO_HASH", "NodeEmpty", "node", "nodeKey", "toUpload", "newNode", "f", "rootKey", "proof", "value", "CircomVerifierProof", "p", "Proof", "siblingKey", "setBitBigEndian", "res", "err", "cnt", "lr", "emptyNodes", "s", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "RDF", "XSD", "SWAP", "IRIs_default", "import_queue_microtask", "xsd", "IRIs_default", "escapeSequence", "escapeReplacements", "illegalIriChars", "lineModeRegExps", "invalidRegExp", "N3Lexer", "options", "key", "callback", "inputFinished", "input", "currentLineLength", "whiteSpaceMatch", "comment", "emitToken", "line", "firstChar", "type", "value", "prefix", "match", "matchLength", "inconclusive", "reportSyntaxError", "length", "token", "start", "end", "self", "item", "invalid", "replaced", "sequence", "unicode4", "unicode8", "escapedChar", "charCode", "opening", "openingLength", "closingPos", "backslashCount", "raw", "lines", "issue", "err", "queueMicrotask", "tokens", "error", "e", "data", "Buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "rdf", "xsd", "IRIs_default", "DEFAULTGRAPH", "_blankNodeCounter", "DataFactory", "namedNode", "blankNode", "variable", "literal", "defaultGraph", "quad", "N3DataFactory_default", "Term", "id", "other", "NamedNode", "Literal", "atPos", "dtPos", "char", "xsd", "rdf", "BlankNode", "name", "Variable", "DefaultGraph", "DEFAULTGRAPH", "Quad", "Term", "subject", "predicate", "object", "graph", "DEFAULTGRAPH", "other", "namedNode", "iri", "NamedNode", "blankNode", "name", "BlankNode", "_blankNodeCounter", "literal", "value", "languageOrDataType", "Literal", "datatype", "xsd", "variable", "Variable", "defaultGraph", "DEFAULTGRAPH", "quad", "subject", "predicate", "object", "graph", "Quad", "blankNodePrefix", "N3Parser", "options", "initDataFactory", "format", "isTurtle", "isTriG", "isNTriples", "isNQuads", "isN3", "isLineMode", "iri", "N3Lexer", "baseIRI", "fragmentPos", "type", "graph", "subject", "predicate", "object", "n3Mode", "token", "context", "quantifier", "value", "prefix", "empty", "item", "list", "next", "previousList", "stack", "parent", "literal", "datatype", "listItem", "completed", "inversePredicate", "prefixNode", "entity", "afterPath", "quad", "contextStack", "message", "err", "noop", "length", "result", "i", "pathStart", "segmentStart", "input", "quadCallback", "prefixCallback", "quads", "error", "e", "t", "parser", "factory", "namedNode", "IRIs_default", "N3DataFactory_default", "import_jsonld", "init_virtual_process_polyfill", "init_buffer", "DatasetIdx", "graphName", "idx", "init_virtual_process_polyfill", "init_buffer", "getGraphName", "q", "MerklizationConstants", "sortArr", "arr", "a", "b", "byteEncoder", "validateValue", "val", "Pt", "convertStringToXsdValue", "dataType", "valueStr", "value", "canonicalDouble", "convertAnyToString", "v", "datatype", "isDoubleType", "init_virtual_process_polyfill", "init_buffer", "RefTp", "tp", "val", "n", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "hasFetch", "isFunction", "_blobConstructor", "blobConstructor", "xhr", "checkTypeSupport", "type", "haveArrayBuffer", "haveSlice", "arraybuffer", "msstream", "mozchunkedarraybuffer", "overrideMimeType", "vbArray", "value", "init_util", "init_virtual_process_polyfill", "init_buffer", "init_util", "init_virtual_process_polyfill", "init_buffer", "init_events", "init_util", "init_virtual_process_polyfill", "init_buffer", "init_util", "init_process", "init_virtual_process_polyfill", "init_buffer", "init_events", "init_util", "init_virtual_process_polyfill", "init_buffer", "buffer_list_default", "BufferList", "v", "entry", "ret", "s", "p", "n", "Buffer", "i", "init_string_decoder", "init_process", "Readable", "ReadableState", "debug", "debuglog", "inherits_default", "events_default", "prependListener", "emitter", "event", "fn", "listenerCount", "type", "options", "stream", "Duplex", "hwm", "defaultHwm", "buffer_list_default", "StringDecoder", "Readable", "options", "ReadableState", "events_default", "chunk", "encoding", "state", "Buffer", "readableAddChunk", "stream", "addToFront", "er", "chunkInvalid", "onEofChunk", "e", "_e", "skipAdd", "emitReadable", "maybeReadMore", "needMoreData", "enc", "StringDecoder", "MAX_HWM", "computeNewHighWaterMark", "n", "howMuchToRead", "debug", "nOrig", "endReadable", "doRead", "ret", "fromList", "nextTick", "emitReadable_", "flow", "maybeReadMore_", "len", "dest", "pipeOpts", "src", "doEnd", "endFn", "onend", "cleanup", "onunpipe", "readable", "ondrain", "pipeOnDrain", "cleanedUp", "onclose", "onfinish", "onerror", "ondata", "increasedAwaitDrain", "indexOf", "unpipe", "listenerCount", "prependListener", "dests", "_i", "i", "ev", "fn", "res", "nReadingNextTick", "self", "resume", "resume_", "paused", "method", "events", "forEach", "fromListPartial", "list", "hasStrings", "copyFromBufferString", "copyFromBuffer", "p", "c", "str", "nb", "buf", "endReadableNT", "xs", "f", "l", "x", "init_virtual_process_polyfill", "init_buffer", "init_util", "init_events", "init_process", "Writable", "WritableState", "inherits_default", "EventEmitter", "nop", "WriteReq", "chunk", "encoding", "cb", "options", "stream", "deprecate", "Duplex", "hwm", "defaultHwm", "noDecode", "er", "onwrite", "CorkedRequest", "current", "out", "Writable", "options", "Duplex", "WritableState", "EventEmitter", "writeAfterEnd", "stream", "cb", "er", "nextTick", "validChunk", "state", "chunk", "valid", "Buffer", "encoding", "ret", "nop", "writeOrBuffer", "clearBuffer", "decodeChunk", "len", "last", "WriteReq", "doWrite", "writev", "onwriteError", "sync", "onwriteStateUpdate", "onwrite", "finished", "needFinish", "afterWrite", "onwriteDrain", "finishMaybe", "entry", "l", "buffer", "holder", "count", "CorkedRequest", "endWritable", "prefinish", "need", "_this", "err", "inherits_default", "Duplex", "Readable", "keys", "Writable", "v", "method", "Duplex", "options", "Readable", "Writable", "onend", "nextTick", "onEndNT", "self", "init_virtual_process_polyfill", "init_buffer", "init_util", "inherits_default", "Transform", "Duplex", "TransformState", "stream", "er", "data", "afterTransform", "ts", "cb", "rs", "Transform", "options", "Duplex", "TransformState", "stream", "er", "done", "chunk", "encoding", "cb", "ts", "rs", "n", "ws", "init_virtual_process_polyfill", "init_buffer", "init_util", "inherits_default", "PassThrough", "Transform", "PassThrough", "options", "Transform", "chunk", "encoding", "cb", "inherits_default", "Stream", "events_default", "Readable", "Writable", "Duplex", "Transform", "PassThrough", "Stream", "events_default", "dest", "options", "source", "ondata", "chunk", "ondrain", "onend", "onclose", "didOnEnd", "onerror", "er", "cleanup", "rStates", "IncomingMessage", "xhr", "response", "mode", "self", "Readable", "process", "read", "header", "_i", "_it", "reader", "result", "Buffer", "headers", "matches", "key", "overrideMimeType", "mimeType", "charsetMatch", "inherits_default", "rStates", "newData", "buffer", "i", "init_virtual_process_polyfill", "init_buffer", "to_arraybuffer_default", "buf", "isBuffer", "arrayCopy", "len", "i", "decideMode", "preferBinary", "useFetch", "hasFetch", "mozchunkedarraybuffer", "msstream", "arraybuffer", "vbArray", "request_default", "ClientRequest", "opts", "self", "Writable", "Buffer", "name", "overrideMimeType", "inherits_default", "unsafeHeaders", "value", "lowerName", "headersObj", "body", "blobConstructor", "buffer", "to_arraybuffer_default", "headers", "response", "reason", "xhr", "err", "process", "rStates", "statusValid", "status", "IncomingMessage", "chunk", "encoding", "cb", "data", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "maxInt", "base", "tMin", "tMax", "skew", "damp", "initialBias", "initialN", "delimiter", "regexNonASCII", "regexSeparators", "errors", "baseMinusTMin", "base", "tMin", "floor", "stringFromCharCode", "error", "type", "map", "array", "fn", "length", "result", "mapDomain", "string", "parts", "labels", "encoded", "ucs2decode", "output", "counter", "value", "extra", "digitToBasic", "digit", "flag", "adapt", "delta", "numPoints", "firstTime", "k", "floor", "damp", "baseMinusTMin", "tMax", "base", "skew", "encode", "input", "n", "delta", "handledCPCount", "basicLength", "bias", "j", "m", "q", "k", "t", "currentValue", "output", "inputLength", "handledCPCountPlusOne", "baseMinusT", "qMinusT", "ucs2decode", "initialN", "initialBias", "stringFromCharCode", "delimiter", "maxInt", "floor", "error", "base", "tMin", "tMax", "digitToBasic", "adapt", "toASCII", "input", "mapDomain", "string", "regexNonASCII", "encode", "init_util", "init_virtual_process_polyfill", "init_buffer", "hasOwnProperty", "obj", "prop", "isArray", "xs", "stringifyPrimitive", "v", "stringify", "sep", "eq", "name", "map", "objectKeys", "k", "ks", "f", "res", "i", "key", "parse", "qs", "options", "regexp", "maxKeys", "len", "x", "idx", "kstr", "vstr", "Url", "protocolPattern", "portPattern", "simplePathPattern", "delims", "unwise", "autoEscape", "nonHostChars", "hostEndingChars", "hostnameMaxLen", "hostnamePartPattern", "hostnamePartStart", "unsafeProtocol", "hostlessProtocol", "slashedProtocol", "urlParse", "url", "parseQueryString", "slashesDenoteHost", "isObject", "u", "parse", "self", "isString", "queryIndex", "splitter", "uSplit", "slashRegex", "rest", "simplePath", "proto", "lowerProto", "slashes", "i", "hec", "l", "p", "hostEnd", "auth", "atSign", "parseHost", "ipv6Hostname", "hostparts", "part", "newpart", "j", "k", "validParts", "notHost", "bit", "toASCII", "h", "ae", "esc", "hash", "qm", "s", "format", "format", "self", "auth", "protocol", "pathname", "hash", "host", "query", "isObject", "stringify", "search", "slashedProtocol", "match", "Url", "Url", "relative", "urlParse", "Url", "relative", "isString", "rel", "result", "tkeys", "tk", "tkey", "rkeys", "rk", "rkey", "slashedProtocol", "relPath", "keys", "v", "k", "hostlessProtocol", "p", "s", "isSourceAbs", "isRelAbs", "mustEndAbs", "removeAllDots", "srcPath", "psychotic", "authInHost", "isNullOrUndefined", "isNull", "last", "hasTrailingSlash", "up", "i", "isAbsolute", "parseHost", "self", "host", "port", "portPattern", "request", "opts", "cb", "urlParse", "defaultProtocol", "protocol", "host", "port", "path", "req", "request_default", "get", "Agent", "METHODS", "STATUS_CODES", "http_default", "import_util", "import_constants", "import_JsonLdError", "import_url", "JsonLDLoader", "url", "redirects", "isHttp", "isHttps", "JsonLdError", "alternate", "res", "body", "_fetch", "doc", "statusText", "http_default", "link", "location", "contentType", "linkHeaders", "linkedContext", "nextUrl", "ipfsMethodCat", "normalizeIPFSNodeURL", "ipfsNodeURL", "apiMethod", "apiSuffix", "trimRightSlash", "trimLeftSlash", "buildIpfsGatewayURL", "ipfsGatewayURL", "documentURL", "loadIPFS", "ipfsURLPrefix", "loadFromIPFSNode", "loadFromIPFSGateway", "catRequestURL", "errorBody", "e", "document", "method", "options", "removeCredentialsFromURL", "text", "urlObj", "getJsonLdDocLoader", "ipfsURL", "getHasher", "opts", "DEFAULT_HASHER", "getDocumentLoader", "ipfsNodeURL", "ipfsGatewayURL", "getJsonLdDocLoader", "_RDFDataset", "graphs", "doc", "documentLoader", "getDocumentLoader", "normalizedData", "MerklizationConstants", "quads", "N3Parser", "ds", "q", "graphName", "graphQuads", "idx", "callback", "graphNames", "a", "parent", "getGraphName", "result", "qKey", "RefTp", "found", "quad", "objKey", "DatasetIdx", "RDFDataset", "__publicField", "graph", "init_virtual_process_polyfill", "init_buffer", "getMerkleTreeInitParam", "prefix", "writable", "maxLevels", "InMemoryDB", "str2Bytes", "addEntriesToMerkleTree", "mt", "entries", "e", "k", "v", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "init_virtual_process_polyfill", "init_buffer", "import_jsonld", "_Path", "parts", "hasher", "DEFAULT_HASHER", "p", "h", "keyParts", "i", "byteEncoder", "docStr", "path", "opts", "doc", "MerklizationConstants", "jsonldOpts", "getDocumentLoader", "emptyCtx", "parsedCtx", "m", "id", "ctxStr", "ctxObj", "expP", "expandType", "ctx", "prop", "rval", "defaultT", "propDef", "ldCTX", "pathParts", "acceptArray", "term", "newPathParts", "num", "moreParts", "elemKeys", "sortArr", "typedScopedCtx", "k", "key", "keyCtx", "types", "e", "tt", "td", "expTerm", "getHasher", "contextStr", "typeName", "typeDef", "typeID", "Path", "__publicField", "ctxTyp", "fieldPath", "fullPath", "typePath", "init_virtual_process_polyfill", "init_buffer", "_QuadArrKey", "q", "getGraphName", "s", "QuadArrKey", "__publicField", "nodes", "res", "key", "c", "Relationship", "parents", "children", "hasher", "DEFAULT_HASHER", "n", "dsIdx", "ds", "idx", "k", "Path", "RDFDataset", "predicate", "nextKey", "parentIdx", "parent", "parentKey", "QuadArrKey", "childrenMap", "childQuad", "childRef", "RefTp", "childIdx", "parentPredicate", "r", "graphName", "quads", "q", "qIdx", "DatasetIdx", "parentQuad", "qKey", "childrenM", "nextIdx", "_RDFEntry", "key", "value", "dataType", "hasher", "DEFAULT_HASHER", "validateValue", "MtValue", "k", "v", "ds", "RDFDataset", "MerklizationConstants", "rs", "Relationship", "entries", "graphProcessor", "graphName", "quads", "counts", "QuadArrKey", "seenCount", "quadIdx", "q", "quadGraphIdx", "DatasetIdx", "qKey", "qo", "qoVal", "convertStringToXsdValue", "count", "idx", "path", "e", "RDFEntry", "__publicField", "Pt", "Merklizer", "srcDoc", "mt", "hasher", "DEFAULT_HASHER", "entries", "compacted", "db", "writable", "maxLevels", "getMerkleTreeInitParam", "Merkletree", "p", "kHash", "proof", "entry", "value", "MtValue", "val", "path", "realPath", "Path", "key", "e", "parts", "obj", "traversedParts", "currentPath", "idx", "docStr", "opts", "getHasher", "mz", "doc", "documentLoader", "getDocumentLoader", "dataset", "RDFDataset", "RDFEntry", "k", "addEntriesToMerkleTree", "dataType", "h", "valueStr", "convertAnyToString", "xsdValue", "convertStringToXsdValue"]
}
